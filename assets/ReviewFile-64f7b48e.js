import{i as M,_ as g,e as r,o as h,c as b,k as _,v as f,a as e,l as U,r as v,b as p,f as x,F as S,q as I,s as $,x as N,y as k,d as P,u as R,z as E}from"./index-5c09f3b2.js";import{M as F,p as D,a as V,b as L}from"./pdf.worker-b84ca006.js";import{u as C}from"./Addfile-4e68b33c.js";const j=M("userStore",{state:()=>({guestUser:{}})});const O={setup(){const a=j(),s=r(""),l=r("");return{guestName:s,guestEmail:l,saveUser:()=>{a.$patch({name:s.value,email:l.value})}}}},T={class:"mb-5"},A=e("h4",null,"**基本資料(必填)",-1);function W(a,s,l,t,i,d){return h(),b("div",T,[A,_(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>t.guestName=o),type:"text",class:"basicInfo w-300 guestBorder",placeholder:"請輸入您的姓名",onChange:s[1]||(s[1]=(...o)=>t.saveUser&&t.saveUser(...o))},null,544),[[f,t.guestName]]),_(e("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>t.guestEmail=o),type:"email",class:"basicInfo w-300 guestBorder",placeholder:"請輸入您的電子信箱",onChange:s[3]||(s[3]=(...o)=>t.saveUser&&t.saveUser(...o))},null,544),[[f,t.guestEmail]])])}const q=g(O,[["render",W]]);const z={setup(){const a=r(null);let s;U(()=>{s=new F(a.value)});const l=()=>{s.show()},t=r(!1),i=()=>{d.value!=""&&o.value!=""&&n.value!=""?t.value=!0:t.value=!1},d=r(""),o=r(""),n=r("");return{modalRef:a,deleteModal:s,openModal:l,saveInviter:()=>{console.log(d.value),console.log(o.value),console.log(n.value)},inviteEmail:d,inviteFirstname:o,inviteLastname:n,isInvite:t,checkInvite:i}}},G={class:"modal fade",ref:"modalRef",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},H={class:"modal-dialog modal-dialog-centered"},X={class:"modal-content"},Y=e("div",{class:"p-2 d-flex justify-content-end"},[e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),J=e("div",{class:"modal-header border-bottom border-success"},[e("h5",{class:"modal-title text-success"},"邀請簽署人")],-1),K={class:"modal-body d-flex flex-column"},Q=e("label",{for:"othersEmail"},"簽署人信箱*",-1),Z={class:"d-flex"},ee=e("label",{for:"othersFirstName"},"姓氏*",-1),se=e("label",{for:"othersLastName"},"名字*",-1),te={class:"modal-footer d-flex flex-column"},ne=["disabled"];function oe(a,s,l,t,i,d){const o=v("font-awesome-icon");return h(),b(S,null,[e("button",{type:"button",class:"wh-50 bg-white guestBorder",onClick:s[0]||(s[0]=n=>t.openModal())},[p(o,{icon:"fa-solid fa-user-plus"})]),e("div",G,[e("div",H,[e("div",X,[Y,J,e("div",K,[Q,_(e("input",{id:"othersEmail",type:"email","onUpdate:modelValue":s[1]||(s[1]=n=>t.inviteEmail=n),class:"basicInfo guestBorder",placeholder:"請輸入您的電子信箱",onChange:s[2]||(s[2]=(...n)=>t.checkInvite&&t.checkInvite(...n))},null,544),[[f,t.inviteEmail]]),e("div",Z,[e("div",null,[ee,_(e("input",{id:"othersFirstName","onUpdate:modelValue":s[3]||(s[3]=n=>t.inviteFirstname=n),type:"text",class:"basicInfo guestBorder",placeholder:"請輸入簽署人姓氏",onChange:s[4]||(s[4]=(...n)=>t.checkInvite&&t.checkInvite(...n))},null,544),[[f,t.inviteFirstname]])]),e("div",null,[se,_(e("input",{id:"othersLastName",type:"text","onUpdate:modelValue":s[5]||(s[5]=n=>t.inviteLastname=n),class:"basicInfo othersName",placeholder:"請輸入簽署人名字",onChange:s[6]||(s[6]=(...n)=>t.checkInvite&&t.checkInvite(...n))},null,544),[[f,t.inviteLastname]])])])]),e("div",te,[e("button",{type:"submit",class:"btn btn-secondary px-5","data-bs-dismiss":"modal",disabled:!t.isInvite,onSubmit:s[7]||(s[7]=x((...n)=>t.saveInviter&&t.saveInviter(...n),["prevent"]))}," 儲存被邀請人資訊 ",40,ne)])])])],512)],64)}const ae=g(z,[["render",oe]]);const ie={components:{ModalInviteOthers:ae},setup(){}},le={class:"w-300 mb-5 d-flex justify-content-between"},ce=e("div",null,[e("h4",null,"邀請簽署人"),e("div",{class:"form-check form-switch"},[e("div",{class:"d-flex justify-content-between"},[e("span",{class:"px-1"},"無簽署順序"),e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault"}),e("span",{class:"px-1"},"有簽署順序")]),e("div",{class:"d-flex justify-content-between"},[e("span",null,"無期限"),e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault"}),e("span",null,"指定簽署期限")])])],-1);function de(a,s,l,t,i,d){const o=v("modal-invite-others");return h(),b("div",le,[ce,p(o)])}const re=g(ie,[["render",de]]);D.GlobalWorkerOptions.workerSrc=V;const ue={setup(){const a=C(),s=a.myData,l=async o=>{console.log(o);const n=atob(o.substring(o.indexOf(",")+1)),w=await(await D.getDocument({data:n}).promise).getPage(1),m=w.getViewport({scale:window.devicePixelRatio}),c=document.getElementById("canvas");console.log(c);const y=c.getContext("2d");console.log(y),c.height=m.height,c.width=m.width;const B={canvasContext:y,viewport:m};return w.render(B).promise.then(()=>c)},t=async o=>{const n=1/window.devicePixelRatio;return new I.fabric.Image(o,{id:"renderPDF",scaleX:n,scaleY:n})},i=new I.fabric.Canvas("canvas"),d=async o=>{i.requestRenderAll();const n=await l(s),u=await t(n);i.setWidth(u.width/window.devicePixelRatio),i.setHeight(u.height/window.devicePixelRatio),i.setBackgroundImage(u,i.renderAll.bind(i))};return $(()=>a.myData,(o,n)=>{console.log(o,n),d()}),{}}},ve={id:"canvas",width:"900",height:"800"};function pe(a,s,l,t,i,d){return h(),b("canvas",ve)}const me=g(ue,[["render",pe],["__scopeId","data-v-8cf6cda7"]]);const _e={components:{MySigning:L,BasicInfo:q,InviteOthers:re,PdfPreview:me},setup(){const a=r(!1),s=C,{isComplete:l}=N(s),t=()=>{l?a.value=!0:a.value=!1},i=()=>{console.log("成功drag")},d=()=>{console.log("完成簽名檔托放")},o=R();return{isAble:a,checkSignandBackInfo:t,completedSign:()=>{o.push("/guest")},putDownSign:d,checkDrag:i}}},fe={class:"bg-light"},ge={class:"navbar navbar-light"},he={class:"container-fluid d-flex"},be=e("ul",{class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},[e("li",null,[e("a",{class:"dropdown-item",href:"#"},"個人與偏好設定")]),e("li",null,[e("a",{class:"dropdown-item",href:"#"},"簽屬人清單")]),e("li",null,[e("a",{class:"dropdown-item",href:"#"},"登出")])],-1),we={class:"bannerStep border border-2 my-4"},xe={class:"m-3 mx-auto d-flex justify-content-between w-60"},ye={class:"mx-2 p-1 text-success"},Ie=E('<hr class="separateLine"><li><span class="steps active-step">2</span>加入簽名檔</li><hr class="separateLine"><li><span class="steps">3</span>確認檔案</li><hr class="separateLine"><li><span class="steps">4</span>下載檔案</li>',6),ke={class:"reviewContent"},Se={class:"d-flex justify-content-around"},De={class:"p-5 w-30 d-flex flex-column"},Ce={class:"nextStep d-flex align-items-end"},Be=["disabled"];function Me(a,s,l,t,i,d){const o=v("font-awesome-icon"),n=v("pdf-preview"),u=v("basic-info"),w=v("my-signing"),m=v("invite-others");return h(),b(S,null,[e("div",fe,[e("nav",ge,[e("div",he,[k(a.$slots,"guest"),k(a.$slots,"memember"),be])])]),e("div",we,[e("ul",xe,[e("li",null,[e("span",ye,[p(o,{icon:"fa-solid fa-circle-check",size:"xl"})]),P(" 成功上傳檔案 ")]),Ie])]),e("div",ke,[e("div",Se,[e("div",{class:"pdfpreview w-70",onDragenter:s[0]||(s[0]=(...c)=>t.checkDrag&&t.checkDrag(...c)),onDragleave:s[1]||(s[1]=(...c)=>a.closDrag&&a.closDrag(...c)),onDrop:s[2]||(s[2]=x((...c)=>t.putDownSign&&t.putDownSign(...c),["prevent"])),onDragover:s[3]||(s[3]=x(()=>{},["prevent"]))},[p(n)],32),e("div",De,[p(u),p(w),p(m),e("div",Ce,[e("button",{type:"button",class:"btn btn-secondary",disabled:!t.isAble,onSubmit:s[4]||(s[4]=x((...c)=>t.completedSign&&t.completedSign(...c),["prevent"]))}," 下一步 ",40,Be)])])])])],64)}const Re=g(_e,[["render",Me]]);export{Re as R};
