var Sn=Object.defineProperty;var wn=(Me,V,Be)=>V in Me?Sn(Me,V,{enumerable:!0,configurable:!0,writable:!0,value:Be}):Me[V]=Be;var Nt=(Me,V,Be)=>(wn(Me,typeof V!="symbol"?V+"":V,Be),Be),Mi=(Me,V,Be)=>{if(!V.has(Me))throw TypeError("Cannot "+Be)};var be=(Me,V,Be)=>(Mi(Me,V,"read from private field"),Be?Be.call(Me):V.get(Me)),Ye=(Me,V,Be)=>{if(V.has(Me))throw TypeError("Cannot add the same private member more than once");V instanceof WeakSet?V.add(Me):V.set(Me,Be)},st=(Me,V,Be,pe)=>(Mi(Me,V,"write to private field"),pe?pe.call(Me,Be):V.set(Me,Be),Be),Ri=(Me,V,Be,pe)=>({set _(de){st(Me,V,de,Be)},get _(){return be(Me,V,pe)}}),Je=(Me,V,Be)=>(Mi(Me,V,"access private method"),Be);import{a as MySigning,u as useSignature}from"./MySigning-068818e8.js";import{C as commonjsRequire,D as require$$2,E as getDefaultExportFromCjs,_ as _export_sfc,e as ref,B as watch,r as resolveComponent,o as openBlock,c as createElementBlock,a as createBaseVNode,b as createVNode}from"./index-89554e87.js";import"./Addfile-687d6dc1.js";function _mergeNamespaces(Me,V){for(var Be=0;Be<V.length;Be++){const pe=V[Be];if(typeof pe!="string"&&!Array.isArray(pe)){for(const de in pe)if(de!=="default"&&!(de in Me)){const De=Object.getOwnPropertyDescriptor(pe,de);De&&Object.defineProperty(Me,de,De.get?De:{enumerable:!0,get:()=>pe[de]})}}}return Object.freeze(Object.defineProperty(Me,Symbol.toStringTag,{value:"Module"}))}var pdfExports={},pdf={get exports(){return pdfExports},set exports(Me){pdfExports=Me}};(function(module,exports){(function(V,Be){module.exports=Be()})(globalThis,()=>(()=>{var __webpack_modules__=[,(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.VerbosityLevel=V.Util=V.UnknownErrorException=V.UnexpectedResponseException=V.UNSUPPORTED_FEATURES=V.TextRenderingMode=V.StreamType=V.RenderingIntentFlag=V.PermissionFlag=V.PasswordResponses=V.PasswordException=V.PageActionEventType=V.OPS=V.MissingPDFException=V.LINE_FACTOR=V.LINE_DESCENT_FACTOR=V.InvalidPDFException=V.ImageKind=V.IDENTITY_MATRIX=V.FormatError=V.FontType=V.FeatureTest=V.FONT_IDENTITY_MATRIX=V.DocumentActionEventType=V.CMapCompressionType=V.BaseException=V.AnnotationType=V.AnnotationStateModelType=V.AnnotationReviewState=V.AnnotationReplyType=V.AnnotationMode=V.AnnotationMarkedState=V.AnnotationFlag=V.AnnotationFieldFlag=V.AnnotationEditorType=V.AnnotationEditorPrefix=V.AnnotationEditorParamsType=V.AnnotationBorderStyleType=V.AnnotationActionEventType=V.AbortException=void 0,V.arrayByteLength=B,V.arraysToBytes=H,V.assert=F,V.bytesToString=W,V.createPromiseCapability=ye,V.createValidAbsoluteUrl=b,V.escapeString=oe,V.getModificationDate=ue,V.getVerbosityLevel=p,V.info=P,V.isArrayBuffer=Fe,V.isArrayEqual=Pe,V.isAscii=me,V.objectFromMap=te,V.objectSize=Z,V.setVerbosityLevel=y,V.shadow=D,V.string32=q,V.stringToBytes=z,V.stringToPDFString=se,V.stringToUTF16BEString=xe,V.stringToUTF8String=Ae,V.unreachable=S,V.utf8StringToString=Se,V.warn=E,Be(2);const pe=[1,0,0,1,0,0];V.IDENTITY_MATRIX=pe;const de=[.001,0,0,.001,0,0];V.FONT_IDENTITY_MATRIX=de;const De=1.35;V.LINE_FACTOR=De;const ge=.35;V.LINE_DESCENT_FACTOR=ge;const f={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};V.RenderingIntentFlag=f;const h={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};V.AnnotationMode=h;const t="pdfjs_internal_editor_";V.AnnotationEditorPrefix=t;const o={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};V.AnnotationEditorType=o;const c={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};V.AnnotationEditorParamsType=c;const s={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};V.PermissionFlag=s;const e={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};V.TextRenderingMode=e;const a={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};V.ImageKind=a;const r={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};V.AnnotationType=r;const n={MARKED:"Marked",REVIEW:"Review"};V.AnnotationStateModelType=n;const l={MARKED:"Marked",UNMARKED:"Unmarked"};V.AnnotationMarkedState=l;const u={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};V.AnnotationReviewState=u;const d={GROUP:"Group",REPLY:"R"};V.AnnotationReplyType=d;const i={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};V.AnnotationFlag=i;const g={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};V.AnnotationFieldFlag=g;const x={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};V.AnnotationBorderStyleType=x;const m={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};V.AnnotationActionEventType=m;const A={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};V.DocumentActionEventType=A;const k={O:"PageOpen",C:"PageClose"};V.PageActionEventType=k;const v={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};V.StreamType=v;const _={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};V.FontType=_;const K={ERRORS:0,WARNINGS:1,INFOS:5};V.VerbosityLevel=K;const M={NONE:0,BINARY:1,STREAM:2};V.CMapCompressionType=M;const j={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};V.OPS=j;const O={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};V.UNSUPPORTED_FEATURES=O;const T={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};V.PasswordResponses=T;let R=K.WARNINGS;function y(le){Number.isInteger(le)&&(R=le)}function p(){return R}function P(le){R>=K.INFOS&&console.log(`Info: ${le}`)}function E(le){R>=K.WARNINGS&&console.log(`Warning: ${le}`)}function S(le){throw new Error(le)}function F(le,he){le||S(he)}function C(le){if(!le)return!1;switch(le.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function b(le,he=null,ce=null){if(!le)return null;try{if(ce&&typeof le=="string"){if(ce.addDefaultProtocol&&le.startsWith("www.")){const Re=le.match(/\./g);Re&&Re.length>=2&&(le=`http://${le}`)}if(ce.tryConvertEncoding)try{le=Ae(le)}catch{}}const Te=he?new URL(le,he):new URL(le);if(C(Te))return Te}catch{}return null}function D(le,he,ce){return Object.defineProperty(le,he,{value:ce,enumerable:!0,configurable:!0,writable:!1}),ce}const U=function(){function he(ce,Te){this.constructor===he&&S("Cannot initialize BaseException."),this.message=ce,this.name=Te}return he.prototype=new Error,he.constructor=he,he}();V.BaseException=U;class X extends U{constructor(he,ce){super(he,"PasswordException"),this.code=ce}}V.PasswordException=X;class G extends U{constructor(he,ce){super(he,"UnknownErrorException"),this.details=ce}}V.UnknownErrorException=G;class Y extends U{constructor(he){super(he,"InvalidPDFException")}}V.InvalidPDFException=Y;class N extends U{constructor(he){super(he,"MissingPDFException")}}V.MissingPDFException=N;class I extends U{constructor(he,ce){super(he,"UnexpectedResponseException"),this.status=ce}}V.UnexpectedResponseException=I;class L extends U{constructor(he){super(he,"FormatError")}}V.FormatError=L;class $ extends U{constructor(he){super(he,"AbortException")}}V.AbortException=$;function W(le){(typeof le!="object"||le===null||le.length===void 0)&&S("Invalid argument for bytesToString");const he=le.length,ce=8192;if(he<ce)return String.fromCharCode.apply(null,le);const Te=[];for(let Re=0;Re<he;Re+=ce){const He=Math.min(Re+ce,he),Ce=le.subarray(Re,He);Te.push(String.fromCharCode.apply(null,Ce))}return Te.join("")}function z(le){typeof le!="string"&&S("Invalid argument for stringToBytes");const he=le.length,ce=new Uint8Array(he);for(let Te=0;Te<he;++Te)ce[Te]=le.charCodeAt(Te)&255;return ce}function B(le){if(le.length!==void 0)return le.length;if(le.byteLength!==void 0)return le.byteLength;S("Invalid argument for arrayByteLength")}function H(le){const he=le.length;if(he===1&&le[0]instanceof Uint8Array)return le[0];let ce=0;for(let He=0;He<he;He++)ce+=B(le[He]);let Te=0;const Re=new Uint8Array(ce);for(let He=0;He<he;He++){let Ce=le[He];Ce instanceof Uint8Array||(typeof Ce=="string"?Ce=z(Ce):Ce=new Uint8Array(Ce));const ve=Ce.byteLength;Re.set(Ce,Te),Te+=ve}return Re}function q(le){return String.fromCharCode(le>>24&255,le>>16&255,le>>8&255,le&255)}function Z(le){return Object.keys(le).length}function te(le){const he=Object.create(null);for(const[ce,Te]of le)he[ce]=Te;return he}function Q(){const le=new Uint8Array(4);return le[0]=1,new Uint32Array(le.buffer,0,1)[0]===1}function ee(){try{return new Function(""),!0}catch{return!1}}class J{static get isLittleEndian(){return D(this,"isLittleEndian",Q())}static get isEvalSupported(){return D(this,"isEvalSupported",ee())}static get isOffscreenCanvasSupported(){return D(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}V.FeatureTest=J;const ne=[...Array(256).keys()].map(le=>le.toString(16).padStart(2,"0"));class re{static makeHexColor(he,ce,Te){return`#${ne[he]}${ne[ce]}${ne[Te]}`}static scaleMinMax(he,ce){let Te;he[0]?(he[0]<0&&(Te=ce[0],ce[0]=ce[1],ce[1]=Te),ce[0]*=he[0],ce[1]*=he[0],he[3]<0&&(Te=ce[2],ce[2]=ce[3],ce[3]=Te),ce[2]*=he[3],ce[3]*=he[3]):(Te=ce[0],ce[0]=ce[2],ce[2]=Te,Te=ce[1],ce[1]=ce[3],ce[3]=Te,he[1]<0&&(Te=ce[2],ce[2]=ce[3],ce[3]=Te),ce[2]*=he[1],ce[3]*=he[1],he[2]<0&&(Te=ce[0],ce[0]=ce[1],ce[1]=Te),ce[0]*=he[2],ce[1]*=he[2]),ce[0]+=he[4],ce[1]+=he[4],ce[2]+=he[5],ce[3]+=he[5]}static transform(he,ce){return[he[0]*ce[0]+he[2]*ce[1],he[1]*ce[0]+he[3]*ce[1],he[0]*ce[2]+he[2]*ce[3],he[1]*ce[2]+he[3]*ce[3],he[0]*ce[4]+he[2]*ce[5]+he[4],he[1]*ce[4]+he[3]*ce[5]+he[5]]}static applyTransform(he,ce){const Te=he[0]*ce[0]+he[1]*ce[2]+ce[4],Re=he[0]*ce[1]+he[1]*ce[3]+ce[5];return[Te,Re]}static applyInverseTransform(he,ce){const Te=ce[0]*ce[3]-ce[1]*ce[2],Re=(he[0]*ce[3]-he[1]*ce[2]+ce[2]*ce[5]-ce[4]*ce[3])/Te,He=(-he[0]*ce[1]+he[1]*ce[0]+ce[4]*ce[1]-ce[5]*ce[0])/Te;return[Re,He]}static getAxialAlignedBoundingBox(he,ce){const Te=re.applyTransform(he,ce),Re=re.applyTransform(he.slice(2,4),ce),He=re.applyTransform([he[0],he[3]],ce),Ce=re.applyTransform([he[2],he[1]],ce);return[Math.min(Te[0],Re[0],He[0],Ce[0]),Math.min(Te[1],Re[1],He[1],Ce[1]),Math.max(Te[0],Re[0],He[0],Ce[0]),Math.max(Te[1],Re[1],He[1],Ce[1])]}static inverseTransform(he){const ce=he[0]*he[3]-he[1]*he[2];return[he[3]/ce,-he[1]/ce,-he[2]/ce,he[0]/ce,(he[2]*he[5]-he[4]*he[3])/ce,(he[4]*he[1]-he[5]*he[0])/ce]}static apply3dTransform(he,ce){return[he[0]*ce[0]+he[1]*ce[1]+he[2]*ce[2],he[3]*ce[0]+he[4]*ce[1]+he[5]*ce[2],he[6]*ce[0]+he[7]*ce[1]+he[8]*ce[2]]}static singularValueDecompose2dScale(he){const ce=[he[0],he[2],he[1],he[3]],Te=he[0]*ce[0]+he[1]*ce[2],Re=he[0]*ce[1]+he[1]*ce[3],He=he[2]*ce[0]+he[3]*ce[2],Ce=he[2]*ce[1]+he[3]*ce[3],ve=(Te+Ce)/2,fe=Math.sqrt((Te+Ce)**2-4*(Te*Ce-He*Re))/2,We=ve+fe||1,Ue=ve-fe||1;return[Math.sqrt(We),Math.sqrt(Ue)]}static normalizeRect(he){const ce=he.slice(0);return he[0]>he[2]&&(ce[0]=he[2],ce[2]=he[0]),he[1]>he[3]&&(ce[1]=he[3],ce[3]=he[1]),ce}static intersect(he,ce){const Te=Math.max(Math.min(he[0],he[2]),Math.min(ce[0],ce[2])),Re=Math.min(Math.max(he[0],he[2]),Math.max(ce[0],ce[2]));if(Te>Re)return null;const He=Math.max(Math.min(he[1],he[3]),Math.min(ce[1],ce[3])),Ce=Math.min(Math.max(he[1],he[3]),Math.max(ce[1],ce[3]));return He>Ce?null:[Te,He,Re,Ce]}static bezierBoundingBox(he,ce,Te,Re,He,Ce,ve,fe){const We=[],Ue=[[],[]];let ze,tt,Ne,Qe,ct,Ee,rt,Ze;for(let ot=0;ot<2;++ot){if(ot===0?(tt=6*he-12*Te+6*He,ze=-3*he+9*Te-9*He+3*ve,Ne=3*Te-3*he):(tt=6*ce-12*Re+6*Ce,ze=-3*ce+9*Re-9*Ce+3*fe,Ne=3*Re-3*ce),Math.abs(ze)<1e-12){if(Math.abs(tt)<1e-12)continue;Qe=-Ne/tt,0<Qe&&Qe<1&&We.push(Qe);continue}rt=tt*tt-4*Ne*ze,Ze=Math.sqrt(rt),!(rt<0)&&(ct=(-tt+Ze)/(2*ze),0<ct&&ct<1&&We.push(ct),Ee=(-tt-Ze)/(2*ze),0<Ee&&Ee<1&&We.push(Ee))}let vt=We.length,lt;const ht=vt;for(;vt--;)Qe=We[vt],lt=1-Qe,Ue[0][vt]=lt*lt*lt*he+3*lt*lt*Qe*Te+3*lt*Qe*Qe*He+Qe*Qe*Qe*ve,Ue[1][vt]=lt*lt*lt*ce+3*lt*lt*Qe*Re+3*lt*Qe*Qe*Ce+Qe*Qe*Qe*fe;return Ue[0][ht]=he,Ue[1][ht]=ce,Ue[0][ht+1]=ve,Ue[1][ht+1]=fe,Ue[0].length=Ue[1].length=ht+2,[Math.min(...Ue[0]),Math.min(...Ue[1]),Math.max(...Ue[0]),Math.max(...Ue[1])]}}V.Util=re;const ae=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function se(le){if(le[0]>="ï"){let ce;if(le[0]==="þ"&&le[1]==="ÿ"?ce="utf-16be":le[0]==="ÿ"&&le[1]==="þ"?ce="utf-16le":le[0]==="ï"&&le[1]==="»"&&le[2]==="¿"&&(ce="utf-8"),ce)try{const Te=new TextDecoder(ce,{fatal:!0}),Re=z(le);return Te.decode(Re)}catch(Te){E(`stringToPDFString: "${Te}".`)}}const he=[];for(let ce=0,Te=le.length;ce<Te;ce++){const Re=ae[le.charCodeAt(ce)];he.push(Re?String.fromCharCode(Re):le.charAt(ce))}return he.join("")}function oe(le){return le.replace(/([()\\\n\r])/g,he=>he===`
`?"\\n":he==="\r"?"\\r":`\\${he}`)}function me(le){return/^[\x00-\x7F]*$/.test(le)}function xe(le){const he=["þÿ"];for(let ce=0,Te=le.length;ce<Te;ce++){const Re=le.charCodeAt(ce);he.push(String.fromCharCode(Re>>8&255),String.fromCharCode(Re&255))}return he.join("")}function Ae(le){return decodeURIComponent(escape(le))}function Se(le){return unescape(encodeURIComponent(le))}function Fe(le){return typeof le=="object"&&le!==null&&le.byteLength!==void 0}function Pe(le,he){if(le.length!==he.length)return!1;for(let ce=0,Te=le.length;ce<Te;ce++)if(le[ce]!==he[ce])return!1;return!0}function ue(le=new Date){return[le.getUTCFullYear().toString(),(le.getUTCMonth()+1).toString().padStart(2,"0"),le.getUTCDate().toString().padStart(2,"0"),le.getUTCHours().toString().padStart(2,"0"),le.getUTCMinutes().toString().padStart(2,"0"),le.getUTCSeconds().toString().padStart(2,"0")].join("")}function ye(){const le=Object.create(null);let he=!1;return Object.defineProperty(le,"settled",{get(){return he}}),le.promise=new Promise(function(ce,Te){le.resolve=function(Re){he=!0,ce(Re)},le.reject=function(Re){he=!0,Te(Re)}}),le}},(Me,V,Be)=>{Be(3)},(Me,V)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.isNodeJS=void 0;const Be=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");V.isNodeJS=Be},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var Me,Be,pe,de,De,ge,f,h,t,Li,c,s;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:a,NodeCMapReaderFactory:r,NodeStandardFontDataFactory:n}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=a,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=r,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=n}let createPDFNetworkStream;function setPDFNetworkStreamFactory(a){createPDFNetworkStream=a}function getDocument(a){const r=new PDFDocumentLoadingTask;let n;if(typeof a=="string"||a instanceof URL)n={url:a};else if((0,_util.isArrayBuffer)(a))n={data:a};else if(a instanceof PDFDataRangeTransport)n={range:a};else{if(typeof a!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!a.url&&!a.data&&!a.range)throw new Error("Invalid parameter object: need either .data, .range or .url");n=a}const l=Object.create(null);let u=null,d=null;for(const g in n){const x=n[g];switch(g){case"url":if(typeof window<"u")try{l[g]=new URL(x,window.location).href;continue}catch(m){(0,_util.warn)(`Cannot create valid URL: "${m}".`)}else if(typeof x=="string"||x instanceof URL){l[g]=x.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":u=x;continue;case"worker":d=x;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&x instanceof Buffer)l[g]=new Uint8Array(x);else{if(x instanceof Uint8Array)break;if(typeof x=="string")l[g]=(0,_util.stringToBytes)(x);else if(typeof x=="object"&&x!==null&&!isNaN(x.length))l[g]=new Uint8Array(x);else if((0,_util.isArrayBuffer)(x))l[g]=new Uint8Array(x);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}l[g]=x}if(l.CMapReaderFactory=l.CMapReaderFactory||DefaultCMapReaderFactory,l.StandardFontDataFactory=l.StandardFontDataFactory||DefaultStandardFontDataFactory,l.ignoreErrors=l.stopAtErrors!==!0,l.fontExtraProperties=l.fontExtraProperties===!0,l.pdfBug=l.pdfBug===!0,l.enableXfa=l.enableXfa===!0,(!Number.isInteger(l.rangeChunkSize)||l.rangeChunkSize<1)&&(l.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof l.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(l.docBaseUrl))&&(l.docBaseUrl=null),(!Number.isInteger(l.maxImageSize)||l.maxImageSize<-1)&&(l.maxImageSize=-1),typeof l.cMapUrl!="string"&&(l.cMapUrl=null),typeof l.standardFontDataUrl!="string"&&(l.standardFontDataUrl=null),typeof l.useWorkerFetch!="boolean"&&(l.useWorkerFetch=l.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&l.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof l.isEvalSupported!="boolean"&&(l.isEvalSupported=!0),typeof l.disableFontFace!="boolean"&&(l.disableFontFace=_is_node.isNodeJS),typeof l.useSystemFonts!="boolean"&&(l.useSystemFonts=!_is_node.isNodeJS&&!l.disableFontFace),(typeof l.ownerDocument!="object"||l.ownerDocument===null)&&(l.ownerDocument=globalThis.document),typeof l.disableRange!="boolean"&&(l.disableRange=!1),typeof l.disableStream!="boolean"&&(l.disableStream=!1),typeof l.disableAutoFetch!="boolean"&&(l.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(l.verbosity),!d){const g={verbosity:l.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};d=g.port?PDFWorker.fromPort(g):new PDFWorker(g),r._worker=d}const i=r.docId;return d.promise.then(function(){if(r.destroyed)throw new Error("Loading aborted");const g=_fetchDocument(d,l,u,i),x=new Promise(function(m){let A;u?A=new _transport_stream.PDFDataTransportStream({length:l.length,initialData:l.initialData,progressiveDone:l.progressiveDone,contentDispositionFilename:l.contentDispositionFilename,disableRange:l.disableRange,disableStream:l.disableStream},u):l.data||(A=createPDFNetworkStream({url:l.url,length:l.length,httpHeaders:l.httpHeaders,withCredentials:l.withCredentials,rangeChunkSize:l.rangeChunkSize,disableRange:l.disableRange,disableStream:l.disableStream})),m(A)});return Promise.all([g,x]).then(function([m,A]){if(r.destroyed)throw new Error("Loading aborted");const k=new _message_handler.MessageHandler(i,m,d.port),v=new WorkerTransport(k,r,A,l);r._transport=v,k.send("Ready",null)})}).catch(r._capability.reject),r}async function _fetchDocument(a,r,n,l){if(a.destroyed)throw new Error("Worker was destroyed");n&&(r.length=n.length,r.initialData=n.initialData,r.progressiveDone=n.progressiveDone,r.contentDispositionFilename=n.contentDispositionFilename);const u=await a.messageHandler.sendWithPromise("GetDocRequest",{docId:l,apiVersion:"2.16.105",source:{data:r.data,url:r.url,password:r.password,disableAutoFetch:r.disableAutoFetch,rangeChunkSize:r.rangeChunkSize,length:r.length},maxImageSize:r.maxImageSize,disableFontFace:r.disableFontFace,docBaseUrl:r.docBaseUrl,ignoreErrors:r.ignoreErrors,isEvalSupported:r.isEvalSupported,fontExtraProperties:r.fontExtraProperties,enableXfa:r.enableXfa,useSystemFonts:r.useSystemFonts,cMapUrl:r.useWorkerFetch?r.cMapUrl:null,standardFontDataUrl:r.useWorkerFetch?r.standardFontDataUrl:null});if(r.data&&(r.data=null),a.destroyed)throw new Error("Worker was destroyed");return u}const V=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${Ri(V,Me)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var r;this.destroyed=!0,await((r=this._transport)==null?void 0:r.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=V;Me=new WeakMap,Ye(PDFDocumentLoadingTask,Me,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(r,n,l=!1,u=null){this.length=r,this.initialData=n,this.progressiveDone=l,this.contentDispositionFilename=u,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(r){this._rangeListeners.push(r)}addProgressListener(r){this._progressListeners.push(r)}addProgressiveReadListener(r){this._progressiveReadListeners.push(r)}addProgressiveDoneListener(r){this._progressiveDoneListeners.push(r)}onDataRange(r,n){for(const l of this._rangeListeners)l(r,n)}onDataProgress(r,n){this._readyCapability.promise.then(()=>{for(const l of this._progressListeners)l(r,n)})}onDataProgressiveRead(r){this._readyCapability.promise.then(()=>{for(const n of this._progressiveReadListeners)n(r)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const r of this._progressiveDoneListeners)r()})}transportReady(){this._readyCapability.resolve()}requestDataRange(r,n){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(r,n){this._pdfInfo=r,this._transport=n,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(r){return this._transport.getPage(r)}getPageIndex(r){return this._transport.getPageIndex(r)}getDestinations(){return this._transport.getDestinations()}getDestination(r){return this._transport.getDestination(r)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(r=!1){return this._transport.startCleanup(r||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(r,n,l,u,d=!1){this._pageIndex=r,this._pageInfo=n,this._ownerDocument=u,this._transport=l,this._stats=d?new _display_utils.StatTimer:null,this._pdfBug=d,this.commonObjs=l.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:r,rotation:n=this.rotate,offsetX:l=0,offsetY:u=0,dontFlip:d=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:n,offsetX:l,offsetY:u,dontFlip:d})}getAnnotations({intent:r="display"}={}){const n=this._transport.getRenderingIntent(r);let l=this._annotationPromises.get(n.cacheKey);return l||(l=this._transport.getAnnotations(this._pageIndex,n.renderingIntent),this._annotationPromises.set(n.cacheKey,l),l=l.then(u=>{for(const d of u)d.titleObj!==void 0&&Object.defineProperty(d,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),d.titleObj.str}}),d.contentsObj!==void 0&&Object.defineProperty(d,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),d.contentsObj.str}});return u})),l}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var r;return((r=this._transport._htmlForXfa)==null?void 0:r.children[this._pageIndex])||null}render({canvasContext:r,viewport:n,intent:l="display",annotationMode:u=_util.AnnotationMode.ENABLE,transform:d=null,imageLayer:i=null,canvasFactory:g=null,background:x=null,optionalContentConfigPromise:m=null,annotationCanvasMap:A=null,pageColors:k=null,printAnnotationStorage:v=null}){var y,p;((y=arguments[0])==null?void 0:y.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&u===_util.AnnotationMode.ENABLE&&(u=_util.AnnotationMode.ENABLE_FORMS)),((p=arguments[0])==null?void 0:p.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&u===_util.AnnotationMode.ENABLE&&(u=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const _=this._transport.getRenderingIntent(l,u,v);this.pendingCleanup=!1,m||(m=this._transport.getOptionalContentConfig());let K=this._intentStates.get(_.cacheKey);K||(K=Object.create(null),this._intentStates.set(_.cacheKey,K)),K.streamReaderCancelTimeout&&(clearTimeout(K.streamReaderCancelTimeout),K.streamReaderCancelTimeout=null);const M=g||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),j=!!(_.renderingIntent&_util.RenderingIntentFlag.PRINT);K.displayReadyCapability||(K.displayReadyCapability=(0,_util.createPromiseCapability)(),K.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(_));const O=P=>{K.renderTasks.delete(T),(this.cleanupAfterRender||j)&&(this.pendingCleanup=!0),this._tryCleanup(),P?(T.capability.reject(P),this._abortOperatorList({intentState:K,reason:P instanceof Error?P:new Error(P)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},T=new InternalRenderTask({callback:O,params:{canvasContext:r,viewport:n,transform:d,imageLayer:i,background:x},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:A,operatorList:K.operatorList,pageIndex:this._pageIndex,canvasFactory:M,useRequestAnimationFrame:!j,pdfBug:this._pdfBug,pageColors:k});(K.renderTasks||(K.renderTasks=new Set)).add(T);const R=T.task;return Promise.all([K.displayReadyCapability.promise,m]).then(([P,E])=>{if(this.pendingCleanup){O();return}this._stats&&this._stats.time("Rendering"),T.initializeGraphics({transparency:P,optionalContentConfig:E}),T.operatorListChanged()}).catch(O),R}getOperatorList({intent:r="display",annotationMode:n=_util.AnnotationMode.ENABLE,printAnnotationStorage:l=null}={}){function u(){i.operatorList.lastChunk&&(i.opListReadCapability.resolve(i.operatorList),i.renderTasks.delete(g))}const d=this._transport.getRenderingIntent(r,n,l,!0);let i=this._intentStates.get(d.cacheKey);i||(i=Object.create(null),this._intentStates.set(d.cacheKey,i));let g;return i.opListReadCapability||(g=Object.create(null),g.operatorListChanged=u,i.opListReadCapability=(0,_util.createPromiseCapability)(),(i.renderTasks||(i.renderTasks=new Set)).add(g),i.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(d)),i.opListReadCapability.promise}streamTextContent({disableCombineTextItems:r=!1,includeMarkedContent:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:r!==!0,includeMarkedContent:n===!0},{highWaterMark:100,size(u){return u.items.length}})}getTextContent(r={}){if(this._transport._htmlForXfa)return this.getXfa().then(l=>_xfa_text.XfaText.textContent(l));const n=this.streamTextContent(r);return new Promise(function(l,u){function d(){i.read().then(function({value:x,done:m}){if(m){l(g);return}Object.assign(g.styles,x.styles),g.items.push(...x.items),d()},u)}const i=n.getReader(),g={items:[],styles:Object.create(null)};d()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const r=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const l of n.renderTasks)r.push(l.completed),l.cancel();this.objs.clear();for(const n of this._bitmaps)n.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(r)}cleanup(r=!1){return this.pendingCleanup=!0,this._tryCleanup(r)}_tryCleanup(r=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:n,operatorList:l}of this._intentStates.values())if(n.size>0||!l.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,r&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const n of this._bitmaps)n.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(r,n){const l=this._intentStates.get(n);l&&(this._stats&&this._stats.timeEnd("Page Request"),l.displayReadyCapability&&l.displayReadyCapability.resolve(r))}_renderPageChunk(r,n){for(let l=0,u=r.length;l<u;l++)n.operatorList.fnArray.push(r.fnArray[l]),n.operatorList.argsArray.push(r.argsArray[l]);n.operatorList.lastChunk=r.lastChunk,n.operatorList.separateAnnots=r.separateAnnots;for(const l of n.renderTasks)l.operatorListChanged();r.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:r,cacheKey:n,annotationStorageMap:l}){const d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:r,cacheKey:n,annotationStorage:l}).getReader(),i=this._intentStates.get(n);i.streamReader=d;const g=()=>{d.read().then(({value:x,done:m})=>{if(m){i.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(x,i),g())},x=>{if(i.streamReader=null,!this._transport.destroyed){if(i.operatorList){i.operatorList.lastChunk=!0;for(const m of i.renderTasks)m.operatorListChanged();this._tryCleanup()}if(i.displayReadyCapability)i.displayReadyCapability.reject(x);else if(i.opListReadCapability)i.opListReadCapability.reject(x);else throw x}})};g()}_abortOperatorList({intentState:r,reason:n,force:l=!1}){if(r.streamReader){if(!l){if(r.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){r.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:r,reason:n,force:!0}),r.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(r.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),r.streamReader=null,!this._transport.destroyed){for(const[u,d]of this._intentStates)if(d===r){this._intentStates.delete(u);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(r,n){const l={data:structuredClone(r,n)};this._deferred.then(()=>{for(const u of this._listeners)u.call(this,l)})}addEventListener(r,n){this._listeners.push(n)}removeEventListener(r,n){const l=this._listeners.indexOf(n);this._listeners.splice(l,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const a=(Be=document==null?void 0:document.currentScript)==null?void 0:Be.src;a&&(PDFWorkerUtil.fallbackWorkerSrc=a.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(a,r){let n;try{if(n=new URL(a),!n.origin||n.origin==="null")return!1}catch{return!1}const l=new URL(r,n);return n.origin===l.origin},PDFWorkerUtil.createCDNWrapper=function(a){const r=`importScripts("${a}");`;return URL.createObjectURL(new Blob([r]))}}const _PDFWorker=class{constructor({name:a=null,port:r=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(r&&be(_PDFWorker,pe).has(r))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=a,this.destroyed=!1,this.verbosity=n,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,r){be(_PDFWorker,pe).set(r,this),this._initializeFromPort(r);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(a){this._port=a,this._messageHandler=new _message_handler.MessageHandler("main","worker",a),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:a}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,a)||(a=PDFWorkerUtil.createCDNWrapper(new URL(a,window.location).href));const r=new Worker(a),n=new _message_handler.MessageHandler("main","worker",r),l=()=>{r.removeEventListener("error",u),n.destroy(),r.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},u=()=>{this._webWorker||l()};r.addEventListener("error",u),n.on("test",i=>{if(r.removeEventListener("error",u),this.destroyed){l();return}i?(this._messageHandler=n,this._port=r,this._webWorker=r,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),r.terminate())}),n.on("ready",i=>{if(r.removeEventListener("error",u),this.destroyed){l();return}try{d()}catch{this._setupFakeWorker()}});const d=()=>{const i=new Uint8Array;n.send("test",i,[i.buffer])};d();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(a=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const r=new LoopbackPort;this._port=r;const n=`fake${PDFWorkerUtil.fakeWorkerId++}`,l=new _message_handler.MessageHandler(n+"_worker",n,r);a.setup(l,r);const u=new _message_handler.MessageHandler(n,n+"_worker",r);this._messageHandler=u,this._readyCapability.resolve(),u.send("configure",{verbosity:this.verbosity})}).catch(a=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${a.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),be(_PDFWorker,pe).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(a){if(!(a!=null&&a.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return be(this,pe).has(a.port)?be(this,pe).get(a.port):new _PDFWorker(a)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var a;try{return((a=globalThis.pdfjsWorker)==null?void 0:a.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;pe=new WeakMap,Ye(PDFWorker,pe,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(r,n,l,u){Ye(this,de,null);Ye(this,De,new Map);Ye(this,ge,new Map);Ye(this,f,null);this.messageHandler=r,this.loadingTask=n,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:n.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:u.ownerDocument,styleElement:u.styleElement}),this._params=u,u.useWorkerFetch||(this.CMapReaderFactory=new u.CMapReaderFactory({baseUrl:u.cMapUrl,isCompressed:u.cMapPacked}),this.StandardFontDataFactory=new u.StandardFontDataFactory({baseUrl:u.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=l,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return be(this,de)}getRenderingIntent(r,n=_util.AnnotationMode.ENABLE,l=null,u=!1){let d=_util.RenderingIntentFlag.DISPLAY,i=null;switch(r){case"any":d=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":d=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${r}`)}switch(n){case _util.AnnotationMode.DISABLE:d+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:d+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:d+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,i=(d&_util.RenderingIntentFlag.PRINT&&l instanceof _annotation_storage.PrintAnnotationStorage?l:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${n}`)}return u&&(d+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:d,cacheKey:`${d}_${_annotation_storage.AnnotationStorage.getHash(i)}`,annotationStorageMap:i}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const r=[];for(const l of be(this,De).values())r.push(l._destroy());be(this,De).clear(),be(this,ge).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return r.push(n),Promise.all(r).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),st(this,f,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:r,loadingTask:n}=this;r.on("GetReader",(l,u)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=d=>{this._lastProgress={loaded:d.loaded,total:d.total}},u.onPull=()=>{this._fullReader.read().then(function({value:d,done:i}){if(i){u.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(d),"GetReader - expected an ArrayBuffer."),u.enqueue(new Uint8Array(d),1,[d])}).catch(d=>{u.error(d)})},u.onCancel=d=>{this._fullReader.cancel(d),u.ready.catch(i=>{if(!this.destroyed)throw i})}}),r.on("ReaderHeadersReady",l=>{const u=(0,_util.createPromiseCapability)(),d=this._fullReader;return d.headersReady.then(()=>{var i;(!d.isStreamingSupported||!d.isRangeSupported)&&(this._lastProgress&&((i=n.onProgress)==null||i.call(n,this._lastProgress)),d.onProgress=g=>{var x;(x=n.onProgress)==null||x.call(n,{loaded:g.loaded,total:g.total})}),u.resolve({isStreamingSupported:d.isStreamingSupported,isRangeSupported:d.isRangeSupported,contentLength:d.contentLength})},u.reject),u.promise}),r.on("GetRangeReader",(l,u)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const d=this._networkStream.getRangeReader(l.begin,l.end);if(!d){u.close();return}u.onPull=()=>{d.read().then(function({value:i,done:g}){if(g){u.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(i),"GetRangeReader - expected an ArrayBuffer."),u.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{u.error(i)})},u.onCancel=i=>{d.cancel(i),u.ready.catch(g=>{if(!this.destroyed)throw g})}}),r.on("GetDoc",({pdfInfo:l})=>{this._numPages=l.numPages,this._htmlForXfa=l.htmlForXfa,delete l.htmlForXfa,n._capability.resolve(new PDFDocumentProxy(l,this))}),r.on("DocException",function(l){let u;switch(l.name){case"PasswordException":u=new _util.PasswordException(l.message,l.code);break;case"InvalidPDFException":u=new _util.InvalidPDFException(l.message);break;case"MissingPDFException":u=new _util.MissingPDFException(l.message);break;case"UnexpectedResponseException":u=new _util.UnexpectedResponseException(l.message,l.status);break;case"UnknownErrorException":u=new _util.UnknownErrorException(l.message,l.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}n._capability.reject(u)}),r.on("PasswordRequest",l=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),n.onPassword){const u=d=>{d instanceof Error?this._passwordCapability.reject(d):this._passwordCapability.resolve({password:d})};try{n.onPassword(u,l.code)}catch(d){this._passwordCapability.reject(d)}}else this._passwordCapability.reject(new _util.PasswordException(l.message,l.code));return this._passwordCapability.promise}),r.on("DataLoaded",l=>{var u;(u=n.onProgress)==null||u.call(n,{loaded:l.length,total:l.length}),this.downloadInfoCapability.resolve(l)}),r.on("StartRenderPage",l=>{if(this.destroyed)return;be(this,De).get(l.pageIndex)._startRenderPage(l.transparency,l.cacheKey)}),r.on("commonobj",([l,u,d])=>{var i;if(!this.destroyed&&!this.commonObjs.has(l))switch(u){case"Font":const g=this._params;if("error"in d){const A=d.error;(0,_util.warn)(`Error during font loading: ${A}`),this.commonObjs.resolve(l,A);break}let x=null;g.pdfBug&&((i=globalThis.FontInspector)!=null&&i.enabled)&&(x={registerFont(A,k){globalThis.FontInspector.fontAdded(A,k)}});const m=new _font_loader.FontFaceObject(d,{isEvalSupported:g.isEvalSupported,disableFontFace:g.disableFontFace,ignoreErrors:g.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:x});this.fontLoader.bind(m).catch(A=>r.sendWithPromise("FontFallback",{id:l})).finally(()=>{!g.fontExtraProperties&&m.data&&(m.data=null),this.commonObjs.resolve(l,m)});break;case"FontPath":case"Image":this.commonObjs.resolve(l,d);break;default:throw new Error(`Got unknown common object type ${u}`)}}),r.on("obj",([l,u,d,i])=>{var x;if(this.destroyed)return;const g=be(this,De).get(u);if(!g.objs.has(l))switch(d){case"Image":g.objs.resolve(l,i);const m=8e6;if(i){let A;if(i.bitmap){const{bitmap:k,width:v,height:_}=i;A=v*_*4,g._bitmaps.add(k)}else A=((x=i.data)==null?void 0:x.length)||0;A>m&&(g.cleanupAfterRender=!0)}break;case"Pattern":g.objs.resolve(l,i);break;default:throw new Error(`Got unknown object type ${d}`)}}),r.on("DocProgress",l=>{var u;this.destroyed||(u=n.onProgress)==null||u.call(n,{loaded:l.loaded,total:l.total})}),r.on("DocStats",l=>{this.destroyed||st(this,de,Object.freeze({streamTypes:Object.freeze(l.streamTypes),fontTypes:Object.freeze(l.fontTypes)}))}),r.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),r.on("FetchBuiltInCMap",l=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(l):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),r.on("FetchStandardFontData",l=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(l):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:r}){var n,l;this.destroyed||(l=(n=this.loadingTask).onUnsupportedFeature)==null||l.call(n,r)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(r){if(!Number.isInteger(r)||r<=0||r>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=r-1,l=be(this,ge).get(n);if(l)return l;const u=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(d=>{if(this.destroyed)throw new Error("Transport destroyed");const i=new PDFPageProxy(n,d,this,this._params.ownerDocument,this._params.pdfBug);return be(this,De).set(n,i),i});return be(this,ge).set(n,u),u}getPageIndex(r){return typeof r!="object"||r===null||!Number.isInteger(r.num)||r.num<0||!Number.isInteger(r.gen)||r.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:r.num,gen:r.gen})}getAnnotations(r,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:r,intent:n})}saveDocument(){var r;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((r=this._fullReader)==null?void 0:r.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(r){return typeof r!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:r})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(r){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:r})}getStructTree(r){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:r})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(r=>new _optional_content_config.OptionalContentConfig(r))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return be(this,f)||st(this,f,this.messageHandler.sendWithPromise("GetMetadata",null).then(r=>{var n,l;return{info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:((n=this._fullReader)==null?void 0:n.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(r=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const n of be(this,De).values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),r||this.fontLoader.clear(),st(this,f,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const r=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:r.disableAutoFetch,enableXfa:r.enableXfa})}}de=new WeakMap,De=new WeakMap,ge=new WeakMap,f=new WeakMap;class PDFObjects{constructor(){Ye(this,t);Ye(this,h,Object.create(null))}get(r,n=null){if(n){const u=Je(this,t,Li).call(this,r);return u.capability.promise.then(()=>n(u.data)),null}const l=be(this,h)[r];if(!(l!=null&&l.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${r}.`);return l.data}has(r){const n=be(this,h)[r];return(n==null?void 0:n.capability.settled)||!1}resolve(r,n=null){const l=Je(this,t,Li).call(this,r);l.data=n,l.capability.resolve()}clear(){st(this,h,Object.create(null))}}h=new WeakMap,t=new WeakSet,Li=function(r){const n=be(this,h)[r];return n||(be(this,h)[r]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(r){Ye(this,c,null);st(this,c,r),this.onContinue=null}get promise(){return be(this,c).capability.promise}cancel(){be(this,c).cancel()}get separateAnnots(){const{separateAnnots:r}=be(this,c).operatorList;if(!r)return!1;const{annotationCanvasMap:n}=be(this,c);return r.form||r.canvas&&(n==null?void 0:n.size)>0}}c=new WeakMap,exports.RenderTask=RenderTask;const e=class{constructor({callback:r,params:n,objs:l,commonObjs:u,annotationCanvasMap:d,operatorList:i,pageIndex:g,canvasFactory:x,useRequestAnimationFrame:m=!1,pdfBug:A=!1,pageColors:k=null}){this.callback=r,this.params=n,this.objs=l,this.commonObjs=u,this.annotationCanvasMap=d,this.operatorListIdx=null,this.operatorList=i,this._pageIndex=g,this.canvasFactory=x,this._pdfBug=A,this.pageColors=k,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:r=!1,optionalContentConfig:n}){var x;if(this.cancelled)return;if(this._canvas){if(be(e,s).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");be(e,s).add(this._canvas)}this._pdfBug&&((x=globalThis.StepperManager)!=null&&x.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:l,viewport:u,transform:d,imageLayer:i,background:g}=this.params;this.gfx=new _canvas.CanvasGraphics(l,this.commonObjs,this.objs,this.canvasFactory,i,n,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:d,viewport:u,transparency:r,background:g}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(r=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&be(e,s).delete(this._canvas),this.callback(r||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&be(e,s).delete(this._canvas),this.callback())))}};let InternalRenderTask=e;s=new WeakMap,Ye(InternalRenderTask,s,new WeakSet);const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(Me,V,Be)=>{var h,Qi,o;Object.defineProperty(V,"__esModule",{value:!0}),V.PrintAnnotationStorage=V.AnnotationStorage=void 0;var pe=Be(1),de=Be(6),De=Be(10);class ge{constructor(){Ye(this,h);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(s,e){const a=this._storage.get(s);return a===void 0?e:Object.assign(e,a)}getRawValue(s){return this._storage.get(s)}remove(s){if(this._storage.delete(s),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this._storage.values())if(e instanceof de.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(s,e){const a=this._storage.get(s);let r=!1;if(a!==void 0)for(const[n,l]of Object.entries(e))a[n]!==l&&(r=!0,a[n]=l);else r=!0,this._storage.set(s,e);r&&Je(this,h,Qi).call(this),e instanceof de.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(s){return this._storage.has(s)}getAll(){return this._storage.size>0?(0,pe.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new f(this)}get serializable(){if(this._storage.size===0)return null;const s=new Map;for(const[e,a]of this._storage){const r=a instanceof de.AnnotationEditor?a.serialize():a;r&&s.set(e,r)}return s}static getHash(s){if(!s)return"";const e=new De.MurmurHash3_64;for(const[a,r]of s)e.update(`${a}:${JSON.stringify(r)}`);return e.hexdigest()}}h=new WeakSet,Qi=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},V.AnnotationStorage=ge;class f extends ge{constructor(e){super();Ye(this,o,null);st(this,o,structuredClone(e.serializable))}get print(){(0,pe.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return be(this,o)}}o=new WeakMap,V.PrintAnnotationStorage=f},(Me,V,Be)=>{var ge,f,h,t,o,c;Object.defineProperty(V,"__esModule",{value:!0}),V.AnnotationEditor=void 0;var pe=Be(7),de=Be(1);const s=class{constructor(a){Ye(this,ge,this.focusin.bind(this));Ye(this,f,this.focusout.bind(this));Ye(this,h,!1);Ye(this,t,!1);Ye(this,o,!1);Ye(this,c,s._zIndex++);this.constructor===s&&(0,de.unreachable)("Cannot initialize AnnotationEditor."),this.parent=a.parent,this.id=a.id,this.width=this.height=null,this.pageIndex=a.parent.pageIndex,this.name=a.name,this.div=null;const[r,n]=this.parent.viewportBaseDimensions;this.x=a.x/r,this.y=a.y/n,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,de.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=be(this,c)}focusin(a){be(this,h)?st(this,h,!1):this.parent.setSelected(this)}focusout(a){if(!this.isAttachedToDOM)return;const r=a.relatedTarget;r!=null&&r.closest(`#${this.id}`)||(a.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(a){const r=this.parent.div.getBoundingClientRect();this.startX=a.clientX-r.x,this.startY=a.clientY-r.y,a.dataTransfer.setData("text/plain",this.id),a.dataTransfer.effectAllowed="move"}setAt(a,r,n,l){const[u,d]=this.parent.viewportBaseDimensions;[n,l]=this.screenToPageTranslation(n,l),this.x=(a+n)/u,this.y=(r+l)/d,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(a,r){const[n,l]=this.parent.viewportBaseDimensions;[a,r]=this.screenToPageTranslation(a,r),this.x+=a/n,this.y+=r/l,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(a,r){const{rotation:n}=this.parent.viewport;switch(n){case 90:return[r,-a];case 180:return[-a,-r];case 270:return[-r,a];default:return[a,r]}}setDims(a,r){const[n,l]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*a/n}%`,this.div.style.height=`${100*r/l}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",be(this,ge)),this.div.addEventListener("focusout",be(this,f));const[a,r]=this.getInitialTranslation();return this.translate(a,r),(0,pe.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(a){const r=pe.KeyboardManager.platform.isMac;if(a.button!==0||a.ctrlKey&&r){a.preventDefault();return}a.ctrlKey&&!r||a.shiftKey||a.metaKey&&r?this.parent.toggleSelected(this):this.parent.setSelected(this),st(this,h,!0)}getRect(a,r){const[n,l]=this.parent.viewportBaseDimensions,[u,d]=this.parent.pageDimensions,i=u*a/n,g=d*r/l,x=this.x*u,m=this.y*d,A=this.width*u,k=this.height*d;switch(this.rotation){case 0:return[x+i,d-m-g-k,x+i+A,d-m-g];case 90:return[x+g,d-m+i,x+g+k,d-m+i+A];case 180:return[x-i-A,d-m+g,x-i,d-m+g+k];case 270:return[x-g-k,d-m-i-A,x-g,d-m-i];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(a,r){const[n,l,u,d]=a,i=u-n,g=d-l;switch(this.rotation){case 0:return[n,r-d,i,g];case 90:return[n,r-l,g,i];case 180:return[u,r-l,i,g];case 270:return[u,r-d,g,i];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){st(this,o,!0)}disableEditMode(){st(this,o,!1)}isInEditMode(){return be(this,o)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var a;(a=this.div)==null||a.addEventListener("focusin",be(this,ge))}serialize(){(0,de.unreachable)("An editor must be serializable")}static deserialize(a,r){const n=new this.prototype.constructor({parent:r,id:r.getNextId()});n.rotation=a.rotation;const[l,u]=r.pageDimensions,[d,i,g,x]=n.getRectInCurrentCoords(a.rect,u);return n.x=d/l,n.y=i/u,n.width=g/l,n.height=x/u,n}remove(){this.div.removeEventListener("focusin",be(this,ge)),this.div.removeEventListener("focusout",be(this,f)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var a;(a=this.div)==null||a.classList.add("selectedEditor")}unselect(){var a;(a=this.div)==null||a.classList.remove("selectedEditor")}updateParams(a,r){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return be(this,t)}set isEditing(a){st(this,t,a),a?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let De=s;ge=new WeakMap,f=new WeakMap,h=new WeakMap,t=new WeakMap,o=new WeakMap,c=new WeakMap,Nt(De,"_colorManager",new pe.ColorManager),Nt(De,"_zIndex",1),V.AnnotationEditor=De},(Me,V,Be)=>{var e,a,r,n,l,u,en,g,m,A,k,v,_,K,M,j,O,T,R,y,p,P,E,S,F,C,tn,D,Bi,X,Xt,Y,ii,I,nn,$,rn,z,Ni,H,ni,Z,ui;Object.defineProperty(V,"__esModule",{value:!0}),V.KeyboardManager=V.CommandManager=V.ColorManager=V.AnnotationEditorUIManager=void 0,V.bindEvents=De,V.opacityToHex=ge;var pe=Be(1),de=Be(8);function De(ee,J,ne){for(const re of ne)J.addEventListener(re,ee[re].bind(ee))}function ge(ee){return Math.round(Math.min(255,Math.max(1,255*ee))).toString(16).padStart(2,"0")}class f{constructor(){Ye(this,e,0)}getId(){return`${pe.AnnotationEditorPrefix}${Ri(this,e)._++}`}}e=new WeakMap;class h{constructor(J=128){Ye(this,a,[]);Ye(this,r,!1);Ye(this,n,void 0);Ye(this,l,-1);st(this,n,J)}add({cmd:J,undo:ne,mustExec:re,type:ae=NaN,overwriteIfSameType:se=!1,keepUndo:oe=!1}){if(re&&J(),be(this,r))return;const me={cmd:J,undo:ne,type:ae};if(be(this,l)===-1){be(this,a).length>0&&(be(this,a).length=0),st(this,l,0),be(this,a).push(me);return}if(se&&be(this,a)[be(this,l)].type===ae){oe&&(me.undo=be(this,a)[be(this,l)].undo),be(this,a)[be(this,l)]=me;return}const xe=be(this,l)+1;xe===be(this,n)?be(this,a).splice(0,1):(st(this,l,xe),xe<be(this,a).length&&be(this,a).splice(xe)),be(this,a).push(me)}undo(){be(this,l)!==-1&&(st(this,r,!0),be(this,a)[be(this,l)].undo(),st(this,r,!1),st(this,l,be(this,l)-1))}redo(){be(this,l)<be(this,a).length-1&&(st(this,l,be(this,l)+1),st(this,r,!0),be(this,a)[be(this,l)].cmd(),st(this,r,!1))}hasSomethingToUndo(){return be(this,l)!==-1}hasSomethingToRedo(){return be(this,l)<be(this,a).length-1}destroy(){st(this,a,null)}}a=new WeakMap,r=new WeakMap,n=new WeakMap,l=new WeakMap,V.CommandManager=h;const i=class{constructor(J){Ye(this,u);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const ne=i.platform.isMac;for(const[re,ae]of J)for(const se of re){const oe=se.startsWith("mac+");ne&&oe?(this.callbacks.set(se.slice(4),ae),this.allKeys.add(se.split("+").at(-1))):!ne&&!oe&&(this.callbacks.set(se,ae),this.allKeys.add(se.split("+").at(-1)))}}static get platform(){const J=typeof navigator<"u"?navigator.platform:"";return(0,pe.shadow)(this,"platform",{isWin:J.includes("Win"),isMac:J.includes("Mac")})}exec(J,ne){if(!this.allKeys.has(ne.key))return;const re=this.callbacks.get(Je(this,u,en).call(this,ne));re&&(re.bind(J)(),ne.stopPropagation(),ne.preventDefault())}};let t=i;u=new WeakSet,en=function(J){J.altKey&&this.buffer.push("alt"),J.ctrlKey&&this.buffer.push("ctrl"),J.metaKey&&this.buffer.push("meta"),J.shiftKey&&this.buffer.push("shift"),this.buffer.push(J.key);const ne=this.buffer.join("+");return this.buffer.length=0,ne},V.KeyboardManager=t;class o{constructor(){Ye(this,g,null)}copy(J){J&&(Array.isArray(J)?st(this,g,J.map(ne=>ne.serialize())):st(this,g,[J.serialize()]),st(this,g,be(this,g).filter(ne=>!!ne)),be(this,g).length===0&&st(this,g,null))}paste(){return be(this,g)}isEmpty(){return be(this,g)===null}destroy(){st(this,g,null)}}g=new WeakMap;const x=class{get _colors(){const J=new Map([["CanvasText",null],["Canvas",null]]);return(0,de.getColorValues)(J),(0,pe.shadow)(this,"_colors",J)}convert(J){const ne=(0,de.getRGB)(J);if(!window.matchMedia("(forced-colors: active)").matches)return ne;for(const[re,ae]of this._colors)if(ae.every((se,oe)=>se===ne[oe]))return x._colorsMapping.get(re);return ne}getHexCode(J){const ne=this._colors.get(J);return ne?pe.Util.makeHexColor(...ne):J}};let c=x;Nt(c,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),V.ColorManager=c;const Q=class{constructor(J,ne){Ye(this,C);Ye(this,D);Ye(this,X);Ye(this,Y);Ye(this,I);Ye(this,$);Ye(this,z);Ye(this,H);Ye(this,Z);Ye(this,m,null);Ye(this,A,new Map);Ye(this,k,new Map);Ye(this,v,new o);Ye(this,_,new h);Ye(this,K,0);Ye(this,M,null);Ye(this,j,null);Ye(this,O,new f);Ye(this,T,!1);Ye(this,R,pe.AnnotationEditorType.NONE);Ye(this,y,new Set);Ye(this,p,this.keydown.bind(this));Ye(this,P,this.onEditingAction.bind(this));Ye(this,E,this.onPageChanging.bind(this));Ye(this,S,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Ye(this,F,null);st(this,F,J),st(this,j,ne),be(this,j)._on("editingaction",be(this,P)),be(this,j)._on("pagechanging",be(this,E))}destroy(){Je(this,D,Bi).call(this),be(this,j)._off("editingaction",be(this,P)),be(this,j)._off("pagechanging",be(this,E));for(const J of be(this,k).values())J.destroy();be(this,k).clear(),be(this,A).clear(),st(this,m,null),be(this,y).clear(),be(this,v).destroy(),be(this,_).destroy()}onPageChanging({pageNumber:J}){st(this,K,J-1)}focusMainContainer(){be(this,F).focus()}keydown(J){var ne;(ne=this.getActive())!=null&&ne.shouldGetKeyboardEvents()||Q._keyboardManager.exec(this,J)}onEditingAction(J){["undo","redo","cut","copy","paste","delete","selectAll"].includes(J.name)&&this[J.name]()}setEditingState(J){J?(Je(this,C,tn).call(this),Je(this,X,Xt).call(this,{isEditing:be(this,R)!==pe.AnnotationEditorType.NONE,isEmpty:Je(this,H,ni).call(this),hasSomethingToUndo:be(this,_).hasSomethingToUndo(),hasSomethingToRedo:be(this,_).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:be(this,v).isEmpty()})):(Je(this,D,Bi).call(this),Je(this,X,Xt).call(this,{isEditing:!1}))}registerEditorTypes(J){st(this,M,J);for(const ne of be(this,M))Je(this,Y,ii).call(this,ne.defaultPropertiesToUpdate)}getId(){return be(this,O).getId()}addLayer(J){be(this,k).set(J.pageIndex,J),be(this,T)?J.enable():J.disable()}removeLayer(J){be(this,k).delete(J.pageIndex)}updateMode(J){if(st(this,R,J),J===pe.AnnotationEditorType.NONE)this.setEditingState(!1),Je(this,$,rn).call(this);else{this.setEditingState(!0),Je(this,I,nn).call(this);for(const ne of be(this,k).values())ne.updateMode(J)}}updateToolbar(J){J!==be(this,R)&&be(this,j).dispatch("switchannotationeditormode",{source:this,mode:J})}updateParams(J,ne){for(const re of be(this,y))re.updateParams(J,ne);for(const re of be(this,M))re.updateDefaultParams(J,ne)}getEditors(J){const ne=[];for(const re of be(this,A).values())re.pageIndex===J&&ne.push(re);return ne}getEditor(J){return be(this,A).get(J)}addEditor(J){be(this,A).set(J.id,J)}removeEditor(J){be(this,A).delete(J.id),this.unselect(J)}setActiveEditor(J){be(this,m)!==J&&(st(this,m,J),J&&Je(this,Y,ii).call(this,J.propertiesToUpdate))}toggleSelected(J){if(be(this,y).has(J)){be(this,y).delete(J),J.unselect(),Je(this,X,Xt).call(this,{hasSelectedEditor:this.hasSelection});return}be(this,y).add(J),J.select(),Je(this,Y,ii).call(this,J.propertiesToUpdate),Je(this,X,Xt).call(this,{hasSelectedEditor:!0})}setSelected(J){for(const ne of be(this,y))ne!==J&&ne.unselect();be(this,y).clear(),be(this,y).add(J),J.select(),Je(this,Y,ii).call(this,J.propertiesToUpdate),Je(this,X,Xt).call(this,{hasSelectedEditor:!0})}isSelected(J){return be(this,y).has(J)}unselect(J){J.unselect(),be(this,y).delete(J),Je(this,X,Xt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return be(this,y).size!==0}undo(){be(this,_).undo(),Je(this,X,Xt).call(this,{hasSomethingToUndo:be(this,_).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Je(this,H,ni).call(this)})}redo(){be(this,_).redo(),Je(this,X,Xt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:be(this,_).hasSomethingToRedo(),isEmpty:Je(this,H,ni).call(this)})}addCommands(J){be(this,_).add(J),Je(this,X,Xt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Je(this,H,ni).call(this)})}delete(){if(be(this,m)&&be(this,m).commitOrRemove(),!this.hasSelection)return;const J=[...be(this,y)],ne=()=>{for(const ae of J)ae.remove()},re=()=>{for(const ae of J)Je(this,z,Ni).call(this,ae)};this.addCommands({cmd:ne,undo:re,mustExec:!0})}copy(){if(be(this,m)&&be(this,m).commitOrRemove(),this.hasSelection){const J=[];for(const ne of be(this,y))ne.isEmpty()||J.push(ne);if(J.length===0)return;be(this,v).copy(J),Je(this,X,Xt).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(be(this,v).isEmpty())return;this.unselectAll();const J=be(this,k).get(be(this,K)),ne=be(this,v).paste().map(se=>J.deserialize(se)),re=()=>{for(const se of ne)Je(this,z,Ni).call(this,se);Je(this,Z,ui).call(this,ne)},ae=()=>{for(const se of ne)se.remove()};this.addCommands({cmd:re,undo:ae,mustExec:!0})}selectAll(){for(const J of be(this,y))J.commit();Je(this,Z,ui).call(this,be(this,A).values())}unselectAll(){if(be(this,m)){be(this,m).commitOrRemove();return}if(Je(this,Z,ui).size!==0){for(const J of be(this,y))J.unselect();be(this,y).clear(),Je(this,X,Xt).call(this,{hasSelectedEditor:!1})}}isActive(J){return be(this,m)===J}getActive(){return be(this,m)}getMode(){return be(this,R)}};let s=Q;m=new WeakMap,A=new WeakMap,k=new WeakMap,v=new WeakMap,_=new WeakMap,K=new WeakMap,M=new WeakMap,j=new WeakMap,O=new WeakMap,T=new WeakMap,R=new WeakMap,y=new WeakMap,p=new WeakMap,P=new WeakMap,E=new WeakMap,S=new WeakMap,F=new WeakMap,C=new WeakSet,tn=function(){be(this,F).addEventListener("keydown",be(this,p))},D=new WeakSet,Bi=function(){be(this,F).removeEventListener("keydown",be(this,p))},X=new WeakSet,Xt=function(J){Object.entries(J).some(([re,ae])=>be(this,S)[re]!==ae)&&be(this,j).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(be(this,S),J)})},Y=new WeakSet,ii=function(J){be(this,j).dispatch("annotationeditorparamschanged",{source:this,details:J})},I=new WeakSet,nn=function(){if(!be(this,T)){st(this,T,!0);for(const J of be(this,k).values())J.enable()}},$=new WeakSet,rn=function(){if(this.unselectAll(),be(this,T)){st(this,T,!1);for(const J of be(this,k).values())J.disable()}},z=new WeakSet,Ni=function(J){const ne=be(this,k).get(J.pageIndex);ne?ne.addOrRebuild(J):this.addEditor(J)},H=new WeakSet,ni=function(){if(be(this,A).size===0)return!0;if(be(this,A).size===1)for(const J of be(this,A).values())return J.isEmpty();return!1},Z=new WeakSet,ui=function(J){be(this,y).clear();for(const ne of J)ne.isEmpty()||(be(this,y).add(ne),ne.select());Je(this,X,Xt).call(this,{hasSelectedEditor:!0})},Nt(s,"_keyboardManager",new t([[["ctrl+a","mac+meta+a"],Q.prototype.selectAll],[["ctrl+c","mac+meta+c"],Q.prototype.copy],[["ctrl+v","mac+meta+v"],Q.prototype.paste],[["ctrl+x","mac+meta+x"],Q.prototype.cut],[["ctrl+z","mac+meta+z"],Q.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Q.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Q.prototype.delete],[["Escape","mac+Escape"],Q.prototype.unselectAll]])),V.AnnotationEditorUIManager=s},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.StatTimer=V.RenderingCancelledException=V.PixelsPerInch=V.PageViewport=V.PDFDateString=V.DOMStandardFontDataFactory=V.DOMSVGFactory=V.DOMCanvasFactory=V.DOMCMapReaderFactory=V.AnnotationPrefix=void 0,V.deprecated=x,V.getColorValues=_,V.getCurrentTransform=K,V.getCurrentTransformInverse=M,V.getFilenameFromUrl=l,V.getPdfFilenameFromUrl=u,V.getRGB=v,V.getXfaPageViewport=k,V.isDataScheme=r,V.isPdfFile=n,V.isValidFetchUrl=i,V.loadScript=g;var pe=Be(9),de=Be(1);const De="http://www.w3.org/2000/svg",ge="pdfjs_internal_id_";V.AnnotationPrefix=ge;const j=class{};let f=j;Nt(f,"CSS",96),Nt(f,"PDF",72),Nt(f,"PDF_TO_CSS_UNITS",j.CSS/j.PDF),V.PixelsPerInch=f;class h extends pe.BaseCanvasFactory{constructor({ownerDocument:T=globalThis.document}={}){super(),this._document=T}_createCanvas(T,R){const y=this._document.createElement("canvas");return y.width=T,y.height=R,y}}V.DOMCanvasFactory=h;async function t(O,T=!1){if(i(O,document.baseURI)){const R=await fetch(O);if(!R.ok)throw new Error(R.statusText);return T?new Uint8Array(await R.arrayBuffer()):(0,de.stringToBytes)(await R.text())}return new Promise((R,y)=>{const p=new XMLHttpRequest;p.open("GET",O,!0),T&&(p.responseType="arraybuffer"),p.onreadystatechange=()=>{if(p.readyState===XMLHttpRequest.DONE){if(p.status===200||p.status===0){let P;if(T&&p.response?P=new Uint8Array(p.response):!T&&p.responseText&&(P=(0,de.stringToBytes)(p.responseText)),P){R(P);return}}y(new Error(p.statusText))}},p.send(null)})}class o extends pe.BaseCMapReaderFactory{_fetchData(T,R){return t(T,this.isCompressed).then(y=>({cMapData:y,compressionType:R}))}}V.DOMCMapReaderFactory=o;class c extends pe.BaseStandardFontDataFactory{_fetchData(T){return t(T,!0)}}V.DOMStandardFontDataFactory=c;class s extends pe.BaseSVGFactory{_createSVG(T){return document.createElementNS(De,T)}}V.DOMSVGFactory=s;class e{constructor({viewBox:T,scale:R,rotation:y,offsetX:p=0,offsetY:P=0,dontFlip:E=!1}){this.viewBox=T,this.scale=R,this.rotation=y,this.offsetX=p,this.offsetY=P;const S=(T[2]+T[0])/2,F=(T[3]+T[1])/2;let C,b,D,U;switch(y%=360,y<0&&(y+=360),y){case 180:C=-1,b=0,D=0,U=1;break;case 90:C=0,b=1,D=1,U=0;break;case 270:C=0,b=-1,D=-1,U=0;break;case 0:C=1,b=0,D=0,U=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}E&&(D=-D,U=-U);let X,G,Y,N;C===0?(X=Math.abs(F-T[1])*R+p,G=Math.abs(S-T[0])*R+P,Y=Math.abs(T[3]-T[1])*R,N=Math.abs(T[2]-T[0])*R):(X=Math.abs(S-T[0])*R+p,G=Math.abs(F-T[1])*R+P,Y=Math.abs(T[2]-T[0])*R,N=Math.abs(T[3]-T[1])*R),this.transform=[C*R,b*R,D*R,U*R,X-C*R*S-D*R*F,G-b*R*S-U*R*F],this.width=Y,this.height=N}clone({scale:T=this.scale,rotation:R=this.rotation,offsetX:y=this.offsetX,offsetY:p=this.offsetY,dontFlip:P=!1}={}){return new e({viewBox:this.viewBox.slice(),scale:T,rotation:R,offsetX:y,offsetY:p,dontFlip:P})}convertToViewportPoint(T,R){return de.Util.applyTransform([T,R],this.transform)}convertToViewportRectangle(T){const R=de.Util.applyTransform([T[0],T[1]],this.transform),y=de.Util.applyTransform([T[2],T[3]],this.transform);return[R[0],R[1],y[0],y[1]]}convertToPdfPoint(T,R){return de.Util.applyInverseTransform([T,R],this.transform)}}V.PageViewport=e;class a extends de.BaseException{constructor(T,R){super(T,"RenderingCancelledException"),this.type=R}}V.RenderingCancelledException=a;function r(O){const T=O.length;let R=0;for(;R<T&&O[R].trim()==="";)R++;return O.substring(R,R+5).toLowerCase()==="data:"}function n(O){return typeof O=="string"&&/\.pdf$/i.test(O)}function l(O){const T=O.indexOf("#"),R=O.indexOf("?"),y=Math.min(T>0?T:O.length,R>0?R:O.length);return O.substring(O.lastIndexOf("/",y)+1,y)}function u(O,T="document.pdf"){if(typeof O!="string")return T;if(r(O))return(0,de.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),T;const R=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,y=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,p=R.exec(O);let P=y.exec(p[1])||y.exec(p[2])||y.exec(p[3]);if(P&&(P=P[0],P.includes("%")))try{P=y.exec(decodeURIComponent(P))[0]}catch{}return P||T}class d{constructor(){this.started=Object.create(null),this.times=[]}time(T){T in this.started&&(0,de.warn)(`Timer is already running for ${T}`),this.started[T]=Date.now()}timeEnd(T){T in this.started||(0,de.warn)(`Timer has not been started for ${T}`),this.times.push({name:T,start:this.started[T],end:Date.now()}),delete this.started[T]}toString(){const T=[];let R=0;for(const y of this.times){const p=y.name;p.length>R&&(R=p.length)}for(const y of this.times){const p=y.end-y.start;T.push(`${y.name.padEnd(R)} ${p}ms
`)}return T.join("")}}V.StatTimer=d;function i(O,T){try{const{protocol:R}=T?new URL(O,T):new URL(O);return R==="http:"||R==="https:"}catch{return!1}}function g(O,T=!1){return new Promise((R,y)=>{const p=document.createElement("script");p.src=O,p.onload=function(P){T&&p.remove(),R(P)},p.onerror=function(){y(new Error(`Cannot load script at: ${p.src}`))},(document.head||document.documentElement).append(p)})}function x(O){console.log("Deprecated API usage: "+O)}let m;class A{static toDateObject(T){if(!T||typeof T!="string")return null;m||(m=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const R=m.exec(T);if(!R)return null;const y=parseInt(R[1],10);let p=parseInt(R[2],10);p=p>=1&&p<=12?p-1:0;let P=parseInt(R[3],10);P=P>=1&&P<=31?P:1;let E=parseInt(R[4],10);E=E>=0&&E<=23?E:0;let S=parseInt(R[5],10);S=S>=0&&S<=59?S:0;let F=parseInt(R[6],10);F=F>=0&&F<=59?F:0;const C=R[7]||"Z";let b=parseInt(R[8],10);b=b>=0&&b<=23?b:0;let D=parseInt(R[9],10)||0;return D=D>=0&&D<=59?D:0,C==="-"?(E+=b,S+=D):C==="+"&&(E-=b,S-=D),new Date(Date.UTC(y,p,P,E,S,F))}}V.PDFDateString=A;function k(O,{scale:T=1,rotation:R=0}){const{width:y,height:p}=O.attributes.style,P=[0,0,parseInt(y),parseInt(p)];return new e({viewBox:P,scale:T,rotation:R})}function v(O){if(O.startsWith("#")){const T=parseInt(O.slice(1),16);return[(T&16711680)>>16,(T&65280)>>8,T&255]}return O.startsWith("rgb(")?O.slice(4,-1).split(",").map(T=>parseInt(T)):O.startsWith("rgba(")?O.slice(5,-1).split(",").map(T=>parseInt(T)).slice(0,3):((0,de.warn)(`Not a valid color format: "${O}"`),[0,0,0])}function _(O){const T=document.createElement("span");T.style.visibility="hidden",document.body.append(T);for(const R of O.keys()){T.style.color=R;const y=window.getComputedStyle(T).color;O.set(R,v(y))}T.remove()}function K(O){const{a:T,b:R,c:y,d:p,e:P,f:E}=O.getTransform();return[T,R,y,p,P,E]}function M(O){const{a:T,b:R,c:y,d:p,e:P,f:E}=O.getTransform().invertSelf();return[T,R,y,p,P,E]}},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.BaseStandardFontDataFactory=V.BaseSVGFactory=V.BaseCanvasFactory=V.BaseCMapReaderFactory=void 0;var pe=Be(1);class de{constructor(){this.constructor===de&&(0,pe.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,o){if(t<=0||o<=0)throw new Error("Invalid canvas size");const c=this._createCanvas(t,o);return{canvas:c,context:c.getContext("2d")}}reset(t,o,c){if(!t.canvas)throw new Error("Canvas is not specified");if(o<=0||c<=0)throw new Error("Invalid canvas size");t.canvas.width=o,t.canvas.height=c}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,o){(0,pe.unreachable)("Abstract method `_createCanvas` called.")}}V.BaseCanvasFactory=de;class De{constructor({baseUrl:t=null,isCompressed:o=!1}){this.constructor===De&&(0,pe.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=o}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const o=this.baseUrl+t+(this.isCompressed?".bcmap":""),c=this.isCompressed?pe.CMapCompressionType.BINARY:pe.CMapCompressionType.NONE;return this._fetchData(o,c).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${o}`)})}_fetchData(t,o){(0,pe.unreachable)("Abstract method `_fetchData` called.")}}V.BaseCMapReaderFactory=De;class ge{constructor({baseUrl:t=null}){this.constructor===ge&&(0,pe.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const o=`${this.baseUrl}${t}`;return this._fetchData(o).catch(c=>{throw new Error(`Unable to load font data at: ${o}`)})}_fetchData(t){(0,pe.unreachable)("Abstract method `_fetchData` called.")}}V.BaseStandardFontDataFactory=ge;class f{constructor(){this.constructor===f&&(0,pe.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,o,c=!1){if(t<=0||o<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),c||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${o}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${o}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,pe.unreachable)("Abstract method `_createSVG` called.")}}V.BaseSVGFactory=f},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.MurmurHash3_64=void 0;var pe=Be(1);const de=3285377520,De=4294901760,ge=65535;class f{constructor(t){this.h1=t?t&4294967295:de,this.h2=t?t&4294967295:de}update(t){let o,c;if(typeof t=="string"){o=new Uint8Array(t.length*2),c=0;for(let m=0,A=t.length;m<A;m++){const k=t.charCodeAt(m);k<=255?o[c++]=k:(o[c++]=k>>>8,o[c++]=k&255)}}else if((0,pe.isArrayBuffer)(t))o=t.slice(),c=o.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const s=c>>2,e=c-s*4,a=new Uint32Array(o.buffer,0,s);let r=0,n=0,l=this.h1,u=this.h2;const d=3432918353,i=461845907,g=d&ge,x=i&ge;for(let m=0;m<s;m++)m&1?(r=a[m],r=r*d&De|r*g&ge,r=r<<15|r>>>17,r=r*i&De|r*x&ge,l^=r,l=l<<13|l>>>19,l=l*5+3864292196):(n=a[m],n=n*d&De|n*g&ge,n=n<<15|n>>>17,n=n*i&De|n*x&ge,u^=n,u=u<<13|u>>>19,u=u*5+3864292196);switch(r=0,e){case 3:r^=o[s*4+2]<<16;case 2:r^=o[s*4+1]<<8;case 1:r^=o[s*4],r=r*d&De|r*g&ge,r=r<<15|r>>>17,r=r*i&De|r*x&ge,s&1?l^=r:u^=r}this.h1=l,this.h2=u}hexdigest(){let t=this.h1,o=this.h2;t^=o>>>1,t=t*3981806797&De|t*36045&ge,o=o*4283543511&De|((o<<16|t>>>16)*2950163797&De)>>>16,t^=o>>>1,t=t*444984403&De|t*60499&ge,o=o*3301882366&De|((o<<16|t>>>16)*3120437893&De)>>>16,t^=o>>>1;const c=(t>>>0).toString(16),s=(o>>>0).toString(16);return c.padStart(8,"0")+s.padStart(8,"0")}}V.MurmurHash3_64=f},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.FontLoader=V.FontFaceObject=void 0;var pe=Be(1);class de{constructor({docId:h,onUnsupportedFeature:t,ownerDocument:o=globalThis.document,styleElement:c=null}){this.constructor===de&&(0,pe.unreachable)("Cannot initialize BaseFontLoader."),this.docId=h,this._onUnsupportedFeature=t,this._document=o,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(h){this.nativeFontFaces.push(h),this._document.fonts.add(h)}insertRule(h){let t=this.styleElement;t||(t=this.styleElement=this._document.createElement("style"),t.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(t));const o=t.sheet;o.insertRule(h,o.cssRules.length)}clear(){for(const h of this.nativeFontFaces)this._document.fonts.delete(h);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(h){if(h.attached||h.missingFile)return;if(h.attached=!0,this.isFontLoadingAPISupported){const o=h.createNativeFontFace();if(o){this.addNativeFontFace(o);try{await o.loaded}catch(c){throw this._onUnsupportedFeature({featureId:pe.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,pe.warn)(`Failed to load font '${o.family}': '${c}'.`),h.disableFontFace=!0,c}}return}const t=h.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(o=>{const c=this._queueLoadingCallback(o);this._prepareFontLoadEvent([t],[h],c)})}}_queueLoadingCallback(h){(0,pe.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var t;const h=!!((t=this._document)!=null&&t.fonts);return(0,pe.shadow)(this,"isFontLoadingAPISupported",h)}get isSyncFontLoadingSupported(){(0,pe.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,pe.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(h,t,o){(0,pe.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let De;V.FontLoader=De,V.FontLoader=De=class extends de{constructor(h){super(h),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let h=!1;if(typeof navigator>"u")h=!0;else{const t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(t==null?void 0:t[1])>=14&&(h=!0)}return(0,pe.shadow)(this,"isSyncFontLoadingSupported",h)}_queueLoadingCallback(h){function t(){for((0,pe.assert)(!c.done,"completeRequest() cannot be called twice."),c.done=!0;o.requests.length>0&&o.requests[0].done;){const s=o.requests.shift();setTimeout(s.callback,0)}}const o=this.loadingContext,c={id:`pdfjs-font-loading-${o.nextRequestId++}`,done:!1,complete:t,callback:h};return o.requests.push(c),c}get _loadTestFont(){const h=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,pe.shadow)(this,"_loadTestFont",h())}_prepareFontLoadEvent(h,t,o){function c(M,j){return M.charCodeAt(j)<<24|M.charCodeAt(j+1)<<16|M.charCodeAt(j+2)<<8|M.charCodeAt(j+3)&255}function s(M,j,O,T){const R=M.substring(0,j),y=M.substring(j+O);return R+T+y}let e,a;const r=this._document.createElement("canvas");r.width=1,r.height=1;const n=r.getContext("2d");let l=0;function u(M,j){if(l++,l>30){(0,pe.warn)("Load test font never loaded."),j();return}if(n.font="30px "+M,n.fillText(".",0,20),n.getImageData(0,0,1,1).data[3]>0){j();return}setTimeout(u.bind(null,M,j))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let i=this._loadTestFont;i=s(i,976,d.length,d);const x=16,m=1482184792;let A=c(i,x);for(e=0,a=d.length-3;e<a;e+=4)A=A-m+c(d,e)|0;e<d.length&&(A=A-m+c(d+"XXX",e)|0),i=s(i,x,4,(0,pe.string32)(A));const k=`url(data:font/opentype;base64,${btoa(i)});`,v=`@font-face {font-family:"${d}";src:${k}}`;this.insertRule(v);const _=[];for(const M of t)_.push(M.loadedName);_.push(d);const K=this._document.createElement("div");K.style.visibility="hidden",K.style.width=K.style.height="10px",K.style.position="absolute",K.style.top=K.style.left="0px";for(const M of _){const j=this._document.createElement("span");j.textContent="Hi",j.style.fontFamily=M,K.append(j)}this._document.body.append(K),u(d,()=>{K.remove(),o.complete()})}};class ge{constructor(h,{isEvalSupported:t=!0,disableFontFace:o=!1,ignoreErrors:c=!1,onUnsupportedFeature:s,fontRegistry:e=null}){this.compiledGlyphs=Object.create(null);for(const a in h)this[a]=h[a];this.isEvalSupported=t!==!1,this.disableFontFace=o===!0,this.ignoreErrors=c===!0,this._onUnsupportedFeature=s,this.fontRegistry=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let h;if(!this.cssFontInfo)h=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),h=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this.fontRegistry&&this.fontRegistry.registerFont(this),h}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const h=(0,pe.bytesToString)(this.data),t=`url(data:${this.mimetype};base64,${btoa(h)});`;let o;if(!this.cssFontInfo)o=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let c=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(c+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),o=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${c}src:${t}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,t),o}getPathGenerator(h,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let o;try{o=h.get(this.loadedName+"_path_"+t)}catch(c){if(!this.ignoreErrors)throw c;return this._onUnsupportedFeature({featureId:pe.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,pe.warn)(`getPathGenerator - ignoring character: "${c}".`),this.compiledGlyphs[t]=function(s,e){}}if(this.isEvalSupported&&pe.FeatureTest.isEvalSupported){const c=[];for(const s of o){const e=s.args!==void 0?s.args.join(","):"";c.push("c.",s.cmd,"(",e,`);
`)}return this.compiledGlyphs[t]=new Function("c","size",c.join(""))}return this.compiledGlyphs[t]=function(c,s){for(const e of o)e.cmd==="scale"&&(e.args=[s,-s]),c[e.cmd].apply(c,e.args)}}}V.FontFaceObject=ge},(Me,V,Be)=>{var p,ji;Object.defineProperty(V,"__esModule",{value:!0}),V.CanvasGraphics=void 0;var pe=Be(8),de=Be(1),De=Be(13),ge=Be(14),f=Be(3);const h=16,t=100,o=4096,c=15,s=10,e=f.isNodeJS&&typeof Path2D>"u"?-1:1e3,a=16;function r(S,F){if(S._removeMirroring)throw new Error("Context is already forwarding operations.");S.__originalSave=S.save,S.__originalRestore=S.restore,S.__originalRotate=S.rotate,S.__originalScale=S.scale,S.__originalTranslate=S.translate,S.__originalTransform=S.transform,S.__originalSetTransform=S.setTransform,S.__originalResetTransform=S.resetTransform,S.__originalClip=S.clip,S.__originalMoveTo=S.moveTo,S.__originalLineTo=S.lineTo,S.__originalBezierCurveTo=S.bezierCurveTo,S.__originalRect=S.rect,S.__originalClosePath=S.closePath,S.__originalBeginPath=S.beginPath,S._removeMirroring=()=>{S.save=S.__originalSave,S.restore=S.__originalRestore,S.rotate=S.__originalRotate,S.scale=S.__originalScale,S.translate=S.__originalTranslate,S.transform=S.__originalTransform,S.setTransform=S.__originalSetTransform,S.resetTransform=S.__originalResetTransform,S.clip=S.__originalClip,S.moveTo=S.__originalMoveTo,S.lineTo=S.__originalLineTo,S.bezierCurveTo=S.__originalBezierCurveTo,S.rect=S.__originalRect,S.closePath=S.__originalClosePath,S.beginPath=S.__originalBeginPath,delete S._removeMirroring},S.save=function(){F.save(),this.__originalSave()},S.restore=function(){F.restore(),this.__originalRestore()},S.translate=function(b,D){F.translate(b,D),this.__originalTranslate(b,D)},S.scale=function(b,D){F.scale(b,D),this.__originalScale(b,D)},S.transform=function(b,D,U,X,G,Y){F.transform(b,D,U,X,G,Y),this.__originalTransform(b,D,U,X,G,Y)},S.setTransform=function(b,D,U,X,G,Y){F.setTransform(b,D,U,X,G,Y),this.__originalSetTransform(b,D,U,X,G,Y)},S.resetTransform=function(){F.resetTransform(),this.__originalResetTransform()},S.rotate=function(b){F.rotate(b),this.__originalRotate(b)},S.clip=function(b){F.clip(b),this.__originalClip(b)},S.moveTo=function(C,b){F.moveTo(C,b),this.__originalMoveTo(C,b)},S.lineTo=function(C,b){F.lineTo(C,b),this.__originalLineTo(C,b)},S.bezierCurveTo=function(C,b,D,U,X,G){F.bezierCurveTo(C,b,D,U,X,G),this.__originalBezierCurveTo(C,b,D,U,X,G)},S.rect=function(C,b,D,U){F.rect(C,b,D,U),this.__originalRect(C,b,D,U)},S.closePath=function(){F.closePath(),this.__originalClosePath()},S.beginPath=function(){F.beginPath(),this.__originalBeginPath()}}class n{constructor(F){this.canvasFactory=F,this.cache=Object.create(null)}getCanvas(F,C,b){let D;return this.cache[F]!==void 0?(D=this.cache[F],this.canvasFactory.reset(D,C,b)):(D=this.canvasFactory.create(C,b),this.cache[F]=D),D}delete(F){delete this.cache[F]}clear(){for(const F in this.cache){const C=this.cache[F];this.canvasFactory.destroy(C),delete this.cache[F]}}}function l(S,F,C,b,D,U,X,G,Y,N){const[I,L,$,W,z,B]=(0,pe.getCurrentTransform)(S);if(L===0&&$===0){const Z=X*I+z,te=Math.round(Z),Q=G*W+B,ee=Math.round(Q),J=(X+Y)*I+z,ne=Math.abs(Math.round(J)-te)||1,re=(G+N)*W+B,ae=Math.abs(Math.round(re)-ee)||1;return S.setTransform(Math.sign(I),0,0,Math.sign(W),te,ee),S.drawImage(F,C,b,D,U,0,0,ne,ae),S.setTransform(I,L,$,W,z,B),[ne,ae]}if(I===0&&W===0){const Z=G*$+z,te=Math.round(Z),Q=X*L+B,ee=Math.round(Q),J=(G+N)*$+z,ne=Math.abs(Math.round(J)-te)||1,re=(X+Y)*L+B,ae=Math.abs(Math.round(re)-ee)||1;return S.setTransform(0,Math.sign(L),Math.sign($),0,te,ee),S.drawImage(F,C,b,D,U,0,0,ae,ne),S.setTransform(I,L,$,W,z,B),[ae,ne]}S.drawImage(F,C,b,D,U,X,G,Y,N);const H=Math.hypot(I,L),q=Math.hypot($,W);return[H*Y,q*N]}function u(S){const{width:F,height:C}=S;if(F>e||C>e)return null;const b=1e3,D=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),U=F+1;let X=new Uint8Array(U*(C+1)),G,Y,N;const I=F+7&-8;let L=new Uint8Array(I*C),$=0;for(const q of S.data){let Z=128;for(;Z>0;)L[$++]=q&Z?0:255,Z>>=1}let W=0;for($=0,L[$]!==0&&(X[0]=1,++W),Y=1;Y<F;Y++)L[$]!==L[$+1]&&(X[Y]=L[$]?2:1,++W),$++;for(L[$]!==0&&(X[Y]=2,++W),G=1;G<C;G++){$=G*I,N=G*U,L[$-I]!==L[$]&&(X[N]=L[$]?1:8,++W);let q=(L[$]?4:0)+(L[$-I]?8:0);for(Y=1;Y<F;Y++)q=(q>>2)+(L[$+1]?4:0)+(L[$-I+1]?8:0),D[q]&&(X[N+Y]=D[q],++W),$++;if(L[$-I]!==L[$]&&(X[N+Y]=L[$]?2:4,++W),W>b)return null}for($=I*(C-1),N=G*U,L[$]!==0&&(X[N]=8,++W),Y=1;Y<F;Y++)L[$]!==L[$+1]&&(X[N+Y]=L[$]?4:8,++W),$++;if(L[$]!==0&&(X[N+Y]=4,++W),W>b)return null;const z=new Int32Array([0,U,-1,0,-U,0,0,0,1]),B=new Path2D;for(G=0;W&&G<=C;G++){let q=G*U;const Z=q+F;for(;q<Z&&!X[q];)q++;if(q===Z)continue;B.moveTo(q%U,G);const te=q;let Q=X[q];do{const ee=z[Q];do q+=ee;while(!X[q]);const J=X[q];J!==5&&J!==10?(Q=J,X[q]=0):(Q=J&51*Q>>4,X[q]&=Q>>2|Q<<2),B.lineTo(q%U,q/U|0),X[q]||--W}while(te!==q);--G}return L=null,X=null,function(q){q.save(),q.scale(1/F,-1/C),q.translate(0,-C),q.fill(B),q.beginPath(),q.restore()}}class d{constructor(F,C){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=de.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=de.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=de.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,F,C])}clone(){const F=Object.create(this);return F.clipBox=this.clipBox.slice(),F}setCurrentPoint(F,C){this.x=F,this.y=C}updatePathMinMax(F,C,b){[C,b]=de.Util.applyTransform([C,b],F),this.minX=Math.min(this.minX,C),this.minY=Math.min(this.minY,b),this.maxX=Math.max(this.maxX,C),this.maxY=Math.max(this.maxY,b)}updateRectMinMax(F,C){const b=de.Util.applyTransform(C,F),D=de.Util.applyTransform(C.slice(2),F);this.minX=Math.min(this.minX,b[0],D[0]),this.minY=Math.min(this.minY,b[1],D[1]),this.maxX=Math.max(this.maxX,b[0],D[0]),this.maxY=Math.max(this.maxY,b[1],D[1])}updateScalingPathMinMax(F,C){de.Util.scaleMinMax(F,C),this.minX=Math.min(this.minX,C[0]),this.maxX=Math.max(this.maxX,C[1]),this.minY=Math.min(this.minY,C[2]),this.maxY=Math.max(this.maxY,C[3])}updateCurvePathMinMax(F,C,b,D,U,X,G,Y,N,I){const L=de.Util.bezierBoundingBox(C,b,D,U,X,G,Y,N);if(I){I[0]=Math.min(I[0],L[0],L[2]),I[1]=Math.max(I[1],L[0],L[2]),I[2]=Math.min(I[2],L[1],L[3]),I[3]=Math.max(I[3],L[1],L[3]);return}this.updateRectMinMax(F,L)}getPathBoundingBox(F=De.PathType.FILL,C=null){const b=[this.minX,this.minY,this.maxX,this.maxY];if(F===De.PathType.STROKE){C||(0,de.unreachable)("Stroke bounding box must include transform.");const D=de.Util.singularValueDecompose2dScale(C),U=D[0]*this.lineWidth/2,X=D[1]*this.lineWidth/2;b[0]-=U,b[1]-=X,b[2]+=U,b[3]+=X}return b}updateClipFromPath(){const F=de.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(F||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(F){this.clipBox=F,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(F=De.PathType.FILL,C=null){return de.Util.intersect(this.clipBox,this.getPathBoundingBox(F,C))}}function i(S,F,C=null){if(typeof ImageData<"u"&&F instanceof ImageData){S.putImageData(F,0,0);return}const b=F.height,D=F.width,U=b%a,X=(b-U)/a,G=U===0?X:X+1,Y=S.createImageData(D,a);let N=0,I;const L=F.data,$=Y.data;let W,z,B,H,q,Z,te,Q;if(C)switch(C.length){case 1:q=C[0],Z=C[0],te=C[0],Q=C[0];break;case 4:q=C[0],Z=C[1],te=C[2],Q=C[3];break}if(F.kind===de.ImageKind.GRAYSCALE_1BPP){const ee=L.byteLength,J=new Uint32Array($.buffer,0,$.byteLength>>2),ne=J.length,re=D+7>>3;let ae=4294967295,se=de.FeatureTest.isLittleEndian?4278190080:255;for(Q&&Q[0]===255&&Q[255]===0&&([ae,se]=[se,ae]),W=0;W<G;W++){for(B=W<X?a:U,I=0,z=0;z<B;z++){const oe=ee-N;let me=0;const xe=oe>re?D:oe*8-7,Ae=xe&-8;let Se=0,Fe=0;for(;me<Ae;me+=8)Fe=L[N++],J[I++]=Fe&128?ae:se,J[I++]=Fe&64?ae:se,J[I++]=Fe&32?ae:se,J[I++]=Fe&16?ae:se,J[I++]=Fe&8?ae:se,J[I++]=Fe&4?ae:se,J[I++]=Fe&2?ae:se,J[I++]=Fe&1?ae:se;for(;me<xe;me++)Se===0&&(Fe=L[N++],Se=128),J[I++]=Fe&Se?ae:se,Se>>=1}for(;I<ne;)J[I++]=0;S.putImageData(Y,0,W*a)}}else if(F.kind===de.ImageKind.RGBA_32BPP){const ee=!!(q||Z||te);for(z=0,H=D*a*4,W=0;W<X;W++){if($.set(L.subarray(N,N+H)),N+=H,ee)for(let J=0;J<H;J+=4)q&&($[J+0]=q[$[J+0]]),Z&&($[J+1]=Z[$[J+1]]),te&&($[J+2]=te[$[J+2]]);S.putImageData(Y,0,z),z+=a}if(W<G){if(H=D*U*4,$.set(L.subarray(N,N+H)),ee)for(let J=0;J<H;J+=4)q&&($[J+0]=q[$[J+0]]),Z&&($[J+1]=Z[$[J+1]]),te&&($[J+2]=te[$[J+2]]);S.putImageData(Y,0,z)}}else if(F.kind===de.ImageKind.RGB_24BPP){const ee=!!(q||Z||te);for(B=a,H=D*B,W=0;W<G;W++){for(W>=X&&(B=U,H=D*B),I=0,z=H;z--;)$[I++]=L[N++],$[I++]=L[N++],$[I++]=L[N++],$[I++]=255;if(ee)for(let J=0;J<I;J+=4)q&&($[J+0]=q[$[J+0]]),Z&&($[J+1]=Z[$[J+1]]),te&&($[J+2]=te[$[J+2]]);S.putImageData(Y,0,W*a)}}else throw new Error(`bad image kind: ${F.kind}`)}function g(S,F){if(F.bitmap){S.drawImage(F.bitmap,0,0);return}const C=F.height,b=F.width,D=C%a,U=(C-D)/a,X=D===0?U:U+1,G=S.createImageData(b,a);let Y=0;const N=F.data,I=G.data;for(let L=0;L<X;L++){const $=L<U?a:D;({srcPos:Y}=(0,ge.applyMaskImageData)({src:N,srcPos:Y,dest:I,width:b,height:$})),S.putImageData(G,0,L*a)}}function x(S,F){const C=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let b=0,D=C.length;b<D;b++){const U=C[b];S[U]!==void 0&&(F[U]=S[U])}S.setLineDash!==void 0&&(F.setLineDash(S.getLineDash()),F.lineDashOffset=S.lineDashOffset)}function m(S,F){S.strokeStyle=S.fillStyle=F||"#000000",S.fillRule="nonzero",S.globalAlpha=1,S.lineWidth=1,S.lineCap="butt",S.lineJoin="miter",S.miterLimit=10,S.globalCompositeOperation="source-over",S.font="10px sans-serif",S.setLineDash!==void 0&&(S.setLineDash([]),S.lineDashOffset=0)}function A(S,F,C,b){const D=S.length;for(let U=3;U<D;U+=4){const X=S[U];if(X===0)S[U-3]=F,S[U-2]=C,S[U-1]=b;else if(X<255){const G=255-X;S[U-3]=S[U-3]*X+F*G>>8,S[U-2]=S[U-2]*X+C*G>>8,S[U-1]=S[U-1]*X+b*G>>8}}}function k(S,F,C){const b=S.length,D=1/255;for(let U=3;U<b;U+=4){const X=C?C[S[U]]:S[U];F[U]=F[U]*X*D|0}}function v(S,F,C){const b=S.length;for(let D=3;D<b;D+=4){const U=S[D-3]*77+S[D-2]*152+S[D-1]*28;F[D]=C?F[D]*C[U>>8]>>8:F[D]*U>>16}}function _(S,F,C,b,D,U,X,G,Y,N,I){const L=!!U,$=L?U[0]:0,W=L?U[1]:0,z=L?U[2]:0;let B;D==="Luminosity"?B=v:B=k;const q=Math.min(b,Math.ceil(1048576/C));for(let Z=0;Z<b;Z+=q){const te=Math.min(q,b-Z),Q=S.getImageData(G-N,Z+(Y-I),C,te),ee=F.getImageData(G,Z+Y,C,te);L&&A(Q.data,$,W,z),B(Q.data,ee.data,X),F.putImageData(ee,G,Z+Y)}}function K(S,F,C,b){const D=b[0],U=b[1],X=b[2]-D,G=b[3]-U;X===0||G===0||(_(F.context,C,X,G,F.subtype,F.backdrop,F.transferMap,D,U,F.offsetX,F.offsetY),S.save(),S.globalAlpha=1,S.globalCompositeOperation="source-over",S.setTransform(1,0,0,1,0,0),S.drawImage(C.canvas,0,0),S.restore())}function M(S,F){const C=de.Util.singularValueDecompose2dScale(S);C[0]=Math.fround(C[0]),C[1]=Math.fround(C[1]);const b=Math.fround((globalThis.devicePixelRatio||1)*pe.PixelsPerInch.PDF_TO_CSS_UNITS);return F!==void 0?F:C[0]<=b||C[1]<=b}const j=["butt","round","square"],O=["miter","round","bevel"],T={},R={},E=class{constructor(F,C,b,D,U,X,G,Y){Ye(this,p);this.ctx=F,this.current=new d(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=C,this.objs=b,this.canvasFactory=D,this.imageLayer=U,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=X,this.cachedCanvases=new n(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=G,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(Y==null?void 0:Y.background)||null,this.foregroundColor=(Y==null?void 0:Y.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(F,C=null){return typeof F=="string"?F.startsWith("g_")?this.commonObjs.get(F):this.objs.get(F):C}beginDrawing({transform:F,viewport:C,transparency:b=!1,background:D=null}){const U=this.ctx.canvas.width,X=this.ctx.canvas.height,G=D||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const Y=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const N=this.backgroundColor=this.ctx.fillStyle;let I=!0,L=G;if(this.ctx.fillStyle=G,L=this.ctx.fillStyle,I=typeof L=="string"&&/^#[0-9A-Fa-f]{6}$/.test(L),Y==="#000000"&&N==="#ffffff"||Y===N||!I)this.foregroundColor=this.backgroundColor=null;else{const[$,W,z]=(0,pe.getRGB)(L),B=q=>(q/=255,q<=.03928?q/12.92:((q+.055)/1.055)**2.4),H=Math.round(.2126*B($)+.7152*B(W)+.0722*B(z));this.selectColor=(q,Z,te)=>{const Q=.2126*B(q)+.7152*B(Z)+.0722*B(te);return Math.round(Q)===H?N:Y}}}if(this.ctx.fillStyle=this.backgroundColor||G,this.ctx.fillRect(0,0,U,X),this.ctx.restore(),b){const Y=this.cachedCanvases.getCanvas("transparent",U,X);this.compositeCtx=this.ctx,this.transparentCanvas=Y.canvas,this.ctx=Y.context,this.ctx.save(),this.ctx.transform(...(0,pe.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),m(this.ctx,this.foregroundColor),F&&(this.ctx.transform(...F),this.outputScaleX=F[0],this.outputScaleY=F[0]),this.ctx.transform(...C.transform),this.viewportScale=C.scale,this.baseTransform=(0,pe.getCurrentTransform)(this.ctx),this.imageLayer&&((0,pe.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(F,C,b,D){const U=F.argsArray,X=F.fnArray;let G=C||0;const Y=U.length;if(Y===G)return G;const N=Y-G>s&&typeof b=="function",I=N?Date.now()+c:0;let L=0;const $=this.commonObjs,W=this.objs;let z;for(;;){if(D!==void 0&&G===D.nextBreakPoint)return D.breakIt(G,b),G;if(z=X[G],z!==de.OPS.dependency)this[z].apply(this,U[G]);else for(const B of U[G]){const H=B.startsWith("g_")?$:W;if(!H.has(B))return H.get(B,b),G}if(G++,G===Y)return G;if(N&&++L>s){if(Date.now()>I)return b(),G;L=0}}}endDrawing(){Je(this,p,ji).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const F of this._cachedBitmapsMap.values()){for(const C of F.values())typeof HTMLCanvasElement<"u"&&C instanceof HTMLCanvasElement&&(C.width=C.height=0);F.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(F,C){const b=F.width,D=F.height;let U=Math.max(Math.hypot(C[0],C[1]),1),X=Math.max(Math.hypot(C[2],C[3]),1),G=b,Y=D,N="prescale1",I,L;for(;U>2&&G>1||X>2&&Y>1;){let $=G,W=Y;U>2&&G>1&&($=Math.ceil(G/2),U/=G/$),X>2&&Y>1&&(W=Math.ceil(Y/2),X/=Y/W),I=this.cachedCanvases.getCanvas(N,$,W),L=I.context,L.clearRect(0,0,$,W),L.drawImage(F,0,0,G,Y,0,0,$,W),F=I.canvas,G=$,Y=W,N=N==="prescale1"?"prescale2":"prescale1"}return{img:F,paintWidth:G,paintHeight:Y}}_createMaskCanvas(F){const C=this.ctx,{width:b,height:D}=F,U=this.current.fillColor,X=this.current.patternFill,G=(0,pe.getCurrentTransform)(C);let Y,N,I,L;if((F.bitmap||F.data)&&F.count>1){const ne=F.bitmap||F.data.buffer,re=G.slice(0,4);N=JSON.stringify(X?re:[re,U]),Y=this._cachedBitmapsMap.get(ne),Y||(Y=new Map,this._cachedBitmapsMap.set(ne,Y));const ae=Y.get(N);if(ae&&!X){const se=Math.round(Math.min(G[0],G[2])+G[4]),oe=Math.round(Math.min(G[1],G[3])+G[5]);return{canvas:ae,offsetX:se,offsetY:oe}}I=ae}I||(L=this.cachedCanvases.getCanvas("maskCanvas",b,D),g(L.context,F));let $=de.Util.transform(G,[1/b,0,0,-1/D,0,0]);$=de.Util.transform($,[1,0,0,1,0,-D]);const W=de.Util.applyTransform([0,0],$),z=de.Util.applyTransform([b,D],$),B=de.Util.normalizeRect([W[0],W[1],z[0],z[1]]),H=Math.round(B[2]-B[0])||1,q=Math.round(B[3]-B[1])||1,Z=this.cachedCanvases.getCanvas("fillCanvas",H,q),te=Z.context,Q=Math.min(W[0],z[0]),ee=Math.min(W[1],z[1]);te.translate(-Q,-ee),te.transform(...$),I||(I=this._scaleImage(L.canvas,(0,pe.getCurrentTransformInverse)(te)),I=I.img,Y&&X&&Y.set(N,I)),te.imageSmoothingEnabled=M((0,pe.getCurrentTransform)(te),F.interpolate),l(te,I,0,0,I.width,I.height,0,0,b,D),te.globalCompositeOperation="source-in";const J=de.Util.transform((0,pe.getCurrentTransformInverse)(te),[1,0,0,1,-Q,-ee]);return te.fillStyle=X?U.getPattern(C,this,J,De.PathType.FILL):U,te.fillRect(0,0,b,D),Y&&!X&&(this.cachedCanvases.delete("fillCanvas"),Y.set(N,Z.canvas)),{canvas:Z.canvas,offsetX:Math.round(Q),offsetY:Math.round(ee)}}setLineWidth(F){F!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=F,this.ctx.lineWidth=F}setLineCap(F){this.ctx.lineCap=j[F]}setLineJoin(F){this.ctx.lineJoin=O[F]}setMiterLimit(F){this.ctx.miterLimit=F}setDash(F,C){const b=this.ctx;b.setLineDash!==void 0&&(b.setLineDash(F),b.lineDashOffset=C)}setRenderingIntent(F){}setFlatness(F){}setGState(F){for(let C=0,b=F.length;C<b;C++){const D=F[C],U=D[0],X=D[1];switch(U){case"LW":this.setLineWidth(X);break;case"LC":this.setLineCap(X);break;case"LJ":this.setLineJoin(X);break;case"ML":this.setMiterLimit(X);break;case"D":this.setDash(X[0],X[1]);break;case"RI":this.setRenderingIntent(X);break;case"FL":this.setFlatness(X);break;case"Font":this.setFont(X[0],X[1]);break;case"CA":this.current.strokeAlpha=D[1];break;case"ca":this.current.fillAlpha=D[1],this.ctx.globalAlpha=D[1];break;case"BM":this.ctx.globalCompositeOperation=X;break;case"SMask":this.current.activeSMask=X?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=X}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const F=this.inSMaskMode;this.current.activeSMask&&!F?this.beginSMaskMode():!this.current.activeSMask&&F&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const F=this.ctx.canvas.width,C=this.ctx.canvas.height,b="smaskGroupAt"+this.groupLevel,D=this.cachedCanvases.getCanvas(b,F,C);this.suspendedCtx=this.ctx,this.ctx=D.context;const U=this.ctx;U.setTransform(...(0,pe.getCurrentTransform)(this.suspendedCtx)),x(this.suspendedCtx,U),r(U,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),x(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(F){if(!this.current.activeSMask)return;F?(F[0]=Math.floor(F[0]),F[1]=Math.floor(F[1]),F[2]=Math.ceil(F[2]),F[3]=Math.ceil(F[3])):F=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const C=this.current.activeSMask,b=this.suspendedCtx;K(b,C,this.ctx,F),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(x(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const F=this.current;this.stateStack.push(F),this.current=F.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),x(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(F,C,b,D,U,X){this.ctx.transform(F,C,b,D,U,X),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(F,C,b){const D=this.ctx,U=this.current;let X=U.x,G=U.y,Y,N;const I=(0,pe.getCurrentTransform)(D),L=I[0]===0&&I[3]===0||I[1]===0&&I[2]===0,$=L?b.slice(0):null;for(let W=0,z=0,B=F.length;W<B;W++)switch(F[W]|0){case de.OPS.rectangle:X=C[z++],G=C[z++];const H=C[z++],q=C[z++],Z=X+H,te=G+q;D.moveTo(X,G),H===0||q===0?D.lineTo(Z,te):(D.lineTo(Z,G),D.lineTo(Z,te),D.lineTo(X,te)),L||U.updateRectMinMax(I,[X,G,Z,te]),D.closePath();break;case de.OPS.moveTo:X=C[z++],G=C[z++],D.moveTo(X,G),L||U.updatePathMinMax(I,X,G);break;case de.OPS.lineTo:X=C[z++],G=C[z++],D.lineTo(X,G),L||U.updatePathMinMax(I,X,G);break;case de.OPS.curveTo:Y=X,N=G,X=C[z+4],G=C[z+5],D.bezierCurveTo(C[z],C[z+1],C[z+2],C[z+3],X,G),U.updateCurvePathMinMax(I,Y,N,C[z],C[z+1],C[z+2],C[z+3],X,G,$),z+=6;break;case de.OPS.curveTo2:Y=X,N=G,D.bezierCurveTo(X,G,C[z],C[z+1],C[z+2],C[z+3]),U.updateCurvePathMinMax(I,Y,N,X,G,C[z],C[z+1],C[z+2],C[z+3],$),X=C[z+2],G=C[z+3],z+=4;break;case de.OPS.curveTo3:Y=X,N=G,X=C[z+2],G=C[z+3],D.bezierCurveTo(C[z],C[z+1],X,G,X,G),U.updateCurvePathMinMax(I,Y,N,C[z],C[z+1],X,G,X,G,$),z+=4;break;case de.OPS.closePath:D.closePath();break}L&&U.updateScalingPathMinMax(I,$),U.setCurrentPoint(X,G)}closePath(){this.ctx.closePath()}stroke(F){F=typeof F<"u"?F:!0;const C=this.ctx,b=this.current.strokeColor;C.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof b=="object"&&(b!=null&&b.getPattern)?(C.save(),C.strokeStyle=b.getPattern(C,this,(0,pe.getCurrentTransformInverse)(C),De.PathType.STROKE),this.rescaleAndStroke(!1),C.restore()):this.rescaleAndStroke(!0)),F&&this.consumePath(this.current.getClippedPathBoundingBox()),C.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(F){F=typeof F<"u"?F:!0;const C=this.ctx,b=this.current.fillColor,D=this.current.patternFill;let U=!1;D&&(C.save(),C.fillStyle=b.getPattern(C,this,(0,pe.getCurrentTransformInverse)(C),De.PathType.FILL),U=!0);const X=this.current.getClippedPathBoundingBox();this.contentVisible&&X!==null&&(this.pendingEOFill?(C.fill("evenodd"),this.pendingEOFill=!1):C.fill()),U&&C.restore(),F&&this.consumePath(X)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=T}eoClip(){this.pendingClip=R}beginText(){this.current.textMatrix=de.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const F=this.pendingTextPaths,C=this.ctx;if(F===void 0){C.beginPath();return}C.save(),C.beginPath();for(const b of F)C.setTransform(...b.transform),C.translate(b.x,b.y),b.addToPath(C,b.fontSize);C.restore(),C.clip(),C.beginPath(),delete this.pendingTextPaths}setCharSpacing(F){this.current.charSpacing=F}setWordSpacing(F){this.current.wordSpacing=F}setHScale(F){this.current.textHScale=F/100}setLeading(F){this.current.leading=-F}setFont(F,C){const b=this.commonObjs.get(F),D=this.current;if(!b)throw new Error(`Can't find font for ${F}`);if(D.fontMatrix=b.fontMatrix||de.FONT_IDENTITY_MATRIX,(D.fontMatrix[0]===0||D.fontMatrix[3]===0)&&(0,de.warn)("Invalid font matrix for font "+F),C<0?(C=-C,D.fontDirection=-1):D.fontDirection=1,this.current.font=b,this.current.fontSize=C,b.isType3Font)return;const U=b.loadedName||"sans-serif";let X="normal";b.black?X="900":b.bold&&(X="bold");const G=b.italic?"italic":"normal",Y=`"${U}", ${b.fallbackName}`;let N=C;C<h?N=h:C>t&&(N=t),this.current.fontSizeScale=C/N,this.ctx.font=`${G} ${X} ${N}px ${Y}`}setTextRenderingMode(F){this.current.textRenderingMode=F}setTextRise(F){this.current.textRise=F}moveText(F,C){this.current.x=this.current.lineX+=F,this.current.y=this.current.lineY+=C}setLeadingMoveText(F,C){this.setLeading(-C),this.moveText(F,C)}setTextMatrix(F,C,b,D,U,X){this.current.textMatrix=[F,C,b,D,U,X],this.current.textMatrixScale=Math.hypot(F,C),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(F,C,b,D){const U=this.ctx,X=this.current,G=X.font,Y=X.textRenderingMode,N=X.fontSize/X.fontSizeScale,I=Y&de.TextRenderingMode.FILL_STROKE_MASK,L=!!(Y&de.TextRenderingMode.ADD_TO_PATH_FLAG),$=X.patternFill&&!G.missingFile;let W;(G.disableFontFace||L||$)&&(W=G.getPathGenerator(this.commonObjs,F)),G.disableFontFace||$?(U.save(),U.translate(C,b),U.beginPath(),W(U,N),D&&U.setTransform(...D),(I===de.TextRenderingMode.FILL||I===de.TextRenderingMode.FILL_STROKE)&&U.fill(),(I===de.TextRenderingMode.STROKE||I===de.TextRenderingMode.FILL_STROKE)&&U.stroke(),U.restore()):((I===de.TextRenderingMode.FILL||I===de.TextRenderingMode.FILL_STROKE)&&U.fillText(F,C,b),(I===de.TextRenderingMode.STROKE||I===de.TextRenderingMode.FILL_STROKE)&&U.strokeText(F,C,b)),L&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,pe.getCurrentTransform)(U),x:C,y:b,fontSize:N,addToPath:W})}get isFontSubpixelAAEnabled(){const{context:F}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);F.scale(1.5,1),F.fillText("I",0,10);const C=F.getImageData(0,0,10,10).data;let b=!1;for(let D=3;D<C.length;D+=4)if(C[D]>0&&C[D]<255){b=!0;break}return(0,de.shadow)(this,"isFontSubpixelAAEnabled",b)}showText(F){const C=this.current,b=C.font;if(b.isType3Font)return this.showType3Text(F);const D=C.fontSize;if(D===0)return;const U=this.ctx,X=C.fontSizeScale,G=C.charSpacing,Y=C.wordSpacing,N=C.fontDirection,I=C.textHScale*N,L=F.length,$=b.vertical,W=$?1:-1,z=b.defaultVMetrics,B=D*C.fontMatrix[0],H=C.textRenderingMode===de.TextRenderingMode.FILL&&!b.disableFontFace&&!C.patternFill;U.save(),U.transform(...C.textMatrix),U.translate(C.x,C.y+C.textRise),N>0?U.scale(I,-1):U.scale(I,1);let q;if(C.patternFill){U.save();const J=C.fillColor.getPattern(U,this,(0,pe.getCurrentTransformInverse)(U),De.PathType.FILL);q=(0,pe.getCurrentTransform)(U),U.restore(),U.fillStyle=J}let Z=C.lineWidth;const te=C.textMatrixScale;if(te===0||Z===0){const J=C.textRenderingMode&de.TextRenderingMode.FILL_STROKE_MASK;(J===de.TextRenderingMode.STROKE||J===de.TextRenderingMode.FILL_STROKE)&&(Z=this.getSinglePixelWidth())}else Z/=te;X!==1&&(U.scale(X,X),Z/=X),U.lineWidth=Z;let Q=0,ee;for(ee=0;ee<L;++ee){const J=F[ee];if(typeof J=="number"){Q+=W*J*D/1e3;continue}let ne=!1;const re=(J.isSpace?Y:0)+G,ae=J.fontChar,se=J.accent;let oe,me,xe=J.width;if($){const Se=J.vmetric||z,Fe=-(J.vmetric?Se[1]:xe*.5)*B,Pe=Se[2]*B;xe=Se?-Se[0]:xe,oe=Fe/X,me=(Q+Pe)/X}else oe=Q/X,me=0;if(b.remeasure&&xe>0){const Se=U.measureText(ae).width*1e3/D*X;if(xe<Se&&this.isFontSubpixelAAEnabled){const Fe=xe/Se;ne=!0,U.save(),U.scale(Fe,1),oe/=Fe}else xe!==Se&&(oe+=(xe-Se)/2e3*D/X)}if(this.contentVisible&&(J.isInFont||b.missingFile)){if(H&&!se)U.fillText(ae,oe,me);else if(this.paintChar(ae,oe,me,q),se){const Se=oe+D*se.offset.x/X,Fe=me-D*se.offset.y/X;this.paintChar(se.fontChar,Se,Fe,q)}}let Ae;$?Ae=xe*B-re*N:Ae=xe*B+re*N,Q+=Ae,ne&&U.restore()}$?C.y-=Q:C.x+=Q*I,U.restore(),this.compose()}showType3Text(F){const C=this.ctx,b=this.current,D=b.font,U=b.fontSize,X=b.fontDirection,G=D.vertical?1:-1,Y=b.charSpacing,N=b.wordSpacing,I=b.textHScale*X,L=b.fontMatrix||de.FONT_IDENTITY_MATRIX,$=F.length,W=b.textRenderingMode===de.TextRenderingMode.INVISIBLE;let z,B,H,q;if(!(W||U===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,C.save(),C.transform(...b.textMatrix),C.translate(b.x,b.y),C.scale(I,X),z=0;z<$;++z){if(B=F[z],typeof B=="number"){q=G*B*U/1e3,this.ctx.translate(q,0),b.x+=q*I;continue}const Z=(B.isSpace?N:0)+Y,te=D.charProcOperatorList[B.operatorListId];if(!te){(0,de.warn)(`Type3 character "${B.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=B,this.save(),C.scale(U,U),C.transform(...L),this.executeOperatorList(te),this.restore()),H=de.Util.applyTransform([B.width,0],L)[0]*U+Z,C.translate(H,0),b.x+=H*I}C.restore(),this.processingType3=null}}setCharWidth(F,C){}setCharWidthAndBounds(F,C,b,D,U,X){this.ctx.rect(b,D,U-b,X-D),this.ctx.clip(),this.endPath()}getColorN_Pattern(F){let C;if(F[0]==="TilingPattern"){const b=F[1],D=this.baseTransform||(0,pe.getCurrentTransform)(this.ctx),U={createCanvasGraphics:X=>new E(X,this.commonObjs,this.objs,this.canvasFactory)};C=new De.TilingPattern(F,b,this.ctx,U,D)}else C=this._getPattern(F[1],F[2]);return C}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(F,C,b){var U;const D=((U=this.selectColor)==null?void 0:U.call(this,F,C,b))||de.Util.makeHexColor(F,C,b);this.ctx.strokeStyle=D,this.current.strokeColor=D}setFillRGBColor(F,C,b){var U;const D=((U=this.selectColor)==null?void 0:U.call(this,F,C,b))||de.Util.makeHexColor(F,C,b);this.ctx.fillStyle=D,this.current.fillColor=D,this.current.patternFill=!1}_getPattern(F,C=null){let b;return this.cachedPatterns.has(F)?b=this.cachedPatterns.get(F):(b=(0,De.getShadingPattern)(this.objs.get(F)),this.cachedPatterns.set(F,b)),C&&(b.matrix=C),b}shadingFill(F){if(!this.contentVisible)return;const C=this.ctx;this.save();const b=this._getPattern(F);C.fillStyle=b.getPattern(C,this,(0,pe.getCurrentTransformInverse)(C),De.PathType.SHADING);const D=(0,pe.getCurrentTransformInverse)(C);if(D){const U=C.canvas,X=U.width,G=U.height,Y=de.Util.applyTransform([0,0],D),N=de.Util.applyTransform([0,G],D),I=de.Util.applyTransform([X,0],D),L=de.Util.applyTransform([X,G],D),$=Math.min(Y[0],N[0],I[0],L[0]),W=Math.min(Y[1],N[1],I[1],L[1]),z=Math.max(Y[0],N[0],I[0],L[0]),B=Math.max(Y[1],N[1],I[1],L[1]);this.ctx.fillRect($,W,z-$,B-W)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,de.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,de.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(F,C){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(F)&&F.length===6&&this.transform(...F),this.baseTransform=(0,pe.getCurrentTransform)(this.ctx),C)){const b=C[2]-C[0],D=C[3]-C[1];this.ctx.rect(C[0],C[1],b,D),this.current.updateRectMinMax((0,pe.getCurrentTransform)(this.ctx),C),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(F){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const C=this.ctx;F.isolated||(0,de.info)("TODO: Support non-isolated groups."),F.knockout&&(0,de.warn)("Knockout groups not supported.");const b=(0,pe.getCurrentTransform)(C);if(F.matrix&&C.transform(...F.matrix),!F.bbox)throw new Error("Bounding box is required.");let D=de.Util.getAxialAlignedBoundingBox(F.bbox,(0,pe.getCurrentTransform)(C));const U=[0,0,C.canvas.width,C.canvas.height];D=de.Util.intersect(D,U)||[0,0,0,0];const X=Math.floor(D[0]),G=Math.floor(D[1]);let Y=Math.max(Math.ceil(D[2])-X,1),N=Math.max(Math.ceil(D[3])-G,1),I=1,L=1;Y>o&&(I=Y/o,Y=o),N>o&&(L=N/o,N=o),this.current.startNewPathAndClipBox([0,0,Y,N]);let $="groupAt"+this.groupLevel;F.smask&&($+="_smask_"+this.smaskCounter++%2);const W=this.cachedCanvases.getCanvas($,Y,N),z=W.context;z.scale(1/I,1/L),z.translate(-X,-G),z.transform(...b),F.smask?this.smaskStack.push({canvas:W.canvas,context:z,offsetX:X,offsetY:G,scaleX:I,scaleY:L,subtype:F.smask.subtype,backdrop:F.smask.backdrop,transferMap:F.smask.transferMap||null,startTransformInverse:null}):(C.setTransform(1,0,0,1,0,0),C.translate(X,G),C.scale(I,L),C.save()),x(C,z),this.ctx=z,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(C),this.groupLevel++}endGroup(F){if(!this.contentVisible)return;this.groupLevel--;const C=this.ctx,b=this.groupStack.pop();if(this.ctx=b,this.ctx.imageSmoothingEnabled=!1,F.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const D=(0,pe.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...D);const U=de.Util.getAxialAlignedBoundingBox([0,0,C.canvas.width,C.canvas.height],D);this.ctx.drawImage(C.canvas,0,0),this.ctx.restore(),this.compose(U)}}beginAnnotation(F,C,b,D,U){if(Je(this,p,ji).call(this),m(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(C)&&C.length===4){const X=C[2]-C[0],G=C[3]-C[1];if(U&&this.annotationCanvasMap){b=b.slice(),b[4]-=C[0],b[5]-=C[1],C=C.slice(),C[0]=C[1]=0,C[2]=X,C[3]=G;const[Y,N]=de.Util.singularValueDecompose2dScale((0,pe.getCurrentTransform)(this.ctx)),{viewportScale:I}=this,L=Math.ceil(X*this.outputScaleX*I),$=Math.ceil(G*this.outputScaleY*I);this.annotationCanvas=this.canvasFactory.create(L,$);const{canvas:W,context:z}=this.annotationCanvas;this.annotationCanvasMap.set(F,W),this.annotationCanvas.savedCtx=this.ctx,this.ctx=z,this.ctx.setTransform(Y,0,0,-N,0,G*N),m(this.ctx,this.foregroundColor)}else m(this.ctx,this.foregroundColor),this.ctx.rect(C[0],C[1],X,G),this.ctx.clip(),this.endPath()}this.current=new d(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...b),this.transform(...D)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(F){if(!this.contentVisible)return;const C=F.count;F=this.getObject(F.data,F),F.count=C;const b=this.ctx,D=this.processingType3;if(D&&(D.compiled===void 0&&(D.compiled=u(F)),D.compiled)){D.compiled(b);return}const U=this._createMaskCanvas(F),X=U.canvas;b.save(),b.setTransform(1,0,0,1,0,0),b.drawImage(X,U.offsetX,U.offsetY),b.restore(),this.compose()}paintImageMaskXObjectRepeat(F,C,b=0,D=0,U,X){if(!this.contentVisible)return;F=this.getObject(F.data,F);const G=this.ctx;G.save();const Y=(0,pe.getCurrentTransform)(G);G.transform(C,b,D,U,0,0);const N=this._createMaskCanvas(F);G.setTransform(1,0,0,1,0,0);for(let I=0,L=X.length;I<L;I+=2){const $=de.Util.transform(Y,[C,b,D,U,X[I],X[I+1]]),[W,z]=de.Util.applyTransform([0,0],$);G.drawImage(N.canvas,W,z)}G.restore(),this.compose()}paintImageMaskXObjectGroup(F){if(!this.contentVisible)return;const C=this.ctx,b=this.current.fillColor,D=this.current.patternFill;for(const U of F){const{data:X,width:G,height:Y,transform:N}=U,I=this.cachedCanvases.getCanvas("maskCanvas",G,Y),L=I.context;L.save();const $=this.getObject(X,U);g(L,$),L.globalCompositeOperation="source-in",L.fillStyle=D?b.getPattern(L,this,(0,pe.getCurrentTransformInverse)(C),De.PathType.FILL):b,L.fillRect(0,0,G,Y),L.restore(),C.save(),C.transform(...N),C.scale(1,-1),l(C,I.canvas,0,0,G,Y,0,-1,1,1),C.restore()}this.compose()}paintImageXObject(F){if(!this.contentVisible)return;const C=this.getObject(F);if(!C){(0,de.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(C)}paintImageXObjectRepeat(F,C,b,D){if(!this.contentVisible)return;const U=this.getObject(F);if(!U){(0,de.warn)("Dependent image isn't ready yet");return}const X=U.width,G=U.height,Y=[];for(let N=0,I=D.length;N<I;N+=2)Y.push({transform:[C,0,0,b,D[N],D[N+1]],x:0,y:0,w:X,h:G});this.paintInlineImageXObjectGroup(U,Y)}paintInlineImageXObject(F){if(!this.contentVisible)return;const C=F.width,b=F.height,D=this.ctx;this.save(),D.scale(1/C,-1/b);let U;if(typeof HTMLElement=="function"&&F instanceof HTMLElement||!F.data)U=F;else{const N=this.cachedCanvases.getCanvas("inlineImage",C,b),I=N.context;i(I,F,this.current.transferMaps),U=N.canvas}const X=this._scaleImage(U,(0,pe.getCurrentTransformInverse)(D));D.imageSmoothingEnabled=M((0,pe.getCurrentTransform)(D),F.interpolate);const[G,Y]=l(D,X.img,0,0,X.paintWidth,X.paintHeight,0,-b,C,b);if(this.imageLayer){const[N,I]=de.Util.applyTransform([0,-b],(0,pe.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:F,left:N,top:I,width:G,height:Y})}this.compose(),this.restore()}paintInlineImageXObjectGroup(F,C){if(!this.contentVisible)return;const b=this.ctx,D=F.width,U=F.height,X=this.cachedCanvases.getCanvas("inlineImage",D,U),G=X.context;i(G,F,this.current.transferMaps);for(const Y of C){if(b.save(),b.transform(...Y.transform),b.scale(1,-1),l(b,X.canvas,Y.x,Y.y,Y.w,Y.h,0,-1,1,1),this.imageLayer){const[N,I]=de.Util.applyTransform([Y.x,Y.y],(0,pe.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:F,left:N,top:I,width:D,height:U})}b.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(F){}markPointProps(F,C){}beginMarkedContent(F){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(F,C){F==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(C)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(F){const C=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(F);const b=this.ctx;this.pendingClip&&(C||(this.pendingClip===R?b.clip("evenodd"):b.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),b.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const F=(0,pe.getCurrentTransform)(this.ctx);if(F[1]===0&&F[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(F[0]),Math.abs(F[3]));else{const C=Math.abs(F[0]*F[3]-F[2]*F[1]),b=Math.hypot(F[0],F[2]),D=Math.hypot(F[1],F[3]);this._cachedGetSinglePixelWidth=Math.max(b,D)/C}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:F}=this.current,C=(0,pe.getCurrentTransform)(this.ctx);let b,D;if(C[1]===0&&C[2]===0){const U=Math.abs(C[0]),X=Math.abs(C[3]);if(F===0)b=1/U,D=1/X;else{const G=U*F,Y=X*F;b=G<1?1/G:1,D=Y<1?1/Y:1}}else{const U=Math.abs(C[0]*C[3]-C[2]*C[1]),X=Math.hypot(C[0],C[1]),G=Math.hypot(C[2],C[3]);if(F===0)b=G/U,D=X/U;else{const Y=F*U;b=G>Y?G/Y:1,D=X>Y?X/Y:1}}this._cachedScaleForStroking=[b,D]}return this._cachedScaleForStroking}rescaleAndStroke(F){const{ctx:C}=this,{lineWidth:b}=this.current,[D,U]=this.getScaleForStroking();if(C.lineWidth=b||1,D===1&&U===1){C.stroke();return}let X,G,Y;F&&(X=(0,pe.getCurrentTransform)(C),G=C.getLineDash().slice(),Y=C.lineDashOffset),C.scale(D,U);const N=Math.max(D,U);C.setLineDash(C.getLineDash().map(I=>I/N)),C.lineDashOffset/=N,C.stroke(),F&&(C.setTransform(...X),C.setLineDash(G),C.lineDashOffset=Y)}isContentVisible(){for(let F=this.markedContentStack.length-1;F>=0;F--)if(!this.markedContentStack[F].visible)return!1;return!0}};let y=E;p=new WeakSet,ji=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},V.CanvasGraphics=y;for(const S in de.OPS)y.prototype[S]!==void 0&&(y.prototype[de.OPS[S]]=y.prototype[S])},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.TilingPattern=V.PathType=void 0,V.getShadingPattern=a;var pe=Be(1),de=Be(8),De=Be(3);const ge={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};V.PathType=ge;function f(l,u){if(!u||De.isNodeJS)return;const d=u[2]-u[0],i=u[3]-u[1],g=new Path2D;g.rect(u[0],u[1],d,i),l.clip(g)}class h{constructor(){this.constructor===h&&(0,pe.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,pe.unreachable)("Abstract method `getPattern` called.")}}class t extends h{constructor(u){super(),this._type=u[1],this._bbox=u[2],this._colorStops=u[3],this._p0=u[4],this._p1=u[5],this._r0=u[6],this._r1=u[7],this.matrix=null}_createGradient(u){let d;this._type==="axial"?d=u.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(d=u.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)d.addColorStop(i[0],i[1]);return d}getPattern(u,d,i,g){let x;if(g===ge.STROKE||g===ge.FILL){const m=d.current.getClippedPathBoundingBox(g,(0,de.getCurrentTransform)(u))||[0,0,0,0],A=Math.ceil(m[2]-m[0])||1,k=Math.ceil(m[3]-m[1])||1,v=d.cachedCanvases.getCanvas("pattern",A,k,!0),_=v.context;_.clearRect(0,0,_.canvas.width,_.canvas.height),_.beginPath(),_.rect(0,0,_.canvas.width,_.canvas.height),_.translate(-m[0],-m[1]),i=pe.Util.transform(i,[1,0,0,1,m[0],m[1]]),_.transform(...d.baseTransform),this.matrix&&_.transform(...this.matrix),f(_,this._bbox),_.fillStyle=this._createGradient(_),_.fill(),x=u.createPattern(v.canvas,"no-repeat");const K=new DOMMatrix(i);try{x.setTransform(K)}catch(M){(0,pe.warn)(`RadialAxialShadingPattern.getPattern: "${M==null?void 0:M.message}".`)}}else f(u,this._bbox),x=this._createGradient(u);return x}}function o(l,u,d,i,g,x,m,A){const k=u.coords,v=u.colors,_=l.data,K=l.width*4;let M;k[d+1]>k[i+1]&&(M=d,d=i,i=M,M=x,x=m,m=M),k[i+1]>k[g+1]&&(M=i,i=g,g=M,M=m,m=A,A=M),k[d+1]>k[i+1]&&(M=d,d=i,i=M,M=x,x=m,m=M);const j=(k[d]+u.offsetX)*u.scaleX,O=(k[d+1]+u.offsetY)*u.scaleY,T=(k[i]+u.offsetX)*u.scaleX,R=(k[i+1]+u.offsetY)*u.scaleY,y=(k[g]+u.offsetX)*u.scaleX,p=(k[g+1]+u.offsetY)*u.scaleY;if(O>=p)return;const P=v[x],E=v[x+1],S=v[x+2],F=v[m],C=v[m+1],b=v[m+2],D=v[A],U=v[A+1],X=v[A+2],G=Math.round(O),Y=Math.round(p);let N,I,L,$,W,z,B,H;for(let q=G;q<=Y;q++){if(q<R){let J;q<O?J=0:J=(O-q)/(O-R),N=j-(j-T)*J,I=P-(P-F)*J,L=E-(E-C)*J,$=S-(S-b)*J}else{let J;q>p?J=1:R===p?J=0:J=(R-q)/(R-p),N=T-(T-y)*J,I=F-(F-D)*J,L=C-(C-U)*J,$=b-(b-X)*J}let Z;q<O?Z=0:q>p?Z=1:Z=(O-q)/(O-p),W=j-(j-y)*Z,z=P-(P-D)*Z,B=E-(E-U)*Z,H=S-(S-X)*Z;const te=Math.round(Math.min(N,W)),Q=Math.round(Math.max(N,W));let ee=K*q+te*4;for(let J=te;J<=Q;J++)Z=(N-J)/(N-W),Z<0?Z=0:Z>1&&(Z=1),_[ee++]=I-(I-z)*Z|0,_[ee++]=L-(L-B)*Z|0,_[ee++]=$-($-H)*Z|0,_[ee++]=255}}function c(l,u,d){const i=u.coords,g=u.colors;let x,m;switch(u.type){case"lattice":const A=u.verticesPerRow,k=Math.floor(i.length/A)-1,v=A-1;for(x=0;x<k;x++){let _=x*A;for(let K=0;K<v;K++,_++)o(l,d,i[_],i[_+1],i[_+A],g[_],g[_+1],g[_+A]),o(l,d,i[_+A+1],i[_+1],i[_+A],g[_+A+1],g[_+1],g[_+A])}break;case"triangles":for(x=0,m=i.length;x<m;x+=3)o(l,d,i[x],i[x+1],i[x+2],g[x],g[x+1],g[x+2]);break;default:throw new Error("illegal figure")}}class s extends h{constructor(u){super(),this._coords=u[2],this._colors=u[3],this._figures=u[4],this._bounds=u[5],this._bbox=u[7],this._background=u[8],this.matrix=null}_createMeshCanvas(u,d,i){const A=Math.floor(this._bounds[0]),k=Math.floor(this._bounds[1]),v=Math.ceil(this._bounds[2])-A,_=Math.ceil(this._bounds[3])-k,K=Math.min(Math.ceil(Math.abs(v*u[0]*1.1)),3e3),M=Math.min(Math.ceil(Math.abs(_*u[1]*1.1)),3e3),j=v/K,O=_/M,T={coords:this._coords,colors:this._colors,offsetX:-A,offsetY:-k,scaleX:1/j,scaleY:1/O},R=K+2*2,y=M+2*2,p=i.getCanvas("mesh",R,y,!1),P=p.context,E=P.createImageData(K,M);if(d){const F=E.data;for(let C=0,b=F.length;C<b;C+=4)F[C]=d[0],F[C+1]=d[1],F[C+2]=d[2],F[C+3]=255}for(const F of this._figures)c(E,F,T);return P.putImageData(E,2,2),{canvas:p.canvas,offsetX:A-2*j,offsetY:k-2*O,scaleX:j,scaleY:O}}getPattern(u,d,i,g){f(u,this._bbox);let x;if(g===ge.SHADING)x=pe.Util.singularValueDecompose2dScale((0,de.getCurrentTransform)(u));else if(x=pe.Util.singularValueDecompose2dScale(d.baseTransform),this.matrix){const A=pe.Util.singularValueDecompose2dScale(this.matrix);x=[x[0]*A[0],x[1]*A[1]]}const m=this._createMeshCanvas(x,g===ge.SHADING?null:this._background,d.cachedCanvases);return g!==ge.SHADING&&(u.setTransform(...d.baseTransform),this.matrix&&u.transform(...this.matrix)),u.translate(m.offsetX,m.offsetY),u.scale(m.scaleX,m.scaleY),u.createPattern(m.canvas,"no-repeat")}}class e extends h{getPattern(){return"hotpink"}}function a(l){switch(l[0]){case"RadialAxial":return new t(l);case"Mesh":return new s(l);case"Dummy":return new e}throw new Error(`Unknown IR type: ${l[0]}`)}const r={COLORED:1,UNCOLORED:2};class n{static get MAX_PATTERN_SIZE(){return(0,pe.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(u,d,i,g,x){this.operatorList=u[2],this.matrix=u[3]||[1,0,0,1,0,0],this.bbox=u[4],this.xstep=u[5],this.ystep=u[6],this.paintType=u[7],this.tilingType=u[8],this.color=d,this.ctx=i,this.canvasGraphicsFactory=g,this.baseTransform=x}createPatternCanvas(u){const d=this.operatorList,i=this.bbox,g=this.xstep,x=this.ystep,m=this.paintType,A=this.tilingType,k=this.color,v=this.canvasGraphicsFactory;(0,pe.info)("TilingType: "+A);const _=i[0],K=i[1],M=i[2],j=i[3],O=pe.Util.singularValueDecompose2dScale(this.matrix),T=pe.Util.singularValueDecompose2dScale(this.baseTransform),R=[O[0]*T[0],O[1]*T[1]],y=this.getSizeAndScale(g,this.ctx.canvas.width,R[0]),p=this.getSizeAndScale(x,this.ctx.canvas.height,R[1]),P=u.cachedCanvases.getCanvas("pattern",y.size,p.size,!0),E=P.context,S=v.createCanvasGraphics(E);S.groupLevel=u.groupLevel,this.setFillAndStrokeStyleToContext(S,m,k);let F=_,C=K,b=M,D=j;return _<0&&(F=0,b+=Math.abs(_)),K<0&&(C=0,D+=Math.abs(K)),E.translate(-(y.scale*F),-(p.scale*C)),S.transform(y.scale,0,0,p.scale,0,0),E.save(),this.clipBbox(S,F,C,b,D),S.baseTransform=(0,de.getCurrentTransform)(S.ctx),S.executeOperatorList(d),S.endDrawing(),{canvas:P.canvas,scaleX:y.scale,scaleY:p.scale,offsetX:F,offsetY:C}}getSizeAndScale(u,d,i){u=Math.abs(u);const g=Math.max(n.MAX_PATTERN_SIZE,d);let x=Math.ceil(u*i);return x>=g?x=g:i=x/u,{scale:i,size:x}}clipBbox(u,d,i,g,x){const m=g-d,A=x-i;u.ctx.rect(d,i,m,A),u.current.updateRectMinMax((0,de.getCurrentTransform)(u.ctx),[d,i,g,x]),u.clip(),u.endPath()}setFillAndStrokeStyleToContext(u,d,i){const g=u.ctx,x=u.current;switch(d){case r.COLORED:const m=this.ctx;g.fillStyle=m.fillStyle,g.strokeStyle=m.strokeStyle,x.fillColor=m.fillStyle,x.strokeColor=m.strokeStyle;break;case r.UNCOLORED:const A=pe.Util.makeHexColor(i[0],i[1],i[2]);g.fillStyle=A,g.strokeStyle=A,x.fillColor=A,x.strokeColor=A;break;default:throw new pe.FormatError(`Unsupported paint type: ${d}`)}}getPattern(u,d,i,g){let x=i;g!==ge.SHADING&&(x=pe.Util.transform(x,d.baseTransform),this.matrix&&(x=pe.Util.transform(x,this.matrix)));const m=this.createPatternCanvas(d);let A=new DOMMatrix(x);A=A.translate(m.offsetX,m.offsetY),A=A.scale(1/m.scaleX,1/m.scaleY);const k=u.createPattern(m.canvas,"repeat");try{k.setTransform(A)}catch(v){(0,pe.warn)(`TilingPattern.getPattern: "${v==null?void 0:v.message}".`)}return k}}V.TilingPattern=n},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.applyMaskImageData=de;var pe=Be(1);function de({src:De,srcPos:ge=0,dest:f,destPos:h=0,width:t,height:o,inverseDecode:c=!1}){const s=pe.FeatureTest.isLittleEndian?4278190080:255,[e,a]=c?[0,s]:[s,0],r=t>>3,n=t&7,l=De.length;f=new Uint32Array(f.buffer);for(let u=0;u<o;u++){for(const i=ge+r;ge<i;ge++){const g=ge<l?De[ge]:255;f[h++]=g&128?a:e,f[h++]=g&64?a:e,f[h++]=g&32?a:e,f[h++]=g&16?a:e,f[h++]=g&8?a:e,f[h++]=g&4?a:e,f[h++]=g&2?a:e,f[h++]=g&1?a:e}if(n===0)continue;const d=ge<l?De[ge++]:255;for(let i=0;i<n;i++)f[h++]=d&1<<7-i?a:e}return{srcPos:ge,destPos:h}}},(Me,V)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.GlobalWorkerOptions=void 0;const Be=Object.create(null);V.GlobalWorkerOptions=Be,Be.workerPort=Be.workerPort===void 0?null:Be.workerPort,Be.workerSrc=Be.workerSrc===void 0?"":Be.workerSrc},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.MessageHandler=void 0;var pe=Be(1);const de={UNKNOWN:0,DATA:1,ERROR:2},De={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ge(h){switch(h instanceof Error||typeof h=="object"&&h!==null||(0,pe.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new pe.AbortException(h.message);case"MissingPDFException":return new pe.MissingPDFException(h.message);case"PasswordException":return new pe.PasswordException(h.message,h.code);case"UnexpectedResponseException":return new pe.UnexpectedResponseException(h.message,h.status);case"UnknownErrorException":return new pe.UnknownErrorException(h.message,h.details);default:return new pe.UnknownErrorException(h.message,h.toString())}}class f{constructor(t,o,c){this.sourceName=t,this.targetName=o,this.comObj=c,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=s=>{const e=s.data;if(e.targetName!==this.sourceName)return;if(e.stream){this._processStreamMessage(e);return}if(e.callback){const r=e.callbackId,n=this.callbackCapabilities[r];if(!n)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===de.DATA)n.resolve(e.data);else if(e.callback===de.ERROR)n.reject(ge(e.reason));else throw new Error("Unexpected callback case");return}const a=this.actionHandler[e.action];if(!a)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,n=e.sourceName;new Promise(function(l){l(a(e.data))}).then(function(l){c.postMessage({sourceName:r,targetName:n,callback:de.DATA,callbackId:e.callbackId,data:l})},function(l){c.postMessage({sourceName:r,targetName:n,callback:de.ERROR,callbackId:e.callbackId,reason:ge(l)})});return}if(e.streamId){this._createStreamSink(e);return}a(e.data)},c.addEventListener("message",this._onComObjOnMessage)}on(t,o){const c=this.actionHandler;if(c[t])throw new Error(`There is already an actionName called "${t}"`);c[t]=o}send(t,o,c){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:o},c)}sendWithPromise(t,o,c){const s=this.callbackId++,e=(0,pe.createPromiseCapability)();this.callbackCapabilities[s]=e;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:o},c)}catch(a){e.reject(a)}return e.promise}sendWithStream(t,o,c,s){const e=this.streamId++,a=this.sourceName,r=this.targetName,n=this.comObj;return new ReadableStream({start:l=>{const u=(0,pe.createPromiseCapability)();return this.streamControllers[e]={controller:l,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},n.postMessage({sourceName:a,targetName:r,action:t,streamId:e,data:o,desiredSize:l.desiredSize},s),u.promise},pull:l=>{const u=(0,pe.createPromiseCapability)();return this.streamControllers[e].pullCall=u,n.postMessage({sourceName:a,targetName:r,stream:De.PULL,streamId:e,desiredSize:l.desiredSize}),u.promise},cancel:l=>{(0,pe.assert)(l instanceof Error,"cancel must have a valid reason");const u=(0,pe.createPromiseCapability)();return this.streamControllers[e].cancelCall=u,this.streamControllers[e].isClosed=!0,n.postMessage({sourceName:a,targetName:r,stream:De.CANCEL,streamId:e,reason:ge(l)}),u.promise}},c)}_createStreamSink(t){const o=t.streamId,c=this.sourceName,s=t.sourceName,e=this.comObj,a=this,r=this.actionHandler[t.action],n={enqueue(l,u=1,d){if(this.isCancelled)return;const i=this.desiredSize;this.desiredSize-=u,i>0&&this.desiredSize<=0&&(this.sinkCapability=(0,pe.createPromiseCapability)(),this.ready=this.sinkCapability.promise),e.postMessage({sourceName:c,targetName:s,stream:De.ENQUEUE,streamId:o,chunk:l},d)},close(){this.isCancelled||(this.isCancelled=!0,e.postMessage({sourceName:c,targetName:s,stream:De.CLOSE,streamId:o}),delete a.streamSinks[o])},error(l){(0,pe.assert)(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,e.postMessage({sourceName:c,targetName:s,stream:De.ERROR,streamId:o,reason:ge(l)}))},sinkCapability:(0,pe.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};n.sinkCapability.resolve(),n.ready=n.sinkCapability.promise,this.streamSinks[o]=n,new Promise(function(l){l(r(t.data,n))}).then(function(){e.postMessage({sourceName:c,targetName:s,stream:De.START_COMPLETE,streamId:o,success:!0})},function(l){e.postMessage({sourceName:c,targetName:s,stream:De.START_COMPLETE,streamId:o,reason:ge(l)})})}_processStreamMessage(t){const o=t.streamId,c=this.sourceName,s=t.sourceName,e=this.comObj,a=this.streamControllers[o],r=this.streamSinks[o];switch(t.stream){case De.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(ge(t.reason));break;case De.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(ge(t.reason));break;case De.PULL:if(!r){e.postMessage({sourceName:c,targetName:s,stream:De.PULL_COMPLETE,streamId:o,success:!0});break}r.desiredSize<=0&&t.desiredSize>0&&r.sinkCapability.resolve(),r.desiredSize=t.desiredSize,new Promise(function(n){n(r.onPull&&r.onPull())}).then(function(){e.postMessage({sourceName:c,targetName:s,stream:De.PULL_COMPLETE,streamId:o,success:!0})},function(n){e.postMessage({sourceName:c,targetName:s,stream:De.PULL_COMPLETE,streamId:o,reason:ge(n)})});break;case De.ENQUEUE:if((0,pe.assert)(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case De.CLOSE:if((0,pe.assert)(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this._deleteStreamController(a,o);break;case De.ERROR:(0,pe.assert)(a,"error should have stream controller"),a.controller.error(ge(t.reason)),this._deleteStreamController(a,o);break;case De.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(ge(t.reason)),this._deleteStreamController(a,o);break;case De.CANCEL:if(!r)break;new Promise(function(n){n(r.onCancel&&r.onCancel(ge(t.reason)))}).then(function(){e.postMessage({sourceName:c,targetName:s,stream:De.CANCEL_COMPLETE,streamId:o,success:!0})},function(n){e.postMessage({sourceName:c,targetName:s,stream:De.CANCEL_COMPLETE,streamId:o,reason:ge(n)})}),r.sinkCapability.reject(ge(t.reason)),r.isCancelled=!0,delete this.streamSinks[o];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(t,o){await Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]),delete this.streamControllers[o]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}V.MessageHandler=f},(Me,V,Be)=>{var De,ge;Object.defineProperty(V,"__esModule",{value:!0}),V.Metadata=void 0;var pe=Be(1);class de{constructor({parsedData:h,rawData:t}){Ye(this,De,void 0);Ye(this,ge,void 0);st(this,De,h),st(this,ge,t)}getRaw(){return be(this,ge)}get(h){return be(this,De).get(h)??null}getAll(){return(0,pe.objectFromMap)(be(this,De))}has(h){return be(this,De).has(h)}}De=new WeakMap,ge=new WeakMap,V.Metadata=de},(Me,V,Be)=>{var f,h,t,o,c,s,Ui;Object.defineProperty(V,"__esModule",{value:!0}),V.OptionalContentConfig=void 0;var pe=Be(1);const de=Symbol("INTERNAL");class De{constructor(r,n){Ye(this,f,!0);this.name=r,this.intent=n}get visible(){return be(this,f)}_setVisible(r,n){r!==de&&(0,pe.unreachable)("Internal method `_setVisible` called."),st(this,f,n)}}f=new WeakMap;class ge{constructor(r){Ye(this,s);Ye(this,h,!0);Ye(this,t,new Map);Ye(this,o,null);Ye(this,c,null);if(this.name=null,this.creator=null,r!==null){this.name=r.name,this.creator=r.creator,st(this,c,r.order);for(const n of r.groups)be(this,t).set(n.id,new De(n.name,n.intent));if(r.baseState==="OFF")for(const n of be(this,t).values())n._setVisible(de,!1);for(const n of r.on)be(this,t).get(n)._setVisible(de,!0);for(const n of r.off)be(this,t).get(n)._setVisible(de,!1);st(this,o,new Map);for(const[n,l]of be(this,t))be(this,o).set(n,l.visible)}}isVisible(r){if(be(this,t).size===0)return!0;if(!r)return(0,pe.warn)("Optional content group not defined."),!0;if(r.type==="OCG")return be(this,t).has(r.id)?be(this,t).get(r.id).visible:((0,pe.warn)(`Optional content group not found: ${r.id}`),!0);if(r.type==="OCMD"){if(r.expression)return Je(this,s,Ui).call(this,r.expression);if(!r.policy||r.policy==="AnyOn"){for(const n of r.ids){if(!be(this,t).has(n))return(0,pe.warn)(`Optional content group not found: ${n}`),!0;if(be(this,t).get(n).visible)return!0}return!1}else if(r.policy==="AllOn"){for(const n of r.ids){if(!be(this,t).has(n))return(0,pe.warn)(`Optional content group not found: ${n}`),!0;if(!be(this,t).get(n).visible)return!1}return!0}else if(r.policy==="AnyOff"){for(const n of r.ids){if(!be(this,t).has(n))return(0,pe.warn)(`Optional content group not found: ${n}`),!0;if(!be(this,t).get(n).visible)return!0}return!1}else if(r.policy==="AllOff"){for(const n of r.ids){if(!be(this,t).has(n))return(0,pe.warn)(`Optional content group not found: ${n}`),!0;if(be(this,t).get(n).visible)return!1}return!0}return(0,pe.warn)(`Unknown optional content policy ${r.policy}.`),!0}return(0,pe.warn)(`Unknown group type ${r.type}.`),!0}setVisibility(r,n=!0){if(!be(this,t).has(r)){(0,pe.warn)(`Optional content group not found: ${r}`);return}be(this,t).get(r)._setVisible(de,!!n),st(this,h,null)}get hasInitialVisibility(){if(be(this,h)!==null)return be(this,h);for(const[r,n]of be(this,t)){const l=be(this,o).get(r);if(n.visible!==l)return st(this,h,!1)}return st(this,h,!0)}getOrder(){return be(this,t).size?be(this,c)?be(this,c).slice():[...be(this,t).keys()]:null}getGroups(){return be(this,t).size>0?(0,pe.objectFromMap)(be(this,t)):null}getGroup(r){return be(this,t).get(r)||null}}h=new WeakMap,t=new WeakMap,o=new WeakMap,c=new WeakMap,s=new WeakSet,Ui=function(r){const n=r.length;if(n<2)return!0;const l=r[0];for(let u=1;u<n;u++){const d=r[u];let i;if(Array.isArray(d))i=Je(this,s,Ui).call(this,d);else if(be(this,t).has(d))i=be(this,t).get(d).visible;else return(0,pe.warn)(`Optional content group not found: ${d}`),!0;switch(l){case"And":if(!i)return!1;break;case"Or":if(i)return!0;break;case"Not":return!i;default:return!0}}return l==="And"},V.OptionalContentConfig=ge},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.PDFDataTransportStream=void 0;var pe=Be(1),de=Be(8);class De{constructor(t,o){(0,pe.assert)(o,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1,this._contentDispositionFilename=t.contentDispositionFilename||null;const c=t.initialData;if((c==null?void 0:c.length)>0){const s=new Uint8Array(c).buffer;this._queuedChunks.push(s)}this._pdfDataRangeTransport=o,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((s,e)=>{this._onReceiveData({begin:s,chunk:e})}),this._pdfDataRangeTransport.addProgressListener((s,e)=>{this._onProgress({loaded:s,total:e})}),this._pdfDataRangeTransport.addProgressiveReadListener(s=>{this._onReceiveData({chunk:s})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(t){const o=new Uint8Array(t.chunk).buffer;if(t.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(o):this._queuedChunks.push(o);else{const c=this._rangeReaders.some(function(s){return s._begin!==t.begin?!1:(s._enqueue(o),!0)});(0,pe.assert)(c,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){if(t.total===void 0){const o=this._rangeReaders[0];o!=null&&o.onProgress&&o.onProgress({loaded:t.loaded})}else{const o=this._fullRequestReader;o!=null&&o.onProgress&&o.onProgress({loaded:t.loaded,total:t.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const o=this._rangeReaders.indexOf(t);o>=0&&this._rangeReaders.splice(o,1)}getFullReader(){(0,pe.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new ge(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,o){if(o<=this._progressiveDataLength)return null;const c=new f(this,t,o);return this._pdfDataRangeTransport.requestDataRange(t,o),this._rangeReaders.push(c),c}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t);for(const o of this._rangeReaders.slice(0))o.cancel(t);this._pdfDataRangeTransport.abort()}}V.PDFDataTransportStream=De;class ge{constructor(t,o,c=!1,s=null){this._stream=t,this._done=c||!1,this._filename=(0,de.isPdfFile)(s)?s:null,this._queuedChunks=o||[],this._loaded=0;for(const e of this._queuedChunks)this._loaded+=e.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=(0,pe.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class f{constructor(t,o,c){this._stream=t,this._begin=o,this._end=c,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const o=this._queuedChunk;return this._queuedChunk=null,{value:o,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,pe.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(Me,V)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.XfaText=void 0;class Be{static textContent(de){const De=[],ge={items:De,styles:Object.create(null)};function f(h){var c;if(!h)return;let t=null;const o=h.name;if(o==="#text")t=h.value;else if(Be.shouldBuildText(o))(c=h==null?void 0:h.attributes)!=null&&c.textContent?t=h.attributes.textContent:h.value&&(t=h.value);else return;if(t!==null&&De.push({str:t}),!!h.children)for(const s of h.children)f(s)}return f(de),ge}static shouldBuildText(de){return!(de==="textarea"||de==="input"||de==="option"||de==="select")}}V.XfaText=Be},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.NodeStandardFontDataFactory=V.NodeCanvasFactory=V.NodeCMapReaderFactory=void 0;var pe=Be(9);const de=function(h){return new Promise((t,o)=>{require$$2.readFile(h,(s,e)=>{if(s||!e){o(new Error(s));return}t(new Uint8Array(e))})})};class De extends pe.BaseCanvasFactory{_createCanvas(t,o){return require$$2.createCanvas(t,o)}}V.NodeCanvasFactory=De;class ge extends pe.BaseCMapReaderFactory{_fetchData(t,o){return de(t).then(c=>({cMapData:c,compressionType:o}))}}V.NodeCMapReaderFactory=ge;class f extends pe.BaseStandardFontDataFactory{_fetchData(t){return de(t)}}V.NodeStandardFontDataFactory=f},(Me,V,Be)=>{var h,t,o,c,s,e,a,r,n,$i,u,an,i,Xi,x,sn;Object.defineProperty(V,"__esModule",{value:!0}),V.AnnotationEditorLayer=void 0;var pe=Be(7),de=Be(1),De=Be(23),ge=Be(24);const A=class{constructor(v){Ye(this,n);Ye(this,u);Ye(this,i);Ye(this,x);Ye(this,h,void 0);Ye(this,t,!1);Ye(this,o,this.pointerup.bind(this));Ye(this,c,this.pointerdown.bind(this));Ye(this,s,new Map);Ye(this,e,!1);Ye(this,a,!1);Ye(this,r,void 0);A._initialized||(A._initialized=!0,De.FreeTextEditor.initialize(v.l10n),ge.InkEditor.initialize(v.l10n),v.uiManager.registerEditorTypes([De.FreeTextEditor,ge.InkEditor])),st(this,r,v.uiManager),this.annotationStorage=v.annotationStorage,this.pageIndex=v.pageIndex,this.div=v.div,st(this,h,v.accessibilityManager),be(this,r).addLayer(this)}updateToolbar(v){be(this,r).updateToolbar(v)}updateMode(v=be(this,r).getMode()){Je(this,x,sn).call(this),v===de.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),be(this,r).unselectAll()}addInkEditorIfNeeded(v){if(!v&&be(this,r).getMode()!==de.AnnotationEditorType.INK)return;if(!v){for(const K of be(this,s).values())if(K.isEmpty()){K.setInBackground();return}}Je(this,i,Xi).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(v){be(this,r).setEditingState(v)}addCommands(v){be(this,r).addCommands(v)}enable(){this.div.style.pointerEvents="auto";for(const v of be(this,s).values())v.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const v of be(this,s).values())v.disableEditing()}setActiveEditor(v){be(this,r).getActive()!==v&&be(this,r).setActiveEditor(v)}enableClick(){this.div.addEventListener("pointerdown",be(this,c)),this.div.addEventListener("pointerup",be(this,o))}disableClick(){this.div.removeEventListener("pointerdown",be(this,c)),this.div.removeEventListener("pointerup",be(this,o))}attach(v){be(this,s).set(v.id,v)}detach(v){var _;be(this,s).delete(v.id),(_=be(this,h))==null||_.removePointerInTextLayer(v.contentDiv)}remove(v){be(this,r).removeEditor(v),this.detach(v),this.annotationStorage.remove(v.id),v.div.style.display="none",setTimeout(()=>{v.div.style.display="",v.div.remove(),v.isAttachedToDOM=!1,document.activeElement===document.body&&be(this,r).focusMainContainer()},0),be(this,a)||this.addInkEditorIfNeeded(!1)}add(v){if(Je(this,n,$i).call(this,v),be(this,r).addEditor(v),this.attach(v),!v.isAttachedToDOM){const _=v.render();this.div.append(_),v.isAttachedToDOM=!0}this.moveEditorInDOM(v),v.onceAdded(),this.addToAnnotationStorage(v)}moveEditorInDOM(v){var _;(_=be(this,h))==null||_.moveElementInDOM(this.div,v.div,v.contentDiv,!0)}addToAnnotationStorage(v){!v.isEmpty()&&!this.annotationStorage.has(v.id)&&this.annotationStorage.setValue(v.id,v)}addOrRebuild(v){v.needsToBeRebuilt()?v.rebuild():this.add(v)}addANewEditor(v){const _=()=>{this.addOrRebuild(v)},K=()=>{v.remove()};this.addCommands({cmd:_,undo:K,mustExec:!0})}addUndoableEditor(v){const _=()=>{this.addOrRebuild(v)},K=()=>{v.remove()};this.addCommands({cmd:_,undo:K,mustExec:!1})}getNextId(){return be(this,r).getId()}deserialize(v){switch(v.annotationType){case de.AnnotationEditorType.FREETEXT:return De.FreeTextEditor.deserialize(v,this);case de.AnnotationEditorType.INK:return ge.InkEditor.deserialize(v,this)}return null}setSelected(v){be(this,r).setSelected(v)}toggleSelected(v){be(this,r).toggleSelected(v)}isSelected(v){return be(this,r).isSelected(v)}unselect(v){be(this,r).unselect(v)}pointerup(v){const _=pe.KeyboardManager.platform.isMac;if(!(v.button!==0||v.ctrlKey&&_)&&v.target===this.div&&be(this,e)){if(st(this,e,!1),!be(this,t)){st(this,t,!0);return}Je(this,i,Xi).call(this,v)}}pointerdown(v){const _=pe.KeyboardManager.platform.isMac;if(v.button!==0||v.ctrlKey&&_||v.target!==this.div)return;st(this,e,!0);const K=be(this,r).getActive();st(this,t,!K||K.isEmpty())}drop(v){const _=v.dataTransfer.getData("text/plain"),K=be(this,r).getEditor(_);if(!K)return;v.preventDefault(),v.dataTransfer.dropEffect="move",Je(this,n,$i).call(this,K);const M=this.div.getBoundingClientRect(),j=v.clientX-M.x,O=v.clientY-M.y;K.translate(j-K.startX,O-K.startY),this.moveEditorInDOM(K),K.div.focus()}dragover(v){v.preventDefault()}destroy(){var v,_;((v=be(this,r).getActive())==null?void 0:v.parent)===this&&be(this,r).setActiveEditor(null);for(const K of be(this,s).values())(_=be(this,h))==null||_.removePointerInTextLayer(K.contentDiv),K.isAttachedToDOM=!1,K.div.remove(),K.parent=null;this.div=null,be(this,s).clear(),be(this,r).removeLayer(this)}render(v){this.viewport=v.viewport,(0,pe.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const _ of be(this,r).getEditors(this.pageIndex))this.add(_);this.updateMode()}update(v){this.viewport=v.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[v,_,K,M]=this.viewport.viewBox,j=K-v,O=M-_;return[j,O]}get viewportBaseDimensions(){const{width:v,height:_,rotation:K}=this.viewport;return K%180===0?[v,_]:[_,v]}setDimensions(){const{width:v,height:_,rotation:K}=this.viewport,M=K%180!==0,j=Math.floor(v)+"px",O=Math.floor(_)+"px";this.div.style.width=M?O:j,this.div.style.height=M?j:O,this.div.setAttribute("data-main-rotation",K)}};let f=A;h=new WeakMap,t=new WeakMap,o=new WeakMap,c=new WeakMap,s=new WeakMap,e=new WeakMap,a=new WeakMap,r=new WeakMap,n=new WeakSet,$i=function(v){var _;v.parent!==this&&(this.attach(v),v.pageIndex=this.pageIndex,(_=v.parent)==null||_.detach(v),v.parent=this,v.div&&v.isAttachedToDOM&&(v.div.remove(),this.div.append(v.div)))},u=new WeakSet,an=function(v){switch(be(this,r).getMode()){case de.AnnotationEditorType.FREETEXT:return new De.FreeTextEditor(v);case de.AnnotationEditorType.INK:return new ge.InkEditor(v)}return null},i=new WeakSet,Xi=function(v){const _=this.getNextId(),K=Je(this,u,an).call(this,{parent:this,id:_,x:v.offsetX,y:v.offsetY});return K&&this.add(K),K},x=new WeakSet,sn=function(){st(this,a,!0);for(const v of be(this,s).values())v.isEmpty()&&v.remove();st(this,a,!1)},Nt(f,"_initialized",!1),V.AnnotationEditorLayer=f},(Me,V,Be)=>{var f,h,t,o,c,s,e,a,on,n,cn,u,ln,i,Hi;Object.defineProperty(V,"__esModule",{value:!0}),V.FreeTextEditor=void 0;var pe=Be(1),de=Be(7),De=Be(6);const x=class extends De.AnnotationEditor{constructor(k){super({...k,name:"freeTextEditor"});Ye(this,a);Ye(this,n);Ye(this,u);Ye(this,i);Ye(this,f,this.editorDivBlur.bind(this));Ye(this,h,this.editorDivFocus.bind(this));Ye(this,t,this.editorDivKeydown.bind(this));Ye(this,o,void 0);Ye(this,c,"");Ye(this,s,!1);Ye(this,e,void 0);st(this,o,k.color||x._defaultColor||De.AnnotationEditor._defaultLineColor),st(this,e,k.fontSize||x._defaultFontSize)}static initialize(k){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(_=>[_,k.get(_)]));const v=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(v.getPropertyValue("--freetext-padding"))}static updateDefaultParams(k,v){switch(k){case pe.AnnotationEditorParamsType.FREETEXT_SIZE:x._defaultFontSize=v;break;case pe.AnnotationEditorParamsType.FREETEXT_COLOR:x._defaultColor=v;break}}updateParams(k,v){switch(k){case pe.AnnotationEditorParamsType.FREETEXT_SIZE:Je(this,a,on).call(this,v);break;case pe.AnnotationEditorParamsType.FREETEXT_COLOR:Je(this,n,cn).call(this,v);break}}static get defaultPropertiesToUpdate(){return[[pe.AnnotationEditorParamsType.FREETEXT_SIZE,x._defaultFontSize],[pe.AnnotationEditorParamsType.FREETEXT_COLOR,x._defaultColor||De.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[pe.AnnotationEditorParamsType.FREETEXT_SIZE,be(this,e)],[pe.AnnotationEditorParamsType.FREETEXT_COLOR,be(this,o)]]}getInitialTranslation(){return[-x._internalPadding*this.parent.scaleFactor,-(x._internalPadding+be(this,e))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(pe.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",be(this,t)),this.editorDiv.addEventListener("focus",be(this,h)),this.editorDiv.addEventListener("blur",be(this,f)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",be(this,t)),this.editorDiv.removeEventListener("focus",be(this,h)),this.editorDiv.removeEventListener("blur",be(this,f)),this.div.focus(),this.isEditing=!1)}focusin(k){super.focusin(k),k.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),be(this,s)||(st(this,s,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),st(this,c,Je(this,u,ln).call(this).trimEnd()),Je(this,i,Hi).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(k){this.enableEditMode(),this.editorDiv.focus()}keydown(k){k.target===this.div&&k.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(k){x._keyboardManager.exec(this,k)}editorDivFocus(k){this.isEditing=!0}editorDivBlur(k){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let k,v;this.width&&(k=this.x,v=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),x._l10nPromise.get("editor_free_text_aria_label").then(K=>{var M;return(M=this.editorDiv)==null?void 0:M.setAttribute("aria-label",K)}),x._l10nPromise.get("free_text_default_content").then(K=>{var M;return(M=this.editorDiv)==null?void 0:M.setAttribute("default-content",K)}),this.editorDiv.contentEditable=!0;const{style:_}=this.editorDiv;if(_.fontSize=`calc(${be(this,e)}px * var(--scale-factor))`,_.color=be(this,o),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,de.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[K,M]=this.parent.viewportBaseDimensions;this.setAt(k*K,v*M,this.width*K,this.height*M);for(const j of be(this,c).split(`
`)){const O=document.createElement("div");O.append(j?document.createTextNode(j):document.createElement("br")),this.editorDiv.append(O)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(k,v){const _=super.deserialize(k,v);return st(_,e,k.fontSize),st(_,o,pe.Util.makeHexColor(...k.color)),st(_,c,k.value),_}serialize(){if(this.isEmpty())return null;const k=x._internalPadding*this.parent.scaleFactor,v=this.getRect(k,k),_=De.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:pe.AnnotationEditorType.FREETEXT,color:_,fontSize:be(this,e),value:be(this,c),pageIndex:this.parent.pageIndex,rect:v,rotation:this.rotation}}};let ge=x;f=new WeakMap,h=new WeakMap,t=new WeakMap,o=new WeakMap,c=new WeakMap,s=new WeakMap,e=new WeakMap,a=new WeakSet,on=function(k){const v=K=>{this.editorDiv.style.fontSize=`calc(${K}px * var(--scale-factor))`,this.translate(0,-(K-be(this,e))*this.parent.scaleFactor),st(this,e,K),Je(this,i,Hi).call(this)},_=be(this,e);this.parent.addCommands({cmd:()=>{v(k)},undo:()=>{v(_)},mustExec:!0,type:pe.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},n=new WeakSet,cn=function(k){const v=be(this,o);this.parent.addCommands({cmd:()=>{st(this,o,k),this.editorDiv.style.color=k},undo:()=>{st(this,o,v),this.editorDiv.style.color=v},mustExec:!0,type:pe.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},u=new WeakSet,ln=function(){const k=this.editorDiv.getElementsByTagName("div");if(k.length===0)return this.editorDiv.innerText;const v=[];for(let _=0,K=k.length;_<K;_++){const j=k[_].firstChild;(j==null?void 0:j.nodeName)==="#text"?v.push(j.data):v.push("")}return v.join(`
`)},i=new WeakSet,Hi=function(){const[k,v]=this.parent.viewportBaseDimensions,_=this.div.getBoundingClientRect();this.width=_.width/k,this.height=_.height/v},Nt(ge,"_freeTextDefaultContent",""),Nt(ge,"_l10nPromise"),Nt(ge,"_internalPadding",0),Nt(ge,"_defaultColor",null),Nt(ge,"_defaultFontSize",10),Nt(ge,"_keyboardManager",new de.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],x.prototype.commitOrRemove]])),Nt(ge,"_type","freetext"),V.FreeTextEditor=ge},(Me,V,Be)=>{var t,o,c,s,e,a,r,n,l,u,d,i,g,x,m,un,k,hn,_,fn,M,dn,O,zi,R,gn,p,pn,E,mn,F,Wt,b,Wi,U,hi,G,fi,N,Kt,L,Gi,W,di,B,Vi,q,xn,te,bn,ee,yn,ne,qi,ae,gi,oe,Jt,xe,Yi;Object.defineProperty(V,"__esModule",{value:!0}),V.InkEditor=void 0,Object.defineProperty(V,"fitCurve",{enumerable:!0,get:function(){return De.fitCurve}});var pe=Be(1),de=Be(6),De=Be(25),ge=Be(7);const f=16,Se=class extends de.AnnotationEditor{constructor(ue){super({...ue,name:"inkEditor"});Ye(this,m);Ye(this,k);Ye(this,_);Ye(this,M);Ye(this,O);Ye(this,R);Ye(this,p);Ye(this,E);Ye(this,F);Ye(this,b);Ye(this,U);Ye(this,G);Ye(this,N);Ye(this,L);Ye(this,W);Ye(this,q);Ye(this,te);Ye(this,ee);Ye(this,ne);Ye(this,ae);Ye(this,oe);Ye(this,xe);Ye(this,t,0);Ye(this,o,0);Ye(this,c,0);Ye(this,s,this.canvasPointermove.bind(this));Ye(this,e,this.canvasPointerleave.bind(this));Ye(this,a,this.canvasPointerup.bind(this));Ye(this,r,this.canvasPointerdown.bind(this));Ye(this,n,!1);Ye(this,l,!1);Ye(this,u,null);Ye(this,d,null);Ye(this,i,0);Ye(this,g,0);Ye(this,x,null);this.color=ue.color||null,this.thickness=ue.thickness||null,this.opacity=ue.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(ue){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(ye=>[ye,ue.get(ye)]))}static updateDefaultParams(ue,ye){switch(ue){case pe.AnnotationEditorParamsType.INK_THICKNESS:Se._defaultThickness=ye;break;case pe.AnnotationEditorParamsType.INK_COLOR:Se._defaultColor=ye;break;case pe.AnnotationEditorParamsType.INK_OPACITY:Se._defaultOpacity=ye/100;break}}updateParams(ue,ye){switch(ue){case pe.AnnotationEditorParamsType.INK_THICKNESS:Je(this,m,un).call(this,ye);break;case pe.AnnotationEditorParamsType.INK_COLOR:Je(this,k,hn).call(this,ye);break;case pe.AnnotationEditorParamsType.INK_OPACITY:Je(this,_,fn).call(this,ye);break}}static get defaultPropertiesToUpdate(){return[[pe.AnnotationEditorParamsType.INK_THICKNESS,Se._defaultThickness],[pe.AnnotationEditorParamsType.INK_COLOR,Se._defaultColor||de.AnnotationEditor._defaultLineColor],[pe.AnnotationEditorParamsType.INK_OPACITY,Math.round(Se._defaultOpacity*100)]]}get propertiesToUpdate(){return[[pe.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Se._defaultThickness],[pe.AnnotationEditorParamsType.INK_COLOR,this.color||Se._defaultColor||de.AnnotationEditor._defaultLineColor],[pe.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Se._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(Je(this,U,hi).call(this),Je(this,G,fi).call(this)),this.isAttachedToDOM||(this.parent.add(this),Je(this,N,Kt).call(this)),Je(this,oe,Jt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,be(this,d).disconnect(),st(this,d,null),super.remove())}enableEditMode(){be(this,n)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",be(this,r)),this.canvas.addEventListener("pointerup",be(this,a)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",be(this,r)),this.canvas.removeEventListener("pointerup",be(this,a)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){be(this,n)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),st(this,n,!0),this.div.classList.add("disabled"),Je(this,oe,Jt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(ue){super.focusin(ue),this.enableEditMode()}canvasPointerdown(ue){ue.button!==0||!this.isInEditMode()||be(this,n)||(this.setInForeground(),ue.type!=="mouse"&&this.div.focus(),ue.stopPropagation(),this.canvas.addEventListener("pointerleave",be(this,e)),this.canvas.addEventListener("pointermove",be(this,s)),Je(this,R,gn).call(this,ue.offsetX,ue.offsetY))}canvasPointermove(ue){ue.stopPropagation(),Je(this,p,pn).call(this,ue.offsetX,ue.offsetY)}canvasPointerup(ue){ue.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(ue.stopPropagation(),Je(this,b,Wi).call(this,ue),this.setInBackground())}canvasPointerleave(ue){Je(this,b,Wi).call(this,ue),this.setInBackground()}render(){if(this.div)return this.div;let ue,ye;this.width&&(ue=this.x,ye=this.y),super.render(),Se._l10nPromise.get("editor_ink_aria_label").then(Re=>{var He;return(He=this.div)==null?void 0:He.setAttribute("aria-label",Re)});const[le,he,ce,Te]=Je(this,M,dn).call(this);if(this.setAt(le,he,0,0),this.setDims(ce,Te),Je(this,U,hi).call(this),this.width){const[Re,He]=this.parent.viewportBaseDimensions;this.setAt(ue*Re,ye*He,this.width*Re,this.height*He),st(this,l,!0),Je(this,N,Kt).call(this),this.setDims(this.width*Re,this.height*He),Je(this,F,Wt).call(this),Je(this,xe,Yi).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Je(this,G,fi).call(this),this.div}setDimensions(ue,ye){const le=Math.round(ue),he=Math.round(ye);if(be(this,i)===le&&be(this,g)===he)return;st(this,i,le),st(this,g,he),this.canvas.style.visibility="hidden",be(this,t)&&Math.abs(be(this,t)-ue/ye)>.01&&(ye=Math.ceil(ue/be(this,t)),this.setDims(ue,ye));const[ce,Te]=this.parent.viewportBaseDimensions;this.width=ue/ce,this.height=ye/Te,be(this,n)&&Je(this,L,Gi).call(this,ue,ye),Je(this,N,Kt).call(this),Je(this,F,Wt).call(this),this.canvas.style.visibility="visible"}static deserialize(ue,ye){var fe,We;const le=super.deserialize(ue,ye);le.thickness=ue.thickness,le.color=pe.Util.makeHexColor(...ue.color),le.opacity=ue.opacity;const[he,ce]=ye.pageDimensions,Te=le.width*he,Re=le.height*ce,He=ye.scaleFactor,Ce=ue.thickness/2;st(le,t,Te/Re),st(le,n,!0),st(le,i,Math.round(Te)),st(le,g,Math.round(Re));for(const{bezier:Ue}of ue.paths){const ze=[];le.paths.push(ze);let tt=He*(Ue[0]-Ce),Ne=He*(Re-Ue[1]-Ce);for(let ct=2,Ee=Ue.length;ct<Ee;ct+=6){const rt=He*(Ue[ct]-Ce),Ze=He*(Re-Ue[ct+1]-Ce),vt=He*(Ue[ct+2]-Ce),lt=He*(Re-Ue[ct+3]-Ce),ht=He*(Ue[ct+4]-Ce),ot=He*(Re-Ue[ct+5]-Ce);ze.push([[tt,Ne],[rt,Ze],[vt,lt],[ht,ot]]),tt=ht,Ne=ot}const Qe=Je(this,B,Vi).call(this,ze);le.bezierPath2D.push(Qe)}const ve=Je(fe=le,ne,qi).call(fe);return st(le,c,Math.max(f,ve[2]-ve[0])),st(le,o,Math.max(f,ve[3]-ve[1])),Je(We=le,L,Gi).call(We,Te,Re),le}serialize(){if(this.isEmpty())return null;const ue=this.getRect(0,0),ye=this.rotation%180===0?ue[3]-ue[1]:ue[2]-ue[0],le=de.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:pe.AnnotationEditorType.INK,color:le,thickness:this.thickness,opacity:this.opacity,paths:Je(this,q,xn).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,ye),pageIndex:this.parent.pageIndex,rect:ue,rotation:this.rotation}}};let h=Se;t=new WeakMap,o=new WeakMap,c=new WeakMap,s=new WeakMap,e=new WeakMap,a=new WeakMap,r=new WeakMap,n=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,i=new WeakMap,g=new WeakMap,x=new WeakMap,m=new WeakSet,un=function(ue){const ye=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=ue,Je(this,oe,Jt).call(this)},undo:()=>{this.thickness=ye,Je(this,oe,Jt).call(this)},mustExec:!0,type:pe.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},k=new WeakSet,hn=function(ue){const ye=this.color;this.parent.addCommands({cmd:()=>{this.color=ue,Je(this,F,Wt).call(this)},undo:()=>{this.color=ye,Je(this,F,Wt).call(this)},mustExec:!0,type:pe.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},_=new WeakSet,fn=function(ue){ue/=100;const ye=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=ue,Je(this,F,Wt).call(this)},undo:()=>{this.opacity=ye,Je(this,F,Wt).call(this)},mustExec:!0,type:pe.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},M=new WeakSet,dn=function(){const{width:ue,height:ye,rotation:le}=this.parent.viewport;switch(le){case 90:return[0,ue,ue,ye];case 180:return[ue,ye,ue,ye];case 270:return[ye,0,ue,ye];default:return[0,0,ue,ye]}},O=new WeakSet,zi=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,ge.opacityToHex)(this.opacity)}`},R=new WeakSet,gn=function(ue,ye){this.isEditing=!0,be(this,l)||(st(this,l,!0),Je(this,N,Kt).call(this),this.thickness||(this.thickness=Se._defaultThickness),this.color||(this.color=Se._defaultColor||de.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Se._defaultOpacity)),this.currentPath.push([ue,ye]),st(this,u,null),Je(this,O,zi).call(this),this.ctx.beginPath(),this.ctx.moveTo(ue,ye),st(this,x,()=>{be(this,x)&&(be(this,u)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):Je(this,F,Wt).call(this),this.ctx.lineTo(...be(this,u)),st(this,u,null),this.ctx.stroke()),window.requestAnimationFrame(be(this,x)))}),window.requestAnimationFrame(be(this,x))},p=new WeakSet,pn=function(ue,ye){const[le,he]=this.currentPath.at(-1);ue===le&&ye===he||(this.currentPath.push([ue,ye]),st(this,u,[ue,ye]))},E=new WeakSet,mn=function(ue,ye){var Ce;this.ctx.closePath(),st(this,x,null),ue=Math.min(Math.max(ue,0),this.canvas.width),ye=Math.min(Math.max(ye,0),this.canvas.height);const[le,he]=this.currentPath.at(-1);(ue!==le||ye!==he)&&this.currentPath.push([ue,ye]);let ce;if(this.currentPath.length!==1)ce=(0,De.fitCurve)(this.currentPath,30,null);else{const ve=[ue,ye];ce=[[ve,ve.slice(),ve.slice(),ve]]}const Te=Je(Ce=Se,B,Vi).call(Ce,ce);this.currentPath.length=0;const Re=()=>{this.paths.push(ce),this.bezierPath2D.push(Te),this.rebuild()},He=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Je(this,U,hi).call(this),Je(this,G,fi).call(this)),Je(this,oe,Jt).call(this))};this.parent.addCommands({cmd:Re,undo:He,mustExec:!0})},F=new WeakSet,Wt=function(){if(this.isEmpty()){Je(this,W,di).call(this);return}Je(this,O,zi).call(this);const{canvas:ue,ctx:ye}=this;ye.setTransform(1,0,0,1,0,0),ye.clearRect(0,0,ue.width,ue.height),Je(this,W,di).call(this);for(const le of this.bezierPath2D)ye.stroke(le)},b=new WeakSet,Wi=function(ue){Je(this,E,mn).call(this,ue.offsetX,ue.offsetY),this.canvas.removeEventListener("pointerleave",be(this,e)),this.canvas.removeEventListener("pointermove",be(this,s)),this.parent.addToAnnotationStorage(this)},U=new WeakSet,hi=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Se._l10nPromise.get("editor_ink_canvas_aria_label").then(ue=>{var ye;return(ye=this.canvas)==null?void 0:ye.setAttribute("aria-label",ue)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},G=new WeakSet,fi=function(){st(this,d,new ResizeObserver(ue=>{const ye=ue[0].contentRect;ye.width&&ye.height&&this.setDimensions(ye.width,ye.height)})),be(this,d).observe(this.div)},N=new WeakSet,Kt=function(){if(!be(this,l))return;const[ue,ye]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*ue),this.canvas.height=Math.ceil(this.height*ye),Je(this,W,di).call(this)},L=new WeakSet,Gi=function(ue,ye){const le=Je(this,ae,gi).call(this),he=(ue-le)/be(this,c),ce=(ye-le)/be(this,o);this.scaleFactor=Math.min(he,ce)},W=new WeakSet,di=function(){const ue=Je(this,ae,gi).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ue,this.translationY*this.scaleFactor+ue)},B=new WeakSet,Vi=function(ue){const ye=new Path2D;for(let le=0,he=ue.length;le<he;le++){const[ce,Te,Re,He]=ue[le];le===0&&ye.moveTo(...ce),ye.bezierCurveTo(Te[0],Te[1],Re[0],Re[1],He[0],He[1])}return ye},q=new WeakSet,xn=function(ue,ye,le,he){const Te=[],Re=this.thickness/2;let He,Ce;for(const ve of this.paths){He=[],Ce=[];for(let fe=0,We=ve.length;fe<We;fe++){const[Ue,ze,tt,Ne]=ve[fe],Qe=ue*(Ue[0]+ye)+Re,ct=he-ue*(Ue[1]+le)-Re,Ee=ue*(ze[0]+ye)+Re,rt=he-ue*(ze[1]+le)-Re,Ze=ue*(tt[0]+ye)+Re,vt=he-ue*(tt[1]+le)-Re,lt=ue*(Ne[0]+ye)+Re,ht=he-ue*(Ne[1]+le)-Re;fe===0&&(He.push(Qe,ct),Ce.push(Qe,ct)),He.push(Ee,rt,Ze,vt,lt,ht),Je(this,te,bn).call(this,Qe,ct,Ee,rt,Ze,vt,lt,ht,4,Ce)}Te.push({bezier:He,points:Ce})}return Te},te=new WeakSet,bn=function(ue,ye,le,he,ce,Te,Re,He,Ce,ve){if(Je(this,ee,yn).call(this,ue,ye,le,he,ce,Te,Re,He)){ve.push(Re,He);return}for(let fe=1;fe<Ce-1;fe++){const We=fe/Ce,Ue=1-We;let ze=We*ue+Ue*le,tt=We*ye+Ue*he,Ne=We*le+Ue*ce,Qe=We*he+Ue*Te;const ct=We*ce+Ue*Re,Ee=We*Te+Ue*He;ze=We*ze+Ue*Ne,tt=We*tt+Ue*Qe,Ne=We*Ne+Ue*ct,Qe=We*Qe+Ue*Ee,ze=We*ze+Ue*Ne,tt=We*tt+Ue*Qe,ve.push(ze,tt)}ve.push(Re,He)},ee=new WeakSet,yn=function(ue,ye,le,he,ce,Te,Re,He){const ve=(3*le-2*ue-Re)**2,fe=(3*he-2*ye-He)**2,We=(3*ce-ue-2*Re)**2,Ue=(3*Te-ye-2*He)**2;return Math.max(ve,We)+Math.max(fe,Ue)<=10},ne=new WeakSet,qi=function(){let ue=1/0,ye=-1/0,le=1/0,he=-1/0;for(const ce of this.paths)for(const[Te,Re,He,Ce]of ce){const ve=pe.Util.bezierBoundingBox(...Te,...Re,...He,...Ce);ue=Math.min(ue,ve[0]),le=Math.min(le,ve[1]),ye=Math.max(ye,ve[2]),he=Math.max(he,ve[3])}return[ue,le,ye,he]},ae=new WeakSet,gi=function(){return be(this,n)?Math.ceil(this.thickness*this.parent.scaleFactor):0},oe=new WeakSet,Jt=function(ue=!1){if(this.isEmpty())return;if(!be(this,n)){Je(this,F,Wt).call(this);return}const ye=Je(this,ne,qi).call(this),le=Je(this,ae,gi).call(this);st(this,c,Math.max(f,ye[2]-ye[0])),st(this,o,Math.max(f,ye[3]-ye[1]));const he=Math.ceil(le+be(this,c)*this.scaleFactor),ce=Math.ceil(le+be(this,o)*this.scaleFactor),[Te,Re]=this.parent.viewportBaseDimensions;this.width=he/Te,this.height=ce/Re,st(this,t,he/ce),Je(this,xe,Yi).call(this);const He=this.translationX,Ce=this.translationY;this.translationX=-ye[0],this.translationY=-ye[1],Je(this,N,Kt).call(this),Je(this,F,Wt).call(this),st(this,i,he),st(this,g,ce),this.setDims(he,ce);const ve=ue?le/this.scaleFactor/2:0;this.translate(He-this.translationX-ve,Ce-this.translationY-ve)},xe=new WeakSet,Yi=function(){const{style:ue}=this.div;be(this,t)>=1?(ue.minHeight=`${f}px`,ue.minWidth=`${Math.round(be(this,t)*f)}px`):(ue.minWidth=`${f}px`,ue.minHeight=`${Math.round(f/be(this,t))}px`)},Ye(h,B),Nt(h,"_defaultColor",null),Nt(h,"_defaultOpacity",1),Nt(h,"_defaultThickness",1),Nt(h,"_l10nPromise"),Nt(h,"_type","ink"),V.InkEditor=h},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.fitCurve=void 0;const pe=Be(26);V.fitCurve=pe},Me=>{function V(a,r,n){if(!Array.isArray(a))throw new TypeError("First argument should be an array");if(a.forEach(i=>{if(!Array.isArray(i)||i.some(g=>typeof g!="number")||i.length!==a[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),a=a.filter((i,g)=>g===0||!i.every((x,m)=>x===a[g-1][m])),a.length<2)return[];const l=a.length,u=c(a[1],a[0]),d=c(a[l-2],a[l-1]);return Be(a,u,d,r,n)}function Be(a,r,n,l,u){var i,g,x,m,A,k,v,_,K,M,j,O,T;if(a.length===2)return O=s.vectorLen(s.subtract(a[0],a[1]))/3,i=[a[0],s.addArrays(a[0],s.mulItems(r,O)),s.addArrays(a[1],s.mulItems(n,O)),a[1]],[i];if(g=f(a),[i,m,k]=pe(a,g,g,r,n,u),m===0||m<l)return[i];if(m<l*l)for(x=g,A=m,v=k,T=0;T<20;T++){if(x=De(i,a,x),[i,m,k]=pe(a,g,x,r,n,u),m<l)return[i];if(k===v){let R=m/A;if(R>.9999&&R<1.0001)break}A=m,v=k}return j=[],_=s.subtract(a[k-1],a[k+1]),_.every(R=>R===0)&&(_=s.subtract(a[k-1],a[k]),[_[0],_[1]]=[-_[1],_[0]]),K=s.normalize(_),M=s.mulItems(K,-1),j=j.concat(Be(a.slice(0,k+1),r,K,l,u)),j=j.concat(Be(a.slice(k),M,n,l,u)),j}function pe(a,r,n,l,u,d){var i,g,x;return i=de(a,n,l,u),[g,x]=h(a,i,r),d&&d({bez:i,points:a,params:r,maxErr:g,maxPoint:x}),[i,g,x]}function de(a,r,n,l){var u,d,i,g,x,m,A,k,v,_,K,M,j,O,T,R,y,p=a[0],P=a[a.length-1];for(u=[p,null,null,P],d=s.zeros_Xx2x2(r.length),j=0,O=r.length;j<O;j++)R=r[j],y=1-R,i=d[j],i[0]=s.mulItems(n,3*R*(y*y)),i[1]=s.mulItems(l,3*y*(R*R));for(g=[[0,0],[0,0]],x=[0,0],j=0,O=a.length;j<O;j++)R=r[j],i=d[j],g[0][0]+=s.dot(i[0],i[0]),g[0][1]+=s.dot(i[0],i[1]),g[1][0]+=s.dot(i[0],i[1]),g[1][1]+=s.dot(i[1],i[1]),T=s.subtract(a[j],e.q([p,p,P,P],R)),x[0]+=s.dot(i[0],T),x[1]+=s.dot(i[1],T);return m=g[0][0]*g[1][1]-g[1][0]*g[0][1],A=g[0][0]*x[1]-g[1][0]*x[0],k=x[0]*g[1][1]-x[1]*g[0][1],v=m===0?0:k/m,_=m===0?0:A/m,M=s.vectorLen(s.subtract(p,P)),K=1e-6*M,v<K||_<K?(u[1]=s.addArrays(p,s.mulItems(n,M/3)),u[2]=s.addArrays(P,s.mulItems(l,M/3))):(u[1]=s.addArrays(p,s.mulItems(n,v)),u[2]=s.addArrays(P,s.mulItems(l,_))),u}function De(a,r,n){return n.map((l,u)=>ge(a,r[u],l))}function ge(a,r,n){var l=s.subtract(e.q(a,n),r),u=e.qprime(a,n),d=s.mulMatrix(l,u),i=s.sum(s.squareItems(u))+2*s.mulMatrix(l,e.qprimeprime(a,n));return i===0?n:n-d/i}function f(a){var r=[],n,l,u;return a.forEach((d,i)=>{n=i?l+s.vectorLen(s.subtract(d,u)):0,r.push(n),l=n,u=d}),r=r.map(d=>d/l),r}function h(a,r,n){var l,u,d,i,g,x,m,A;u=0,d=Math.floor(a.length/2);const k=t(r,10);for(g=0,x=a.length;g<x;g++)m=a[g],A=o(r,n[g],k,10),i=s.subtract(e.q(r,A),m),l=i[0]*i[0]+i[1]*i[1],l>u&&(u=l,d=g);return[u,d]}var t=function(a,r){for(var n,l=[0],u=a[0],d=0,i=1;i<=r;i++)n=e.q(a,i/r),d+=s.vectorLen(s.subtract(n,u)),l.push(d),u=n;return l=l.map(g=>g/d),l};function o(a,r,n,l){if(r<0)return 0;if(r>1)return 1;for(var u,d,i,g,x,m=1;m<=l;m++)if(r<=n[m]){g=(m-1)/l,i=m/l,d=n[m-1],u=n[m],x=(r-d)/(u-d)*(i-g)+g;break}return x}function c(a,r){return s.normalize(s.subtract(a,r))}class s{static zeros_Xx2x2(r){for(var n=[];r--;)n.push([0,0]);return n}static mulItems(r,n){return r.map(l=>l*n)}static mulMatrix(r,n){return r.reduce((l,u,d)=>l+u*n[d],0)}static subtract(r,n){return r.map((l,u)=>l-n[u])}static addArrays(r,n){return r.map((l,u)=>l+n[u])}static addItems(r,n){return r.map(l=>l+n)}static sum(r){return r.reduce((n,l)=>n+l)}static dot(r,n){return s.mulMatrix(r,n)}static vectorLen(r){return Math.hypot(...r)}static divItems(r,n){return r.map(l=>l/n)}static squareItems(r){return r.map(n=>n*n)}static normalize(r){return this.divItems(r,this.vectorLen(r))}}class e{static q(r,n){var l=1-n,u=s.mulItems(r[0],l*l*l),d=s.mulItems(r[1],3*l*l*n),i=s.mulItems(r[2],3*l*n*n),g=s.mulItems(r[3],n*n*n);return s.addArrays(s.addArrays(u,d),s.addArrays(i,g))}static qprime(r,n){var l=1-n,u=s.mulItems(s.subtract(r[1],r[0]),3*l*l),d=s.mulItems(s.subtract(r[2],r[1]),6*l*n),i=s.mulItems(s.subtract(r[3],r[2]),3*n*n);return s.addArrays(s.addArrays(u,d),i)}static qprimeprime(r,n){return s.addArrays(s.mulItems(s.addArrays(s.subtract(r[2],s.mulItems(r[1],2)),r[0]),6*(1-n)),s.mulItems(s.addArrays(s.subtract(r[3],s.mulItems(r[2],2)),r[1]),6*n))}}Me.exports=V,Me.exports.fitCubic=Be,Me.exports.createTangent=c},(Me,V,Be)=>{var F,Ki,b,Ji,U,Zi;Object.defineProperty(V,"__esModule",{value:!0}),V.AnnotationLayer=void 0;var pe=Be(1),de=Be(8),De=Be(5),ge=Be(28),f=Be(29);const h=1e3,t=9,o=new WeakSet;function c(Y){return{width:Y[2]-Y[0],height:Y[3]-Y[1]}}class s{static create(N){switch(N.data.annotationType){case pe.AnnotationType.LINK:return new a(N);case pe.AnnotationType.TEXT:return new r(N);case pe.AnnotationType.WIDGET:switch(N.data.fieldType){case"Tx":return new l(N);case"Btn":return N.data.radioButton?new d(N):N.data.checkBox?new u(N):new i(N);case"Ch":return new g(N)}return new n(N);case pe.AnnotationType.POPUP:return new x(N);case pe.AnnotationType.FREETEXT:return new A(N);case pe.AnnotationType.LINE:return new k(N);case pe.AnnotationType.SQUARE:return new v(N);case pe.AnnotationType.CIRCLE:return new _(N);case pe.AnnotationType.POLYLINE:return new K(N);case pe.AnnotationType.CARET:return new j(N);case pe.AnnotationType.INK:return new O(N);case pe.AnnotationType.POLYGON:return new M(N);case pe.AnnotationType.HIGHLIGHT:return new T(N);case pe.AnnotationType.UNDERLINE:return new R(N);case pe.AnnotationType.SQUIGGLY:return new y(N);case pe.AnnotationType.STRIKEOUT:return new p(N);case pe.AnnotationType.STAMP:return new P(N);case pe.AnnotationType.FILEATTACHMENT:return new E(N);default:return new e(N)}}}class e{constructor(N,{isRenderable:I=!1,ignoreBorder:L=!1,createQuadrilaterals:$=!1}={}){this.isRenderable=I,this.data=N.data,this.layer=N.layer,this.page=N.page,this.viewport=N.viewport,this.linkService=N.linkService,this.downloadManager=N.downloadManager,this.imageResourcesPath=N.imageResourcesPath,this.renderForms=N.renderForms,this.svgFactory=N.svgFactory,this.annotationStorage=N.annotationStorage,this.enableScripting=N.enableScripting,this.hasJSActions=N.hasJSActions,this._fieldObjects=N.fieldObjects,this._mouseState=N.mouseState,I&&(this.container=this._createContainer(L)),$&&(this.quadrilaterals=this._createQuadrilaterals(L))}_createContainer(N=!1){const I=this.data,L=this.page,$=this.viewport,W=document.createElement("section"),{width:z,height:B}=c(I.rect),[H,q,Z,te]=$.viewBox,Q=Z-H,ee=te-q;W.setAttribute("data-annotation-id",I.id);const J=pe.Util.normalizeRect([I.rect[0],L.view[3]-I.rect[1]+L.view[1],I.rect[2],L.view[3]-I.rect[3]+L.view[1]]);if(!N&&I.borderStyle.width>0){W.style.borderWidth=`${I.borderStyle.width}px`;const re=I.borderStyle.horizontalCornerRadius,ae=I.borderStyle.verticalCornerRadius;if(re>0||ae>0){const oe=`calc(${re}px * var(--scale-factor)) / calc(${ae}px * var(--scale-factor))`;W.style.borderRadius=oe}else if(this instanceof d){const oe=`calc(${z}px * var(--scale-factor)) / calc(${B}px * var(--scale-factor))`;W.style.borderRadius=oe}switch(I.borderStyle.style){case pe.AnnotationBorderStyleType.SOLID:W.style.borderStyle="solid";break;case pe.AnnotationBorderStyleType.DASHED:W.style.borderStyle="dashed";break;case pe.AnnotationBorderStyleType.BEVELED:(0,pe.warn)("Unimplemented border style: beveled");break;case pe.AnnotationBorderStyleType.INSET:(0,pe.warn)("Unimplemented border style: inset");break;case pe.AnnotationBorderStyleType.UNDERLINE:W.style.borderBottomStyle="solid";break}const se=I.borderColor||null;se?W.style.borderColor=pe.Util.makeHexColor(se[0]|0,se[1]|0,se[2]|0):W.style.borderWidth=0}W.style.left=`${100*(J[0]-H)/Q}%`,W.style.top=`${100*(J[1]-q)/ee}%`;const{rotation:ne}=I;return I.hasOwnCanvas||ne===0?(W.style.width=`${100*z/Q}%`,W.style.height=`${100*B/ee}%`):this.setRotation(ne,W),W}setRotation(N,I=this.container){const[L,$,W,z]=this.viewport.viewBox,B=W-L,H=z-$,{width:q,height:Z}=c(this.data.rect);let te,Q;N%180===0?(te=100*q/B,Q=100*Z/H):(te=100*Z/B,Q=100*q/H),I.style.width=`${te}%`,I.style.height=`${Q}%`,I.setAttribute("data-main-rotation",(360-N)%360)}get _commonActions(){const N=(I,L,$)=>{const W=$.detail[I];$.target.style[L]=ge.ColorConverters[`${W[0]}_HTML`](W.slice(1))};return(0,pe.shadow)(this,"_commonActions",{display:I=>{const L=I.detail.display%2===1;this.container.style.visibility=L?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:L,print:I.detail.display===0||I.detail.display===3})},print:I=>{this.annotationStorage.setValue(this.data.id,{print:I.detail.print})},hidden:I=>{this.container.style.visibility=I.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:I.detail.hidden})},focus:I=>{setTimeout(()=>I.target.focus({preventScroll:!1}),0)},userName:I=>{I.target.title=I.detail.userName},readonly:I=>{I.detail.readonly?I.target.setAttribute("readonly",""):I.target.removeAttribute("readonly")},required:I=>{this._setRequired(I.target,I.detail.required)},bgColor:I=>{N("bgColor","backgroundColor",I)},fillColor:I=>{N("fillColor","backgroundColor",I)},fgColor:I=>{N("fgColor","color",I)},textColor:I=>{N("textColor","color",I)},borderColor:I=>{N("borderColor","borderColor",I)},strokeColor:I=>{N("strokeColor","borderColor",I)},rotation:I=>{const L=I.detail.rotation;this.setRotation(L),this.annotationStorage.setValue(this.data.id,{rotation:L})}})}_dispatchEventFromSandbox(N,I){const L=this._commonActions;for(const $ of Object.keys(I.detail)){const W=N[$]||L[$];W&&W(I)}}_setDefaultPropertiesFromJS(N){if(!this.enableScripting)return;const I=this.annotationStorage.getRawValue(this.data.id);if(!I)return;const L=this._commonActions;for(const[$,W]of Object.entries(I)){const z=L[$];if(z){const B={detail:{[$]:W},target:N};z(B),delete I[$]}}}_createQuadrilaterals(N=!1){if(!this.data.quadPoints)return null;const I=[],L=this.data.rect;for(const $ of this.data.quadPoints)this.data.rect=[$[2].x,$[2].y,$[1].x,$[1].y],I.push(this._createContainer(N));return this.data.rect=L,I}_createPopup(N,I){let L=this.container;this.quadrilaterals&&(N=N||this.quadrilaterals,L=this.quadrilaterals[0]),N||(N=document.createElement("div"),N.className="popupTriggerArea",L.append(N));const W=new m({container:L,trigger:N,color:I.color,titleObj:I.titleObj,modificationDate:I.modificationDate,contentsObj:I.contentsObj,richText:I.richText,hideWrapper:!0}).render();W.style.left="100%",L.append(W)}_renderQuadrilaterals(N){for(const I of this.quadrilaterals)I.className=N;return this.quadrilaterals}render(){(0,pe.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(N,I=null){const L=[];if(this._fieldObjects){const $=this._fieldObjects[N];if($)for(const{page:W,id:z,exportValues:B}of $){if(W===-1||z===I)continue;const H=typeof B=="string"?B:null,q=document.querySelector(`[data-element-id="${z}"]`);if(q&&!o.has(q)){(0,pe.warn)(`_getElementsByName - element not allowed: ${z}`);continue}L.push({id:z,exportValue:H,domElement:q})}return L}for(const $ of document.getElementsByName(N)){const{id:W,exportValue:z}=$;W!==I&&o.has($)&&L.push({id:W,exportValue:z,domElement:$})}return L}static get platform(){const N=typeof navigator<"u"?navigator.platform:"";return(0,pe.shadow)(this,"platform",{isWin:N.includes("Win"),isMac:N.includes("Mac")})}}class a extends e{constructor(N,I=null){super(N,{isRenderable:!0,ignoreBorder:!!(I!=null&&I.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=N.data.isTooltipOnly}render(){const{data:N,linkService:I}=this,L=document.createElement("a");L.setAttribute("data-element-id",N.id);let $=!1;return N.url?(I.addLinkAttributes(L,N.url,N.newWindow),$=!0):N.action?(this._bindNamedAction(L,N.action),$=!0):N.dest?(this._bindLink(L,N.dest),$=!0):(N.actions&&(N.actions.Action||N.actions["Mouse Up"]||N.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(L,N),$=!0),N.resetForm?(this._bindResetFormAction(L,N.resetForm),$=!0):this.isTooltipOnly&&!$&&(this._bindLink(L,""),$=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((W,z)=>{const B=z===0?L:L.cloneNode();return W.append(B),W}):(this.container.className="linkAnnotation",$&&this.container.append(L),this.container)}_bindLink(N,I){N.href=this.linkService.getDestinationHash(I),N.onclick=()=>(I&&this.linkService.goToDestination(I),!1),(I||I==="")&&(N.className="internalLink")}_bindNamedAction(N,I){N.href=this.linkService.getAnchorUrl(""),N.onclick=()=>(this.linkService.executeNamedAction(I),!1),N.className="internalLink"}_bindJSAction(N,I){N.href=this.linkService.getAnchorUrl("");const L=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const $ of Object.keys(I.actions)){const W=L.get($);W&&(N[W]=()=>{var z;return(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:I.id,name:$}}),!1})}N.onclick||(N.onclick=()=>!1),N.className="internalLink"}_bindResetFormAction(N,I){const L=N.onclick;if(L||(N.href=this.linkService.getAnchorUrl("")),N.className="internalLink",!this._fieldObjects){(0,pe.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),L||(N.onclick=()=>!1);return}N.onclick=()=>{var Z;L&&L();const{fields:$,refs:W,include:z}=I,B=[];if($.length!==0||W.length!==0){const te=new Set(W);for(const Q of $){const ee=this._fieldObjects[Q]||[];for(const{id:J}of ee)te.add(J)}for(const Q of Object.values(this._fieldObjects))for(const ee of Q)te.has(ee.id)===z&&B.push(ee)}else for(const te of Object.values(this._fieldObjects))B.push(...te);const H=this.annotationStorage,q=[];for(const te of B){const{id:Q}=te;switch(q.push(Q),te.type){case"text":{const J=te.defaultValue||"";H.setValue(Q,{value:J});break}case"checkbox":case"radiobutton":{const J=te.defaultValue===te.exportValues;H.setValue(Q,{value:J});break}case"combobox":case"listbox":{const J=te.defaultValue||"";H.setValue(Q,{value:J});break}default:continue}const ee=document.querySelector(`[data-element-id="${Q}"]`);if(ee){if(!o.has(ee)){(0,pe.warn)(`_bindResetFormAction - element not allowed: ${Q}`);continue}}else continue;ee.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Z=this.linkService.eventBus)==null||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:q,name:"ResetForm"}})),!1}}}class r extends e{constructor(N){var L,$,W;const I=!!(N.data.hasPopup||(L=N.data.titleObj)!=null&&L.str||($=N.data.contentsObj)!=null&&$.str||(W=N.data.richText)!=null&&W.str);super(N,{isRenderable:I})}render(){this.container.className="textAnnotation";const N=document.createElement("img");return N.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",N.alt="[{{type}} Annotation]",N.dataset.l10nId="text_annotation_type",N.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(N,this.data),this.container.append(N),this.container}}class n extends e{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(N){const{isWin:I,isMac:L}=e.platform;return I&&N.ctrlKey||L&&N.metaKey}_setEventListener(N,I,L,$){I.includes("mouse")?N.addEventListener(I,W=>{var z;(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:L,value:$(W),shift:W.shiftKey,modifier:this._getKeyModifier(W)}})}):N.addEventListener(I,W=>{var z;(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:L,value:$(W)}})})}_setEventListeners(N,I,L){var $;for(const[W,z]of I)(z==="Action"||($=this.data.actions)!=null&&$[z])&&this._setEventListener(N,W,z,L)}_setBackgroundColor(N){const I=this.data.backgroundColor||null;N.style.backgroundColor=I===null?"transparent":pe.Util.makeHexColor(I[0],I[1],I[2])}_setTextStyle(N){const I=["left","center","right"],{fontColor:L}=this.data.defaultAppearanceData,$=this.data.defaultAppearanceData.fontSize||t,W=N.style;let z;if(this.data.multiLine){const B=Math.abs(this.data.rect[3]-this.data.rect[1]),H=Math.round(B/(pe.LINE_FACTOR*$))||1,q=B/H;z=Math.min($,Math.round(q/pe.LINE_FACTOR))}else{const B=Math.abs(this.data.rect[3]-this.data.rect[1]);z=Math.min($,Math.round(B/pe.LINE_FACTOR))}W.fontSize=`calc(${z}px * var(--scale-factor))`,W.color=pe.Util.makeHexColor(L[0],L[1],L[2]),this.data.textAlignment!==null&&(W.textAlign=I[this.data.textAlignment])}_setRequired(N,I){I?N.setAttribute("required",!0):N.removeAttribute("required"),N.setAttribute("aria-required",I)}}class l extends n{constructor(N){const I=N.renderForms||!N.data.hasAppearance&&!!N.data.fieldValue;super(N,{isRenderable:I})}setPropertyOnSiblings(N,I,L,$){const W=this.annotationStorage;for(const z of this._getElementsByName(N.name,N.id))z.domElement&&(z.domElement[I]=L),W.setValue(z.id,{[$]:L})}render(){var $;const N=this.annotationStorage,I=this.data.id;this.container.className="textWidgetAnnotation";let L=null;if(this.renderForms){const W=N.getValue(I,{value:this.data.fieldValue});let z=W.formattedValue||W.value||"";const B=N.getValue(I,{charLimit:this.data.maxLen}).charLimit;B&&z.length>B&&(z=z.slice(0,B));const H={userValue:z,formattedValue:null,valueOnFocus:""};this.data.multiLine?(L=document.createElement("textarea"),L.textContent=z,this.data.doNotScroll&&(L.style.overflowY="hidden")):(L=document.createElement("input"),L.type="text",L.setAttribute("value",z),this.data.doNotScroll&&(L.style.overflowX="hidden")),o.add(L),L.setAttribute("data-element-id",I),L.disabled=this.data.readOnly,L.name=this.data.fieldName,L.tabIndex=h,this._setRequired(L,this.data.required),B&&(L.maxLength=B),L.addEventListener("input",Z=>{N.setValue(I,{value:Z.target.value}),this.setPropertyOnSiblings(L,"value",Z.target.value,"value")}),L.addEventListener("resetform",Z=>{const te=this.data.defaultFieldValue??"";L.value=H.userValue=te,H.formattedValue=null});let q=Z=>{const{formattedValue:te}=H;te!=null&&(Z.target.value=te),Z.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){L.addEventListener("focus",te=>{H.userValue&&(te.target.value=H.userValue),H.valueOnFocus=te.target.value}),L.addEventListener("updatefromsandbox",te=>{const Q={value(ee){H.userValue=ee.detail.value??"",N.setValue(I,{value:H.userValue.toString()}),ee.target.value=H.userValue},formattedValue(ee){const{formattedValue:J}=ee.detail;H.formattedValue=J,J!=null&&ee.target!==document.activeElement&&(ee.target.value=J),N.setValue(I,{formattedValue:J})},selRange(ee){ee.target.setSelectionRange(...ee.detail.selRange)},charLimit:ee=>{var ae;const{charLimit:J}=ee.detail,{target:ne}=ee;if(J===0){ne.removeAttribute("maxLength");return}ne.setAttribute("maxLength",J);let re=H.userValue;!re||re.length<=J||(re=re.slice(0,J),ne.value=H.userValue=re,N.setValue(I,{value:re}),(ae=this.linkService.eventBus)==null||ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:I,name:"Keystroke",value:re,willCommit:!0,commitKey:1,selStart:ne.selectionStart,selEnd:ne.selectionEnd}}))}};this._dispatchEventFromSandbox(Q,te)}),L.addEventListener("keydown",te=>{var J;let Q=-1;if(te.key==="Escape"?Q=0:te.key==="Enter"?Q=2:te.key==="Tab"&&(Q=3),Q===-1)return;const{value:ee}=te.target;H.valueOnFocus!==ee&&(H.userValue=ee,(J=this.linkService.eventBus)==null||J.dispatch("dispatcheventinsandbox",{source:this,detail:{id:I,name:"Keystroke",value:ee,willCommit:!0,commitKey:Q,selStart:te.target.selectionStart,selEnd:te.target.selectionEnd}}))});const Z=q;q=null,L.addEventListener("blur",te=>{var ee;const{value:Q}=te.target;H.userValue=Q,this._mouseState.isDown&&H.valueOnFocus!==Q&&((ee=this.linkService.eventBus)==null||ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:I,name:"Keystroke",value:Q,willCommit:!0,commitKey:1,selStart:te.target.selectionStart,selEnd:te.target.selectionEnd}})),Z(te)}),($=this.data.actions)!=null&&$.Keystroke&&L.addEventListener("beforeinput",te=>{var oe;const{data:Q,target:ee}=te,{value:J,selectionStart:ne,selectionEnd:re}=ee;let ae=ne,se=re;switch(te.inputType){case"deleteWordBackward":{const me=J.substring(0,ne).match(/\w*[^\w]*$/);me&&(ae-=me[0].length);break}case"deleteWordForward":{const me=J.substring(ne).match(/^[^\w]*\w*/);me&&(se+=me[0].length);break}case"deleteContentBackward":ne===re&&(ae-=1);break;case"deleteContentForward":ne===re&&(se+=1);break}te.preventDefault(),(oe=this.linkService.eventBus)==null||oe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:I,name:"Keystroke",value:J,change:Q||"",willCommit:!1,selStart:ae,selEnd:se}})}),this._setEventListeners(L,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],te=>te.target.value)}if(q&&L.addEventListener("blur",q),this.data.comb){const te=(this.data.rect[2]-this.data.rect[0])/B;L.classList.add("comb"),L.style.letterSpacing=`calc(${te}px * var(--scale-factor) - 1ch)`}}else L=document.createElement("div"),L.textContent=this.data.fieldValue,L.style.verticalAlign="middle",L.style.display="table-cell";return this._setTextStyle(L),this._setBackgroundColor(L),this._setDefaultPropertiesFromJS(L),this.container.append(L),this.container}}class u extends n{constructor(N){super(N,{isRenderable:N.renderForms})}render(){const N=this.annotationStorage,I=this.data,L=I.id;let $=N.getValue(L,{value:I.exportValue===I.fieldValue}).value;typeof $=="string"&&($=$!=="Off",N.setValue(L,{value:$})),this.container.className="buttonWidgetAnnotation checkBox";const W=document.createElement("input");return o.add(W),W.setAttribute("data-element-id",L),W.disabled=I.readOnly,this._setRequired(W,this.data.required),W.type="checkbox",W.name=I.fieldName,$&&W.setAttribute("checked",!0),W.setAttribute("exportValue",I.exportValue),W.tabIndex=h,W.addEventListener("change",z=>{const{name:B,checked:H}=z.target;for(const q of this._getElementsByName(B,L)){const Z=H&&q.exportValue===I.exportValue;q.domElement&&(q.domElement.checked=Z),N.setValue(q.id,{value:Z})}N.setValue(L,{value:H})}),W.addEventListener("resetform",z=>{const B=I.defaultFieldValue||"Off";z.target.checked=B===I.exportValue}),this.enableScripting&&this.hasJSActions&&(W.addEventListener("updatefromsandbox",z=>{const B={value(H){H.target.checked=H.detail.value!=="Off",N.setValue(L,{value:H.target.checked})}};this._dispatchEventFromSandbox(B,z)}),this._setEventListeners(W,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],z=>z.target.checked)),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class d extends n{constructor(N){super(N,{isRenderable:N.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const N=this.annotationStorage,I=this.data,L=I.id;let $=N.getValue(L,{value:I.fieldValue===I.buttonValue}).value;typeof $=="string"&&($=$!==I.buttonValue,N.setValue(L,{value:$}));const W=document.createElement("input");if(o.add(W),W.setAttribute("data-element-id",L),W.disabled=I.readOnly,this._setRequired(W,this.data.required),W.type="radio",W.name=I.fieldName,$&&W.setAttribute("checked",!0),W.tabIndex=h,W.addEventListener("change",z=>{const{name:B,checked:H}=z.target;for(const q of this._getElementsByName(B,L))N.setValue(q.id,{value:!1});N.setValue(L,{value:H})}),W.addEventListener("resetform",z=>{const B=I.defaultFieldValue;z.target.checked=B!=null&&B===I.buttonValue}),this.enableScripting&&this.hasJSActions){const z=I.buttonValue;W.addEventListener("updatefromsandbox",B=>{const H={value:q=>{const Z=z===q.detail.value;for(const te of this._getElementsByName(q.target.name)){const Q=Z&&te.id===L;te.domElement&&(te.domElement.checked=Q),N.setValue(te.id,{value:Q})}}};this._dispatchEventFromSandbox(H,B)}),this._setEventListeners(W,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],B=>B.target.checked)}return this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class i extends a{constructor(N){super(N,{ignoreBorder:N.data.hasAppearance})}render(){const N=super.render();N.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(N.title=this.data.alternativeText);const I=N.lastChild;return this.enableScripting&&this.hasJSActions&&I&&(this._setDefaultPropertiesFromJS(I),I.addEventListener("updatefromsandbox",L=>{this._dispatchEventFromSandbox({},L)})),N}}class g extends n{constructor(N){super(N,{isRenderable:N.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const N=this.annotationStorage,I=this.data.id,L=N.getValue(I,{value:this.data.fieldValue}),$=document.createElement("select");o.add($),$.setAttribute("data-element-id",I),$.disabled=this.data.readOnly,this._setRequired($,this.data.required),$.name=this.data.fieldName,$.tabIndex=h;let W=this.data.combo&&this.data.options.length>0;this.data.combo||($.size=this.data.options.length,this.data.multiSelect&&($.multiple=!0)),$.addEventListener("resetform",q=>{const Z=this.data.defaultFieldValue;for(const te of $.options)te.selected=te.value===Z});for(const q of this.data.options){const Z=document.createElement("option");Z.textContent=q.displayValue,Z.value=q.exportValue,L.value.includes(q.exportValue)&&(Z.setAttribute("selected",!0),W=!1),$.append(Z)}let z=null;if(W){const q=document.createElement("option");q.value=" ",q.setAttribute("hidden",!0),q.setAttribute("selected",!0),$.prepend(q),z=()=>{q.remove(),$.removeEventListener("input",z),z=null},$.addEventListener("input",z)}const B=(q,Z)=>{const te=Z?"value":"textContent",Q=q.target.options;return q.target.multiple?Array.prototype.filter.call(Q,ee=>ee.selected).map(ee=>ee[te]):Q.selectedIndex===-1?null:Q[Q.selectedIndex][te]},H=q=>{const Z=q.target.options;return Array.prototype.map.call(Z,te=>({displayValue:te.textContent,exportValue:te.value}))};return this.enableScripting&&this.hasJSActions?($.addEventListener("updatefromsandbox",q=>{const Z={value(te){z==null||z();const Q=te.detail.value,ee=new Set(Array.isArray(Q)?Q:[Q]);for(const J of $.options)J.selected=ee.has(J.value);N.setValue(I,{value:B(te,!0)})},multipleSelection(te){$.multiple=!0},remove(te){const Q=$.options,ee=te.detail.remove;Q[ee].selected=!1,$.remove(ee),Q.length>0&&Array.prototype.findIndex.call(Q,ne=>ne.selected)===-1&&(Q[0].selected=!0),N.setValue(I,{value:B(te,!0),items:H(te)})},clear(te){for(;$.length!==0;)$.remove(0);N.setValue(I,{value:null,items:[]})},insert(te){const{index:Q,displayValue:ee,exportValue:J}=te.detail.insert,ne=$.children[Q],re=document.createElement("option");re.textContent=ee,re.value=J,ne?ne.before(re):$.append(re),N.setValue(I,{value:B(te,!0),items:H(te)})},items(te){const{items:Q}=te.detail;for(;$.length!==0;)$.remove(0);for(const ee of Q){const{displayValue:J,exportValue:ne}=ee,re=document.createElement("option");re.textContent=J,re.value=ne,$.append(re)}$.options.length>0&&($.options[0].selected=!0),N.setValue(I,{value:B(te,!0),items:H(te)})},indices(te){const Q=new Set(te.detail.indices);for(const ee of te.target.options)ee.selected=Q.has(ee.index);N.setValue(I,{value:B(te,!0)})},editable(te){te.target.disabled=!te.detail.editable}};this._dispatchEventFromSandbox(Z,q)}),$.addEventListener("input",q=>{var Q;const Z=B(q,!0),te=B(q,!1);N.setValue(I,{value:Z}),(Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:I,name:"Keystroke",value:te,changeEx:Z,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners($,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],q=>q.target.checked)):$.addEventListener("input",function(q){N.setValue(I,{value:B(q,!0)})}),this.data.combo&&this._setTextStyle($),this._setBackgroundColor($),this._setDefaultPropertiesFromJS($),this.container.append($),this.container}}class x extends e{constructor(N){var L,$,W;const I=!!((L=N.data.titleObj)!=null&&L.str||($=N.data.contentsObj)!=null&&$.str||(W=N.data.richText)!=null&&W.str);super(N,{isRenderable:I})}render(){const N=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",N.includes(this.data.parentType))return this.container;const I=`[data-annotation-id="${this.data.parentId}"]`,L=this.layer.querySelectorAll(I);if(L.length===0)return this.container;const $=new m({container:this.container,trigger:Array.from(L),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),W=this.page,z=pe.Util.normalizeRect([this.data.parentRect[0],W.view[3]-this.data.parentRect[1]+W.view[1],this.data.parentRect[2],W.view[3]-this.data.parentRect[3]+W.view[1]]),B=z[0]+this.data.parentRect[2]-this.data.parentRect[0],H=z[1],[q,Z,te,Q]=this.viewport.viewBox,ee=te-q,J=Q-Z;return this.container.style.left=`${100*(B-q)/ee}%`,this.container.style.top=`${100*(H-Z)/J}%`,this.container.append($.render()),this.container}}class m{constructor(N){this.container=N.container,this.trigger=N.trigger,this.color=N.color,this.titleObj=N.titleObj,this.modificationDate=N.modificationDate,this.contentsObj=N.contentsObj,this.richText=N.richText,this.hideWrapper=N.hideWrapper||!1,this.pinned=!1}render(){var B,H;const I=document.createElement("div");I.className="popupWrapper",this.hideElement=this.hideWrapper?I:this.container,this.hideElement.hidden=!0;const L=document.createElement("div");L.className="popup";const $=this.color;if($){const q=.7*(255-$[0])+$[0],Z=.7*(255-$[1])+$[1],te=.7*(255-$[2])+$[2];L.style.backgroundColor=pe.Util.makeHexColor(q|0,Z|0,te|0)}const W=document.createElement("h1");W.dir=this.titleObj.dir,W.textContent=this.titleObj.str,L.append(W);const z=de.PDFDateString.toDateObject(this.modificationDate);if(z){const q=document.createElement("span");q.className="popupDate",q.textContent="{{date}}, {{time}}",q.dataset.l10nId="annotation_date_string",q.dataset.l10nArgs=JSON.stringify({date:z.toLocaleDateString(),time:z.toLocaleTimeString()}),L.append(q)}if((B=this.richText)!=null&&B.str&&(!((H=this.contentsObj)!=null&&H.str)||this.contentsObj.str===this.richText.str))f.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:L}),L.lastChild.className="richText popupContent";else{const q=this._formatContents(this.contentsObj);L.append(q)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const q of this.trigger)q.addEventListener("click",this._toggle.bind(this)),q.addEventListener("mouseover",this._show.bind(this,!1)),q.addEventListener("mouseout",this._hide.bind(this,!1));return L.addEventListener("click",this._hide.bind(this,!0)),I.append(L),I}_formatContents({str:N,dir:I}){const L=document.createElement("p");L.className="popupContent",L.dir=I;const $=N.split(/(?:\r\n?|\n)/);for(let W=0,z=$.length;W<z;++W){const B=$[W];L.append(document.createTextNode(B)),W<z-1&&L.append(document.createElement("br"))}return L}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(N=!1){N&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(N=!0){N&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class A extends e{constructor(N){var L,$,W;const I=!!(N.data.hasPopup||(L=N.data.titleObj)!=null&&L.str||($=N.data.contentsObj)!=null&&$.str||(W=N.data.richText)!=null&&W.str);super(N,{isRenderable:I,ignoreBorder:!0}),this.textContent=N.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const N=document.createElement("div");N.className="annotationTextContent",N.setAttribute("role","comment");for(const I of this.textContent){const L=document.createElement("span");L.textContent=I,N.append(L)}this.container.append(N)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class k extends e{constructor(N){var L,$,W;const I=!!(N.data.hasPopup||(L=N.data.titleObj)!=null&&L.str||($=N.data.contentsObj)!=null&&$.str||(W=N.data.richText)!=null&&W.str);super(N,{isRenderable:I,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const N=this.data,{width:I,height:L}=c(N.rect),$=this.svgFactory.create(I,L,!0),W=this.svgFactory.createElement("svg:line");return W.setAttribute("x1",N.rect[2]-N.lineCoordinates[0]),W.setAttribute("y1",N.rect[3]-N.lineCoordinates[1]),W.setAttribute("x2",N.rect[2]-N.lineCoordinates[2]),W.setAttribute("y2",N.rect[3]-N.lineCoordinates[3]),W.setAttribute("stroke-width",N.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),$.append(W),this.container.append($),this._createPopup(W,N),this.container}}class v extends e{constructor(N){var L,$,W;const I=!!(N.data.hasPopup||(L=N.data.titleObj)!=null&&L.str||($=N.data.contentsObj)!=null&&$.str||(W=N.data.richText)!=null&&W.str);super(N,{isRenderable:I,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const N=this.data,{width:I,height:L}=c(N.rect),$=this.svgFactory.create(I,L,!0),W=N.borderStyle.width,z=this.svgFactory.createElement("svg:rect");return z.setAttribute("x",W/2),z.setAttribute("y",W/2),z.setAttribute("width",I-W),z.setAttribute("height",L-W),z.setAttribute("stroke-width",W||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),$.append(z),this.container.append($),this._createPopup(z,N),this.container}}class _ extends e{constructor(N){var L,$,W;const I=!!(N.data.hasPopup||(L=N.data.titleObj)!=null&&L.str||($=N.data.contentsObj)!=null&&$.str||(W=N.data.richText)!=null&&W.str);super(N,{isRenderable:I,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const N=this.data,{width:I,height:L}=c(N.rect),$=this.svgFactory.create(I,L,!0),W=N.borderStyle.width,z=this.svgFactory.createElement("svg:ellipse");return z.setAttribute("cx",I/2),z.setAttribute("cy",L/2),z.setAttribute("rx",I/2-W/2),z.setAttribute("ry",L/2-W/2),z.setAttribute("stroke-width",W||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),$.append(z),this.container.append($),this._createPopup(z,N),this.container}}class K extends e{constructor(N){var L,$,W;const I=!!(N.data.hasPopup||(L=N.data.titleObj)!=null&&L.str||($=N.data.contentsObj)!=null&&$.str||(W=N.data.richText)!=null&&W.str);super(N,{isRenderable:I,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const N=this.data,{width:I,height:L}=c(N.rect),$=this.svgFactory.create(I,L,!0);let W=[];for(const B of N.vertices){const H=B.x-N.rect[0],q=N.rect[3]-B.y;W.push(H+","+q)}W=W.join(" ");const z=this.svgFactory.createElement(this.svgElementName);return z.setAttribute("points",W),z.setAttribute("stroke-width",N.borderStyle.width||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),$.append(z),this.container.append($),this._createPopup(z,N),this.container}}class M extends K{constructor(N){super(N),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class j extends e{constructor(N){var L,$,W;const I=!!(N.data.hasPopup||(L=N.data.titleObj)!=null&&L.str||($=N.data.contentsObj)!=null&&$.str||(W=N.data.richText)!=null&&W.str);super(N,{isRenderable:I,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class O extends e{constructor(N){var L,$,W;const I=!!(N.data.hasPopup||(L=N.data.titleObj)!=null&&L.str||($=N.data.contentsObj)!=null&&$.str||(W=N.data.richText)!=null&&W.str);super(N,{isRenderable:I,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const N=this.data,{width:I,height:L}=c(N.rect),$=this.svgFactory.create(I,L,!0);for(const W of N.inkLists){let z=[];for(const H of W){const q=H.x-N.rect[0],Z=N.rect[3]-H.y;z.push(`${q},${Z}`)}z=z.join(" ");const B=this.svgFactory.createElement(this.svgElementName);B.setAttribute("points",z),B.setAttribute("stroke-width",N.borderStyle.width||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),this._createPopup(B,N),$.append(B)}return this.container.append($),this.container}}class T extends e{constructor(N){var L,$,W;const I=!!(N.data.hasPopup||(L=N.data.titleObj)!=null&&L.str||($=N.data.contentsObj)!=null&&$.str||(W=N.data.richText)!=null&&W.str);super(N,{isRenderable:I,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class R extends e{constructor(N){var L,$,W;const I=!!(N.data.hasPopup||(L=N.data.titleObj)!=null&&L.str||($=N.data.contentsObj)!=null&&$.str||(W=N.data.richText)!=null&&W.str);super(N,{isRenderable:I,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class y extends e{constructor(N){var L,$,W;const I=!!(N.data.hasPopup||(L=N.data.titleObj)!=null&&L.str||($=N.data.contentsObj)!=null&&$.str||(W=N.data.richText)!=null&&W.str);super(N,{isRenderable:I,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class p extends e{constructor(N){var L,$,W;const I=!!(N.data.hasPopup||(L=N.data.titleObj)!=null&&L.str||($=N.data.contentsObj)!=null&&$.str||(W=N.data.richText)!=null&&W.str);super(N,{isRenderable:I,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class P extends e{constructor(N){var L,$,W;const I=!!(N.data.hasPopup||(L=N.data.titleObj)!=null&&L.str||($=N.data.contentsObj)!=null&&$.str||(W=N.data.richText)!=null&&W.str);super(N,{isRenderable:I,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class E extends e{constructor(N){var $;super(N,{isRenderable:!0});const{filename:I,content:L}=this.data.file;this.filename=(0,de.getFilenameFromUrl)(I),this.content=L,($=this.linkService.eventBus)==null||$.dispatch("fileattachmentannotation",{source:this,filename:I,content:L})}render(){var I,L;this.container.className="fileAttachmentAnnotation";const N=document.createElement("div");return N.className="popupTriggerArea",N.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((I=this.data.titleObj)!=null&&I.str||(L=this.data.contentsObj)!=null&&L.str||this.data.richText)&&this._createPopup(N,this.data),this.container.append(N),this.container}_download(){var N;(N=this.downloadManager)==null||N.openOrDownloadData(this.container,this.content,this.filename)}}const G=class{static render(N){var B,H;const{annotations:I,div:L,viewport:$,accessibilityManager:W}=N;Je(this,b,Ji).call(this,L,$);let z=0;for(const q of I){if(q.annotationType!==pe.AnnotationType.POPUP){const{width:te,height:Q}=c(q.rect);if(te<=0||Q<=0)continue}const Z=s.create({data:q,layer:L,page:N.page,viewport:$,linkService:N.linkService,downloadManager:N.downloadManager,imageResourcesPath:N.imageResourcesPath||"",renderForms:N.renderForms!==!1,svgFactory:new de.DOMSVGFactory,annotationStorage:N.annotationStorage||new De.AnnotationStorage,enableScripting:N.enableScripting,hasJSActions:N.hasJSActions,fieldObjects:N.fieldObjects,mouseState:N.mouseState||{isDown:!1}});if(Z.isRenderable){const te=Z.render();if(q.hidden&&(te.style.visibility="hidden"),Array.isArray(te))for(const Q of te)Q.style.zIndex=z++,Je(B=G,F,Ki).call(B,Q,q.id,L,W);else te.style.zIndex=z++,Z instanceof x?L.prepend(te):Je(H=G,F,Ki).call(H,te,q.id,L,W)}}Je(this,U,Zi).call(this,L,N.annotationCanvasMap)}static update(N){const{annotationCanvasMap:I,div:L,viewport:$}=N;Je(this,b,Ji).call(this,L,$),Je(this,U,Zi).call(this,L,I),L.hidden=!1}};let S=G;F=new WeakSet,Ki=function(N,I,L,$){const W=N.firstChild||N;W.id=`${de.AnnotationPrefix}${I}`,L.append(N),$==null||$.moveElementInDOM(L,N,W,!1)},b=new WeakSet,Ji=function(N,{width:I,height:L,rotation:$}){const{style:W}=N,z=$%180!==0,B=Math.floor(I)+"px",H=Math.floor(L)+"px";W.width=z?H:B,W.height=z?B:H,N.setAttribute("data-main-rotation",$)},U=new WeakSet,Zi=function(N,I){if(I){for(const[L,$]of I){const W=N.querySelector(`[data-annotation-id="${L}"]`);if(!W)continue;const{firstChild:z}=W;z?z.nodeName==="CANVAS"?z.replaceWith($):z.before($):W.append($)}I.clear()}},Ye(S,F),Ye(S,b),Ye(S,U),V.AnnotationLayer=S},(Me,V)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.ColorConverters=void 0;function Be(de){return Math.floor(Math.max(0,Math.min(1,de))*255).toString(16).padStart(2,"0")}class pe{static CMYK_G([De,ge,f,h]){return["G",1-Math.min(1,.3*De+.59*f+.11*ge+h)]}static G_CMYK([De]){return["CMYK",0,0,0,1-De]}static G_RGB([De]){return["RGB",De,De,De]}static G_HTML([De]){const ge=Be(De);return`#${ge}${ge}${ge}`}static RGB_G([De,ge,f]){return["G",.3*De+.59*ge+.11*f]}static RGB_HTML([De,ge,f]){const h=Be(De),t=Be(ge),o=Be(f);return`#${h}${t}${o}`}static T_HTML(){return"#00000000"}static CMYK_RGB([De,ge,f,h]){return["RGB",1-Math.min(1,De+h),1-Math.min(1,f+h),1-Math.min(1,ge+h)]}static CMYK_HTML(De){const ge=this.CMYK_RGB(De).slice(1);return this.RGB_HTML(ge)}static RGB_CMYK([De,ge,f]){const h=1-De,t=1-ge,o=1-f,c=Math.min(h,t,o);return["CMYK",h,t,o,c]}}V.ColorConverters=pe},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.XfaLayer=void 0;var pe=Be(20);class de{static setupStorage(ge,f,h,t,o){const c=t.getValue(f,{value:null});switch(h.name){case"textarea":if(c.value!==null&&(ge.textContent=c.value),o==="print")break;ge.addEventListener("input",s=>{t.setValue(f,{value:s.target.value})});break;case"input":if(h.attributes.type==="radio"||h.attributes.type==="checkbox"){if(c.value===h.attributes.xfaOn?ge.setAttribute("checked",!0):c.value===h.attributes.xfaOff&&ge.removeAttribute("checked"),o==="print")break;ge.addEventListener("change",s=>{t.setValue(f,{value:s.target.checked?s.target.getAttribute("xfaOn"):s.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&ge.setAttribute("value",c.value),o==="print")break;ge.addEventListener("input",s=>{t.setValue(f,{value:s.target.value})})}break;case"select":if(c.value!==null)for(const s of h.children)s.attributes.value===c.value&&(s.attributes.selected=!0);ge.addEventListener("input",s=>{const e=s.target.options,a=e.selectedIndex===-1?"":e[e.selectedIndex].value;t.setValue(f,{value:a})});break}}static setAttributes({html:ge,element:f,storage:h=null,intent:t,linkService:o}){const{attributes:c}=f,s=ge instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${t}`);for(const[e,a]of Object.entries(c))if(a!=null)switch(e){case"class":a.length&&ge.setAttribute(e,a.join(" "));break;case"dataId":break;case"id":ge.setAttribute("data-element-id",a);break;case"style":Object.assign(ge.style,a);break;case"textContent":ge.textContent=a;break;default:(!s||e!=="href"&&e!=="newWindow")&&ge.setAttribute(e,a)}s&&o.addLinkAttributes(ge,c.href,c.newWindow),h&&c.dataId&&this.setupStorage(ge,c.dataId,f,h)}static render(ge){var r;const f=ge.annotationStorage,h=ge.linkService,t=ge.xfaHtml,o=ge.intent||"display",c=document.createElement(t.name);t.attributes&&this.setAttributes({html:c,element:t,intent:o,linkService:h});const s=[[t,-1,c]],e=ge.div;if(e.append(c),ge.viewport){const n=`matrix(${ge.viewport.transform.join(",")})`;e.style.transform=n}o!=="richText"&&e.setAttribute("class","xfaLayer xfaFont");const a=[];for(;s.length>0;){const[n,l,u]=s.at(-1);if(l+1===n.children.length){s.pop();continue}const d=n.children[++s.at(-1)[1]];if(d===null)continue;const{name:i}=d;if(i==="#text"){const x=document.createTextNode(d.value);a.push(x),u.append(x);continue}let g;if((r=d==null?void 0:d.attributes)!=null&&r.xmlns?g=document.createElementNS(d.attributes.xmlns,i):g=document.createElement(i),u.append(g),d.attributes&&this.setAttributes({html:g,element:d,storage:f,intent:o,linkService:h}),d.children&&d.children.length>0)s.push([d,-1,g]);else if(d.value){const x=document.createTextNode(d.value);pe.XfaText.shouldBuildText(i)&&a.push(x),g.append(x)}}for(const n of e.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))n.setAttribute("readOnly",!0);return{textDivs:a}}static update(ge){const f=`matrix(${ge.viewport.transform.join(",")})`;ge.div.style.transform=f,ge.div.hidden=!1}}V.XfaLayer=de},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.TextLayerRenderTask=void 0,V.renderTextLayer=u;var pe=Be(1),de=Be(8);const De=1e5,ge=30,f=.8,h=new Map,t=/^\s+$/g;function o(d,i){const g=h.get(d);if(g)return g;i.save(),i.font=`${ge}px ${d}`;const x=i.measureText("");let m=x.fontBoundingBoxAscent,A=Math.abs(x.fontBoundingBoxDescent);if(m){i.restore();const v=m/(m+A);return h.set(d,v),v}i.strokeStyle="red",i.clearRect(0,0,ge,ge),i.strokeText("g",0,0);let k=i.getImageData(0,0,ge,ge).data;A=0;for(let v=k.length-1-3;v>=0;v-=4)if(k[v]>0){A=Math.ceil(v/4/ge);break}i.clearRect(0,0,ge,ge),i.strokeText("A",0,ge),k=i.getImageData(0,0,ge,ge).data,m=0;for(let v=0,_=k.length;v<_;v+=4)if(k[v]>0){m=ge-Math.floor(v/4/ge);break}if(i.restore(),m){const v=m/(m+A);return h.set(d,v),v}return h.set(d,f),f}function c(d,i,g,x){const m=document.createElement("span"),A=d._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:i.str!=="",hasEOL:i.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:i.str!=="",hasEOL:i.hasEOL,fontSize:0};d._textDivs.push(m);const k=pe.Util.transform(d._viewport.transform,i.transform);let v=Math.atan2(k[1],k[0]);const _=g[i.fontName];_.vertical&&(v+=Math.PI/2);const K=Math.hypot(k[2],k[3]),M=K*o(_.fontFamily,x);let j,O;v===0?(j=k[4],O=k[5]-M):(j=k[4]+M*Math.sin(v),O=k[5]-M*Math.cos(v)),m.style.left=`${j}px`,m.style.top=`${O}px`,m.style.fontSize=`${K}px`,m.style.fontFamily=_.fontFamily,A.fontSize=K,m.setAttribute("role","presentation"),m.textContent=i.str,m.dir=i.dir,d._fontInspectorEnabled&&(m.dataset.fontName=i.fontName),v!==0&&(A.angle=v*(180/Math.PI));let T=!1;if(i.str.length>1||d._enhanceTextSelection&&t.test(i.str))T=!0;else if(i.str!==" "&&i.transform[0]!==i.transform[3]){const R=Math.abs(i.transform[0]),y=Math.abs(i.transform[3]);R!==y&&Math.max(R,y)/Math.min(R,y)>1.5&&(T=!0)}if(T&&(_.vertical?A.canvasWidth=i.height*d._viewport.scale:A.canvasWidth=i.width*d._viewport.scale),d._textDivProperties.set(m,A),d._textContentStream&&d._layoutText(m),d._enhanceTextSelection&&A.hasText){let R=1,y=0;v!==0&&(R=Math.cos(v),y=Math.sin(v));const p=(_.vertical?i.height:i.width)*d._viewport.scale,P=K;let E,S;v!==0?(E=[R,y,-y,R,j,O],S=pe.Util.getAxialAlignedBoundingBox([0,0,p,P],E)):S=[j,O,j+p,O+P],d._bounds.push({left:S[0],top:S[1],right:S[2],bottom:S[3],div:m,size:[p,P],m:E})}}function s(d){if(d._canceled)return;const i=d._textDivs,g=d._capability,x=i.length;if(x>De){d._renderingDone=!0,g.resolve();return}if(!d._textContentStream)for(let m=0;m<x;m++)d._layoutText(i[m]);d._renderingDone=!0,g.resolve()}function e(d,i,g){let x=0;for(let m=0;m<g;m++){const A=d[i++];A>0&&(x=x?Math.min(A,x):A)}return x}function a(d){const i=d._bounds,g=d._viewport,x=r(g.width,g.height,i);for(let m=0;m<x.length;m++){const A=i[m].div,k=d._textDivProperties.get(A);if(k.angle===0){k.paddingLeft=i[m].left-x[m].left,k.paddingTop=i[m].top-x[m].top,k.paddingRight=x[m].right-i[m].right,k.paddingBottom=x[m].bottom-i[m].bottom,d._textDivProperties.set(A,k);continue}const v=x[m],_=i[m],K=_.m,M=K[0],j=K[1],O=[[0,0],[0,_.size[1]],[_.size[0],0],_.size],T=new Float64Array(64);for(let y=0,p=O.length;y<p;y++){const P=pe.Util.applyTransform(O[y],K);T[y+0]=M&&(v.left-P[0])/M,T[y+4]=j&&(v.top-P[1])/j,T[y+8]=M&&(v.right-P[0])/M,T[y+12]=j&&(v.bottom-P[1])/j,T[y+16]=j&&(v.left-P[0])/-j,T[y+20]=M&&(v.top-P[1])/M,T[y+24]=j&&(v.right-P[0])/-j,T[y+28]=M&&(v.bottom-P[1])/M,T[y+32]=M&&(v.left-P[0])/-M,T[y+36]=j&&(v.top-P[1])/-j,T[y+40]=M&&(v.right-P[0])/-M,T[y+44]=j&&(v.bottom-P[1])/-j,T[y+48]=j&&(v.left-P[0])/j,T[y+52]=M&&(v.top-P[1])/-M,T[y+56]=j&&(v.right-P[0])/j,T[y+60]=M&&(v.bottom-P[1])/-M}const R=1+Math.min(Math.abs(M),Math.abs(j));k.paddingLeft=e(T,32,16)/R,k.paddingTop=e(T,48,16)/R,k.paddingRight=e(T,0,16)/R,k.paddingBottom=e(T,16,16)/R,d._textDivProperties.set(A,k)}}function r(d,i,g){const x=g.map(function(A,k){return{x1:A.left,y1:A.top,x2:A.right,y2:A.bottom,index:k,x1New:void 0,x2New:void 0}});n(d,x);const m=new Array(g.length);for(const A of x){const k=A.index;m[k]={left:A.x1New,top:0,right:A.x2New,bottom:0}}g.map(function(A,k){const v=m[k],_=x[k];_.x1=A.top,_.y1=d-v.right,_.x2=A.bottom,_.y2=d-v.left,_.index=k,_.x1New=void 0,_.x2New=void 0}),n(i,x);for(const A of x){const k=A.index;m[k].top=A.x1New,m[k].bottom=A.x2New}return m}function n(d,i){i.sort(function(m,A){return m.x1-A.x1||m.index-A.index});const x=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const m of i){let A=0;for(;A<x.length&&x[A].end<=m.y1;)A++;let k=x.length-1;for(;k>=0&&x[k].start>=m.y2;)k--;let v,_,K,M,j=-1/0;for(K=A;K<=k;K++){v=x[K],_=v.boundary;let R;_.x2>m.x1?R=_.index>m.index?_.x1New:m.x1:_.x2New===void 0?R=(_.x2+m.x1)/2:R=_.x2New,R>j&&(j=R)}for(m.x1New=j,K=A;K<=k;K++)v=x[K],_=v.boundary,_.x2New===void 0?_.x2>m.x1?_.index>m.index&&(_.x2New=_.x2):_.x2New=j:_.x2New>j&&(_.x2New=Math.max(j,_.x2));const O=[];let T=null;for(K=A;K<=k;K++){v=x[K],_=v.boundary;const R=_.x2>m.x2?_:m;T===R?O.at(-1).end=v.end:(O.push({start:v.start,end:v.end,boundary:R}),T=R)}for(x[A].start<m.y1&&(O[0].start=m.y1,O.unshift({start:x[A].start,end:m.y1,boundary:x[A].boundary})),m.y2<x[k].end&&(O.at(-1).end=m.y2,O.push({start:m.y2,end:x[k].end,boundary:x[k].boundary})),K=A;K<=k;K++){if(v=x[K],_=v.boundary,_.x2New!==void 0)continue;let R=!1;for(M=A-1;!R&&M>=0&&x[M].start>=_.y1;M--)R=x[M].boundary===_;for(M=k+1;!R&&M<x.length&&x[M].end<=_.y2;M++)R=x[M].boundary===_;for(M=0;!R&&M<O.length;M++)R=O[M].boundary===_;R||(_.x2New=j)}Array.prototype.splice.apply(x,[A,k-A+1,...O])}for(const m of x){const A=m.boundary;A.x2New===void 0&&(A.x2New=Math.max(d,A.x2))}}class l{constructor({textContent:i,textContentStream:g,container:x,viewport:m,textDivs:A,textContentItemsStr:k,enhanceTextSelection:v}){var _;v&&(0,de.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=i,this._textContentStream=g,this._container=x,this._document=x.ownerDocument,this._viewport=m,this._textDivs=A||[],this._textContentItemsStr=k||[],this._enhanceTextSelection=!!v,this._fontInspectorEnabled=!!((_=globalThis.FontInspector)!=null&&_.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,pe.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new pe.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(i,g){for(let x=0,m=i.length;x<m;x++){if(i[x].str===void 0){if(i[x].type==="beginMarkedContentProps"||i[x].type==="beginMarkedContent"){const A=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),i[x].id!==null&&this._container.setAttribute("id",`${i[x].id}`),A.append(this._container)}else i[x].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(i[x].str),c(this,i[x],g,this._layoutTextCtx)}}_layoutText(i){const g=this._textDivProperties.get(i);let x="";if(g.canvasWidth!==0&&g.hasText){const{fontFamily:m}=i.style,{fontSize:A}=g;(A!==this._layoutTextLastFontSize||m!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${A*this._devicePixelRatio}px ${m}`,this._layoutTextLastFontSize=A,this._layoutTextLastFontFamily=m);const{width:k}=this._layoutTextCtx.measureText(i.textContent);if(k>0){const v=this._devicePixelRatio*g.canvasWidth/k;this._enhanceTextSelection&&(g.scale=v),x=`scaleX(${v})`}}if(g.angle!==0&&(x=`rotate(${g.angle}deg) ${x}`),x.length>0&&(this._enhanceTextSelection&&(g.originalTransform=x),i.style.transform=x),g.hasText&&this._container.append(i),g.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),this._container.append(m)}}_render(i=0){const g=(0,pe.createPromiseCapability)();let x=Object.create(null);const m=this._document.createElement("canvas");if(m.height=m.width=ge,this._layoutTextCtx=m.getContext("2d",{alpha:!1}),this._textContent){const A=this._textContent.items,k=this._textContent.styles;this._processItems(A,k),g.resolve()}else if(this._textContentStream){const A=()=>{this._reader.read().then(({value:k,done:v})=>{if(v){g.resolve();return}Object.assign(x,k.styles),this._processItems(k.items,x),A()},g.reject)};this._reader=this._textContentStream.getReader(),A()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');g.promise.then(()=>{x=null,i?this._renderTimer=setTimeout(()=>{s(this),this._renderTimer=null},i):s(this)},this._capability.reject)}expandTextDivs(i=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(a(this),this._bounds=null);const g=[],x=[];for(let m=0,A=this._textDivs.length;m<A;m++){const k=this._textDivs[m],v=this._textDivProperties.get(k);v.hasText&&(i?(g.length=0,x.length=0,v.originalTransform&&g.push(v.originalTransform),v.paddingTop>0?(x.push(`${v.paddingTop}px`),g.push(`translateY(${-v.paddingTop}px)`)):x.push(0),v.paddingRight>0?x.push(`${v.paddingRight/v.scale}px`):x.push(0),v.paddingBottom>0?x.push(`${v.paddingBottom}px`):x.push(0),v.paddingLeft>0?(x.push(`${v.paddingLeft/v.scale}px`),g.push(`translateX(${-v.paddingLeft/v.scale}px)`)):x.push(0),k.style.padding=x.join(" "),g.length&&(k.style.transform=g.join(" "))):(k.style.padding=null,k.style.transform=v.originalTransform))}}}V.TextLayerRenderTask=l;function u(d){const i=new l({textContent:d.textContent,textContentStream:d.textContentStream,container:d.container,viewport:d.viewport,textDivs:d.textDivs,textContentItemsStr:d.textContentItemsStr,enhanceTextSelection:d.enhanceTextSelection});return i._render(d.timeout),i}},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.SVGGraphics=void 0;var pe=Be(8),de=Be(1),De=Be(3);let ge=class{constructor(){(0,de.unreachable)("Not implemented: SVGGraphics")}};V.SVGGraphics=ge;{let r=function(g){let x=[];const m=[];for(const A of g){if(A.fn==="save"){x.push({fnId:92,fn:"group",items:[]}),m.push(x),x=x.at(-1).items;continue}A.fn==="restore"?x=m.pop():x.push(A)}return x},n=function(g){if(Number.isInteger(g))return g.toString();const x=g.toFixed(10);let m=x.length-1;if(x[m]!=="0")return x;do m--;while(x[m]==="0");return x.substring(0,x[m]==="."?m:m+1)},l=function(g){if(g[4]===0&&g[5]===0){if(g[1]===0&&g[2]===0)return g[0]===1&&g[3]===1?"":`scale(${n(g[0])} ${n(g[3])})`;if(g[0]===g[3]&&g[1]===-g[2]){const x=Math.acos(g[0])*180/Math.PI;return`rotate(${n(x)})`}}else if(g[0]===1&&g[1]===0&&g[2]===0&&g[3]===1)return`translate(${n(g[4])} ${n(g[5])})`;return`matrix(${n(g[0])} ${n(g[1])} ${n(g[2])} ${n(g[3])} ${n(g[4])} ${n(g[5])})`};const f={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},h="http://www.w3.org/XML/1998/namespace",t="http://www.w3.org/1999/xlink",o=["butt","round","square"],c=["miter","round","bevel"],s=function(g,x="",m=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!m)return URL.createObjectURL(new Blob([g],{type:x}));const A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let k=`data:${x};base64,`;for(let v=0,_=g.length;v<_;v+=3){const K=g[v]&255,M=g[v+1]&255,j=g[v+2]&255,O=K>>2,T=(K&3)<<4|M>>4,R=v+1<_?(M&15)<<2|j>>6:64,y=v+2<_?j&63:64;k+=A[O]+A[T]+A[R]+A[y]}return k},e=function(){const g=new Uint8Array([137,80,78,71,13,10,26,10]),x=12,m=new Int32Array(256);for(let j=0;j<256;j++){let O=j;for(let T=0;T<8;T++)O&1?O=3988292384^O>>1&2147483647:O=O>>1&2147483647;m[j]=O}function A(j,O,T){let R=-1;for(let y=O;y<T;y++){const p=(R^j[y])&255,P=m[p];R=R>>>8^P}return R^-1}function k(j,O,T,R){let y=R;const p=O.length;T[y]=p>>24&255,T[y+1]=p>>16&255,T[y+2]=p>>8&255,T[y+3]=p&255,y+=4,T[y]=j.charCodeAt(0)&255,T[y+1]=j.charCodeAt(1)&255,T[y+2]=j.charCodeAt(2)&255,T[y+3]=j.charCodeAt(3)&255,y+=4,T.set(O,y),y+=O.length;const P=A(T,R+4,y);T[y]=P>>24&255,T[y+1]=P>>16&255,T[y+2]=P>>8&255,T[y+3]=P&255}function v(j,O,T){let R=1,y=0;for(let p=O;p<T;++p)R=(R+(j[p]&255))%65521,y=(y+R)%65521;return y<<16|R}function _(j){if(!De.isNodeJS)return K(j);try{let O;parseInt(process.versions.node)>=8?O=j:O=Buffer.from(j);const T=require$$2.deflateSync(O,{level:9});return T instanceof Uint8Array?T:new Uint8Array(T)}catch(O){(0,de.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+O)}return K(j)}function K(j){let O=j.length;const T=65535,R=Math.ceil(O/T),y=new Uint8Array(2+O+R*5+4);let p=0;y[p++]=120,y[p++]=156;let P=0;for(;O>T;)y[p++]=0,y[p++]=255,y[p++]=255,y[p++]=0,y[p++]=0,y.set(j.subarray(P,P+T),p),p+=T,P+=T,O-=T;y[p++]=1,y[p++]=O&255,y[p++]=O>>8&255,y[p++]=~O&65535&255,y[p++]=(~O&65535)>>8&255,y.set(j.subarray(P),p),p+=j.length-P;const E=v(j,0,j.length);return y[p++]=E>>24&255,y[p++]=E>>16&255,y[p++]=E>>8&255,y[p++]=E&255,y}function M(j,O,T,R){const y=j.width,p=j.height;let P,E,S;const F=j.data;switch(O){case de.ImageKind.GRAYSCALE_1BPP:E=0,P=1,S=y+7>>3;break;case de.ImageKind.RGB_24BPP:E=2,P=8,S=y*3;break;case de.ImageKind.RGBA_32BPP:E=6,P=8,S=y*4;break;default:throw new Error("invalid format")}const C=new Uint8Array((1+S)*p);let b=0,D=0;for(let I=0;I<p;++I)C[b++]=0,C.set(F.subarray(D,D+S),b),D+=S,b+=S;if(O===de.ImageKind.GRAYSCALE_1BPP&&R){b=0;for(let I=0;I<p;I++){b++;for(let L=0;L<S;L++)C[b++]^=255}}const U=new Uint8Array([y>>24&255,y>>16&255,y>>8&255,y&255,p>>24&255,p>>16&255,p>>8&255,p&255,P,E,0,0,0]),X=_(C),G=g.length+x*3+U.length+X.length,Y=new Uint8Array(G);let N=0;return Y.set(g,N),N+=g.length,k("IHDR",U,Y,N),N+=x+U.length,k("IDATA",X,Y,N),N+=x+X.length,k("IEND",new Uint8Array(0),Y,N),s(Y,"image/png",T)}return function(O,T,R){const y=O.kind===void 0?de.ImageKind.GRAYSCALE_1BPP:O.kind;return M(O,y,T,R)}}();class a{constructor(){this.fontSizeScale=1,this.fontWeight=f.fontWeight,this.fontSize=0,this.textMatrix=de.IDENTITY_MATRIX,this.fontMatrix=de.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=de.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=f.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(x,m){this.x=x,this.y=m}}let u=0,d=0,i=0;V.SVGGraphics=ge=class{constructor(g,x,m=!1){(0,pe.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new pe.DOMSVGFactory,this.current=new a,this.transformMatrix=de.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=g,this.objs=x,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!m,this._operatorIdMapping=[];for(const A in de.OPS)this._operatorIdMapping[de.OPS[A]]=A}save(){this.transformStack.push(this.transformMatrix);const g=this.current;this.extraStack.push(g),this.current=g.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(g){this.save(),this.executeOpTree(g),this.restore()}loadDependencies(g){const x=g.fnArray,m=g.argsArray;for(let A=0,k=x.length;A<k;A++)if(x[A]===de.OPS.dependency)for(const v of m[A]){const _=v.startsWith("g_")?this.commonObjs:this.objs,K=new Promise(M=>{_.get(v,M)});this.current.dependencies.push(K)}return Promise.all(this.current.dependencies)}transform(g,x,m,A,k,v){const _=[g,x,m,A,k,v];this.transformMatrix=de.Util.transform(this.transformMatrix,_),this.tgrp=null}getSVG(g,x){this.viewport=x;const m=this._initialize(x);return this.loadDependencies(g).then(()=>(this.transformMatrix=de.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(g)),m))}convertOpList(g){const x=this._operatorIdMapping,m=g.argsArray,A=g.fnArray,k=[];for(let v=0,_=A.length;v<_;v++){const K=A[v];k.push({fnId:K,fn:x[K],args:m[v]})}return r(k)}executeOpTree(g){for(const x of g){const m=x.fn,A=x.fnId,k=x.args;switch(A|0){case de.OPS.beginText:this.beginText();break;case de.OPS.dependency:break;case de.OPS.setLeading:this.setLeading(k);break;case de.OPS.setLeadingMoveText:this.setLeadingMoveText(k[0],k[1]);break;case de.OPS.setFont:this.setFont(k);break;case de.OPS.showText:this.showText(k[0]);break;case de.OPS.showSpacedText:this.showText(k[0]);break;case de.OPS.endText:this.endText();break;case de.OPS.moveText:this.moveText(k[0],k[1]);break;case de.OPS.setCharSpacing:this.setCharSpacing(k[0]);break;case de.OPS.setWordSpacing:this.setWordSpacing(k[0]);break;case de.OPS.setHScale:this.setHScale(k[0]);break;case de.OPS.setTextMatrix:this.setTextMatrix(k[0],k[1],k[2],k[3],k[4],k[5]);break;case de.OPS.setTextRise:this.setTextRise(k[0]);break;case de.OPS.setTextRenderingMode:this.setTextRenderingMode(k[0]);break;case de.OPS.setLineWidth:this.setLineWidth(k[0]);break;case de.OPS.setLineJoin:this.setLineJoin(k[0]);break;case de.OPS.setLineCap:this.setLineCap(k[0]);break;case de.OPS.setMiterLimit:this.setMiterLimit(k[0]);break;case de.OPS.setFillRGBColor:this.setFillRGBColor(k[0],k[1],k[2]);break;case de.OPS.setStrokeRGBColor:this.setStrokeRGBColor(k[0],k[1],k[2]);break;case de.OPS.setStrokeColorN:this.setStrokeColorN(k);break;case de.OPS.setFillColorN:this.setFillColorN(k);break;case de.OPS.shadingFill:this.shadingFill(k[0]);break;case de.OPS.setDash:this.setDash(k[0],k[1]);break;case de.OPS.setRenderingIntent:this.setRenderingIntent(k[0]);break;case de.OPS.setFlatness:this.setFlatness(k[0]);break;case de.OPS.setGState:this.setGState(k[0]);break;case de.OPS.fill:this.fill();break;case de.OPS.eoFill:this.eoFill();break;case de.OPS.stroke:this.stroke();break;case de.OPS.fillStroke:this.fillStroke();break;case de.OPS.eoFillStroke:this.eoFillStroke();break;case de.OPS.clip:this.clip("nonzero");break;case de.OPS.eoClip:this.clip("evenodd");break;case de.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case de.OPS.paintImageXObject:this.paintImageXObject(k[0]);break;case de.OPS.paintInlineImageXObject:this.paintInlineImageXObject(k[0]);break;case de.OPS.paintImageMaskXObject:this.paintImageMaskXObject(k[0]);break;case de.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(k[0],k[1]);break;case de.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case de.OPS.closePath:this.closePath();break;case de.OPS.closeStroke:this.closeStroke();break;case de.OPS.closeFillStroke:this.closeFillStroke();break;case de.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case de.OPS.nextLine:this.nextLine();break;case de.OPS.transform:this.transform(k[0],k[1],k[2],k[3],k[4],k[5]);break;case de.OPS.constructPath:this.constructPath(k[0],k[1]);break;case de.OPS.endPath:this.endPath();break;case 92:this.group(x.items);break;default:(0,de.warn)(`Unimplemented operator ${m}`);break}}}setWordSpacing(g){this.current.wordSpacing=g}setCharSpacing(g){this.current.charSpacing=g}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(g,x,m,A,k,v){const _=this.current;_.textMatrix=_.lineMatrix=[g,x,m,A,k,v],_.textMatrixScale=Math.hypot(g,x),_.x=_.lineX=0,_.y=_.lineY=0,_.xcoords=[],_.ycoords=[],_.tspan=this.svgFactory.createElement("svg:tspan"),_.tspan.setAttributeNS(null,"font-family",_.fontFamily),_.tspan.setAttributeNS(null,"font-size",`${n(_.fontSize)}px`),_.tspan.setAttributeNS(null,"y",n(-_.y)),_.txtElement=this.svgFactory.createElement("svg:text"),_.txtElement.append(_.tspan)}beginText(){const g=this.current;g.x=g.lineX=0,g.y=g.lineY=0,g.textMatrix=de.IDENTITY_MATRIX,g.lineMatrix=de.IDENTITY_MATRIX,g.textMatrixScale=1,g.tspan=this.svgFactory.createElement("svg:tspan"),g.txtElement=this.svgFactory.createElement("svg:text"),g.txtgrp=this.svgFactory.createElement("svg:g"),g.xcoords=[],g.ycoords=[]}moveText(g,x){const m=this.current;m.x=m.lineX+=g,m.y=m.lineY+=x,m.xcoords=[],m.ycoords=[],m.tspan=this.svgFactory.createElement("svg:tspan"),m.tspan.setAttributeNS(null,"font-family",m.fontFamily),m.tspan.setAttributeNS(null,"font-size",`${n(m.fontSize)}px`),m.tspan.setAttributeNS(null,"y",n(-m.y))}showText(g){const x=this.current,m=x.font,A=x.fontSize;if(A===0)return;const k=x.fontSizeScale,v=x.charSpacing,_=x.wordSpacing,K=x.fontDirection,M=x.textHScale*K,j=m.vertical,O=j?1:-1,T=m.defaultVMetrics,R=A*x.fontMatrix[0];let y=0;for(const E of g){if(E===null){y+=K*_;continue}else if(typeof E=="number"){y+=O*E*A/1e3;continue}const S=(E.isSpace?_:0)+v,F=E.fontChar;let C,b,D=E.width;if(j){let X;const G=E.vmetric||T;X=E.vmetric?G[1]:D*.5,X=-X*R;const Y=G[2]*R;D=G?-G[0]:D,C=X/k,b=(y+Y)/k}else C=y/k,b=0;(E.isInFont||m.missingFile)&&(x.xcoords.push(x.x+C),j&&x.ycoords.push(-x.y+b),x.tspan.textContent+=F);let U;j?U=D*R-S*K:U=D*R+S*K,y+=U}x.tspan.setAttributeNS(null,"x",x.xcoords.map(n).join(" ")),j?x.tspan.setAttributeNS(null,"y",x.ycoords.map(n).join(" ")):x.tspan.setAttributeNS(null,"y",n(-x.y)),j?x.y-=y:x.x+=y*M,x.tspan.setAttributeNS(null,"font-family",x.fontFamily),x.tspan.setAttributeNS(null,"font-size",`${n(x.fontSize)}px`),x.fontStyle!==f.fontStyle&&x.tspan.setAttributeNS(null,"font-style",x.fontStyle),x.fontWeight!==f.fontWeight&&x.tspan.setAttributeNS(null,"font-weight",x.fontWeight);const p=x.textRenderingMode&de.TextRenderingMode.FILL_STROKE_MASK;if(p===de.TextRenderingMode.FILL||p===de.TextRenderingMode.FILL_STROKE?(x.fillColor!==f.fillColor&&x.tspan.setAttributeNS(null,"fill",x.fillColor),x.fillAlpha<1&&x.tspan.setAttributeNS(null,"fill-opacity",x.fillAlpha)):x.textRenderingMode===de.TextRenderingMode.ADD_TO_PATH?x.tspan.setAttributeNS(null,"fill","transparent"):x.tspan.setAttributeNS(null,"fill","none"),p===de.TextRenderingMode.STROKE||p===de.TextRenderingMode.FILL_STROKE){const E=1/(x.textMatrixScale||1);this._setStrokeAttributes(x.tspan,E)}let P=x.textMatrix;x.textRise!==0&&(P=P.slice(),P[5]+=x.textRise),x.txtElement.setAttributeNS(null,"transform",`${l(P)} scale(${n(M)}, -1)`),x.txtElement.setAttributeNS(h,"xml:space","preserve"),x.txtElement.append(x.tspan),x.txtgrp.append(x.txtElement),this._ensureTransformGroup().append(x.txtElement)}setLeadingMoveText(g,x){this.setLeading(-x),this.moveText(g,x)}addFontStyle(g){if(!g.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const x=s(g.data,g.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${g.loadedName}"; src: url(${x}); }
`}setFont(g){const x=this.current,m=this.commonObjs.get(g[0]);let A=g[1];x.font=m,this.embedFonts&&!m.missingFile&&!this.embeddedFonts[m.loadedName]&&(this.addFontStyle(m),this.embeddedFonts[m.loadedName]=m),x.fontMatrix=m.fontMatrix||de.FONT_IDENTITY_MATRIX;let k="normal";m.black?k="900":m.bold&&(k="bold");const v=m.italic?"italic":"normal";A<0?(A=-A,x.fontDirection=-1):x.fontDirection=1,x.fontSize=A,x.fontFamily=m.loadedName,x.fontWeight=k,x.fontStyle=v,x.tspan=this.svgFactory.createElement("svg:tspan"),x.tspan.setAttributeNS(null,"y",n(-x.y)),x.xcoords=[],x.ycoords=[]}endText(){var x;const g=this.current;g.textRenderingMode&de.TextRenderingMode.ADD_TO_PATH_FLAG&&((x=g.txtElement)!=null&&x.hasChildNodes())&&(g.element=g.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(g){g>0&&(this.current.lineWidth=g)}setLineCap(g){this.current.lineCap=o[g]}setLineJoin(g){this.current.lineJoin=c[g]}setMiterLimit(g){this.current.miterLimit=g}setStrokeAlpha(g){this.current.strokeAlpha=g}setStrokeRGBColor(g,x,m){this.current.strokeColor=de.Util.makeHexColor(g,x,m)}setFillAlpha(g){this.current.fillAlpha=g}setFillRGBColor(g,x,m){this.current.fillColor=de.Util.makeHexColor(g,x,m),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(g){this.current.strokeColor=this._makeColorN_Pattern(g)}setFillColorN(g){this.current.fillColor=this._makeColorN_Pattern(g)}shadingFill(g){const x=this.viewport.width,m=this.viewport.height,A=de.Util.inverseTransform(this.transformMatrix),k=de.Util.applyTransform([0,0],A),v=de.Util.applyTransform([0,m],A),_=de.Util.applyTransform([x,0],A),K=de.Util.applyTransform([x,m],A),M=Math.min(k[0],v[0],_[0],K[0]),j=Math.min(k[1],v[1],_[1],K[1]),O=Math.max(k[0],v[0],_[0],K[0]),T=Math.max(k[1],v[1],_[1],K[1]),R=this.svgFactory.createElement("svg:rect");R.setAttributeNS(null,"x",M),R.setAttributeNS(null,"y",j),R.setAttributeNS(null,"width",O-M),R.setAttributeNS(null,"height",T-j),R.setAttributeNS(null,"fill",this._makeShadingPattern(g)),this.current.fillAlpha<1&&R.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(R)}_makeColorN_Pattern(g){return g[0]==="TilingPattern"?this._makeTilingPattern(g):this._makeShadingPattern(g)}_makeTilingPattern(g){const x=g[1],m=g[2],A=g[3]||de.IDENTITY_MATRIX,[k,v,_,K]=g[4],M=g[5],j=g[6],O=g[7],T=`shading${i++}`,[R,y,p,P]=de.Util.normalizeRect([...de.Util.applyTransform([k,v],A),...de.Util.applyTransform([_,K],A)]),[E,S]=de.Util.singularValueDecompose2dScale(A),F=M*E,C=j*S,b=this.svgFactory.createElement("svg:pattern");b.setAttributeNS(null,"id",T),b.setAttributeNS(null,"patternUnits","userSpaceOnUse"),b.setAttributeNS(null,"width",F),b.setAttributeNS(null,"height",C),b.setAttributeNS(null,"x",`${R}`),b.setAttributeNS(null,"y",`${y}`);const D=this.svg,U=this.transformMatrix,X=this.current.fillColor,G=this.current.strokeColor,Y=this.svgFactory.create(p-R,P-y);if(this.svg=Y,this.transformMatrix=A,O===2){const N=de.Util.makeHexColor(...x);this.current.fillColor=N,this.current.strokeColor=N}return this.executeOpTree(this.convertOpList(m)),this.svg=D,this.transformMatrix=U,this.current.fillColor=X,this.current.strokeColor=G,b.append(Y.childNodes[0]),this.defs.append(b),`url(#${T})`}_makeShadingPattern(g){switch(typeof g=="string"&&(g=this.objs.get(g)),g[0]){case"RadialAxial":const x=`shading${i++}`,m=g[3];let A;switch(g[1]){case"axial":const k=g[4],v=g[5];A=this.svgFactory.createElement("svg:linearGradient"),A.setAttributeNS(null,"id",x),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"x1",k[0]),A.setAttributeNS(null,"y1",k[1]),A.setAttributeNS(null,"x2",v[0]),A.setAttributeNS(null,"y2",v[1]);break;case"radial":const _=g[4],K=g[5],M=g[6],j=g[7];A=this.svgFactory.createElement("svg:radialGradient"),A.setAttributeNS(null,"id",x),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"cx",K[0]),A.setAttributeNS(null,"cy",K[1]),A.setAttributeNS(null,"r",j),A.setAttributeNS(null,"fx",_[0]),A.setAttributeNS(null,"fy",_[1]),A.setAttributeNS(null,"fr",M);break;default:throw new Error(`Unknown RadialAxial type: ${g[1]}`)}for(const k of m){const v=this.svgFactory.createElement("svg:stop");v.setAttributeNS(null,"offset",k[0]),v.setAttributeNS(null,"stop-color",k[1]),A.append(v)}return this.defs.append(A),`url(#${x})`;case"Mesh":return(0,de.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${g[0]}`)}}setDash(g,x){this.current.dashArray=g,this.current.dashPhase=x}constructPath(g,x){const m=this.current;let A=m.x,k=m.y,v=[],_=0;for(const K of g)switch(K|0){case de.OPS.rectangle:A=x[_++],k=x[_++];const M=x[_++],j=x[_++],O=A+M,T=k+j;v.push("M",n(A),n(k),"L",n(O),n(k),"L",n(O),n(T),"L",n(A),n(T),"Z");break;case de.OPS.moveTo:A=x[_++],k=x[_++],v.push("M",n(A),n(k));break;case de.OPS.lineTo:A=x[_++],k=x[_++],v.push("L",n(A),n(k));break;case de.OPS.curveTo:A=x[_+4],k=x[_+5],v.push("C",n(x[_]),n(x[_+1]),n(x[_+2]),n(x[_+3]),n(A),n(k)),_+=6;break;case de.OPS.curveTo2:v.push("C",n(A),n(k),n(x[_]),n(x[_+1]),n(x[_+2]),n(x[_+3])),A=x[_+2],k=x[_+3],_+=4;break;case de.OPS.curveTo3:A=x[_+2],k=x[_+3],v.push("C",n(x[_]),n(x[_+1]),n(A),n(k),n(A),n(k)),_+=4;break;case de.OPS.closePath:v.push("Z");break}v=v.join(" "),m.path&&g.length>0&&g[0]!==de.OPS.rectangle&&g[0]!==de.OPS.moveTo?v=m.path.getAttributeNS(null,"d")+v:(m.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(m.path)),m.path.setAttributeNS(null,"d",v),m.path.setAttributeNS(null,"fill","none"),m.element=m.path,m.setCurrentPoint(A,k)}endPath(){const g=this.current;if(g.path=null,!this.pendingClip)return;if(!g.element){this.pendingClip=null;return}const x=`clippath${u++}`,m=this.svgFactory.createElement("svg:clipPath");m.setAttributeNS(null,"id",x),m.setAttributeNS(null,"transform",l(this.transformMatrix));const A=g.element.cloneNode(!0);if(this.pendingClip==="evenodd"?A.setAttributeNS(null,"clip-rule","evenodd"):A.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,m.append(A),this.defs.append(m),g.activeClipUrl){g.clipGroup=null;for(const k of this.extraStack)k.clipGroup=null;m.setAttributeNS(null,"clip-path",g.activeClipUrl)}g.activeClipUrl=`url(#${x})`,this.tgrp=null}clip(g){this.pendingClip=g}closePath(){const g=this.current;if(g.path){const x=`${g.path.getAttributeNS(null,"d")}Z`;g.path.setAttributeNS(null,"d",x)}}setLeading(g){this.current.leading=-g}setTextRise(g){this.current.textRise=g}setTextRenderingMode(g){this.current.textRenderingMode=g}setHScale(g){this.current.textHScale=g/100}setRenderingIntent(g){}setFlatness(g){}setGState(g){for(const[x,m]of g)switch(x){case"LW":this.setLineWidth(m);break;case"LC":this.setLineCap(m);break;case"LJ":this.setLineJoin(m);break;case"ML":this.setMiterLimit(m);break;case"D":this.setDash(m[0],m[1]);break;case"RI":this.setRenderingIntent(m);break;case"FL":this.setFlatness(m);break;case"Font":this.setFont(m);break;case"CA":this.setStrokeAlpha(m);break;case"ca":this.setFillAlpha(m);break;default:(0,de.warn)(`Unimplemented graphic state operator ${x}`);break}}fill(){const g=this.current;g.element&&(g.element.setAttributeNS(null,"fill",g.fillColor),g.element.setAttributeNS(null,"fill-opacity",g.fillAlpha),this.endPath())}stroke(){const g=this.current;g.element&&(this._setStrokeAttributes(g.element),g.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(g,x=1){const m=this.current;let A=m.dashArray;x!==1&&A.length>0&&(A=A.map(function(k){return x*k})),g.setAttributeNS(null,"stroke",m.strokeColor),g.setAttributeNS(null,"stroke-opacity",m.strokeAlpha),g.setAttributeNS(null,"stroke-miterlimit",n(m.miterLimit)),g.setAttributeNS(null,"stroke-linecap",m.lineCap),g.setAttributeNS(null,"stroke-linejoin",m.lineJoin),g.setAttributeNS(null,"stroke-width",n(x*m.lineWidth)+"px"),g.setAttributeNS(null,"stroke-dasharray",A.map(n).join(" ")),g.setAttributeNS(null,"stroke-dashoffset",n(x*m.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y","0"),g.setAttributeNS(null,"width","1px"),g.setAttributeNS(null,"height","1px"),g.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(g)}paintImageXObject(g){const x=g.startsWith("g_")?this.commonObjs.get(g):this.objs.get(g);if(!x){(0,de.warn)(`Dependent image with object ID ${g} is not ready yet`);return}this.paintInlineImageXObject(x)}paintInlineImageXObject(g,x){const m=g.width,A=g.height,k=e(g,this.forceDataSchema,!!x),v=this.svgFactory.createElement("svg:rect");v.setAttributeNS(null,"x","0"),v.setAttributeNS(null,"y","0"),v.setAttributeNS(null,"width",n(m)),v.setAttributeNS(null,"height",n(A)),this.current.element=v,this.clip("nonzero");const _=this.svgFactory.createElement("svg:image");_.setAttributeNS(t,"xlink:href",k),_.setAttributeNS(null,"x","0"),_.setAttributeNS(null,"y",n(-A)),_.setAttributeNS(null,"width",n(m)+"px"),_.setAttributeNS(null,"height",n(A)+"px"),_.setAttributeNS(null,"transform",`scale(${n(1/m)} ${n(-1/A)})`),x?x.append(_):this._ensureTransformGroup().append(_)}paintImageMaskXObject(g){const x=this.current,m=g.width,A=g.height,k=x.fillColor;x.maskId=`mask${d++}`;const v=this.svgFactory.createElement("svg:mask");v.setAttributeNS(null,"id",x.maskId);const _=this.svgFactory.createElement("svg:rect");_.setAttributeNS(null,"x","0"),_.setAttributeNS(null,"y","0"),_.setAttributeNS(null,"width",n(m)),_.setAttributeNS(null,"height",n(A)),_.setAttributeNS(null,"fill",k),_.setAttributeNS(null,"mask",`url(#${x.maskId})`),this.defs.append(v),this._ensureTransformGroup().append(_),this.paintInlineImageXObject(g,v)}paintFormXObjectBegin(g,x){if(Array.isArray(g)&&g.length===6&&this.transform(g[0],g[1],g[2],g[3],g[4],g[5]),x){const m=x[2]-x[0],A=x[3]-x[1],k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x",x[0]),k.setAttributeNS(null,"y",x[1]),k.setAttributeNS(null,"width",n(m)),k.setAttributeNS(null,"height",n(A)),this.current.element=k,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(g){const x=this.svgFactory.create(g.width,g.height),m=this.svgFactory.createElement("svg:defs");x.append(m),this.defs=m;const A=this.svgFactory.createElement("svg:g");return A.setAttributeNS(null,"transform",l(g.transform)),x.append(A),this.svg=A,x}_ensureClipGroup(){if(!this.current.clipGroup){const g=this.svgFactory.createElement("svg:g");g.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(g),this.current.clipGroup=g}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",l(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.PDFNodeStream=void 0;var pe=Be(1),de=Be(33);const De=require$$2,ge=require$$2,f=require$$2,h=require$$2,t=/^file:\/\/\/[a-zA-Z]:\//;function o(d){const i=h.parse(d);return i.protocol==="file:"||i.host?i:/^[a-z]:[/\\]/i.test(d)?h.parse(`file:///${d}`):(i.host||(i.protocol="file:"),i)}class c{constructor(i){this.source=i,this.url=o(i.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&i.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var i;return((i=this._fullRequestReader)==null?void 0:i._loaded)??0}getFullReader(){return(0,pe.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new l(this):new r(this),this._fullRequestReader}getRangeReader(i,g){if(g<=this._progressiveDataLength)return null;const x=this.isFsUrl?new u(this,i,g):new n(this,i,g);return this._rangeRequestReaders.push(x),x}cancelAllRequests(i){this._fullRequestReader&&this._fullRequestReader.cancel(i);for(const g of this._rangeRequestReaders.slice(0))g.cancel(i)}}V.PDFNodeStream=c;class s{constructor(i){this._url=i.url,this._done=!1,this._storedError=null,this.onProgress=null;const g=i.source;this._contentLength=g.length,this._loaded=0,this._filename=null,this._disableRange=g.disableRange||!1,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!g.disableStream,this._isRangeSupported=!g.disableRange,this._readableStream=null,this._readCapability=(0,pe.createPromiseCapability)(),this._headersCapability=(0,pe.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const i=this._readableStream.read();return i===null?(this._readCapability=(0,pe.createPromiseCapability)(),this.read()):(this._loaded+=i.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(i).buffer,done:!1})}cancel(i){if(!this._readableStream){this._error(i);return}this._readableStream.destroy(i)}_error(i){this._storedError=i,this._readCapability.resolve()}_setReadableStream(i){this._readableStream=i,i.on("readable",()=>{this._readCapability.resolve()}),i.on("end",()=>{i.destroy(),this._done=!0,this._readCapability.resolve()}),i.on("error",g=>{this._error(g)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new pe.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class e{constructor(i){this._url=i.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,pe.createPromiseCapability)();const g=i.source;this._isStreamingSupported=!g.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const i=this._readableStream.read();return i===null?(this._readCapability=(0,pe.createPromiseCapability)(),this.read()):(this._loaded+=i.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(i).buffer,done:!1})}cancel(i){if(!this._readableStream){this._error(i);return}this._readableStream.destroy(i)}_error(i){this._storedError=i,this._readCapability.resolve()}_setReadableStream(i){this._readableStream=i,i.on("readable",()=>{this._readCapability.resolve()}),i.on("end",()=>{i.destroy(),this._done=!0,this._readCapability.resolve()}),i.on("error",g=>{this._error(g)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function a(d,i){return{protocol:d.protocol,auth:d.auth,host:d.hostname,port:d.port,path:d.path,method:"GET",headers:i}}class r extends s{constructor(i){super(i);const g=x=>{if(x.statusCode===404){const v=new pe.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=v,this._headersCapability.reject(v);return}this._headersCapability.resolve(),this._setReadableStream(x);const m=v=>this._readableStream.headers[v.toLowerCase()],{allowRangeRequests:A,suggestedLength:k}=(0,de.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:i.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=A,this._contentLength=k||this._contentLength,this._filename=(0,de.extractFilenameFromHeader)(m)};this._request=null,this._url.protocol==="http:"?this._request=ge.request(a(this._url,i.httpHeaders),g):this._request=f.request(a(this._url,i.httpHeaders),g),this._request.on("error",x=>{this._storedError=x,this._headersCapability.reject(x)}),this._request.end()}}class n extends e{constructor(i,g,x){super(i),this._httpHeaders={};for(const A in i.httpHeaders){const k=i.httpHeaders[A];typeof k>"u"||(this._httpHeaders[A]=k)}this._httpHeaders.Range=`bytes=${g}-${x-1}`;const m=A=>{if(A.statusCode===404){const k=new pe.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=k;return}this._setReadableStream(A)};this._request=null,this._url.protocol==="http:"?this._request=ge.request(a(this._url,this._httpHeaders),m):this._request=f.request(a(this._url,this._httpHeaders),m),this._request.on("error",A=>{this._storedError=A}),this._request.end()}}class l extends s{constructor(i){super(i);let g=decodeURIComponent(this._url.path);t.test(this._url.href)&&(g=g.replace(/^\//,"")),De.lstat(g,(x,m)=>{if(x){x.code==="ENOENT"&&(x=new pe.MissingPDFException(`Missing PDF "${g}".`)),this._storedError=x,this._headersCapability.reject(x);return}this._contentLength=m.size,this._setReadableStream(De.createReadStream(g)),this._headersCapability.resolve()})}}class u extends e{constructor(i,g,x){super(i);let m=decodeURIComponent(this._url.path);t.test(this._url.href)&&(m=m.replace(/^\//,"")),this._setReadableStream(De.createReadStream(m,{start:g,end:x-1}))}}},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.createResponseStatusError=h,V.extractFilenameFromHeader=f,V.validateRangeRequestCapabilities=ge,V.validateResponseStatus=t;var pe=Be(1),de=Be(34),De=Be(8);function ge({getResponseHeader:o,isHttp:c,rangeChunkSize:s,disableRange:e}){const a={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(o("Content-Length"),10);return!Number.isInteger(r)||(a.suggestedLength=r,r<=2*s)||e||!c||o("Accept-Ranges")!=="bytes"||(o("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function f(o){const c=o("Content-Disposition");if(c){let s=(0,de.getFilenameFromContentDispositionHeader)(c);if(s.includes("%"))try{s=decodeURIComponent(s)}catch{}if((0,De.isPdfFile)(s))return s}return null}function h(o,c){return o===404||o===0&&c.startsWith("file:")?new pe.MissingPDFException('Missing PDF "'+c+'".'):new pe.UnexpectedResponseException(`Unexpected server response (${o}) while retrieving PDF "${c}".`,o)}function t(o){return o===200||o===206}},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.getFilenameFromContentDispositionHeader=de;var pe=Be(1);function de(De){let ge=!0,f=h("filename\\*","i").exec(De);if(f){f=f[1];let r=s(f);return r=unescape(r),r=e(r),r=a(r),o(r)}if(f=c(De),f){const r=a(f);return o(r)}if(f=h("filename","i").exec(De),f){f=f[1];let r=s(f);return r=a(r),o(r)}function h(r,n){return new RegExp("(?:^|;)\\s*"+r+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',n)}function t(r,n){if(r){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const l=new TextDecoder(r,{fatal:!0}),u=(0,pe.stringToBytes)(n);n=l.decode(u),ge=!1}catch{}}return n}function o(r){return ge&&/[\x80-\xff]/.test(r)&&(r=t("utf-8",r),ge&&(r=t("iso-8859-1",r))),r}function c(r){const n=[];let l;const u=h("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(l=u.exec(r))!==null;){let[,i,g,x]=l;if(i=parseInt(i,10),i in n){if(i===0)break;continue}n[i]=[g,x]}const d=[];for(let i=0;i<n.length&&i in n;++i){let[g,x]=n[i];x=s(x),g&&(x=unescape(x),i===0&&(x=e(x))),d.push(x)}return d.join("")}function s(r){if(r.startsWith('"')){const n=r.slice(1).split('\\"');for(let l=0;l<n.length;++l){const u=n[l].indexOf('"');u!==-1&&(n[l]=n[l].slice(0,u),n.length=l+1),n[l]=n[l].replace(/\\(.)/g,"$1")}r=n.join('"')}return r}function e(r){const n=r.indexOf("'");if(n===-1)return r;const l=r.slice(0,n),d=r.slice(n+1).replace(/^[^']*'/,"");return t(l,d)}function a(r){return!r.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(r)?r:r.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(n,l,u,d){if(u==="q"||u==="Q")return d=d.replace(/_/g," "),d=d.replace(/=([0-9a-fA-F]{2})/g,function(i,g){return String.fromCharCode(parseInt(g,16))}),t(l,d);try{d=atob(d)}catch{}return t(l,d)})}return""}},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.PDFNetworkStream=void 0;var pe=Be(1),de=Be(33);const De=200,ge=206;function f(s){const e=s.response;return typeof e!="string"?e:(0,pe.stringToBytes)(e).buffer}class h{constructor(e,a={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&a.httpHeaders||Object.create(null),this.withCredentials=a.withCredentials||!1,this.getXhr=a.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,a,r){const n={begin:e,end:a};for(const l in r)n[l]=r[l];return this.request(n)}requestFull(e){return this.request(e)}request(e){const a=this.getXhr(),r=this.currXhrId++,n=this.pendingRequests[r]={xhr:a};a.open("GET",this.url),a.withCredentials=this.withCredentials;for(const l in this.httpHeaders){const u=this.httpHeaders[l];typeof u>"u"||a.setRequestHeader(l,u)}return this.isHttp&&"begin"in e&&"end"in e?(a.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),n.expectedStatus=ge):n.expectedStatus=De,a.responseType="arraybuffer",e.onError&&(a.onerror=function(l){e.onError(a.status)}),a.onreadystatechange=this.onStateChange.bind(this,r),a.onprogress=this.onProgress.bind(this,r),n.onHeadersReceived=e.onHeadersReceived,n.onDone=e.onDone,n.onError=e.onError,n.onProgress=e.onProgress,a.send(null),r}onProgress(e,a){var n;const r=this.pendingRequests[e];r&&((n=r.onProgress)==null||n.call(r,a))}onStateChange(e,a){var i,g,x;const r=this.pendingRequests[e];if(!r)return;const n=r.xhr;if(n.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),n.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],n.status===0&&this.isHttp){(i=r.onError)==null||i.call(r,n.status);return}const l=n.status||De;if(!(l===De&&r.expectedStatus===ge)&&l!==r.expectedStatus){(g=r.onError)==null||g.call(r,n.status);return}const d=f(n);if(l===ge){const m=n.getResponseHeader("Content-Range"),A=/bytes (\d+)-(\d+)\/(\d+)/.exec(m);r.onDone({begin:parseInt(A[1],10),chunk:d})}else d?r.onDone({begin:0,chunk:d}):(x=r.onError)==null||x.call(r,n.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const a=this.pendingRequests[e].xhr;delete this.pendingRequests[e],a.abort()}}class t{constructor(e){this._source=e,this._manager=new h(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const a=this._rangeRequestReaders.indexOf(e);a>=0&&this._rangeRequestReaders.splice(a,1)}getFullReader(){return(0,pe.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new o(this._manager,this._source),this._fullRequestReader}getRangeReader(e,a){const r=new c(this._manager,e,a);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var a;(a=this._fullRequestReader)==null||a.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}V.PDFNetworkStream=t;class o{constructor(e,a){this._manager=e;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=a.url,this._fullRequestId=e.requestFull(r),this._headersReceivedCapability=(0,pe.createPromiseCapability)(),this._disableRange=a.disableRange||!1,this._contentLength=a.length,this._rangeChunkSize=a.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,a=this._manager.getRequestXhr(e),r=u=>a.getResponseHeader(u),{allowRangeRequests:n,suggestedLength:l}=(0,de.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=(0,de.extractFilenameFromHeader)(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=(0,de.createResponseStatusError)(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const a of this._requests)a.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var a;(a=this.onProgress)==null||a.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=(0,pe.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class c{constructor(e,a,r){this._manager=e;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(a,r,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const a=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:a,done:!1}):this._queuedChunk=a,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=(0,de.createResponseStatusError)(e,this._url);for(const a of this._requests)a.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var a;this.isStreamingSupported||(a=this.onProgress)==null||a.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,pe.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(Me,V,Be)=>{Object.defineProperty(V,"__esModule",{value:!0}),V.PDFFetchStream=void 0;var pe=Be(1),de=Be(33);function De(o,c,s){return{method:"GET",headers:o,signal:s.signal,mode:"cors",credentials:c?"include":"same-origin",redirect:"follow"}}function ge(o){const c=new Headers;for(const s in o){const e=o[s];typeof e>"u"||c.append(s,e)}return c}class f{constructor(c){this.source=c,this.isHttp=/^https?:/i.test(c.url),this.httpHeaders=this.isHttp&&c.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var c;return((c=this._fullRequestReader)==null?void 0:c._loaded)??0}getFullReader(){return(0,pe.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h(this),this._fullRequestReader}getRangeReader(c,s){if(s<=this._progressiveDataLength)return null;const e=new t(this,c,s);return this._rangeRequestReaders.push(e),e}cancelAllRequests(c){this._fullRequestReader&&this._fullRequestReader.cancel(c);for(const s of this._rangeRequestReaders.slice(0))s.cancel(c)}}V.PDFFetchStream=f;class h{constructor(c){this._stream=c,this._reader=null,this._loaded=0,this._filename=null;const s=c.source;this._withCredentials=s.withCredentials||!1,this._contentLength=s.length,this._headersCapability=(0,pe.createPromiseCapability)(),this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._headers=ge(this._stream.httpHeaders);const e=s.url;fetch(e,De(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!(0,de.validateResponseStatus)(a.status))throw(0,de.createResponseStatusError)(a.status,e);this._reader=a.body.getReader(),this._headersCapability.resolve();const r=u=>a.headers.get(u),{allowRangeRequests:n,suggestedLength:l}=(0,de.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=n,this._contentLength=l||this._contentLength,this._filename=(0,de.extractFilenameFromHeader)(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new pe.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:c,done:s}=await this._reader.read();return s?{value:c,done:s}:(this._loaded+=c.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){this._reader&&this._reader.cancel(c),this._abortController.abort()}}class t{constructor(c,s,e){this._stream=c,this._reader=null,this._loaded=0;const a=c.source;this._withCredentials=a.withCredentials||!1,this._readCapability=(0,pe.createPromiseCapability)(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController,this._headers=ge(this._stream.httpHeaders),this._headers.append("Range",`bytes=${s}-${e-1}`);const r=a.url;fetch(r,De(this._headers,this._withCredentials,this._abortController)).then(n=>{if(!(0,de.validateResponseStatus)(n.status))throw(0,de.createResponseStatusError)(n.status,r);this._readCapability.resolve(),this._reader=n.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:c,done:s}=await this._reader.read();return s?{value:c,done:s}:(this._loaded+=c.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){this._reader&&this._reader.cancel(c),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(Me){var V=__webpack_module_cache__[Me];if(V!==void 0)return V.exports;var Be=__webpack_module_cache__[Me]={exports:{}};return __webpack_modules__[Me](Be,Be.exports,__w_pdfjs_require__),Be.exports}var __webpack_exports__={};return(()=>{var Me=__webpack_exports__;Object.defineProperty(Me,"__esModule",{value:!0}),Object.defineProperty(Me,"AnnotationEditorLayer",{enumerable:!0,get:function(){return de.AnnotationEditorLayer}}),Object.defineProperty(Me,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return V.AnnotationEditorParamsType}}),Object.defineProperty(Me,"AnnotationEditorType",{enumerable:!0,get:function(){return V.AnnotationEditorType}}),Object.defineProperty(Me,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return De.AnnotationEditorUIManager}}),Object.defineProperty(Me,"AnnotationLayer",{enumerable:!0,get:function(){return ge.AnnotationLayer}}),Object.defineProperty(Me,"AnnotationMode",{enumerable:!0,get:function(){return V.AnnotationMode}}),Object.defineProperty(Me,"CMapCompressionType",{enumerable:!0,get:function(){return V.CMapCompressionType}}),Object.defineProperty(Me,"GlobalWorkerOptions",{enumerable:!0,get:function(){return f.GlobalWorkerOptions}}),Object.defineProperty(Me,"InvalidPDFException",{enumerable:!0,get:function(){return V.InvalidPDFException}}),Object.defineProperty(Me,"LoopbackPort",{enumerable:!0,get:function(){return Be.LoopbackPort}}),Object.defineProperty(Me,"MissingPDFException",{enumerable:!0,get:function(){return V.MissingPDFException}}),Object.defineProperty(Me,"OPS",{enumerable:!0,get:function(){return V.OPS}}),Object.defineProperty(Me,"PDFDataRangeTransport",{enumerable:!0,get:function(){return Be.PDFDataRangeTransport}}),Object.defineProperty(Me,"PDFDateString",{enumerable:!0,get:function(){return pe.PDFDateString}}),Object.defineProperty(Me,"PDFWorker",{enumerable:!0,get:function(){return Be.PDFWorker}}),Object.defineProperty(Me,"PasswordResponses",{enumerable:!0,get:function(){return V.PasswordResponses}}),Object.defineProperty(Me,"PermissionFlag",{enumerable:!0,get:function(){return V.PermissionFlag}}),Object.defineProperty(Me,"PixelsPerInch",{enumerable:!0,get:function(){return pe.PixelsPerInch}}),Object.defineProperty(Me,"RenderingCancelledException",{enumerable:!0,get:function(){return pe.RenderingCancelledException}}),Object.defineProperty(Me,"SVGGraphics",{enumerable:!0,get:function(){return o.SVGGraphics}}),Object.defineProperty(Me,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return V.UNSUPPORTED_FEATURES}}),Object.defineProperty(Me,"UnexpectedResponseException",{enumerable:!0,get:function(){return V.UnexpectedResponseException}}),Object.defineProperty(Me,"Util",{enumerable:!0,get:function(){return V.Util}}),Object.defineProperty(Me,"VerbosityLevel",{enumerable:!0,get:function(){return V.VerbosityLevel}}),Object.defineProperty(Me,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(Me,"build",{enumerable:!0,get:function(){return Be.build}}),Object.defineProperty(Me,"createPromiseCapability",{enumerable:!0,get:function(){return V.createPromiseCapability}}),Object.defineProperty(Me,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return V.createValidAbsoluteUrl}}),Object.defineProperty(Me,"getDocument",{enumerable:!0,get:function(){return Be.getDocument}}),Object.defineProperty(Me,"getFilenameFromUrl",{enumerable:!0,get:function(){return pe.getFilenameFromUrl}}),Object.defineProperty(Me,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return pe.getPdfFilenameFromUrl}}),Object.defineProperty(Me,"getXfaPageViewport",{enumerable:!0,get:function(){return pe.getXfaPageViewport}}),Object.defineProperty(Me,"isPdfFile",{enumerable:!0,get:function(){return pe.isPdfFile}}),Object.defineProperty(Me,"loadScript",{enumerable:!0,get:function(){return pe.loadScript}}),Object.defineProperty(Me,"renderTextLayer",{enumerable:!0,get:function(){return t.renderTextLayer}}),Object.defineProperty(Me,"shadow",{enumerable:!0,get:function(){return V.shadow}}),Object.defineProperty(Me,"version",{enumerable:!0,get:function(){return Be.version}});var V=__w_pdfjs_require__(1),Be=__w_pdfjs_require__(4),pe=__w_pdfjs_require__(8),de=__w_pdfjs_require__(22),De=__w_pdfjs_require__(7),ge=__w_pdfjs_require__(27),f=__w_pdfjs_require__(15),h=__w_pdfjs_require__(3),t=__w_pdfjs_require__(30),o=__w_pdfjs_require__(31),c=__w_pdfjs_require__(29);if(h.isNodeJS){const{PDFNodeStream:s}=__w_pdfjs_require__(32);(0,Be.setPDFNetworkStreamFactory)(e=>new s(e))}else{const{PDFNetworkStream:s}=__w_pdfjs_require__(35),{PDFFetchStream:e}=__w_pdfjs_require__(36);(0,Be.setPDFNetworkStreamFactory)(a=>(0,pe.isValidFetchUrl)(a.url)?new e(a):new s(a))}})(),__webpack_exports__})())})(pdf);var pdf_workerExports={},pdf_worker$1={get exports(){return pdf_workerExports},set exports(Me){pdf_workerExports=Me}};(function(Me,V){(function(pe,de){Me.exports=de()})(globalThis,()=>(()=>{var Be=[,(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.WorkerTask=f.WorkerMessageHandler=void 0;var t=h(2),o=h(5),c=h(6),s=h(8),e=h(71),a=h(65),r=h(4),n=h(102),l=h(103);class u{constructor(x){this.name=x,this.terminated=!1,this._capability=(0,t.createPromiseCapability)()}get finished(){return this._capability.promise}finish(){this._capability.resolve()}terminate(){this.terminated=!0}ensureNotTerminated(){if(this.terminated)throw new Error("Worker task was terminated")}}f.WorkerTask=u;class d{static setup(x,m){let A=!1;x.on("test",function(v){A||(A=!0,x.send("test",v instanceof Uint8Array))}),x.on("configure",function(v){(0,t.setVerbosityLevel)(v.verbosity)}),x.on("GetDocRequest",function(v){return d.createDocumentHandler(v,m)})}static createDocumentHandler(x,m){let A,k=!1,v=null;const _=[],K=(0,t.getVerbosityLevel)(),M=x.apiVersion,j="2.16.105";if(M!==j)throw new Error(`The API version "${M}" does not match the Worker version "${j}".`);const O=[];for(const D in[])O.push(D);if(O.length)throw new Error("The `Array.prototype` contains unexpected enumerable properties: "+O.join(", ")+"; thus breaking e.g. `for...in` iteration of `Array`s.");if(typeof ReadableStream>"u"){const D="The browser/environment lacks native support for critical functionality used by the PDF.js library (e.g. `ReadableStream`); ";throw r.isNodeJS?new Error(D+"please use a `legacy`-build instead."):new Error(D+"please update to a supported browser.")}const T=x.docId,R=x.docBaseUrl,y=x.docId+"_worker";let p=new n.MessageHandler(y,T,m);function P(){if(k)throw new Error("Worker was terminated")}function E(D){_.push(D)}function S(D){D.finish();const U=_.indexOf(D);_.splice(U,1)}async function F(D){await A.ensureDoc("checkHeader"),await A.ensureDoc("parseStartXRef"),await A.ensureDoc("parse",[D]),await A.ensureDoc("checkFirstPage",[D]),await A.ensureDoc("checkLastPage",[D]);const U=await A.ensureDoc("isPureXfa");if(U){const N=new u("loadXfaFonts");E(N),await Promise.all([A.loadXfaFonts(p,N).catch(I=>{}).then(()=>S(N)),A.loadXfaImages()])}const[X,G]=await Promise.all([A.ensureDoc("numPages"),A.ensureDoc("fingerprints")]),Y=U?await A.ensureDoc("htmlForXfa"):null;return{numPages:X,fingerprints:G,htmlForXfa:Y}}function C(D,U,X){const G=(0,t.createPromiseCapability)();let Y;const N=D.source;if(N.data){try{Y=new s.LocalPdfManager(T,N.data,N.password,p,U,X,R),G.resolve(Y)}catch(H){G.reject(H)}return G.promise}let I,L=[];try{I=new l.PDFWorkerStream(p)}catch(H){return G.reject(H),G.promise}const $=I.getFullReader();$.headersReady.then(function(){if(!$.isRangeSupported)return;const H=N.disableAutoFetch||$.isStreamingSupported;Y=new s.NetworkPdfManager(T,I,{msgHandler:p,password:N.password,length:$.contentLength,disableAutoFetch:H,rangeChunkSize:N.rangeChunkSize},U,X,R);for(const q of L)Y.sendProgressiveData(q);L=[],G.resolve(Y),v=null}).catch(function(H){G.reject(H),v=null});let W=0;const z=function(){const H=(0,t.arraysToBytes)(L);N.length&&H.length!==N.length&&(0,t.warn)("reported HTTP length is different from actual");try{Y=new s.LocalPdfManager(T,H,N.password,p,U,X,R),G.resolve(Y)}catch(q){G.reject(q)}L=[]};return new Promise(function(H,q){const Z=function({value:te,done:Q}){try{if(P(),Q){Y||z(),v=null;return}W+=(0,t.arrayByteLength)(te),$.isStreamingSupported||p.send("DocProgress",{loaded:W,total:Math.max(W,$.contentLength||0)}),Y?Y.sendProgressiveData(te):L.push(te),$.read().then(Z,q)}catch(ee){q(ee)}};$.read().then(Z,q)}).catch(function(H){G.reject(H),v=null}),v=function(H){I.cancelAllRequests(H)},G.promise}function b(D){function U(N){P(),p.send("GetDoc",{pdfInfo:N})}function X(N){if(P(),N instanceof t.PasswordException){const I=new u(`PasswordException: response ${N.code}`);E(I),p.sendWithPromise("PasswordRequest",N).then(function({password:L}){S(I),A.updatePassword(L),G()}).catch(function(){S(I),p.send("DocException",N)})}else N instanceof t.InvalidPDFException||N instanceof t.MissingPDFException||N instanceof t.UnexpectedResponseException||N instanceof t.UnknownErrorException?p.send("DocException",N):p.send("DocException",new t.UnknownErrorException(N.message,N.toString()))}function G(){P(),F(!1).then(U,function(N){if(P(),!(N instanceof c.XRefParseException)){X(N);return}A.requestLoadedStream(),A.onLoadedStream().then(function(){P(),F(!0).then(U,X)})})}P();const Y={maxImageSize:D.maxImageSize,disableFontFace:D.disableFontFace,ignoreErrors:D.ignoreErrors,isEvalSupported:D.isEvalSupported,fontExtraProperties:D.fontExtraProperties,useSystemFonts:D.useSystemFonts,cMapUrl:D.cMapUrl,standardFontDataUrl:D.standardFontDataUrl};C(D,Y,D.enableXfa).then(function(N){if(k)throw N.terminate(new t.AbortException("Worker was terminated.")),new Error("Worker was terminated");A=N,A.onLoadedStream().then(function(I){p.send("DataLoaded",{length:I.bytes.byteLength})})}).then(G,X)}return p.on("GetPage",function(U){return A.getPage(U.pageIndex).then(function(X){return Promise.all([A.ensure(X,"rotate"),A.ensure(X,"ref"),A.ensure(X,"userUnit"),A.ensure(X,"view")]).then(function([G,Y,N,I]){return{rotate:G,ref:Y,userUnit:N,view:I}})})}),p.on("GetPageIndex",function(U){const X=o.Ref.get(U.num,U.gen);return A.ensureCatalog("getPageIndex",[X])}),p.on("GetDestinations",function(U){return A.ensureCatalog("destinations")}),p.on("GetDestination",function(U){return A.ensureCatalog("getDestination",[U.id])}),p.on("GetPageLabels",function(U){return A.ensureCatalog("pageLabels")}),p.on("GetPageLayout",function(U){return A.ensureCatalog("pageLayout")}),p.on("GetPageMode",function(U){return A.ensureCatalog("pageMode")}),p.on("GetViewerPreferences",function(D){return A.ensureCatalog("viewerPreferences")}),p.on("GetOpenAction",function(D){return A.ensureCatalog("openAction")}),p.on("GetAttachments",function(U){return A.ensureCatalog("attachments")}),p.on("GetJavaScript",function(U){return A.ensureCatalog("javaScript")}),p.on("GetDocJSActions",function(U){return A.ensureCatalog("jsActions")}),p.on("GetPageJSActions",function({pageIndex:D}){return A.getPage(D).then(function(U){return A.ensure(U,"jsActions")})}),p.on("GetOutline",function(U){return A.ensureCatalog("documentOutline")}),p.on("GetOptionalContentConfig",function(D){return A.ensureCatalog("optionalContentConfig")}),p.on("GetPermissions",function(D){return A.ensureCatalog("permissions")}),p.on("GetMetadata",function(U){return Promise.all([A.ensureDoc("documentInfo"),A.ensureCatalog("metadata")])}),p.on("GetMarkInfo",function(U){return A.ensureCatalog("markInfo")}),p.on("GetData",function(U){return A.requestLoadedStream(),A.onLoadedStream().then(function(X){return X.bytes})}),p.on("GetAnnotations",function({pageIndex:D,intent:U}){return A.getPage(D).then(function(X){const G=new u(`GetAnnotations: page ${D}`);return E(G),X.getAnnotationsData(p,G,U).then(Y=>(S(G),Y),Y=>{S(G)})})}),p.on("GetFieldObjects",function(D){return A.ensureDoc("fieldObjects")}),p.on("HasJSActions",function(D){return A.ensureDoc("hasJSActions")}),p.on("GetCalculationOrderIds",function(D){return A.ensureDoc("calculationOrderIds")}),p.on("SaveDocument",function({isPureXfa:D,numPages:U,annotationStorage:X,filename:G}){A.requestLoadedStream();const Y=D?null:(0,c.getNewAnnotationsMap)(X),N=[A.onLoadedStream(),A.ensureCatalog("acroForm"),A.ensureCatalog("acroFormRef"),A.ensureDoc("xref"),A.ensureDoc("startXRef")];if(Y)for(const[I,L]of Y)N.push(A.getPage(I).then($=>{const W=new u(`Save (editor): page ${I}`);return $.saveNewAnnotations(p,W,L).finally(function(){S(W)})}));if(D)N.push(A.serializeXfaData(X));else for(let I=0;I<U;I++)N.push(A.getPage(I).then(function(L){const $=new u(`Save: page ${I}`);return L.save(p,$,X).finally(function(){S($)})}));return Promise.all(N).then(function([I,L,$,W,z,...B]){let H=[],q=null;if(D){if(q=B[0],!q)return I.bytes}else if(H=B.flat(2),H.length===0)return I.bytes;const Z=L instanceof o.Dict&&L.get("XFA")||null;let te=null,Q=!1;if(Array.isArray(Z)){for(let J=0,ne=Z.length;J<ne;J+=2)Z[J]==="datasets"&&(te=Z[J+1],$=null,Q=!0);te===null&&(te=W.getNewRef())}else Z&&($=null,(0,t.warn)("Unsupported XFA type."));let ee=Object.create(null);if(W.trailer){const J=Object.create(null),ne=W.trailer.get("Info")||null;ne instanceof o.Dict&&ne.forEach((re,ae)=>{typeof ae=="string"&&(J[re]=(0,t.stringToPDFString)(ae))}),ee={rootRef:W.trailer.getRaw("Root")||null,encryptRef:W.trailer.getRaw("Encrypt")||null,newRef:W.getNewRef(),infoRef:W.trailer.getRaw("Info")||null,info:J,fileIds:W.trailer.get("ID")||null,startXRef:z,filename:G}}return W.resetNewRef(),(0,a.incrementalUpdate)({originalData:I.bytes,xrefInfo:ee,newRefs:H,xref:W,hasXfa:!!Z,xfaDatasetsRef:te,hasXfaDatasetsEntry:Q,acroFormRef:$,acroForm:L,xfaData:q})})}),p.on("GetOperatorList",function(U,X){const G=U.pageIndex;A.getPage(G).then(function(Y){const N=new u(`GetOperatorList: page ${G}`);E(N);const I=K>=t.VerbosityLevel.INFOS?Date.now():0;Y.getOperatorList({handler:p,sink:X,task:N,intent:U.intent,cacheKey:U.cacheKey,annotationStorage:U.annotationStorage}).then(function(L){S(N),I&&(0,t.info)(`page=${G+1} - getOperatorList: time=${Date.now()-I}ms, len=${L.length}`),X.close()},function(L){S(N),!N.terminated&&(p.send("UnsupportedFeature",{featureId:t.UNSUPPORTED_FEATURES.errorOperatorList}),X.error(L))})})}),p.on("GetTextContent",function(U,X){const G=U.pageIndex;A.getPage(G).then(function(Y){const N=new u("GetTextContent: page "+G);E(N);const I=K>=t.VerbosityLevel.INFOS?Date.now():0;Y.extractTextContent({handler:p,task:N,sink:X,includeMarkedContent:U.includeMarkedContent,combineTextItems:U.combineTextItems}).then(function(){S(N),I&&(0,t.info)(`page=${G+1} - getTextContent: time=${Date.now()-I}ms`),X.close()},function(L){S(N),!N.terminated&&X.error(L)})})}),p.on("GetStructTree",function(U){return A.getPage(U.pageIndex).then(function(X){return A.ensure(X,"getStructTree")})}),p.on("FontFallback",function(D){return A.fontFallback(D.id,p)}),p.on("Cleanup",function(U){return A.cleanup(!0)}),p.on("Terminate",function(U){k=!0;const X=[];if(A){A.terminate(new t.AbortException("Worker was terminated."));const G=A.cleanup();X.push(G),A=null}else(0,e.clearGlobalCaches)();v&&v(new t.AbortException("Worker was terminated."));for(const G of _)X.push(G.finished),G.terminate();return Promise.all(X).then(function(){p.destroy(),p=null})}),p.on("Ready",function(U){b(x),x=null}),y}static initializeFromPort(x){const m=new n.MessageHandler("worker","main",x);d.setup(m,x),m.send("ready",null)}}f.WorkerMessageHandler=d;function i(g){return typeof g.postMessage=="function"&&"onmessage"in g}typeof window>"u"&&!r.isNodeJS&&typeof self<"u"&&i(self)&&d.initializeFromPort(self)},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.VerbosityLevel=f.Util=f.UnknownErrorException=f.UnexpectedResponseException=f.UNSUPPORTED_FEATURES=f.TextRenderingMode=f.StreamType=f.RenderingIntentFlag=f.PermissionFlag=f.PasswordResponses=f.PasswordException=f.PageActionEventType=f.OPS=f.MissingPDFException=f.LINE_FACTOR=f.LINE_DESCENT_FACTOR=f.InvalidPDFException=f.ImageKind=f.IDENTITY_MATRIX=f.FormatError=f.FontType=f.FeatureTest=f.FONT_IDENTITY_MATRIX=f.DocumentActionEventType=f.CMapCompressionType=f.BaseException=f.AnnotationType=f.AnnotationStateModelType=f.AnnotationReviewState=f.AnnotationReplyType=f.AnnotationMode=f.AnnotationMarkedState=f.AnnotationFlag=f.AnnotationFieldFlag=f.AnnotationEditorType=f.AnnotationEditorPrefix=f.AnnotationEditorParamsType=f.AnnotationBorderStyleType=f.AnnotationActionEventType=f.AbortException=void 0,f.arrayByteLength=ee,f.arraysToBytes=J,f.assert=G,f.bytesToString=te,f.createPromiseCapability=He,f.createValidAbsoluteUrl=N,f.escapeString=Pe,f.getModificationDate=Re,f.getVerbosityLevel=b,f.info=D,f.isArrayBuffer=ce,f.isArrayEqual=Te,f.isAscii=ue,f.objectFromMap=ae,f.objectSize=re,f.setVerbosityLevel=C,f.shadow=I,f.string32=ne,f.stringToBytes=Q,f.stringToPDFString=Fe,f.stringToUTF16BEString=ye,f.stringToUTF8String=le,f.unreachable=X,f.utf8StringToString=he,f.warn=U,h(3);const t=[1,0,0,1,0,0];f.IDENTITY_MATRIX=t;const o=[.001,0,0,.001,0,0];f.FONT_IDENTITY_MATRIX=o;const c=1.35;f.LINE_FACTOR=c;const s=.35;f.LINE_DESCENT_FACTOR=s;const e={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};f.RenderingIntentFlag=e;const a={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};f.AnnotationMode=a;const r="pdfjs_internal_editor_";f.AnnotationEditorPrefix=r;const n={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};f.AnnotationEditorType=n;const l={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};f.AnnotationEditorParamsType=l;const u={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};f.PermissionFlag=u;const d={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};f.TextRenderingMode=d;const i={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};f.ImageKind=i;const g={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};f.AnnotationType=g;const x={MARKED:"Marked",REVIEW:"Review"};f.AnnotationStateModelType=x;const m={MARKED:"Marked",UNMARKED:"Unmarked"};f.AnnotationMarkedState=m;const A={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};f.AnnotationReviewState=A;const k={GROUP:"Group",REPLY:"R"};f.AnnotationReplyType=k;const v={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};f.AnnotationFlag=v;const _={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};f.AnnotationFieldFlag=_;const K={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};f.AnnotationBorderStyleType=K;const M={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};f.AnnotationActionEventType=M;const j={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};f.DocumentActionEventType=j;const O={O:"PageOpen",C:"PageClose"};f.PageActionEventType=O;const T={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};f.StreamType=T;const R={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};f.FontType=R;const y={ERRORS:0,WARNINGS:1,INFOS:5};f.VerbosityLevel=y;const p={NONE:0,BINARY:1,STREAM:2};f.CMapCompressionType=p;const P={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};f.OPS=P;const E={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};f.UNSUPPORTED_FEATURES=E;const S={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};f.PasswordResponses=S;let F=y.WARNINGS;function C(Ce){Number.isInteger(Ce)&&(F=Ce)}function b(){return F}function D(Ce){F>=y.INFOS&&console.log(`Info: ${Ce}`)}function U(Ce){F>=y.WARNINGS&&console.log(`Warning: ${Ce}`)}function X(Ce){throw new Error(Ce)}function G(Ce,ve){Ce||X(ve)}function Y(Ce){if(!Ce)return!1;switch(Ce.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function N(Ce,ve=null,fe=null){if(!Ce)return null;try{if(fe&&typeof Ce=="string"){if(fe.addDefaultProtocol&&Ce.startsWith("www.")){const Ue=Ce.match(/\./g);Ue&&Ue.length>=2&&(Ce=`http://${Ce}`)}if(fe.tryConvertEncoding)try{Ce=le(Ce)}catch{}}const We=ve?new URL(Ce,ve):new URL(Ce);if(Y(We))return We}catch{}return null}function I(Ce,ve,fe){return Object.defineProperty(Ce,ve,{value:fe,enumerable:!0,configurable:!0,writable:!1}),fe}const L=function(){function ve(fe,We){this.constructor===ve&&X("Cannot initialize BaseException."),this.message=fe,this.name=We}return ve.prototype=new Error,ve.constructor=ve,ve}();f.BaseException=L;class $ extends L{constructor(ve,fe){super(ve,"PasswordException"),this.code=fe}}f.PasswordException=$;class W extends L{constructor(ve,fe){super(ve,"UnknownErrorException"),this.details=fe}}f.UnknownErrorException=W;class z extends L{constructor(ve){super(ve,"InvalidPDFException")}}f.InvalidPDFException=z;class B extends L{constructor(ve){super(ve,"MissingPDFException")}}f.MissingPDFException=B;class H extends L{constructor(ve,fe){super(ve,"UnexpectedResponseException"),this.status=fe}}f.UnexpectedResponseException=H;class q extends L{constructor(ve){super(ve,"FormatError")}}f.FormatError=q;class Z extends L{constructor(ve){super(ve,"AbortException")}}f.AbortException=Z;function te(Ce){(typeof Ce!="object"||Ce===null||Ce.length===void 0)&&X("Invalid argument for bytesToString");const ve=Ce.length,fe=8192;if(ve<fe)return String.fromCharCode.apply(null,Ce);const We=[];for(let Ue=0;Ue<ve;Ue+=fe){const ze=Math.min(Ue+fe,ve),tt=Ce.subarray(Ue,ze);We.push(String.fromCharCode.apply(null,tt))}return We.join("")}function Q(Ce){typeof Ce!="string"&&X("Invalid argument for stringToBytes");const ve=Ce.length,fe=new Uint8Array(ve);for(let We=0;We<ve;++We)fe[We]=Ce.charCodeAt(We)&255;return fe}function ee(Ce){if(Ce.length!==void 0)return Ce.length;if(Ce.byteLength!==void 0)return Ce.byteLength;X("Invalid argument for arrayByteLength")}function J(Ce){const ve=Ce.length;if(ve===1&&Ce[0]instanceof Uint8Array)return Ce[0];let fe=0;for(let ze=0;ze<ve;ze++)fe+=ee(Ce[ze]);let We=0;const Ue=new Uint8Array(fe);for(let ze=0;ze<ve;ze++){let tt=Ce[ze];tt instanceof Uint8Array||(typeof tt=="string"?tt=Q(tt):tt=new Uint8Array(tt));const Ne=tt.byteLength;Ue.set(tt,We),We+=Ne}return Ue}function ne(Ce){return String.fromCharCode(Ce>>24&255,Ce>>16&255,Ce>>8&255,Ce&255)}function re(Ce){return Object.keys(Ce).length}function ae(Ce){const ve=Object.create(null);for(const[fe,We]of Ce)ve[fe]=We;return ve}function se(){const Ce=new Uint8Array(4);return Ce[0]=1,new Uint32Array(Ce.buffer,0,1)[0]===1}function oe(){try{return new Function(""),!0}catch{return!1}}class me{static get isLittleEndian(){return I(this,"isLittleEndian",se())}static get isEvalSupported(){return I(this,"isEvalSupported",oe())}static get isOffscreenCanvasSupported(){return I(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}f.FeatureTest=me;const xe=[...Array(256).keys()].map(Ce=>Ce.toString(16).padStart(2,"0"));class Ae{static makeHexColor(ve,fe,We){return`#${xe[ve]}${xe[fe]}${xe[We]}`}static scaleMinMax(ve,fe){let We;ve[0]?(ve[0]<0&&(We=fe[0],fe[0]=fe[1],fe[1]=We),fe[0]*=ve[0],fe[1]*=ve[0],ve[3]<0&&(We=fe[2],fe[2]=fe[3],fe[3]=We),fe[2]*=ve[3],fe[3]*=ve[3]):(We=fe[0],fe[0]=fe[2],fe[2]=We,We=fe[1],fe[1]=fe[3],fe[3]=We,ve[1]<0&&(We=fe[2],fe[2]=fe[3],fe[3]=We),fe[2]*=ve[1],fe[3]*=ve[1],ve[2]<0&&(We=fe[0],fe[0]=fe[1],fe[1]=We),fe[0]*=ve[2],fe[1]*=ve[2]),fe[0]+=ve[4],fe[1]+=ve[4],fe[2]+=ve[5],fe[3]+=ve[5]}static transform(ve,fe){return[ve[0]*fe[0]+ve[2]*fe[1],ve[1]*fe[0]+ve[3]*fe[1],ve[0]*fe[2]+ve[2]*fe[3],ve[1]*fe[2]+ve[3]*fe[3],ve[0]*fe[4]+ve[2]*fe[5]+ve[4],ve[1]*fe[4]+ve[3]*fe[5]+ve[5]]}static applyTransform(ve,fe){const We=ve[0]*fe[0]+ve[1]*fe[2]+fe[4],Ue=ve[0]*fe[1]+ve[1]*fe[3]+fe[5];return[We,Ue]}static applyInverseTransform(ve,fe){const We=fe[0]*fe[3]-fe[1]*fe[2],Ue=(ve[0]*fe[3]-ve[1]*fe[2]+fe[2]*fe[5]-fe[4]*fe[3])/We,ze=(-ve[0]*fe[1]+ve[1]*fe[0]+fe[4]*fe[1]-fe[5]*fe[0])/We;return[Ue,ze]}static getAxialAlignedBoundingBox(ve,fe){const We=Ae.applyTransform(ve,fe),Ue=Ae.applyTransform(ve.slice(2,4),fe),ze=Ae.applyTransform([ve[0],ve[3]],fe),tt=Ae.applyTransform([ve[2],ve[1]],fe);return[Math.min(We[0],Ue[0],ze[0],tt[0]),Math.min(We[1],Ue[1],ze[1],tt[1]),Math.max(We[0],Ue[0],ze[0],tt[0]),Math.max(We[1],Ue[1],ze[1],tt[1])]}static inverseTransform(ve){const fe=ve[0]*ve[3]-ve[1]*ve[2];return[ve[3]/fe,-ve[1]/fe,-ve[2]/fe,ve[0]/fe,(ve[2]*ve[5]-ve[4]*ve[3])/fe,(ve[4]*ve[1]-ve[5]*ve[0])/fe]}static apply3dTransform(ve,fe){return[ve[0]*fe[0]+ve[1]*fe[1]+ve[2]*fe[2],ve[3]*fe[0]+ve[4]*fe[1]+ve[5]*fe[2],ve[6]*fe[0]+ve[7]*fe[1]+ve[8]*fe[2]]}static singularValueDecompose2dScale(ve){const fe=[ve[0],ve[2],ve[1],ve[3]],We=ve[0]*fe[0]+ve[1]*fe[2],Ue=ve[0]*fe[1]+ve[1]*fe[3],ze=ve[2]*fe[0]+ve[3]*fe[2],tt=ve[2]*fe[1]+ve[3]*fe[3],Ne=(We+tt)/2,Qe=Math.sqrt((We+tt)**2-4*(We*tt-ze*Ue))/2,ct=Ne+Qe||1,Ee=Ne-Qe||1;return[Math.sqrt(ct),Math.sqrt(Ee)]}static normalizeRect(ve){const fe=ve.slice(0);return ve[0]>ve[2]&&(fe[0]=ve[2],fe[2]=ve[0]),ve[1]>ve[3]&&(fe[1]=ve[3],fe[3]=ve[1]),fe}static intersect(ve,fe){const We=Math.max(Math.min(ve[0],ve[2]),Math.min(fe[0],fe[2])),Ue=Math.min(Math.max(ve[0],ve[2]),Math.max(fe[0],fe[2]));if(We>Ue)return null;const ze=Math.max(Math.min(ve[1],ve[3]),Math.min(fe[1],fe[3])),tt=Math.min(Math.max(ve[1],ve[3]),Math.max(fe[1],fe[3]));return ze>tt?null:[We,ze,Ue,tt]}static bezierBoundingBox(ve,fe,We,Ue,ze,tt,Ne,Qe){const ct=[],Ee=[[],[]];let rt,Ze,vt,lt,ht,ot,Dt,Ot;for(let Ve=0;Ve<2;++Ve){if(Ve===0?(Ze=6*ve-12*We+6*ze,rt=-3*ve+9*We-9*ze+3*Ne,vt=3*We-3*ve):(Ze=6*fe-12*Ue+6*tt,rt=-3*fe+9*Ue-9*tt+3*Qe,vt=3*Ue-3*fe),Math.abs(rt)<1e-12){if(Math.abs(Ze)<1e-12)continue;lt=-vt/Ze,0<lt&&lt<1&&ct.push(lt);continue}Dt=Ze*Ze-4*vt*rt,Ot=Math.sqrt(Dt),!(Dt<0)&&(ht=(-Ze+Ot)/(2*rt),0<ht&&ht<1&&ct.push(ht),ot=(-Ze-Ot)/(2*rt),0<ot&&ot<1&&ct.push(ot))}let Xe=ct.length,Ie;const Ge=Xe;for(;Xe--;)lt=ct[Xe],Ie=1-lt,Ee[0][Xe]=Ie*Ie*Ie*ve+3*Ie*Ie*lt*We+3*Ie*lt*lt*ze+lt*lt*lt*Ne,Ee[1][Xe]=Ie*Ie*Ie*fe+3*Ie*Ie*lt*Ue+3*Ie*lt*lt*tt+lt*lt*lt*Qe;return Ee[0][Ge]=ve,Ee[1][Ge]=fe,Ee[0][Ge+1]=Ne,Ee[1][Ge+1]=Qe,Ee[0].length=Ee[1].length=Ge+2,[Math.min(...Ee[0]),Math.min(...Ee[1]),Math.max(...Ee[0]),Math.max(...Ee[1])]}}f.Util=Ae;const Se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Fe(Ce){if(Ce[0]>="ï"){let fe;if(Ce[0]==="þ"&&Ce[1]==="ÿ"?fe="utf-16be":Ce[0]==="ÿ"&&Ce[1]==="þ"?fe="utf-16le":Ce[0]==="ï"&&Ce[1]==="»"&&Ce[2]==="¿"&&(fe="utf-8"),fe)try{const We=new TextDecoder(fe,{fatal:!0}),Ue=Q(Ce);return We.decode(Ue)}catch(We){U(`stringToPDFString: "${We}".`)}}const ve=[];for(let fe=0,We=Ce.length;fe<We;fe++){const Ue=Se[Ce.charCodeAt(fe)];ve.push(Ue?String.fromCharCode(Ue):Ce.charAt(fe))}return ve.join("")}function Pe(Ce){return Ce.replace(/([()\\\n\r])/g,ve=>ve===`
`?"\\n":ve==="\r"?"\\r":`\\${ve}`)}function ue(Ce){return/^[\x00-\x7F]*$/.test(Ce)}function ye(Ce){const ve=["þÿ"];for(let fe=0,We=Ce.length;fe<We;fe++){const Ue=Ce.charCodeAt(fe);ve.push(String.fromCharCode(Ue>>8&255),String.fromCharCode(Ue&255))}return ve.join("")}function le(Ce){return decodeURIComponent(escape(Ce))}function he(Ce){return unescape(encodeURIComponent(Ce))}function ce(Ce){return typeof Ce=="object"&&Ce!==null&&Ce.byteLength!==void 0}function Te(Ce,ve){if(Ce.length!==ve.length)return!1;for(let fe=0,We=Ce.length;fe<We;fe++)if(Ce[fe]!==ve[fe])return!1;return!0}function Re(Ce=new Date){return[Ce.getUTCFullYear().toString(),(Ce.getUTCMonth()+1).toString().padStart(2,"0"),Ce.getUTCDate().toString().padStart(2,"0"),Ce.getUTCHours().toString().padStart(2,"0"),Ce.getUTCMinutes().toString().padStart(2,"0"),Ce.getUTCSeconds().toString().padStart(2,"0")].join("")}function He(){const Ce=Object.create(null);let ve=!1;return Object.defineProperty(Ce,"settled",{get(){return ve}}),Ce.promise=new Promise(function(fe,We){Ce.resolve=function(Ue){ve=!0,fe(Ue)},Ce.reject=function(Ue){ve=!0,We(Ue)}}),Ce}},(ge,f,h)=>{h(4)},(ge,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.isNodeJS=void 0;const h=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");f.isNodeJS=h},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.RefSetCache=f.RefSet=f.Ref=f.Name=f.EOF=f.Dict=f.Cmd=f.CIRCULAR_REF=void 0,f.clearPrimitiveCaches=m,f.isCmd=i,f.isDict=g,f.isName=d,f.isRefsEqual=x;var t=h(2);const o=Symbol("CIRCULAR_REF");f.CIRCULAR_REF=o;const c=Symbol("EOF");f.EOF=c;const s=function(){let k=Object.create(null);class v{constructor(K){this.name=K}static get(K){return k[K]||(k[K]=new v(K))}static _clearCache(){k=Object.create(null)}}return v}();f.Name=s;const e=function(){let k=Object.create(null);class v{constructor(K){this.cmd=K}static get(K){return k[K]||(k[K]=new v(K))}static _clearCache(){k=Object.create(null)}}return v}();f.Cmd=e;const a=function(){return a};class r{constructor(k=null){this._map=Object.create(null),this.xref=k,this.objId=null,this.suppressEncryption=!1,this.__nonSerializable__=a}assignXref(k){this.xref=k}get size(){return Object.keys(this._map).length}get(k,v,_){let K=this._map[k];return K===void 0&&v!==void 0&&(K=this._map[v],K===void 0&&_!==void 0&&(K=this._map[_])),K instanceof n&&this.xref?this.xref.fetch(K,this.suppressEncryption):K}async getAsync(k,v,_){let K=this._map[k];return K===void 0&&v!==void 0&&(K=this._map[v],K===void 0&&_!==void 0&&(K=this._map[_])),K instanceof n&&this.xref?this.xref.fetchAsync(K,this.suppressEncryption):K}getArray(k,v,_){let K=this._map[k];if(K===void 0&&v!==void 0&&(K=this._map[v],K===void 0&&_!==void 0&&(K=this._map[_])),K instanceof n&&this.xref&&(K=this.xref.fetch(K,this.suppressEncryption)),Array.isArray(K)){K=K.slice();for(let M=0,j=K.length;M<j;M++)K[M]instanceof n&&this.xref&&(K[M]=this.xref.fetch(K[M],this.suppressEncryption))}return K}getRaw(k){return this._map[k]}getKeys(){return Object.keys(this._map)}getRawValues(){return Object.values(this._map)}set(k,v){this._map[k]=v}has(k){return this._map[k]!==void 0}forEach(k){for(const v in this._map)k(v,this.get(v))}static get empty(){const k=new r(null);return k.set=(v,_)=>{(0,t.unreachable)("Should not call `set` on the empty dictionary.")},(0,t.shadow)(this,"empty",k)}static merge({xref:k,dictArray:v,mergeSubDicts:_=!1}){const K=new r(k),M=new Map;for(const j of v)if(j instanceof r)for(const[O,T]of Object.entries(j._map)){let R=M.get(O);if(R===void 0)R=[],M.set(O,R);else if(!_||!(T instanceof r))continue;R.push(T)}for(const[j,O]of M){if(O.length===1||!(O[0]instanceof r)){K._map[j]=O[0];continue}const T=new r(k);for(const R of O)for(const[y,p]of Object.entries(R._map))T._map[y]===void 0&&(T._map[y]=p);T.size>0&&(K._map[j]=T)}return M.clear(),K.size>0?K:r.empty}}f.Dict=r;const n=function(){let k=Object.create(null);class v{constructor(K,M){this.num=K,this.gen=M}toString(){return this.gen===0?`${this.num}R`:`${this.num}R${this.gen}`}static get(K,M){const j=M===0?`${K}R`:`${K}R${M}`;return k[j]||(k[j]=new v(K,M))}static _clearCache(){k=Object.create(null)}}return v}();f.Ref=n;class l{constructor(k=null){this._set=new Set(k&&k._set)}has(k){return this._set.has(k.toString())}put(k){this._set.add(k.toString())}remove(k){this._set.delete(k.toString())}[Symbol.iterator](){return this._set.values()}clear(){this._set.clear()}}f.RefSet=l;class u{constructor(){this._map=new Map}get size(){return this._map.size}get(k){return this._map.get(k.toString())}has(k){return this._map.has(k.toString())}put(k,v){this._map.set(k.toString(),v)}putAlias(k,v){this._map.set(k.toString(),this.get(v))}[Symbol.iterator](){return this._map.values()}clear(){this._map.clear()}}f.RefSetCache=u;function d(A,k){return A instanceof s&&(k===void 0||A.name===k)}function i(A,k){return A instanceof e&&(k===void 0||A.cmd===k)}function g(A,k){return A instanceof r&&(k===void 0||d(A.get("Type"),k))}function x(A,k){return A.num===k.num&&A.gen===k.gen}function m(){e._clearCache(),s._clearCache(),n._clearCache()}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.XRefParseException=f.XRefEntryException=f.ParserEOFException=f.MissingDataException=f.DocStats=void 0,f.collectActions=j,f.encodeToXmlString=T,f.escapePDFName=K,f.getArrayLookupTableFactory=e,f.getInheritableProperty=d,f.getLookupTableFactory=s,f.getNewAnnotationsMap=P,f.isWhiteSpace=v,f.log2=x,f.numberToString=p,f.parseXFAPath=_,f.readInt8=m,f.readUint16=A,f.readUint32=k,f.recoverJsURL=y,f.toRomanNumerals=g,f.validateCSSFont=R;var t=h(2),o=h(5),c=h(7);function s(E){let S;return function(){return E&&(S=Object.create(null),E(S),E=null),S}}function e(E){let S;return function(){if(E){let F=E();E=null,S=Object.create(null);for(let C=0,b=F.length;C<b;C+=2)S[F[C]]=F[C+1];F=null}return S}}class a extends t.BaseException{constructor(S,F){super(`Missing data [${S}, ${F})`,"MissingDataException"),this.begin=S,this.end=F}}f.MissingDataException=a;class r extends t.BaseException{constructor(S){super(S,"ParserEOFException")}}f.ParserEOFException=r;class n extends t.BaseException{constructor(S){super(S,"XRefEntryException")}}f.XRefEntryException=n;class l extends t.BaseException{constructor(S){super(S,"XRefParseException")}}f.XRefParseException=l;class u{constructor(S){this._handler=S,this._streamTypes=new Set,this._fontTypes=new Set}_send(){const S=Object.create(null),F=Object.create(null);for(const C of this._streamTypes)S[C]=!0;for(const C of this._fontTypes)F[C]=!0;this._handler.send("DocStats",{streamTypes:S,fontTypes:F})}addStreamType(S){this._streamTypes.has(S)||(this._streamTypes.add(S),this._send())}addFontType(S){this._fontTypes.has(S)||(this._fontTypes.add(S),this._send())}}f.DocStats=u;function d({dict:E,key:S,getArray:F=!1,stopWhenFound:C=!0}){let b;const D=new o.RefSet;for(;E instanceof o.Dict&&!(E.objId&&D.has(E.objId));){E.objId&&D.put(E.objId);const U=F?E.getArray(S):E.get(S);if(U!==void 0){if(C)return U;b||(b=[]),b.push(U)}E=E.get("Parent")}return b}const i=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function g(E,S=!1){(0,t.assert)(Number.isInteger(E)&&E>0,"The number should be a positive integer.");const F=[];let C;for(;E>=1e3;)E-=1e3,F.push("M");C=E/100|0,E%=100,F.push(i[C]),C=E/10|0,E%=10,F.push(i[10+C]),F.push(i[20+E]);const b=F.join("");return S?b.toLowerCase():b}function x(E){return E<=0?0:Math.ceil(Math.log2(E))}function m(E,S){return E[S]<<24>>24}function A(E,S){return E[S]<<8|E[S+1]}function k(E,S){return(E[S]<<24|E[S+1]<<16|E[S+2]<<8|E[S+3])>>>0}function v(E){return E===32||E===9||E===13||E===10}function _(E){const S=/(.+)\[(\d+)\]$/;return E.split(".").map(F=>{const C=F.match(S);return C?{name:C[1],pos:parseInt(C[2],10)}:{name:F,pos:0}})}function K(E){const S=[];let F=0;for(let C=0,b=E.length;C<b;C++){const D=E.charCodeAt(C);(D<33||D>126||D===35||D===40||D===41||D===60||D===62||D===91||D===93||D===123||D===125||D===47||D===37)&&(F<C&&S.push(E.substring(F,C)),S.push(`#${D.toString(16)}`),F=C+1)}return S.length===0?E:(F<E.length&&S.push(E.substring(F,E.length)),S.join(""))}function M(E,S,F,C){if(!E)return;let b=null;if(E instanceof o.Ref){if(C.has(E))return;b=E,C.put(b),E=S.fetch(E)}if(Array.isArray(E))for(const D of E)M(D,S,F,C);else if(E instanceof o.Dict){if((0,o.isName)(E.get("S"),"JavaScript")){const D=E.get("JS");let U;D instanceof c.BaseStream?U=D.getString():typeof D=="string"&&(U=D),U=U&&(0,t.stringToPDFString)(U).replace(/\u0000/g,""),U&&F.push(U)}M(E.getRaw("Next"),S,F,C)}b&&C.remove(b)}function j(E,S,F){const C=Object.create(null),b=d({dict:S,key:"AA",stopWhenFound:!1});if(b)for(let D=b.length-1;D>=0;D--){const U=b[D];if(U instanceof o.Dict)for(const X of U.getKeys()){const G=F[X];if(!G)continue;const Y=U.getRaw(X),N=new o.RefSet,I=[];M(Y,E,I,N),I.length>0&&(C[G]=I)}}if(S.has("A")){const D=S.get("A"),U=new o.RefSet,X=[];M(D,E,X,U),X.length>0&&(C.Action=X)}return(0,t.objectSize)(C)>0?C:null}const O={60:"&lt;",62:"&gt;",38:"&amp;",34:"&quot;",39:"&apos;"};function T(E){const S=[];let F=0;for(let C=0,b=E.length;C<b;C++){const D=E.codePointAt(C);if(32<=D&&D<=126){const U=O[D];U&&(F<C&&S.push(E.substring(F,C)),S.push(U),F=C+1)}else F<C&&S.push(E.substring(F,C)),S.push(`&#x${D.toString(16).toUpperCase()};`),D>55295&&(D<57344||D>65533)&&C++,F=C+1}return S.length===0?E:(F<E.length&&S.push(E.substring(F,E.length)),S.join(""))}function R(E){const S="14",F="400",C=new Set(["100","200","300","400","500","600","700","800","900","1000","normal","bold","bolder","lighter"]),{fontFamily:b,fontWeight:D,italicAngle:U}=E;if(/^".*"$/.test(b)){if(/[^\\]"/.test(b.slice(1,b.length-1)))return(0,t.warn)(`XFA - FontFamily contains some unescaped ": ${b}.`),!1}else if(/^'.*'$/.test(b)){if(/[^\\]'/.test(b.slice(1,b.length-1)))return(0,t.warn)(`XFA - FontFamily contains some unescaped ': ${b}.`),!1}else for(const Y of b.split(/[ \t]+/))if(/^(\d|(-(\d|-)))/.test(Y)||!/^[\w-\\]+$/.test(Y))return(0,t.warn)(`XFA - FontFamily contains some invalid <custom-ident>: ${b}.`),!1;const X=D?D.toString():"";E.fontWeight=C.has(X)?X:F;const G=parseFloat(U);return E.italicAngle=isNaN(G)||G<-90||G>90?S:U.toString(),!0}function y(E){const S=["app.launchURL","window.open","xfa.host.gotoURL"],C=new RegExp("^\\s*("+S.join("|").split(".").join("\\.")+`)\\((?:'|")([^'"]*)(?:'|")(?:,\\s*(\\w+)\\)|\\))`,"i").exec(E);if(C&&C[2]){const b=C[2];let D=!1;return C[3]==="true"&&C[1]==="app.launchURL"&&(D=!0),{url:b,newWindow:D}}return null}function p(E){if(Number.isInteger(E))return E.toString();const S=Math.round(E*100);return S%100===0?(S/100).toString():S%10===0?E.toFixed(1):E.toFixed(2)}function P(E){if(!E)return null;const S=new Map;for(const[F,C]of E){if(!F.startsWith(t.AnnotationEditorPrefix))continue;let b=S.get(C.pageIndex);b||(b=[],S.set(C.pageIndex,b)),b.push(C)}return S.size>0?S:null}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.BaseStream=void 0;var t=h(2);class o{constructor(){this.constructor===o&&(0,t.unreachable)("Cannot initialize BaseStream.")}get length(){(0,t.unreachable)("Abstract getter `length` accessed")}get isEmpty(){(0,t.unreachable)("Abstract getter `isEmpty` accessed")}get isDataLoaded(){return(0,t.shadow)(this,"isDataLoaded",!0)}getByte(){(0,t.unreachable)("Abstract method `getByte` called")}getBytes(s){(0,t.unreachable)("Abstract method `getBytes` called")}peekByte(){const s=this.getByte();return s!==-1&&this.pos--,s}peekBytes(s){const e=this.getBytes(s);return this.pos-=e.length,e}getUint16(){const s=this.getByte(),e=this.getByte();return s===-1||e===-1?-1:(s<<8)+e}getInt32(){const s=this.getByte(),e=this.getByte(),a=this.getByte(),r=this.getByte();return(s<<24)+(e<<16)+(a<<8)+r}getByteRange(s,e){(0,t.unreachable)("Abstract method `getByteRange` called")}getString(s){return(0,t.bytesToString)(this.getBytes(s))}skip(s){this.pos+=s||1}reset(){(0,t.unreachable)("Abstract method `reset` called")}moveStart(){(0,t.unreachable)("Abstract method `moveStart` called")}makeSubStream(s,e,a=null){(0,t.unreachable)("Abstract method `makeSubStream` called")}getBaseStreams(){return null}}f.BaseStream=o},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.NetworkPdfManager=f.LocalPdfManager=void 0;var t=h(2),o=h(9),c=h(6),s=h(11),e=h(10);function a(u){if(u){const d=(0,t.createValidAbsoluteUrl)(u);if(d)return d.href;(0,t.warn)(`Invalid absolute docBaseUrl: "${u}".`)}return null}class r{constructor(){this.constructor===r&&(0,t.unreachable)("Cannot initialize BasePdfManager.")}get docId(){return this._docId}get password(){return this._password}get docBaseUrl(){const d=this.pdfDocument.catalog;return(0,t.shadow)(this,"docBaseUrl",d.baseUrl||this._docBaseUrl)}onLoadedStream(){(0,t.unreachable)("Abstract method `onLoadedStream` called")}ensureDoc(d,i){return this.ensure(this.pdfDocument,d,i)}ensureXRef(d,i){return this.ensure(this.pdfDocument.xref,d,i)}ensureCatalog(d,i){return this.ensure(this.pdfDocument.catalog,d,i)}getPage(d){return this.pdfDocument.getPage(d)}fontFallback(d,i){return this.pdfDocument.fontFallback(d,i)}loadXfaFonts(d,i){return this.pdfDocument.loadXfaFonts(d,i)}loadXfaImages(){return this.pdfDocument.loadXfaImages()}serializeXfaData(d){return this.pdfDocument.serializeXfaData(d)}cleanup(d=!1){return this.pdfDocument.cleanup(d)}async ensure(d,i,g){(0,t.unreachable)("Abstract method `ensure` called")}requestRange(d,i){(0,t.unreachable)("Abstract method `requestRange` called")}requestLoadedStream(){(0,t.unreachable)("Abstract method `requestLoadedStream` called")}sendProgressiveData(d){(0,t.unreachable)("Abstract method `sendProgressiveData` called")}updatePassword(d){this._password=d}terminate(d){(0,t.unreachable)("Abstract method `terminate` called")}}class n extends r{constructor(d,i,g,x,m,A,k){super(),this._docId=d,this._password=g,this._docBaseUrl=a(k),this.msgHandler=x,this.evaluatorOptions=m,this.enableXfa=A;const v=new e.Stream(i);this.pdfDocument=new s.PDFDocument(this,v),this._loadedStreamPromise=Promise.resolve(v)}async ensure(d,i,g){const x=d[i];return typeof x=="function"?x.apply(d,g):x}requestRange(d,i){return Promise.resolve()}requestLoadedStream(){}onLoadedStream(){return this._loadedStreamPromise}terminate(d){}}f.LocalPdfManager=n;class l extends r{constructor(d,i,g,x,m,A){super(),this._docId=d,this._password=g.password,this._docBaseUrl=a(A),this.msgHandler=g.msgHandler,this.evaluatorOptions=x,this.enableXfa=m,this.streamManager=new o.ChunkedStreamManager(i,{msgHandler:g.msgHandler,length:g.length,disableAutoFetch:g.disableAutoFetch,rangeChunkSize:g.rangeChunkSize}),this.pdfDocument=new s.PDFDocument(this,this.streamManager.getStream())}async ensure(d,i,g){try{const x=d[i];return typeof x=="function"?x.apply(d,g):x}catch(x){if(!(x instanceof c.MissingDataException))throw x;return await this.requestRange(x.begin,x.end),this.ensure(d,i,g)}}requestRange(d,i){return this.streamManager.requestRange(d,i)}requestLoadedStream(){this.streamManager.requestAllChunks()}sendProgressiveData(d){this.streamManager.onReceiveData({chunk:d})}onLoadedStream(){return this.streamManager.onLoadedStream()}terminate(d){this.streamManager.abort(d)}}f.NetworkPdfManager=l},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ChunkedStreamManager=f.ChunkedStream=void 0;var t=h(2),o=h(6),c=h(10);class s extends c.Stream{constructor(r,n,l){super(new Uint8Array(r),0,r,null),this.chunkSize=n,this._loadedChunks=new Set,this.numChunks=Math.ceil(r/n),this.manager=l,this.progressiveDataLength=0,this.lastSuccessfulEnsureByteChunk=-1}getMissingChunks(){const r=[];for(let n=0,l=this.numChunks;n<l;++n)this._loadedChunks.has(n)||r.push(n);return r}get numChunksLoaded(){return this._loadedChunks.size}get isDataLoaded(){return this.numChunksLoaded===this.numChunks}onReceiveData(r,n){const l=this.chunkSize;if(r%l!==0)throw new Error(`Bad begin offset: ${r}`);const u=r+n.byteLength;if(u%l!==0&&u!==this.bytes.length)throw new Error(`Bad end offset: ${u}`);this.bytes.set(new Uint8Array(n),r);const d=Math.floor(r/l),i=Math.floor((u-1)/l)+1;for(let g=d;g<i;++g)this._loadedChunks.add(g)}onReceiveProgressiveData(r){let n=this.progressiveDataLength;const l=Math.floor(n/this.chunkSize);this.bytes.set(new Uint8Array(r),n),n+=r.byteLength,this.progressiveDataLength=n;const u=n>=this.end?this.numChunks:Math.floor(n/this.chunkSize);for(let d=l;d<u;++d)this._loadedChunks.add(d)}ensureByte(r){if(r<this.progressiveDataLength)return;const n=Math.floor(r/this.chunkSize);if(!(n>this.numChunks)&&n!==this.lastSuccessfulEnsureByteChunk){if(!this._loadedChunks.has(n))throw new o.MissingDataException(r,r+1);this.lastSuccessfulEnsureByteChunk=n}}ensureRange(r,n){if(r>=n||n<=this.progressiveDataLength)return;const l=Math.floor(r/this.chunkSize);if(l>this.numChunks)return;const u=Math.min(Math.floor((n-1)/this.chunkSize)+1,this.numChunks);for(let d=l;d<u;++d)if(!this._loadedChunks.has(d))throw new o.MissingDataException(r,n)}nextEmptyChunk(r){const n=this.numChunks;for(let l=0;l<n;++l){const u=(r+l)%n;if(!this._loadedChunks.has(u))return u}return null}hasChunk(r){return this._loadedChunks.has(r)}getByte(){const r=this.pos;return r>=this.end?-1:(r>=this.progressiveDataLength&&this.ensureByte(r),this.bytes[this.pos++])}getBytes(r){const n=this.bytes,l=this.pos,u=this.end;if(!r)return u>this.progressiveDataLength&&this.ensureRange(l,u),n.subarray(l,u);let d=l+r;return d>u&&(d=u),d>this.progressiveDataLength&&this.ensureRange(l,d),this.pos=d,n.subarray(l,d)}getByteRange(r,n){return r<0&&(r=0),n>this.end&&(n=this.end),n>this.progressiveDataLength&&this.ensureRange(r,n),this.bytes.subarray(r,n)}makeSubStream(r,n,l=null){n?r+n>this.progressiveDataLength&&this.ensureRange(r,r+n):r>=this.progressiveDataLength&&this.ensureByte(r);function u(){}u.prototype=Object.create(this),u.prototype.getMissingChunks=function(){const i=this.chunkSize,g=Math.floor(this.start/i),x=Math.floor((this.end-1)/i)+1,m=[];for(let A=g;A<x;++A)this._loadedChunks.has(A)||m.push(A);return m},Object.defineProperty(u.prototype,"isDataLoaded",{get(){return this.numChunksLoaded===this.numChunks?!0:this.getMissingChunks().length===0},configurable:!0});const d=new u;return d.pos=d.start=r,d.end=r+n||this.end,d.dict=l,d}getBaseStreams(){return[this]}}f.ChunkedStream=s;class e{constructor(r,n){this.length=n.length,this.chunkSize=n.rangeChunkSize,this.stream=new s(this.length,this.chunkSize,this),this.pdfNetworkStream=r,this.disableAutoFetch=n.disableAutoFetch,this.msgHandler=n.msgHandler,this.currRequestId=0,this._chunksNeededByRequest=new Map,this._requestsByChunk=new Map,this._promisesByRequest=new Map,this.progressiveDataLength=0,this.aborted=!1,this._loadedStreamCapability=(0,t.createPromiseCapability)()}onLoadedStream(){return this._loadedStreamCapability.promise}sendRequest(r,n){const l=this.pdfNetworkStream.getRangeReader(r,n);l.isStreamingSupported||(l.onProgress=this.onProgress.bind(this));let u=[],d=0;return new Promise((i,g)=>{const x=m=>{try{if(!m.done){const k=m.value;u.push(k),d+=(0,t.arrayByteLength)(k),l.isStreamingSupported&&this.onProgress({loaded:d}),l.read().then(x,g);return}const A=(0,t.arraysToBytes)(u);u=null,i(A)}catch(A){g(A)}};l.read().then(x,g)}).then(i=>{this.aborted||this.onReceiveData({chunk:i,begin:r})})}requestAllChunks(){const r=this.stream.getMissingChunks();return this._requestChunks(r),this._loadedStreamCapability.promise}_requestChunks(r){const n=this.currRequestId++,l=new Set;this._chunksNeededByRequest.set(n,l);for(const i of r)this.stream.hasChunk(i)||l.add(i);if(l.size===0)return Promise.resolve();const u=(0,t.createPromiseCapability)();this._promisesByRequest.set(n,u);const d=[];for(const i of l){let g=this._requestsByChunk.get(i);g||(g=[],this._requestsByChunk.set(i,g),d.push(i)),g.push(n)}if(d.length>0){const i=this.groupChunks(d);for(const g of i){const x=g.beginChunk*this.chunkSize,m=Math.min(g.endChunk*this.chunkSize,this.length);this.sendRequest(x,m).catch(u.reject)}}return u.promise.catch(i=>{if(!this.aborted)throw i})}getStream(){return this.stream}requestRange(r,n){n=Math.min(n,this.length);const l=this.getBeginChunk(r),u=this.getEndChunk(n),d=[];for(let i=l;i<u;++i)d.push(i);return this._requestChunks(d)}requestRanges(r=[]){const n=[];for(const l of r){const u=this.getBeginChunk(l.begin),d=this.getEndChunk(l.end);for(let i=u;i<d;++i)n.includes(i)||n.push(i)}return n.sort(function(l,u){return l-u}),this._requestChunks(n)}groupChunks(r){const n=[];let l=-1,u=-1;for(let d=0,i=r.length;d<i;++d){const g=r[d];l<0&&(l=g),u>=0&&u+1!==g&&(n.push({beginChunk:l,endChunk:u+1}),l=g),d+1===r.length&&n.push({beginChunk:l,endChunk:g+1}),u=g}return n}onProgress(r){this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize+r.loaded,total:this.length})}onReceiveData(r){const n=r.chunk,l=r.begin===void 0,u=l?this.progressiveDataLength:r.begin,d=u+n.byteLength,i=Math.floor(u/this.chunkSize),g=d<this.length?Math.floor(d/this.chunkSize):Math.ceil(d/this.chunkSize);l?(this.stream.onReceiveProgressiveData(n),this.progressiveDataLength=d):this.stream.onReceiveData(u,n),this.stream.isDataLoaded&&this._loadedStreamCapability.resolve(this.stream);const x=[];for(let m=i;m<g;++m){const A=this._requestsByChunk.get(m);if(A){this._requestsByChunk.delete(m);for(const k of A){const v=this._chunksNeededByRequest.get(k);v.has(m)&&v.delete(m),!(v.size>0)&&x.push(k)}}}if(!this.disableAutoFetch&&this._requestsByChunk.size===0){let m;if(this.stream.numChunksLoaded===1){const A=this.stream.numChunks-1;this.stream.hasChunk(A)||(m=A)}else m=this.stream.nextEmptyChunk(g);Number.isInteger(m)&&this._requestChunks([m])}for(const m of x){const A=this._promisesByRequest.get(m);this._promisesByRequest.delete(m),A.resolve()}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length})}onError(r){this._loadedStreamCapability.reject(r)}getBeginChunk(r){return Math.floor(r/this.chunkSize)}getEndChunk(r){return Math.floor((r-1)/this.chunkSize)+1}abort(r){this.aborted=!0,this.pdfNetworkStream&&this.pdfNetworkStream.cancelAllRequests(r);for(const n of this._promisesByRequest.values())n.reject(r)}}f.ChunkedStreamManager=e},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.StringStream=f.Stream=f.NullStream=void 0;var t=h(7),o=h(2);class c extends t.BaseStream{constructor(r,n,l,u){super(),this.bytes=r instanceof Uint8Array?r:new Uint8Array(r),this.start=n||0,this.pos=this.start,this.end=n+l||this.bytes.length,this.dict=u}get length(){return this.end-this.start}get isEmpty(){return this.length===0}getByte(){return this.pos>=this.end?-1:this.bytes[this.pos++]}getBytes(r){const n=this.bytes,l=this.pos,u=this.end;if(!r)return n.subarray(l,u);let d=l+r;return d>u&&(d=u),this.pos=d,n.subarray(l,d)}getByteRange(r,n){return r<0&&(r=0),n>this.end&&(n=this.end),this.bytes.subarray(r,n)}reset(){this.pos=this.start}moveStart(){this.start=this.pos}makeSubStream(r,n,l=null){return new c(this.bytes.buffer,r,n,l)}}f.Stream=c;class s extends c{constructor(r){super((0,o.stringToBytes)(r))}}f.StringStream=s;class e extends c{constructor(){super(new Uint8Array(0))}}f.NullStream=e},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Page=f.PDFDocument=void 0;var t=h(12),o=h(2),c=h(6),s=h(5),e=h(51),a=h(7),r=h(67),n=h(69),l=h(71),u=h(100),d=h(17),i=h(10),g=h(75),x=h(62),m=h(15),A=h(19),k=h(74),v=h(65),_=h(76),K=h(101);const M=1,j=[0,0,612,792];class O{constructor({pdfManager:b,xref:D,pageIndex:U,pageDict:X,ref:G,globalIdFactory:Y,fontCache:N,builtInCMapCache:I,standardFontDataCache:L,globalImageCache:$,nonBlendModesSet:W,xfaFactory:z}){this.pdfManager=b,this.pageIndex=U,this.pageDict=X,this.xref=D,this.ref=G,this.fontCache=N,this.builtInCMapCache=I,this.standardFontDataCache=L,this.globalImageCache=$,this.nonBlendModesSet=W,this.evaluatorOptions=b.evaluatorOptions,this.resourcesPromise=null,this.xfaFactory=z;const B={obj:0};this._localIdFactory=class extends Y{static createObjId(){return`p${U}_${++B.obj}`}static getPageObjId(){return`page${G.toString()}`}}}_getInheritableProperty(b,D=!1){const U=(0,c.getInheritableProperty)({dict:this.pageDict,key:b,getArray:D,stopWhenFound:!1});return Array.isArray(U)?U.length===1||!(U[0]instanceof s.Dict)?U[0]:s.Dict.merge({xref:this.xref,dictArray:U}):U}get content(){return this.pageDict.getArray("Contents")}get resources(){const b=this._getInheritableProperty("Resources");return(0,o.shadow)(this,"resources",b instanceof s.Dict?b:s.Dict.empty)}_getBoundingBox(b){if(this.xfaData)return this.xfaData.bbox;const D=this._getInheritableProperty(b,!0);if(Array.isArray(D)&&D.length===4){if(D[2]-D[0]!==0&&D[3]-D[1]!==0)return D;(0,o.warn)(`Empty /${b} entry.`)}return null}get mediaBox(){return(0,o.shadow)(this,"mediaBox",this._getBoundingBox("MediaBox")||j)}get cropBox(){return(0,o.shadow)(this,"cropBox",this._getBoundingBox("CropBox")||this.mediaBox)}get userUnit(){let b=this.pageDict.get("UserUnit");return(typeof b!="number"||b<=0)&&(b=M),(0,o.shadow)(this,"userUnit",b)}get view(){const{cropBox:b,mediaBox:D}=this;let U;if(b===D||(0,o.isArrayEqual)(b,D))U=D;else{const X=o.Util.intersect(b,D);X&&X[2]-X[0]!==0&&X[3]-X[1]!==0?U=X:(0,o.warn)("Empty /CropBox and /MediaBox intersection.")}return(0,o.shadow)(this,"view",U||D)}get rotate(){let b=this._getInheritableProperty("Rotate")||0;return b%90!==0?b=0:b>=360?b%=360:b<0&&(b=(b%360+360)%360),(0,o.shadow)(this,"rotate",b)}_onSubStreamError(b,D,U){if(this.evaluatorOptions.ignoreErrors){b.send("UnsupportedFeature",{featureId:o.UNSUPPORTED_FEATURES.errorContentSubStream}),(0,o.warn)(`getContentStream - ignoring sub-stream (${U}): "${D}".`);return}throw D}getContentStream(b){return this.pdfManager.ensure(this,"content").then(D=>D instanceof a.BaseStream?D:Array.isArray(D)?new A.StreamsSequenceStream(D,this._onSubStreamError.bind(this,b)):new i.NullStream)}get xfaData(){return(0,o.shadow)(this,"xfaData",this.xfaFactory?{bbox:this.xfaFactory.getBoundingBox(this.pageIndex)}:null)}async saveNewAnnotations(b,D,U){if(this.xfaFactory)throw new Error("XFA: Cannot save new annotations.");const X=new m.PartialEvaluator({xref:this.xref,handler:b,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}),G=this.pageDict,Y=this.annotations.slice(),N=await t.AnnotationFactory.saveNewAnnotations(X,D,U);for(const{ref:z}of N.annotations)Y.push(z);const I=G.get("Annots");G.set("Annots",Y);const L=[];let $=null;this.xref.encrypt&&($=this.xref.encrypt.createCipherTransform(this.ref.num,this.ref.gen)),(0,v.writeObject)(this.ref,G,L,$),I&&G.set("Annots",I);const W=N.dependencies;return W.push({ref:this.ref,data:L.join("")},...N.annotations),W}save(b,D,U){const X=new m.PartialEvaluator({xref:this.xref,handler:b,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions});return this._parsedAnnotations.then(function(G){const Y=[];for(const N of G)N.mustBePrinted(U)&&Y.push(N.save(X,D,U).catch(function(I){return(0,o.warn)(`save - ignoring annotation data during "${D.name}" task: "${I}".`),null}));return Promise.all(Y).then(function(N){return N.filter(I=>!!I)})})}loadResources(b){return this.resourcesPromise||(this.resourcesPromise=this.pdfManager.ensure(this,"resources")),this.resourcesPromise.then(()=>new g.ObjectLoader(this.resources,b,this.xref).load())}getOperatorList({handler:b,sink:D,task:U,intent:X,cacheKey:G,annotationStorage:Y=null}){const N=this.getContentStream(b),I=this.loadResources(["ColorSpace","ExtGState","Font","Pattern","Properties","Shading","XObject"]),L=new m.PartialEvaluator({xref:this.xref,handler:b,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}),$=this.xfaFactory?null:(0,c.getNewAnnotationsMap)(Y);let W=Promise.resolve(null);if($){const H=$.get(this.pageIndex);H&&(W=t.AnnotationFactory.printNewAnnotations(L,U,H))}const B=Promise.all([N,I]).then(([H])=>{const q=new x.OperatorList(X,D);return b.send("StartRenderPage",{transparency:L.hasBlendModes(this.resources,this.nonBlendModesSet),pageIndex:this.pageIndex,cacheKey:G}),L.getOperatorList({stream:H,task:U,resources:this.resources,operatorList:q}).then(function(){return q})});return Promise.all([B,this._parsedAnnotations,W]).then(function([H,q,Z]){if(Z&&(q=q.concat(Z)),q.length===0||X&o.RenderingIntentFlag.ANNOTATIONS_DISABLE)return H.flush(!0),{length:H.totalLength};const te=!!(X&o.RenderingIntentFlag.ANNOTATIONS_FORMS),Q=!!(X&o.RenderingIntentFlag.ANY),ee=!!(X&o.RenderingIntentFlag.DISPLAY),J=!!(X&o.RenderingIntentFlag.PRINT),ne=[];for(const re of q)(Q||ee&&re.mustBeViewed(Y)||J&&re.mustBePrinted(Y))&&ne.push(re.getOperatorList(L,U,X,te,Y).catch(function(ae){return(0,o.warn)(`getOperatorList - ignoring annotation data during "${U.name}" task: "${ae}".`),null}));return Promise.all(ne).then(function(re){let ae=!1,se=!1;for(const{opList:oe,separateForm:me,separateCanvas:xe}of re)H.addOpList(oe),me&&(ae=me),xe&&(se=xe);return H.flush(!0,{form:ae,canvas:se}),{length:H.totalLength}})})}extractTextContent({handler:b,task:D,includeMarkedContent:U,sink:X,combineTextItems:G}){const Y=this.getContentStream(b),N=this.loadResources(["ExtGState","Font","Properties","XObject"]);return Promise.all([Y,N]).then(([L])=>new m.PartialEvaluator({xref:this.xref,handler:b,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions}).getTextContent({stream:L,task:D,resources:this.resources,includeMarkedContent:U,combineTextItems:G,sink:X,viewBox:this.view}))}async getStructTree(){const b=await this.pdfManager.ensureCatalog("structTreeRoot");return b?(await this.pdfManager.ensure(this,"_parseStructTree",[b])).serializable:null}_parseStructTree(b){const D=new k.StructTreePage(b,this.pageDict);return D.parse(),D}async getAnnotationsData(b,D,U){const X=await this._parsedAnnotations;if(X.length===0)return[];const G=[],Y=[];let N;const I=!!(U&o.RenderingIntentFlag.ANY),L=!!(U&o.RenderingIntentFlag.DISPLAY),$=!!(U&o.RenderingIntentFlag.PRINT);for(const W of X){const z=I||L&&W.viewable;(z||$&&W.printable)&&Y.push(W.data),W.hasTextContent&&z&&(N||(N=new m.PartialEvaluator({xref:this.xref,handler:b,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,options:this.evaluatorOptions})),G.push(W.extractTextContent(N,D,this.view).catch(function(B){(0,o.warn)(`getAnnotationsData - ignoring textContent during "${D.name}" task: "${B}".`)})))}return await Promise.all(G),Y}get annotations(){const b=this._getInheritableProperty("Annots");return(0,o.shadow)(this,"annotations",Array.isArray(b)?b:[])}get _parsedAnnotations(){const b=this.pdfManager.ensure(this,"annotations").then(()=>{const D=[];for(const U of this.annotations)D.push(t.AnnotationFactory.create(this.xref,U,this.pdfManager,this._localIdFactory,!1).catch(function(X){return(0,o.warn)(`_parsedAnnotations: "${X}".`),null}));return Promise.all(D).then(function(U){if(U.length===0)return U;const X=[];let G;for(const Y of U)if(Y){if(Y instanceof t.PopupAnnotation){G||(G=[]),G.push(Y);continue}X.push(Y)}return G&&X.push(...G),X})});return(0,o.shadow)(this,"_parsedAnnotations",b)}get jsActions(){const b=(0,c.collectActions)(this.xref,this.pageDict,o.PageActionEventType);return(0,o.shadow)(this,"jsActions",b)}}f.Page=O;const T=new Uint8Array([37,80,68,70,45]),R=new Uint8Array([115,116,97,114,116,120,114,101,102]),y=new Uint8Array([101,110,100,111,98,106]),p=1024,P="\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0",E=/^[1-9]\.\d$/;function S(C,b,D=1024,U=!1){const X=b.length,G=C.peekBytes(D),Y=G.length-X;if(Y<=0)return!1;if(U){const N=X-1;let I=G.length-1;for(;I>=N;){let L=0;for(;L<X&&G[I-L]===b[N-L];)L++;if(L>=X)return C.pos+=I-N,!0;I--}}else{let N=0;for(;N<=Y;){let I=0;for(;I<X&&G[N+I]===b[I];)I++;if(I>=X)return C.pos+=N,!0;N++}}return!1}class F{constructor(b,D){if(D.length<=0)throw new o.InvalidPDFException("The PDF file is empty, i.e. its size is zero bytes.");this.pdfManager=b,this.stream=D,this.xref=new K.XRef(D,b),this._pagePromises=new Map,this._version=null;const U={font:0};this._globalIdFactory=class{static getDocId(){return`g_${b.docId}`}static createFontId(){return`f${++U.font}`}static createObjId(){(0,o.unreachable)("Abstract method `createObjId` called.")}static getPageObjId(){(0,o.unreachable)("Abstract method `getPageObjId` called.")}}}parse(b){this.xref.parse(b),this.catalog=new n.Catalog(this.pdfManager,this.xref),this.catalog.version&&(this._version=this.catalog.version)}get linearization(){let b=null;try{b=d.Linearization.create(this.stream)}catch(D){if(D instanceof c.MissingDataException)throw D;(0,o.info)(D)}return(0,o.shadow)(this,"linearization",b)}get startXRef(){const b=this.stream;let D=0;if(this.linearization)b.reset(),S(b,y)&&(D=b.pos+6-b.start);else{const X=R.length;let G=!1,Y=b.end;for(;!G&&Y>0;)Y-=1024-X,Y<0&&(Y=0),b.pos=Y,G=S(b,R,1024,!0);if(G){b.skip(9);let N;do N=b.getByte();while((0,c.isWhiteSpace)(N));let I="";for(;N>=32&&N<=57;)I+=String.fromCharCode(N),N=b.getByte();D=parseInt(I,10),isNaN(D)&&(D=0)}}return(0,o.shadow)(this,"startXRef",D)}checkHeader(){const b=this.stream;if(b.reset(),!S(b,T))return;b.moveStart();const D=12;let U="",X;for(;(X=b.getByte())>32&&!(U.length>=D);)U+=String.fromCharCode(X);this._version||(this._version=U.substring(5))}parseStartXRef(){this.xref.setStartXRef(this.startXRef)}get numPages(){let b=0;return this.catalog.hasActualNumPages?b=this.catalog.numPages:this.xfaFactory?b=this.xfaFactory.getNumPages():this.linearization?b=this.linearization.numPages:b=this.catalog.numPages,(0,o.shadow)(this,"numPages",b)}_hasOnlyDocumentSignatures(b,D=0){return Array.isArray(b)?b.every(X=>{if(X=this.xref.fetchIfRef(X),!(X instanceof s.Dict))return!1;if(X.has("Kids"))return++D>10?((0,o.warn)("_hasOnlyDocumentSignatures: maximum recursion depth reached"),!1):this._hasOnlyDocumentSignatures(X.get("Kids"),D);const G=(0,s.isName)(X.get("FT"),"Sig"),Y=X.get("Rect"),N=Array.isArray(Y)&&Y.every(I=>I===0);return G&&N}):!1}get _xfaStreams(){const b=this.catalog.acroForm;if(!b)return null;const D=b.get("XFA"),U={"xdp:xdp":"",template:"",datasets:"",config:"",connectionSet:"",localeSet:"",stylesheet:"","/xdp:xdp":""};if(D instanceof a.BaseStream&&!D.isEmpty)return U["xdp:xdp"]=D,U;if(!Array.isArray(D)||D.length===0)return null;for(let X=0,G=D.length;X<G;X+=2){let Y;if(X===0?Y="xdp:xdp":X===G-2?Y="/xdp:xdp":Y=D[X],!U.hasOwnProperty(Y))continue;const N=this.xref.fetchIfRef(D[X+1]);!(N instanceof a.BaseStream)||N.isEmpty||(U[Y]=N)}return U}get xfaDatasets(){const b=this._xfaStreams;if(!b)return(0,o.shadow)(this,"xfaDatasets",null);for(const D of["datasets","xdp:xdp"]){const U=b[D];if(U)try{const X=(0,o.stringToUTF8String)(U.getString()),G={[D]:X};return(0,o.shadow)(this,"xfaDatasets",new u.DatasetReader(G))}catch{(0,o.warn)("XFA - Invalid utf-8 string.");break}}return(0,o.shadow)(this,"xfaDatasets",null)}get xfaData(){const b=this._xfaStreams;if(!b)return null;const D=Object.create(null);for(const[U,X]of Object.entries(b))if(X)try{D[U]=(0,o.stringToUTF8String)(X.getString())}catch{return(0,o.warn)("XFA - Invalid utf-8 string."),null}return D}get xfaFactory(){let b;return this.pdfManager.enableXfa&&this.catalog.needsRendering&&this.formInfo.hasXfa&&!this.formInfo.hasAcroForm&&(b=this.xfaData),(0,o.shadow)(this,"xfaFactory",b?new _.XFAFactory(b):null)}get isPureXfa(){return this.xfaFactory?this.xfaFactory.isValid():!1}get htmlForXfa(){return this.xfaFactory?this.xfaFactory.getPages():null}async loadXfaImages(){const b=await this.pdfManager.ensureCatalog("xfaImages");if(!b)return;const D=b.getKeys();await new g.ObjectLoader(b,D,this.xref).load();const X=new Map;for(const G of D){const Y=b.get(G);Y instanceof a.BaseStream&&X.set(G,Y.getBytes())}this.xfaFactory.setImages(X)}async loadXfaFonts(b,D){const U=await this.pdfManager.ensureCatalog("acroForm");if(!U)return;const X=await U.getAsync("DR");if(!(X instanceof s.Dict))return;await new g.ObjectLoader(X,["Font"],this.xref).load();const Y=X.get("Font");if(!(Y instanceof s.Dict))return;const N=Object.assign(Object.create(null),this.pdfManager.evaluatorOptions);N.useSystemFonts=!1;const I=new m.PartialEvaluator({xref:this.xref,handler:b,pageIndex:-1,idFactory:this._globalIdFactory,fontCache:this.catalog.fontCache,builtInCMapCache:this.catalog.builtInCMapCache,standardFontDataCache:this.catalog.standardFontDataCache,options:N}),L=new x.OperatorList,$=[],W={get font(){return $.at(-1)},set font(Z){$.push(Z)},clone(){return this}},z=new Map;Y.forEach((Z,te)=>{z.set(Z,te)});const B=[];for(const[Z,te]of z){const Q=te.get("FontDescriptor");if(!(Q instanceof s.Dict))continue;let ee=Q.get("FontFamily");ee=ee.replace(/[ ]+(\d)/g,"$1");const J=Q.get("FontWeight"),ne=-Q.get("ItalicAngle"),re={fontFamily:ee,fontWeight:J,italicAngle:ne};(0,c.validateCSSFont)(re)&&B.push(I.handleSetFont(X,[s.Name.get(Z),1],null,L,D,W,null,re).catch(function(ae){return(0,o.warn)(`loadXfaFonts: "${ae}".`),null}))}await Promise.all(B);const H=this.xfaFactory.setFonts($);if(!H)return;N.ignoreErrors=!0,B.length=0,$.length=0;const q=new Set;for(const Z of H)(0,e.getXfaFontName)(`${Z}-Regular`)||q.add(Z);q.size&&H.push("PdfJS-Fallback");for(const Z of H)if(!q.has(Z))for(const te of[{name:"Regular",fontWeight:400,italicAngle:0},{name:"Bold",fontWeight:700,italicAngle:0},{name:"Italic",fontWeight:400,italicAngle:12},{name:"BoldItalic",fontWeight:700,italicAngle:12}]){const Q=`${Z}-${te.name}`,ee=(0,e.getXfaFontDict)(Q);B.push(I.handleSetFont(X,[s.Name.get(Q),1],null,L,D,W,ee,{fontFamily:Z,fontWeight:te.fontWeight,italicAngle:te.italicAngle}).catch(function(J){return(0,o.warn)(`loadXfaFonts: "${J}".`),null}))}await Promise.all(B),this.xfaFactory.appendFonts($,q)}async serializeXfaData(b){return this.xfaFactory?this.xfaFactory.serializeData(b):null}get formInfo(){const b={hasFields:!1,hasAcroForm:!1,hasXfa:!1,hasSignatures:!1},D=this.catalog.acroForm;if(!D)return(0,o.shadow)(this,"formInfo",b);try{const U=D.get("Fields"),X=Array.isArray(U)&&U.length>0;b.hasFields=X;const G=D.get("XFA");b.hasXfa=Array.isArray(G)&&G.length>0||G instanceof a.BaseStream&&!G.isEmpty;const N=!!(D.get("SigFlags")&1),I=N&&this._hasOnlyDocumentSignatures(U);b.hasAcroForm=X&&!I,b.hasSignatures=N}catch(U){if(U instanceof c.MissingDataException)throw U;(0,o.warn)(`Cannot fetch form information: "${U}".`)}return(0,o.shadow)(this,"formInfo",b)}get documentInfo(){let b=this._version;(typeof b!="string"||!E.test(b))&&((0,o.warn)(`Invalid PDF header version number: ${b}`),b=null);const D={PDFFormatVersion:b,Language:this.catalog.lang,EncryptFilterName:this.xref.encrypt?this.xref.encrypt.filterName:null,IsLinearized:!!this.linearization,IsAcroFormPresent:this.formInfo.hasAcroForm,IsXFAPresent:this.formInfo.hasXfa,IsCollectionPresent:!!this.catalog.collection,IsSignaturesPresent:this.formInfo.hasSignatures};let U;try{U=this.xref.trailer.get("Info")}catch(X){if(X instanceof c.MissingDataException)throw X;(0,o.info)("The document information dictionary is invalid.")}if(!(U instanceof s.Dict))return(0,o.shadow)(this,"documentInfo",D);for(const X of U.getKeys()){const G=U.get(X);switch(X){case"Title":case"Author":case"Subject":case"Keywords":case"Creator":case"Producer":case"CreationDate":case"ModDate":if(typeof G=="string"){D[X]=(0,o.stringToPDFString)(G);continue}break;case"Trapped":if(G instanceof s.Name){D[X]=G;continue}break;default:let Y;switch(typeof G){case"string":Y=(0,o.stringToPDFString)(G);break;case"number":case"boolean":Y=G;break;default:G instanceof s.Name&&(Y=G);break}if(Y===void 0){(0,o.warn)(`Bad value, for custom key "${X}", in Info: ${G}.`);continue}D.Custom||(D.Custom=Object.create(null)),D.Custom[X]=Y;continue}(0,o.warn)(`Bad value, for key "${X}", in Info: ${G}.`)}return(0,o.shadow)(this,"documentInfo",D)}get fingerprints(){function b(Y){return typeof Y=="string"&&Y.length>0&&Y!==P}function D(Y){const N=[];for(let I=0,L=Y.length;I<L;I++){const $=Y[I].toString(16);N.push($.padStart(2,"0"))}return N.join("")}const U=this.xref.trailer.get("ID");let X,G;return Array.isArray(U)&&b(U[0])?(X=(0,o.stringToBytes)(U[0]),U[1]!==U[0]&&b(U[1])&&(G=(0,o.stringToBytes)(U[1]))):X=(0,r.calculateMD5)(this.stream.getByteRange(0,p),0,p),(0,o.shadow)(this,"fingerprints",[D(X),G?D(G):null])}async _getLinearizationPage(b){const{catalog:D,linearization:U,xref:X}=this,G=s.Ref.get(U.objectNumberFirst,0);try{const Y=await X.fetchAsync(G);if(Y instanceof s.Dict){let N=Y.getRaw("Type");if(N instanceof s.Ref&&(N=await X.fetchAsync(N)),(0,s.isName)(N,"Page")||!Y.has("Type")&&!Y.has("Kids"))return D.pageKidsCountCache.has(G)||D.pageKidsCountCache.put(G,1),D.pageIndexCache.has(G)||D.pageIndexCache.put(G,0),[Y,G]}throw new o.FormatError("The Linearization dictionary doesn't point to a valid Page dictionary.")}catch(Y){return(0,o.warn)(`_getLinearizationPage: "${Y.message}".`),D.getPageDict(b)}}getPage(b){const D=this._pagePromises.get(b);if(D)return D;const{catalog:U,linearization:X,xfaFactory:G}=this;let Y;return G?Y=Promise.resolve([s.Dict.empty,null]):X&&X.pageFirst===b?Y=this._getLinearizationPage(b):Y=U.getPageDict(b),Y=Y.then(([N,I])=>new O({pdfManager:this.pdfManager,xref:this.xref,pageIndex:b,pageDict:N,ref:I,globalIdFactory:this._globalIdFactory,fontCache:U.fontCache,builtInCMapCache:U.builtInCMapCache,standardFontDataCache:U.standardFontDataCache,globalImageCache:U.globalImageCache,nonBlendModesSet:U.nonBlendModesSet,xfaFactory:G})),this._pagePromises.set(b,Y),Y}async checkFirstPage(b=!1){if(!b)try{await this.getPage(0)}catch(D){if(D instanceof c.XRefEntryException)throw this._pagePromises.delete(0),await this.cleanup(),new c.XRefParseException}}async checkLastPage(b=!1){const{catalog:D,pdfManager:U}=this;D.setActualNumPages();let X;try{if(await Promise.all([U.ensureDoc("xfaFactory"),U.ensureDoc("linearization"),U.ensureCatalog("numPages")]),this.xfaFactory)return;if(this.linearization?X=this.linearization.numPages:X=D.numPages,Number.isInteger(X)){if(X<=1)return}else throw new o.FormatError("Page count is not an integer.");await this.getPage(X-1)}catch(G){if(this._pagePromises.delete(X-1),await this.cleanup(),G instanceof c.XRefEntryException&&!b)throw new c.XRefParseException;(0,o.warn)(`checkLastPage - invalid /Pages tree /Count: ${X}.`);let Y;try{Y=await D.getAllPageDicts(b)}catch(N){if(N instanceof c.XRefEntryException&&!b)throw new c.XRefParseException;D.setActualNumPages(1);return}for(const[N,[I,L]]of Y){let $;I instanceof Error?($=Promise.reject(I),$.catch(()=>{})):$=Promise.resolve(new O({pdfManager:U,xref:this.xref,pageIndex:N,pageDict:I,ref:L,globalIdFactory:this._globalIdFactory,fontCache:D.fontCache,builtInCMapCache:D.builtInCMapCache,standardFontDataCache:D.standardFontDataCache,globalImageCache:D.globalImageCache,nonBlendModesSet:D.nonBlendModesSet,xfaFactory:null})),this._pagePromises.set(N,$)}D.setActualNumPages(Y.size)}}fontFallback(b,D){return this.catalog.fontFallback(b,D)}async cleanup(b=!1){return this.catalog?this.catalog.cleanup(b):(0,l.clearGlobalCaches)()}_collectFieldObjects(b,D,U){const X=this.xref.fetchIfRef(D);if(X.has("T")){const G=(0,o.stringToPDFString)(X.get("T"));b===""?b=G:b=`${b}.${G}`}if(U.has(b)||U.set(b,[]),U.get(b).push(t.AnnotationFactory.create(this.xref,D,this.pdfManager,this._localIdFactory,!0).then(G=>G&&G.getFieldObject()).catch(function(G){return(0,o.warn)(`_collectFieldObjects: "${G}".`),null})),X.has("Kids")){const G=X.get("Kids");for(const Y of G)this._collectFieldObjects(b,Y,U)}}get fieldObjects(){if(!this.formInfo.hasFields)return(0,o.shadow)(this,"fieldObjects",Promise.resolve(null));const b=Object.create(null),D=new Map;for(const X of this.catalog.acroForm.get("Fields"))this._collectFieldObjects("",X,D);const U=[];for(const[X,G]of D)U.push(Promise.all(G).then(Y=>{Y=Y.filter(N=>!!N),Y.length>0&&(b[X]=Y)}));return(0,o.shadow)(this,"fieldObjects",Promise.all(U).then(()=>b))}get hasJSActions(){const b=this.pdfManager.ensureDoc("_parseHasJSActions");return(0,o.shadow)(this,"hasJSActions",b)}async _parseHasJSActions(){const[b,D]=await Promise.all([this.pdfManager.ensureCatalog("jsActions"),this.pdfManager.ensureDoc("fieldObjects")]);return b?!0:D?Object.values(D).some(U=>U.some(X=>X.actions!==null)):!1}get calculationOrderIds(){const b=this.catalog.acroForm;if(!b||!b.has("CO"))return(0,o.shadow)(this,"calculationOrderIds",null);const D=b.get("CO");if(!Array.isArray(D)||D.length===0)return(0,o.shadow)(this,"calculationOrderIds",null);const U=[];for(const X of D)X instanceof s.Ref&&U.push(X.toString());return U.length===0?(0,o.shadow)(this,"calculationOrderIds",null):(0,o.shadow)(this,"calculationOrderIds",U)}}f.PDFDocument=F},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PopupAnnotation=f.MarkupAnnotation=f.AnnotationFactory=f.AnnotationBorderStyle=f.Annotation=void 0,f.getQuadPoints=k;var t=h(2),o=h(6),c=h(13),s=h(5),e=h(65),a=h(7),r=h(60),n=h(69),l=h(14),u=h(72),d=h(75),i=h(62),g=h(10),x=h(76);class m{static create(B,H,q,Z,te){return Promise.all([q.ensureCatalog("acroForm"),q.ensureCatalog("baseUrl"),q.ensureDoc("xfaDatasets"),te?this._getPageIndex(B,H,q):-1]).then(([Q,ee,J,ne])=>q.ensure(this,"_create",[B,H,q,Z,Q,J,te,ne]))}static _create(B,H,q,Z,te,Q,ee,J=-1){const ne=B.fetchIfRef(H);if(!(ne instanceof s.Dict))return;const re=H instanceof s.Ref?H.toString():`annot_${Z.createObjId()}`;let ae=ne.get("Subtype");ae=ae instanceof s.Name?ae.name:null;const se={xref:B,ref:H,dict:ne,subtype:ae,id:re,pdfManager:q,acroForm:te instanceof s.Dict?te:s.Dict.empty,xfaDatasets:Q,collectFields:ee,pageIndex:J};switch(ae){case"Link":return new P(se);case"Text":return new p(se);case"Widget":let oe=(0,o.getInheritableProperty)({dict:ne,key:"FT"});switch(oe=oe instanceof s.Name?oe.name:null,oe){case"Tx":return new O(se);case"Btn":return new T(se);case"Ch":return new R(se);case"Sig":return new y(se)}return(0,t.warn)(`Unimplemented widget field type "${oe}", falling back to base field type.`),new j(se);case"Popup":return new E(se);case"FreeText":return new S(se);case"Line":return new F(se);case"Square":return new C(se);case"Circle":return new b(se);case"PolyLine":return new D(se);case"Polygon":return new U(se);case"Caret":return new X(se);case"Ink":return new G(se);case"Highlight":return new Y(se);case"Underline":return new N(se);case"Squiggly":return new I(se);case"StrikeOut":return new L(se);case"Stamp":return new $(se);case"FileAttachment":return new W(se);default:return ee||(ae?(0,t.warn)(`Unimplemented annotation type "${ae}", falling back to base annotation.`):(0,t.warn)("Annotation is missing the required /Subtype.")),new _(se)}}static async _getPageIndex(B,H,q){try{const Z=await B.fetchIfRefAsync(H);if(!(Z instanceof s.Dict))return-1;const te=Z.getRaw("P");return te instanceof s.Ref?await q.ensureCatalog("getPageIndex",[te]):-1}catch(Z){return(0,t.warn)(`_getPageIndex: "${Z}".`),-1}}static async saveNewAnnotations(B,H,q){const Z=B.xref;let te;const Q=[],ee=[];for(const J of q)switch(J.annotationType){case t.AnnotationEditorType.FREETEXT:if(!te){const ne=new s.Dict(Z);ne.set("BaseFont",s.Name.get("Helvetica")),ne.set("Type",s.Name.get("Font")),ne.set("Subtype",s.Name.get("Type1")),ne.set("Encoding",s.Name.get("WinAnsiEncoding"));const re=[];te=Z.getNewRef(),(0,e.writeObject)(te,ne,re,null),Q.push({ref:te,data:re.join("")})}ee.push(S.createNewAnnotation(Z,J,Q,{evaluator:B,task:H,baseFontRef:te}));break;case t.AnnotationEditorType.INK:ee.push(G.createNewAnnotation(Z,J,Q))}return{annotations:await Promise.all(ee),dependencies:Q}}static async printNewAnnotations(B,H,q){if(!q)return null;const Z=B.xref,te=[];for(const Q of q)switch(Q.annotationType){case t.AnnotationEditorType.FREETEXT:te.push(S.createNewPrintAnnotation(Z,Q,{evaluator:B,task:H}));break;case t.AnnotationEditorType.INK:te.push(G.createNewPrintAnnotation(Z,Q));break}return Promise.all(te)}}f.AnnotationFactory=m;function A(z,B=new Uint8ClampedArray(3)){if(!Array.isArray(z))return B;const H=B||new Uint8ClampedArray(3);switch(z.length){case 0:return null;case 1:return l.ColorSpace.singletons.gray.getRgbItem(z,0,H,0),H;case 3:return l.ColorSpace.singletons.rgb.getRgbItem(z,0,H,0),H;case 4:return l.ColorSpace.singletons.cmyk.getRgbItem(z,0,H,0),H;default:return B}}function k(z,B){if(!z.has("QuadPoints"))return null;const H=z.getArray("QuadPoints");if(!Array.isArray(H)||H.length===0||H.length%8>0)return null;const q=[];for(let Z=0,te=H.length/8;Z<te;Z++){q.push([]);for(let Q=Z*8,ee=Z*8+8;Q<ee;Q+=2){const J=H[Q],ne=H[Q+1];if(B!==null&&(J<B[0]||J>B[2]||ne<B[1]||ne>B[3]))return null;q[Z].push({x:J,y:ne})}}return q.map(Z=>{const[te,Q,ee,J]=Z.reduce(([ne,re,ae,se],oe)=>[Math.min(ne,oe.x),Math.max(re,oe.x),Math.min(ae,oe.y),Math.max(se,oe.y)],[Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE]);return[{x:te,y:J},{x:Q,y:J},{x:te,y:ee},{x:Q,y:ee}]})}function v(z,B,H){const[q,Z,te,Q]=t.Util.getAxialAlignedBoundingBox(B,H);if(q===te||Z===Q)return[1,0,0,1,z[0],z[1]];const ee=(z[2]-z[0])/(te-q),J=(z[3]-z[1])/(Q-Z);return[ee,0,0,J,z[0]-q*ee,z[1]-Z*J]}class _{constructor(B){const H=B.dict;this.setTitle(H.get("T")),this.setContents(H.get("Contents")),this.setModificationDate(H.get("M")),this.setFlags(H.get("F")),this.setRectangle(H.getArray("Rect")),this.setColor(H.getArray("C")),this.setBorderStyle(H),this.setAppearance(H),this.setOptionalContent(H);const q=H.get("MK");if(this.setBorderAndBackgroundColors(q),this.setRotation(q),this._streams=[],this.appearance&&this._streams.push(this.appearance),this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,backgroundColor:this.backgroundColor,borderColor:this.borderColor,rotation:this.rotation,contentsObj:this._contents,hasAppearance:!!this.appearance,id:B.id,modificationDate:this.modificationDate,rect:this.rectangle,subtype:B.subtype,hasOwnCanvas:!1},B.collectFields){const Z=H.get("Kids");if(Array.isArray(Z)){const te=[];for(const Q of Z)Q instanceof s.Ref&&te.push(Q.toString());te.length!==0&&(this.data.kidIds=te)}this.data.actions=(0,o.collectActions)(B.xref,H,t.AnnotationActionEventType),this.data.fieldName=this._constructFieldName(H),this.data.pageIndex=B.pageIndex}this._fallbackFontDict=null}_hasFlag(B,H){return!!(B&H)}_isViewable(B){return!this._hasFlag(B,t.AnnotationFlag.INVISIBLE)&&!this._hasFlag(B,t.AnnotationFlag.NOVIEW)}_isPrintable(B){return this._hasFlag(B,t.AnnotationFlag.PRINT)&&!this._hasFlag(B,t.AnnotationFlag.INVISIBLE)}mustBeViewed(B){const H=B&&B.get(this.data.id);return H&&H.hidden!==void 0?!H.hidden:this.viewable&&!this._hasFlag(this.flags,t.AnnotationFlag.HIDDEN)}mustBePrinted(B){const H=B&&B.get(this.data.id);return H&&H.print!==void 0?H.print:this.printable}get viewable(){return this.data.quadPoints===null?!1:this.flags===0?!0:this._isViewable(this.flags)}get printable(){return this.data.quadPoints===null||this.flags===0?!1:this._isPrintable(this.flags)}_parseStringHelper(B){const H=typeof B=="string"?(0,t.stringToPDFString)(B):"",q=H&&(0,r.bidi)(H).dir==="rtl"?"rtl":"ltr";return{str:H,dir:q}}setTitle(B){this._title=this._parseStringHelper(B)}setContents(B){this._contents=this._parseStringHelper(B)}setModificationDate(B){this.modificationDate=typeof B=="string"?B:null}setFlags(B){this.flags=Number.isInteger(B)&&B>0?B:0}hasFlag(B){return this._hasFlag(this.flags,B)}setRectangle(B){Array.isArray(B)&&B.length===4?this.rectangle=t.Util.normalizeRect(B):this.rectangle=[0,0,0,0]}setColor(B){this.color=A(B)}setLineEndings(B){if(this.lineEndings=["None","None"],Array.isArray(B)&&B.length===2)for(let H=0;H<2;H++){const q=B[H];if(q instanceof s.Name)switch(q.name){case"None":continue;case"Square":case"Circle":case"Diamond":case"OpenArrow":case"ClosedArrow":case"Butt":case"ROpenArrow":case"RClosedArrow":case"Slash":this.lineEndings[H]=q.name;continue}(0,t.warn)(`Ignoring invalid lineEnding: ${q}`)}}setRotation(B){if(this.rotation=0,B instanceof s.Dict){let H=B.get("R")||0;Number.isInteger(H)&&H!==0&&(H%=360,H<0&&(H+=360),H%90===0&&(this.rotation=H))}}setBorderAndBackgroundColors(B){B instanceof s.Dict?(this.borderColor=A(B.getArray("BC"),null),this.backgroundColor=A(B.getArray("BG"),null)):this.borderColor=this.backgroundColor=null}setBorderStyle(B){if(this.borderStyle=new K,B instanceof s.Dict)if(B.has("BS")){const H=B.get("BS"),q=H.get("Type");(!q||(0,s.isName)(q,"Border"))&&(this.borderStyle.setWidth(H.get("W"),this.rectangle),this.borderStyle.setStyle(H.get("S")),this.borderStyle.setDashArray(H.getArray("D")))}else if(B.has("Border")){const H=B.getArray("Border");Array.isArray(H)&&H.length>=3&&(this.borderStyle.setHorizontalCornerRadius(H[0]),this.borderStyle.setVerticalCornerRadius(H[1]),this.borderStyle.setWidth(H[2],this.rectangle),H.length===4&&this.borderStyle.setDashArray(H[3],!0))}else this.borderStyle.setWidth(0)}setAppearance(B){this.appearance=null;const H=B.get("AP");if(!(H instanceof s.Dict))return;const q=H.get("N");if(q instanceof a.BaseStream){this.appearance=q;return}if(!(q instanceof s.Dict))return;const Z=B.get("AS");!(Z instanceof s.Name)||!q.has(Z.name)||(this.appearance=q.get(Z.name))}setOptionalContent(B){this.oc=null;const H=B.get("OC");H instanceof s.Name?(0,t.warn)("setOptionalContent: Support for /Name-entry is not implemented."):H instanceof s.Dict&&(this.oc=H)}loadResources(B,H){return H.dict.getAsync("Resources").then(q=>q?new d.ObjectLoader(q,B,q.xref).load().then(function(){return q}):void 0)}async getOperatorList(B,H,q,Z,te){const Q=this.data;let ee=this.appearance;const J=!!(this.data.hasOwnCanvas&&q&t.RenderingIntentFlag.DISPLAY);if(!ee){if(!J)return{opList:new i.OperatorList,separateForm:!1,separateCanvas:!1};ee=new g.StringStream(""),ee.dict=new s.Dict}const ne=ee.dict,re=await this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"],ee),ae=ne.getArray("BBox")||[0,0,1,1],se=ne.getArray("Matrix")||[1,0,0,1,0,0],oe=v(Q.rect,ae,se),me=new i.OperatorList;let xe;return this.oc&&(xe=await B.parseMarkedContentProps(this.oc,null)),xe!==void 0&&me.addOp(t.OPS.beginMarkedContentProps,["OC",xe]),me.addOp(t.OPS.beginAnnotation,[Q.id,Q.rect,oe,se,J]),await B.getOperatorList({stream:ee,task:H,resources:re,operatorList:me,fallbackFontDict:this._fallbackFontDict}),me.addOp(t.OPS.endAnnotation,[]),xe!==void 0&&me.addOp(t.OPS.endMarkedContent,[]),this.reset(),{opList:me,separateForm:!1,separateCanvas:J}}async save(B,H,q){return null}get hasTextContent(){return!1}async extractTextContent(B,H,q){if(!this.appearance)return;const Z=await this.loadResources(["ExtGState","Font","Properties","XObject"],this.appearance),te=[],Q=[],ee={desiredSize:Math.Infinity,ready:!0,enqueue(J,ne){for(const re of J.items)Q.push(re.str),re.hasEOL&&(te.push(Q.join("")),Q.length=0)}};await B.getTextContent({stream:this.appearance,task:H,resources:Z,includeMarkedContent:!0,combineTextItems:!0,sink:ee,viewBox:q}),this.reset(),Q.length&&te.push(Q.join("")),te.length>0&&(this.data.textContent=te)}getFieldObject(){return this.data.kidIds?{id:this.data.id,actions:this.data.actions,name:this.data.fieldName,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:"",kidIds:this.data.kidIds,page:this.data.pageIndex,rotation:this.rotation}:null}reset(){for(const B of this._streams)B.reset()}_constructFieldName(B){if(!B.has("T")&&!B.has("Parent"))return(0,t.warn)("Unknown field name, falling back to empty field name."),"";if(!B.has("Parent"))return(0,t.stringToPDFString)(B.get("T"));const H=[];B.has("T")&&H.unshift((0,t.stringToPDFString)(B.get("T")));let q=B;const Z=new s.RefSet;for(B.objId&&Z.put(B.objId);q.has("Parent")&&(q=q.get("Parent"),!(!(q instanceof s.Dict)||q.objId&&Z.has(q.objId)));)q.objId&&Z.put(q.objId),q.has("T")&&H.unshift((0,t.stringToPDFString)(q.get("T")));return H.join(".")}}f.Annotation=_;class K{constructor(){this.width=1,this.style=t.AnnotationBorderStyleType.SOLID,this.dashArray=[3],this.horizontalCornerRadius=0,this.verticalCornerRadius=0}setWidth(B,H=[0,0,0,0]){if(B instanceof s.Name){this.width=0;return}if(typeof B=="number"){if(B>0){const q=(H[2]-H[0])/2,Z=(H[3]-H[1])/2;q>0&&Z>0&&(B>q||B>Z)&&((0,t.warn)(`AnnotationBorderStyle.setWidth - ignoring width: ${B}`),B=1)}this.width=B}}setStyle(B){if(B instanceof s.Name)switch(B.name){case"S":this.style=t.AnnotationBorderStyleType.SOLID;break;case"D":this.style=t.AnnotationBorderStyleType.DASHED;break;case"B":this.style=t.AnnotationBorderStyleType.BEVELED;break;case"I":this.style=t.AnnotationBorderStyleType.INSET;break;case"U":this.style=t.AnnotationBorderStyleType.UNDERLINE;break}}setDashArray(B,H=!1){if(Array.isArray(B)&&B.length>0){let q=!0,Z=!0;for(const te of B)if(+te>=0)te>0&&(Z=!1);else{q=!1;break}q&&!Z?(this.dashArray=B,H&&this.setStyle(s.Name.get("D"))):this.width=0}else B&&(this.width=0)}setHorizontalCornerRadius(B){Number.isInteger(B)&&(this.horizontalCornerRadius=B)}setVerticalCornerRadius(B){Number.isInteger(B)&&(this.verticalCornerRadius=B)}}f.AnnotationBorderStyle=K;class M extends _{constructor(B){super(B);const H=B.dict;if(H.has("IRT")){const q=H.getRaw("IRT");this.data.inReplyTo=q instanceof s.Ref?q.toString():null;const Z=H.get("RT");this.data.replyType=Z instanceof s.Name?Z.name:t.AnnotationReplyType.REPLY}if(this.data.replyType===t.AnnotationReplyType.GROUP){const q=H.get("IRT");this.setTitle(q.get("T")),this.data.titleObj=this._title,this.setContents(q.get("Contents")),this.data.contentsObj=this._contents,q.has("CreationDate")?(this.setCreationDate(q.get("CreationDate")),this.data.creationDate=this.creationDate):this.data.creationDate=null,q.has("M")?(this.setModificationDate(q.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,this.data.hasPopup=q.has("Popup"),q.has("C")?(this.setColor(q.getArray("C")),this.data.color=this.color):this.data.color=null}else this.data.titleObj=this._title,this.setCreationDate(H.get("CreationDate")),this.data.creationDate=this.creationDate,this.data.hasPopup=H.has("Popup"),H.has("C")||(this.data.color=null);H.has("RC")&&(this.data.richText=x.XFAFactory.getRichTextAsHtml(H.get("RC")))}setCreationDate(B){this.creationDate=typeof B=="string"?B:null}_setDefaultAppearance({xref:B,extra:H,strokeColor:q,fillColor:Z,blendMode:te,strokeAlpha:Q,fillAlpha:ee,pointsCallback:J}){let ne=Number.MAX_VALUE,re=Number.MAX_VALUE,ae=Number.MIN_VALUE,se=Number.MIN_VALUE;const oe=["q"];H&&oe.push(H),q&&oe.push(`${q[0]} ${q[1]} ${q[2]} RG`),Z&&oe.push(`${Z[0]} ${Z[1]} ${Z[2]} rg`);let me=this.data.quadPoints;me||(me=[[{x:this.rectangle[0],y:this.rectangle[3]},{x:this.rectangle[2],y:this.rectangle[3]},{x:this.rectangle[0],y:this.rectangle[1]},{x:this.rectangle[2],y:this.rectangle[1]}]]);for(const he of me){const[ce,Te,Re,He]=J(oe,he);ne=Math.min(ne,ce),ae=Math.max(ae,Te),re=Math.min(re,Re),se=Math.max(se,He)}oe.push("Q");const xe=new s.Dict(B),Ae=new s.Dict(B);Ae.set("Subtype",s.Name.get("Form"));const Se=new g.StringStream(oe.join(" "));Se.dict=Ae,xe.set("Fm0",Se);const Fe=new s.Dict(B);te&&Fe.set("BM",s.Name.get(te)),typeof Q=="number"&&Fe.set("CA",Q),typeof ee=="number"&&Fe.set("ca",ee);const Pe=new s.Dict(B);Pe.set("GS0",Fe);const ue=new s.Dict(B);ue.set("ExtGState",Pe),ue.set("XObject",xe);const ye=new s.Dict(B);ye.set("Resources",ue);const le=this.data.rect=[ne,re,ae,se];ye.set("BBox",le),this.appearance=new g.StringStream("/GS0 gs /Fm0 Do"),this.appearance.dict=ye,this._streams.push(this.appearance,Se)}static async createNewAnnotation(B,H,q,Z){const te=B.getNewRef(),Q=B.getNewRef(),ee=this.createNewDict(H,B,{apRef:Q}),J=await this.createNewAppearanceStream(H,B,Z),ne=[];let re=B.encrypt?B.encrypt.createCipherTransform(Q.num,Q.gen):null;return(0,e.writeObject)(Q,J,ne,re),q.push({ref:Q,data:ne.join("")}),ne.length=0,re=B.encrypt?B.encrypt.createCipherTransform(te.num,te.gen):null,(0,e.writeObject)(te,ee,ne,re),{ref:te,data:ne.join("")}}static async createNewPrintAnnotation(B,H,q){const Z=await this.createNewAppearanceStream(H,B,q),te=this.createNewDict(H,B,{ap:Z});return new this.prototype.constructor({dict:te,xref:B})}}f.MarkupAnnotation=M;class j extends _{constructor(B){super(B);const H=B.dict,q=this.data;this.ref=B.ref,q.annotationType=t.AnnotationType.WIDGET,q.fieldName===void 0&&(q.fieldName=this._constructFieldName(H)),q.actions===void 0&&(q.actions=(0,o.collectActions)(B.xref,H,t.AnnotationActionEventType));let Z=(0,o.getInheritableProperty)({dict:H,key:"V",getArray:!0});q.fieldValue=this._decodeFormValue(Z);const te=(0,o.getInheritableProperty)({dict:H,key:"DV",getArray:!0});if(q.defaultFieldValue=this._decodeFormValue(te),Z===void 0&&B.xfaDatasets){const ae=this._title.str;ae&&(this._hasValueFromXFA=!0,q.fieldValue=Z=B.xfaDatasets.getValue(ae))}Z===void 0&&q.defaultFieldValue!==null&&(q.fieldValue=q.defaultFieldValue),q.alternativeText=(0,t.stringToPDFString)(H.get("TU")||"");const Q=(0,o.getInheritableProperty)({dict:H,key:"DA"})||B.acroForm.get("DA");this._defaultAppearance=typeof Q=="string"?Q:"",q.defaultAppearanceData=(0,c.parseDefaultAppearance)(this._defaultAppearance);const ee=(0,o.getInheritableProperty)({dict:H,key:"FT"});q.fieldType=ee instanceof s.Name?ee.name:null;const J=(0,o.getInheritableProperty)({dict:H,key:"DR"}),ne=B.acroForm.get("DR"),re=this.appearance&&this.appearance.dict.get("Resources");this._fieldResources={localResources:J,acroFormResources:ne,appearanceResources:re,mergedResources:s.Dict.merge({xref:B.xref,dictArray:[J,re,ne],mergeSubDicts:!0})},q.fieldFlags=(0,o.getInheritableProperty)({dict:H,key:"Ff"}),(!Number.isInteger(q.fieldFlags)||q.fieldFlags<0)&&(q.fieldFlags=0),q.readOnly=this.hasFieldFlag(t.AnnotationFieldFlag.READONLY),q.required=this.hasFieldFlag(t.AnnotationFieldFlag.REQUIRED),q.hidden=this._hasFlag(q.annotationFlags,t.AnnotationFlag.HIDDEN)}_decodeFormValue(B){return Array.isArray(B)?B.filter(H=>typeof H=="string").map(H=>(0,t.stringToPDFString)(H)):B instanceof s.Name?(0,t.stringToPDFString)(B.name):typeof B=="string"?(0,t.stringToPDFString)(B):null}hasFieldFlag(B){return!!(this.data.fieldFlags&B)}static _getRotationMatrix(B,H,q){switch(B){case 90:return[0,1,-1,0,H,0];case 180:return[-1,0,0,-1,H,q];case 270:return[0,-1,1,0,0,q];default:throw new Error("Invalid rotation")}}getRotationMatrix(B){const H=B?B.get(this.data.id):void 0;let q=H&&H.rotation;if(q===void 0&&(q=this.rotation),q===0)return t.IDENTITY_MATRIX;const Z=this.data.rect[2]-this.data.rect[0],te=this.data.rect[3]-this.data.rect[1];return j._getRotationMatrix(q,Z,te)}getBorderAndBackgroundAppearances(B){const H=B?B.get(this.data.id):void 0;let q=H&&H.rotation;if(q===void 0&&(q=this.rotation),!this.backgroundColor&&!this.borderColor)return"";const Z=this.data.rect[2]-this.data.rect[0],te=this.data.rect[3]-this.data.rect[1],Q=q===0||q===180?`0 0 ${Z} ${te} re`:`0 0 ${te} ${Z} re`;let ee="";if(this.backgroundColor&&(ee=`${(0,c.getPdfColor)(this.backgroundColor,!0)} ${Q} f `),this.borderColor){const J=this.borderStyle.width||1;ee+=`${J} w ${(0,c.getPdfColor)(this.borderColor,!1)} ${Q} S `}return ee}async getOperatorList(B,H,q,Z,te){if(Z&&!(this instanceof y))return{opList:new i.OperatorList,separateForm:!0,separateCanvas:!1};if(!this._hasText)return super.getOperatorList(B,H,q,Z,te);const Q=await this._getAppearance(B,H,te);if(this.appearance&&Q===null)return super.getOperatorList(B,H,q,Z,te);const ee=new i.OperatorList;if(!this._defaultAppearance||Q===null)return{opList:ee,separateForm:!1,separateCanvas:!1};const J=[1,0,0,1,0,0],ne=[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]],re=v(this.data.rect,ne,J);let ae;this.oc&&(ae=await B.parseMarkedContentProps(this.oc,null)),ae!==void 0&&ee.addOp(t.OPS.beginMarkedContentProps,["OC",ae]),ee.addOp(t.OPS.beginAnnotation,[this.data.id,this.data.rect,re,this.getRotationMatrix(te),!1]);const se=new g.StringStream(Q);return await B.getOperatorList({stream:se,task:H,resources:this._fieldResources.mergedResources,operatorList:ee}),ee.addOp(t.OPS.endAnnotation,[]),ae!==void 0&&ee.addOp(t.OPS.endMarkedContent,[]),{opList:ee,separateForm:!1,separateCanvas:!1}}_getMKDict(B){const H=new s.Dict(null);return B&&H.set("R",B),this.borderColor&&H.set("BC",Array.from(this.borderColor).map(q=>q/255)),this.backgroundColor&&H.set("BG",Array.from(this.backgroundColor).map(q=>q/255)),H.size>0?H:null}async save(B,H,q){const Z=q?q.get(this.data.id):void 0;let te=Z&&Z.value,Q=Z&&Z.rotation;if(te===this.data.fieldValue||te===void 0){if(!this._hasValueFromXFA&&Q===void 0)return null;te=te||this.data.fieldValue}if(Q===void 0&&!this._hasValueFromXFA&&Array.isArray(te)&&Array.isArray(this.data.fieldValue)&&te.length===this.data.fieldValue.length&&te.every((he,ce)=>he===this.data.fieldValue[ce]))return null;Q===void 0&&(Q=this.rotation);let ee=await this._getAppearance(B,H,q);if(ee===null)return null;const{xref:J}=B,ne=J.fetchIfRef(this.ref);if(!(ne instanceof s.Dict))return null;const re=[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]],ae={path:(0,t.stringToPDFString)(ne.get("T")||""),value:te},se=J.getNewRef(),oe=new s.Dict(J);oe.set("N",se);const me=J.encrypt;let xe=null,Ae=null;me&&(xe=me.createCipherTransform(this.ref.num,this.ref.gen),Ae=me.createCipherTransform(se.num,se.gen),ee=Ae.encryptString(ee));const Se=he=>(0,t.isAscii)(he)?he:(0,t.stringToUTF16BEString)(he);ne.set("V",Array.isArray(te)?te.map(Se):Se(te)),ne.set("AP",oe),ne.set("M",`D:${(0,t.getModificationDate)()}`);const Fe=this._getMKDict(Q);Fe&&ne.set("MK",Fe);const Pe=new s.Dict(J);Pe.set("Length",ee.length),Pe.set("Subtype",s.Name.get("Form")),Pe.set("Resources",this._getSaveFieldResources(J)),Pe.set("BBox",re);const ue=this.getRotationMatrix(q);ue!==t.IDENTITY_MATRIX&&Pe.set("Matrix",ue);const ye=[`${this.ref.num} ${this.ref.gen} obj
`];(0,e.writeDict)(ne,ye,xe),ye.push(`
endobj
`);const le=[`${se.num} ${se.gen} obj
`];return(0,e.writeDict)(Pe,le,Ae),le.push(` stream
`,ee,`
endstream
endobj
`),[{ref:this.ref,data:ye.join(""),xfa:ae},{ref:se,data:le.join(""),xfa:null}]}async _getAppearance(B,H,q){if(this.hasFieldFlag(t.AnnotationFieldFlag.PASSWORD))return null;const te=q?q.get(this.data.id):void 0;let Q,ee;if(te&&(Q=te.formattedValue||te.value,ee=te.rotation),ee===void 0&&Q===void 0&&(!this._hasValueFromXFA||this.appearance))return null;if(Q===void 0&&(Q=this.data.fieldValue,!Q)||(Array.isArray(Q)&&Q.length===1&&(Q=Q[0]),(0,t.assert)(typeof Q=="string","Expected `value` to be a string."),Q=Q.trim(),Q===""))return"";ee===void 0&&(ee=this.rotation);let J=-1;this.data.multiLine&&(J=Q.split(/\r\n|\r|\n/).length);const ne=2,re=ne;let ae=this.data.rect[3]-this.data.rect[1],se=this.data.rect[2]-this.data.rect[0];(ee===90||ee===270)&&([se,ae]=[ae,se]),this._defaultAppearance||(this.data.defaultAppearanceData=(0,c.parseDefaultAppearance)(this._defaultAppearance="/Helvetica 0 Tf 0 g"));const oe=await j._getFontData(B,H,this.data.defaultAppearanceData,this._fieldResources.mergedResources),[me,xe]=this._computeFontSize(ae-ne,se-2*re,Q,oe,J);let Ae=oe.descent;isNaN(Ae)&&(Ae=0);const Fe=Math.min(Math.floor((ae-xe)/2),ne)+Math.abs(Ae)*xe,Pe=this.data.textAlignment;if(this.data.multiLine)return this._getMultilineAppearance(me,Q,oe,xe,se,ae,Pe,re,Fe,q);const ue=oe.encodeString(Q).join("");if(this.data.comb)return this._getCombAppearance(me,oe,ue,se,re,Fe,q);const ye=this.getBorderAndBackgroundAppearances(q);if(Pe===0||Pe>2)return`/Tx BMC q ${ye}BT `+me+` 1 0 0 1 ${re} ${Fe} Tm (${(0,t.escapeString)(ue)}) Tj ET Q EMC`;const le=this._renderText(ue,oe,xe,se,Pe,re,Fe);return`/Tx BMC q ${ye}BT `+me+` 1 0 0 1 0 0 Tm ${le} ET Q EMC`}static async _getFontData(B,H,q,Z){const te=new i.OperatorList,Q={font:null,clone(){return this}},{fontName:ee,fontSize:J}=q;return await B.handleSetFont(Z,[ee&&s.Name.get(ee),J],null,te,H,Q,null),Q.font}_getTextWidth(B,H){return H.charsToGlyphs(B).reduce((q,Z)=>q+Z.width,0)/1e3}_computeFontSize(B,H,q,Z,te){let{fontSize:Q}=this.data.defaultAppearanceData;if(!Q){const ee=re=>Math.floor(re*100)/100;if(te===-1){const re=this._getTextWidth(q,Z);Q=ee(Math.min(B/t.LINE_FACTOR,H/re))}else{const re=q.split(/\r\n?|\n/),ae=[];for(const xe of re){const Ae=Z.encodeString(xe).join(""),Se=Z.charsToGlyphs(Ae),Fe=Z.getCharPositions(Ae);ae.push({line:Ae,glyphs:Se,positions:Fe})}const se=xe=>{let Ae=0;for(const Se of ae){const Fe=this._splitLine(null,Z,xe,H,Se);if(Ae+=Fe.length*xe,Ae>B)return!0}return!1};Q=12;let oe=Q*t.LINE_FACTOR,me=Math.round(B/oe);for(me=Math.max(me,te);;){if(oe=B/me,Q=ee(oe/t.LINE_FACTOR),se(Q)){me++;continue}break}}const{fontName:J,fontColor:ne}=this.data.defaultAppearanceData;this._defaultAppearance=(0,c.createDefaultAppearance)({fontSize:Q,fontName:J,fontColor:ne})}return[this._defaultAppearance,Q]}_renderText(B,H,q,Z,te,Q,ee){let J;if(te===1){const ne=this._getTextWidth(B,H)*q;J=(Z-ne)/2}else if(te===2){const ne=this._getTextWidth(B,H)*q;J=Z-ne-Q}else J=Q;return J=(0,o.numberToString)(J),ee=(0,o.numberToString)(ee),`${J} ${ee} Td (${(0,t.escapeString)(B)}) Tj`}_getSaveFieldResources(B){const{localResources:H,appearanceResources:q,acroFormResources:Z}=this._fieldResources,te=this.data.defaultAppearanceData&&this.data.defaultAppearanceData.fontName;if(!te)return H||s.Dict.empty;for(const Q of[H,q])if(Q instanceof s.Dict){const ee=Q.get("Font");if(ee instanceof s.Dict&&ee.has(te))return Q}if(Z instanceof s.Dict){const Q=Z.get("Font");if(Q instanceof s.Dict&&Q.has(te)){const ee=new s.Dict(B);ee.set(te,Q.getRaw(te));const J=new s.Dict(B);return J.set("Font",ee),s.Dict.merge({xref:B,dictArray:[J,H],mergeSubDicts:!0})}}return H||s.Dict.empty}getFieldObject(){return null}}class O extends j{constructor(B){super(B),this._hasText=!0;const H=B.dict;typeof this.data.fieldValue!="string"&&(this.data.fieldValue="");let q=(0,o.getInheritableProperty)({dict:H,key:"Q"});(!Number.isInteger(q)||q<0||q>2)&&(q=null),this.data.textAlignment=q;let Z=(0,o.getInheritableProperty)({dict:H,key:"MaxLen"});(!Number.isInteger(Z)||Z<0)&&(Z=0),this.data.maxLen=Z,this.data.multiLine=this.hasFieldFlag(t.AnnotationFieldFlag.MULTILINE),this.data.comb=this.hasFieldFlag(t.AnnotationFieldFlag.COMB)&&!this.hasFieldFlag(t.AnnotationFieldFlag.MULTILINE)&&!this.hasFieldFlag(t.AnnotationFieldFlag.PASSWORD)&&!this.hasFieldFlag(t.AnnotationFieldFlag.FILESELECT)&&this.data.maxLen!==0,this.data.doNotScroll=this.hasFieldFlag(t.AnnotationFieldFlag.DONOTSCROLL)}_getCombAppearance(B,H,q,Z,te,Q,ee){const J=(0,o.numberToString)(Z/this.data.maxLen),ne=[],re=H.getCharPositions(q);for(const[oe,me]of re)ne.push(`(${(0,t.escapeString)(q.substring(oe,me))}) Tj`);const ae=this.getBorderAndBackgroundAppearances(ee),se=ne.join(` ${J} 0 Td `);return`/Tx BMC q ${ae}BT `+B+` 1 0 0 1 ${te} ${Q} Tm ${se} ET Q EMC`}_getMultilineAppearance(B,H,q,Z,te,Q,ee,J,ne,re){const ae=H.split(/\r\n?|\n/),se=[],oe=te-2*J;for(const Ae of ae){const Se=this._splitLine(Ae,q,Z,oe);for(const Fe of Se){const Pe=se.length===0?J:0;se.push(this._renderText(Fe,q,Z,te,ee,Pe,-Z))}}const me=se.join(`
`);return`/Tx BMC q ${this.getBorderAndBackgroundAppearances(re)}BT `+B+` 1 0 0 1 0 ${Q} Tm ${me} ET Q EMC`}_splitLine(B,H,q,Z,te={}){B=te.line||H.encodeString(B).join("");const Q=te.glyphs||H.charsToGlyphs(B);if(Q.length<=1)return[B];const ee=te.positions||H.getCharPositions(B),J=q/1e3,ne=[];let re=-1,ae=-1,se=-1,oe=0,me=0;for(let xe=0,Ae=Q.length;xe<Ae;xe++){const[Se,Fe]=ee[xe],Pe=Q[xe],ue=Pe.width*J;Pe.unicode===" "?me+ue>Z?(ne.push(B.substring(oe,Se)),oe=Se,me=ue,re=-1,se=-1):(me+=ue,re=Se,ae=Fe,se=xe):me+ue>Z?re!==-1?(ne.push(B.substring(oe,ae)),oe=ae,xe=se+1,re=-1,me=0):(ne.push(B.substring(oe,Se)),oe=Se,me=ue):me+=ue}return oe<B.length&&ne.push(B.substring(oe,B.length)),ne}getFieldObject(){return{id:this.data.id,value:this.data.fieldValue,defaultValue:this.data.defaultFieldValue||"",multiline:this.data.multiLine,password:this.hasFieldFlag(t.AnnotationFieldFlag.PASSWORD),charLimit:this.data.maxLen,comb:this.data.comb,editable:!this.data.readOnly,hidden:this.data.hidden,name:this.data.fieldName,rect:this.data.rect,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:"text"}}}class T extends j{constructor(B){super(B),this.checkedAppearance=null,this.uncheckedAppearance=null,this.data.checkBox=!this.hasFieldFlag(t.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(t.AnnotationFieldFlag.PUSHBUTTON),this.data.radioButton=this.hasFieldFlag(t.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(t.AnnotationFieldFlag.PUSHBUTTON),this.data.pushButton=this.hasFieldFlag(t.AnnotationFieldFlag.PUSHBUTTON),this.data.isTooltipOnly=!1,this.data.checkBox?this._processCheckBox(B):this.data.radioButton?this._processRadioButton(B):this.data.pushButton?(this.data.hasOwnCanvas=!0,this._processPushButton(B)):(0,t.warn)("Invalid field flags for button widget annotation")}async getOperatorList(B,H,q,Z,te){if(this.data.pushButton)return super.getOperatorList(B,H,q,!1,te);let Q=null,ee=null;if(te){const ne=te.get(this.data.id);Q=ne?ne.value:null,ee=ne?ne.rotation:null}if(Q===null&&this.appearance)return super.getOperatorList(B,H,q,Z,te);Q==null&&(this.data.checkBox?Q=this.data.fieldValue===this.data.exportValue:Q=this.data.fieldValue===this.data.buttonValue);const J=Q?this.checkedAppearance:this.uncheckedAppearance;if(J){const ne=this.appearance,re=J.dict.getArray("Matrix")||t.IDENTITY_MATRIX;ee&&J.dict.set("Matrix",this.getRotationMatrix(te)),this.appearance=J;const ae=super.getOperatorList(B,H,q,Z,te);return this.appearance=ne,J.dict.set("Matrix",re),ae}return{opList:new i.OperatorList,separateForm:!1,separateCanvas:!1}}async save(B,H,q){return this.data.checkBox?this._saveCheckbox(B,H,q):this.data.radioButton?this._saveRadioButton(B,H,q):null}async _saveCheckbox(B,H,q){if(!q)return null;const Z=q.get(this.data.id);let te=Z&&Z.rotation,Q=Z&&Z.value;if(te===void 0&&(Q===void 0||this.data.fieldValue===this.data.exportValue===Q))return null;const ee=B.xref.fetchIfRef(this.ref);if(!(ee instanceof s.Dict))return null;te===void 0&&(te=this.rotation),Q===void 0&&(Q=this.data.fieldValue===this.data.exportValue);const J={path:(0,t.stringToPDFString)(ee.get("T")||""),value:Q?this.data.exportValue:""},ne=s.Name.get(Q?this.data.exportValue:"Off");ee.set("V",ne),ee.set("AS",ne),ee.set("M",`D:${(0,t.getModificationDate)()}`);const re=this._getMKDict(te);re&&ee.set("MK",re);const ae=B.xref.encrypt;let se=null;ae&&(se=ae.createCipherTransform(this.ref.num,this.ref.gen));const oe=[`${this.ref.num} ${this.ref.gen} obj
`];return(0,e.writeDict)(ee,oe,se),oe.push(`
endobj
`),[{ref:this.ref,data:oe.join(""),xfa:J}]}async _saveRadioButton(B,H,q){if(!q)return null;const Z=q.get(this.data.id);let te=Z&&Z.rotation,Q=Z&&Z.value;if(te===void 0&&(Q===void 0||this.data.fieldValue===this.data.buttonValue===Q))return null;const ee=B.xref.fetchIfRef(this.ref);if(!(ee instanceof s.Dict))return null;Q===void 0&&(Q=this.data.fieldValue===this.data.buttonValue),te===void 0&&(te=this.rotation);const J={path:(0,t.stringToPDFString)(ee.get("T")||""),value:Q?this.data.buttonValue:""},ne=s.Name.get(Q?this.data.buttonValue:"Off");let re=null;const ae=B.xref.encrypt;if(Q)if(this.parent instanceof s.Ref){const Ae=B.xref.fetch(this.parent);let Se=null;ae&&(Se=ae.createCipherTransform(this.parent.num,this.parent.gen)),Ae.set("V",ne),re=[`${this.parent.num} ${this.parent.gen} obj
`],(0,e.writeDict)(Ae,re,Se),re.push(`
endobj
`)}else this.parent instanceof s.Dict&&this.parent.set("V",ne);ee.set("AS",ne),ee.set("M",`D:${(0,t.getModificationDate)()}`);const se=this._getMKDict(te);se&&ee.set("MK",se);let oe=null;ae&&(oe=ae.createCipherTransform(this.ref.num,this.ref.gen));const me=[`${this.ref.num} ${this.ref.gen} obj
`];(0,e.writeDict)(ee,me,oe),me.push(`
endobj
`);const xe=[{ref:this.ref,data:me.join(""),xfa:J}];return re!==null&&xe.push({ref:this.parent,data:re.join(""),xfa:null}),xe}_getDefaultCheckedAppearance(B,H){const q=this.data.rect[2]-this.data.rect[0],Z=this.data.rect[3]-this.data.rect[1],te=[0,0,q,Z],Q=.8,ee=Math.min(q,Z)*Q;let J,ne;H==="check"?(J={width:.755*ee,height:.705*ee},ne="3"):H==="disc"?(J={width:.791*ee,height:.705*ee},ne="l"):(0,t.unreachable)(`_getDefaultCheckedAppearance - unsupported type: ${H}`);const re=(0,o.numberToString)((q-J.width)/2),ae=(0,o.numberToString)((Z-J.height)/2),se=`q BT /PdfJsZaDb ${ee} Tf 0 g ${re} ${ae} Td (${ne}) Tj ET Q`,oe=new s.Dict(B.xref);oe.set("FormType",1),oe.set("Subtype",s.Name.get("Form")),oe.set("Type",s.Name.get("XObject")),oe.set("BBox",te),oe.set("Matrix",[1,0,0,1,0,0]),oe.set("Length",se.length);const me=new s.Dict(B.xref),xe=new s.Dict(B.xref);xe.set("PdfJsZaDb",this.fallbackFontDict),me.set("Font",xe),oe.set("Resources",me),this.checkedAppearance=new g.StringStream(se),this.checkedAppearance.dict=oe,this._streams.push(this.checkedAppearance)}_processCheckBox(B){const H=B.dict.get("AP");if(!(H instanceof s.Dict))return;const q=H.get("N");if(!(q instanceof s.Dict))return;const Z=this._decodeFormValue(B.dict.get("AS"));typeof Z=="string"&&(this.data.fieldValue=Z);const te=this.data.fieldValue!==null&&this.data.fieldValue!=="Off"?this.data.fieldValue:"Yes",Q=q.getKeys();if(Q.length===0)Q.push("Off",te);else if(Q.length===1)Q[0]==="Off"?Q.push(te):Q.unshift("Off");else if(Q.includes(te))Q.length=0,Q.push("Off",te);else{const ee=Q.find(J=>J!=="Off");Q.length=0,Q.push("Off",ee)}Q.includes(this.data.fieldValue)||(this.data.fieldValue="Off"),this.data.exportValue=Q[1],this.checkedAppearance=q.get(this.data.exportValue)||null,this.uncheckedAppearance=q.get("Off")||null,this.checkedAppearance?this._streams.push(this.checkedAppearance):this._getDefaultCheckedAppearance(B,"check"),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict}_processRadioButton(B){this.data.fieldValue=this.data.buttonValue=null;const H=B.dict.get("Parent");if(H instanceof s.Dict){this.parent=B.dict.getRaw("Parent");const te=H.get("V");te instanceof s.Name&&(this.data.fieldValue=this._decodeFormValue(te))}const q=B.dict.get("AP");if(!(q instanceof s.Dict))return;const Z=q.get("N");if(Z instanceof s.Dict){for(const te of Z.getKeys())if(te!=="Off"){this.data.buttonValue=this._decodeFormValue(te);break}this.checkedAppearance=Z.get(this.data.buttonValue)||null,this.uncheckedAppearance=Z.get("Off")||null,this.checkedAppearance?this._streams.push(this.checkedAppearance):this._getDefaultCheckedAppearance(B,"disc"),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict}}_processPushButton(B){if(!B.dict.has("A")&&!B.dict.has("AA")&&!this.data.alternativeText){(0,t.warn)("Push buttons without action dictionaries are not supported");return}this.data.isTooltipOnly=!B.dict.has("A")&&!B.dict.has("AA"),n.Catalog.parseDestDictionary({destDict:B.dict,resultObj:this.data,docBaseUrl:B.pdfManager.docBaseUrl})}getFieldObject(){let B="button",H;return this.data.checkBox?(B="checkbox",H=this.data.exportValue):this.data.radioButton&&(B="radiobutton",H=this.data.buttonValue),{id:this.data.id,value:this.data.fieldValue||"Off",defaultValue:this.data.defaultFieldValue,exportValues:H,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,hidden:this.data.hidden,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:B}}get fallbackFontDict(){const B=new s.Dict;return B.set("BaseFont",s.Name.get("ZapfDingbats")),B.set("Type",s.Name.get("FallbackType")),B.set("Subtype",s.Name.get("FallbackType")),B.set("Encoding",s.Name.get("ZapfDingbatsEncoding")),(0,t.shadow)(this,"fallbackFontDict",B)}}class R extends j{constructor(B){super(B),this.data.options=[];const H=(0,o.getInheritableProperty)({dict:B.dict,key:"Opt"});if(Array.isArray(H)){const q=B.xref;for(let Z=0,te=H.length;Z<te;Z++){const Q=q.fetchIfRef(H[Z]),ee=Array.isArray(Q);this.data.options[Z]={exportValue:this._decodeFormValue(ee?q.fetchIfRef(Q[0]):Q),displayValue:this._decodeFormValue(ee?q.fetchIfRef(Q[1]):Q)}}}typeof this.data.fieldValue=="string"?this.data.fieldValue=[this.data.fieldValue]:this.data.fieldValue||(this.data.fieldValue=[]),this.data.combo=this.hasFieldFlag(t.AnnotationFieldFlag.COMBO),this.data.multiSelect=this.hasFieldFlag(t.AnnotationFieldFlag.MULTISELECT),this._hasText=!0}getFieldObject(){const B=this.data.combo?"combobox":"listbox",H=this.data.fieldValue.length>0?this.data.fieldValue[0]:null;return{id:this.data.id,value:H,defaultValue:this.data.defaultFieldValue,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,numItems:this.data.fieldValue.length,multipleSelection:this.data.multiSelect,hidden:this.data.hidden,actions:this.data.actions,items:this.data.options,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:B}}async _getAppearance(B,H,q){if(this.data.combo)return super._getAppearance(B,H,q);if(!q)return null;const Z=q.get(this.data.id);if(!Z)return null;const te=Z.rotation;let Q=Z.value;if(te===void 0&&Q===void 0)return null;Q===void 0?Q=this.data.fieldValue:Array.isArray(Q)||(Q=[Q]);const ee=2,J=ee;let ne=this.data.rect[3]-this.data.rect[1],re=this.data.rect[2]-this.data.rect[0];(te===90||te===270)&&([re,ne]=[ne,re]);const ae=this.data.options.length,se=[];for(let le=0;le<ae;le++){const{exportValue:he}=this.data.options[le];Q.includes(he)&&se.push(le)}this._defaultAppearance||(this.data.defaultAppearanceData=(0,c.parseDefaultAppearance)(this._defaultAppearance="/Helvetica 0 Tf 0 g"));const oe=await j._getFontData(B,H,this.data.defaultAppearanceData,this._fieldResources.mergedResources);let me,{fontSize:xe}=this.data.defaultAppearanceData;if(xe)me=this._defaultAppearance;else{const le=(ne-ee)/ae;let he=-1,ce;for(const{displayValue:Te}of this.data.options){const Re=this._getTextWidth(Te,oe);Re>he&&(he=Re,ce=Te)}[me,xe]=this._computeFontSize(le,re-2*J,ce,oe,-1)}const Ae=xe*t.LINE_FACTOR,Se=(Ae-xe)/2,Fe=Math.floor(ne/Ae);let Pe;if(se.length===1){const le=se[0],he=le%Fe;Pe=le-he}else Pe=se.length?se[0]:0;const ue=Math.min(Pe+Fe+1,ae),ye=["/Tx BMC q",`1 1 ${re} ${ne} re W n`];if(se.length){ye.push("0.600006 0.756866 0.854904 rg");for(const le of se)Pe<=le&&le<ue&&ye.push(`1 ${ne-(le-Pe+1)*Ae} ${re} ${Ae} re f`)}ye.push("BT",me,`1 0 0 1 0 ${ne} Tm`);for(let le=Pe;le<ue;le++){const{displayValue:he}=this.data.options[le],ce=le===Pe?J:0,Te=le===Pe?Se:0;ye.push(this._renderText(he,oe,xe,re,0,ce,-Ae+Te))}return ye.push("ET Q EMC"),ye.join(`
`)}}class y extends j{constructor(B){super(B),this.data.fieldValue=null}getFieldObject(){return{id:this.data.id,value:null,page:this.data.pageIndex,type:"signature"}}}class p extends M{constructor(B){super(B);const q=B.dict;this.data.annotationType=t.AnnotationType.TEXT,this.data.hasAppearance?this.data.name="NoIcon":(this.data.rect[1]=this.data.rect[3]-22,this.data.rect[2]=this.data.rect[0]+22,this.data.name=q.has("Name")?q.get("Name").name:"Note"),q.has("State")?(this.data.state=q.get("State")||null,this.data.stateModel=q.get("StateModel")||null):(this.data.state=null,this.data.stateModel=null)}}class P extends _{constructor(B){super(B),this.data.annotationType=t.AnnotationType.LINK;const H=k(B.dict,this.rectangle);H&&(this.data.quadPoints=H),this.data.borderColor=this.data.borderColor||this.data.color,n.Catalog.parseDestDictionary({destDict:B.dict,resultObj:this.data,docBaseUrl:B.pdfManager.docBaseUrl})}}class E extends _{constructor(B){super(B),this.data.annotationType=t.AnnotationType.POPUP;let H=B.dict.get("Parent");if(!H){(0,t.warn)("Popup annotation has a missing or invalid parent annotation.");return}const q=H.get("Subtype");this.data.parentType=q instanceof s.Name?q.name:null;const Z=B.dict.getRaw("Parent");this.data.parentId=Z instanceof s.Ref?Z.toString():null;const te=H.getArray("Rect");Array.isArray(te)&&te.length===4?this.data.parentRect=t.Util.normalizeRect(te):this.data.parentRect=[0,0,0,0];const Q=H.get("RT");if((0,s.isName)(Q,t.AnnotationReplyType.GROUP)&&(H=H.get("IRT")),H.has("M")?(this.setModificationDate(H.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,H.has("C")?(this.setColor(H.getArray("C")),this.data.color=this.color):this.data.color=null,!this.viewable){const ee=H.get("F");this._isViewable(ee)&&this.setFlags(ee)}this.setTitle(H.get("T")),this.data.titleObj=this._title,this.setContents(H.get("Contents")),this.data.contentsObj=this._contents,H.has("RC")&&(this.data.richText=x.XFAFactory.getRichTextAsHtml(H.get("RC")))}}f.PopupAnnotation=E;class S extends M{constructor(B){super(B),this.data.annotationType=t.AnnotationType.FREETEXT}get hasTextContent(){return!!this.appearance}static createNewDict(B,H,{apRef:q,ap:Z}){const{color:te,fontSize:Q,rect:ee,rotation:J,user:ne,value:re}=B,ae=new s.Dict(H);ae.set("Type",s.Name.get("Annot")),ae.set("Subtype",s.Name.get("FreeText")),ae.set("CreationDate",`D:${(0,t.getModificationDate)()}`),ae.set("Rect",ee);const se=`/Helv ${Q} Tf ${(0,c.getPdfColor)(te,!0)}`;ae.set("DA",se),ae.set("Contents",re),ae.set("F",4),ae.set("Border",[0,0,0]),ae.set("Rotate",J),ne&&ae.set("T",(0,t.stringToUTF8String)(ne));const oe=new s.Dict(H);return ae.set("AP",oe),q?oe.set("N",q):oe.set("N",Z),ae}static async createNewAppearanceStream(B,H,q){const{baseFontRef:Z,evaluator:te,task:Q}=q,{color:ee,fontSize:J,rect:ne,rotation:re,value:ae}=B,se=new s.Dict(H),oe=new s.Dict(H);if(Z)oe.set("Helv",Z);else{const ct=new s.Dict(H);ct.set("BaseFont",s.Name.get("Helvetica")),ct.set("Type",s.Name.get("Font")),ct.set("Subtype",s.Name.get("Type1")),ct.set("Encoding",s.Name.get("WinAnsiEncoding")),oe.set("Helv",ct)}se.set("Font",oe);const me=await j._getFontData(te,Q,{fontName:"Helvetica",fontSize:J},se),[xe,Ae,Se,Fe]=ne;let Pe=Se-xe,ue=Fe-Ae;re%180!==0&&([Pe,ue]=[ue,Pe]);const ye=ae.split(`
`),le=J/1e3;let he=-1/0;const ce=[];for(let ct of ye){ct=me.encodeString(ct).join(""),ce.push(ct);let Ee=0;const rt=me.charsToGlyphs(ct);for(const Ze of rt)Ee+=Ze.width*le;he=Math.max(he,Ee)}let Te=1;he>Pe&&(Te=Pe/he);let Re=1;const He=t.LINE_FACTOR*J,Ce=t.LINE_DESCENT_FACTOR*J,ve=He*ye.length;ve>ue&&(Re=ue/ve);const fe=Math.min(Te,Re),We=J*fe,Ue=["q",`0 0 ${(0,o.numberToString)(Pe)} ${(0,o.numberToString)(ue)} re W n`,"BT",`1 0 0 1 0 ${(0,o.numberToString)(ue+Ce)} Tm 0 Tc ${(0,c.getPdfColor)(ee,!0)}`,`/Helv ${(0,o.numberToString)(We)} Tf`],ze=(0,o.numberToString)(He);for(const ct of ce)Ue.push(`0 -${ze} Td (${(0,t.escapeString)(ct)}) Tj`);Ue.push("ET","Q");const tt=Ue.join(`
`),Ne=new s.Dict(H);if(Ne.set("FormType",1),Ne.set("Subtype",s.Name.get("Form")),Ne.set("Type",s.Name.get("XObject")),Ne.set("BBox",[0,0,Pe,ue]),Ne.set("Length",tt.length),Ne.set("Resources",se),re){const ct=j._getRotationMatrix(re,Pe,ue);Ne.set("Matrix",ct)}const Qe=new g.StringStream(tt);return Qe.dict=Ne,Qe}}class F extends M{constructor(B){super(B);const{dict:H}=B;this.data.annotationType=t.AnnotationType.LINE;const q=H.getArray("L");if(this.data.lineCoordinates=t.Util.normalizeRect(q),this.setLineEndings(H.getArray("LE")),this.data.lineEndings=this.lineEndings,!this.appearance){const Z=this.color?Array.from(this.color).map(se=>se/255):[0,0,0],te=H.get("CA");let Q=null,ee=H.getArray("IC");ee&&(ee=A(ee,null),Q=ee?Array.from(ee).map(se=>se/255):null);const J=Q?te:null,ne=this.borderStyle.width||1,re=2*ne,ae=[this.data.lineCoordinates[0]-re,this.data.lineCoordinates[1]-re,this.data.lineCoordinates[2]+re,this.data.lineCoordinates[3]+re];t.Util.intersect(this.rectangle,ae)||(this.rectangle=ae),this._setDefaultAppearance({xref:B.xref,extra:`${ne} w`,strokeColor:Z,fillColor:Q,strokeAlpha:te,fillAlpha:J,pointsCallback:(se,oe)=>(se.push(`${q[0]} ${q[1]} m`,`${q[2]} ${q[3]} l`,"S"),[oe[0].x-ne,oe[1].x+ne,oe[3].y-ne,oe[1].y+ne])})}}}class C extends M{constructor(B){if(super(B),this.data.annotationType=t.AnnotationType.SQUARE,!this.appearance){const H=this.color?Array.from(this.color).map(ee=>ee/255):[0,0,0],q=B.dict.get("CA");let Z=null,te=B.dict.getArray("IC");te&&(te=A(te,null),Z=te?Array.from(te).map(ee=>ee/255):null);const Q=Z?q:null;if(this.borderStyle.width===0&&!Z)return;this._setDefaultAppearance({xref:B.xref,extra:`${this.borderStyle.width} w`,strokeColor:H,fillColor:Z,strokeAlpha:q,fillAlpha:Q,pointsCallback:(ee,J)=>{const ne=J[2].x+this.borderStyle.width/2,re=J[2].y+this.borderStyle.width/2,ae=J[3].x-J[2].x-this.borderStyle.width,se=J[1].y-J[3].y-this.borderStyle.width;return ee.push(`${ne} ${re} ${ae} ${se} re`),Z?ee.push("B"):ee.push("S"),[J[0].x,J[1].x,J[3].y,J[1].y]}})}}}class b extends M{constructor(B){if(super(B),this.data.annotationType=t.AnnotationType.CIRCLE,!this.appearance){const H=this.color?Array.from(this.color).map(J=>J/255):[0,0,0],q=B.dict.get("CA");let Z=null,te=B.dict.getArray("IC");te&&(te=A(te,null),Z=te?Array.from(te).map(J=>J/255):null);const Q=Z?q:null;if(this.borderStyle.width===0&&!Z)return;const ee=4/3*Math.tan(Math.PI/(2*4));this._setDefaultAppearance({xref:B.xref,extra:`${this.borderStyle.width} w`,strokeColor:H,fillColor:Z,strokeAlpha:q,fillAlpha:Q,pointsCallback:(J,ne)=>{const re=ne[0].x+this.borderStyle.width/2,ae=ne[0].y-this.borderStyle.width/2,se=ne[3].x-this.borderStyle.width/2,oe=ne[3].y+this.borderStyle.width/2,me=re+(se-re)/2,xe=ae+(oe-ae)/2,Ae=(se-re)/2*ee,Se=(oe-ae)/2*ee;return J.push(`${me} ${oe} m`,`${me+Ae} ${oe} ${se} ${xe+Se} ${se} ${xe} c`,`${se} ${xe-Se} ${me+Ae} ${ae} ${me} ${ae} c`,`${me-Ae} ${ae} ${re} ${xe-Se} ${re} ${xe} c`,`${re} ${xe+Se} ${me-Ae} ${oe} ${me} ${oe} c`,"h"),Z?J.push("B"):J.push("S"),[ne[0].x,ne[1].x,ne[3].y,ne[1].y]}})}}}class D extends M{constructor(B){super(B);const{dict:H}=B;this.data.annotationType=t.AnnotationType.POLYLINE,this.data.vertices=[],this instanceof U||(this.setLineEndings(H.getArray("LE")),this.data.lineEndings=this.lineEndings);const q=H.getArray("Vertices");if(Array.isArray(q)){for(let Z=0,te=q.length;Z<te;Z+=2)this.data.vertices.push({x:q[Z],y:q[Z+1]});if(!this.appearance){const Z=this.color?Array.from(this.color).map(ne=>ne/255):[0,0,0],te=H.get("CA"),Q=this.borderStyle.width||1,ee=2*Q,J=[1/0,1/0,-1/0,-1/0];for(const ne of this.data.vertices)J[0]=Math.min(J[0],ne.x-ee),J[1]=Math.min(J[1],ne.y-ee),J[2]=Math.max(J[2],ne.x+ee),J[3]=Math.max(J[3],ne.y+ee);t.Util.intersect(this.rectangle,J)||(this.rectangle=J),this._setDefaultAppearance({xref:B.xref,extra:`${Q} w`,strokeColor:Z,strokeAlpha:te,pointsCallback:(ne,re)=>{const ae=this.data.vertices;for(let se=0,oe=ae.length;se<oe;se++)ne.push(`${ae[se].x} ${ae[se].y} ${se===0?"m":"l"}`);return ne.push("S"),[re[0].x,re[1].x,re[3].y,re[1].y]}})}}}}class U extends D{constructor(B){super(B),this.data.annotationType=t.AnnotationType.POLYGON}}class X extends M{constructor(B){super(B),this.data.annotationType=t.AnnotationType.CARET}}class G extends M{constructor(B){super(B),this.data.annotationType=t.AnnotationType.INK,this.data.inkLists=[];const H=B.dict.getArray("InkList");if(!Array.isArray(H))return;const q=B.xref;for(let Z=0,te=H.length;Z<te;++Z){this.data.inkLists.push([]);for(let Q=0,ee=H[Z].length;Q<ee;Q+=2)this.data.inkLists[Z].push({x:q.fetchIfRef(H[Z][Q]),y:q.fetchIfRef(H[Z][Q+1])})}if(!this.appearance){const Z=this.color?Array.from(this.color).map(ne=>ne/255):[0,0,0],te=B.dict.get("CA"),Q=this.borderStyle.width||1,ee=2*Q,J=[1/0,1/0,-1/0,-1/0];for(const ne of this.data.inkLists)for(const re of ne)J[0]=Math.min(J[0],re.x-ee),J[1]=Math.min(J[1],re.y-ee),J[2]=Math.max(J[2],re.x+ee),J[3]=Math.max(J[3],re.y+ee);t.Util.intersect(this.rectangle,J)||(this.rectangle=J),this._setDefaultAppearance({xref:B.xref,extra:`${Q} w`,strokeColor:Z,strokeAlpha:te,pointsCallback:(ne,re)=>{for(const ae of this.data.inkLists){for(let se=0,oe=ae.length;se<oe;se++)ne.push(`${ae[se].x} ${ae[se].y} ${se===0?"m":"l"}`);ne.push("S")}return[re[0].x,re[1].x,re[3].y,re[1].y]}})}}static createNewDict(B,H,{apRef:q,ap:Z}){const{paths:te,rect:Q,rotation:ee}=B,J=new s.Dict(H);J.set("Type",s.Name.get("Annot")),J.set("Subtype",s.Name.get("Ink")),J.set("CreationDate",`D:${(0,t.getModificationDate)()}`),J.set("Rect",Q),J.set("InkList",te.map(re=>re.points)),J.set("F",4),J.set("Border",[0,0,0]),J.set("Rotate",ee);const ne=new s.Dict(H);return J.set("AP",ne),q?ne.set("N",q):ne.set("N",Z),J}static async createNewAppearanceStream(B,H,q){const{color:Z,rect:te,rotation:Q,paths:ee,thickness:J,opacity:ne}=B,[re,ae,se,oe]=te;let me=se-re,xe=oe-ae;Q%180!==0&&([me,xe]=[xe,me]);const Ae=[`${J} w 1 J 1 j`,`${(0,c.getPdfColor)(Z,!1)}`];ne!==1&&Ae.push("/R0 gs");const Se=[];for(const{bezier:ye}of ee){Se.length=0,Se.push(`${(0,o.numberToString)(ye[0])} ${(0,o.numberToString)(ye[1])} m`);for(let le=2,he=ye.length;le<he;le+=6){const ce=ye.slice(le,le+6).map(o.numberToString).join(" ");Se.push(`${ce} c`)}Se.push("S"),Ae.push(Se.join(`
`))}const Fe=Ae.join(`
`),Pe=new s.Dict(H);if(Pe.set("FormType",1),Pe.set("Subtype",s.Name.get("Form")),Pe.set("Type",s.Name.get("XObject")),Pe.set("BBox",[0,0,me,xe]),Pe.set("Length",Fe.length),Q){const ye=j._getRotationMatrix(Q,me,xe);Pe.set("Matrix",ye)}if(ne!==1){const ye=new s.Dict(H),le=new s.Dict(H),he=new s.Dict(H);he.set("CA",ne),he.set("Type",s.Name.get("ExtGState")),le.set("R0",he),ye.set("ExtGState",le),Pe.set("Resources",ye)}const ue=new g.StringStream(Fe);return ue.dict=Pe,ue}}class Y extends M{constructor(B){if(super(B),this.data.annotationType=t.AnnotationType.HIGHLIGHT,this.data.quadPoints=k(B.dict,null)){const q=this.appearance&&this.appearance.dict.get("Resources");if(!this.appearance||!(q&&q.has("ExtGState"))){this.appearance&&(0,t.warn)("HighlightAnnotation - ignoring built-in appearance stream.");const Z=this.color?Array.from(this.color).map(Q=>Q/255):[1,1,0],te=B.dict.get("CA");this._setDefaultAppearance({xref:B.xref,fillColor:Z,blendMode:"Multiply",fillAlpha:te,pointsCallback:(Q,ee)=>(Q.push(`${ee[0].x} ${ee[0].y} m`,`${ee[1].x} ${ee[1].y} l`,`${ee[3].x} ${ee[3].y} l`,`${ee[2].x} ${ee[2].y} l`,"f"),[ee[0].x,ee[1].x,ee[3].y,ee[1].y])})}}else this.data.hasPopup=!1}}class N extends M{constructor(B){if(super(B),this.data.annotationType=t.AnnotationType.UNDERLINE,this.data.quadPoints=k(B.dict,null)){if(!this.appearance){const q=this.color?Array.from(this.color).map(te=>te/255):[0,0,0],Z=B.dict.get("CA");this._setDefaultAppearance({xref:B.xref,extra:"[] 0 d 1 w",strokeColor:q,strokeAlpha:Z,pointsCallback:(te,Q)=>(te.push(`${Q[2].x} ${Q[2].y} m`,`${Q[3].x} ${Q[3].y} l`,"S"),[Q[0].x,Q[1].x,Q[3].y,Q[1].y])})}}else this.data.hasPopup=!1}}class I extends M{constructor(B){if(super(B),this.data.annotationType=t.AnnotationType.SQUIGGLY,this.data.quadPoints=k(B.dict,null)){if(!this.appearance){const q=this.color?Array.from(this.color).map(te=>te/255):[0,0,0],Z=B.dict.get("CA");this._setDefaultAppearance({xref:B.xref,extra:"[] 0 d 1 w",strokeColor:q,strokeAlpha:Z,pointsCallback:(te,Q)=>{const ee=(Q[0].y-Q[2].y)/6;let J=ee,ne=Q[2].x;const re=Q[2].y,ae=Q[3].x;te.push(`${ne} ${re+J} m`);do ne+=2,J=J===0?ee:0,te.push(`${ne} ${re+J} l`);while(ne<ae);return te.push("S"),[Q[2].x,ae,re-2*ee,re+2*ee]}})}}else this.data.hasPopup=!1}}class L extends M{constructor(B){if(super(B),this.data.annotationType=t.AnnotationType.STRIKEOUT,this.data.quadPoints=k(B.dict,null)){if(!this.appearance){const q=this.color?Array.from(this.color).map(te=>te/255):[0,0,0],Z=B.dict.get("CA");this._setDefaultAppearance({xref:B.xref,extra:"[] 0 d 1 w",strokeColor:q,strokeAlpha:Z,pointsCallback:(te,Q)=>(te.push(`${(Q[0].x+Q[2].x)/2} ${(Q[0].y+Q[2].y)/2} m`,`${(Q[1].x+Q[3].x)/2} ${(Q[1].y+Q[3].y)/2} l`,"S"),[Q[0].x,Q[1].x,Q[3].y,Q[1].y])})}}else this.data.hasPopup=!1}}class $ extends M{constructor(B){super(B),this.data.annotationType=t.AnnotationType.STAMP}}class W extends M{constructor(B){super(B);const H=new u.FileSpec(B.dict.get("FS"),B.xref);this.data.annotationType=t.AnnotationType.FILEATTACHMENT,this.data.file=H.serializable}}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.createDefaultAppearance=u,f.getPdfColor=l,f.parseDefaultAppearance=n;var t=h(6),o=h(2),c=h(14),s=h(15),e=h(5),a=h(10);class r extends s.EvaluatorPreprocessor{constructor(i){super(new a.StringStream(i))}parse(){const i={fn:0,args:[]},g={fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3)};try{for(;i.args.length=0,!!this.read(i);){if(this.savedStatesDepth!==0)continue;const{fn:x,args:m}=i;switch(x|0){case o.OPS.setFont:const[A,k]=m;A instanceof e.Name&&(g.fontName=A.name),typeof k=="number"&&k>0&&(g.fontSize=k);break;case o.OPS.setFillRGBColor:c.ColorSpace.singletons.rgb.getRgbItem(m,0,g.fontColor,0);break;case o.OPS.setFillGray:c.ColorSpace.singletons.gray.getRgbItem(m,0,g.fontColor,0);break;case o.OPS.setFillColorSpace:c.ColorSpace.singletons.cmyk.getRgbItem(m,0,g.fontColor,0);break}}}catch(x){(0,o.warn)(`parseDefaultAppearance - ignoring errors: "${x}".`)}return g}}function n(d){return new r(d).parse()}function l(d,i){if(d[0]===d[1]&&d[1]===d[2]){const g=d[0]/255;return`${(0,t.numberToString)(g)} ${i?"g":"G"}`}return Array.from(d).map(g=>(0,t.numberToString)(g/255)).join(" ")+` ${i?"rg":"RG"}`}function u({fontSize:d,fontName:i,fontColor:g}){return`/${(0,t.escapePDFName)(i)} ${d} Tf ${l(g,!0)}`}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ColorSpace=void 0;var t=h(2),o=h(5),c=h(7),s=h(6);function e(A,k,v,_,K,M,j){j=j!==1?0:j;const T=v/K,R=_/M;let y=0,p;const P=new Uint16Array(K),E=v*3;for(let S=0;S<K;S++)P[S]=Math.floor(S*T)*3;for(let S=0;S<M;S++){const F=Math.floor(S*R)*E;for(let C=0;C<K;C++)p=F+P[C],k[y++]=A[p++],k[y++]=A[p++],k[y++]=A[p++],y+=j}}class a{constructor(k,v){this.constructor===a&&(0,t.unreachable)("Cannot initialize ColorSpace."),this.name=k,this.numComps=v}getRgb(k,v){const _=new Uint8ClampedArray(3);return this.getRgbItem(k,v,_,0),_}getRgbItem(k,v,_,K){(0,t.unreachable)("Should not call ColorSpace.getRgbItem")}getRgbBuffer(k,v,_,K,M,j,O){(0,t.unreachable)("Should not call ColorSpace.getRgbBuffer")}getOutputLength(k,v){(0,t.unreachable)("Should not call ColorSpace.getOutputLength")}isPassthrough(k){return!1}isDefaultDecode(k,v){return a.isDefaultDecode(k,this.numComps)}fillRgb(k,v,_,K,M,j,O,T,R){const y=v*_;let p=null;const P=1<<O,E=_!==M||v!==K;if(this.isPassthrough(O))p=T;else if(this.numComps===1&&y>P&&this.name!=="DeviceGray"&&this.name!=="DeviceRGB"){const S=O<=8?new Uint8Array(P):new Uint16Array(P);for(let C=0;C<P;C++)S[C]=C;const F=new Uint8ClampedArray(P*3);if(this.getRgbBuffer(S,0,P,F,0,O,0),E){p=new Uint8Array(y*3);let C=0;for(let b=0;b<y;++b){const D=T[b]*3;p[C++]=F[D],p[C++]=F[D+1],p[C++]=F[D+2]}}else{let C=0;for(let b=0;b<y;++b){const D=T[b]*3;k[C++]=F[D],k[C++]=F[D+1],k[C++]=F[D+2],C+=R}}}else E?(p=new Uint8ClampedArray(y*3),this.getRgbBuffer(T,0,y,p,0,O,0)):this.getRgbBuffer(T,0,K*j,k,0,O,R);if(p)if(E)e(p,k,v,_,K,M,R);else{let S=0,F=0;for(let C=0,b=K*j;C<b;C++)k[S++]=p[F++],k[S++]=p[F++],k[S++]=p[F++],S+=R}}get usesZeroToOneRange(){return(0,t.shadow)(this,"usesZeroToOneRange",!0)}static _cache(k,v,_,K){if(!_)throw new Error('ColorSpace._cache - expected "localColorSpaceCache" argument.');if(!K)throw new Error('ColorSpace._cache - expected "parsedColorSpace" argument.');let M,j;k instanceof o.Ref&&(j=k,k=v.fetch(k)),k instanceof o.Name&&(M=k.name),(M||j)&&_.set(M,j,K)}static getCached(k,v,_){if(!_)throw new Error('ColorSpace.getCached - expected "localColorSpaceCache" argument.');if(k instanceof o.Ref){const K=_.getByRef(k);if(K)return K;try{k=v.fetch(k)}catch(M){if(M instanceof s.MissingDataException)throw M}}if(k instanceof o.Name){const K=_.getByName(k.name);if(K)return K}return null}static async parseAsync({cs:k,xref:v,resources:_=null,pdfFunctionFactory:K,localColorSpaceCache:M}){const j=this._parse(k,v,_,K);return this._cache(k,v,M,j),j}static parse({cs:k,xref:v,resources:_=null,pdfFunctionFactory:K,localColorSpaceCache:M}){const j=this.getCached(k,v,M);if(j)return j;const O=this._parse(k,v,_,K);return this._cache(k,v,M,O),O}static _parse(k,v,_=null,K){if(k=v.fetchIfRef(k),k instanceof o.Name)switch(k.name){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"Pattern":return new n(null);default:if(_ instanceof o.Dict){const M=_.get("ColorSpace");if(M instanceof o.Dict){const j=M.get(k.name);if(j){if(j instanceof o.Name)return this._parse(j,v,_,K);k=j;break}}}throw new t.FormatError(`Unrecognized ColorSpace: ${k.name}`)}if(Array.isArray(k)){const M=v.fetchIfRef(k[0]).name;let j,O,T,R,y,p;switch(M){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"CalGray":return j=v.fetchIfRef(k[1]),R=j.getArray("WhitePoint"),y=j.getArray("BlackPoint"),p=j.get("Gamma"),new g(R,y,p);case"CalRGB":j=v.fetchIfRef(k[1]),R=j.getArray("WhitePoint"),y=j.getArray("BlackPoint"),p=j.getArray("Gamma");const P=j.getArray("Matrix");return new x(R,y,p,P);case"ICCBased":const S=v.fetchIfRef(k[1]).dict;O=S.get("N");const F=S.get("Alternate");if(F){const G=this._parse(F,v,_,K);if(G.numComps===O)return G;(0,t.warn)("ICCBased color space: Ignoring incorrect /Alternate entry.")}if(O===1)return this.singletons.gray;if(O===3)return this.singletons.rgb;if(O===4)return this.singletons.cmyk;break;case"Pattern":return T=k[1]||null,T&&(T=this._parse(T,v,_,K)),new n(T);case"I":case"Indexed":T=this._parse(k[1],v,_,K);const C=v.fetchIfRef(k[2])+1,b=v.fetchIfRef(k[3]);return new l(T,C,b);case"Separation":case"DeviceN":const D=v.fetchIfRef(k[1]);O=Array.isArray(D)?D.length:1,T=this._parse(k[2],v,_,K);const U=K.create(k[3]);return new r(O,T,U);case"Lab":j=v.fetchIfRef(k[1]),R=j.getArray("WhitePoint"),y=j.getArray("BlackPoint");const X=j.getArray("Range");return new m(R,y,X);default:throw new t.FormatError(`Unimplemented ColorSpace object: ${M}`)}}throw new t.FormatError(`Unrecognized ColorSpace object: ${k}`)}static isDefaultDecode(k,v){if(!Array.isArray(k))return!0;if(v*2!==k.length)return(0,t.warn)("The decode map is not the correct length"),!0;for(let _=0,K=k.length;_<K;_+=2)if(k[_]!==0||k[_+1]!==1)return!1;return!0}static get singletons(){return(0,t.shadow)(this,"singletons",{get gray(){return(0,t.shadow)(this,"gray",new u)},get rgb(){return(0,t.shadow)(this,"rgb",new d)},get cmyk(){return(0,t.shadow)(this,"cmyk",new i)}})}}f.ColorSpace=a;class r extends a{constructor(k,v,_){super("Alternate",k),this.base=v,this.tintFn=_,this.tmpBuf=new Float32Array(v.numComps)}getRgbItem(k,v,_,K){const M=this.tmpBuf;this.tintFn(k,v,M,0),this.base.getRgbItem(M,0,_,K)}getRgbBuffer(k,v,_,K,M,j,O){const T=this.tintFn,R=this.base,y=1/((1<<j)-1),p=R.numComps,P=R.usesZeroToOneRange,E=(R.isPassthrough(8)||!P)&&O===0;let S=E?M:0;const F=E?K:new Uint8ClampedArray(p*_),C=this.numComps,b=new Float32Array(C),D=new Float32Array(p);let U,X;for(U=0;U<_;U++){for(X=0;X<C;X++)b[X]=k[v++]*y;if(T(b,0,D,0),P)for(X=0;X<p;X++)F[S++]=D[X]*255;else R.getRgbItem(D,0,F,S),S+=p}E||R.getRgbBuffer(F,0,_,K,M,8,O)}getOutputLength(k,v){return this.base.getOutputLength(k*this.base.numComps/this.numComps,v)}}class n extends a{constructor(k){super("Pattern",null),this.base=k}isDefaultDecode(k,v){(0,t.unreachable)("Should not call PatternCS.isDefaultDecode")}}class l extends a{constructor(k,v,_){super("Indexed",1),this.base=k,this.highVal=v;const K=k.numComps*v;if(this.lookup=new Uint8Array(K),_ instanceof c.BaseStream){const M=_.getBytes(K);this.lookup.set(M)}else if(typeof _=="string")for(let M=0;M<K;++M)this.lookup[M]=_.charCodeAt(M)&255;else throw new t.FormatError(`IndexedCS - unrecognized lookup table: ${_}`)}getRgbItem(k,v,_,K){const M=this.base.numComps,j=k[v]*M;this.base.getRgbBuffer(this.lookup,j,1,_,K,8,0)}getRgbBuffer(k,v,_,K,M,j,O){const T=this.base,R=T.numComps,y=T.getOutputLength(R,O),p=this.lookup;for(let P=0;P<_;++P){const E=k[v++]*R;T.getRgbBuffer(p,E,1,K,M,8,O),M+=y}}getOutputLength(k,v){return this.base.getOutputLength(k*this.base.numComps,v)}isDefaultDecode(k,v){return Array.isArray(k)?k.length!==2?((0,t.warn)("Decode map length is not correct"),!0):!Number.isInteger(v)||v<1?((0,t.warn)("Bits per component is not correct"),!0):k[0]===0&&k[1]===(1<<v)-1:!0}}class u extends a{constructor(){super("DeviceGray",1)}getRgbItem(k,v,_,K){const M=k[v]*255;_[K]=_[K+1]=_[K+2]=M}getRgbBuffer(k,v,_,K,M,j,O){const T=255/((1<<j)-1);let R=v,y=M;for(let p=0;p<_;++p){const P=T*k[R++];K[y++]=P,K[y++]=P,K[y++]=P,y+=O}}getOutputLength(k,v){return k*(3+v)}}class d extends a{constructor(){super("DeviceRGB",3)}getRgbItem(k,v,_,K){_[K]=k[v]*255,_[K+1]=k[v+1]*255,_[K+2]=k[v+2]*255}getRgbBuffer(k,v,_,K,M,j,O){if(j===8&&O===0){K.set(k.subarray(v,v+_*3),M);return}const T=255/((1<<j)-1);let R=v,y=M;for(let p=0;p<_;++p)K[y++]=T*k[R++],K[y++]=T*k[R++],K[y++]=T*k[R++],y+=O}getOutputLength(k,v){return k*(3+v)/3|0}isPassthrough(k){return k===8}}const i=function(){function k(_,K,M,j,O){const T=_[K]*M,R=_[K+1]*M,y=_[K+2]*M,p=_[K+3]*M;j[O]=255+T*(-4.387332384609988*T+54.48615194189176*R+18.82290502165302*y+212.25662451639585*p+-285.2331026137004)+R*(1.7149763477362134*R-5.6096736904047315*y+-17.873870861415444*p-5.497006427196366)+y*(-2.5217340131683033*y-21.248923337353073*p+17.5119270841813)+p*(-21.86122147463605*p-189.48180835922747),j[O+1]=255+T*(8.841041422036149*T+60.118027045597366*R+6.871425592049007*y+31.159100130055922*p+-79.2970844816548)+R*(-15.310361306967817*R+17.575251261109482*y+131.35250912493976*p-190.9453302588951)+y*(4.444339102852739*y+9.8632861493405*p-24.86741582555878)+p*(-20.737325471181034*p-187.80453709719578),j[O+2]=255+T*(.8842522430003296*T+8.078677503112928*R+30.89978309703729*y-.23883238689178934*p+-14.183576799673286)+R*(10.49593273432072*R+63.02378494754052*y+50.606957656360734*p-112.23884253719248)+y*(.03296041114873217*y+115.60384449646641*p+-193.58209356861505)+p*(-22.33816807309886*p-180.12613974708367)}class v extends a{constructor(){super("DeviceCMYK",4)}getRgbItem(K,M,j,O){k(K,M,1,j,O)}getRgbBuffer(K,M,j,O,T,R,y){const p=1/((1<<R)-1);for(let P=0;P<j;P++)k(K,M,p,O,T),M+=4,T+=3+y}getOutputLength(K,M){return K/4*(3+M)|0}}return v}(),g=function(){function k(_,K,M,j,O,T){const y=(K[M]*T)**_.G,p=_.YW*y,P=Math.max(295.8*p**.3333333333333333-40.8,0);j[O]=P,j[O+1]=P,j[O+2]=P}class v extends a{constructor(K,M,j){if(super("CalGray",1),!K)throw new t.FormatError("WhitePoint missing - required for color space CalGray");if(M=M||[0,0,0],j=j||1,this.XW=K[0],this.YW=K[1],this.ZW=K[2],this.XB=M[0],this.YB=M[1],this.ZB=M[2],this.G=j,this.XW<0||this.ZW<0||this.YW!==1)throw new t.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(this.XB<0||this.YB<0||this.ZB<0)&&((0,t.info)(`Invalid BlackPoint for ${this.name}, falling back to default.`),this.XB=this.YB=this.ZB=0),(this.XB!==0||this.YB!==0||this.ZB!==0)&&(0,t.warn)(`${this.name}, BlackPoint: XB: ${this.XB}, YB: ${this.YB}, ZB: ${this.ZB}, only default values are supported.`),this.G<1&&((0,t.info)(`Invalid Gamma: ${this.G} for ${this.name}, falling back to default.`),this.G=1)}getRgbItem(K,M,j,O){k(this,K,M,j,O,1)}getRgbBuffer(K,M,j,O,T,R,y){const p=1/((1<<R)-1);for(let P=0;P<j;++P)k(this,K,M,O,T,p),M+=1,T+=3+y}getOutputLength(K,M){return K*(3+M)}}return v}(),x=function(){const k=new Float32Array([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]),v=new Float32Array([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867]),_=new Float32Array([3.2404542,-1.5371385,-.4985314,-.969266,1.8760108,.041556,.0556434,-.2040259,1.0572252]),K=new Float32Array([1,1,1]),M=new Float32Array(3),j=new Float32Array(3),O=new Float32Array(3),T=((8+16)/116)**3/8;function R(X,G,Y){Y[0]=X[0]*G[0]+X[1]*G[1]+X[2]*G[2],Y[1]=X[3]*G[0]+X[4]*G[1]+X[5]*G[2],Y[2]=X[6]*G[0]+X[7]*G[1]+X[8]*G[2]}function y(X,G,Y){Y[0]=G[0]*1/X[0],Y[1]=G[1]*1/X[1],Y[2]=G[2]*1/X[2]}function p(X,G,Y){Y[0]=G[0]*.95047/X[0],Y[1]=G[1]*1/X[1],Y[2]=G[2]*1.08883/X[2]}function P(X){return X<=.0031308?E(0,1,12.92*X):X>=.99554525?1:E(0,1,(1+.055)*X**(1/2.4)-.055)}function E(X,G,Y){return Math.max(X,Math.min(G,Y))}function S(X){return X<0?-S(-X):X>8?((X+16)/116)**3:X*T}function F(X,G,Y){if(X[0]===0&&X[1]===0&&X[2]===0){Y[0]=G[0],Y[1]=G[1],Y[2]=G[2];return}const N=S(0),I=N,L=S(X[0]),$=N,W=S(X[1]),z=N,B=S(X[2]),H=(1-I)/(1-L),q=1-H,Z=(1-$)/(1-W),te=1-Z,Q=(1-z)/(1-B),ee=1-Q;Y[0]=G[0]*H+q,Y[1]=G[1]*Z+te,Y[2]=G[2]*Q+ee}function C(X,G,Y){if(X[0]===1&&X[2]===1){Y[0]=G[0],Y[1]=G[1],Y[2]=G[2];return}const N=Y;R(k,G,N);const I=M;y(X,N,I),R(v,I,Y)}function b(X,G,Y){const N=Y;R(k,G,N);const I=M;p(X,N,I),R(v,I,Y)}function D(X,G,Y,N,I,L){const $=E(0,1,G[Y]*L),W=E(0,1,G[Y+1]*L),z=E(0,1,G[Y+2]*L),B=$===1?1:$**X.GR,H=W===1?1:W**X.GG,q=z===1?1:z**X.GB,Z=X.MXA*B+X.MXB*H+X.MXC*q,te=X.MYA*B+X.MYB*H+X.MYC*q,Q=X.MZA*B+X.MZB*H+X.MZC*q,ee=j;ee[0]=Z,ee[1]=te,ee[2]=Q;const J=O;C(X.whitePoint,ee,J);const ne=j;F(X.blackPoint,J,ne);const re=O;b(K,ne,re);const ae=j;R(_,re,ae),N[I]=P(ae[0])*255,N[I+1]=P(ae[1])*255,N[I+2]=P(ae[2])*255}class U extends a{constructor(G,Y,N,I){if(super("CalRGB",3),!G)throw new t.FormatError("WhitePoint missing - required for color space CalRGB");Y=Y||new Float32Array(3),N=N||new Float32Array([1,1,1]),I=I||new Float32Array([1,0,0,0,1,0,0,0,1]);const L=G[0],$=G[1],W=G[2];this.whitePoint=G;const z=Y[0],B=Y[1],H=Y[2];if(this.blackPoint=Y,this.GR=N[0],this.GG=N[1],this.GB=N[2],this.MXA=I[0],this.MYA=I[1],this.MZA=I[2],this.MXB=I[3],this.MYB=I[4],this.MZB=I[5],this.MXC=I[6],this.MYC=I[7],this.MZC=I[8],L<0||W<0||$!==1)throw new t.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(z<0||B<0||H<0)&&((0,t.info)(`Invalid BlackPoint for ${this.name} [${z}, ${B}, ${H}], falling back to default.`),this.blackPoint=new Float32Array(3)),(this.GR<0||this.GG<0||this.GB<0)&&((0,t.info)(`Invalid Gamma [${this.GR}, ${this.GG}, ${this.GB}] for ${this.name}, falling back to default.`),this.GR=this.GG=this.GB=1)}getRgbItem(G,Y,N,I){D(this,G,Y,N,I,1)}getRgbBuffer(G,Y,N,I,L,$,W){const z=1/((1<<$)-1);for(let B=0;B<N;++B)D(this,G,Y,I,L,z),Y+=3,L+=3+W}getOutputLength(G,Y){return G*(3+Y)/3|0}}return U}(),m=function(){function k(M){let j;return M>=6/29?j=M**3:j=108/841*(M-4/29),j}function v(M,j,O,T){return O+M*(T-O)/j}function _(M,j,O,T,R,y){let p=j[O],P=j[O+1],E=j[O+2];T!==!1&&(p=v(p,T,0,100),P=v(P,T,M.amin,M.amax),E=v(E,T,M.bmin,M.bmax)),P>M.amax?P=M.amax:P<M.amin&&(P=M.amin),E>M.bmax?E=M.bmax:E<M.bmin&&(E=M.bmin);const S=(p+16)/116,F=S+P/500,C=S-E/200,b=M.XW*k(F),D=M.YW*k(S),U=M.ZW*k(C);let X,G,Y;M.ZW<1?(X=b*3.1339+D*-1.617+U*-.4906,G=b*-.9785+D*1.916+U*.0333,Y=b*.072+D*-.229+U*1.4057):(X=b*3.2406+D*-1.5372+U*-.4986,G=b*-.9689+D*1.8758+U*.0415,Y=b*.0557+D*-.204+U*1.057),R[y]=Math.sqrt(X)*255,R[y+1]=Math.sqrt(G)*255,R[y+2]=Math.sqrt(Y)*255}class K extends a{constructor(j,O,T){if(super("Lab",3),!j)throw new t.FormatError("WhitePoint missing - required for color space Lab");if(O=O||[0,0,0],T=T||[-100,100,-100,100],this.XW=j[0],this.YW=j[1],this.ZW=j[2],this.amin=T[0],this.amax=T[1],this.bmin=T[2],this.bmax=T[3],this.XB=O[0],this.YB=O[1],this.ZB=O[2],this.XW<0||this.ZW<0||this.YW!==1)throw new t.FormatError("Invalid WhitePoint components, no fallback available");(this.XB<0||this.YB<0||this.ZB<0)&&((0,t.info)("Invalid BlackPoint, falling back to default"),this.XB=this.YB=this.ZB=0),(this.amin>this.amax||this.bmin>this.bmax)&&((0,t.info)("Invalid Range, falling back to defaults"),this.amin=-100,this.amax=100,this.bmin=-100,this.bmax=100)}getRgbItem(j,O,T,R){_(this,j,O,!1,T,R)}getRgbBuffer(j,O,T,R,y,p,P){const E=(1<<p)-1;for(let S=0;S<T;S++)_(this,j,O,E,R,y),O+=3,y+=3+P}getOutputLength(j,O){return j*(3+O)/3|0}isDefaultDecode(j,O){return!0}get usesZeroToOneRange(){return(0,t.shadow)(this,"usesZeroToOneRange",!1)}}return K}()},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PartialEvaluator=f.EvaluatorPreprocessor=void 0;var t=h(2),o=h(16),c=h(5),s=h(34),e=h(38),a=h(37),r=h(41),n=h(40),l=h(50),u=h(51),d=h(42),i=h(57),g=h(17),x=h(59),m=h(10),A=h(7),k=h(60),v=h(14),_=h(19),K=h(39),M=h(6),j=h(45),O=h(61),T=h(62),R=h(63);const y=Object.freeze({maxImageSize:-1,disableFontFace:!1,ignoreErrors:!1,isEvalSupported:!0,fontExtraProperties:!1,useSystemFonts:!0,cMapUrl:null,standardFontDataUrl:null}),p={TILING:1,SHADING:2},P=10,E=Promise.resolve();function S(N,I=!1){if(Array.isArray(N)){for(let L=0,$=N.length;L<$;L++){const W=S(N[L],!0);if(W)return W}return(0,t.warn)(`Unsupported blend mode Array: ${N}`),"source-over"}if(!(N instanceof c.Name))return I?null:"source-over";switch(N.name){case"Normal":case"Compatible":return"source-over";case"Multiply":return"multiply";case"Screen":return"screen";case"Overlay":return"overlay";case"Darken":return"darken";case"Lighten":return"lighten";case"ColorDodge":return"color-dodge";case"ColorBurn":return"color-burn";case"HardLight":return"hard-light";case"SoftLight":return"soft-light";case"Difference":return"difference";case"Exclusion":return"exclusion";case"Hue":return"hue";case"Saturation":return"saturation";case"Color":return"color";case"Luminosity":return"luminosity"}return I?null:((0,t.warn)(`Unsupported blend mode: ${N.name}`),"source-over")}function F(N){N.fn===t.OPS.paintImageMaskXObject&&N.args[0]&&N.args[0].count>0&&N.args[0].count++}class C{static get TIME_SLOT_DURATION_MS(){return(0,t.shadow)(this,"TIME_SLOT_DURATION_MS",20)}static get CHECK_TIME_EVERY(){return(0,t.shadow)(this,"CHECK_TIME_EVERY",100)}constructor(){this.reset()}check(){return++this.checked<C.CHECK_TIME_EVERY?!1:(this.checked=0,this.endTime<=Date.now())}reset(){this.endTime=Date.now()+C.TIME_SLOT_DURATION_MS,this.checked=0}}class b{constructor({xref:I,handler:L,pageIndex:$,idFactory:W,fontCache:z,builtInCMapCache:B,standardFontDataCache:H,globalImageCache:q,options:Z=null}){this.xref=I,this.handler=L,this.pageIndex=$,this.idFactory=W,this.fontCache=z,this.builtInCMapCache=B,this.standardFontDataCache=H,this.globalImageCache=q,this.options=Z||y,this.parsingType3Font=!1,this._fetchBuiltInCMapBound=this.fetchBuiltInCMap.bind(this)}get _pdfFunctionFactory(){const I=new i.PDFFunctionFactory({xref:this.xref,isEvalSupported:this.options.isEvalSupported});return(0,t.shadow)(this,"_pdfFunctionFactory",I)}clone(I=null){const L=Object.create(this);return L.options=Object.assign(Object.create(null),this.options,I),L}hasBlendModes(I,L){if(!(I instanceof c.Dict)||I.objId&&L.has(I.objId))return!1;const $=new c.RefSet(L);I.objId&&$.put(I.objId);const W=[I],z=this.xref;for(;W.length;){const B=W.shift(),H=B.get("ExtGState");if(H instanceof c.Dict)for(let Z of H.getRawValues()){if(Z instanceof c.Ref){if($.has(Z))continue;try{Z=z.fetch(Z)}catch(Q){$.put(Z),(0,t.info)(`hasBlendModes - ignoring ExtGState: "${Q}".`);continue}}if(!(Z instanceof c.Dict))continue;Z.objId&&$.put(Z.objId);const te=Z.get("BM");if(te instanceof c.Name){if(te.name!=="Normal")return!0;continue}if(te!==void 0&&Array.isArray(te)){for(const Q of te)if(Q instanceof c.Name&&Q.name!=="Normal")return!0}}const q=B.get("XObject");if(q instanceof c.Dict)for(let Z of q.getRawValues()){if(Z instanceof c.Ref){if($.has(Z))continue;try{Z=z.fetch(Z)}catch(Q){$.put(Z),(0,t.info)(`hasBlendModes - ignoring XObject: "${Q}".`);continue}}if(!(Z instanceof A.BaseStream))continue;Z.dict.objId&&$.put(Z.dict.objId);const te=Z.dict.get("Resources");te instanceof c.Dict&&(te.objId&&$.has(te.objId)||(W.push(te),te.objId&&$.put(te.objId)))}}for(const B of $)L.put(B);return!1}async fetchBuiltInCMap(I){const L=this.builtInCMapCache.get(I);if(L)return L;let $;if(this.options.cMapUrl!==null){const W=`${this.options.cMapUrl}${I}.bcmap`,z=await fetch(W);if(!z.ok)throw new Error(`fetchBuiltInCMap: failed to fetch file "${W}" with "${z.statusText}".`);$={cMapData:new Uint8Array(await z.arrayBuffer()),compressionType:t.CMapCompressionType.BINARY}}else $=await this.handler.sendWithPromise("FetchBuiltInCMap",{name:I});return $.compressionType!==t.CMapCompressionType.NONE&&this.builtInCMapCache.set(I,$),$}async fetchStandardFontData(I){const L=this.standardFontDataCache.get(I);if(L)return new m.Stream(L);if(this.options.useSystemFonts&&I!=="Symbol"&&I!=="ZapfDingbats")return null;const $=(0,r.getFontNameToFileMap)(),W=$[I];let z;if(this.options.standardFontDataUrl!==null){const B=`${this.options.standardFontDataUrl}${W}`,H=await fetch(B);H.ok?z=await H.arrayBuffer():(0,t.warn)(`fetchStandardFontData: failed to fetch file "${B}" with "${H.statusText}".`)}else try{z=await this.handler.sendWithPromise("FetchStandardFontData",{filename:W})}catch(B){(0,t.warn)(`fetchStandardFontData: failed to fetch file "${W}" with "${B}".`)}return z?(this.standardFontDataCache.set(I,z),new m.Stream(z)):null}async buildFormXObject(I,L,$,W,z,B,H){const q=L.dict,Z=q.getArray("Matrix");let te=q.getArray("BBox");Array.isArray(te)&&te.length===4?te=t.Util.normalizeRect(te):te=null;let Q,ee;q.has("OC")&&(Q=await this.parseMarkedContentProps(q.get("OC"),I)),Q!==void 0&&W.addOp(t.OPS.beginMarkedContentProps,["OC",Q]);const J=q.get("Group");if(J){ee={matrix:Z,bbox:te,smask:$,isolated:!1,knockout:!1};const re=J.get("S");let ae=null;if((0,c.isName)(re,"Transparency")&&(ee.isolated=J.get("I")||!1,ee.knockout=J.get("K")||!1,J.has("CS"))){const se=J.getRaw("CS"),oe=v.ColorSpace.getCached(se,this.xref,H);oe?ae=oe:ae=await this.parseColorSpace({cs:se,resources:I,localColorSpaceCache:H})}$&&$.backdrop&&(ae=ae||v.ColorSpace.singletons.rgb,$.backdrop=ae.getRgb($.backdrop,0)),W.addOp(t.OPS.beginGroup,[ee])}const ne=J?[Z,null]:[Z,te];return W.addOp(t.OPS.paintFormXObjectBegin,ne),this.getOperatorList({stream:L,task:z,resources:q.get("Resources")||I,operatorList:W,initialState:B}).then(function(){W.addOp(t.OPS.paintFormXObjectEnd,[]),J&&W.addOp(t.OPS.endGroup,[ee]),Q!==void 0&&W.addOp(t.OPS.endMarkedContent,[])})}_sendImgData(I,L,$=!1){const W=L?[L.bitmap||L.data.buffer]:null;return this.parsingType3Font||$?this.handler.send("commonobj",[I,"Image",L],W):this.handler.send("obj",[I,this.pageIndex,"Image",L],W)}async buildPaintImageXObject({resources:I,image:L,isInline:$=!1,operatorList:W,cacheKey:z,localImageCache:B,localColorSpaceCache:H}){const q=L.dict,Z=q.objId,te=q.get("W","Width"),Q=q.get("H","Height");if(!(te&&typeof te=="number")||!(Q&&typeof Q=="number")){(0,t.warn)("Image dimensions are missing, or not numbers.");return}const ee=this.options.maxImageSize;if(ee!==-1&&te*Q>ee){const Se="Image exceeded maximum allowed size and was removed.";if(this.options.ignoreErrors){(0,t.warn)(Se);return}throw new Error(Se)}let J;q.has("OC")&&(J=await this.parseMarkedContentProps(q.get("OC"),I));const ne=q.get("IM","ImageMask")||!1;let re,ae;if(ne){const Se=q.get("I","Interpolate"),Fe=te+7>>3,Pe=L.getBytes(Fe*Q),ue=q.getArray("D","Decode");if(this.parsingType3Font){re=R.PDFImage.createRawMask({imgArray:Pe,width:te,height:Q,imageIsFromDecodeStream:L instanceof _.DecodeStream,inverseDecode:!!ue&&ue[0]>0,interpolate:Se}),re.cached=!!z,ae=[re],W.addImageOps(t.OPS.paintImageMaskXObject,ae,J),z&&B.set(z,Z,{fn:t.OPS.paintImageMaskXObject,args:ae,optionalContent:J});return}if(re=R.PDFImage.createMask({imgArray:Pe,width:te,height:Q,imageIsFromDecodeStream:L instanceof _.DecodeStream,inverseDecode:!!ue&&ue[0]>0,interpolate:Se}),re.isSingleOpaquePixel){W.addImageOps(t.OPS.paintSolidColorImageMask,[],J),z&&B.set(z,Z,{fn:t.OPS.paintSolidColorImageMask,args:[],optionalContent:J});return}const ye=`mask_${this.idFactory.createObjId()}`;W.addDependency(ye),this._sendImgData(ye,re),ae=[{data:ye,width:re.width,height:re.height,interpolate:re.interpolate,count:1}],W.addImageOps(t.OPS.paintImageMaskXObject,ae,J),z&&B.set(z,Z,{fn:t.OPS.paintImageMaskXObject,args:ae,optionalContent:J});return}const se=q.get("SM","SMask")||!1,oe=q.get("Mask")||!1,me=200;if($&&!se&&!oe&&te+Q<me){re=new R.PDFImage({xref:this.xref,res:I,image:L,isInline:$,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:H}).createImageData(!0),W.addImageOps(t.OPS.paintInlineImageXObject,[re],J);return}let xe=`img_${this.idFactory.createObjId()}`,Ae=!1;this.parsingType3Font?xe=`${this.idFactory.getDocId()}_type3_${xe}`:Z&&(Ae=this.globalImageCache.shouldCache(Z,this.pageIndex),Ae&&(xe=`${this.idFactory.getDocId()}_${xe}`)),W.addDependency(xe),ae=[xe,te,Q],R.PDFImage.buildImage({xref:this.xref,res:I,image:L,isInline:$,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:H}).then(Se=>(re=Se.createImageData(!1),z&&Z&&Ae&&this.globalImageCache.addByteSize(Z,re.data.length),this._sendImgData(xe,re,Ae))).catch(Se=>((0,t.warn)(`Unable to decode image "${xe}": "${Se}".`),this._sendImgData(xe,null,Ae))),W.addImageOps(t.OPS.paintImageXObject,ae,J),z&&(B.set(z,Z,{fn:t.OPS.paintImageXObject,args:ae,optionalContent:J}),Z&&((0,t.assert)(!$,"Cannot cache an inline image globally."),this.globalImageCache.addPageIndex(Z,this.pageIndex),Ae&&this.globalImageCache.setData(Z,{objId:xe,fn:t.OPS.paintImageXObject,args:ae,optionalContent:J,byteSize:0})))}handleSMask(I,L,$,W,z,B){const H=I.get("G"),q={subtype:I.get("S").name,backdrop:I.get("BC")},Z=I.get("TR");if((0,i.isPDFFunction)(Z)){const te=this._pdfFunctionFactory.create(Z),Q=new Uint8Array(256),ee=new Float32Array(1);for(let J=0;J<256;J++)ee[0]=J/255,te(ee,0,ee,0),Q[J]=ee[0]*255|0;q.transferMap=Q}return this.buildFormXObject(L,H,q,$,W,z.state.clone(),B)}handleTransferFunction(I){let L;if(Array.isArray(I))L=I;else if((0,i.isPDFFunction)(I))L=[I];else return null;const $=[];let W=0,z=0;for(const B of L){const H=this.xref.fetchIfRef(B);if(W++,(0,c.isName)(H,"Identity")){$.push(null);continue}else if(!(0,i.isPDFFunction)(H))return null;const q=this._pdfFunctionFactory.create(H),Z=new Uint8Array(256),te=new Float32Array(1);for(let Q=0;Q<256;Q++)te[0]=Q/255,q(te,0,te,0),Z[Q]=te[0]*255|0;$.push(Z),z++}return!(W===1||W===4)||z===0?null:$}handleTilingType(I,L,$,W,z,B,H,q){const Z=new T.OperatorList,te=c.Dict.merge({xref:this.xref,dictArray:[z.get("Resources"),$]});return this.getOperatorList({stream:W,task:H,resources:te,operatorList:Z}).then(function(){const Q=Z.getIR(),ee=(0,l.getTilingPatternIR)(Q,z,L);B.addDependencies(Z.dependencies),B.addOp(I,ee),z.objId&&q.set(null,z.objId,{operatorListIR:Q,dict:z})}).catch(Q=>{if(!(Q instanceof t.AbortException)){if(this.options.ignoreErrors){this.handler.send("UnsupportedFeature",{featureId:t.UNSUPPORTED_FEATURES.errorTilingPattern}),(0,t.warn)(`handleTilingType - ignoring pattern: "${Q}".`);return}throw Q}})}handleSetFont(I,L,$,W,z,B,H=null,q=null){const Z=L&&L[0]instanceof c.Name?L[0].name:null;return this.loadFont(Z,$,I,H,q).then(te=>te.font.isType3Font?te.loadType3Data(this,I,z).then(function(){return W.addDependencies(te.type3Dependencies),te}).catch(Q=>(this.handler.send("UnsupportedFeature",{featureId:t.UNSUPPORTED_FEATURES.errorFontLoadType3}),new D({loadedName:"g_font_error",font:new s.ErrorFont(`Type3 font load error: ${Q}`),dict:te.font,evaluatorOptions:this.options}))):te).then(te=>(B.font=te.font,te.send(this.handler),te.loadedName))}handleText(I,L){const $=L.font,W=$.charsToGlyphs(I);return $.data&&(L.textRenderingMode&t.TextRenderingMode.ADD_TO_PATH_FLAG||L.fillColorSpace.name==="Pattern"||$.disableFontFace||this.options.disableFontFace)&&b.buildFontPaths($,W,this.handler,this.options),W}ensureStateFont(I){if(I.font)return;const L=new t.FormatError("Missing setFont (Tf) operator before text rendering operator.");if(this.options.ignoreErrors){this.handler.send("UnsupportedFeature",{featureId:t.UNSUPPORTED_FEATURES.errorFontState}),(0,t.warn)(`ensureStateFont: "${L}".`);return}throw L}async setGState({resources:I,gState:L,operatorList:$,cacheKey:W,task:z,stateManager:B,localGStateCache:H,localColorSpaceCache:q}){const Z=L.objId;let te=!0;const Q=[],ee=L.getKeys();let J=Promise.resolve();for(let ne=0,re=ee.length;ne<re;ne++){const ae=ee[ne],se=L.get(ae);switch(ae){case"Type":break;case"LW":case"LC":case"LJ":case"ML":case"D":case"RI":case"FL":case"CA":case"ca":Q.push([ae,se]);break;case"Font":te=!1,J=J.then(()=>this.handleSetFont(I,null,se[0],$,z,B.state).then(function(me){$.addDependency(me),Q.push([ae,[me,se[1]]])}));break;case"BM":Q.push([ae,S(se)]);break;case"SMask":if((0,c.isName)(se,"None")){Q.push([ae,!1]);break}se instanceof c.Dict?(te=!1,J=J.then(()=>this.handleSMask(se,I,$,z,B,q)),Q.push([ae,!0])):(0,t.warn)("Unsupported SMask type");break;case"TR":const oe=this.handleTransferFunction(se);Q.push([ae,oe]);break;case"OP":case"op":case"OPM":case"BG":case"BG2":case"UCR":case"UCR2":case"TR2":case"HT":case"SM":case"SA":case"AIS":case"TK":(0,t.info)("graphic state operator "+ae);break;default:(0,t.info)("Unknown graphic state operator "+ae);break}}return J.then(function(){Q.length>0&&$.addOp(t.OPS.setGState,[Q]),te&&H.set(W,Z,Q)})}loadFont(I,L,$,W=null,z=null){const B=async()=>new D({loadedName:"g_font_error",font:new s.ErrorFont(`Font "${I}" is not available.`),dict:L,evaluatorOptions:this.options}),H=this.xref;let q;if(L)L instanceof c.Ref&&(q=L);else{const re=$.get("Font");re&&(q=re.getRaw(I))}if(!q){const re=`Font "${I||L&&L.toString()}" is not available`;if(!this.options.ignoreErrors&&!this.parsingType3Font)return(0,t.warn)(`${re}.`),B();this.handler.send("UnsupportedFeature",{featureId:t.UNSUPPORTED_FEATURES.errorFontMissing}),(0,t.warn)(`${re} -- attempting to fallback to a default font.`),W?q=W:q=b.fallbackFontDict}if(this.parsingType3Font&&this.type3FontRefs.has(q))return B();if(this.fontCache.has(q))return this.fontCache.get(q);if(L=H.fetchIfRef(q),!(L instanceof c.Dict))return B();if(L.cacheKey&&this.fontCache.has(L.cacheKey))return this.fontCache.get(L.cacheKey);const Z=(0,t.createPromiseCapability)();let te;try{te=this.preEvaluateFont(L),te.cssFontInfo=z}catch(re){return(0,t.warn)(`loadFont - preEvaluateFont failed: "${re}".`),B()}const{descriptor:Q,hash:ee}=te,J=q instanceof c.Ref;let ne;if(J&&(ne=`f${q.toString()}`),ee&&Q instanceof c.Dict){Q.fontAliases||(Q.fontAliases=Object.create(null));const re=Q.fontAliases;if(re[ee]){const ae=re[ee].aliasRef;if(J&&ae&&this.fontCache.has(ae))return this.fontCache.putAlias(q,ae),this.fontCache.get(q)}else re[ee]={fontID:this.idFactory.createFontId()};J&&(re[ee].aliasRef=q),ne=re[ee].fontID}return J?this.fontCache.put(q,Z.promise):(ne||(ne=this.idFactory.createFontId()),L.cacheKey=`cacheKey_${ne}`,this.fontCache.put(L.cacheKey,Z.promise)),(0,t.assert)(ne&&ne.startsWith("f"),'The "fontID" must be (correctly) defined.'),L.loadedName=`${this.idFactory.getDocId()}_${ne}`,this.translateFont(te).then(re=>{re.fontType!==void 0&&H.stats.addFontType(re.fontType),Z.resolve(new D({loadedName:L.loadedName,font:re,dict:L,evaluatorOptions:this.options}))}).catch(re=>{this.handler.send("UnsupportedFeature",{featureId:t.UNSUPPORTED_FEATURES.errorFontTranslate}),(0,t.warn)(`loadFont - translateFont failed: "${re}".`);try{const ae=Q&&Q.get("FontFile3"),se=ae&&ae.get("Subtype"),oe=(0,e.getFontType)(te.type,se&&se.name);oe!==void 0&&H.stats.addFontType(oe)}catch{}Z.resolve(new D({loadedName:L.loadedName,font:new s.ErrorFont(re instanceof Error?re.message:re),dict:L,evaluatorOptions:this.options}))}),Z.promise}buildPath(I,L,$,W=!1){const z=I.length-1;$||($=[]);let B;if(z<0||I.fnArray[z]!==t.OPS.constructPath)W&&((0,t.warn)(`Encountered path operator "${L}" inside of a text object.`),I.addOp(t.OPS.save,null)),B=[1/0,-1/0,1/0,-1/0],I.addOp(t.OPS.constructPath,[[L],$,B]),W&&I.addOp(t.OPS.restore,null);else{const H=I.argsArray[z];H[0].push(L),Array.prototype.push.apply(H[1],$),B=H[2]}switch(L){case t.OPS.rectangle:B[0]=Math.min(B[0],$[0],$[0]+$[2]),B[1]=Math.max(B[1],$[0],$[0]+$[2]),B[2]=Math.min(B[2],$[1],$[1]+$[3]),B[3]=Math.max(B[3],$[1],$[1]+$[3]);break;case t.OPS.moveTo:case t.OPS.lineTo:B[0]=Math.min(B[0],$[0]),B[1]=Math.max(B[1],$[0]),B[2]=Math.min(B[2],$[1]),B[3]=Math.max(B[3],$[1]);break}}parseColorSpace({cs:I,resources:L,localColorSpaceCache:$}){return v.ColorSpace.parseAsync({cs:I,xref:this.xref,resources:L,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:$}).catch(W=>{if(W instanceof t.AbortException)return null;if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:t.UNSUPPORTED_FEATURES.errorColorSpace}),(0,t.warn)(`parseColorSpace - ignoring ColorSpace: "${W}".`),null;throw W})}parseShading({shading:I,resources:L,localColorSpaceCache:$,localShadingPatternCache:W}){let z=W.get(I);if(!z){var B=l.Pattern.parseShading(I,this.xref,L,this.handler,this._pdfFunctionFactory,$);const H=B.getIR();z=`pattern_${this.idFactory.createObjId()}`,W.set(I,z),this.handler.send("obj",[z,this.pageIndex,"Pattern",H])}return z}handleColorN(I,L,$,W,z,B,H,q,Z,te){const Q=$.pop();if(Q instanceof c.Name){const ee=z.getRaw(Q.name),J=ee instanceof c.Ref&&Z.getByRef(ee);if(J)try{const re=W.base?W.base.getRgb($,0):null,ae=(0,l.getTilingPatternIR)(J.operatorListIR,J.dict,re);I.addOp(L,ae);return}catch{}const ne=this.xref.fetchIfRef(ee);if(ne){const re=ne instanceof A.BaseStream?ne.dict:ne,ae=re.get("PatternType");if(ae===p.TILING){const se=W.base?W.base.getRgb($,0):null;return this.handleTilingType(L,se,B,ne,re,I,H,Z)}else if(ae===p.SHADING){const se=re.get("Shading"),oe=re.getArray("Matrix"),me=this.parseShading({shading:se,resources:B,localColorSpaceCache:q,localShadingPatternCache:te});I.addOp(L,["Shading",me,oe]);return}throw new t.FormatError(`Unknown PatternType: ${ae}`)}}throw new t.FormatError(`Unknown PatternName: ${Q}`)}_parseVisibilityExpression(I,L,$){if(++L>10){(0,t.warn)("Visibility expression is too deeply nested");return}const z=I.length,B=this.xref.fetchIfRef(I[0]);if(z<2||!(B instanceof c.Name)){(0,t.warn)("Invalid visibility expression");return}switch(B.name){case"And":case"Or":case"Not":$.push(B.name);break;default:(0,t.warn)(`Invalid operator ${B.name} in visibility expression`);return}for(let H=1;H<z;H++){const q=I[H],Z=this.xref.fetchIfRef(q);if(Array.isArray(Z)){const te=[];$.push(te),this._parseVisibilityExpression(Z,L,te)}else q instanceof c.Ref&&$.push(q.toString())}}async parseMarkedContentProps(I,L){let $;if(I instanceof c.Name)$=L.get("Properties").get(I.name);else if(I instanceof c.Dict)$=I;else throw new t.FormatError("Optional content properties malformed.");const W=$.get("Type").name;if(W==="OCG")return{type:W,id:$.objId};if(W==="OCMD"){const z=$.get("VE");if(Array.isArray(z)){const H=[];if(this._parseVisibilityExpression(z,0,H),H.length>0)return{type:"OCMD",expression:H}}const B=$.get("OCGs");if(Array.isArray(B)||B instanceof c.Dict){const H=[];if(Array.isArray(B))for(const q of B)H.push(q.toString());else H.push(B.objId);return{type:W,ids:H,policy:$.get("P")instanceof c.Name?$.get("P").name:null,expression:null}}else if(B instanceof c.Ref)return{type:W,id:B.toString()}}return null}getOperatorList({stream:I,task:L,resources:$,operatorList:W,initialState:z=null,fallbackFontDict:B=null}){if($=$||c.Dict.empty,z=z||new G,!W)throw new Error('getOperatorList: missing "operatorList" parameter');const H=this,q=this.xref;let Z=!1;const te=new x.LocalImageCache,Q=new x.LocalColorSpaceCache,ee=new x.LocalGStateCache,J=new x.LocalTilingPatternCache,ne=new Map,re=$.get("XObject")||c.Dict.empty,ae=$.get("Pattern")||c.Dict.empty,se=new U(z),oe=new Y(I,q,se),me=new C;function xe(Ae){for(let Se=0,Fe=oe.savedStatesDepth;Se<Fe;Se++)W.addOp(t.OPS.restore,[])}return new Promise(function Ae(Se,Fe){const Pe=function(Ne){Promise.all([Ne,W.ready]).then(function(){try{Ae(Se,Fe)}catch(Qe){Fe(Qe)}},Fe)};L.ensureNotTerminated(),me.reset();const ue={};let ye,le,he,ce,Te,Re;for(;!(ye=me.check())&&(ue.args=null,!!oe.read(ue));){let Ne=ue.args,Qe=ue.fn;switch(Qe|0){case t.OPS.paintXObject:if(Re=Ne[0]instanceof c.Name,Te=Ne[0].name,Re){const Ee=te.getByName(Te);if(Ee){W.addImageOps(Ee.fn,Ee.args,Ee.optionalContent),F(Ee),Ne=null;continue}}Pe(new Promise(function(Ee,rt){if(!Re)throw new t.FormatError("XObject must be referred to by name.");let Ze=re.getRaw(Te);if(Ze instanceof c.Ref){const lt=te.getByRef(Ze);if(lt){W.addImageOps(lt.fn,lt.args,lt.optionalContent),F(lt),Ee();return}const ht=H.globalImageCache.getData(Ze,H.pageIndex);if(ht){W.addDependency(ht.objId),W.addImageOps(ht.fn,ht.args,ht.optionalContent),Ee();return}Ze=q.fetch(Ze)}if(!(Ze instanceof A.BaseStream))throw new t.FormatError("XObject should be a stream");const vt=Ze.dict.get("Subtype");if(!(vt instanceof c.Name))throw new t.FormatError("XObject should have a Name subtype");if(vt.name==="Form"){se.save(),H.buildFormXObject($,Ze,null,W,L,se.state.clone(),Q).then(function(){se.restore(),Ee()},rt);return}else if(vt.name==="Image"){H.buildPaintImageXObject({resources:$,image:Ze,operatorList:W,cacheKey:Te,localImageCache:te,localColorSpaceCache:Q}).then(Ee,rt);return}else if(vt.name==="PS")(0,t.info)("Ignored XObject subtype PS");else throw new t.FormatError(`Unhandled XObject subtype ${vt.name}`);Ee()}).catch(function(Ee){if(!(Ee instanceof t.AbortException)){if(H.options.ignoreErrors){H.handler.send("UnsupportedFeature",{featureId:t.UNSUPPORTED_FEATURES.errorXObject}),(0,t.warn)(`getOperatorList - ignoring XObject: "${Ee}".`);return}throw Ee}}));return;case t.OPS.setFont:var He=Ne[1];Pe(H.handleSetFont($,Ne,null,W,L,se.state,B).then(function(Ee){W.addDependency(Ee),W.addOp(t.OPS.setFont,[Ee,He])}));return;case t.OPS.beginText:Z=!0;break;case t.OPS.endText:Z=!1;break;case t.OPS.endInlineImage:var Ce=Ne[0].cacheKey;if(Ce){const Ee=te.getByName(Ce);if(Ee){W.addImageOps(Ee.fn,Ee.args,Ee.optionalContent),F(Ee),Ne=null;continue}}Pe(H.buildPaintImageXObject({resources:$,image:Ne[0],isInline:!0,operatorList:W,cacheKey:Ce,localImageCache:te,localColorSpaceCache:Q}));return;case t.OPS.showText:if(!se.state.font){H.ensureStateFont(se.state);continue}Ne[0]=H.handleText(Ne[0],se.state);break;case t.OPS.showSpacedText:if(!se.state.font){H.ensureStateFont(se.state);continue}var ve=Ne[0],fe=[],We=ve.length,Ue=se.state;for(le=0;le<We;++le){const Ee=ve[le];typeof Ee=="string"?Array.prototype.push.apply(fe,H.handleText(Ee,Ue)):typeof Ee=="number"&&fe.push(Ee)}Ne[0]=fe,Qe=t.OPS.showText;break;case t.OPS.nextLineShowText:if(!se.state.font){H.ensureStateFont(se.state);continue}W.addOp(t.OPS.nextLine),Ne[0]=H.handleText(Ne[0],se.state),Qe=t.OPS.showText;break;case t.OPS.nextLineSetSpacingShowText:if(!se.state.font){H.ensureStateFont(se.state);continue}W.addOp(t.OPS.nextLine),W.addOp(t.OPS.setWordSpacing,[Ne.shift()]),W.addOp(t.OPS.setCharSpacing,[Ne.shift()]),Ne[0]=H.handleText(Ne[0],se.state),Qe=t.OPS.showText;break;case t.OPS.setTextRenderingMode:se.state.textRenderingMode=Ne[0];break;case t.OPS.setFillColorSpace:{const Ee=v.ColorSpace.getCached(Ne[0],q,Q);if(Ee){se.state.fillColorSpace=Ee;continue}Pe(H.parseColorSpace({cs:Ne[0],resources:$,localColorSpaceCache:Q}).then(function(rt){rt&&(se.state.fillColorSpace=rt)}));return}case t.OPS.setStrokeColorSpace:{const Ee=v.ColorSpace.getCached(Ne[0],q,Q);if(Ee){se.state.strokeColorSpace=Ee;continue}Pe(H.parseColorSpace({cs:Ne[0],resources:$,localColorSpaceCache:Q}).then(function(rt){rt&&(se.state.strokeColorSpace=rt)}));return}case t.OPS.setFillColor:ce=se.state.fillColorSpace,Ne=ce.getRgb(Ne,0),Qe=t.OPS.setFillRGBColor;break;case t.OPS.setStrokeColor:ce=se.state.strokeColorSpace,Ne=ce.getRgb(Ne,0),Qe=t.OPS.setStrokeRGBColor;break;case t.OPS.setFillGray:se.state.fillColorSpace=v.ColorSpace.singletons.gray,Ne=v.ColorSpace.singletons.gray.getRgb(Ne,0),Qe=t.OPS.setFillRGBColor;break;case t.OPS.setStrokeGray:se.state.strokeColorSpace=v.ColorSpace.singletons.gray,Ne=v.ColorSpace.singletons.gray.getRgb(Ne,0),Qe=t.OPS.setStrokeRGBColor;break;case t.OPS.setFillCMYKColor:se.state.fillColorSpace=v.ColorSpace.singletons.cmyk,Ne=v.ColorSpace.singletons.cmyk.getRgb(Ne,0),Qe=t.OPS.setFillRGBColor;break;case t.OPS.setStrokeCMYKColor:se.state.strokeColorSpace=v.ColorSpace.singletons.cmyk,Ne=v.ColorSpace.singletons.cmyk.getRgb(Ne,0),Qe=t.OPS.setStrokeRGBColor;break;case t.OPS.setFillRGBColor:se.state.fillColorSpace=v.ColorSpace.singletons.rgb,Ne=v.ColorSpace.singletons.rgb.getRgb(Ne,0);break;case t.OPS.setStrokeRGBColor:se.state.strokeColorSpace=v.ColorSpace.singletons.rgb,Ne=v.ColorSpace.singletons.rgb.getRgb(Ne,0);break;case t.OPS.setFillColorN:if(ce=se.state.fillColorSpace,ce.name==="Pattern"){Pe(H.handleColorN(W,t.OPS.setFillColorN,Ne,ce,ae,$,L,Q,J,ne));return}Ne=ce.getRgb(Ne,0),Qe=t.OPS.setFillRGBColor;break;case t.OPS.setStrokeColorN:if(ce=se.state.strokeColorSpace,ce.name==="Pattern"){Pe(H.handleColorN(W,t.OPS.setStrokeColorN,Ne,ce,ae,$,L,Q,J,ne));return}Ne=ce.getRgb(Ne,0),Qe=t.OPS.setStrokeRGBColor;break;case t.OPS.shadingFill:var ze=$.get("Shading");if(!ze)throw new t.FormatError("No shading resource found");var tt=ze.get(Ne[0].name);if(!tt)throw new t.FormatError("No shading object found");Ne=[H.parseShading({shading:tt,resources:$,localColorSpaceCache:Q,localShadingPatternCache:ne})],Qe=t.OPS.shadingFill;break;case t.OPS.setGState:if(Re=Ne[0]instanceof c.Name,Te=Ne[0].name,Re){const Ee=ee.getByName(Te);if(Ee){Ee.length>0&&W.addOp(t.OPS.setGState,[Ee]),Ne=null;continue}}Pe(new Promise(function(Ee,rt){if(!Re)throw new t.FormatError("GState must be referred to by name.");const Ze=$.get("ExtGState");if(!(Ze instanceof c.Dict))throw new t.FormatError("ExtGState should be a dictionary.");const vt=Ze.get(Te);if(!(vt instanceof c.Dict))throw new t.FormatError("GState should be a dictionary.");H.setGState({resources:$,gState:vt,operatorList:W,cacheKey:Te,task:L,stateManager:se,localGStateCache:ee,localColorSpaceCache:Q}).then(Ee,rt)}).catch(function(Ee){if(!(Ee instanceof t.AbortException)){if(H.options.ignoreErrors){H.handler.send("UnsupportedFeature",{featureId:t.UNSUPPORTED_FEATURES.errorExtGState}),(0,t.warn)(`getOperatorList - ignoring ExtGState: "${Ee}".`);return}throw Ee}}));return;case t.OPS.moveTo:case t.OPS.lineTo:case t.OPS.curveTo:case t.OPS.curveTo2:case t.OPS.curveTo3:case t.OPS.closePath:case t.OPS.rectangle:H.buildPath(W,Qe,Ne,Z);continue;case t.OPS.markPoint:case t.OPS.markPointProps:case t.OPS.beginCompat:case t.OPS.endCompat:continue;case t.OPS.beginMarkedContentProps:if(!(Ne[0]instanceof c.Name)){(0,t.warn)(`Expected name for beginMarkedContentProps arg0=${Ne[0]}`);continue}if(Ne[0].name==="OC"){Pe(H.parseMarkedContentProps(Ne[1],$).then(Ee=>{W.addOp(t.OPS.beginMarkedContentProps,["OC",Ee])}).catch(Ee=>{if(!(Ee instanceof t.AbortException)){if(H.options.ignoreErrors){H.handler.send("UnsupportedFeature",{featureId:t.UNSUPPORTED_FEATURES.errorMarkedContent}),(0,t.warn)(`getOperatorList - ignoring beginMarkedContentProps: "${Ee}".`);return}throw Ee}}));return}Ne=[Ne[0].name,Ne[1]instanceof c.Dict?Ne[1].get("MCID"):null];break;case t.OPS.beginMarkedContent:case t.OPS.endMarkedContent:default:if(Ne!==null){for(le=0,he=Ne.length;le<he&&!(Ne[le]instanceof c.Dict);le++);if(le<he){(0,t.warn)("getOperatorList - ignoring operator: "+Qe);continue}}}W.addOp(Qe,Ne)}if(ye){Pe(E);return}xe(),Se()}).catch(Ae=>{if(!(Ae instanceof t.AbortException)){if(this.options.ignoreErrors){this.handler.send("UnsupportedFeature",{featureId:t.UNSUPPORTED_FEATURES.errorOperatorList}),(0,t.warn)(`getOperatorList - ignoring errors during "${L.name}" task: "${Ae}".`),xe();return}throw Ae}})}getTextContent({stream:I,task:L,resources:$,stateManager:W=null,combineTextItems:z=!1,includeMarkedContent:B=!1,sink:H,seenStyles:q=new Set,viewBox:Z}){$=$||c.Dict.empty,W=W||new U(new X);const te=(0,n.getNormalizedUnicodes)(),Q={items:[],styles:Object.create(null)},ee={initialized:!1,str:[],totalWidth:0,totalHeight:0,width:0,height:0,vertical:!1,prevTransform:null,textAdvanceScale:0,spaceInFlowMin:0,spaceInFlowMax:0,trackingSpaceMin:1/0,negativeSpaceMax:-1/0,notASpace:-1/0,transform:null,fontName:null,hasEOL:!1},J=[" "," "];let ne=0;function re(Ee){const rt=(ne+1)%2,Ze=J[ne]!==" "&&J[rt]===" ";return J[ne]=Ee,ne=rt,Ze}function ae(){J[0]=J[1]=" ",ne=0}const se=.1,oe=.03,me=-.2,xe=.1,Ae=.6,Se=this,Fe=this.xref,Pe=[];let ue=null;const ye=new x.LocalImageCache,le=new x.LocalGStateCache,he=new Y(I,Fe,W);let ce;function Te(){const Ee=ce.font,rt=[ce.fontSize*ce.textHScale,0,0,ce.fontSize,0,ce.textRise];if(Ee.isType3Font&&(ce.fontSize<=1||Ee.isCharBBox)&&!(0,t.isArrayEqual)(ce.fontMatrix,t.FONT_IDENTITY_MATRIX)){const Ze=Ee.bbox[3]-Ee.bbox[1];Ze>0&&(rt[3]*=Ze*ce.fontMatrix[3])}return t.Util.transform(ce.ctm,t.Util.transform(ce.textMatrix,rt))}function Re(){if(ee.initialized)return ee;const Ee=ce.font,rt=Ee.loadedName;q.has(rt)||(q.add(rt),Q.styles[rt]={fontFamily:Ee.fallbackName,ascent:Ee.ascent,descent:Ee.descent,vertical:Ee.vertical}),ee.fontName=rt;const Ze=ee.transform=Te();Ee.vertical?(ee.width=ee.totalWidth=Math.hypot(Ze[0],Ze[1]),ee.height=ee.totalHeight=0,ee.vertical=!0):(ee.width=ee.totalWidth=0,ee.height=ee.totalHeight=Math.hypot(Ze[2],Ze[3]),ee.vertical=!1);const vt=Math.hypot(ce.textLineMatrix[0],ce.textLineMatrix[1]),lt=Math.hypot(ce.ctm[0],ce.ctm[1]);return ee.textAdvanceScale=lt*vt,ee.trackingSpaceMin=ce.fontSize*se,ee.notASpace=ce.fontSize*oe,ee.negativeSpaceMax=ce.fontSize*me,ee.spaceInFlowMin=ce.fontSize*xe,ee.spaceInFlowMax=ce.fontSize*Ae,ee.hasEOL=!1,ee.initialized=!0,ee}function He(){if(!ee.initialized)return;const Ee=Math.hypot(ce.textLineMatrix[0],ce.textLineMatrix[1]),Ze=Math.hypot(ce.ctm[0],ce.ctm[1])*Ee;Ze!==ee.textAdvanceScale&&(ee.vertical?(ee.totalHeight+=ee.height*ee.textAdvanceScale,ee.height=0):(ee.totalWidth+=ee.width*ee.textAdvanceScale,ee.width=0),ee.textAdvanceScale=Ze)}function Ce(Ee){const rt=Ee.str.join(""),Ze=(0,k.bidi)(rt,-1,Ee.vertical);return{str:Ze.str,dir:Ze.dir,width:Math.abs(Ee.totalWidth),height:Math.abs(Ee.totalHeight),transform:Ee.transform,fontName:Ee.fontName,hasEOL:Ee.hasEOL}}function ve(Ee,rt){return Se.loadFont(Ee,rt,$).then(function(Ze){return Ze.font.isType3Font?Ze.loadType3Data(Se,$,L).catch(function(){}).then(function(){return Ze}):Ze}).then(function(Ze){ce.font=Ze.font,ce.fontMatrix=Ze.font.fontMatrix||t.FONT_IDENTITY_MATRIX})}function fe(Ee,rt,Ze){const vt=Math.hypot(Ze[0],Ze[1]);return[(Ze[0]*Ee+Ze[1]*rt)/vt,(Ze[2]*Ee+Ze[3]*rt)/vt]}function We(){const Ee=Te();let rt=Ee[4],Ze=Ee[5];const vt=rt-Z[0],lt=Ze-Z[1];if(vt<0||vt>Z[2]||lt<0||lt>Z[3])return!1;if(!z||!ce.font||!ee.prevTransform)return!0;let ht=ee.prevTransform[4],ot=ee.prevTransform[5];if(ht===rt&&ot===Ze)return!0;let Dt=-1;switch(Ee[0]&&Ee[1]===0&&Ee[2]===0?Dt=Ee[0]>0?0:180:Ee[1]&&Ee[0]===0&&Ee[3]===0&&(Dt=Ee[1]>0?90:270),Dt){case 0:break;case 90:[rt,Ze]=[Ze,rt],[ht,ot]=[ot,ht];break;case 180:[rt,Ze,ht,ot]=[-rt,-Ze,-ht,-ot];break;case 270:[rt,Ze]=[-Ze,-rt],[ht,ot]=[-ot,-ht];break;default:[rt,Ze]=fe(rt,Ze,Ee),[ht,ot]=fe(ht,ot,ee.prevTransform)}if(ce.font.vertical){const Ge=(ot-Ze)/ee.textAdvanceScale,Ve=rt-ht,it=Math.sign(ee.height);return Ge<it*ee.negativeSpaceMax?Math.abs(Ve)>.5*ee.width?(ze(),!0):(ae(),Ne(),!0):Math.abs(Ve)>ee.width?(ze(),!0):(Ge<=it*ee.notASpace&&ae(),Ge<=it*ee.trackingSpaceMin?ee.height+=Ge:tt(Ge,ee.prevTransform,it)||(ee.str.length===0?(ae(),Q.items.push({str:" ",dir:"ltr",width:0,height:Math.abs(Ge),transform:ee.prevTransform,fontName:ee.fontName,hasEOL:!1})):ee.height+=Ge),!0)}const Ot=(rt-ht)/ee.textAdvanceScale,Xe=Ze-ot,Ie=Math.sign(ee.width);return Ot<Ie*ee.negativeSpaceMax?Math.abs(Xe)>.5*ee.height?(ze(),!0):(ae(),Ne(),!0):Math.abs(Xe)>ee.height?(ze(),!0):(Ot<=Ie*ee.notASpace&&ae(),Ot<=Ie*ee.trackingSpaceMin?ee.width+=Ot:tt(Ot,ee.prevTransform,Ie)||(ee.str.length===0?(ae(),Q.items.push({str:" ",dir:"ltr",width:Math.abs(Ot),height:0,transform:ee.prevTransform,fontName:ee.fontName,hasEOL:!1})):ee.width+=Ot),!0)}function Ue({chars:Ee,extraSpacing:rt}){const Ze=ce.font;if(!Ee){const ht=ce.charSpacing+rt;ht&&(Ze.vertical?ce.translateTextMatrix(0,-ht):ce.translateTextMatrix(ht*ce.textHScale,0));return}const vt=Ze.charsToGlyphs(Ee),lt=ce.fontMatrix[0]*ce.fontSize;for(let ht=0,ot=vt.length;ht<ot;ht++){const Dt=vt[ht];if(Dt.isInvisibleFormatMark)continue;let Ot=ce.charSpacing+(ht+1===ot?rt:0),Xe=Dt.width;Ze.vertical&&(Xe=Dt.vmetric?Dt.vmetric[0]:-Xe);let Ie=Xe*lt;if(Dt.isWhitespace){Ze.vertical?(Ot+=-Ie+ce.wordSpacing,ce.translateTextMatrix(0,-Ot)):(Ot+=Ie+ce.wordSpacing,ce.translateTextMatrix(Ot*ce.textHScale,0)),re(" ");continue}if(!We())continue;const Ge=Re();Dt.isZeroWidthDiacritic&&(Ie=0),Ze.vertical?(ce.translateTextMatrix(0,Ie),Ie=Math.abs(Ie),Ge.height+=Ie):(Ie*=ce.textHScale,ce.translateTextMatrix(Ie,0),Ge.width+=Ie),Ie&&(Ge.prevTransform=Te());let Ve=Dt.unicode;Ve=te[Ve]||Ve,Ve=(0,n.reverseIfRtl)(Ve),re(Ve)&&Ge.str.push(" "),Ge.str.push(Ve),Ot&&(Ze.vertical?ce.translateTextMatrix(0,-Ot):ce.translateTextMatrix(Ot*ce.textHScale,0))}}function ze(){ae(),ee.initialized?(ee.hasEOL=!0,Ne()):Q.items.push({str:"",dir:"ltr",width:0,height:0,transform:Te(),fontName:ce.font.loadedName,hasEOL:!0})}function tt(Ee,rt,Ze){if(Ze*ee.spaceInFlowMin<=Ee&&Ee<=Ze*ee.spaceInFlowMax)return ee.initialized&&(ae(),ee.str.push(" ")),!1;const vt=ee.fontName;let lt=0;return ee.vertical&&(lt=Ee,Ee=0),Ne(),ae(),Q.items.push({str:" ",dir:"ltr",width:Math.abs(Ee),height:Math.abs(lt),transform:rt||Te(),fontName:vt,hasEOL:!1}),!0}function Ne(){!ee.initialized||!ee.str||(ee.vertical?ee.totalHeight+=ee.height*ee.textAdvanceScale:ee.totalWidth+=ee.width*ee.textAdvanceScale,Q.items.push(Ce(ee)),ee.initialized=!1,ee.str.length=0)}function Qe(Ee=!1){const rt=Q.items.length;rt!==0&&(Ee&&rt<P||(H.enqueue(Q,rt),Q.items=[],Q.styles=Object.create(null)))}const ct=new C;return new Promise(function Ee(rt,Ze){const vt=function(Ge){Qe(!0),Promise.all([Ge,H.ready]).then(function(){try{Ee(rt,Ze)}catch(Ve){Ze(Ve)}},Ze)};L.ensureNotTerminated(),ct.reset();const lt={};let ht,ot=[];for(;!(ht=ct.check())&&(ot.length=0,lt.args=ot,!!he.read(lt));){ce=W.state;const Ge=lt.fn;switch(ot=lt.args,Ge|0){case t.OPS.setFont:var Dt=ot[0].name,Ot=ot[1];if(ce.font&&Dt===ce.fontName&&Ot===ce.fontSize)break;Ne(),ce.fontName=Dt,ce.fontSize=Ot,vt(ve(Dt,null));return;case t.OPS.setTextRise:ce.textRise=ot[0];break;case t.OPS.setHScale:ce.textHScale=ot[0]/100;break;case t.OPS.setLeading:ce.leading=ot[0];break;case t.OPS.moveText:ce.translateTextLineMatrix(ot[0],ot[1]),ce.textMatrix=ce.textLineMatrix.slice();break;case t.OPS.setLeadingMoveText:ce.leading=-ot[1],ce.translateTextLineMatrix(ot[0],ot[1]),ce.textMatrix=ce.textLineMatrix.slice();break;case t.OPS.nextLine:ce.carriageReturn();break;case t.OPS.setTextMatrix:ce.setTextMatrix(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5]),ce.setTextLineMatrix(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5]),He();break;case t.OPS.setCharSpacing:ce.charSpacing=ot[0];break;case t.OPS.setWordSpacing:ce.wordSpacing=ot[0];break;case t.OPS.beginText:ce.textMatrix=t.IDENTITY_MATRIX.slice(),ce.textLineMatrix=t.IDENTITY_MATRIX.slice();break;case t.OPS.showSpacedText:if(!W.state.font){Se.ensureStateFont(W.state);continue}const Ve=(ce.font.vertical?1:-1)*ce.fontSize/1e3,it=ot[0];for(let nt=0,Ke=it.length;nt<Ke-1;nt++){const at=it[nt];if(typeof at=="string")Pe.push(at);else if(typeof at=="number"&&at!==0){const ut=Pe.join("");Pe.length=0,Ue({chars:ut,extraSpacing:at*Ve})}}const gt=it.at(-1);if(typeof gt=="string"&&Pe.push(gt),Pe.length>0){const nt=Pe.join("");Pe.length=0,Ue({chars:nt,extraSpacing:0})}break;case t.OPS.showText:if(!W.state.font){Se.ensureStateFont(W.state);continue}Ue({chars:ot[0],extraSpacing:0});break;case t.OPS.nextLineShowText:if(!W.state.font){Se.ensureStateFont(W.state);continue}ce.carriageReturn(),Ue({chars:ot[0],extraSpacing:0});break;case t.OPS.nextLineSetSpacingShowText:if(!W.state.font){Se.ensureStateFont(W.state);continue}ce.wordSpacing=ot[0],ce.charSpacing=ot[1],ce.carriageReturn(),Ue({chars:ot[2],extraSpacing:0});break;case t.OPS.paintXObject:Ne(),ue||(ue=$.get("XObject")||c.Dict.empty);var Xe=ot[0]instanceof c.Name,Ie=ot[0].name;if(Xe&&ye.getByName(Ie))break;vt(new Promise(function(nt,Ke){if(!Xe)throw new t.FormatError("XObject must be referred to by name.");let at=ue.getRaw(Ie);if(at instanceof c.Ref){if(ye.getByRef(at)){nt();return}if(Se.globalImageCache.getData(at,Se.pageIndex)){nt();return}at=Fe.fetch(at)}if(!(at instanceof A.BaseStream))throw new t.FormatError("XObject should be a stream");const ut=at.dict.get("Subtype");if(!(ut instanceof c.Name))throw new t.FormatError("XObject should have a Name subtype");if(ut.name!=="Form"){ye.set(Ie,at.dict.objId,!0),nt();return}const St=W.state.clone(),bt=new U(St),ft=at.dict.getArray("Matrix");Array.isArray(ft)&&ft.length===6&&bt.transform(ft),Qe();const we={enqueueInvoked:!1,enqueue(_e,$e){this.enqueueInvoked=!0,H.enqueue(_e,$e)},get desiredSize(){return H.desiredSize},get ready(){return H.ready}};Se.getTextContent({stream:at,task:L,resources:at.dict.get("Resources")||$,stateManager:bt,combineTextItems:z,includeMarkedContent:B,sink:we,seenStyles:q,viewBox:Z}).then(function(){we.enqueueInvoked||ye.set(Ie,at.dict.objId,!0),nt()},Ke)}).catch(function(nt){if(!(nt instanceof t.AbortException)){if(Se.options.ignoreErrors){(0,t.warn)(`getTextContent - ignoring XObject: "${nt}".`);return}throw nt}}));return;case t.OPS.setGState:if(Xe=ot[0]instanceof c.Name,Ie=ot[0].name,Xe&&le.getByName(Ie))break;vt(new Promise(function(nt,Ke){if(!Xe)throw new t.FormatError("GState must be referred to by name.");const at=$.get("ExtGState");if(!(at instanceof c.Dict))throw new t.FormatError("ExtGState should be a dictionary.");const ut=at.get(Ie);if(!(ut instanceof c.Dict))throw new t.FormatError("GState should be a dictionary.");const St=ut.get("Font");if(!St){le.set(Ie,ut.objId,!0),nt();return}Ne(),ce.fontName=null,ce.fontSize=St[1],ve(null,St[0]).then(nt,Ke)}).catch(function(nt){if(!(nt instanceof t.AbortException)){if(Se.options.ignoreErrors){(0,t.warn)(`getTextContent - ignoring ExtGState: "${nt}".`);return}throw nt}}));return;case t.OPS.beginMarkedContent:Ne(),B&&Q.items.push({type:"beginMarkedContent",tag:ot[0]instanceof c.Name?ot[0].name:null});break;case t.OPS.beginMarkedContentProps:if(Ne(),B){let nt=null;ot[1]instanceof c.Dict&&(nt=ot[1].get("MCID")),Q.items.push({type:"beginMarkedContentProps",id:Number.isInteger(nt)?`${Se.idFactory.getPageObjId()}_mcid${nt}`:null,tag:ot[0]instanceof c.Name?ot[0].name:null})}break;case t.OPS.endMarkedContent:Ne(),B&&Q.items.push({type:"endMarkedContent"});break}if(Q.items.length>=H.desiredSize){ht=!0;break}}if(ht){vt(E);return}Ne(),Qe(),rt()}).catch(Ee=>{if(!(Ee instanceof t.AbortException)){if(this.options.ignoreErrors){(0,t.warn)(`getTextContent - ignoring errors during "${L.name}" task: "${Ee}".`),Ne(),Qe();return}throw Ee}})}extractDataStructures(I,L,$){const W=this.xref;let z;const B=this.readToUnicode($.toUnicode||I.get("ToUnicode")||L.get("ToUnicode"));if($.composite){const te=I.get("CIDSystemInfo");te instanceof c.Dict&&($.cidSystemInfo={registry:(0,t.stringToPDFString)(te.get("Registry")),ordering:(0,t.stringToPDFString)(te.get("Ordering")),supplement:te.get("Supplement")});try{const Q=I.get("CIDToGIDMap");Q instanceof A.BaseStream&&(z=Q.getBytes())}catch(Q){if(!this.options.ignoreErrors)throw Q;(0,t.warn)(`extractDataStructures - ignoring CIDToGIDMap data: "${Q}".`)}}const H=[];let q=null,Z;if(I.has("Encoding")){if(Z=I.get("Encoding"),Z instanceof c.Dict){if(q=Z.get("BaseEncoding"),q=q instanceof c.Name?q.name:null,Z.has("Differences")){const te=Z.get("Differences");let Q=0;for(let ee=0,J=te.length;ee<J;ee++){const ne=W.fetchIfRef(te[ee]);if(typeof ne=="number")Q=ne;else if(ne instanceof c.Name)H[Q++]=ne.name;else throw new t.FormatError(`Invalid entry in 'Differences' array: ${ne}`)}}}else if(Z instanceof c.Name)q=Z.name;else{const te="Encoding is not a Name nor a Dict";if(!this.options.ignoreErrors)throw new t.FormatError(te);(0,t.warn)(te)}q!=="MacRomanEncoding"&&q!=="MacExpertEncoding"&&q!=="WinAnsiEncoding"&&(q=null)}if(q)$.defaultEncoding=(0,a.getEncoding)(q);else{const te=!!($.flags&e.FontFlags.Symbolic),Q=!!($.flags&e.FontFlags.Nonsymbolic);Z=a.StandardEncoding,$.type==="TrueType"&&!Q&&(Z=a.WinAnsiEncoding),te&&(Z=a.MacRomanEncoding,(!$.file||$.isInternalFont)&&(/Symbol/i.test($.name)?Z=a.SymbolSetEncoding:/Dingbats|Wingdings/i.test($.name)&&(Z=a.ZapfDingbatsEncoding))),$.defaultEncoding=Z}return $.differences=H,$.baseEncodingName=q,$.hasEncoding=!!q||H.length>0,$.dict=I,B.then(te=>($.toUnicode=te,this.buildToUnicode($))).then(te=>($.toUnicode=te,z&&($.cidToGidMap=this.readCidToGidMap(z,te)),$))}_simpleFontToUnicode(I,L=!1){(0,t.assert)(!I.composite,"Must be a simple font.");const $=[],W=I.defaultEncoding.slice(),z=I.baseEncodingName,B=I.differences;for(const q in B){const Z=B[q];Z!==".notdef"&&(W[q]=Z)}const H=(0,K.getGlyphsUnicode)();for(const q in W){let Z=W[q];if(Z!==""){if(H[Z]===void 0){let te=0;switch(Z[0]){case"G":Z.length===3&&(te=parseInt(Z.substring(1),16));break;case"g":Z.length===5&&(te=parseInt(Z.substring(1),16));break;case"C":case"c":if(Z.length>=3&&Z.length<=4){const ee=Z.substring(1);if(L){te=parseInt(ee,16);break}if(te=+ee,Number.isNaN(te)&&Number.isInteger(parseInt(ee,16)))return this._simpleFontToUnicode(I,!0)}break;default:const Q=(0,n.getUnicodeForGlyph)(Z,H);Q!==-1&&(te=Q)}if(te>0&&te<=1114111&&Number.isInteger(te)){if(z&&te===+q){const Q=(0,a.getEncoding)(z);if(Q&&(Z=Q[q])){$[q]=String.fromCharCode(H[Z]);continue}}$[q]=String.fromCodePoint(te)}continue}$[q]=String.fromCharCode(H[Z])}}return $}async buildToUnicode(I){if(I.hasIncludedToUnicodeMap=!!I.toUnicode&&I.toUnicode.length>0,I.hasIncludedToUnicodeMap)return!I.composite&&I.hasEncoding&&(I.fallbackToUnicode=this._simpleFontToUnicode(I)),I.toUnicode;if(!I.composite)return new d.ToUnicodeMap(this._simpleFontToUnicode(I));if(I.composite&&(I.cMap.builtInCMap&&!(I.cMap instanceof o.IdentityCMap)||I.cidSystemInfo.registry==="Adobe"&&(I.cidSystemInfo.ordering==="GB1"||I.cidSystemInfo.ordering==="CNS1"||I.cidSystemInfo.ordering==="Japan1"||I.cidSystemInfo.ordering==="Korea1"))){const{registry:L,ordering:$}=I.cidSystemInfo,W=c.Name.get(`${L}-${$}-UCS2`),z=await o.CMapFactory.create({encoding:W,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}),B=[];return I.cMap.forEach(function(H,q){if(q>65535)throw new t.FormatError("Max size of CID is 65,535");const Z=z.lookup(q);Z&&(B[H]=String.fromCharCode((Z.charCodeAt(0)<<8)+Z.charCodeAt(1)))}),new d.ToUnicodeMap(B)}return new d.IdentityToUnicodeMap(I.firstChar,I.lastChar)}readToUnicode(I){return I?I instanceof c.Name?o.CMapFactory.create({encoding:I,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then(function(L){return L instanceof o.IdentityCMap?new d.IdentityToUnicodeMap(0,65535):new d.ToUnicodeMap(L.getMap())}):I instanceof A.BaseStream?o.CMapFactory.create({encoding:I,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then(function(L){if(L instanceof o.IdentityCMap)return new d.IdentityToUnicodeMap(0,65535);const $=new Array(L.length);return L.forEach(function(W,z){if(typeof z=="number"){$[W]=String.fromCodePoint(z);return}const B=[];for(let H=0;H<z.length;H+=2){const q=z.charCodeAt(H)<<8|z.charCodeAt(H+1);if((q&63488)!==55296){B.push(q);continue}H+=2;const Z=z.charCodeAt(H)<<8|z.charCodeAt(H+1);B.push(((q&1023)<<10)+(Z&1023)+65536)}$[W]=String.fromCodePoint(...B)}),new d.ToUnicodeMap($)},L=>{if(L instanceof t.AbortException)return null;if(this.options.ignoreErrors)return this.handler.send("UnsupportedFeature",{featureId:t.UNSUPPORTED_FEATURES.errorFontToUnicode}),(0,t.warn)(`readToUnicode - ignoring ToUnicode data: "${L}".`),null;throw L}):Promise.resolve(null):Promise.resolve(null)}readCidToGidMap(I,L){const $=[];for(let W=0,z=I.length;W<z;W++){const B=I[W++]<<8|I[W],H=W>>1;B===0&&!L.has(H)||($[H]=B)}return $}extractWidths(I,L,$){const W=this.xref;let z=[],B=0;const H=[];let q,Z,te,Q,ee,J,ne,re;if($.composite){if(B=I.has("DW")?I.get("DW"):1e3,re=I.get("W"),re)for(Z=0,te=re.length;Z<te;Z++)if(J=W.fetchIfRef(re[Z++]),ne=W.fetchIfRef(re[Z]),Array.isArray(ne))for(Q=0,ee=ne.length;Q<ee;Q++)z[J++]=W.fetchIfRef(ne[Q]);else{const oe=W.fetchIfRef(re[++Z]);for(Q=J;Q<=ne;Q++)z[Q]=oe}if($.vertical){let oe=I.getArray("DW2")||[880,-1e3];if(q=[oe[1],B*.5,oe[0]],oe=I.get("W2"),oe)for(Z=0,te=oe.length;Z<te;Z++)if(J=W.fetchIfRef(oe[Z++]),ne=W.fetchIfRef(oe[Z]),Array.isArray(ne))for(Q=0,ee=ne.length;Q<ee;Q++)H[J++]=[W.fetchIfRef(ne[Q++]),W.fetchIfRef(ne[Q++]),W.fetchIfRef(ne[Q])];else{const me=[W.fetchIfRef(oe[++Z]),W.fetchIfRef(oe[++Z]),W.fetchIfRef(oe[++Z])];for(Q=J;Q<=ne;Q++)H[Q]=me}}}else{const oe=$.firstChar;if(re=I.get("Widths"),re){for(Q=oe,Z=0,te=re.length;Z<te;Z++)z[Q++]=W.fetchIfRef(re[Z]);B=parseFloat(L.get("MissingWidth"))||0}else{const me=I.get("BaseFont");if(me instanceof c.Name){const xe=this.getBaseFontMetrics(me.name);z=this.buildCharCodeToWidth(xe.widths,$),B=xe.defaultWidth}}}let ae=!0,se=B;for(const oe in z){const me=z[oe];if(me){if(!se){se=me;continue}if(se!==me){ae=!1;break}}}ae&&($.flags|=e.FontFlags.FixedPitch),$.defaultWidth=B,$.widths=z,$.defaultVMetrics=q,$.vmetrics=H}isSerifFont(I){const L=I.split("-")[0];return L in(0,r.getSerifFonts)()||L.search(/serif/gi)!==-1}getBaseFontMetrics(I){let L=0,$=Object.create(null),W=!1,B=(0,r.getStdFontMap)()[I]||I;const H=(0,j.getMetrics)();B in H||(this.isSerifFont(I)?B="Times-Roman":B="Helvetica");const q=H[B];return typeof q=="number"?(L=q,W=!0):$=q(),{defaultWidth:L,monospace:W,widths:$}}buildCharCodeToWidth(I,L){const $=Object.create(null),W=L.differences,z=L.defaultEncoding;for(let B=0;B<256;B++){if(B in W&&I[W[B]]){$[B]=I[W[B]];continue}if(B in z&&I[z[B]]){$[B]=I[z[B]];continue}}return $}preEvaluateFont(I){const L=I;let $=I.get("Subtype");if(!($ instanceof c.Name))throw new t.FormatError("invalid font Subtype");let W=!1,z,B;if($.name==="Type0"){const te=I.get("DescendantFonts");if(!te)throw new t.FormatError("Descendant fonts are not specified");if(I=Array.isArray(te)?this.xref.fetchIfRef(te[0]):te,!(I instanceof c.Dict))throw new t.FormatError("Descendant font is not a dictionary.");if($=I.get("Subtype"),!($ instanceof c.Name))throw new t.FormatError("invalid font Subtype");W=!0}const H=I.get("FirstChar")||0,q=I.get("LastChar")||(W?65535:255),Z=I.get("FontDescriptor");if(Z){z=new O.MurmurHash3_64;const te=L.getRaw("Encoding");if(te instanceof c.Name)z.update(te.name);else if(te instanceof c.Ref)z.update(te.toString());else if(te instanceof c.Dict){for(const ee of te.getRawValues())if(ee instanceof c.Name)z.update(ee.name);else if(ee instanceof c.Ref)z.update(ee.toString());else if(Array.isArray(ee)){const J=ee.length,ne=new Array(J);for(let re=0;re<J;re++){const ae=ee[re];ae instanceof c.Name?ne[re]=ae.name:(typeof ae=="number"||ae instanceof c.Ref)&&(ne[re]=ae.toString())}z.update(ne.join())}}if(z.update(`${H}-${q}`),B=I.get("ToUnicode")||L.get("ToUnicode"),B instanceof A.BaseStream){const ee=B.str||B,J=ee.buffer?new Uint8Array(ee.buffer.buffer,0,ee.bufferLength):new Uint8Array(ee.bytes.buffer,ee.start,ee.end-ee.start);z.update(J)}else B instanceof c.Name&&z.update(B.name);const Q=I.get("Widths")||L.get("Widths");if(Array.isArray(Q)){const ee=[];for(const J of Q)(typeof J=="number"||J instanceof c.Ref)&&ee.push(J.toString());z.update(ee.join())}if(W){z.update("compositeFont");const ee=I.get("W")||L.get("W");if(Array.isArray(ee)){const ne=[];for(const re of ee)if(typeof re=="number"||re instanceof c.Ref)ne.push(re.toString());else if(Array.isArray(re)){const ae=[];for(const se of re)(typeof se=="number"||se instanceof c.Ref)&&ae.push(se.toString());ne.push(`[${ae.join()}]`)}z.update(ne.join())}const J=I.getRaw("CIDToGIDMap")||L.getRaw("CIDToGIDMap");J instanceof c.Name?z.update(J.name):J instanceof c.Ref?z.update(J.toString()):J instanceof A.BaseStream&&z.update(J.peekBytes())}}return{descriptor:Z,dict:I,baseDict:L,composite:W,type:$.name,firstChar:H,lastChar:q,toUnicode:B,hash:z?z.hexdigest():""}}async translateFont({descriptor:I,dict:L,baseDict:$,composite:W,type:z,firstChar:B,lastChar:H,toUnicode:q,cssFontInfo:Z}){const te=z==="Type3";let Q;if(!I)if(te)I=new c.Dict(null),I.set("FontName",c.Name.get(z)),I.set("FontBBox",L.getArray("FontBBox")||[0,0,0,0]);else{let Se=L.get("BaseFont");if(!(Se instanceof c.Name))throw new t.FormatError("Base font is not specified");Se=Se.name.replace(/[,_]/g,"-");const Fe=this.getBaseFontMetrics(Se),Pe=Se.split("-")[0],ue=(this.isSerifFont(Pe)?e.FontFlags.Serif:0)|(Fe.monospace?e.FontFlags.FixedPitch:0)|((0,r.getSymbolsFonts)()[Pe]?e.FontFlags.Symbolic:e.FontFlags.Nonsymbolic);Q={type:z,name:Se,loadedName:$.loadedName,widths:Fe.widths,defaultWidth:Fe.defaultWidth,isSimulatedFlags:!0,flags:ue,firstChar:B,lastChar:H,toUnicode:q,xHeight:0,capHeight:0,italicAngle:0,isType3Font:te};const ye=L.get("Widths"),le=(0,r.getStandardFontName)(Se);let he=null;return le&&(Q.isStandardFont=!0,he=await this.fetchStandardFontData(le),Q.isInternalFont=!!he),this.extractDataStructures(L,L,Q).then(ce=>{if(ye){const Te=[];let Re=B;for(let He=0,Ce=ye.length;He<Ce;He++)Te[Re++]=this.xref.fetchIfRef(ye[He]);ce.widths=Te}else ce.widths=this.buildCharCodeToWidth(Fe.widths,ce);return new s.Font(Se,he,ce)})}let ee=I.get("FontName"),J=L.get("BaseFont");if(typeof ee=="string"&&(ee=c.Name.get(ee)),typeof J=="string"&&(J=c.Name.get(J)),!te){const Se=ee&&ee.name,Fe=J&&J.name;Se!==Fe&&((0,t.info)(`The FontDescriptor's FontName is "${Se}" but should be the same as the Font's BaseFont "${Fe}".`),Se&&Fe&&Fe.startsWith(Se)&&(ee=J))}if(ee=ee||J,!(ee instanceof c.Name))throw new t.FormatError("invalid font name");let ne,re,ae,se,oe;try{ne=I.get("FontFile","FontFile2","FontFile3")}catch(Se){if(!this.options.ignoreErrors)throw Se;(0,t.warn)(`translateFont - fetching "${ee.name}" font file: "${Se}".`),ne=new m.NullStream}let me=!1,xe=!1,Ae=null;if(ne){if(ne.dict){const Se=ne.dict.get("Subtype");Se instanceof c.Name&&(re=Se.name),ae=ne.dict.get("Length1"),se=ne.dict.get("Length2"),oe=ne.dict.get("Length3")}}else if(Z){const Se=(0,u.getXfaFontName)(ee.name);Se&&(Z.fontFamily=`${Z.fontFamily}-PdfJS-XFA`,Z.metrics=Se.metrics||null,Ae=Se.factors||null,ne=await this.fetchStandardFontData(Se.name),xe=!!ne,$=L=(0,u.getXfaFontDict)(ee.name),W=!0)}else if(!te){const Se=(0,r.getStandardFontName)(ee.name);Se&&(me=!0,ne=await this.fetchStandardFontData(Se),xe=!!ne)}if(Q={type:z,name:ee.name,subtype:re,file:ne,length1:ae,length2:se,length3:oe,isStandardFont:me,isInternalFont:xe,loadedName:$.loadedName,composite:W,fixedPitch:!1,fontMatrix:L.getArray("FontMatrix")||t.FONT_IDENTITY_MATRIX,firstChar:B,lastChar:H,toUnicode:q,bbox:I.getArray("FontBBox")||L.getArray("FontBBox"),ascent:I.get("Ascent"),descent:I.get("Descent"),xHeight:I.get("XHeight")||0,capHeight:I.get("CapHeight")||0,flags:I.get("Flags"),italicAngle:I.get("ItalicAngle")||0,isType3Font:te,cssFontInfo:Z,scaleFactors:Ae},W){const Se=$.get("Encoding");Se instanceof c.Name&&(Q.cidEncoding=Se.name);const Fe=await o.CMapFactory.create({encoding:Se,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});Q.cMap=Fe,Q.vertical=Q.cMap.vertical}return this.extractDataStructures(L,$,Q).then(Se=>(this.extractWidths(L,I,Se),new s.Font(ee.name,ne,Se)))}static buildFontPaths(I,L,$,W){function z(B){const H=`${I.loadedName}_path_${B}`;try{if(I.renderer.hasBuiltPath(B))return;$.send("commonobj",[H,"FontPath",I.renderer.getPathJs(B)])}catch(q){if(W.ignoreErrors){$.send("UnsupportedFeature",{featureId:t.UNSUPPORTED_FEATURES.errorFontBuildPath}),(0,t.warn)(`buildFontPaths - ignoring ${H} glyph: "${q}".`);return}throw q}}for(const B of L){z(B.fontChar);const H=B.accent;H&&H.fontChar&&z(H.fontChar)}}static get fallbackFontDict(){const I=new c.Dict;return I.set("BaseFont",c.Name.get("PDFJS-FallbackFont")),I.set("Type",c.Name.get("FallbackType")),I.set("Subtype",c.Name.get("FallbackType")),I.set("Encoding",c.Name.get("WinAnsiEncoding")),(0,t.shadow)(this,"fallbackFontDict",I)}}f.PartialEvaluator=b;class D{constructor({loadedName:I,font:L,dict:$,evaluatorOptions:W}){this.loadedName=I,this.font=L,this.dict=$,this._evaluatorOptions=W||y,this.type3Loaded=null,this.type3Dependencies=L.isType3Font?new Set:null,this.sent=!1}send(I){this.sent||(this.sent=!0,I.send("commonobj",[this.loadedName,"Font",this.font.exportData(this._evaluatorOptions.fontExtraProperties)]))}fallback(I){this.font.data&&(this.font.disableFontFace=!0,b.buildFontPaths(this.font,this.font.glyphCacheValues,I,this._evaluatorOptions))}loadType3Data(I,L,$){if(this.type3Loaded)return this.type3Loaded;if(!this.font.isType3Font)throw new Error("Must be a Type3 font.");const W=I.clone({ignoreErrors:!1});W.parsingType3Font=!0;const z=new c.RefSet(I.type3FontRefs);this.dict.objId&&!z.has(this.dict.objId)&&z.put(this.dict.objId),W.type3FontRefs=z;const B=this.font,H=this.type3Dependencies;let q=Promise.resolve();const Z=this.dict.get("CharProcs"),te=this.dict.get("Resources")||L,Q=Object.create(null),ee=t.Util.normalizeRect(B.bbox||[0,0,0,0]),J=ee[2]-ee[0],ne=ee[3]-ee[1],re=Math.hypot(J,ne);for(const ae of Z.getKeys())q=q.then(()=>{const se=Z.get(ae),oe=new T.OperatorList;return W.getOperatorList({stream:se,task:$,resources:te,operatorList:oe}).then(()=>{oe.fnArray[0]===t.OPS.setCharWidthAndBounds&&this._removeType3ColorOperators(oe,re),Q[ae]=oe.getIR();for(const me of oe.dependencies)H.add(me)}).catch(function(me){(0,t.warn)(`Type3 font resource "${ae}" is not available.`);const xe=new T.OperatorList;Q[ae]=xe.getIR()})});return this.type3Loaded=q.then(()=>{B.charProcOperatorList=Q,this._bbox&&(B.isCharBBox=!0,B.bbox=this._bbox)}),this.type3Loaded}_removeType3ColorOperators(I,L=NaN){const $=t.Util.normalizeRect(I.argsArray[0].slice(2)),W=$[2]-$[0],z=$[3]-$[1],B=Math.hypot(W,z);W===0||z===0?(I.fnArray.splice(0,1),I.argsArray.splice(0,1)):(L===0||Math.round(B/L)>=10)&&(this._bbox||(this._bbox=[1/0,1/0,-1/0,-1/0]),this._bbox[0]=Math.min(this._bbox[0],$[0]),this._bbox[1]=Math.min(this._bbox[1],$[1]),this._bbox[2]=Math.max(this._bbox[2],$[2]),this._bbox[3]=Math.max(this._bbox[3],$[3]));let H=0,q=I.length;for(;H<q;){switch(I.fnArray[H]){case t.OPS.setCharWidthAndBounds:break;case t.OPS.setStrokeColorSpace:case t.OPS.setFillColorSpace:case t.OPS.setStrokeColor:case t.OPS.setStrokeColorN:case t.OPS.setFillColor:case t.OPS.setFillColorN:case t.OPS.setStrokeGray:case t.OPS.setFillGray:case t.OPS.setStrokeRGBColor:case t.OPS.setFillRGBColor:case t.OPS.setStrokeCMYKColor:case t.OPS.setFillCMYKColor:case t.OPS.shadingFill:case t.OPS.setRenderingIntent:I.fnArray.splice(H,1),I.argsArray.splice(H,1),q--;continue;case t.OPS.setGState:const[Z]=I.argsArray[H];let te=0,Q=Z.length;for(;te<Q;){const[ee]=Z[te];switch(ee){case"TR":case"TR2":case"HT":case"BG":case"BG2":case"UCR":case"UCR2":Z.splice(te,1),Q--;continue}te++}break}H++}}}class U{constructor(I=new G){this.state=I,this.stateStack=[]}save(){const I=this.state;this.stateStack.push(this.state),this.state=I.clone()}restore(){const I=this.stateStack.pop();I&&(this.state=I)}transform(I){this.state.ctm=t.Util.transform(this.state.ctm,I)}}class X{constructor(){this.ctm=new Float32Array(t.IDENTITY_MATRIX),this.fontName=null,this.fontSize=0,this.font=null,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.textMatrix=t.IDENTITY_MATRIX.slice(),this.textLineMatrix=t.IDENTITY_MATRIX.slice(),this.charSpacing=0,this.wordSpacing=0,this.leading=0,this.textHScale=1,this.textRise=0}setTextMatrix(I,L,$,W,z,B){const H=this.textMatrix;H[0]=I,H[1]=L,H[2]=$,H[3]=W,H[4]=z,H[5]=B}setTextLineMatrix(I,L,$,W,z,B){const H=this.textLineMatrix;H[0]=I,H[1]=L,H[2]=$,H[3]=W,H[4]=z,H[5]=B}translateTextMatrix(I,L){const $=this.textMatrix;$[4]=$[0]*I+$[2]*L+$[4],$[5]=$[1]*I+$[3]*L+$[5]}translateTextLineMatrix(I,L){const $=this.textLineMatrix;$[4]=$[0]*I+$[2]*L+$[4],$[5]=$[1]*I+$[3]*L+$[5]}carriageReturn(){this.translateTextLineMatrix(0,-this.leading),this.textMatrix=this.textLineMatrix.slice()}clone(){const I=Object.create(this);return I.textMatrix=this.textMatrix.slice(),I.textLineMatrix=this.textLineMatrix.slice(),I.fontMatrix=this.fontMatrix.slice(),I}}class G{constructor(){this.ctm=new Float32Array(t.IDENTITY_MATRIX),this.font=null,this.textRenderingMode=t.TextRenderingMode.FILL,this.fillColorSpace=v.ColorSpace.singletons.gray,this.strokeColorSpace=v.ColorSpace.singletons.gray}clone(){return Object.create(this)}}class Y{static get opMap(){const I=(0,M.getLookupTableFactory)(function(L){L.w={id:t.OPS.setLineWidth,numArgs:1,variableArgs:!1},L.J={id:t.OPS.setLineCap,numArgs:1,variableArgs:!1},L.j={id:t.OPS.setLineJoin,numArgs:1,variableArgs:!1},L.M={id:t.OPS.setMiterLimit,numArgs:1,variableArgs:!1},L.d={id:t.OPS.setDash,numArgs:2,variableArgs:!1},L.ri={id:t.OPS.setRenderingIntent,numArgs:1,variableArgs:!1},L.i={id:t.OPS.setFlatness,numArgs:1,variableArgs:!1},L.gs={id:t.OPS.setGState,numArgs:1,variableArgs:!1},L.q={id:t.OPS.save,numArgs:0,variableArgs:!1},L.Q={id:t.OPS.restore,numArgs:0,variableArgs:!1},L.cm={id:t.OPS.transform,numArgs:6,variableArgs:!1},L.m={id:t.OPS.moveTo,numArgs:2,variableArgs:!1},L.l={id:t.OPS.lineTo,numArgs:2,variableArgs:!1},L.c={id:t.OPS.curveTo,numArgs:6,variableArgs:!1},L.v={id:t.OPS.curveTo2,numArgs:4,variableArgs:!1},L.y={id:t.OPS.curveTo3,numArgs:4,variableArgs:!1},L.h={id:t.OPS.closePath,numArgs:0,variableArgs:!1},L.re={id:t.OPS.rectangle,numArgs:4,variableArgs:!1},L.S={id:t.OPS.stroke,numArgs:0,variableArgs:!1},L.s={id:t.OPS.closeStroke,numArgs:0,variableArgs:!1},L.f={id:t.OPS.fill,numArgs:0,variableArgs:!1},L.F={id:t.OPS.fill,numArgs:0,variableArgs:!1},L["f*"]={id:t.OPS.eoFill,numArgs:0,variableArgs:!1},L.B={id:t.OPS.fillStroke,numArgs:0,variableArgs:!1},L["B*"]={id:t.OPS.eoFillStroke,numArgs:0,variableArgs:!1},L.b={id:t.OPS.closeFillStroke,numArgs:0,variableArgs:!1},L["b*"]={id:t.OPS.closeEOFillStroke,numArgs:0,variableArgs:!1},L.n={id:t.OPS.endPath,numArgs:0,variableArgs:!1},L.W={id:t.OPS.clip,numArgs:0,variableArgs:!1},L["W*"]={id:t.OPS.eoClip,numArgs:0,variableArgs:!1},L.BT={id:t.OPS.beginText,numArgs:0,variableArgs:!1},L.ET={id:t.OPS.endText,numArgs:0,variableArgs:!1},L.Tc={id:t.OPS.setCharSpacing,numArgs:1,variableArgs:!1},L.Tw={id:t.OPS.setWordSpacing,numArgs:1,variableArgs:!1},L.Tz={id:t.OPS.setHScale,numArgs:1,variableArgs:!1},L.TL={id:t.OPS.setLeading,numArgs:1,variableArgs:!1},L.Tf={id:t.OPS.setFont,numArgs:2,variableArgs:!1},L.Tr={id:t.OPS.setTextRenderingMode,numArgs:1,variableArgs:!1},L.Ts={id:t.OPS.setTextRise,numArgs:1,variableArgs:!1},L.Td={id:t.OPS.moveText,numArgs:2,variableArgs:!1},L.TD={id:t.OPS.setLeadingMoveText,numArgs:2,variableArgs:!1},L.Tm={id:t.OPS.setTextMatrix,numArgs:6,variableArgs:!1},L["T*"]={id:t.OPS.nextLine,numArgs:0,variableArgs:!1},L.Tj={id:t.OPS.showText,numArgs:1,variableArgs:!1},L.TJ={id:t.OPS.showSpacedText,numArgs:1,variableArgs:!1},L["'"]={id:t.OPS.nextLineShowText,numArgs:1,variableArgs:!1},L['"']={id:t.OPS.nextLineSetSpacingShowText,numArgs:3,variableArgs:!1},L.d0={id:t.OPS.setCharWidth,numArgs:2,variableArgs:!1},L.d1={id:t.OPS.setCharWidthAndBounds,numArgs:6,variableArgs:!1},L.CS={id:t.OPS.setStrokeColorSpace,numArgs:1,variableArgs:!1},L.cs={id:t.OPS.setFillColorSpace,numArgs:1,variableArgs:!1},L.SC={id:t.OPS.setStrokeColor,numArgs:4,variableArgs:!0},L.SCN={id:t.OPS.setStrokeColorN,numArgs:33,variableArgs:!0},L.sc={id:t.OPS.setFillColor,numArgs:4,variableArgs:!0},L.scn={id:t.OPS.setFillColorN,numArgs:33,variableArgs:!0},L.G={id:t.OPS.setStrokeGray,numArgs:1,variableArgs:!1},L.g={id:t.OPS.setFillGray,numArgs:1,variableArgs:!1},L.RG={id:t.OPS.setStrokeRGBColor,numArgs:3,variableArgs:!1},L.rg={id:t.OPS.setFillRGBColor,numArgs:3,variableArgs:!1},L.K={id:t.OPS.setStrokeCMYKColor,numArgs:4,variableArgs:!1},L.k={id:t.OPS.setFillCMYKColor,numArgs:4,variableArgs:!1},L.sh={id:t.OPS.shadingFill,numArgs:1,variableArgs:!1},L.BI={id:t.OPS.beginInlineImage,numArgs:0,variableArgs:!1},L.ID={id:t.OPS.beginImageData,numArgs:0,variableArgs:!1},L.EI={id:t.OPS.endInlineImage,numArgs:1,variableArgs:!1},L.Do={id:t.OPS.paintXObject,numArgs:1,variableArgs:!1},L.MP={id:t.OPS.markPoint,numArgs:1,variableArgs:!1},L.DP={id:t.OPS.markPointProps,numArgs:2,variableArgs:!1},L.BMC={id:t.OPS.beginMarkedContent,numArgs:1,variableArgs:!1},L.BDC={id:t.OPS.beginMarkedContentProps,numArgs:2,variableArgs:!1},L.EMC={id:t.OPS.endMarkedContent,numArgs:0,variableArgs:!1},L.BX={id:t.OPS.beginCompat,numArgs:0,variableArgs:!1},L.EX={id:t.OPS.endCompat,numArgs:0,variableArgs:!1},L.BM=null,L.BD=null,L.true=null,L.fa=null,L.fal=null,L.fals=null,L.false=null,L.nu=null,L.nul=null,L.null=null});return(0,t.shadow)(this,"opMap",I())}static get MAX_INVALID_PATH_OPS(){return(0,t.shadow)(this,"MAX_INVALID_PATH_OPS",10)}constructor(I,L,$=new U){this.parser=new g.Parser({lexer:new g.Lexer(I,Y.opMap),xref:L}),this.stateManager=$,this.nonProcessedArgs=[],this._isPathOp=!1,this._numInvalidPathOPS=0}get savedStatesDepth(){return this.stateManager.stateStack.length}read(I){let L=I.args;for(;;){const $=this.parser.getObj();if($ instanceof c.Cmd){const W=$.cmd,z=Y.opMap[W];if(!z){(0,t.warn)(`Unknown command "${W}".`);continue}const B=z.id,H=z.numArgs;let q=L!==null?L.length:0;if(this._isPathOp||(this._numInvalidPathOPS=0),this._isPathOp=B>=t.OPS.moveTo&&B<=t.OPS.endPath,z.variableArgs)q>H&&(0,t.info)(`Command ${W}: expected [0, ${H}] args, but received ${q} args.`);else{if(q!==H){const Z=this.nonProcessedArgs;for(;q>H;)Z.push(L.shift()),q--;for(;q<H&&Z.length!==0;)L===null&&(L=[]),L.unshift(Z.pop()),q++}if(q<H){const Z=`command ${W}: expected ${H} args, but received ${q} args.`;if(this._isPathOp&&++this._numInvalidPathOPS>Y.MAX_INVALID_PATH_OPS)throw new t.FormatError(`Invalid ${Z}`);(0,t.warn)(`Skipping ${Z}`),L!==null&&(L.length=0);continue}}return this.preprocessCommand(B,L),I.fn=B,I.args=L,!0}if($===c.EOF)return!1;if($!==null&&(L===null&&(L=[]),L.push($),L.length>33))throw new t.FormatError("Too many arguments")}}preprocessCommand(I,L){switch(I|0){case t.OPS.save:this.stateManager.save();break;case t.OPS.restore:this.stateManager.restore();break;case t.OPS.transform:this.stateManager.transform(L);break}}}f.EvaluatorPreprocessor=Y},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.IdentityCMap=f.CMapFactory=f.CMap=void 0;var t=h(2),o=h(5),c=h(7),s=h(17),e=h(6),a=h(10);const r=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"],n=2**24-1;class l{constructor(x=!1){this.codespaceRanges=[[],[],[],[]],this.numCodespaceRanges=0,this._map=[],this.name="",this.vertical=!1,this.useCMap=null,this.builtInCMap=x}addCodespaceRange(x,m,A){this.codespaceRanges[x-1].push(m,A),this.numCodespaceRanges++}mapCidRange(x,m,A){if(m-x>n)throw new Error("mapCidRange - ignoring data above MAX_MAP_RANGE.");for(;x<=m;)this._map[x++]=A++}mapBfRange(x,m,A){if(m-x>n)throw new Error("mapBfRange - ignoring data above MAX_MAP_RANGE.");const k=A.length-1;for(;x<=m;){this._map[x++]=A;const v=A.charCodeAt(k)+1;if(v>255){A=A.substring(0,k-1)+String.fromCharCode(A.charCodeAt(k-1)+1)+"\0";continue}A=A.substring(0,k)+String.fromCharCode(v)}}mapBfRangeToArray(x,m,A){if(m-x>n)throw new Error("mapBfRangeToArray - ignoring data above MAX_MAP_RANGE.");const k=A.length;let v=0;for(;x<=m&&v<k;)this._map[x]=A[v++],++x}mapOne(x,m){this._map[x]=m}lookup(x){return this._map[x]}contains(x){return this._map[x]!==void 0}forEach(x){const m=this._map,A=m.length;if(A<=65536)for(let k=0;k<A;k++)m[k]!==void 0&&x(k,m[k]);else for(const k in m)x(k,m[k])}charCodeOf(x){const m=this._map;if(m.length<=65536)return m.indexOf(x);for(const A in m)if(m[A]===x)return A|0;return-1}getMap(){return this._map}readCharCode(x,m,A){let k=0;const v=this.codespaceRanges;for(let _=0,K=v.length;_<K;_++){k=(k<<8|x.charCodeAt(m+_))>>>0;const M=v[_];for(let j=0,O=M.length;j<O;){const T=M[j++],R=M[j++];if(k>=T&&k<=R){A.charcode=k,A.length=_+1;return}}}A.charcode=0,A.length=1}getCharCodeLength(x){const m=this.codespaceRanges;for(let A=0,k=m.length;A<k;A++){const v=m[A];for(let _=0,K=v.length;_<K;){const M=v[_++],j=v[_++];if(x>=M&&x<=j)return A+1}}return 1}get length(){return this._map.length}get isIdentityCMap(){if(!(this.name==="Identity-H"||this.name==="Identity-V")||this._map.length!==65536)return!1;for(let x=0;x<65536;x++)if(this._map[x]!==x)return!1;return!0}}f.CMap=l;class u extends l{constructor(x,m){super(),this.vertical=x,this.addCodespaceRange(m,0,65535)}mapCidRange(x,m,A){(0,t.unreachable)("should not call mapCidRange")}mapBfRange(x,m,A){(0,t.unreachable)("should not call mapBfRange")}mapBfRangeToArray(x,m,A){(0,t.unreachable)("should not call mapBfRangeToArray")}mapOne(x,m){(0,t.unreachable)("should not call mapCidOne")}lookup(x){return Number.isInteger(x)&&x<=65535?x:void 0}contains(x){return Number.isInteger(x)&&x<=65535}forEach(x){for(let m=0;m<=65535;m++)x(m,m)}charCodeOf(x){return Number.isInteger(x)&&x<=65535?x:-1}getMap(){const x=new Array(65536);for(let m=0;m<=65535;m++)x[m]=m;return x}get length(){return 65536}get isIdentityCMap(){(0,t.unreachable)("should not access .isIdentityCMap")}}f.IdentityCMap=u;const d=function(){function x(j,O){let T=0;for(let R=0;R<=O;R++)T=T<<8|j[R];return T>>>0}function m(j,O){return O===1?String.fromCharCode(j[0],j[1]):O===3?String.fromCharCode(j[0],j[1],j[2],j[3]):String.fromCharCode.apply(null,j.subarray(0,O+1))}function A(j,O,T){let R=0;for(let y=T;y>=0;y--)R+=j[y]+O[y],j[y]=R&255,R>>=8}function k(j,O){let T=1;for(let R=O;R>=0&&T>0;R--)T+=j[R],j[R]=T&255,T>>=8}const v=16,_=19;class K{constructor(O){this.buffer=O,this.pos=0,this.end=O.length,this.tmpBuf=new Uint8Array(_)}readByte(){return this.pos>=this.end?-1:this.buffer[this.pos++]}readNumber(){let O=0,T;do{const R=this.readByte();if(R<0)throw new t.FormatError("unexpected EOF in bcmap");T=!(R&128),O=O<<7|R&127}while(!T);return O}readSigned(){const O=this.readNumber();return O&1?~(O>>>1):O>>>1}readHex(O,T){O.set(this.buffer.subarray(this.pos,this.pos+T+1)),this.pos+=T+1}readHexNumber(O,T){let R;const y=this.tmpBuf;let p=0;do{const F=this.readByte();if(F<0)throw new t.FormatError("unexpected EOF in bcmap");R=!(F&128),y[p++]=F&127}while(!R);let P=T,E=0,S=0;for(;P>=0;){for(;S<8&&y.length>0;)E|=y[--p]<<S,S+=7;O[P]=E&255,P--,E>>=8,S-=8}}readHexSigned(O,T){this.readHexNumber(O,T);const R=O[T]&1?255:0;let y=0;for(let p=0;p<=T;p++)y=(y&1)<<8|O[p],O[p]=y>>1^R}readString(){const O=this.readNumber();let T="";for(let R=0;R<O;R++)T+=String.fromCharCode(this.readNumber());return T}}class M{async process(O,T,R){const y=new K(O),p=y.readByte();T.vertical=!!(p&1);let P=null;const E=new Uint8Array(v),S=new Uint8Array(v),F=new Uint8Array(v),C=new Uint8Array(v),b=new Uint8Array(v);let D,U;for(;(U=y.readByte())>=0;){const X=U>>5;if(X===7){switch(U&31){case 0:y.readString();break;case 1:P=y.readString();break}continue}const G=!!(U&16),Y=U&15;if(Y+1>v)throw new Error("BinaryCMapReader.process: Invalid dataSize.");const N=1,I=y.readNumber();switch(X){case 0:y.readHex(E,Y),y.readHexNumber(S,Y),A(S,E,Y),T.addCodespaceRange(Y+1,x(E,Y),x(S,Y));for(let L=1;L<I;L++)k(S,Y),y.readHexNumber(E,Y),A(E,S,Y),y.readHexNumber(S,Y),A(S,E,Y),T.addCodespaceRange(Y+1,x(E,Y),x(S,Y));break;case 1:y.readHex(E,Y),y.readHexNumber(S,Y),A(S,E,Y),y.readNumber();for(let L=1;L<I;L++)k(S,Y),y.readHexNumber(E,Y),A(E,S,Y),y.readHexNumber(S,Y),A(S,E,Y),y.readNumber();break;case 2:y.readHex(F,Y),D=y.readNumber(),T.mapOne(x(F,Y),D);for(let L=1;L<I;L++)k(F,Y),G||(y.readHexNumber(b,Y),A(F,b,Y)),D=y.readSigned()+(D+1),T.mapOne(x(F,Y),D);break;case 3:y.readHex(E,Y),y.readHexNumber(S,Y),A(S,E,Y),D=y.readNumber(),T.mapCidRange(x(E,Y),x(S,Y),D);for(let L=1;L<I;L++)k(S,Y),G?E.set(S):(y.readHexNumber(E,Y),A(E,S,Y)),y.readHexNumber(S,Y),A(S,E,Y),D=y.readNumber(),T.mapCidRange(x(E,Y),x(S,Y),D);break;case 4:y.readHex(F,N),y.readHex(C,Y),T.mapOne(x(F,N),m(C,Y));for(let L=1;L<I;L++)k(F,N),G||(y.readHexNumber(b,N),A(F,b,N)),k(C,Y),y.readHexSigned(b,Y),A(C,b,Y),T.mapOne(x(F,N),m(C,Y));break;case 5:y.readHex(E,N),y.readHexNumber(S,N),A(S,E,N),y.readHex(C,Y),T.mapBfRange(x(E,N),x(S,N),m(C,Y));for(let L=1;L<I;L++)k(S,N),G?E.set(S):(y.readHexNumber(E,N),A(E,S,N)),y.readHexNumber(S,N),A(S,E,N),y.readHex(C,Y),T.mapBfRange(x(E,N),x(S,N),m(C,Y));break;default:throw new Error(`BinaryCMapReader.process - unknown type: ${X}`)}}return P?R(P):T}}return M}(),i=function(){function x(p){let P=0;for(let E=0;E<p.length;E++)P=P<<8|p.charCodeAt(E);return P>>>0}function m(p){if(typeof p!="string")throw new t.FormatError("Malformed CMap: expected string.")}function A(p){if(!Number.isInteger(p))throw new t.FormatError("Malformed CMap: expected int.")}function k(p,P){for(;;){let E=P.getObj();if(E===o.EOF)break;if((0,o.isCmd)(E,"endbfchar"))return;m(E);const S=x(E);E=P.getObj(),m(E);const F=E;p.mapOne(S,F)}}function v(p,P){for(;;){let E=P.getObj();if(E===o.EOF)break;if((0,o.isCmd)(E,"endbfrange"))return;m(E);const S=x(E);E=P.getObj(),m(E);const F=x(E);if(E=P.getObj(),Number.isInteger(E)||typeof E=="string"){const C=Number.isInteger(E)?String.fromCharCode(E):E;p.mapBfRange(S,F,C)}else if((0,o.isCmd)(E,"[")){E=P.getObj();const C=[];for(;!(0,o.isCmd)(E,"]")&&E!==o.EOF;)C.push(E),E=P.getObj();p.mapBfRangeToArray(S,F,C)}else break}throw new t.FormatError("Invalid bf range.")}function _(p,P){for(;;){let E=P.getObj();if(E===o.EOF)break;if((0,o.isCmd)(E,"endcidchar"))return;m(E);const S=x(E);E=P.getObj(),A(E);const F=E;p.mapOne(S,F)}}function K(p,P){for(;;){let E=P.getObj();if(E===o.EOF)break;if((0,o.isCmd)(E,"endcidrange"))return;m(E);const S=x(E);E=P.getObj(),m(E);const F=x(E);E=P.getObj(),A(E);const C=E;p.mapCidRange(S,F,C)}}function M(p,P){for(;;){let E=P.getObj();if(E===o.EOF)break;if((0,o.isCmd)(E,"endcodespacerange"))return;if(typeof E!="string")break;const S=x(E);if(E=P.getObj(),typeof E!="string")break;const F=x(E);p.addCodespaceRange(E.length,S,F)}throw new t.FormatError("Invalid codespace range.")}function j(p,P){const E=P.getObj();Number.isInteger(E)&&(p.vertical=!!E)}function O(p,P){const E=P.getObj();E instanceof o.Name&&(p.name=E.name)}async function T(p,P,E,S){let F,C;e:for(;;)try{const b=P.getObj();if(b===o.EOF)break;if(b instanceof o.Name)b.name==="WMode"?j(p,P):b.name==="CMapName"&&O(p,P),F=b;else if(b instanceof o.Cmd)switch(b.cmd){case"endcmap":break e;case"usecmap":F instanceof o.Name&&(C=F.name);break;case"begincodespacerange":M(p,P);break;case"beginbfchar":k(p,P);break;case"begincidchar":_(p,P);break;case"beginbfrange":v(p,P);break;case"begincidrange":K(p,P);break}}catch(b){if(b instanceof e.MissingDataException)throw b;(0,t.warn)("Invalid cMap data: "+b);continue}return!S&&C&&(S=C),S?R(p,E,S):p}async function R(p,P,E){if(p.useCMap=await y(E,P),p.numCodespaceRanges===0){const S=p.useCMap.codespaceRanges;for(let F=0;F<S.length;F++)p.codespaceRanges[F]=S[F].slice();p.numCodespaceRanges=p.useCMap.numCodespaceRanges}return p.useCMap.forEach(function(S,F){p.contains(S)||p.mapOne(S,p.useCMap.lookup(S))}),p}async function y(p,P){if(p==="Identity-H")return new u(!1,2);if(p==="Identity-V")return new u(!0,2);if(!r.includes(p))throw new Error("Unknown CMap name: "+p);if(!P)throw new Error("Built-in CMap parameters are not provided.");const{cMapData:E,compressionType:S}=await P(p),F=new l(!0);if(S===t.CMapCompressionType.BINARY)return new d().process(E,F,C=>R(F,P,C));if(S===t.CMapCompressionType.NONE){const C=new s.Lexer(new a.Stream(E));return T(F,C,P,null)}throw new Error("TODO: Only BINARY/NONE CMap compression is currently supported.")}return{async create(p){const P=p.encoding,E=p.fetchBuiltInCMap,S=p.useCMap;if(P instanceof o.Name)return y(P.name,E);if(P instanceof c.BaseStream){const F=await T(new l,new s.Lexer(P),E,S);return F.isIdentityCMap?y(F.name,E):F}throw new Error("Encoding required.")}}}();f.CMapFactory=i},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Parser=f.Linearization=f.Lexer=void 0;var t=h(2),o=h(5),c=h(6),s=h(18),e=h(20),a=h(21),r=h(23),n=h(24),l=h(27),u=h(29),d=h(31),i=h(10),g=h(32),x=h(33);const m=1e3,A=5552;function k(O){const T=O.length;let R=1,y=0;for(let p=0;p<T;++p)R+=O[p]&255,y+=R;return y%65521<<16|R%65521}class v{constructor({lexer:T,xref:R,allowStreams:y=!1,recoveryMode:p=!1}){this.lexer=T,this.xref=R,this.allowStreams=y,this.recoveryMode=p,this.imageCache=Object.create(null),this.refill()}refill(){this.buf1=this.lexer.getObj(),this.buf2=this.lexer.getObj()}shift(){this.buf2 instanceof o.Cmd&&this.buf2.cmd==="ID"?(this.buf1=this.buf2,this.buf2=null):(this.buf1=this.buf2,this.buf2=this.lexer.getObj())}tryShift(){try{return this.shift(),!0}catch(T){if(T instanceof c.MissingDataException)throw T;return!1}}getObj(T=null){const R=this.buf1;if(this.shift(),R instanceof o.Cmd)switch(R.cmd){case"BI":return this.makeInlineImage(T);case"[":const y=[];for(;!(0,o.isCmd)(this.buf1,"]")&&this.buf1!==o.EOF;)y.push(this.getObj(T));if(this.buf1===o.EOF){if(this.recoveryMode)return y;throw new c.ParserEOFException("End of file inside array.")}return this.shift(),y;case"<<":const p=new o.Dict(this.xref);for(;!(0,o.isCmd)(this.buf1,">>")&&this.buf1!==o.EOF;){if(!(this.buf1 instanceof o.Name)){(0,t.info)("Malformed dictionary: key must be a name object"),this.shift();continue}const P=this.buf1.name;if(this.shift(),this.buf1===o.EOF)break;p.set(P,this.getObj(T))}if(this.buf1===o.EOF){if(this.recoveryMode)return p;throw new c.ParserEOFException("End of file inside dictionary.")}return(0,o.isCmd)(this.buf2,"stream")?this.allowStreams?this.makeStream(p,T):p:(this.shift(),p);default:return R}if(Number.isInteger(R)){if(Number.isInteger(this.buf1)&&(0,o.isCmd)(this.buf2,"R")){const y=o.Ref.get(R,this.buf1);return this.shift(),this.shift(),y}return R}return typeof R=="string"&&T?T.decryptString(R):R}findDefaultInlineStreamEnd(T){const F=this.lexer,C=T.pos,b=10;let D=0,U,X;for(;(U=T.getByte())!==-1;)if(D===0)D=U===69?1:0;else if(D===1)D=U===73?2:0;else if((0,t.assert)(D===2,"findDefaultInlineStreamEnd - invalid state."),U===32||U===10||U===13){X=T.pos;const Y=T.peekBytes(b);for(let N=0,I=Y.length;N<I;N++)if(U=Y[N],!(U===0&&Y[N+1]!==0)&&U!==10&&U!==13&&(U<32||U>127)){D=0;break}if(D!==2)continue;if(F.knownCommands){const N=F.peekObj();N instanceof o.Cmd&&!F.knownCommands[N.cmd]&&(D=0)}else(0,t.warn)("findDefaultInlineStreamEnd - `lexer.knownCommands` is undefined.");if(D===2)break}else D=0;U===-1&&((0,t.warn)("findDefaultInlineStreamEnd: Reached the end of the stream without finding a valid EI marker"),X&&((0,t.warn)('... trying to recover by using the last "EI" occurrence.'),T.skip(-(T.pos-X))));let G=4;return T.skip(-G),U=T.peekByte(),T.skip(G),(0,c.isWhiteSpace)(U)||G--,T.pos-G-C}findDCTDecodeInlineStreamEnd(T){const R=T.pos;let y=!1,p,P;for(;(p=T.getByte())!==-1;)if(p===255){switch(T.getByte()){case 0:break;case 255:T.skip(-1);break;case 217:y=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:P=T.getUint16(),P>2?T.skip(P-2):T.skip(-2);break}if(y)break}const E=T.pos-R;return p===-1?((0,t.warn)("Inline DCTDecode image stream: EOI marker not found, searching for /EI/ instead."),T.skip(-E),this.findDefaultInlineStreamEnd(T)):(this.inlineStreamSkipEI(T),E)}findASCII85DecodeInlineStreamEnd(T){const p=T.pos;let P;for(;(P=T.getByte())!==-1;)if(P===126){const S=T.pos;for(P=T.peekByte();(0,c.isWhiteSpace)(P);)T.skip(),P=T.peekByte();if(P===62){T.skip();break}if(T.pos>S){const F=T.peekBytes(2);if(F[0]===69&&F[1]===73)break}}const E=T.pos-p;return P===-1?((0,t.warn)("Inline ASCII85Decode image stream: EOD marker not found, searching for /EI/ instead."),T.skip(-E),this.findDefaultInlineStreamEnd(T)):(this.inlineStreamSkipEI(T),E)}findASCIIHexDecodeInlineStreamEnd(T){const y=T.pos;let p;for(;(p=T.getByte())!==-1&&p!==62;);const P=T.pos-y;return p===-1?((0,t.warn)("Inline ASCIIHexDecode image stream: EOD marker not found, searching for /EI/ instead."),T.skip(-P),this.findDefaultInlineStreamEnd(T)):(this.inlineStreamSkipEI(T),P)}inlineStreamSkipEI(T){let p=0,P;for(;(P=T.getByte())!==-1;)if(p===0)p=P===69?1:0;else if(p===1)p=P===73?2:0;else if(p===2)break}makeInlineImage(T){const R=this.lexer,y=R.stream,p=new o.Dict(this.xref);let P;for(;!(0,o.isCmd)(this.buf1,"ID")&&this.buf1!==o.EOF;){if(!(this.buf1 instanceof o.Name))throw new t.FormatError("Dictionary key must be a name object");const U=this.buf1.name;if(this.shift(),this.buf1===o.EOF)break;p.set(U,this.getObj(T))}R.beginInlineImagePos!==-1&&(P=y.pos-R.beginInlineImagePos);const E=p.get("F","Filter");let S;if(E instanceof o.Name)S=E.name;else if(Array.isArray(E)){const U=this.xref.fetchIfRef(E[0]);U instanceof o.Name&&(S=U.name)}const F=y.pos;let C;switch(S){case"DCT":case"DCTDecode":C=this.findDCTDecodeInlineStreamEnd(y);break;case"A85":case"ASCII85Decode":C=this.findASCII85DecodeInlineStreamEnd(y);break;case"AHx":case"ASCIIHexDecode":C=this.findASCIIHexDecodeInlineStreamEnd(y);break;default:C=this.findDefaultInlineStreamEnd(y)}let b=y.makeSubStream(F,C,p),D;if(C<m&&P<A){const U=b.getBytes();b.reset();const X=y.pos;y.pos=R.beginInlineImagePos;const G=y.getBytes(P);y.pos=X,D=k(U)+"_"+k(G);const Y=this.imageCache[D];if(Y!==void 0)return this.buf2=o.Cmd.get("EI"),this.shift(),Y.reset(),Y}return T&&(b=T.createStream(b,C)),b=this.filter(b,p,C),b.dict=p,D!==void 0&&(b.cacheKey=`inline_${C}_${D}`,this.imageCache[D]=b),this.buf2=o.Cmd.get("EI"),this.shift(),b}_findStreamLength(T,R){const{stream:y}=this.lexer;y.pos=T;const p=2048,P=R.length;for(;y.pos<y.end;){const E=y.peekBytes(p),S=E.length-P;if(S<=0)break;let F=0;for(;F<S;){let C=0;for(;C<P&&E[F+C]===R[C];)C++;if(C>=P)return y.pos+=F,y.pos-T;F++}y.pos+=S}return-1}makeStream(T,R){const y=this.lexer;let p=y.stream;y.skipToNextLine();const P=p.pos-1;let E=T.get("Length");if(Number.isInteger(E)||((0,t.info)(`Bad length "${E&&E.toString()}" in stream.`),E=0),p.pos=P+E,y.nextChar(),this.tryShift()&&(0,o.isCmd)(this.buf2,"endstream"))this.shift();else{const S=new Uint8Array([101,110,100,115,116,114,101,97,109]);let F=this._findStreamLength(P,S);if(F<0){for(let b=1;b<=1;b++){const D=S.length-b,U=S.slice(0,D),X=this._findStreamLength(P,U);if(X>=0){const G=p.peekBytes(D+1)[D];if(!(0,c.isWhiteSpace)(G))break;(0,t.info)(`Found "${(0,t.bytesToString)(U)}" when searching for endstream command.`),F=X;break}}if(F<0)throw new t.FormatError("Missing endstream command.")}E=F,y.nextChar(),this.shift(),this.shift()}return this.shift(),p=p.makeSubStream(P,E,T),R&&(p=R.createStream(p,E)),p=this.filter(p,T,E),p.dict=T,p}filter(T,R,y){let p=R.get("F","Filter"),P=R.get("DP","DecodeParms");if(p instanceof o.Name)return Array.isArray(P)&&(0,t.warn)("/DecodeParms should not be an Array, when /Filter is a Name."),this.makeFilter(T,p.name,y,P);let E=y;if(Array.isArray(p)){const S=p,F=P;for(let C=0,b=S.length;C<b;++C){if(p=this.xref.fetchIfRef(S[C]),!(p instanceof o.Name))throw new t.FormatError(`Bad filter name "${p}"`);P=null,Array.isArray(F)&&C in F&&(P=this.xref.fetchIfRef(F[C])),T=this.makeFilter(T,p.name,E,P),E=null}}return T}makeFilter(T,R,y,p){if(y===0)return(0,t.warn)(`Empty "${R}" stream.`),new i.NullStream;const P=this.xref.stats;try{switch(R){case"Fl":case"FlateDecode":return P.addStreamType(t.StreamType.FLATE),p?new g.PredictorStream(new r.FlateStream(T,y),y,p):new r.FlateStream(T,y);case"LZW":case"LZWDecode":P.addStreamType(t.StreamType.LZW);let E=1;return p?(p.has("EarlyChange")&&(E=p.get("EarlyChange")),new g.PredictorStream(new d.LZWStream(T,y,E),y,p)):new d.LZWStream(T,y,E);case"DCT":case"DCTDecode":return P.addStreamType(t.StreamType.DCT),new l.JpegStream(T,y,p);case"JPX":case"JPXDecode":return P.addStreamType(t.StreamType.JPX),new u.JpxStream(T,y,p);case"A85":case"ASCII85Decode":return P.addStreamType(t.StreamType.A85),new s.Ascii85Stream(T,y);case"AHx":case"ASCIIHexDecode":return P.addStreamType(t.StreamType.AHX),new e.AsciiHexStream(T,y);case"CCF":case"CCITTFaxDecode":return P.addStreamType(t.StreamType.CCF),new a.CCITTFaxStream(T,y,p);case"RL":case"RunLengthDecode":return P.addStreamType(t.StreamType.RLX),new x.RunLengthStream(T,y);case"JBIG2Decode":return P.addStreamType(t.StreamType.JBIG),new n.Jbig2Stream(T,y,p)}return(0,t.warn)(`Filter "${R}" is not supported.`),T}catch(E){if(E instanceof c.MissingDataException)throw E;return(0,t.warn)(`Invalid stream: "${E}"`),new i.NullStream}}}f.Parser=v;const _=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function K(O){return O>=48&&O<=57?O&15:O>=65&&O<=70||O>=97&&O<=102?(O&15)+9:-1}class M{constructor(T,R=null){this.stream=T,this.nextChar(),this.strBuf=[],this.knownCommands=R,this._hexStringNumWarn=0,this.beginInlineImagePos=-1}nextChar(){return this.currentChar=this.stream.getByte()}peekChar(){return this.stream.peekByte()}getNumber(){let T=this.currentChar,R=!1,y=0,p=0;if(T===45?(p=-1,T=this.nextChar(),T===45&&(T=this.nextChar())):T===43&&(p=1,T=this.nextChar()),T===10||T===13)do T=this.nextChar();while(T===10||T===13);if(T===46&&(y=10,T=this.nextChar()),T<48||T>57){if((0,c.isWhiteSpace)(T)||T===-1){if(y===10&&p===0)return(0,t.warn)("Lexer.getNumber - treating a single decimal point as zero."),0;if(y===0&&p===-1)return(0,t.warn)("Lexer.getNumber - treating a single minus sign as zero."),0}throw new t.FormatError(`Invalid number: ${String.fromCharCode(T)} (charCode ${T})`)}p=p||1;let P=T-48,E=0,S=1;for(;(T=this.nextChar())>=0;)if(T>=48&&T<=57){const F=T-48;R?E=E*10+F:(y!==0&&(y*=10),P=P*10+F)}else if(T===46)if(y===0)y=1;else break;else if(T===45)(0,t.warn)("Badly formatted number: minus sign in the middle");else if(T===69||T===101){if(T=this.peekChar(),T===43||T===45)S=T===45?-1:1,this.nextChar();else if(T<48||T>57)break;R=!0}else break;return y!==0&&(P/=y),R&&(P*=10**(S*E)),p*P}getString(){let T=1,R=!1;const y=this.strBuf;y.length=0;let p=this.nextChar();for(;;){let P=!1;switch(p|0){case-1:(0,t.warn)("Unterminated string"),R=!0;break;case 40:++T,y.push("(");break;case 41:--T===0?(this.nextChar(),R=!0):y.push(")");break;case 92:switch(p=this.nextChar(),p){case-1:(0,t.warn)("Unterminated string"),R=!0;break;case 110:y.push(`
`);break;case 114:y.push("\r");break;case 116:y.push("	");break;case 98:y.push("\b");break;case 102:y.push("\f");break;case 92:case 40:case 41:y.push(String.fromCharCode(p));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:let E=p&15;p=this.nextChar(),P=!0,p>=48&&p<=55&&(E=(E<<3)+(p&15),p=this.nextChar(),p>=48&&p<=55&&(P=!1,E=(E<<3)+(p&15))),y.push(String.fromCharCode(E));break;case 13:this.peekChar()===10&&this.nextChar();break;case 10:break;default:y.push(String.fromCharCode(p));break}break;default:y.push(String.fromCharCode(p));break}if(R)break;P||(p=this.nextChar())}return y.join("")}getName(){let T,R;const y=this.strBuf;for(y.length=0;(T=this.nextChar())>=0&&!_[T];)if(T===35){if(T=this.nextChar(),_[T]){(0,t.warn)("Lexer_getName: NUMBER SIGN (#) should be followed by a hexadecimal number."),y.push("#");break}const p=K(T);if(p!==-1){R=T,T=this.nextChar();const P=K(T);if(P===-1){if((0,t.warn)(`Lexer_getName: Illegal digit (${String.fromCharCode(T)}) in hexadecimal number.`),y.push("#",String.fromCharCode(R)),_[T])break;y.push(String.fromCharCode(T));continue}y.push(String.fromCharCode(p<<4|P))}else y.push("#",String.fromCharCode(T))}else y.push(String.fromCharCode(T));return y.length>127&&(0,t.warn)(`Name token is longer than allowed by the spec: ${y.length}`),o.Name.get(y.join(""))}_hexStringWarn(T){if(this._hexStringNumWarn++===5){(0,t.warn)("getHexString - ignoring additional invalid characters.");return}this._hexStringNumWarn>5||(0,t.warn)(`getHexString - ignoring invalid character: ${T}`)}getHexString(){const T=this.strBuf;T.length=0;let R=this.currentChar,y=!0,p,P;for(this._hexStringNumWarn=0;;)if(R<0){(0,t.warn)("Unterminated hex string");break}else if(R===62){this.nextChar();break}else if(_[R]===1){R=this.nextChar();continue}else{if(y){if(p=K(R),p===-1){this._hexStringWarn(R),R=this.nextChar();continue}}else{if(P=K(R),P===-1){this._hexStringWarn(R),R=this.nextChar();continue}T.push(String.fromCharCode(p<<4|P))}y=!y,R=this.nextChar()}return T.join("")}getObj(){let T=!1,R=this.currentChar;for(;;){if(R<0)return o.EOF;if(T)(R===10||R===13)&&(T=!1);else if(R===37)T=!0;else if(_[R]!==1)break;R=this.nextChar()}switch(R|0){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:return this.nextChar(),o.Cmd.get("[");case 93:return this.nextChar(),o.Cmd.get("]");case 60:return R=this.nextChar(),R===60?(this.nextChar(),o.Cmd.get("<<")):this.getHexString();case 62:return R=this.nextChar(),R===62?(this.nextChar(),o.Cmd.get(">>")):o.Cmd.get(">");case 123:return this.nextChar(),o.Cmd.get("{");case 125:return this.nextChar(),o.Cmd.get("}");case 41:throw this.nextChar(),new t.FormatError(`Illegal character: ${R}`)}let y=String.fromCharCode(R);if(R<32||R>127){const E=this.peekChar();if(E>=32&&E<=127)return this.nextChar(),o.Cmd.get(y)}const p=this.knownCommands;let P=p&&p[y]!==void 0;for(;(R=this.nextChar())>=0&&!_[R];){const E=y+String.fromCharCode(R);if(P&&p[E]===void 0)break;if(y.length===128)throw new t.FormatError(`Command token too long: ${y.length}`);y=E,P=p&&p[y]!==void 0}return y==="true"?!0:y==="false"?!1:y==="null"?null:(y==="BI"&&(this.beginInlineImagePos=this.stream.pos),o.Cmd.get(y))}peekObj(){const T=this.stream.pos,R=this.currentChar,y=this.beginInlineImagePos;let p;try{p=this.getObj()}catch(P){if(P instanceof c.MissingDataException)throw P;(0,t.warn)(`peekObj: ${P}`)}return this.stream.pos=T,this.currentChar=R,this.beginInlineImagePos=y,p}skipToNextLine(){let T=this.currentChar;for(;T>=0;){if(T===13){T=this.nextChar(),T===10&&this.nextChar();break}else if(T===10){this.nextChar();break}T=this.nextChar()}}}f.Lexer=M;class j{static create(T){function R(D,U,X=!1){const G=D.get(U);if(Number.isInteger(G)&&(X?G>=0:G>0))return G;throw new Error(`The "${U}" parameter in the linearization dictionary is invalid.`)}function y(D){const U=D.get("H");let X;if(Array.isArray(U)&&((X=U.length)===2||X===4)){for(let G=0;G<X;G++){const Y=U[G];if(!(Number.isInteger(Y)&&Y>0))throw new Error(`Hint (${G}) in the linearization dictionary is invalid.`)}return U}throw new Error("Hint array in the linearization dictionary is invalid.")}const p=new v({lexer:new M(T),xref:null}),P=p.getObj(),E=p.getObj(),S=p.getObj(),F=p.getObj();let C,b;if(Number.isInteger(P)&&Number.isInteger(E)&&(0,o.isCmd)(S,"obj")&&F instanceof o.Dict&&typeof(C=F.get("Linearized"))=="number"&&C>0){if((b=R(F,"L"))!==T.length)throw new Error('The "L" parameter in the linearization dictionary does not equal the stream length.')}else return null;return{length:b,hints:y(F),objectNumberFirst:R(F,"O"),endFirst:R(F,"E"),numPages:R(F,"N"),mainXRefEntriesOffset:R(F,"T"),pageFirst:F.has("P")?R(F,"P",!0):0}}}f.Linearization=j},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Ascii85Stream=void 0;var t=h(19),o=h(6);class c extends t.DecodeStream{constructor(e,a){a&&(a*=.8),super(a),this.str=e,this.dict=e.dict,this.input=new Uint8Array(5)}readBlock(){const n=this.str;let l=n.getByte();for(;(0,o.isWhiteSpace)(l);)l=n.getByte();if(l===-1||l===126){this.eof=!0;return}const u=this.bufferLength;let d,i;if(l===122){for(d=this.ensureBuffer(u+4),i=0;i<4;++i)d[u+i]=0;this.bufferLength+=4}else{const g=this.input;for(g[0]=l,i=1;i<5;++i){for(l=n.getByte();(0,o.isWhiteSpace)(l);)l=n.getByte();if(g[i]=l,l===-1||l===126)break}if(d=this.ensureBuffer(u+i-1),this.bufferLength+=i-1,i<5){for(;i<5;++i)g[i]=117;this.eof=!0}let x=0;for(i=0;i<5;++i)x=x*85+(g[i]-33);for(i=3;i>=0;--i)d[u+i]=x&255,x>>=8}}}f.Ascii85Stream=c},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.StreamsSequenceStream=f.DecodeStream=void 0;var t=h(7),o=h(10);const c=new Uint8Array(0);class s extends t.BaseStream{constructor(r){if(super(),this._rawMinBufferLength=r||0,this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=c,this.minBufferLength=512,r)for(;this.minBufferLength<r;)this.minBufferLength*=2}get isEmpty(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0}ensureBuffer(r){const n=this.buffer;if(r<=n.byteLength)return n;let l=this.minBufferLength;for(;l<r;)l*=2;const u=new Uint8Array(l);return u.set(n),this.buffer=u}getByte(){const r=this.pos;for(;this.bufferLength<=r;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]}getBytes(r){const n=this.pos;let l;if(r){for(this.ensureBuffer(n+r),l=n+r;!this.eof&&this.bufferLength<l;)this.readBlock();const u=this.bufferLength;l>u&&(l=u)}else{for(;!this.eof;)this.readBlock();l=this.bufferLength}return this.pos=l,this.buffer.subarray(n,l)}reset(){this.pos=0}makeSubStream(r,n,l=null){if(n===void 0)for(;!this.eof;)this.readBlock();else{const u=r+n;for(;this.bufferLength<=u&&!this.eof;)this.readBlock()}return new o.Stream(this.buffer,r,n,l)}getBaseStreams(){return this.str?this.str.getBaseStreams():null}}f.DecodeStream=s;class e extends s{constructor(r,n=null){let l=0;for(const u of r)l+=u instanceof s?u._rawMinBufferLength:u.length;super(l),this.streams=r,this._onError=n}readBlock(){const r=this.streams;if(r.length===0){this.eof=!0;return}const n=r.shift();let l;try{l=n.getBytes()}catch(g){if(this._onError){this._onError(g,n.dict&&n.dict.objId);return}throw g}const u=this.bufferLength,d=u+l.length;this.ensureBuffer(d).set(l,u),this.bufferLength=d}getBaseStreams(){const r=[];for(const n of this.streams){const l=n.getBaseStreams();l&&r.push(...l)}return r.length>0?r:null}}f.StreamsSequenceStream=e},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.AsciiHexStream=void 0;var t=h(19);class o extends t.DecodeStream{constructor(s,e){e&&(e*=.5),super(e),this.str=s,this.dict=s.dict,this.firstDigit=-1}readBlock(){const e=this.str.getBytes(8e3);if(!e.length){this.eof=!0;return}const a=e.length+1>>1,r=this.ensureBuffer(this.bufferLength+a);let n=this.bufferLength,l=this.firstDigit;for(const u of e){let d;if(u>=48&&u<=57)d=u&15;else if(u>=65&&u<=70||u>=97&&u<=102)d=(u&15)+9;else if(u===62){this.eof=!0;break}else continue;l<0?l=d:(r[n++]=l<<4|d,l=-1)}l>=0&&this.eof&&(r[n++]=l<<4,l=-1),this.firstDigit=l,this.bufferLength=n}}f.AsciiHexStream=o},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.CCITTFaxStream=void 0;var t=h(22),o=h(19),c=h(5);class s extends o.DecodeStream{constructor(a,r,n){super(r),this.str=a,this.dict=a.dict,n instanceof c.Dict||(n=c.Dict.empty);const l={next(){return a.getByte()}};this.ccittFaxDecoder=new t.CCITTFaxDecoder(l,{K:n.get("K"),EndOfLine:n.get("EndOfLine"),EncodedByteAlign:n.get("EncodedByteAlign"),Columns:n.get("Columns"),Rows:n.get("Rows"),EndOfBlock:n.get("EndOfBlock"),BlackIs1:n.get("BlackIs1")})}readBlock(){for(;!this.eof;){const a=this.ccittFaxDecoder.readNextChar();if(a===-1){this.eof=!0;return}this.ensureBuffer(this.bufferLength+1),this.buffer[this.bufferLength++]=a}}}f.CCITTFaxStream=s},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.CCITTFaxDecoder=void 0;var t=h(2);const o=-2,c=-1,s=0,e=1,a=2,r=3,n=4,l=5,u=6,d=7,i=8,g=[[-1,-1],[-1,-1],[7,i],[7,d],[6,u],[6,u],[6,l],[6,l],[4,s],[4,s],[4,s],[4,s],[4,s],[4,s],[4,s],[4,s],[3,e],[3,e],[3,e],[3,e],[3,e],[3,e],[3,e],[3,e],[3,e],[3,e],[3,e],[3,e],[3,e],[3,e],[3,e],[3,e],[3,n],[3,n],[3,n],[3,n],[3,n],[3,n],[3,n],[3,n],[3,n],[3,n],[3,n],[3,n],[3,n],[3,n],[3,n],[3,n],[3,r],[3,r],[3,r],[3,r],[3,r],[3,r],[3,r],[3,r],[3,r],[3,r],[3,r],[3,r],[3,r],[3,r],[3,r],[3,r],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a],[1,a]],x=[[-1,-1],[12,o],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],m=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],A=[[-1,-1],[-1,-1],[12,o],[12,o],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],k=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],v=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];class _{constructor(M,j={}){if(!M||typeof M.next!="function")throw new Error('CCITTFaxDecoder - invalid "source" parameter.');this.source=M,this.eof=!1,this.encoding=j.K||0,this.eoline=j.EndOfLine||!1,this.byteAlign=j.EncodedByteAlign||!1,this.columns=j.Columns||1728,this.rows=j.Rows||0;let O=j.EndOfBlock;O==null&&(O=!0),this.eoblock=O,this.black=j.BlackIs1||!1,this.codingLine=new Uint32Array(this.columns+1),this.refLine=new Uint32Array(this.columns+2),this.codingLine[0]=this.columns,this.codingPos=0,this.row=0,this.nextLine2D=this.encoding<0,this.inputBits=0,this.inputBuf=0,this.outputBits=0,this.rowsDone=!1;let T;for(;(T=this._lookBits(12))===0;)this._eatBits(1);T===1&&this._eatBits(12),this.encoding>0&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1))}readNextChar(){if(this.eof)return-1;const M=this.refLine,j=this.codingLine,O=this.columns;let T,R,y,p;if(this.outputBits===0){if(this.rowsDone&&(this.eof=!0),this.eof)return-1;this.err=!1;let E,S,F;if(this.nextLine2D){for(p=0;j[p]<O;++p)M[p]=j[p];for(M[p++]=O,M[p]=O,j[0]=0,this.codingPos=0,T=0,R=0;j[this.codingPos]<O;)switch(E=this._getTwoDimCode(),E){case s:this._addPixels(M[T+1],R),M[T+1]<O&&(T+=2);break;case e:if(E=S=0,R){do E+=F=this._getBlackCode();while(F>=64);do S+=F=this._getWhiteCode();while(F>=64)}else{do E+=F=this._getWhiteCode();while(F>=64);do S+=F=this._getBlackCode();while(F>=64)}for(this._addPixels(j[this.codingPos]+E,R),j[this.codingPos]<O&&this._addPixels(j[this.codingPos]+S,R^1);M[T]<=j[this.codingPos]&&M[T]<O;)T+=2;break;case d:if(this._addPixels(M[T]+3,R),R^=1,j[this.codingPos]<O)for(++T;M[T]<=j[this.codingPos]&&M[T]<O;)T+=2;break;case l:if(this._addPixels(M[T]+2,R),R^=1,j[this.codingPos]<O)for(++T;M[T]<=j[this.codingPos]&&M[T]<O;)T+=2;break;case r:if(this._addPixels(M[T]+1,R),R^=1,j[this.codingPos]<O)for(++T;M[T]<=j[this.codingPos]&&M[T]<O;)T+=2;break;case a:if(this._addPixels(M[T],R),R^=1,j[this.codingPos]<O)for(++T;M[T]<=j[this.codingPos]&&M[T]<O;)T+=2;break;case i:if(this._addPixelsNeg(M[T]-3,R),R^=1,j[this.codingPos]<O)for(T>0?--T:++T;M[T]<=j[this.codingPos]&&M[T]<O;)T+=2;break;case u:if(this._addPixelsNeg(M[T]-2,R),R^=1,j[this.codingPos]<O)for(T>0?--T:++T;M[T]<=j[this.codingPos]&&M[T]<O;)T+=2;break;case n:if(this._addPixelsNeg(M[T]-1,R),R^=1,j[this.codingPos]<O)for(T>0?--T:++T;M[T]<=j[this.codingPos]&&M[T]<O;)T+=2;break;case c:this._addPixels(O,0),this.eof=!0;break;default:(0,t.info)("bad 2d code"),this._addPixels(O,0),this.err=!0}}else for(j[0]=0,this.codingPos=0,R=0;j[this.codingPos]<O;){if(E=0,R)do E+=F=this._getBlackCode();while(F>=64);else do E+=F=this._getWhiteCode();while(F>=64);this._addPixels(j[this.codingPos]+E,R),R^=1}let C=!1;if(this.byteAlign&&(this.inputBits&=-8),!this.eoblock&&this.row===this.rows-1)this.rowsDone=!0;else{if(E=this._lookBits(12),this.eoline)for(;E!==c&&E!==1;)this._eatBits(1),E=this._lookBits(12);else for(;E===0;)this._eatBits(1),E=this._lookBits(12);E===1?(this._eatBits(12),C=!0):E===c&&(this.eof=!0)}if(!this.eof&&this.encoding>0&&!this.rowsDone&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1)),this.eoblock&&C&&this.byteAlign){if(E=this._lookBits(12),E===1){if(this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1)),this.encoding>=0)for(p=0;p<4;++p)E=this._lookBits(12),E!==1&&(0,t.info)("bad rtc code: "+E),this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1));this.eof=!0}}else if(this.err&&this.eoline){for(;;){if(E=this._lookBits(13),E===c)return this.eof=!0,-1;if(E>>1===1)break;this._eatBits(1)}this._eatBits(12),this.encoding>0&&(this._eatBits(1),this.nextLine2D=!(E&1))}j[0]>0?this.outputBits=j[this.codingPos=0]:this.outputBits=j[this.codingPos=1],this.row++}let P;if(this.outputBits>=8)P=this.codingPos&1?0:255,this.outputBits-=8,this.outputBits===0&&j[this.codingPos]<O&&(this.codingPos++,this.outputBits=j[this.codingPos]-j[this.codingPos-1]);else{y=8,P=0;do{if(typeof this.outputBits!="number")throw new t.FormatError('Invalid /CCITTFaxDecode data, "outputBits" must be a number.');this.outputBits>y?(P<<=y,this.codingPos&1||(P|=255>>8-y),this.outputBits-=y,y=0):(P<<=this.outputBits,this.codingPos&1||(P|=255>>8-this.outputBits),y-=this.outputBits,this.outputBits=0,j[this.codingPos]<O?(this.codingPos++,this.outputBits=j[this.codingPos]-j[this.codingPos-1]):y>0&&(P<<=y,y=0))}while(y)}return this.black&&(P^=255),P}_addPixels(M,j){const O=this.codingLine;let T=this.codingPos;M>O[T]&&(M>this.columns&&((0,t.info)("row is wrong length"),this.err=!0,M=this.columns),T&1^j&&++T,O[T]=M),this.codingPos=T}_addPixelsNeg(M,j){const O=this.codingLine;let T=this.codingPos;if(M>O[T])M>this.columns&&((0,t.info)("row is wrong length"),this.err=!0,M=this.columns),T&1^j&&++T,O[T]=M;else if(M<O[T]){for(M<0&&((0,t.info)("invalid code"),this.err=!0,M=0);T>0&&M<O[T-1];)--T;O[T]=M}this.codingPos=T}_findTableCode(M,j,O,T){const R=T||0;for(let y=M;y<=j;++y){let p=this._lookBits(y);if(p===c)return[!0,1,!1];if(y<j&&(p<<=j-y),!R||p>=R){const P=O[p-R];if(P[0]===y)return this._eatBits(y),[!0,P[1],!0]}}return[!1,0,!1]}_getTwoDimCode(){let M=0,j;if(this.eoblock){if(M=this._lookBits(7),j=g[M],j&&j[0]>0)return this._eatBits(j[0]),j[1]}else{const O=this._findTableCode(1,7,g);if(O[0]&&O[2])return O[1]}return(0,t.info)("Bad two dim code"),c}_getWhiteCode(){let M=0,j;if(this.eoblock){if(M=this._lookBits(12),M===c)return 1;if(M>>5?j=m[M>>3]:j=x[M],j[0]>0)return this._eatBits(j[0]),j[1]}else{let O=this._findTableCode(1,9,m);if(O[0]||(O=this._findTableCode(11,12,x),O[0]))return O[1]}return(0,t.info)("bad white code"),this._eatBits(1),1}_getBlackCode(){let M,j;if(this.eoblock){if(M=this._lookBits(13),M===c)return 1;if(M>>7?!(M>>9)&&M>>7?j=k[(M>>1)-64]:j=v[M>>7]:j=A[M],j[0]>0)return this._eatBits(j[0]),j[1]}else{let O=this._findTableCode(2,6,v);if(O[0]||(O=this._findTableCode(7,12,k,64),O[0])||(O=this._findTableCode(10,13,A),O[0]))return O[1]}return(0,t.info)("bad black code"),this._eatBits(1),1}_lookBits(M){let j;for(;this.inputBits<M;){if((j=this.source.next())===-1)return this.inputBits===0?c:this.inputBuf<<M-this.inputBits&65535>>16-M;this.inputBuf=this.inputBuf<<8|j,this.inputBits+=8}return this.inputBuf>>this.inputBits-M&65535>>16-M}_eatBits(M){(this.inputBits-=M)<0&&(this.inputBits=0)}}f.CCITTFaxDecoder=_},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.FlateStream=void 0;var t=h(19),o=h(2);const c=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),e=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),a=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],r=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];class n extends t.DecodeStream{constructor(u,d){super(d),this.str=u,this.dict=u.dict;const i=u.getByte(),g=u.getByte();if(i===-1||g===-1)throw new o.FormatError(`Invalid header in flate stream: ${i}, ${g}`);if((i&15)!==8)throw new o.FormatError(`Unknown compression method in flate stream: ${i}, ${g}`);if(((i<<8)+g)%31!==0)throw new o.FormatError(`Bad FCHECK in flate stream: ${i}, ${g}`);if(g&32)throw new o.FormatError(`FDICT bit set in flate stream: ${i}, ${g}`);this.codeSize=0,this.codeBuf=0}getBits(u){const d=this.str;let i=this.codeSize,g=this.codeBuf,x;for(;i<u;){if((x=d.getByte())===-1)throw new o.FormatError("Bad encoding in flate stream");g|=x<<i,i+=8}return x=g&(1<<u)-1,this.codeBuf=g>>u,this.codeSize=i-=u,x}getCode(u){const d=this.str,i=u[0],g=u[1];let x=this.codeSize,m=this.codeBuf,A;for(;x<g&&(A=d.getByte())!==-1;)m|=A<<x,x+=8;const k=i[m&(1<<g)-1],v=k>>16,_=k&65535;if(v<1||x<v)throw new o.FormatError("Bad encoding in flate stream");return this.codeBuf=m>>v,this.codeSize=x-v,_}generateHuffmanTable(u){const d=u.length;let i=0,g;for(g=0;g<d;++g)u[g]>i&&(i=u[g]);const x=1<<i,m=new Int32Array(x);for(let A=1,k=0,v=2;A<=i;++A,k<<=1,v<<=1)for(let _=0;_<d;++_)if(u[_]===A){let K=0,M=k;for(g=0;g<A;++g)K=K<<1|M&1,M>>=1;for(g=K;g<x;g+=v)m[g]=A<<16|_;++k}return[m,i]}readBlock(){let u,d;const i=this.str;let g=this.getBits(3);if(g&1&&(this.eof=!0),g>>=1,g===0){let v;if((v=i.getByte())===-1)throw new o.FormatError("Bad block header in flate stream");let _=v;if((v=i.getByte())===-1)throw new o.FormatError("Bad block header in flate stream");if(_|=v<<8,(v=i.getByte())===-1)throw new o.FormatError("Bad block header in flate stream");let K=v;if((v=i.getByte())===-1)throw new o.FormatError("Bad block header in flate stream");if(K|=v<<8,K!==(~_&65535)&&(_!==0||K!==0))throw new o.FormatError("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;const M=this.bufferLength,j=M+_;if(u=this.ensureBuffer(j),this.bufferLength=j,_===0)i.peekByte()===-1&&(this.eof=!0);else{const O=i.getBytes(_);u.set(O,M),O.length<_&&(this.eof=!0)}return}let x,m;if(g===1)x=a,m=r;else if(g===2){const v=this.getBits(5)+257,_=this.getBits(5)+1,K=this.getBits(4)+4,M=new Uint8Array(c.length);let j;for(j=0;j<K;++j)M[c[j]]=this.getBits(3);const O=this.generateHuffmanTable(M);d=0,j=0;const T=v+_,R=new Uint8Array(T);let y,p,P;for(;j<T;){const E=this.getCode(O);if(E===16)y=2,p=3,P=d;else if(E===17)y=3,p=3,P=d=0;else if(E===18)y=7,p=11,P=d=0;else{R[j++]=d=E;continue}let S=this.getBits(y)+p;for(;S-- >0;)R[j++]=P}x=this.generateHuffmanTable(R.subarray(0,v)),m=this.generateHuffmanTable(R.subarray(v,T))}else throw new o.FormatError("Unknown block type in flate stream");u=this.buffer;let A=u?u.length:0,k=this.bufferLength;for(;;){let v=this.getCode(x);if(v<256){k+1>=A&&(u=this.ensureBuffer(k+1),A=u.length),u[k++]=v;continue}if(v===256){this.bufferLength=k;return}v-=257,v=s[v];let _=v>>16;_>0&&(_=this.getBits(_)),d=(v&65535)+_,v=this.getCode(m),v=e[v],_=v>>16,_>0&&(_=this.getBits(_));const K=(v&65535)+_;k+d>=A&&(u=this.ensureBuffer(k+d),A=u.length);for(let M=0;M<d;++M,++k)u[k]=u[k-K]}}}f.FlateStream=n},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Jbig2Stream=void 0;var t=h(7),o=h(19),c=h(5),s=h(25),e=h(2);class a extends o.DecodeStream{constructor(n,l,u){super(l),this.stream=n,this.dict=n.dict,this.maybeLength=l,this.params=u}get bytes(){return(0,e.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(n){}readBlock(){if(this.eof)return;const n=new s.Jbig2Image,l=[];if(this.params instanceof c.Dict){const i=this.params.get("JBIG2Globals");if(i instanceof t.BaseStream){const g=i.getBytes();l.push({data:g,start:0,end:g.length})}}l.push({data:this.bytes,start:0,end:this.bytes.length});const u=n.parseChunks(l),d=u.length;for(let i=0;i<d;i++)u[i]^=255;this.buffer=u,this.bufferLength=d,this.eof=!0}}f.Jbig2Stream=a},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Jbig2Image=void 0;var t=h(2),o=h(6),c=h(26),s=h(22);class e extends t.BaseException{constructor(z){super(`JBIG2 error: ${z}`,"Jbig2Error")}}class a{getContexts(z){return z in this?this[z]:this[z]=new Int8Array(65536)}}class r{constructor(z,B,H){this.data=z,this.start=B,this.end=H}get decoder(){const z=new c.ArithmeticDecoder(this.data,this.start,this.end);return(0,t.shadow)(this,"decoder",z)}get contextCache(){const z=new a;return(0,t.shadow)(this,"contextCache",z)}}function n(W,z,B){const H=W.getContexts(z);let q=1;function Z(ee){let J=0;for(let ne=0;ne<ee;ne++){const re=B.readBit(H,q);q=q<256?q<<1|re:(q<<1|re)&511|256,J=J<<1|re}return J>>>0}const te=Z(1),Q=Z(1)?Z(1)?Z(1)?Z(1)?Z(1)?Z(32)+4436:Z(12)+340:Z(8)+84:Z(6)+20:Z(4)+4:Z(2);return te===0?Q:Q>0?-Q:null}function l(W,z,B){const H=W.getContexts("IAID");let q=1;for(let Z=0;Z<B;Z++){const te=z.readBit(H,q);q=q<<1|te}return B<31?q&(1<<B)-1:q&2147483647}const u=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],d=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],i=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],g=[39717,1941,229,405],x=[32,8];function m(W,z,B){const H=B.decoder,q=B.contextCache.getContexts("GB"),Z=[];let te,Q,ee,J,ne,re,ae;const se=31735;for(Q=0;Q<z;Q++)for(ne=Z[Q]=new Uint8Array(W),re=Q<1?ne:Z[Q-1],ae=Q<2?ne:Z[Q-2],te=ae[0]<<13|ae[1]<<12|ae[2]<<11|re[0]<<7|re[1]<<6|re[2]<<5|re[3]<<4,ee=0;ee<W;ee++)ne[ee]=J=H.readBit(q,te),te=(te&se)<<1|(ee+3<W?ae[ee+3]<<11:0)|(ee+4<W?re[ee+4]<<4:0)|J;return Z}function A(W,z,B,H,q,Z,te,Q){if(W){const Ee=new X(Q.data,Q.start,Q.end);return L(Ee,z,B,!1)}if(H===0&&!Z&&!q&&te.length===4&&te[0].x===3&&te[0].y===-1&&te[1].x===-3&&te[1].y===-1&&te[2].x===2&&te[2].y===-2&&te[3].x===-2&&te[3].y===-2)return m(z,B,Q);const ee=!!Z,J=d[H].concat(te);J.sort(function(Ee,rt){return Ee.y-rt.y||Ee.x-rt.x});const ne=J.length,re=new Int8Array(ne),ae=new Int8Array(ne),se=[];let oe=0,me=0,xe=0,Ae=0,Se,Fe;for(Fe=0;Fe<ne;Fe++)re[Fe]=J[Fe].x,ae[Fe]=J[Fe].y,me=Math.min(me,J[Fe].x),xe=Math.max(xe,J[Fe].x),Ae=Math.min(Ae,J[Fe].y),Fe<ne-1&&J[Fe].y===J[Fe+1].y&&J[Fe].x===J[Fe+1].x-1?oe|=1<<ne-1-Fe:se.push(Fe);const Pe=se.length,ue=new Int8Array(Pe),ye=new Int8Array(Pe),le=new Uint16Array(Pe);for(Se=0;Se<Pe;Se++)Fe=se[Se],ue[Se]=J[Fe].x,ye[Se]=J[Fe].y,le[Se]=1<<ne-1-Fe;const he=-me,ce=-Ae,Te=z-xe,Re=g[H];let He=new Uint8Array(z);const Ce=[],ve=Q.decoder,fe=Q.contextCache.getContexts("GB");let We=0,Ue,ze,tt,Ne=0,Qe,ct;for(let Ee=0;Ee<B;Ee++){if(q){const rt=ve.readBit(fe,Re);if(We^=rt,We){Ce.push(He);continue}}for(He=new Uint8Array(He),Ce.push(He),Ue=0;Ue<z;Ue++){if(ee&&Z[Ee][Ue]){He[Ue]=0;continue}if(Ue>=he&&Ue<Te&&Ee>=ce)for(Ne=Ne<<1&oe,Fe=0;Fe<Pe;Fe++)ze=Ee+ye[Fe],tt=Ue+ue[Fe],Qe=Ce[ze][tt],Qe&&(Qe=le[Fe],Ne|=Qe);else for(Ne=0,ct=ne-1,Fe=0;Fe<ne;Fe++,ct--)tt=Ue+re[Fe],tt>=0&&tt<z&&(ze=Ee+ae[Fe],ze>=0&&(Qe=Ce[ze][tt],Qe&&(Ne|=Qe<<ct)));const rt=ve.readBit(fe,Ne);He[Ue]=rt}}return Ce}function k(W,z,B,H,q,Z,te,Q,ee){let J=i[B].coding;B===0&&(J=J.concat([Q[0]]));const ne=J.length,re=new Int32Array(ne),ae=new Int32Array(ne);let se;for(se=0;se<ne;se++)re[se]=J[se].x,ae[se]=J[se].y;let oe=i[B].reference;B===0&&(oe=oe.concat([Q[1]]));const me=oe.length,xe=new Int32Array(me),Ae=new Int32Array(me);for(se=0;se<me;se++)xe[se]=oe[se].x,Ae[se]=oe[se].y;const Se=H[0].length,Fe=H.length,Pe=x[B],ue=[],ye=ee.decoder,le=ee.contextCache.getContexts("GR");let he=0;for(let ce=0;ce<z;ce++){if(te){const Re=ye.readBit(le,Pe);if(he^=Re,he)throw new e("prediction is not supported")}const Te=new Uint8Array(W);ue.push(Te);for(let Re=0;Re<W;Re++){let He,Ce,ve=0;for(se=0;se<ne;se++)He=ce+ae[se],Ce=Re+re[se],He<0||Ce<0||Ce>=W?ve<<=1:ve=ve<<1|ue[He][Ce];for(se=0;se<me;se++)He=ce+Ae[se]-Z,Ce=Re+xe[se]-q,He<0||He>=Fe||Ce<0||Ce>=Se?ve<<=1:ve=ve<<1|H[He][Ce];const fe=ye.readBit(le,ve);Te[Re]=fe}}return ue}function v(W,z,B,H,q,Z,te,Q,ee,J,ne,re){if(W&&z)throw new e("symbol refinement with Huffman is not supported");const ae=[];let se=0,oe=(0,o.log2)(B.length+H);const me=ne.decoder,xe=ne.contextCache;let Ae,Se;for(W&&(Ae=U(1),Se=[],oe=Math.max(oe,1));ae.length<H;){const ce=W?Z.tableDeltaHeight.decode(re):n(xe,"IADH",me);se+=ce;let Te=0,Re=0;const He=W?Se.length:0;for(;;){const Ce=W?Z.tableDeltaWidth.decode(re):n(xe,"IADW",me);if(Ce===null)break;Te+=Ce,Re+=Te;let ve;if(z){const fe=n(xe,"IAAI",me);if(fe>1)ve=_(W,z,Te,se,0,fe,1,B.concat(ae),oe,0,0,1,0,Z,ee,J,ne,0,re);else{const We=l(xe,me,oe),Ue=n(xe,"IARDX",me),ze=n(xe,"IARDY",me),tt=We<B.length?B[We]:ae[We-B.length];ve=k(Te,se,ee,tt,Ue,ze,!1,J,ne)}ae.push(ve)}else W?Se.push(Te):(ve=A(!1,Te,se,te,!1,null,Q,ne),ae.push(ve))}if(W&&!z){const Ce=Z.tableBitmapSize.decode(re);re.byteAlign();let ve;if(Ce===0)ve=I(re,Re,se);else{const We=re.end,Ue=re.position+Ce;re.end=Ue,ve=L(re,Re,se,!1),re.end=We,re.position=Ue}const fe=Se.length;if(He===fe-1)ae.push(ve);else{let We,Ue,ze=0,tt,Ne,Qe;for(We=He;We<fe;We++){for(Ne=Se[We],tt=ze+Ne,Qe=[],Ue=0;Ue<se;Ue++)Qe.push(ve[Ue].subarray(ze,tt));ae.push(Qe),ze=tt}}}}const Fe=[],Pe=[];let ue=!1,ye,le;const he=B.length+H;for(;Pe.length<he;){let ce=W?Ae.decode(re):n(xe,"IAEX",me);for(;ce--;)Pe.push(ue);ue=!ue}for(ye=0,le=B.length;ye<le;ye++)Pe[ye]&&Fe.push(B[ye]);for(let ce=0;ce<H;ye++,ce++)Pe[ye]&&Fe.push(ae[ce]);return Fe}function _(W,z,B,H,q,Z,te,Q,ee,J,ne,re,ae,se,oe,me,xe,Ae,Se){if(W&&z)throw new e("refinement with Huffman is not supported");const Fe=[];let Pe,ue;for(Pe=0;Pe<H;Pe++){if(ue=new Uint8Array(B),q)for(let Te=0;Te<B;Te++)ue[Te]=q;Fe.push(ue)}const ye=xe.decoder,le=xe.contextCache;let he=W?-se.tableDeltaT.decode(Se):-n(le,"IADT",ye),ce=0;for(Pe=0;Pe<Z;){const Te=W?se.tableDeltaT.decode(Se):n(le,"IADT",ye);he+=Te;const Re=W?se.tableFirstS.decode(Se):n(le,"IAFS",ye);ce+=Re;let He=ce;do{let Ce=0;te>1&&(Ce=W?Se.readBits(Ae):n(le,"IAIT",ye));const ve=te*he+Ce,fe=W?se.symbolIDTable.decode(Se):l(le,ye,ee),We=z&&(W?Se.readBit():n(le,"IARI",ye));let Ue=Q[fe],ze=Ue[0].length,tt=Ue.length;if(We){const vt=n(le,"IARDW",ye),lt=n(le,"IARDH",ye),ht=n(le,"IARDX",ye),ot=n(le,"IARDY",ye);ze+=vt,tt+=lt,Ue=k(ze,tt,oe,Ue,(vt>>1)+ht,(lt>>1)+ot,!1,me,xe)}const Ne=ve-(re&1?0:tt-1),Qe=He-(re&2?ze-1:0);let ct,Ee,rt;if(J){for(ct=0;ct<tt;ct++){if(ue=Fe[Qe+ct],!ue)continue;rt=Ue[ct];const vt=Math.min(B-Ne,ze);switch(ae){case 0:for(Ee=0;Ee<vt;Ee++)ue[Ne+Ee]|=rt[Ee];break;case 2:for(Ee=0;Ee<vt;Ee++)ue[Ne+Ee]^=rt[Ee];break;default:throw new e(`operator ${ae} is not supported`)}}He+=tt-1}else{for(Ee=0;Ee<tt;Ee++)if(ue=Fe[Ne+Ee],!!ue)switch(rt=Ue[Ee],ae){case 0:for(ct=0;ct<ze;ct++)ue[Qe+ct]|=rt[ct];break;case 2:for(ct=0;ct<ze;ct++)ue[Qe+ct]^=rt[ct];break;default:throw new e(`operator ${ae} is not supported`)}He+=ze-1}Pe++;const Ze=W?se.tableDeltaS.decode(Se):n(le,"IADS",ye);if(Ze===null)break;He+=Ze+ne}while(!0)}return Fe}function K(W,z,B,H,q,Z){const te=[];W||(te.push({x:-z,y:0}),q===0&&te.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2}));const Q=(H+1)*z,ee=A(W,Q,B,q,!1,null,te,Z),J=[];for(let ne=0;ne<=H;ne++){const re=[],ae=z*ne,se=ae+z;for(let oe=0;oe<B;oe++)re.push(ee[oe].subarray(ae,se));J.push(re)}return J}function M(W,z,B,H,q,Z,te,Q,ee,J,ne,re,ae,se,oe){if(te)throw new e("skip is not supported");if(Q!==0)throw new e(`operator "${Q}" is not supported in halftone region`);const xe=[];let Ae,Se,Fe;for(Ae=0;Ae<q;Ae++){if(Fe=new Uint8Array(H),Z)for(Se=0;Se<H;Se++)Fe[Se]=Z;xe.push(Fe)}const Pe=z.length,ue=z[0],ye=ue[0].length,le=ue.length,he=(0,o.log2)(Pe),ce=[];W||(ce.push({x:B<=1?3:2,y:-1}),B===0&&ce.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2}));const Te=[];let Re,He;for(W&&(Re=new X(oe.data,oe.start,oe.end)),Ae=he-1;Ae>=0;Ae--)W?He=L(Re,ee,J,!0):He=A(!1,ee,J,B,!1,null,ce,oe),Te[Ae]=He;let Ce,ve,fe,We,Ue,ze,tt,Ne,Qe;for(Ce=0;Ce<J;Ce++)for(ve=0;ve<ee;ve++){for(fe=0,We=0,Se=he-1;Se>=0;Se--)fe^=Te[Se][Ce][ve],We|=fe<<Se;if(Ue=z[We],ze=ne+Ce*se+ve*ae>>8,tt=re+Ce*ae-ve*se>>8,ze>=0&&ze+ye<=H&&tt>=0&&tt+le<=q)for(Ae=0;Ae<le;Ae++)for(Qe=xe[tt+Ae],Ne=Ue[Ae],Se=0;Se<ye;Se++)Qe[ze+Se]|=Ne[Se];else{let ct,Ee;for(Ae=0;Ae<le;Ae++)if(Ee=tt+Ae,!(Ee<0||Ee>=q))for(Qe=xe[Ee],Ne=Ue[Ae],Se=0;Se<ye;Se++)ct=ze+Se,ct>=0&&ct<H&&(Qe[ct]|=Ne[Se])}}return xe}function j(W,z){const B={};B.number=(0,o.readUint32)(W,z);const H=W[z+4],q=H&63;if(!u[q])throw new e("invalid segment type: "+q);B.type=q,B.typeName=u[q],B.deferredNonRetain=!!(H&128);const Z=!!(H&64),te=W[z+5];let Q=te>>5&7;const ee=[te&31];let J=z+6;if(te===7){Q=(0,o.readUint32)(W,J-1)&536870911,J+=3;let oe=Q+7>>3;for(ee[0]=W[J++];--oe>0;)ee.push(W[J++])}else if(te===5||te===6)throw new e("invalid referred-to flags");B.retainBits=ee;let ne=4;B.number<=256?ne=1:B.number<=65536&&(ne=2);const re=[];let ae,se;for(ae=0;ae<Q;ae++){let oe;ne===1?oe=W[J]:ne===2?oe=(0,o.readUint16)(W,J):oe=(0,o.readUint32)(W,J),re.push(oe),J+=ne}if(B.referredTo=re,Z?(B.pageAssociation=(0,o.readUint32)(W,J),J+=4):B.pageAssociation=W[J++],B.length=(0,o.readUint32)(W,J),J+=4,B.length===4294967295)if(q===38){const oe=T(W,J),xe=!!(W[J+R]&1),Ae=6,Se=new Uint8Array(Ae);for(xe||(Se[0]=255,Se[1]=172),Se[2]=oe.height>>>24&255,Se[3]=oe.height>>16&255,Se[4]=oe.height>>8&255,Se[5]=oe.height&255,ae=J,se=W.length;ae<se;ae++){let Fe=0;for(;Fe<Ae&&Se[Fe]===W[ae+Fe];)Fe++;if(Fe===Ae){B.length=ae+Ae;break}}if(B.length===4294967295)throw new e("segment end was not found")}else throw new e("invalid unknown segment length");return B.headerEnd=J,B}function O(W,z,B,H){const q=[];let Z=B;for(;Z<H;){const te=j(z,Z);Z=te.headerEnd;const Q={header:te,data:z};if(W.randomAccess||(Q.start=Z,Z+=te.length,Q.end=Z),q.push(Q),te.type===51)break}if(W.randomAccess)for(let te=0,Q=q.length;te<Q;te++)q[te].start=Z,Z+=q[te].header.length,q[te].end=Z;return q}function T(W,z){return{width:(0,o.readUint32)(W,z),height:(0,o.readUint32)(W,z+4),x:(0,o.readUint32)(W,z+8),y:(0,o.readUint32)(W,z+12),combinationOperator:W[z+16]&7}}const R=17;function y(W,z){const B=W.header,H=W.data,q=W.end;let Z=W.start,te,Q,ee,J;switch(B.type){case 0:const re={},ae=(0,o.readUint16)(H,Z);if(re.huffman=!!(ae&1),re.refinement=!!(ae&2),re.huffmanDHSelector=ae>>2&3,re.huffmanDWSelector=ae>>4&3,re.bitmapSizeSelector=ae>>6&1,re.aggregationInstancesSelector=ae>>7&1,re.bitmapCodingContextUsed=!!(ae&256),re.bitmapCodingContextRetained=!!(ae&512),re.template=ae>>10&3,re.refinementTemplate=ae>>12&1,Z+=2,!re.huffman){for(J=re.template===0?4:1,Q=[],ee=0;ee<J;ee++)Q.push({x:(0,o.readInt8)(H,Z),y:(0,o.readInt8)(H,Z+1)}),Z+=2;re.at=Q}if(re.refinement&&!re.refinementTemplate){for(Q=[],ee=0;ee<2;ee++)Q.push({x:(0,o.readInt8)(H,Z),y:(0,o.readInt8)(H,Z+1)}),Z+=2;re.refinementAt=Q}re.numberOfExportedSymbols=(0,o.readUint32)(H,Z),Z+=4,re.numberOfNewSymbols=(0,o.readUint32)(H,Z),Z+=4,te=[re,B.number,B.referredTo,H,Z,q];break;case 6:case 7:const se={};se.info=T(H,Z),Z+=R;const oe=(0,o.readUint16)(H,Z);if(Z+=2,se.huffman=!!(oe&1),se.refinement=!!(oe&2),se.logStripSize=oe>>2&3,se.stripSize=1<<se.logStripSize,se.referenceCorner=oe>>4&3,se.transposed=!!(oe&64),se.combinationOperator=oe>>7&3,se.defaultPixelValue=oe>>9&1,se.dsOffset=oe<<17>>27,se.refinementTemplate=oe>>15&1,se.huffman){const le=(0,o.readUint16)(H,Z);Z+=2,se.huffmanFS=le&3,se.huffmanDS=le>>2&3,se.huffmanDT=le>>4&3,se.huffmanRefinementDW=le>>6&3,se.huffmanRefinementDH=le>>8&3,se.huffmanRefinementDX=le>>10&3,se.huffmanRefinementDY=le>>12&3,se.huffmanRefinementSizeSelector=!!(le&16384)}if(se.refinement&&!se.refinementTemplate){for(Q=[],ee=0;ee<2;ee++)Q.push({x:(0,o.readInt8)(H,Z),y:(0,o.readInt8)(H,Z+1)}),Z+=2;se.refinementAt=Q}se.numberOfSymbolInstances=(0,o.readUint32)(H,Z),Z+=4,te=[se,B.referredTo,H,Z,q];break;case 16:const me={},xe=H[Z++];me.mmr=!!(xe&1),me.template=xe>>1&3,me.patternWidth=H[Z++],me.patternHeight=H[Z++],me.maxPatternIndex=(0,o.readUint32)(H,Z),Z+=4,te=[me,B.number,H,Z,q];break;case 22:case 23:const Ae={};Ae.info=T(H,Z),Z+=R;const Se=H[Z++];Ae.mmr=!!(Se&1),Ae.template=Se>>1&3,Ae.enableSkip=!!(Se&8),Ae.combinationOperator=Se>>4&7,Ae.defaultPixelValue=Se>>7&1,Ae.gridWidth=(0,o.readUint32)(H,Z),Z+=4,Ae.gridHeight=(0,o.readUint32)(H,Z),Z+=4,Ae.gridOffsetX=(0,o.readUint32)(H,Z)&4294967295,Z+=4,Ae.gridOffsetY=(0,o.readUint32)(H,Z)&4294967295,Z+=4,Ae.gridVectorX=(0,o.readUint16)(H,Z),Z+=2,Ae.gridVectorY=(0,o.readUint16)(H,Z),Z+=2,te=[Ae,B.referredTo,H,Z,q];break;case 38:case 39:const Fe={};Fe.info=T(H,Z),Z+=R;const Pe=H[Z++];if(Fe.mmr=!!(Pe&1),Fe.template=Pe>>1&3,Fe.prediction=!!(Pe&8),!Fe.mmr){for(J=Fe.template===0?4:1,Q=[],ee=0;ee<J;ee++)Q.push({x:(0,o.readInt8)(H,Z),y:(0,o.readInt8)(H,Z+1)}),Z+=2;Fe.at=Q}te=[Fe,H,Z,q];break;case 48:const ue={width:(0,o.readUint32)(H,Z),height:(0,o.readUint32)(H,Z+4),resolutionX:(0,o.readUint32)(H,Z+8),resolutionY:(0,o.readUint32)(H,Z+12)};ue.height===4294967295&&delete ue.height;const ye=H[Z+16];(0,o.readUint16)(H,Z+17),ue.lossless=!!(ye&1),ue.refinement=!!(ye&2),ue.defaultPixelValue=ye>>2&1,ue.combinationOperator=ye>>3&3,ue.requiresBuffer=!!(ye&32),ue.combinationOperatorOverride=!!(ye&64),te=[ue];break;case 49:break;case 50:break;case 51:break;case 53:te=[B.number,H,Z,q];break;case 62:break;default:throw new e(`segment type ${B.typeName}(${B.type}) is not implemented`)}const ne="on"+B.typeName;ne in z&&z[ne].apply(z,te)}function p(W,z){for(let B=0,H=W.length;B<H;B++)y(W[B],z)}function P(W){const z=new E;for(let B=0,H=W.length;B<H;B++){const q=W[B],Z=O({},q.data,q.start,q.end);p(Z,z)}return z.buffer}class E{onPageInformation(z){this.currentPageInfo=z;const B=z.width+7>>3,H=new Uint8ClampedArray(B*z.height);z.defaultPixelValue&&H.fill(255),this.buffer=H}drawBitmap(z,B){const H=this.currentPageInfo,q=z.width,Z=z.height,te=H.width+7>>3,Q=H.combinationOperatorOverride?z.combinationOperator:H.combinationOperator,ee=this.buffer,J=128>>(z.x&7);let ne=z.y*te+(z.x>>3),re,ae,se,oe;switch(Q){case 0:for(re=0;re<Z;re++){for(se=J,oe=ne,ae=0;ae<q;ae++)B[re][ae]&&(ee[oe]|=se),se>>=1,se||(se=128,oe++);ne+=te}break;case 2:for(re=0;re<Z;re++){for(se=J,oe=ne,ae=0;ae<q;ae++)B[re][ae]&&(ee[oe]^=se),se>>=1,se||(se=128,oe++);ne+=te}break;default:throw new e(`operator ${Q} is not supported`)}}onImmediateGenericRegion(z,B,H,q){const Z=z.info,te=new r(B,H,q),Q=A(z.mmr,Z.width,Z.height,z.template,z.prediction,null,z.at,te);this.drawBitmap(Z,Q)}onImmediateLosslessGenericRegion(){this.onImmediateGenericRegion(...arguments)}onSymbolDictionary(z,B,H,q,Z,te){let Q,ee;z.huffman&&(Q=N(z,H,this.customTables),ee=new X(q,Z,te));let J=this.symbols;J||(this.symbols=J={});const ne=[];for(const ae of H){const se=J[ae];se&&ne.push(...se)}const re=new r(q,Z,te);J[B]=v(z.huffman,z.refinement,ne,z.numberOfNewSymbols,z.numberOfExportedSymbols,Q,z.template,z.at,z.refinementTemplate,z.refinementAt,re,ee)}onImmediateTextRegion(z,B,H,q,Z){const te=z.info;let Q,ee;const J=this.symbols,ne=[];for(const oe of B){const me=J[oe];me&&ne.push(...me)}const re=(0,o.log2)(ne.length);z.huffman&&(ee=new X(H,q,Z),Q=Y(z,B,this.customTables,ne.length,ee));const ae=new r(H,q,Z),se=_(z.huffman,z.refinement,te.width,te.height,z.defaultPixelValue,z.numberOfSymbolInstances,z.stripSize,ne,re,z.transposed,z.dsOffset,z.referenceCorner,z.combinationOperator,Q,z.refinementTemplate,z.refinementAt,ae,z.logStripSize,ee);this.drawBitmap(te,se)}onImmediateLosslessTextRegion(){this.onImmediateTextRegion(...arguments)}onPatternDictionary(z,B,H,q,Z){let te=this.patterns;te||(this.patterns=te={});const Q=new r(H,q,Z);te[B]=K(z.mmr,z.patternWidth,z.patternHeight,z.maxPatternIndex,z.template,Q)}onImmediateHalftoneRegion(z,B,H,q,Z){const te=this.patterns[B[0]],Q=z.info,ee=new r(H,q,Z),J=M(z.mmr,te,z.template,Q.width,Q.height,z.defaultPixelValue,z.enableSkip,z.combinationOperator,z.gridWidth,z.gridHeight,z.gridOffsetX,z.gridOffsetY,z.gridVectorX,z.gridVectorY,ee);this.drawBitmap(Q,J)}onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion(...arguments)}onTables(z,B,H,q){let Z=this.customTables;Z||(this.customTables=Z={}),Z[z]=b(B,H,q)}}class S{constructor(z){z.length===2?(this.isOOB=!0,this.rangeLow=0,this.prefixLength=z[0],this.rangeLength=0,this.prefixCode=z[1],this.isLowerRange=!1):(this.isOOB=!1,this.rangeLow=z[0],this.prefixLength=z[1],this.rangeLength=z[2],this.prefixCode=z[3],this.isLowerRange=z[4]==="lower")}}class F{constructor(z){this.children=[],z?(this.isLeaf=!0,this.rangeLength=z.rangeLength,this.rangeLow=z.rangeLow,this.isLowerRange=z.isLowerRange,this.isOOB=z.isOOB):this.isLeaf=!1}buildTree(z,B){const H=z.prefixCode>>B&1;if(B<=0)this.children[H]=new F(z);else{let q=this.children[H];q||(this.children[H]=q=new F(null)),q.buildTree(z,B-1)}}decodeNode(z){if(this.isLeaf){if(this.isOOB)return null;const H=z.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-H:H)}const B=this.children[z.readBit()];if(!B)throw new e("invalid Huffman data");return B.decodeNode(z)}}class C{constructor(z,B){B||this.assignPrefixCodes(z),this.rootNode=new F(null);for(let H=0,q=z.length;H<q;H++){const Z=z[H];Z.prefixLength>0&&this.rootNode.buildTree(Z,Z.prefixLength-1)}}decode(z){return this.rootNode.decodeNode(z)}assignPrefixCodes(z){const B=z.length;let H=0;for(let ne=0;ne<B;ne++)H=Math.max(H,z[ne].prefixLength);const q=new Uint32Array(H+1);for(let ne=0;ne<B;ne++)q[z[ne].prefixLength]++;let Z=1,te=0,Q,ee,J;for(q[0]=0;Z<=H;){for(te=te+q[Z-1]<<1,Q=te,ee=0;ee<B;)J=z[ee],J.prefixLength===Z&&(J.prefixCode=Q,Q++),ee++;Z++}}}function b(W,z,B){const H=W[z],q=(0,o.readUint32)(W,z+1)&4294967295,Z=(0,o.readUint32)(W,z+5)&4294967295,te=new X(W,z+9,B),Q=(H>>1&7)+1,ee=(H>>4&7)+1,J=[];let ne,re,ae=q;do ne=te.readBits(Q),re=te.readBits(ee),J.push(new S([ae,ne,re,0])),ae+=1<<re;while(ae<Z);return ne=te.readBits(Q),J.push(new S([q-1,ne,32,0,"lower"])),ne=te.readBits(Q),J.push(new S([Z,ne,32,0])),H&1&&(ne=te.readBits(Q),J.push(new S([ne,0]))),new C(J,!1)}const D={};function U(W){let z=D[W];if(z)return z;let B;switch(W){case 1:B=[[0,1,4,0],[16,2,8,2],[272,3,16,6],[65808,3,32,7]];break;case 2:B=[[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[75,6,32,62],[6,63]];break;case 3:B=[[-256,8,8,254],[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[-257,8,32,255,"lower"],[75,7,32,126],[6,62]];break;case 4:B=[[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[76,5,32,31]];break;case 5:B=[[-255,7,8,126],[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[-256,7,32,127,"lower"],[76,6,32,62]];break;case 6:B=[[-2048,5,10,28],[-1024,4,9,8],[-512,4,8,9],[-256,4,7,10],[-128,5,6,29],[-64,5,5,30],[-32,4,5,11],[0,2,7,0],[128,3,7,2],[256,3,8,3],[512,4,9,12],[1024,4,10,13],[-2049,6,32,62,"lower"],[2048,6,32,63]];break;case 7:B=[[-1024,4,9,8],[-512,3,8,0],[-256,4,7,9],[-128,5,6,26],[-64,5,5,27],[-32,4,5,10],[0,4,5,11],[32,5,5,28],[64,5,6,29],[128,4,7,12],[256,3,8,1],[512,3,9,2],[1024,3,10,3],[-1025,5,32,30,"lower"],[2048,5,32,31]];break;case 8:B=[[-15,8,3,252],[-7,9,1,508],[-5,8,1,253],[-3,9,0,509],[-2,7,0,124],[-1,4,0,10],[0,2,1,0],[2,5,0,26],[3,6,0,58],[4,3,4,4],[20,6,1,59],[22,4,4,11],[38,4,5,12],[70,5,6,27],[134,5,7,28],[262,6,7,60],[390,7,8,125],[646,6,10,61],[-16,9,32,510,"lower"],[1670,9,32,511],[2,1]];break;case 9:B=[[-31,8,4,252],[-15,9,2,508],[-11,8,2,253],[-7,9,1,509],[-5,7,1,124],[-3,4,1,10],[-1,3,1,2],[1,3,1,3],[3,5,1,26],[5,6,1,58],[7,3,5,4],[39,6,2,59],[43,4,5,11],[75,4,6,12],[139,5,7,27],[267,5,8,28],[523,6,8,60],[779,7,9,125],[1291,6,11,61],[-32,9,32,510,"lower"],[3339,9,32,511],[2,0]];break;case 10:B=[[-21,7,4,122],[-5,8,0,252],[-4,7,0,123],[-3,5,0,24],[-2,2,2,0],[2,5,0,25],[3,6,0,54],[4,7,0,124],[5,8,0,253],[6,2,6,1],[70,5,5,26],[102,6,5,55],[134,6,6,56],[198,6,7,57],[326,6,8,58],[582,6,9,59],[1094,6,10,60],[2118,7,11,125],[-22,8,32,254,"lower"],[4166,8,32,255],[2,2]];break;case 11:B=[[1,1,0,0],[2,2,1,2],[4,4,0,12],[5,4,1,13],[7,5,1,28],[9,5,2,29],[13,6,2,60],[17,7,2,122],[21,7,3,123],[29,7,4,124],[45,7,5,125],[77,7,6,126],[141,7,32,127]];break;case 12:B=[[1,1,0,0],[2,2,0,2],[3,3,1,6],[5,5,0,28],[6,5,1,29],[8,6,1,60],[10,7,0,122],[11,7,1,123],[13,7,2,124],[17,7,3,125],[25,7,4,126],[41,8,5,254],[73,8,32,255]];break;case 13:B=[[1,1,0,0],[2,3,0,4],[3,4,0,12],[4,5,0,28],[5,4,1,13],[7,3,3,5],[15,6,1,58],[17,6,2,59],[21,6,3,60],[29,6,4,61],[45,6,5,62],[77,7,6,126],[141,7,32,127]];break;case 14:B=[[-2,3,0,4],[-1,3,0,5],[0,1,0,0],[1,3,0,6],[2,3,0,7]];break;case 15:B=[[-24,7,4,124],[-8,6,2,60],[-4,5,1,28],[-2,4,0,12],[-1,3,0,4],[0,1,0,0],[1,3,0,5],[2,4,0,13],[3,5,1,29],[5,6,2,61],[9,7,4,125],[-25,7,32,126,"lower"],[25,7,32,127]];break;default:throw new e(`standard table B.${W} does not exist`)}for(let H=0,q=B.length;H<q;H++)B[H]=new S(B[H]);return z=new C(B,!0),D[W]=z,z}class X{constructor(z,B,H){this.data=z,this.start=B,this.end=H,this.position=B,this.shift=-1,this.currentByte=0}readBit(){if(this.shift<0){if(this.position>=this.end)throw new e("end of data while reading bit");this.currentByte=this.data[this.position++],this.shift=7}const z=this.currentByte>>this.shift&1;return this.shift--,z}readBits(z){let B=0,H;for(H=z-1;H>=0;H--)B|=this.readBit()<<H;return B}byteAlign(){this.shift=-1}next(){return this.position>=this.end?-1:this.data[this.position++]}}function G(W,z,B){let H=0;for(let q=0,Z=z.length;q<Z;q++){const te=B[z[q]];if(te){if(W===H)return te;H++}}throw new e("can't find custom Huffman table")}function Y(W,z,B,H,q){const Z=[];for(let ae=0;ae<=34;ae++){const se=q.readBits(4);Z.push(new S([ae,se,0,0]))}const te=new C(Z,!1);Z.length=0;for(let ae=0;ae<H;){const se=te.decode(q);if(se>=32){let oe,me,xe;switch(se){case 32:if(ae===0)throw new e("no previous value in symbol ID table");me=q.readBits(2)+3,oe=Z[ae-1].prefixLength;break;case 33:me=q.readBits(3)+3,oe=0;break;case 34:me=q.readBits(7)+11,oe=0;break;default:throw new e("invalid code length in symbol ID table")}for(xe=0;xe<me;xe++)Z.push(new S([ae,oe,0,0])),ae++}else Z.push(new S([ae,se,0,0])),ae++}q.byteAlign();const Q=new C(Z,!1);let ee=0,J,ne,re;switch(W.huffmanFS){case 0:case 1:J=U(W.huffmanFS+6);break;case 3:J=G(ee,z,B),ee++;break;default:throw new e("invalid Huffman FS selector")}switch(W.huffmanDS){case 0:case 1:case 2:ne=U(W.huffmanDS+8);break;case 3:ne=G(ee,z,B),ee++;break;default:throw new e("invalid Huffman DS selector")}switch(W.huffmanDT){case 0:case 1:case 2:re=U(W.huffmanDT+11);break;case 3:re=G(ee,z,B),ee++;break;default:throw new e("invalid Huffman DT selector")}if(W.refinement)throw new e("refinement with Huffman is not supported");return{symbolIDTable:Q,tableFirstS:J,tableDeltaS:ne,tableDeltaT:re}}function N(W,z,B){let H=0,q,Z;switch(W.huffmanDHSelector){case 0:case 1:q=U(W.huffmanDHSelector+4);break;case 3:q=G(H,z,B),H++;break;default:throw new e("invalid Huffman DH selector")}switch(W.huffmanDWSelector){case 0:case 1:Z=U(W.huffmanDWSelector+2);break;case 3:Z=G(H,z,B),H++;break;default:throw new e("invalid Huffman DW selector")}let te,Q;return W.bitmapSizeSelector?(te=G(H,z,B),H++):te=U(1),W.aggregationInstancesSelector?Q=G(H,z,B):Q=U(1),{tableDeltaHeight:q,tableDeltaWidth:Z,tableBitmapSize:te,tableAggregateInstances:Q}}function I(W,z,B){const H=[];for(let q=0;q<B;q++){const Z=new Uint8Array(z);H.push(Z);for(let te=0;te<z;te++)Z[te]=W.readBit();W.byteAlign()}return H}function L(W,z,B,H){const q={K:-1,Columns:z,Rows:B,BlackIs1:!0,EndOfBlock:H},Z=new s.CCITTFaxDecoder(W,q),te=[];let Q,ee=!1;for(let J=0;J<B;J++){const ne=new Uint8Array(z);te.push(ne);let re=-1;for(let ae=0;ae<z;ae++)re<0&&(Q=Z.readNextChar(),Q===-1&&(Q=0,ee=!0),re=7),ne[ae]=Q>>re&1,re--}if(H&&!ee)for(let ne=0;ne<5&&Z.readNextChar()!==-1;ne++);return te}class ${parseChunks(z){return P(z)}parse(z){throw new Error("Not implemented: Jbig2Image.parse")}}f.Jbig2Image=$},(ge,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ArithmeticDecoder=void 0;const h=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];class t{constructor(c,s,e){this.data=c,this.bp=s,this.dataEnd=e,this.chigh=c[s],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}byteIn(){const c=this.data;let s=this.bp;c[s]===255?c[s+1]>143?(this.clow+=65280,this.ct=8):(s++,this.clow+=c[s]<<9,this.ct=7,this.bp=s):(s++,this.clow+=s<this.dataEnd?c[s]<<8:65280,this.ct=8,this.bp=s),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)}readBit(c,s){let e=c[s]>>1,a=c[s]&1;const r=h[e],n=r.qe;let l,u=this.a-n;if(this.chigh<n)u<n?(u=n,l=a,e=r.nmps):(u=n,l=1^a,r.switchFlag===1&&(a=l),e=r.nlps);else{if(this.chigh-=n,u&32768)return this.a=u,a;u<n?(l=1^a,r.switchFlag===1&&(a=l),e=r.nlps):(l=a,e=r.nmps)}do this.ct===0&&this.byteIn(),u<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--;while(!(u&32768));return this.a=u,c[s]=e<<1|a,l}}f.ArithmeticDecoder=t},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.JpegStream=void 0;var t=h(19),o=h(5),c=h(28),s=h(2);class e extends t.DecodeStream{constructor(r,n,l){let u;for(;(u=r.getByte())!==-1;)if(u===255){r.skip(-1);break}super(n),this.stream=r,this.dict=r.dict,this.maybeLength=n,this.params=l}get bytes(){return(0,s.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(r){}readBlock(){if(this.eof)return;const r={decodeTransform:void 0,colorTransform:void 0},n=this.dict.getArray("D","Decode");if(this.forceRGB&&Array.isArray(n)){const d=this.dict.get("BPC","BitsPerComponent")||8,i=n.length,g=new Int32Array(i);let x=!1;const m=(1<<d)-1;for(let A=0;A<i;A+=2)g[A]=(n[A+1]-n[A])*256|0,g[A+1]=n[A]*m|0,(g[A]!==256||g[A+1]!==0)&&(x=!0);x&&(r.decodeTransform=g)}if(this.params instanceof o.Dict){const d=this.params.get("ColorTransform");Number.isInteger(d)&&(r.colorTransform=d)}const l=new c.JpegImage(r);l.parse(this.bytes);const u=l.getData({width:this.drawWidth,height:this.drawHeight,forceRGB:this.forceRGB,isSourcePDF:!0});this.buffer=u,this.bufferLength=u.length,this.eof=!0}}f.JpegStream=e},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.JpegImage=void 0;var t=h(2),o=h(6);class c extends t.BaseException{constructor(O){super(`JPEG error: ${O}`,"JpegError")}}class s extends t.BaseException{constructor(O,T){super(O,"DNLMarkerError"),this.scanLines=T}}class e extends t.BaseException{constructor(O){super(O,"EOIMarkerError")}}const a=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),r=4017,n=799,l=3406,u=2276,d=1567,i=3784,g=5793,x=2896;function m(j,O){let T=0,R,y,p=16;for(;p>0&&!j[p-1];)p--;const P=[{children:[],index:0}];let E=P[0],S;for(R=0;R<p;R++){for(y=0;y<j[R];y++){for(E=P.pop(),E.children[E.index]=O[T];E.index>0;)E=P.pop();for(E.index++,P.push(E);P.length<=R;)P.push(S={children:[],index:0}),E.children[E.index]=S.children,E=S;T++}R+1<p&&(P.push(S={children:[],index:0}),E.children[E.index]=S.children,E=S)}return P[0].children}function A(j,O,T){return 64*((j.blocksPerLine+1)*O+T)}function k(j,O,T,R,y,p,P,E,S,F=!1){const C=T.mcusPerLine,b=T.progressive,D=O;let U=0,X=0;function G(){if(X>0)return X--,U>>X&1;if(U=j[O++],U===255){const ue=j[O++];if(ue){if(ue===220&&F){O+=2;const ye=(0,o.readUint16)(j,O);if(O+=2,ye>0&&ye!==T.scanLines)throw new s("Found DNL marker (0xFFDC) while parsing scan data",ye)}else if(ue===217){if(F){const ye=te*(T.precision===8?8:0);if(ye>0&&Math.round(T.scanLines/ye)>=10)throw new s("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",ye)}throw new e("Found EOI marker (0xFFD9) while parsing scan data")}throw new c(`unexpected marker ${(U<<8|ue).toString(16)}`)}}return X=7,U>>>7}function Y(ue){let ye=ue;for(;;){switch(ye=ye[G()],typeof ye){case"number":return ye;case"object":continue}throw new c("invalid huffman sequence")}}function N(ue){let ye=0;for(;ue>0;)ye=ye<<1|G(),ue--;return ye}function I(ue){if(ue===1)return G()===1?1:-1;const ye=N(ue);return ye>=1<<ue-1?ye:ye+(-1<<ue)+1}function L(ue,ye){const le=Y(ue.huffmanTableDC),he=le===0?0:I(le);ue.blockData[ye]=ue.pred+=he;let ce=1;for(;ce<64;){const Te=Y(ue.huffmanTableAC),Re=Te&15,He=Te>>4;if(Re===0){if(He<15)break;ce+=16;continue}ce+=He;const Ce=a[ce];ue.blockData[ye+Ce]=I(Re),ce++}}function $(ue,ye){const le=Y(ue.huffmanTableDC),he=le===0?0:I(le)<<S;ue.blockData[ye]=ue.pred+=he}function W(ue,ye){ue.blockData[ye]|=G()<<S}let z=0;function B(ue,ye){if(z>0){z--;return}let le=p;const he=P;for(;le<=he;){const ce=Y(ue.huffmanTableAC),Te=ce&15,Re=ce>>4;if(Te===0){if(Re<15){z=N(Re)+(1<<Re)-1;break}le+=16;continue}le+=Re;const He=a[le];ue.blockData[ye+He]=I(Te)*(1<<S),le++}}let H=0,q;function Z(ue,ye){let le=p;const he=P;let ce=0,Te,Re;for(;le<=he;){const He=ye+a[le],Ce=ue.blockData[He]<0?-1:1;switch(H){case 0:if(Re=Y(ue.huffmanTableAC),Te=Re&15,ce=Re>>4,Te===0)ce<15?(z=N(ce)+(1<<ce),H=4):(ce=16,H=1);else{if(Te!==1)throw new c("invalid ACn encoding");q=I(Te),H=ce?2:3}continue;case 1:case 2:ue.blockData[He]?ue.blockData[He]+=Ce*(G()<<S):(ce--,ce===0&&(H=H===2?3:0));break;case 3:ue.blockData[He]?ue.blockData[He]+=Ce*(G()<<S):(ue.blockData[He]=q<<S,H=0);break;case 4:ue.blockData[He]&&(ue.blockData[He]+=Ce*(G()<<S));break}le++}H===4&&(z--,z===0&&(H=0))}let te=0;function Q(ue,ye,le,he,ce){const Te=le/C|0,Re=le%C;te=Te*ue.v+he;const He=Re*ue.h+ce,Ce=A(ue,te,He);ye(ue,Ce)}function ee(ue,ye,le){te=le/ue.blocksPerLine|0;const he=le%ue.blocksPerLine,ce=A(ue,te,he);ye(ue,ce)}const J=R.length;let ne,re,ae,se,oe,me;b?p===0?me=E===0?$:W:me=E===0?B:Z:me=L;let xe=0,Ae,Se;J===1?Se=R[0].blocksPerLine*R[0].blocksPerColumn:Se=C*T.mcusPerColumn;let Fe,Pe;for(;xe<=Se;){const ue=y?Math.min(Se-xe,y):Se;if(ue>0){for(re=0;re<J;re++)R[re].pred=0;if(z=0,J===1)for(ne=R[0],oe=0;oe<ue;oe++)ee(ne,me,xe),xe++;else for(oe=0;oe<ue;oe++){for(re=0;re<J;re++)for(ne=R[re],Fe=ne.h,Pe=ne.v,ae=0;ae<Pe;ae++)for(se=0;se<Fe;se++)Q(ne,me,xe,ae,se);xe++}}if(X=0,Ae=K(j,O),!Ae)break;if(Ae.invalid){const ye=ue>0?"unexpected":"excessive";(0,t.warn)(`decodeScan - ${ye} MCU data, current marker is: ${Ae.invalid}`),O=Ae.offset}if(Ae.marker>=65488&&Ae.marker<=65495)O+=2;else break}return O-D}function v(j,O,T){const R=j.quantizationTable,y=j.blockData;let p,P,E,S,F,C,b,D,U,X,G,Y,N,I,L,$,W;if(!R)throw new c("missing required Quantization Table.");for(let z=0;z<64;z+=8){if(U=y[O+z],X=y[O+z+1],G=y[O+z+2],Y=y[O+z+3],N=y[O+z+4],I=y[O+z+5],L=y[O+z+6],$=y[O+z+7],U*=R[z],!(X|G|Y|N|I|L|$)){W=g*U+512>>10,T[z]=W,T[z+1]=W,T[z+2]=W,T[z+3]=W,T[z+4]=W,T[z+5]=W,T[z+6]=W,T[z+7]=W;continue}X*=R[z+1],G*=R[z+2],Y*=R[z+3],N*=R[z+4],I*=R[z+5],L*=R[z+6],$*=R[z+7],p=g*U+128>>8,P=g*N+128>>8,E=G,S=L,F=x*(X-$)+128>>8,D=x*(X+$)+128>>8,C=Y<<4,b=I<<4,p=p+P+1>>1,P=p-P,W=E*i+S*d+128>>8,E=E*d-S*i+128>>8,S=W,F=F+b+1>>1,b=F-b,D=D+C+1>>1,C=D-C,p=p+S+1>>1,S=p-S,P=P+E+1>>1,E=P-E,W=F*u+D*l+2048>>12,F=F*l-D*u+2048>>12,D=W,W=C*n+b*r+2048>>12,C=C*r-b*n+2048>>12,b=W,T[z]=p+D,T[z+7]=p-D,T[z+1]=P+b,T[z+6]=P-b,T[z+2]=E+C,T[z+5]=E-C,T[z+3]=S+F,T[z+4]=S-F}for(let z=0;z<8;++z){if(U=T[z],X=T[z+8],G=T[z+16],Y=T[z+24],N=T[z+32],I=T[z+40],L=T[z+48],$=T[z+56],!(X|G|Y|N|I|L|$)){W=g*U+8192>>14,W<-2040?W=0:W>=2024?W=255:W=W+2056>>4,y[O+z]=W,y[O+z+8]=W,y[O+z+16]=W,y[O+z+24]=W,y[O+z+32]=W,y[O+z+40]=W,y[O+z+48]=W,y[O+z+56]=W;continue}p=g*U+2048>>12,P=g*N+2048>>12,E=G,S=L,F=x*(X-$)+2048>>12,D=x*(X+$)+2048>>12,C=Y,b=I,p=(p+P+1>>1)+4112,P=p-P,W=E*i+S*d+2048>>12,E=E*d-S*i+2048>>12,S=W,F=F+b+1>>1,b=F-b,D=D+C+1>>1,C=D-C,p=p+S+1>>1,S=p-S,P=P+E+1>>1,E=P-E,W=F*u+D*l+2048>>12,F=F*l-D*u+2048>>12,D=W,W=C*n+b*r+2048>>12,C=C*r-b*n+2048>>12,b=W,U=p+D,$=p-D,X=P+b,L=P-b,G=E+C,I=E-C,Y=S+F,N=S-F,U<16?U=0:U>=4080?U=255:U>>=4,X<16?X=0:X>=4080?X=255:X>>=4,G<16?G=0:G>=4080?G=255:G>>=4,Y<16?Y=0:Y>=4080?Y=255:Y>>=4,N<16?N=0:N>=4080?N=255:N>>=4,I<16?I=0:I>=4080?I=255:I>>=4,L<16?L=0:L>=4080?L=255:L>>=4,$<16?$=0:$>=4080?$=255:$>>=4,y[O+z]=U,y[O+z+8]=X,y[O+z+16]=G,y[O+z+24]=Y,y[O+z+32]=N,y[O+z+40]=I,y[O+z+48]=L,y[O+z+56]=$}}function _(j,O){const T=O.blocksPerLine,R=O.blocksPerColumn,y=new Int16Array(64);for(let p=0;p<R;p++)for(let P=0;P<T;P++){const E=A(O,p,P);v(O,E,y)}return O.blockData}function K(j,O,T=O){const R=j.length-1;let y=T<O?T:O;if(O>=R)return null;const p=(0,o.readUint16)(j,O);if(p>=65472&&p<=65534)return{invalid:null,marker:p,offset:O};let P=(0,o.readUint16)(j,y);for(;!(P>=65472&&P<=65534);){if(++y>=R)return null;P=(0,o.readUint16)(j,y)}return{invalid:p.toString(16),marker:P,offset:y}}class M{constructor({decodeTransform:O=null,colorTransform:T=-1}={}){this._decodeTransform=O,this._colorTransform=T}parse(O,{dnlScanLines:T=null}={}){function R(){const G=(0,o.readUint16)(O,p);p+=2;let Y=p+G-2;const N=K(O,Y,p);N&&N.invalid&&((0,t.warn)("readDataBlock - incorrect length, current marker is: "+N.invalid),Y=N.offset);const I=O.subarray(p,Y);return p+=I.length,I}function y(G){const Y=Math.ceil(G.samplesPerLine/8/G.maxH),N=Math.ceil(G.scanLines/8/G.maxV);for(let I=0,L=G.components.length;I<L;I++){const $=G.components[I],W=Math.ceil(Math.ceil(G.samplesPerLine/8)*$.h/G.maxH),z=Math.ceil(Math.ceil(G.scanLines/8)*$.v/G.maxV),B=Y*$.h,q=64*(N*$.v)*(B+1);$.blockData=new Int16Array(q),$.blocksPerLine=W,$.blocksPerColumn=z}G.mcusPerLine=Y,G.mcusPerColumn=N}let p=0,P=null,E=null,S,F,C=0;const b=[],D=[],U=[];let X=(0,o.readUint16)(O,p);if(p+=2,X!==65496)throw new c("SOI not found");X=(0,o.readUint16)(O,p),p+=2;e:for(;X!==65497;){let G,Y,N;switch(X){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:const I=R();X===65504&&I[0]===74&&I[1]===70&&I[2]===73&&I[3]===70&&I[4]===0&&(P={version:{major:I[5],minor:I[6]},densityUnits:I[7],xDensity:I[8]<<8|I[9],yDensity:I[10]<<8|I[11],thumbWidth:I[12],thumbHeight:I[13],thumbData:I.subarray(14,14+3*I[12]*I[13])}),X===65518&&I[0]===65&&I[1]===100&&I[2]===111&&I[3]===98&&I[4]===101&&(E={version:I[5]<<8|I[6],flags0:I[7]<<8|I[8],flags1:I[9]<<8|I[10],transformCode:I[11]});break;case 65499:const L=(0,o.readUint16)(O,p);p+=2;const $=L+p-2;let W;for(;p<$;){const se=O[p++],oe=new Uint16Array(64);if(se>>4)if(se>>4===1)for(Y=0;Y<64;Y++)W=a[Y],oe[W]=(0,o.readUint16)(O,p),p+=2;else throw new c("DQT - invalid table spec");else for(Y=0;Y<64;Y++)W=a[Y],oe[W]=O[p++];b[se&15]=oe}break;case 65472:case 65473:case 65474:if(S)throw new c("Only single frame JPEGs supported");p+=2,S={},S.extended=X===65473,S.progressive=X===65474,S.precision=O[p++];const z=(0,o.readUint16)(O,p);p+=2,S.scanLines=T||z,S.samplesPerLine=(0,o.readUint16)(O,p),p+=2,S.components=[],S.componentIds={};const B=O[p++];let H=0,q=0;for(G=0;G<B;G++){const se=O[p],oe=O[p+1]>>4,me=O[p+1]&15;H<oe&&(H=oe),q<me&&(q=me);const xe=O[p+2];N=S.components.push({h:oe,v:me,quantizationId:xe,quantizationTable:null}),S.componentIds[se]=N-1,p+=3}S.maxH=H,S.maxV=q,y(S);break;case 65476:const Z=(0,o.readUint16)(O,p);for(p+=2,G=2;G<Z;){const se=O[p++],oe=new Uint8Array(16);let me=0;for(Y=0;Y<16;Y++,p++)me+=oe[Y]=O[p];const xe=new Uint8Array(me);for(Y=0;Y<me;Y++,p++)xe[Y]=O[p];G+=17+me,(se>>4?D:U)[se&15]=m(oe,xe)}break;case 65501:p+=2,F=(0,o.readUint16)(O,p),p+=2;break;case 65498:const te=++C===1&&!T;p+=2;const Q=O[p++],ee=[];for(G=0;G<Q;G++){const se=O[p++],oe=S.componentIds[se],me=S.components[oe];me.index=se;const xe=O[p++];me.huffmanTableDC=U[xe>>4],me.huffmanTableAC=D[xe&15],ee.push(me)}const J=O[p++],ne=O[p++],re=O[p++];try{const se=k(O,p,S,ee,F,J,ne,re>>4,re&15,te);p+=se}catch(se){if(se instanceof s)return(0,t.warn)(`${se.message} -- attempting to re-parse the JPEG image.`),this.parse(O,{dnlScanLines:se.scanLines});if(se instanceof e){(0,t.warn)(`${se.message} -- ignoring the rest of the image data.`);break e}throw se}break;case 65500:p+=4;break;case 65535:O[p]!==255&&p--;break;default:const ae=K(O,p-2,p-3);if(ae&&ae.invalid){(0,t.warn)("JpegImage.parse - unexpected data, current marker is: "+ae.invalid),p=ae.offset;break}if(!ae||p>=O.length-1){(0,t.warn)("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break e}throw new c("JpegImage.parse - unknown marker: "+X.toString(16))}X=(0,o.readUint16)(O,p),p+=2}this.width=S.samplesPerLine,this.height=S.scanLines,this.jfif=P,this.adobe=E,this.components=[];for(let G=0,Y=S.components.length;G<Y;G++){const N=S.components[G],I=b[N.quantizationId];I&&(N.quantizationTable=I),this.components.push({index:N.index,output:_(S,N),scaleX:N.h/S.maxH,scaleY:N.v/S.maxV,blocksPerLine:N.blocksPerLine,blocksPerColumn:N.blocksPerColumn})}this.numComponents=this.components.length}_getLinearizedBlockData(O,T,R=!1){const y=this.width/O,p=this.height/T;let P,E,S,F,C,b,D,U,X,G,Y=0,N;const I=this.components.length,L=O*T*I,$=new Uint8ClampedArray(L),W=new Uint32Array(O),z=4294967288;let B;for(D=0;D<I;D++){if(P=this.components[D],E=P.scaleX*y,S=P.scaleY*p,Y=D,N=P.output,F=P.blocksPerLine+1<<3,E!==B){for(C=0;C<O;C++)U=0|C*E,W[C]=(U&z)<<3|U&7;B=E}for(b=0;b<T;b++)for(U=0|b*S,G=F*(U&z)|(U&7)<<3,C=0;C<O;C++)$[Y]=N[G+W[C]],Y+=I}let H=this._decodeTransform;if(!R&&I===4&&!H&&(H=new Int32Array([-256,255,-256,255,-256,255,-256,255])),H)for(D=0;D<L;)for(U=0,X=0;U<I;U++,D++,X+=2)$[D]=($[D]*H[X]>>8)+H[X+1];return $}get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:this.numComponents===3?this._colorTransform===0?!1:!(this.components[0].index===82&&this.components[1].index===71&&this.components[2].index===66):this._colorTransform===1}_convertYccToRgb(O){let T,R,y;for(let p=0,P=O.length;p<P;p+=3)T=O[p],R=O[p+1],y=O[p+2],O[p]=T-179.456+1.402*y,O[p+1]=T+135.459-.344*R-.714*y,O[p+2]=T-226.816+1.772*R;return O}_convertYcckToRgb(O){let T,R,y,p,P=0;for(let E=0,S=O.length;E<S;E+=4)T=O[E],R=O[E+1],y=O[E+2],p=O[E+3],O[P++]=-122.67195406894+R*(-660635669420364e-19*R+.000437130475926232*y-54080610064599e-18*T+.00048449797120281*p-.154362151871126)+y*(-.000957964378445773*y+.000817076911346625*T-.00477271405408747*p+1.53380253221734)+T*(.000961250184130688*T-.00266257332283933*p+.48357088451265)+p*(-.000336197177618394*p+.484791561490776),O[P++]=107.268039397724+R*(219927104525741e-19*R-.000640992018297945*y+.000659397001245577*T+.000426105652938837*p-.176491792462875)+y*(-.000778269941513683*y+.00130872261408275*T+.000770482631801132*p-.151051492775562)+T*(.00126935368114843*T-.00265090189010898*p+.25802910206845)+p*(-.000318913117588328*p-.213742400323665),O[P++]=-20.810012546947+R*(-.000570115196973677*R-263409051004589e-19*y+.0020741088115012*T-.00288260236853442*p+.814272968359295)+y*(-153496057440975e-19*y-.000132689043961446*T+.000560833691242812*p-.195152027534049)+T*(.00174418132927582*T-.00255243321439347*p+.116935020465145)+p*(-.000343531996510555*p+.24165260232407);return O.subarray(0,P)}_convertYcckToCmyk(O){let T,R,y;for(let p=0,P=O.length;p<P;p+=4)T=O[p],R=O[p+1],y=O[p+2],O[p]=434.456-T-1.402*y,O[p+1]=119.541-T+.344*R+.714*y,O[p+2]=481.816-T-1.772*R;return O}_convertCmykToRgb(O){let T,R,y,p,P=0;for(let E=0,S=O.length;E<S;E+=4)T=O[E],R=O[E+1],y=O[E+2],p=O[E+3],O[P++]=255+T*(-6747147073602441e-20*T+.0008379262121013727*R+.0002894718188643294*y+.003264231057537806*p-1.1185611867203937)+R*(26374107616089405e-21*R-8626949158638572e-20*y-.0002748769067499491*p-.02155688794978967)+y*(-3878099212869363e-20*y-.0003267808279485286*p+.0686742238595345)-p*(.0003361971776183937*p+.7430659151342254),O[P++]=255+T*(.00013596372813588848*T+.000924537132573585*R+.00010567359618683593*y+.0004791864687436512*p-.3109689587515875)+R*(-.00023545346108370344*R+.0002702845253534714*y+.0020200308977307156*p-.7488052167015494)+y*(6834815998235662e-20*y+.00015168452363460973*p-.09751927774728933)-p*(.0003189131175883281*p+.7364883807733168),O[P++]=255+T*(13598650411385307e-21*T+.00012423956175490851*R+.0004751985097583589*y-36729317476630422e-22*p-.05562186980264034)+R*(.00016141380598724676*R+.0009692239130725186*y+.0007782692450036253*p-.44015232367526463)+y*(5068882914068769e-22*y+.0017778369011375071*p-.7591454649749609)-p*(.0003435319965105553*p+.7063770186160144);return O.subarray(0,P)}getData({width:O,height:T,forceRGB:R=!1,isSourcePDF:y=!1}){if(this.numComponents>4)throw new c("Unsupported color mode");const p=this._getLinearizedBlockData(O,T,y);if(this.numComponents===1&&R){const P=p.length,E=new Uint8ClampedArray(P*3);let S=0;for(let F=0;F<P;F++){const C=p[F];E[S++]=C,E[S++]=C,E[S++]=C}return E}else{if(this.numComponents===3&&this._isColorConversionNeeded)return this._convertYccToRgb(p);if(this.numComponents===4){if(this._isColorConversionNeeded)return R?this._convertYcckToRgb(p):this._convertYcckToCmyk(p);if(R)return this._convertCmykToRgb(p)}}return p}}f.JpegImage=M},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.JpxStream=void 0;var t=h(19),o=h(30),c=h(2);class s extends t.DecodeStream{constructor(a,r,n){super(r),this.stream=a,this.dict=a.dict,this.maybeLength=r,this.params=n}get bytes(){return(0,c.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(a){}readBlock(){if(this.eof)return;const a=new o.JpxImage;a.parse(this.bytes);const r=a.width,n=a.height,l=a.componentsCount,u=a.tiles.length;if(u===1)this.buffer=a.tiles[0].items;else{const d=new Uint8ClampedArray(r*n*l);for(let i=0;i<u;i++){const g=a.tiles[i],x=g.width,m=g.height,A=g.left,k=g.top,v=g.items;let _=0,K=(r*k+A)*l;const M=r*l,j=x*l;for(let O=0;O<m;O++){const T=v.subarray(_,_+j);d.set(T,K),_+=j,K+=M}}this.buffer=d}this.bufferLength=this.buffer.length,this.eof=!0}}f.JpxStream=s},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.JpxImage=void 0;var t=h(2),o=h(6),c=h(26);class s extends t.BaseException{constructor(b){super(`JPX error: ${b}`,"JpxError")}}const e={LL:0,LH:1,HL:1,HH:2};class a{constructor(){this.failOnCorruptedImage=!1}parse(b){if((0,o.readUint16)(b,0)===65359){this.parseCodestream(b,0,b.length);return}const U=b.length;let X=0;for(;X<U;){let G=8,Y=(0,o.readUint32)(b,X);const N=(0,o.readUint32)(b,X+4);if(X+=G,Y===1&&(Y=(0,o.readUint32)(b,X)*4294967296+(0,o.readUint32)(b,X+4),X+=8,G+=8),Y===0&&(Y=U-X+G),Y<G)throw new s("Invalid box field size");const I=Y-G;let L=!0;switch(N){case 1785737832:L=!1;break;case 1668246642:const $=b[X];if($===1){const z=(0,o.readUint32)(b,X+3);switch(z){case 16:case 17:case 18:break;default:(0,t.warn)("Unknown colorspace "+z);break}}else $===2&&(0,t.info)("ICC profile not supported");break;case 1785737827:this.parseCodestream(b,X,X+I);break;case 1783636e3:(0,o.readUint32)(b,X)!==218793738&&(0,t.warn)("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:const W=String.fromCharCode(N>>24&255,N>>16&255,N>>8&255,N&255);(0,t.warn)(`Unsupported header type ${N} (${W}).`);break}L&&(X+=I)}}parseImageProperties(b){let D=b.getByte();for(;D>=0;){const U=D;if(D=b.getByte(),(U<<8|D)===65361){b.skip(4);const G=b.getInt32()>>>0,Y=b.getInt32()>>>0,N=b.getInt32()>>>0,I=b.getInt32()>>>0;b.skip(16);const L=b.getUint16();this.width=G-N,this.height=Y-I,this.componentsCount=L,this.bitsPerComponent=8;return}}throw new s("No size marker found in JPX stream")}parseCodestream(b,D,U){const X={};let G=!1;try{let Y=D;for(;Y+1<U;){const N=(0,o.readUint16)(b,Y);Y+=2;let I=0,L,$,W,z,B,H;switch(N){case 65359:X.mainHeader=!0;break;case 65497:break;case 65361:I=(0,o.readUint16)(b,Y);const q={};q.Xsiz=(0,o.readUint32)(b,Y+4),q.Ysiz=(0,o.readUint32)(b,Y+8),q.XOsiz=(0,o.readUint32)(b,Y+12),q.YOsiz=(0,o.readUint32)(b,Y+16),q.XTsiz=(0,o.readUint32)(b,Y+20),q.YTsiz=(0,o.readUint32)(b,Y+24),q.XTOsiz=(0,o.readUint32)(b,Y+28),q.YTOsiz=(0,o.readUint32)(b,Y+32);const Z=(0,o.readUint16)(b,Y+36);q.Csiz=Z;const te=[];L=Y+38;for(let oe=0;oe<Z;oe++){const me={precision:(b[L]&127)+1,isSigned:!!(b[L]&128),XRsiz:b[L+1],YRsiz:b[L+2]};L+=3,r(me,q),te.push(me)}X.SIZ=q,X.components=te,n(X,te),X.QCC=[],X.COC=[];break;case 65372:I=(0,o.readUint16)(b,Y);const Q={};switch(L=Y+2,$=b[L++],$&31){case 0:z=8,B=!0;break;case 1:z=16,B=!1;break;case 2:z=16,B=!0;break;default:throw new Error("Invalid SQcd value "+$)}for(Q.noQuantization=z===8,Q.scalarExpounded=B,Q.guardBits=$>>5,W=[];L<I+Y;){const oe={};z===8?(oe.epsilon=b[L++]>>3,oe.mu=0):(oe.epsilon=b[L]>>3,oe.mu=(b[L]&7)<<8|b[L+1],L+=2),W.push(oe)}Q.SPqcds=W,X.mainHeader?X.QCD=Q:(X.currentTile.QCD=Q,X.currentTile.QCC=[]);break;case 65373:I=(0,o.readUint16)(b,Y);const ee={};L=Y+2;let J;switch(X.SIZ.Csiz<257?J=b[L++]:(J=(0,o.readUint16)(b,L),L+=2),$=b[L++],$&31){case 0:z=8,B=!0;break;case 1:z=16,B=!1;break;case 2:z=16,B=!0;break;default:throw new Error("Invalid SQcd value "+$)}for(ee.noQuantization=z===8,ee.scalarExpounded=B,ee.guardBits=$>>5,W=[];L<I+Y;){const oe={};z===8?(oe.epsilon=b[L++]>>3,oe.mu=0):(oe.epsilon=b[L]>>3,oe.mu=(b[L]&7)<<8|b[L+1],L+=2),W.push(oe)}ee.SPqcds=W,X.mainHeader?X.QCC[J]=ee:X.currentTile.QCC[J]=ee;break;case 65362:I=(0,o.readUint16)(b,Y);const ne={};L=Y+2;const re=b[L++];ne.entropyCoderWithCustomPrecincts=!!(re&1),ne.sopMarkerUsed=!!(re&2),ne.ephMarkerUsed=!!(re&4),ne.progressionOrder=b[L++],ne.layersCount=(0,o.readUint16)(b,L),L+=2,ne.multipleComponentTransform=b[L++],ne.decompositionLevelsCount=b[L++],ne.xcb=(b[L++]&15)+2,ne.ycb=(b[L++]&15)+2;const ae=b[L++];if(ne.selectiveArithmeticCodingBypass=!!(ae&1),ne.resetContextProbabilities=!!(ae&2),ne.terminationOnEachCodingPass=!!(ae&4),ne.verticallyStripe=!!(ae&8),ne.predictableTermination=!!(ae&16),ne.segmentationSymbolUsed=!!(ae&32),ne.reversibleTransformation=b[L++],ne.entropyCoderWithCustomPrecincts){const oe=[];for(;L<I+Y;){const me=b[L++];oe.push({PPx:me&15,PPy:me>>4})}ne.precinctsSizes=oe}const se=[];ne.selectiveArithmeticCodingBypass&&se.push("selectiveArithmeticCodingBypass"),ne.terminationOnEachCodingPass&&se.push("terminationOnEachCodingPass"),ne.verticallyStripe&&se.push("verticallyStripe"),ne.predictableTermination&&se.push("predictableTermination"),se.length>0&&(G=!0,(0,t.warn)(`JPX: Unsupported COD options (${se.join(", ")}).`)),X.mainHeader?X.COD=ne:(X.currentTile.COD=ne,X.currentTile.COC=[]);break;case 65424:I=(0,o.readUint16)(b,Y),H={},H.index=(0,o.readUint16)(b,Y+2),H.length=(0,o.readUint32)(b,Y+4),H.dataEnd=H.length+Y-2,H.partIndex=b[Y+8],H.partsCount=b[Y+9],X.mainHeader=!1,H.partIndex===0&&(H.COD=X.COD,H.COC=X.COC.slice(0),H.QCD=X.QCD,H.QCC=X.QCC.slice(0)),X.currentTile=H;break;case 65427:H=X.currentTile,H.partIndex===0&&(R(X,H.index),K(X)),I=H.dataEnd-Y,M(X,b,Y,I);break;case 65363:(0,t.warn)("JPX: Codestream code 0xFF53 (COC) is not implemented.");case 65365:case 65367:case 65368:case 65380:I=(0,o.readUint16)(b,Y);break;default:throw new Error("Unknown codestream code: "+N.toString(16))}Y+=I}}catch(Y){if(G||this.failOnCorruptedImage)throw new s(Y.message);(0,t.warn)(`JPX: Trying to recover from: "${Y.message}".`)}this.tiles=T(X),this.width=X.SIZ.Xsiz-X.SIZ.XOsiz,this.height=X.SIZ.Ysiz-X.SIZ.YOsiz,this.componentsCount=X.SIZ.Csiz}}f.JpxImage=a;function r(C,b){C.x0=Math.ceil(b.XOsiz/C.XRsiz),C.x1=Math.ceil(b.Xsiz/C.XRsiz),C.y0=Math.ceil(b.YOsiz/C.YRsiz),C.y1=Math.ceil(b.Ysiz/C.YRsiz),C.width=C.x1-C.x0,C.height=C.y1-C.y0}function n(C,b){const D=C.SIZ,U=[];let X;const G=Math.ceil((D.Xsiz-D.XTOsiz)/D.XTsiz),Y=Math.ceil((D.Ysiz-D.YTOsiz)/D.YTsiz);for(let I=0;I<Y;I++)for(let L=0;L<G;L++)X={},X.tx0=Math.max(D.XTOsiz+L*D.XTsiz,D.XOsiz),X.ty0=Math.max(D.YTOsiz+I*D.YTsiz,D.YOsiz),X.tx1=Math.min(D.XTOsiz+(L+1)*D.XTsiz,D.Xsiz),X.ty1=Math.min(D.YTOsiz+(I+1)*D.YTsiz,D.Ysiz),X.width=X.tx1-X.tx0,X.height=X.ty1-X.ty0,X.components=[],U.push(X);C.tiles=U;const N=D.Csiz;for(let I=0,L=N;I<L;I++){const $=b[I];for(let W=0,z=U.length;W<z;W++){const B={};X=U[W],B.tcx0=Math.ceil(X.tx0/$.XRsiz),B.tcy0=Math.ceil(X.ty0/$.YRsiz),B.tcx1=Math.ceil(X.tx1/$.XRsiz),B.tcy1=Math.ceil(X.ty1/$.YRsiz),B.width=B.tcx1-B.tcx0,B.height=B.tcy1-B.tcy0,X.components[I]=B}}}function l(C,b,D){const U=b.codingStyleParameters,X={};return U.entropyCoderWithCustomPrecincts?(X.PPx=U.precinctsSizes[D].PPx,X.PPy=U.precinctsSizes[D].PPy):(X.PPx=15,X.PPy=15),X.xcb_=D>0?Math.min(U.xcb,X.PPx-1):Math.min(U.xcb,X.PPx),X.ycb_=D>0?Math.min(U.ycb,X.PPy-1):Math.min(U.ycb,X.PPy),X}function u(C,b,D){const U=1<<D.PPx,X=1<<D.PPy,G=b.resLevel===0,Y=1<<D.PPx+(G?0:-1),N=1<<D.PPy+(G?0:-1),I=b.trx1>b.trx0?Math.ceil(b.trx1/U)-Math.floor(b.trx0/U):0,L=b.try1>b.try0?Math.ceil(b.try1/X)-Math.floor(b.try0/X):0,$=I*L;b.precinctParameters={precinctWidth:U,precinctHeight:X,numprecinctswide:I,numprecinctshigh:L,numprecincts:$,precinctWidthInSubband:Y,precinctHeightInSubband:N}}function d(C,b,D){const U=D.xcb_,X=D.ycb_,G=1<<U,Y=1<<X,N=b.tbx0>>U,I=b.tby0>>X,L=b.tbx1+G-1>>U,$=b.tby1+Y-1>>X,W=b.resolution.precinctParameters,z=[],B=[];let H,q,Z,te;for(q=I;q<$;q++)for(H=N;H<L;H++){Z={cbx:H,cby:q,tbx0:G*H,tby0:Y*q,tbx1:G*(H+1),tby1:Y*(q+1)},Z.tbx0_=Math.max(b.tbx0,Z.tbx0),Z.tby0_=Math.max(b.tby0,Z.tby0),Z.tbx1_=Math.min(b.tbx1,Z.tbx1),Z.tby1_=Math.min(b.tby1,Z.tby1);const Q=Math.floor((Z.tbx0_-b.tbx0)/W.precinctWidthInSubband),ee=Math.floor((Z.tby0_-b.tby0)/W.precinctHeightInSubband);if(te=Q+ee*W.numprecinctswide,Z.precinctNumber=te,Z.subbandType=b.type,Z.Lblock=3,Z.tbx1_<=Z.tbx0_||Z.tby1_<=Z.tby0_)continue;z.push(Z);let J=B[te];J!==void 0?(H<J.cbxMin?J.cbxMin=H:H>J.cbxMax&&(J.cbxMax=H),q<J.cbyMin?J.cbxMin=q:q>J.cbyMax&&(J.cbyMax=q)):B[te]=J={cbxMin:H,cbyMin:q,cbxMax:H,cbyMax:q},Z.precinct=J}b.codeblockParameters={codeblockWidth:U,codeblockHeight:X,numcodeblockwide:L-N+1,numcodeblockhigh:$-I+1},b.codeblocks=z,b.precincts=B}function i(C,b,D){const U=[],X=C.subbands;for(let G=0,Y=X.length;G<Y;G++){const I=X[G].codeblocks;for(let L=0,$=I.length;L<$;L++){const W=I[L];W.precinctNumber===b&&U.push(W)}}return{layerNumber:D,codeblocks:U}}function g(C){const b=C.SIZ,D=C.currentTile.index,U=C.tiles[D],X=U.codingStyleDefaultParameters.layersCount,G=b.Csiz;let Y=0;for(let W=0;W<G;W++)Y=Math.max(Y,U.components[W].codingStyleParameters.decompositionLevelsCount);let N=0,I=0,L=0,$=0;this.nextPacket=function(){for(;N<X;N++){for(;I<=Y;I++){for(;L<G;L++){const z=U.components[L];if(I>z.codingStyleParameters.decompositionLevelsCount)continue;const B=z.resolutions[I],H=B.precinctParameters.numprecincts;for(;$<H;){const q=i(B,$,N);return $++,q}$=0}L=0}I=0}throw new s("Out of packets")}}function x(C){const b=C.SIZ,D=C.currentTile.index,U=C.tiles[D],X=U.codingStyleDefaultParameters.layersCount,G=b.Csiz;let Y=0;for(let W=0;W<G;W++)Y=Math.max(Y,U.components[W].codingStyleParameters.decompositionLevelsCount);let N=0,I=0,L=0,$=0;this.nextPacket=function(){for(;N<=Y;N++){for(;I<X;I++){for(;L<G;L++){const z=U.components[L];if(N>z.codingStyleParameters.decompositionLevelsCount)continue;const B=z.resolutions[N],H=B.precinctParameters.numprecincts;for(;$<H;){const q=i(B,$,I);return $++,q}$=0}L=0}I=0}throw new s("Out of packets")}}function m(C){const b=C.SIZ,D=C.currentTile.index,U=C.tiles[D],X=U.codingStyleDefaultParameters.layersCount,G=b.Csiz;let Y,N,I,L,$=0;for(I=0;I<G;I++){const z=U.components[I];$=Math.max($,z.codingStyleParameters.decompositionLevelsCount)}const W=new Int32Array($+1);for(N=0;N<=$;++N){let z=0;for(I=0;I<G;++I){const B=U.components[I].resolutions;N<B.length&&(z=Math.max(z,B[N].precinctParameters.numprecincts))}W[N]=z}Y=0,N=0,I=0,L=0,this.nextPacket=function(){for(;N<=$;N++){for(;L<W[N];L++){for(;I<G;I++){const B=U.components[I];if(N>B.codingStyleParameters.decompositionLevelsCount)continue;const H=B.resolutions[N],q=H.precinctParameters.numprecincts;if(!(L>=q)){for(;Y<X;){const Z=i(H,L,Y);return Y++,Z}Y=0}}I=0}L=0}throw new s("Out of packets")}}function A(C){const b=C.SIZ,D=C.currentTile.index,U=C.tiles[D],X=U.codingStyleDefaultParameters.layersCount,G=b.Csiz,Y=_(U),N=Y;let I=0,L=0,$=0,W=0,z=0;this.nextPacket=function(){for(;z<N.maxNumHigh;z++){for(;W<N.maxNumWide;W++){for(;$<G;$++){const H=U.components[$],q=H.codingStyleParameters.decompositionLevelsCount;for(;L<=q;L++){const Z=H.resolutions[L],te=Y.components[$].resolutions[L],Q=v(W,z,te,N,Z);if(Q!==null){for(;I<X;){const ee=i(Z,Q,I);return I++,ee}I=0}}L=0}$=0}W=0}throw new s("Out of packets")}}function k(C){const b=C.SIZ,D=C.currentTile.index,U=C.tiles[D],X=U.codingStyleDefaultParameters.layersCount,G=b.Csiz,Y=_(U);let N=0,I=0,L=0,$=0,W=0;this.nextPacket=function(){for(;L<G;++L){const B=U.components[L],H=Y.components[L],q=B.codingStyleParameters.decompositionLevelsCount;for(;W<H.maxNumHigh;W++){for(;$<H.maxNumWide;$++){for(;I<=q;I++){const Z=B.resolutions[I],te=H.resolutions[I],Q=v($,W,te,H,Z);if(Q!==null){for(;N<X;){const ee=i(Z,Q,N);return N++,ee}N=0}}I=0}$=0}W=0}throw new s("Out of packets")}}function v(C,b,D,U,X){const G=C*U.minWidth,Y=b*U.minHeight;if(G%D.width!==0||Y%D.height!==0)return null;const N=Y/D.width*X.precinctParameters.numprecinctswide;return G/D.height+N}function _(C){const b=C.components.length;let D=Number.MAX_VALUE,U=Number.MAX_VALUE,X=0,G=0;const Y=new Array(b);for(let N=0;N<b;N++){const I=C.components[N],L=I.codingStyleParameters.decompositionLevelsCount,$=new Array(L+1);let W=Number.MAX_VALUE,z=Number.MAX_VALUE,B=0,H=0,q=1;for(let Z=L;Z>=0;--Z){const te=I.resolutions[Z],Q=q*te.precinctParameters.precinctWidth,ee=q*te.precinctParameters.precinctHeight;W=Math.min(W,Q),z=Math.min(z,ee),B=Math.max(B,te.precinctParameters.numprecinctswide),H=Math.max(H,te.precinctParameters.numprecinctshigh),$[Z]={width:Q,height:ee},q<<=1}D=Math.min(D,W),U=Math.min(U,z),X=Math.max(X,B),G=Math.max(G,H),Y[N]={resolutions:$,minWidth:W,minHeight:z,maxNumWide:B,maxNumHigh:H}}return{components:Y,minWidth:D,minHeight:U,maxNumWide:X,maxNumHigh:G}}function K(C){const b=C.SIZ,D=C.currentTile.index,U=C.tiles[D],X=b.Csiz;for(let Y=0;Y<X;Y++){const N=U.components[Y],I=N.codingStyleParameters.decompositionLevelsCount,L=[],$=[];for(let W=0;W<=I;W++){const z=l(C,N,W),B={},H=1<<I-W;B.trx0=Math.ceil(N.tcx0/H),B.try0=Math.ceil(N.tcy0/H),B.trx1=Math.ceil(N.tcx1/H),B.try1=Math.ceil(N.tcy1/H),B.resLevel=W,u(C,B,z),L.push(B);let q;if(W===0)q={},q.type="LL",q.tbx0=Math.ceil(N.tcx0/H),q.tby0=Math.ceil(N.tcy0/H),q.tbx1=Math.ceil(N.tcx1/H),q.tby1=Math.ceil(N.tcy1/H),q.resolution=B,d(C,q,z),$.push(q),B.subbands=[q];else{const Z=1<<I-W+1,te=[];q={},q.type="HL",q.tbx0=Math.ceil(N.tcx0/Z-.5),q.tby0=Math.ceil(N.tcy0/Z),q.tbx1=Math.ceil(N.tcx1/Z-.5),q.tby1=Math.ceil(N.tcy1/Z),q.resolution=B,d(C,q,z),$.push(q),te.push(q),q={},q.type="LH",q.tbx0=Math.ceil(N.tcx0/Z),q.tby0=Math.ceil(N.tcy0/Z-.5),q.tbx1=Math.ceil(N.tcx1/Z),q.tby1=Math.ceil(N.tcy1/Z-.5),q.resolution=B,d(C,q,z),$.push(q),te.push(q),q={},q.type="HH",q.tbx0=Math.ceil(N.tcx0/Z-.5),q.tby0=Math.ceil(N.tcy0/Z-.5),q.tbx1=Math.ceil(N.tcx1/Z-.5),q.tby1=Math.ceil(N.tcy1/Z-.5),q.resolution=B,d(C,q,z),$.push(q),te.push(q),B.subbands=te}}N.resolutions=L,N.subbands=$}const G=U.codingStyleDefaultParameters.progressionOrder;switch(G){case 0:U.packetsIterator=new g(C);break;case 1:U.packetsIterator=new x(C);break;case 2:U.packetsIterator=new m(C);break;case 3:U.packetsIterator=new A(C);break;case 4:U.packetsIterator=new k(C);break;default:throw new s(`Unsupported progression order ${G}`)}}function M(C,b,D,U){let X=0,G,Y=0,N=!1;function I(Q){for(;Y<Q;){const ee=b[D+X];X++,N?(G=G<<7|ee,Y+=7,N=!1):(G=G<<8|ee,Y+=8),ee===255&&(N=!0)}return Y-=Q,G>>>Y&(1<<Q)-1}function L(Q){return b[D+X-1]===255&&b[D+X]===Q?($(1),!0):b[D+X]===255&&b[D+X+1]===Q?($(2),!0):!1}function $(Q){X+=Q}function W(){Y=0,N&&(X++,N=!1)}function z(){if(I(1)===0)return 1;if(I(1)===0)return 2;let Q=I(2);return Q<3?Q+3:(Q=I(5),Q<31?Q+6:(Q=I(7),Q+37))}const B=C.currentTile.index,H=C.tiles[B],q=C.COD.sopMarkerUsed,Z=C.COD.ephMarkerUsed,te=H.packetsIterator;for(;X<U;){W(),q&&L(145)&&$(4);const Q=te.nextPacket();if(!I(1))continue;const ee=Q.layerNumber,J=[];let ne;for(let re=0,ae=Q.codeblocks.length;re<ae;re++){ne=Q.codeblocks[re];let se=ne.precinct;const oe=ne.cbx-se.cbxMin,me=ne.cby-se.cbyMin;let xe=!1,Ae=!1,Se,Fe;if(ne.included!==void 0)xe=!!I(1);else{se=ne.precinct;let he;if(se.inclusionTree!==void 0)he=se.inclusionTree;else{const ce=se.cbxMax-se.cbxMin+1,Te=se.cbyMax-se.cbyMin+1;he=new p(ce,Te,ee),Fe=new y(ce,Te),se.inclusionTree=he,se.zeroBitPlanesTree=Fe;for(let Re=0;Re<ee;Re++)if(I(1)!==0)throw new s("Invalid tag tree")}if(he.reset(oe,me,ee))for(;;)if(I(1)){if(Se=!he.nextLevel(),Se){ne.included=!0,xe=Ae=!0;break}}else{he.incrementValue(ee);break}}if(!xe)continue;if(Ae){for(Fe=se.zeroBitPlanesTree,Fe.reset(oe,me);;)if(I(1)){if(Se=!Fe.nextLevel(),Se)break}else Fe.incrementValue();ne.zeroBitPlanes=Fe.value}const Pe=z();for(;I(1);)ne.Lblock++;const ue=(0,o.log2)(Pe),ye=(Pe<1<<ue?ue-1:ue)+ne.Lblock,le=I(ye);J.push({codeblock:ne,codingpasses:Pe,dataLength:le})}for(W(),Z&&L(146);J.length>0;){const re=J.shift();ne=re.codeblock,ne.data===void 0&&(ne.data=[]),ne.data.push({data:b,start:D+X,end:D+X+re.dataLength,codingpasses:re.codingpasses}),X+=re.dataLength}}return X}function j(C,b,D,U,X,G,Y,N,I){const L=U.tbx0,$=U.tby0,W=U.tbx1-U.tbx0,z=U.codeblocks,B=U.type.charAt(0)==="H"?1:0,H=U.type.charAt(1)==="H"?b:0;for(let q=0,Z=z.length;q<Z;++q){const te=z[q],Q=te.tbx1_-te.tbx0_,ee=te.tby1_-te.tby0_;if(Q===0||ee===0||te.data===void 0)continue;const J=new P(Q,ee,te.subbandType,te.zeroBitPlanes,G);let ne=2;const re=te.data;let ae=0,se=0,oe,me,xe;for(oe=0,me=re.length;oe<me;oe++)xe=re[oe],ae+=xe.end-xe.start,se+=xe.codingpasses;const Ae=new Uint8Array(ae);let Se=0;for(oe=0,me=re.length;oe<me;oe++){xe=re[oe];const Ce=xe.data.subarray(xe.start,xe.end);Ae.set(Ce,Se),Se+=Ce.length}const Fe=new c.ArithmeticDecoder(Ae,0,ae);for(J.setDecoder(Fe),oe=0;oe<se;oe++){switch(ne){case 0:J.runSignificancePropagationPass();break;case 1:J.runMagnitudeRefinementPass();break;case 2:J.runCleanupPass(),N&&J.checkSegmentationSymbol();break}I&&J.reset(),ne=(ne+1)%3}let Pe=te.tbx0_-L+(te.tby0_-$)*W;const ue=J.coefficentsSign,ye=J.coefficentsMagnitude,le=J.bitsDecoded,he=Y?0:.5;let ce,Te,Re;Se=0;const He=U.type!=="LL";for(oe=0;oe<ee;oe++){const ve=2*(Pe/W|0)*(b-W)+B+H;for(ce=0;ce<Q;ce++){if(Te=ye[Se],Te!==0){Te=(Te+he)*X,ue[Se]!==0&&(Te=-Te),Re=le[Se];const fe=He?ve+(Pe<<1):Pe;Y&&Re>=G?C[fe]=Te:C[fe]=Te*(1<<G-Re)}Pe++,Se++}Pe+=W-Q}}}function O(C,b,D){const U=b.components[D],X=U.codingStyleParameters,G=U.quantizationParameters,Y=X.decompositionLevelsCount,N=G.SPqcds,I=G.scalarExpounded,L=G.guardBits,$=X.segmentationSymbolUsed,W=X.resetContextProbabilities,z=C.components[D].precision,B=X.reversibleTransformation,H=B?new F:new S,q=[];let Z=0;for(let Q=0;Q<=Y;Q++){const ee=U.resolutions[Q],J=ee.trx1-ee.trx0,ne=ee.try1-ee.try0,re=new Float32Array(J*ne);for(let ae=0,se=ee.subbands.length;ae<se;ae++){let oe,me;I?(oe=N[Z].mu,me=N[Z].epsilon,Z++):(oe=N[0].mu,me=N[0].epsilon+(Q>0?1-Q:0));const xe=ee.subbands[ae],Ae=e[xe.type],Se=B?1:2**(z+Ae-me)*(1+oe/2048),Fe=L+me-1;j(re,J,ne,xe,Se,Fe,B,$,W)}q.push({width:J,height:ne,items:re})}const te=H.calculate(q,U.tcx0,U.tcy0);return{left:U.tcx0,top:U.tcy0,width:te.width,height:te.height,items:te.items}}function T(C){const b=C.SIZ,D=C.components,U=b.Csiz,X=[];for(let G=0,Y=C.tiles.length;G<Y;G++){const N=C.tiles[G],I=[];for(let J=0;J<U;J++)I[J]=O(C,N,J);const L=I[0],$=new Uint8ClampedArray(L.items.length*U),W={left:L.left,top:L.top,width:L.width,height:L.height,items:$};let z,B,H=0,q,Z,te,Q,ee;if(N.codingStyleDefaultParameters.multipleComponentTransform){const J=U===4,ne=I[0].items,re=I[1].items,ae=I[2].items,se=J?I[3].items:null;z=D[0].precision-8,B=(128<<z)+.5;const oe=N.components[0],me=U-3;if(Z=ne.length,oe.codingStyleParameters.reversibleTransformation)for(q=0;q<Z;q++,H+=me){te=ne[q]+B,Q=re[q],ee=ae[q];const xe=te-(ee+Q>>2);$[H++]=xe+ee>>z,$[H++]=xe>>z,$[H++]=xe+Q>>z}else for(q=0;q<Z;q++,H+=me)te=ne[q]+B,Q=re[q],ee=ae[q],$[H++]=te+1.402*ee>>z,$[H++]=te-.34413*Q-.71414*ee>>z,$[H++]=te+1.772*Q>>z;if(J)for(q=0,H=3;q<Z;q++,H+=4)$[H]=se[q]+B>>z}else for(let J=0;J<U;J++){const ne=I[J].items;for(z=D[J].precision-8,B=(128<<z)+.5,H=J,q=0,Z=ne.length;q<Z;q++)$[H]=ne[q]+B>>z,H+=U}X.push(W)}return X}function R(C,b){const U=C.SIZ.Csiz,X=C.tiles[b];for(let G=0;G<U;G++){const Y=X.components[G],N=C.currentTile.QCC[G]!==void 0?C.currentTile.QCC[G]:C.currentTile.QCD;Y.quantizationParameters=N;const I=C.currentTile.COC[G]!==void 0?C.currentTile.COC[G]:C.currentTile.COD;Y.codingStyleParameters=I}X.codingStyleDefaultParameters=C.currentTile.COD}class y{constructor(b,D){const U=(0,o.log2)(Math.max(b,D))+1;this.levels=[];for(let X=0;X<U;X++){const G={width:b,height:D,items:[]};this.levels.push(G),b=Math.ceil(b/2),D=Math.ceil(D/2)}}reset(b,D){let U=0,X=0,G;for(;U<this.levels.length;){G=this.levels[U];const Y=b+D*G.width;if(G.items[Y]!==void 0){X=G.items[Y];break}G.index=Y,b>>=1,D>>=1,U++}U--,G=this.levels[U],G.items[G.index]=X,this.currentLevel=U,delete this.value}incrementValue(){const b=this.levels[this.currentLevel];b.items[b.index]++}nextLevel(){let b=this.currentLevel,D=this.levels[b];const U=D.items[D.index];return b--,b<0?(this.value=U,!1):(this.currentLevel=b,D=this.levels[b],D.items[D.index]=U,!0)}}class p{constructor(b,D,U){const X=(0,o.log2)(Math.max(b,D))+1;this.levels=[];for(let G=0;G<X;G++){const Y=new Uint8Array(b*D);for(let I=0,L=Y.length;I<L;I++)Y[I]=U;const N={width:b,height:D,items:Y};this.levels.push(N),b=Math.ceil(b/2),D=Math.ceil(D/2)}}reset(b,D,U){let X=0;for(;X<this.levels.length;){const G=this.levels[X],Y=b+D*G.width;G.index=Y;const N=G.items[Y];if(N===255)break;if(N>U)return this.currentLevel=X,this.propagateValues(),!1;b>>=1,D>>=1,X++}return this.currentLevel=X-1,!0}incrementValue(b){const D=this.levels[this.currentLevel];D.items[D.index]=b+1,this.propagateValues()}propagateValues(){let b=this.currentLevel,D=this.levels[b];const U=D.items[D.index];for(;--b>=0;)D=this.levels[b],D.items[D.index]=U}nextLevel(){let b=this.currentLevel,D=this.levels[b];const U=D.items[D.index];return D.items[D.index]=255,b--,b<0?!1:(this.currentLevel=b,D=this.levels[b],D.items[D.index]=U,!0)}}const P=function(){const U=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),X=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),G=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);class Y{constructor(I,L,$,W,z){this.width=I,this.height=L;let B;$==="HH"?B=G:$==="HL"?B=X:B=U,this.contextLabelTable=B;const H=I*L;this.neighborsSignificance=new Uint8Array(H),this.coefficentsSign=new Uint8Array(H);let q;z>14?q=new Uint32Array(H):z>6?q=new Uint16Array(H):q=new Uint8Array(H),this.coefficentsMagnitude=q,this.processingFlags=new Uint8Array(H);const Z=new Uint8Array(H);if(W!==0)for(let te=0;te<H;te++)Z[te]=W;this.bitsDecoded=Z,this.reset()}setDecoder(I){this.decoder=I}reset(){this.contexts=new Int8Array(19),this.contexts[0]=4<<1|0,this.contexts[17]=46<<1|0,this.contexts[18]=3<<1|0}setNeighborsSignificance(I,L,$){const W=this.neighborsSignificance,z=this.width,B=this.height,H=L>0,q=L+1<z;let Z;I>0&&(Z=$-z,H&&(W[Z-1]+=16),q&&(W[Z+1]+=16),W[Z]+=4),I+1<B&&(Z=$+z,H&&(W[Z-1]+=16),q&&(W[Z+1]+=16),W[Z]+=4),H&&(W[$-1]+=1),q&&(W[$+1]+=1),W[$]|=128}runSignificancePropagationPass(){const I=this.decoder,L=this.width,$=this.height,W=this.coefficentsMagnitude,z=this.coefficentsSign,B=this.neighborsSignificance,H=this.processingFlags,q=this.contexts,Z=this.contextLabelTable,te=this.bitsDecoded,Q=-2,ee=1,J=2;for(let ne=0;ne<$;ne+=4)for(let re=0;re<L;re++){let ae=ne*L+re;for(let se=0;se<4;se++,ae+=L){const oe=ne+se;if(oe>=$)break;if(H[ae]&=Q,W[ae]||!B[ae])continue;const me=Z[B[ae]];if(I.readBit(q,me)){const Ae=this.decodeSignBit(oe,re,ae);z[ae]=Ae,W[ae]=1,this.setNeighborsSignificance(oe,re,ae),H[ae]|=J}te[ae]++,H[ae]|=ee}}}decodeSignBit(I,L,$){const W=this.width,z=this.height,B=this.coefficentsMagnitude,H=this.coefficentsSign;let q,Z,te,Q,ee,J;Q=L>0&&B[$-1]!==0,L+1<W&&B[$+1]!==0?(te=H[$+1],Q?(Z=H[$-1],q=1-te-Z):q=1-te-te):Q?(Z=H[$-1],q=1-Z-Z):q=0;const ne=3*q;return Q=I>0&&B[$-W]!==0,I+1<z&&B[$+W]!==0?(te=H[$+W],Q?(Z=H[$-W],q=1-te-Z+ne):q=1-te-te+ne):Q?(Z=H[$-W],q=1-Z-Z+ne):q=ne,q>=0?(ee=9+q,J=this.decoder.readBit(this.contexts,ee)):(ee=9-q,J=this.decoder.readBit(this.contexts,ee)^1),J}runMagnitudeRefinementPass(){const I=this.decoder,L=this.width,$=this.height,W=this.coefficentsMagnitude,z=this.neighborsSignificance,B=this.contexts,H=this.bitsDecoded,q=this.processingFlags,Z=1,te=2,Q=L*$,ee=L*4;for(let J=0,ne;J<Q;J=ne){ne=Math.min(Q,J+ee);for(let re=0;re<L;re++)for(let ae=J+re;ae<ne;ae+=L){if(!W[ae]||q[ae]&Z)continue;let se=16;q[ae]&te&&(q[ae]^=te,se=(z[ae]&127)===0?15:14);const oe=I.readBit(B,se);W[ae]=W[ae]<<1|oe,H[ae]++,q[ae]|=Z}}}runCleanupPass(){const I=this.decoder,L=this.width,$=this.height,W=this.neighborsSignificance,z=this.coefficentsMagnitude,B=this.coefficentsSign,H=this.contexts,q=this.contextLabelTable,Z=this.bitsDecoded,te=this.processingFlags,Q=1,ee=2,J=L,ne=L*2,re=L*3;let ae;for(let se=0;se<$;se=ae){ae=Math.min(se+4,$);const oe=se*L,me=se+3<$;for(let xe=0;xe<L;xe++){const Ae=oe+xe,Se=me&&te[Ae]===0&&te[Ae+J]===0&&te[Ae+ne]===0&&te[Ae+re]===0&&W[Ae]===0&&W[Ae+J]===0&&W[Ae+ne]===0&&W[Ae+re]===0;let Fe=0,Pe=Ae,ue=se,ye;if(Se){if(!I.readBit(H,18)){Z[Ae]++,Z[Ae+J]++,Z[Ae+ne]++,Z[Ae+re]++;continue}Fe=I.readBit(H,17)<<1|I.readBit(H,17),Fe!==0&&(ue=se+Fe,Pe+=Fe*L),ye=this.decodeSignBit(ue,xe,Pe),B[Pe]=ye,z[Pe]=1,this.setNeighborsSignificance(ue,xe,Pe),te[Pe]|=ee,Pe=Ae;for(let he=se;he<=ue;he++,Pe+=L)Z[Pe]++;Fe++}for(ue=se+Fe;ue<ae;ue++,Pe+=L){if(z[Pe]||te[Pe]&Q)continue;const le=q[W[Pe]];I.readBit(H,le)===1&&(ye=this.decodeSignBit(ue,xe,Pe),B[Pe]=ye,z[Pe]=1,this.setNeighborsSignificance(ue,xe,Pe),te[Pe]|=ee),Z[Pe]++}}}}checkSegmentationSymbol(){const I=this.decoder,L=this.contexts;if((I.readBit(L,17)<<3|I.readBit(L,17)<<2|I.readBit(L,17)<<1|I.readBit(L,17))!==10)throw new s("Invalid segmentation symbol")}}return Y}();class E{constructor(){this.constructor===E&&(0,t.unreachable)("Cannot initialize Transform.")}calculate(b,D,U){let X=b[0];for(let G=1,Y=b.length;G<Y;G++)X=this.iterate(X,b[G],D,U);return X}extend(b,D,U){let X=D-1,G=D+1,Y=D+U-2,N=D+U;b[X--]=b[G++],b[N++]=b[Y--],b[X--]=b[G++],b[N++]=b[Y--],b[X--]=b[G++],b[N++]=b[Y--],b[X]=b[G],b[N]=b[Y]}filter(b,D,U){(0,t.unreachable)("Abstract method `filter` called")}iterate(b,D,U,X){const G=b.width,Y=b.height;let N=b.items;const I=D.width,L=D.height,$=D.items;let W,z,B,H,q,Z;for(B=0,W=0;W<Y;W++)for(H=W*2*I,z=0;z<G;z++,B++,H+=2)$[H]=N[B];N=b.items=null;const te=4,Q=new Float32Array(I+2*te);if(I===1){if(U&1)for(Z=0,B=0;Z<L;Z++,B+=I)$[B]*=.5}else for(Z=0,B=0;Z<L;Z++,B+=I)Q.set($.subarray(B,B+I),te),this.extend(Q,te,I),this.filter(Q,te,I),$.set(Q.subarray(te,te+I),B);let ee=16;const J=[];for(W=0;W<ee;W++)J.push(new Float32Array(L+2*te));let ne,re=0;if(b=te+L,L===1){if(X&1)for(q=0;q<I;q++)$[q]*=.5}else for(q=0;q<I;q++){if(re===0){for(ee=Math.min(I-q,ee),B=q,H=te;H<b;B+=I,H++)for(ne=0;ne<ee;ne++)J[ne][H]=$[B+ne];re=ee}re--;const ae=J[re];if(this.extend(ae,te,L),this.filter(ae,te,L),re===0)for(B=q-ee+1,H=te;H<b;B+=I,H++)for(ne=0;ne<ee;ne++)$[B+ne]=J[ne][H]}return{width:I,height:L,items:$}}}class S extends E{filter(b,D,U){const X=U>>1;D|=0;let G,Y,N,I;const L=-1.586134342059924,$=-.052980118572961,W=.882911075530934,z=.443506852043971,B=1.230174104914001,H=1/B;for(G=D-3,Y=X+4;Y--;G+=2)b[G]*=H;for(G=D-2,N=z*b[G-1],Y=X+3;Y--&&(I=z*b[G+1],b[G]=B*b[G]-N-I,Y--);G+=2)G+=2,N=z*b[G+1],b[G]=B*b[G]-N-I;for(G=D-1,N=W*b[G-1],Y=X+2;Y--&&(I=W*b[G+1],b[G]-=N+I,Y--);G+=2)G+=2,N=W*b[G+1],b[G]-=N+I;for(G=D,N=$*b[G-1],Y=X+1;Y--&&(I=$*b[G+1],b[G]-=N+I,Y--);G+=2)G+=2,N=$*b[G+1],b[G]-=N+I;if(X!==0)for(G=D+1,N=L*b[G-1],Y=X;Y--&&(I=L*b[G+1],b[G]-=N+I,Y--);G+=2)G+=2,N=L*b[G+1],b[G]-=N+I}}class F extends E{filter(b,D,U){const X=U>>1;D|=0;let G,Y;for(G=D,Y=X+1;Y--;G+=2)b[G]-=b[G-1]+b[G+1]+2>>2;for(G=D+1,Y=X;Y--;G+=2)b[G]+=b[G-1]+b[G+1]>>1}}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.LZWStream=void 0;var t=h(19);class o extends t.DecodeStream{constructor(s,e,a){super(e),this.str=s,this.dict=s.dict,this.cachedData=0,this.bitsCached=0;const r=4096,n={earlyChange:a,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(r),dictionaryLengths:new Uint16Array(r),dictionaryPrevCodes:new Uint16Array(r),currentSequence:new Uint8Array(r),currentSequenceLength:0};for(let l=0;l<256;++l)n.dictionaryValues[l]=l,n.dictionaryLengths[l]=1;this.lzwState=n}readBits(s){let e=this.bitsCached,a=this.cachedData;for(;e<s;){const r=this.str.getByte();if(r===-1)return this.eof=!0,null;a=a<<8|r,e+=8}return this.bitsCached=e-=s,this.cachedData=a,this.lastCode=null,a>>>e&(1<<s)-1}readBlock(){let a=1024,r,n,l;const u=this.lzwState;if(!u)return;const d=u.earlyChange;let i=u.nextCode;const g=u.dictionaryValues,x=u.dictionaryLengths,m=u.dictionaryPrevCodes;let A=u.codeLength,k=u.prevCode;const v=u.currentSequence;let _=u.currentSequenceLength,K=0,M=this.bufferLength,j=this.ensureBuffer(this.bufferLength+a);for(r=0;r<512;r++){const O=this.readBits(A),T=_>0;if(O<256)v[0]=O,_=1;else if(O>=258)if(O<i)for(_=x[O],n=_-1,l=O;n>=0;n--)v[n]=g[l],l=m[l];else v[_++]=v[0];else if(O===256){A=9,i=258,_=0;continue}else{this.eof=!0,delete this.lzwState;break}if(T&&(m[i]=k,x[i]=x[k]+1,g[i]=v[0],i++,A=i+d&i+d-1?A:Math.min(Math.log(i+d)/.6931471805599453+1,12)|0),k=O,K+=_,a<K){do a+=512;while(a<K);j=this.ensureBuffer(this.bufferLength+a)}for(n=0;n<_;n++)j[M++]=v[n]}u.nextCode=i,u.codeLength=A,u.prevCode=k,u.currentSequenceLength=_,this.bufferLength=M}}f.LZWStream=o},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PredictorStream=void 0;var t=h(19),o=h(5),c=h(2);class s extends t.DecodeStream{constructor(a,r,n){if(super(r),!(n instanceof o.Dict))return a;const l=this.predictor=n.get("Predictor")||1;if(l<=1)return a;if(l!==2&&(l<10||l>15))throw new c.FormatError(`Unsupported predictor: ${l}`);l===2?this.readBlock=this.readBlockTiff:this.readBlock=this.readBlockPng,this.str=a,this.dict=a.dict;const u=this.colors=n.get("Colors")||1,d=this.bits=n.get("BPC","BitsPerComponent")||8,i=this.columns=n.get("Columns")||1;return this.pixBytes=u*d+7>>3,this.rowBytes=i*u*d+7>>3,this}readBlockTiff(){const a=this.rowBytes,r=this.bufferLength,n=this.ensureBuffer(r+a),l=this.bits,u=this.colors,d=this.str.getBytes(a);if(this.eof=!d.length,this.eof)return;let i=0,g=0,x=0,m=0,A=r,k;if(l===1&&u===1)for(k=0;k<a;++k){let v=d[k]^i;v^=v>>1,v^=v>>2,v^=v>>4,i=(v&1)<<7,n[A++]=v}else if(l===8){for(k=0;k<u;++k)n[A++]=d[k];for(;k<a;++k)n[A]=n[A-u]+d[k],A++}else if(l===16){const v=u*2;for(k=0;k<v;++k)n[A++]=d[k];for(;k<a;k+=2){const _=((d[k]&255)<<8)+(d[k+1]&255)+((n[A-v]&255)<<8)+(n[A-v+1]&255);n[A++]=_>>8&255,n[A++]=_&255}}else{const v=new Uint8Array(u+1),_=(1<<l)-1;let K=0,M=r;const j=this.columns;for(k=0;k<j;++k)for(let O=0;O<u;++O)x<l&&(i=i<<8|d[K++]&255,x+=8),v[O]=v[O]+(i>>x-l)&_,x-=l,g=g<<l|v[O],m+=l,m>=8&&(n[M++]=g>>m-8&255,m-=8);m>0&&(n[M++]=(g<<8-m)+(i&(1<<8-m)-1))}this.bufferLength+=a}readBlockPng(){const a=this.rowBytes,r=this.pixBytes,n=this.str.getByte(),l=this.str.getBytes(a);if(this.eof=!l.length,this.eof)return;const u=this.bufferLength,d=this.ensureBuffer(u+a);let i=d.subarray(u-a,u);i.length===0&&(i=new Uint8Array(a));let g,x=u,m,A;switch(n){case 0:for(g=0;g<a;++g)d[x++]=l[g];break;case 1:for(g=0;g<r;++g)d[x++]=l[g];for(;g<a;++g)d[x]=d[x-r]+l[g]&255,x++;break;case 2:for(g=0;g<a;++g)d[x++]=i[g]+l[g]&255;break;case 3:for(g=0;g<r;++g)d[x++]=(i[g]>>1)+l[g];for(;g<a;++g)d[x]=(i[g]+d[x-r]>>1)+l[g]&255,x++;break;case 4:for(g=0;g<r;++g)m=i[g],A=l[g],d[x++]=m+A;for(;g<a;++g){m=i[g];const k=i[g-r],v=d[x-r],_=v+m-k;let K=_-v;K<0&&(K=-K);let M=_-m;M<0&&(M=-M);let j=_-k;j<0&&(j=-j),A=l[g],K<=M&&K<=j?d[x++]=v+A:M<=j?d[x++]=m+A:d[x++]=k+A}break;default:throw new c.FormatError(`Unsupported predictor: ${n}`)}this.bufferLength+=a}}f.PredictorStream=s},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.RunLengthStream=void 0;var t=h(19);class o extends t.DecodeStream{constructor(s,e){super(e),this.str=s,this.dict=s.dict}readBlock(){const s=this.str.getBytes(2);if(!s||s.length<2||s[0]===128){this.eof=!0;return}let e,a=this.bufferLength,r=s[0];if(r<128){if(e=this.ensureBuffer(a+r+1),e[a++]=s[1],r>0){const n=this.str.getBytes(r);e.set(n,a),a+=r}}else{r=257-r;const n=s[1];e=this.ensureBuffer(a+r+1);for(let l=0;l<r;l++)e[a++]=n}this.bufferLength=a}}f.RunLengthStream=o},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Font=f.ErrorFont=void 0;var t=h(2),o=h(35),c=h(38),s=h(40),e=h(39),a=h(37),r=h(41),n=h(42),l=h(43),u=h(44),d=h(45),i=h(46),g=h(16),x=h(47),m=h(6),A=h(10),k=h(48);const v=[[57344,63743],[1048576,1114109]],_=1e3,K=["ascent","bbox","black","bold","charProcOperatorList","composite","cssFontInfo","data","defaultVMetrics","defaultWidth","descent","fallbackName","fontMatrix","fontType","isType3Font","italic","loadedName","mimetype","missingFile","name","remeasure","subtype","type","vertical"],M=["cMap","defaultEncoding","differences","isMonospace","isSerifFont","isSymbolicFont","seacMap","toFontChar","toUnicode","vmetrics","widths"];function j(ee){if(!ee.fontMatrix||ee.fontMatrix[0]===t.FONT_IDENTITY_MATRIX[0])return;const J=.001/ee.fontMatrix[0],ne=ee.widths;for(const re in ne)ne[re]*=J;ee.defaultWidth*=J}function O(ee,J){if(ee.isInternalFont||J===ee.defaultEncoding||ee.toUnicode instanceof n.IdentityToUnicodeMap)return;const ne=[],re=(0,e.getGlyphsUnicode)();for(const ae in J){if(ee.hasIncludedToUnicodeMap){if(ee.toUnicode.has(ae))continue}else if(ee.hasEncoding&&(ee.differences.length===0||ee.differences[ae]!==void 0))continue;const se=J[ae],oe=(0,s.getUnicodeForGlyph)(se,re);oe!==-1&&(ne[ae]=String.fromCharCode(oe))}ne.length>0&&ee.toUnicode.amend(ne)}function T(ee){if(!ee.fallbackToUnicode||ee.toUnicode instanceof n.IdentityToUnicodeMap)return;const J=[];for(const ne in ee.fallbackToUnicode)ee.toUnicode.has(ne)||(J[ne]=ee.fallbackToUnicode[ne]);J.length>0&&ee.toUnicode.amend(J)}class R{constructor(J,ne,re,ae,se,oe,me,xe,Ae){this.originalCharCode=J,this.fontChar=ne,this.unicode=re,this.accent=ae,this.width=se,this.vmetric=oe,this.operatorListId=me,this.isSpace=xe,this.isInFont=Ae;const Se=(0,s.getCharUnicodeCategory)(re);this.isWhitespace=Se.isWhitespace,this.isZeroWidthDiacritic=Se.isZeroWidthDiacritic,this.isInvisibleFormatMark=Se.isInvisibleFormatMark}matchesForCache(J,ne,re,ae,se,oe,me,xe,Ae){return this.originalCharCode===J&&this.fontChar===ne&&this.unicode===re&&this.accent===ae&&this.width===se&&this.vmetric===oe&&this.operatorListId===me&&this.isSpace===xe&&this.isInFont===Ae}}function y(ee,J){return(ee<<8)+J}function p(ee,J,ne){ee[J+1]=ne,ee[J]=ne>>>8}function P(ee,J){const ne=(ee<<8)+J;return ne&32768?ne-65536:ne}function E(ee,J,ne,re){return(ee<<24)+(J<<16)+(ne<<8)+re}function S(ee){return String.fromCharCode(ee>>8&255,ee&255)}function F(ee){return ee>32767?ee=32767:ee<-32768&&(ee=-32768),String.fromCharCode(ee>>8&255,ee&255)}function C(ee){const J=ee.peekBytes(4);return(0,m.readUint32)(J,0)===65536||(0,t.bytesToString)(J)==="true"}function b(ee){const J=ee.peekBytes(4);return(0,t.bytesToString)(J)==="ttcf"}function D(ee){const J=ee.peekBytes(4);return(0,t.bytesToString)(J)==="OTTO"}function U(ee){const J=ee.peekBytes(2);return J[0]===37&&J[1]===33||J[0]===128&&J[1]===1}function X(ee){const J=ee.peekBytes(4);return J[0]>=1&&J[3]>=1&&J[3]<=4}function G(ee,{type:J,subtype:ne,composite:re}){let ae,se;return C(ee)||b(ee)?re?ae="CIDFontType2":ae="TrueType":D(ee)?re?ae="CIDFontType2":ae="OpenType":U(ee)?re?ae="CIDFontType0":ae=J==="MMType1"?"MMType1":"Type1":X(ee)?re?(ae="CIDFontType0",se="CIDFontType0C"):(ae=J==="MMType1"?"MMType1":"Type1",se="Type1C"):((0,t.warn)("getFontFileType: Unable to detect correct font file Type/Subtype."),ae=J,se=ne),[ae,se]}function Y(ee,J){for(const ne in J)ee[+ne]=J[ne]}function N(ee,J,ne){const re=[];let ae;for(let se=0,oe=ee.length;se<oe;se++)ae=(0,s.getUnicodeForGlyph)(ee[se],J),ae!==-1&&(re[se]=ae);for(const se in ne)ae=(0,s.getUnicodeForGlyph)(ne[se],J),ae!==-1&&(re[+se]=ae);return re}function I(ee,J,ne=!1){switch(J.length){case 1:return J.charCodeAt(0);case 2:return J.charCodeAt(0)<<8|J.charCodeAt(1)}const re=`Unsupported CID string (charCode ${ee}): "${J}".`;if(ne)throw new t.FormatError(re);return(0,t.warn)(re),J}function L(ee,J,ne,re){const ae=Object.create(null),se=new Map,oe=[],me=new Set;let xe=0;const Ae=v[xe][0];let Se=Ae,Fe=v[xe][1];for(let Pe in ee){Pe|=0;let ue=ee[Pe];if(!J(ue))continue;if(Se>Fe){if(xe++,xe>=v.length){(0,t.warn)("Ran out of space in font private use area.");break}Se=v[xe][0],Fe=v[xe][1]}const ye=Se++;ue===0&&(ue=ne);let le=re.get(Pe);typeof le=="string"&&(le=le.codePointAt(0)),le&&le<Ae&&!me.has(ue)&&(se.set(le,ue),me.add(ue)),ae[ye]=ue,oe[Pe]=ye}return{toFontChar:oe,charCodeToGlyphId:ae,toUnicodeExtraMap:se,nextAvailableFontCharCode:Se}}function $(ee,J,ne){const re=[];for(const oe in ee)ee[oe]>=ne||re.push({fontCharCode:oe|0,glyphId:ee[oe]});if(J)for(const[oe,me]of J)me>=ne||re.push({fontCharCode:oe,glyphId:me});re.length===0&&re.push({fontCharCode:0,glyphId:0}),re.sort(function(me,xe){return me.fontCharCode-xe.fontCharCode});const ae=[],se=re.length;for(let oe=0;oe<se;){const me=re[oe].fontCharCode,xe=[re[oe].glyphId];++oe;let Ae=me;for(;oe<se&&Ae+1===re[oe].fontCharCode&&(xe.push(re[oe].glyphId),++Ae,++oe,Ae!==65535););ae.push([me,Ae,xe])}return ae}function W(ee,J,ne){const re=$(ee,J,ne),ae=re.at(-1)[1]>65535?2:1;let se="\0\0"+S(ae)+"\0\0"+(0,t.string32)(4+ae*8),oe,me,xe,Ae;for(oe=re.length-1;oe>=0&&!(re[oe][0]<=65535);--oe);const Se=oe+1;re[oe][0]<65535&&re[oe][1]===65535&&(re[oe][1]=65534);const Fe=re[oe][1]<65535?1:0,Pe=Se+Fe,ue=x.OpenTypeFileBuilder.getSearchParams(Pe,2);let ye="",le="",he="",ce="",Te="",Re=0,He,Ce,ve,fe;for(oe=0,me=Se;oe<me;oe++){He=re[oe],Ce=He[0],ve=He[1],ye+=S(Ce),le+=S(ve),fe=He[2];let tt=!0;for(xe=1,Ae=fe.length;xe<Ae;++xe)if(fe[xe]!==fe[xe-1]+1){tt=!1;break}if(tt){const Ne=fe[0];he+=S(Ne-Ce&65535),ce+=S(0)}else{const Ne=(Pe-oe)*2+Re*2;for(Re+=ve-Ce+1,he+=S(0),ce+=S(Ne),xe=0,Ae=fe.length;xe<Ae;++xe)Te+=S(fe[xe])}}Fe>0&&(le+="ÿÿ",ye+="ÿÿ",he+="\0",ce+="\0\0");const We="\0\0"+S(2*Pe)+S(ue.range)+S(ue.entry)+S(ue.rangeShift)+le+"\0\0"+ye+he+ce+Te;let Ue="",ze="";if(ae>1){for(se+=`\0\0
`+(0,t.string32)(4+ae*8+4+We.length),Ue="",oe=0,me=re.length;oe<me;oe++){He=re[oe],Ce=He[0],fe=He[2];let tt=fe[0];for(xe=1,Ae=fe.length;xe<Ae;++xe)fe[xe]!==fe[xe-1]+1&&(ve=He[0]+xe-1,Ue+=(0,t.string32)(Ce)+(0,t.string32)(ve)+(0,t.string32)(tt),Ce=ve+1,tt=fe[xe]);Ue+=(0,t.string32)(Ce)+(0,t.string32)(He[1])+(0,t.string32)(tt)}ze="\0\f\0\0"+(0,t.string32)(Ue.length+16)+"\0\0\0\0"+(0,t.string32)(Ue.length/12)}return se+"\0"+S(We.length+4)+We+ze+Ue}function z(ee,J){J.pos=(J.start||0)+ee.offset;const ne=J.getUint16();J.skip(60);const re=J.getUint16();if(ne<4&&re&768)return!1;const ae=J.getUint16(),se=J.getUint16();return ae>se||(J.skip(6),J.getUint16()===0)?!1:(ee.data[8]=ee.data[9]=0,!0)}function B(ee,J,ne){ne=ne||{unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0};let re=0,ae=0,se=0,oe=0,me=null,xe=0;if(J){for(let he in J){he|=0,(me>he||!me)&&(me=he),xe<he&&(xe=he);const ce=(0,s.getUnicodeRangeFor)(he);if(ce<32)re|=1<<ce;else if(ce<64)ae|=1<<ce-32;else if(ce<96)se|=1<<ce-64;else if(ce<123)oe|=1<<ce-96;else throw new t.FormatError("Unicode ranges Bits > 123 are reserved for internal usage")}xe>65535&&(xe=65535)}else me=0,xe=255;const Ae=ee.bbox||[0,0,0,0],Se=ne.unitsPerEm||1/(ee.fontMatrix||t.FONT_IDENTITY_MATRIX)[0],Fe=ee.ascentScaled?1:Se/_,Pe=ne.ascent||Math.round(Fe*(ee.ascent||Ae[3]));let ue=ne.descent||Math.round(Fe*(ee.descent||Ae[1]));ue>0&&ee.descent>0&&Ae[1]<0&&(ue=-ue);const ye=ne.yMax||Pe,le=-ne.yMin||-ue;return"\0$ô\0\0\0»\0\0\0»\0\0ß\x001\0\0\0\0"+String.fromCharCode(ee.fixedPitch?9:0)+"\0\0\0\0\0\0"+(0,t.string32)(re)+(0,t.string32)(ae)+(0,t.string32)(se)+(0,t.string32)(oe)+"*21*"+S(ee.italicAngle?1:0)+S(me||ee.firstChar)+S(xe||ee.lastChar)+S(Pe)+S(ue)+"\0d"+S(ye)+S(le)+"\0\0\0\0\0\0\0\0"+S(ee.xHeight)+S(ee.capHeight)+S(0)+S(me||ee.firstChar)+"\0"}function H(ee){const J=Math.floor(ee.italicAngle*65536);return"\0\0\0"+(0,t.string32)(J)+"\0\0\0\0"+(0,t.string32)(ee.fixedPitch?1:0)+"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}function q(ee){return ee.replace(/[^\x21-\x7E]|[[\](){}<>/%]/g,"").slice(0,63)}function Z(ee,J){J||(J=[[],[]]);const ne=[J[0][0]||"Original licence",J[0][1]||ee,J[0][2]||"Unknown",J[0][3]||"uniqueID",J[0][4]||ee,J[0][5]||"Version 0.11",J[0][6]||q(ee),J[0][7]||"Unknown",J[0][8]||"Unknown",J[0][9]||"Unknown"],re=[];let ae,se,oe,me,xe;for(ae=0,se=ne.length;ae<se;ae++){xe=J[1][ae]||ne[ae];const he=[];for(oe=0,me=xe.length;oe<me;oe++)he.push(S(xe.charCodeAt(oe)));re.push(he.join(""))}const Ae=[ne,re],Se=["\0","\0"],Fe=["\0\0","\0"],Pe=["\0\0","	"],ue=ne.length*Se.length;let ye="\0\0"+S(ue)+S(ue*12+6),le=0;for(ae=0,se=Se.length;ae<se;ae++){const he=Ae[ae];for(oe=0,me=he.length;oe<me;oe++){xe=he[oe];const ce=Se[ae]+Fe[ae]+Pe[ae]+S(oe)+S(xe.length)+S(le);ye+=ce,le+=xe.length}}return ye+=ne.join("")+re.join(""),ye}class te{constructor(J,ne,re){this.name=J,this.psName=null,this.mimetype=null,this.disableFontFace=!1,this.loadedName=re.loadedName,this.isType3Font=re.isType3Font,this.missingFile=!1,this.cssFontInfo=re.cssFontInfo,this._charsCache=Object.create(null),this._glyphCache=Object.create(null);let ae=!!(re.flags&c.FontFlags.Serif);if(!ae&&!re.isSimulatedFlags){const Ae=J.replace(/[,_]/g,"-").split("-")[0],Se=(0,r.getSerifFonts)();for(const Fe of Ae.split("+"))if(Se[Fe]){ae=!0;break}}this.isSerifFont=ae,this.isSymbolicFont=!!(re.flags&c.FontFlags.Symbolic),this.isMonospace=!!(re.flags&c.FontFlags.FixedPitch);let se=re.type,oe=re.subtype;this.type=se,this.subtype=oe;let me="sans-serif";if(this.isMonospace?me="monospace":this.isSerifFont&&(me="serif"),this.fallbackName=me,this.differences=re.differences,this.widths=re.widths,this.defaultWidth=re.defaultWidth,this.composite=re.composite,this.cMap=re.cMap,this.capHeight=re.capHeight/_,this.ascent=re.ascent/_,this.descent=re.descent/_,this.lineHeight=this.ascent-this.descent,this.fontMatrix=re.fontMatrix,this.bbox=re.bbox,this.defaultEncoding=re.defaultEncoding,this.toUnicode=re.toUnicode,this.toFontChar=[],re.type==="Type3"){for(let Ae=0;Ae<256;Ae++)this.toFontChar[Ae]=this.differences[Ae]||re.defaultEncoding[Ae];this.fontType=t.FontType.TYPE3;return}if(this.cidEncoding=re.cidEncoding||"",this.vertical=!!re.vertical,this.vertical&&(this.vmetrics=re.vmetrics,this.defaultVMetrics=re.defaultVMetrics),!ne||ne.isEmpty){ne&&(0,t.warn)('Font file is empty in "'+J+'" ('+this.loadedName+")"),this.fallbackToSystemFont(re);return}[se,oe]=G(ne,re),(se!==this.type||oe!==this.subtype)&&(0,t.info)(`Inconsistent font file Type/SubType, expected: ${this.type}/${this.subtype} but found: ${se}/${oe}.`);let xe;try{switch(se){case"MMType1":(0,t.info)("MMType1 font ("+J+"), falling back to Type1.");case"Type1":case"CIDFontType0":this.mimetype="font/opentype";const Ae=oe==="Type1C"||oe==="CIDFontType0C"?new l.CFFFont(ne,re):new k.Type1Font(J,ne,re);j(re),xe=this.convert(J,Ae,re);break;case"OpenType":case"TrueType":case"CIDFontType2":this.mimetype="font/opentype",xe=this.checkAndRepair(J,ne,re),this.isOpenType&&(j(re),se="OpenType");break;default:throw new t.FormatError(`Font ${se} is not supported`)}}catch(Ae){(0,t.warn)(Ae),this.fallbackToSystemFont(re);return}T(re),this.data=xe,this.fontType=(0,c.getFontType)(se,oe,re.isStandardFont),this.fontMatrix=re.fontMatrix,this.widths=re.widths,this.defaultWidth=re.defaultWidth,this.toUnicode=re.toUnicode,this.seacMap=re.seacMap}get renderer(){const J=u.FontRendererFactory.create(this,c.SEAC_ANALYSIS_ENABLED);return(0,t.shadow)(this,"renderer",J)}exportData(J=!1){const ne=J?[...K,...M]:K,re=Object.create(null);let ae,se;for(ae of ne)se=this[ae],se!==void 0&&(re[ae]=se);return re}fallbackToSystemFont(J){this.missingFile=!0;const ne=this.name,re=this.type,ae=this.subtype;let se=(0,c.normalizeFontName)(ne);const oe=(0,r.getStdFontMap)(),me=(0,r.getNonStdFontMap)(),xe=!!oe[se],Ae=!!(me[se]&&oe[me[se]]);se=oe[se]||me[se]||se;const Fe=(0,d.getFontBasicMetrics)()[se];Fe&&(isNaN(this.ascent)&&(this.ascent=Fe.ascent/_),isNaN(this.descent)&&(this.descent=Fe.descent/_),isNaN(this.capHeight)&&(this.capHeight=Fe.capHeight/_)),this.bold=se.search(/bold/gi)!==-1,this.italic=se.search(/oblique/gi)!==-1||se.search(/italic/gi)!==-1,this.black=ne.search(/Black/g)!==-1;const Pe=ne.search(/Narrow/g)!==-1;if(this.remeasure=(!xe||Pe)&&Object.keys(this.widths).length>0,(xe||Ae)&&re==="CIDFontType2"&&this.cidEncoding.startsWith("Identity-")){const ue=J.cidToGidMap,ye=[];if(Y(ye,(0,r.getGlyphMapForStandardFonts)()),/Arial-?Black/i.test(ne)?Y(ye,(0,r.getSupplementalGlyphMapForArialBlack)()):/Calibri/i.test(ne)&&Y(ye,(0,r.getSupplementalGlyphMapForCalibri)()),ue){for(const le in ye){const he=ye[le];ue[he]!==void 0&&(ye[+le]=ue[he])}ue.length!==this.toUnicode.length&&J.hasIncludedToUnicodeMap&&this.toUnicode instanceof n.IdentityToUnicodeMap&&this.toUnicode.forEach(function(le,he){const ce=ye[le];ue[ce]===void 0&&(ye[+le]=he)})}this.toUnicode instanceof n.IdentityToUnicodeMap||this.toUnicode.forEach(function(le,he){ye[+le]=he}),this.toFontChar=ye,this.toUnicode=new n.ToUnicodeMap(ye)}else if(/Symbol/i.test(se))this.toFontChar=N(a.SymbolSetEncoding,(0,e.getGlyphsUnicode)(),this.differences);else if(/Dingbats/i.test(se))/Wingdings/i.test(ne)&&(0,t.warn)("Non-embedded Wingdings font, falling back to ZapfDingbats."),this.toFontChar=N(a.ZapfDingbatsEncoding,(0,e.getDingbatsGlyphsUnicode)(),this.differences);else if(xe){const ue=N(this.defaultEncoding,(0,e.getGlyphsUnicode)(),this.differences);re==="CIDFontType2"&&!this.cidEncoding.startsWith("Identity-")&&!(this.toUnicode instanceof n.IdentityToUnicodeMap)&&this.toUnicode.forEach(function(ye,le){ue[+ye]=le}),this.toFontChar=ue}else{const ue=(0,e.getGlyphsUnicode)(),ye=[];this.toUnicode.forEach((le,he)=>{if(!this.composite){const ce=this.differences[le]||this.defaultEncoding[le],Te=(0,s.getUnicodeForGlyph)(ce,ue);Te!==-1&&(he=Te)}ye[+le]=he}),this.composite&&this.toUnicode instanceof n.IdentityToUnicodeMap&&/Verdana/i.test(ne)&&Y(ye,(0,r.getGlyphMapForStandardFonts)()),this.toFontChar=ye}T(J),this.loadedName=se.split("-")[0],this.fontType=(0,c.getFontType)(re,ae,J.isStandardFont)}checkAndRepair(J,ne,re){const ae=["OS/2","cmap","head","hhea","hmtx","maxp","name","post","loca","glyf","fpgm","prep","cvt ","CFF "];function se(Xe,Ie){const Ge=Object.create(null);Ge["OS/2"]=null,Ge.cmap=null,Ge.head=null,Ge.hhea=null,Ge.hmtx=null,Ge.maxp=null,Ge.name=null,Ge.post=null;for(let Ve=0;Ve<Ie;Ve++){const it=oe(Xe);ae.includes(it.tag)&&it.length!==0&&(Ge[it.tag]=it)}return Ge}function oe(Xe){const Ie=Xe.getString(4),Ge=Xe.getInt32()>>>0,Ve=Xe.getInt32()>>>0,it=Xe.getInt32()>>>0,gt=Xe.pos;Xe.pos=Xe.start||0,Xe.skip(Ve);const nt=Xe.getBytes(it);return Xe.pos=gt,Ie==="head"&&(nt[8]=nt[9]=nt[10]=nt[11]=0,nt[17]|=32),{tag:Ie,checksum:Ge,length:it,offset:Ve,data:nt}}function me(Xe){return{version:Xe.getString(4),numTables:Xe.getUint16(),searchRange:Xe.getUint16(),entrySelector:Xe.getUint16(),rangeShift:Xe.getUint16()}}function xe(Xe){const Ie=Xe.getString(4);(0,t.assert)(Ie==="ttcf","Must be a TrueType Collection font.");const Ge=Xe.getUint16(),Ve=Xe.getUint16(),it=Xe.getInt32()>>>0,gt=[];for(let Ke=0;Ke<it;Ke++)gt.push(Xe.getInt32()>>>0);const nt={ttcTag:Ie,majorVersion:Ge,minorVersion:Ve,numFonts:it,offsetTable:gt};switch(Ge){case 1:return nt;case 2:return nt.dsigTag=Xe.getInt32()>>>0,nt.dsigLength=Xe.getInt32()>>>0,nt.dsigOffset=Xe.getInt32()>>>0,nt}throw new t.FormatError(`Invalid TrueType Collection majorVersion: ${Ge}.`)}function Ae(Xe,Ie){const{numFonts:Ge,offsetTable:Ve}=xe(Xe),it=Ie.split("+");let gt;for(let nt=0;nt<Ge;nt++){Xe.pos=(Xe.start||0)+Ve[nt];const Ke=me(Xe),at=se(Xe,Ke.numTables);if(!at.name)throw new t.FormatError('TrueType Collection font must contain a "name" table.');const ut=he(at.name);for(let St=0,bt=ut.length;St<bt;St++)for(let ft=0,we=ut[St].length;ft<we;ft++){const _e=ut[St][ft]&&ut[St][ft].replace(/\s/g,"");if(_e){if(_e===Ie)return{header:Ke,tables:at};if(!(it.length<2))for(const $e of it)_e===$e&&(gt={name:$e,header:Ke,tables:at})}}}if(gt)return(0,t.warn)(`TrueType Collection does not contain "${Ie}" font, falling back to "${gt.name}" font instead.`),{header:gt.header,tables:gt.tables};throw new t.FormatError(`TrueType Collection does not contain "${Ie}" font.`)}function Se(Xe,Ie,Ge,Ve){if(!Xe)return(0,t.warn)("No cmap table available."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};let it,gt=(Ie.start||0)+Xe.offset;Ie.pos=gt,Ie.skip(2);const nt=Ie.getUint16();let Ke,at=!1;for(let _e=0;_e<nt;_e++){const $e=Ie.getUint16(),je=Ie.getUint16(),et=Ie.getInt32()>>>0;let xt=!1;if(!(Ke&&Ke.platformId===$e&&Ke.encodingId===je)){if($e===0&&(je===0||je===1||je===3))xt=!0;else if($e===1&&je===0)xt=!0;else if($e===3&&je===1&&(Ve||!Ke))xt=!0,Ge||(at=!0);else if(Ge&&$e===3&&je===0){xt=!0;let Et=!0;if(_e<nt-1){const yt=Ie.peekBytes(2);y(yt[0],yt[1])<$e&&(Et=!1)}Et&&(at=!0)}if(xt&&(Ke={platformId:$e,encodingId:je,offset:et}),at)break}}if(Ke&&(Ie.pos=gt+Ke.offset),!Ke||Ie.peekByte()===-1)return(0,t.warn)("Could not find a preferred cmap table."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};const ut=Ie.getUint16();let St=!1;const bt=[];let ft,we;if(ut===0){for(Ie.skip(4),ft=0;ft<256;ft++){const _e=Ie.getByte();_e&&bt.push({charCode:ft,glyphId:_e})}St=!0}else if(ut===2){Ie.skip(4);const _e=[];let $e=0;for(let et=0;et<256;et++){const xt=Ie.getUint16()>>3;_e.push(xt),$e=Math.max(xt,$e)}const je=[];for(let et=0;et<=$e;et++)je.push({firstCode:Ie.getUint16(),entryCount:Ie.getUint16(),idDelta:P(Ie.getByte(),Ie.getByte()),idRangePos:Ie.pos+Ie.getUint16()});for(let et=0;et<256;et++)if(_e[et]===0)Ie.pos=je[0].idRangePos+2*et,we=Ie.getUint16(),bt.push({charCode:et,glyphId:we});else{const xt=je[_e[et]];for(ft=0;ft<xt.entryCount;ft++){const Et=(et<<8)+ft+xt.firstCode;Ie.pos=xt.idRangePos+2*ft,we=Ie.getUint16(),we!==0&&(we=(we+xt.idDelta)%65536),bt.push({charCode:Et,glyphId:we})}}}else if(ut===4){Ie.skip(4);const _e=Ie.getUint16()>>1;Ie.skip(6);const $e=[];let je;for(je=0;je<_e;je++)$e.push({end:Ie.getUint16()});for(Ie.skip(2),je=0;je<_e;je++)$e[je].start=Ie.getUint16();for(je=0;je<_e;je++)$e[je].delta=Ie.getUint16();let et=0,xt;for(je=0;je<_e;je++){it=$e[je];const yt=Ie.getUint16();if(!yt){it.offsetIndex=-1;continue}xt=(yt>>1)-(_e-je),it.offsetIndex=xt,et=Math.max(et,xt+it.end-it.start+1)}const Et=[];for(ft=0;ft<et;ft++)Et.push(Ie.getUint16());for(je=0;je<_e;je++){it=$e[je],gt=it.start;const yt=it.end,wt=it.delta;for(xt=it.offsetIndex,ft=gt;ft<=yt;ft++)ft!==65535&&(we=xt<0?ft:Et[xt+ft-gt],we=we+wt&65535,bt.push({charCode:ft,glyphId:we}))}}else if(ut===6){Ie.skip(4);const _e=Ie.getUint16(),$e=Ie.getUint16();for(ft=0;ft<$e;ft++){we=Ie.getUint16();const je=_e+ft;bt.push({charCode:je,glyphId:we})}}else if(ut===12){Ie.skip(10);const _e=Ie.getInt32()>>>0;for(ft=0;ft<_e;ft++){const $e=Ie.getInt32()>>>0,je=Ie.getInt32()>>>0;let et=Ie.getInt32()>>>0;for(let xt=$e;xt<=je;xt++)bt.push({charCode:xt,glyphId:et++})}}else return(0,t.warn)("cmap table has unsupported format: "+ut),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};bt.sort(function(_e,$e){return _e.charCode-$e.charCode});for(let _e=1;_e<bt.length;_e++)bt[_e-1].charCode===bt[_e].charCode&&(bt.splice(_e,1),_e--);return{platformId:Ke.platformId,encodingId:Ke.encodingId,mappings:bt,hasShortCmap:St}}function Fe(Xe,Ie,Ge,Ve,it,gt){if(!Ie){Ge&&(Ge.data=null);return}Xe.pos=(Xe.start||0)+Ie.offset,Xe.pos+=4,Xe.pos+=2,Xe.pos+=2,Xe.pos+=2,Xe.pos+=2,Xe.pos+=2,Xe.pos+=2,Xe.pos+=2,Xe.pos+=2,Xe.pos+=2;const nt=Xe.getUint16();Xe.pos+=8,Xe.pos+=2;let Ke=Xe.getUint16();nt!==0&&(y(Ve.data[44],Ve.data[45])&2||(Ie.data[22]=0,Ie.data[23]=0)),Ke>it&&((0,t.info)(`The numOfMetrics (${Ke}) should not be greater than the numGlyphs (${it}).`),Ke=it,Ie.data[34]=(Ke&65280)>>8,Ie.data[35]=Ke&255);const ut=it-Ke-(Ge.length-Ke*4>>1);if(ut>0){const St=new Uint8Array(Ge.length+ut*2);St.set(Ge.data),gt&&(St[Ge.length]=Ge.data[2],St[Ge.length+1]=Ge.data[3]),Ge.data=St}}function Pe(Xe,Ie,Ge,Ve,it,gt){const nt={length:0,sizeOfInstructions:0};if(Ge-Ie<=12)return nt;const Ke=Xe.subarray(Ie,Ge);let at=P(Ke[0],Ke[1]);if(at<0)return at=-1,p(Ke,0,at),Ve.set(Ke,it),nt.length=Ke.length,nt;let ut,St=10,bt=0;for(ut=0;ut<at;ut++)bt=(Ke[St]<<8|Ke[St+1])+1,St+=2;const ft=St,we=Ke[St]<<8|Ke[St+1];nt.sizeOfInstructions=we,St+=2+we;const _e=St;let $e=0;for(ut=0;ut<bt;ut++){const et=Ke[St++];et&192&&(Ke[St-1]=et&63);let xt=2;et&2?xt=1:et&16&&(xt=0);let Et=2;et&4?Et=1:et&32&&(Et=0);const yt=xt+Et;if($e+=yt,et&8){const wt=Ke[St++];ut+=wt,$e+=wt*yt}}if($e===0)return nt;let je=St+$e;return je>Ke.length?nt:!gt&&we>0?(Ve.set(Ke.subarray(0,ft),it),Ve.set([0,0],it+ft),Ve.set(Ke.subarray(_e,je),it+ft+2),je-=we,Ke.length-je>3&&(je=je+3&-4),nt.length=je,nt):Ke.length-je>3?(je=je+3&-4,Ve.set(Ke.subarray(0,je),it),nt.length=je,nt):(Ve.set(Ke,it),nt.length=Ke.length,nt)}function ue(Xe,Ie,Ge){const Ve=Xe.data,it=E(Ve[0],Ve[1],Ve[2],Ve[3]);it>>16!==1&&((0,t.info)("Attempting to fix invalid version in head table: "+it),Ve[0]=0,Ve[1]=1,Ve[2]=0,Ve[3]=0);const gt=y(Ve[50],Ve[51]);if(gt<0||gt>1){(0,t.info)("Attempting to fix invalid indexToLocFormat in head table: "+gt);const nt=Ie+1;if(Ge===nt<<1)Ve[50]=0,Ve[51]=0;else if(Ge===nt<<2)Ve[50]=0,Ve[51]=1;else throw new t.FormatError("Could not fix indexToLocFormat: "+gt)}}function ye(Xe,Ie,Ge,Ve,it,gt,nt){let Ke,at,ut;Ve?(Ke=4,at=function(Pt,Bt){return Pt[Bt]<<24|Pt[Bt+1]<<16|Pt[Bt+2]<<8|Pt[Bt+3]},ut=function(Pt,Bt,Ht){Pt[Bt]=Ht>>>24&255,Pt[Bt+1]=Ht>>16&255,Pt[Bt+2]=Ht>>8&255,Pt[Bt+3]=Ht&255}):(Ke=2,at=function(Pt,Bt){return Pt[Bt]<<9|Pt[Bt+1]<<1},ut=function(Pt,Bt,Ht){Pt[Bt]=Ht>>9&255,Pt[Bt+1]=Ht>>1&255});const St=gt?Ge+1:Ge,bt=Ke*(1+St),ft=new Uint8Array(bt);ft.set(Xe.data.subarray(0,bt)),Xe.data=ft;const we=Ie.data,_e=we.length,$e=new Uint8Array(_e);let je,et;const xt=[];for(je=0,et=0;je<Ge+1;je++,et+=Ke){let wt=at(ft,et);wt>_e&&(wt=_e),xt.push({index:je,offset:wt,endOffset:0})}for(xt.sort((wt,Pt)=>wt.offset-Pt.offset),je=0;je<Ge;je++)xt[je].endOffset=xt[je+1].offset;for(xt.sort((wt,Pt)=>wt.index-Pt.index),je=0;je<Ge;je++){const{offset:wt,endOffset:Pt}=xt[je];if(wt!==0||Pt!==0)break;const Bt=xt[je+1].offset;if(Bt!==0){xt[je].endOffset=Bt;break}}const Et=Object.create(null);let yt=0;for(ut(ft,0,yt),je=0,et=Ke;je<Ge;je++,et+=Ke){const wt=Pe(we,xt[je].offset,xt[je].endOffset,$e,yt,it),Pt=wt.length;Pt===0&&(Et[je]=!0),wt.sizeOfInstructions>nt&&(nt=wt.sizeOfInstructions),yt+=Pt,ut(ft,et,yt)}if(yt===0){const wt=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,49,0]);for(je=0,et=Ke;je<St;je++,et+=Ke)ut(ft,et,wt.length);Ie.data=wt}else if(gt){const wt=at(ft,Ke);$e.length>wt+yt?Ie.data=$e.subarray(0,wt+yt):(Ie.data=new Uint8Array(wt+yt),Ie.data.set($e.subarray(0,yt))),Ie.data.set($e.subarray(0,wt),yt),ut(Xe.data,ft.length-Ke,yt+wt)}else Ie.data=$e.subarray(0,yt);return{missingGlyphs:Et,maxSizeOfInstructions:nt}}function le(Xe,Ie,Ge){const Ve=(ne.start||0)+Xe.offset;ne.pos=Ve;const it=Xe.length,gt=Ve+it,nt=ne.getInt32();ne.skip(28);let Ke,at=!0,ut;switch(nt){case 65536:Ke=c.MacStandardGlyphOrdering;break;case 131072:const St=ne.getUint16();if(St!==Ge){at=!1;break}const bt=[];for(ut=0;ut<St;++ut){const _e=ne.getUint16();if(_e>=32768){at=!1;break}bt.push(_e)}if(!at)break;const ft=[],we=[];for(;ne.pos<gt;){const _e=ne.getByte();for(we.length=_e,ut=0;ut<_e;++ut)we[ut]=String.fromCharCode(ne.getByte());ft.push(we.join(""))}for(Ke=[],ut=0;ut<St;++ut){const _e=bt[ut];if(_e<258){Ke.push(c.MacStandardGlyphOrdering[_e]);continue}Ke.push(ft[_e-258])}break;case 196608:break;default:(0,t.warn)("Unknown/unsupported post table version "+nt),at=!1,Ie.defaultEncoding&&(Ke=Ie.defaultEncoding);break}return Ie.glyphNames=Ke,at}function he(Xe){const Ie=(ne.start||0)+Xe.offset;ne.pos=Ie;const Ge=[[],[]],Ve=Xe.length,it=Ie+Ve;if(ne.getUint16()!==0||Ve<6)return Ge;const Ke=ne.getUint16(),at=ne.getUint16(),ut=[],St=12;let bt,ft;for(bt=0;bt<Ke&&ne.pos+St<=it;bt++){const we={platform:ne.getUint16(),encoding:ne.getUint16(),language:ne.getUint16(),name:ne.getUint16(),length:ne.getUint16(),offset:ne.getUint16()};(we.platform===1&&we.encoding===0&&we.language===0||we.platform===3&&we.encoding===1&&we.language===1033)&&ut.push(we)}for(bt=0,ft=ut.length;bt<ft;bt++){const we=ut[bt];if(we.length<=0)continue;const _e=Ie+at+we.offset;if(_e+we.length>it)continue;ne.pos=_e;const $e=we.name;if(we.encoding){let je="";for(let et=0,xt=we.length;et<xt;et+=2)je+=String.fromCharCode(ne.getUint16());Ge[1][$e]=je}else Ge[0][$e]=ne.getString(we.length)}return Ge}const ce=[0,0,0,0,0,0,0,0,-2,-2,-2,-2,0,0,-2,-5,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,-1,-1,1,-1,-999,0,1,0,-1,-2,0,-1,-2,-1,-1,0,-1,-1,0,0,-999,-999,-1,-1,-1,-1,-2,-999,-2,-2,-999,0,-2,-2,0,0,-2,0,-2,0,0,0,-2,-1,-1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,0,-999,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,-2,-999,-999,-999,-999,-999,-1,-1,-2,-2,0,0,0,0,-1,-1,-999,-2,-2,0,0,-1,-2,-2,0,0,0,-1,-1,-1,-2];function Te(Xe,Ie){let Ge=Xe.data,Ve=0,it,gt,nt,Ke,at,ut=0,St=0;const bt=[],ft=[],we=[];let _e=Ie.tooComplexToFollowFunctions,$e=!1,je=0,et=0;for(let Et=Ge.length;Ve<Et;){const yt=Ge[Ve++];if(yt===64)if(gt=Ge[Ve++],$e||et)Ve+=gt;else for(it=0;it<gt;it++)bt.push(Ge[Ve++]);else if(yt===65)if(gt=Ge[Ve++],$e||et)Ve+=gt*2;else for(it=0;it<gt;it++)nt=Ge[Ve++],bt.push(nt<<8|Ge[Ve++]);else if((yt&248)===176)if(gt=yt-176+1,$e||et)Ve+=gt;else for(it=0;it<gt;it++)bt.push(Ge[Ve++]);else if((yt&248)===184)if(gt=yt-184+1,$e||et)Ve+=gt*2;else for(it=0;it<gt;it++)nt=Ge[Ve++],bt.push(nt<<8|Ge[Ve++]);else if(yt===43&&!_e){if(!$e&&!et){if(Ke=bt.at(-1),isNaN(Ke))(0,t.info)("TT: CALL empty stack (or invalid entry).");else if(Ie.functionsUsed[Ke]=!0,Ke in Ie.functionsStackDeltas){const wt=bt.length+Ie.functionsStackDeltas[Ke];if(wt<0){(0,t.warn)("TT: CALL invalid functions stack delta."),Ie.hintsValid=!1;return}bt.length=wt}else if(Ke in Ie.functionsDefined&&!we.includes(Ke)){if(ft.push({data:Ge,i:Ve,stackTop:bt.length-1}),we.push(Ke),at=Ie.functionsDefined[Ke],!at){(0,t.warn)("TT: CALL non-existent function"),Ie.hintsValid=!1;return}Ge=at.data,Ve=at.i}}}else if(yt===44&&!_e)($e||et)&&((0,t.warn)("TT: nested FDEFs not allowed"),_e=!0),$e=!0,St=Ve,Ke=bt.pop(),Ie.functionsDefined[Ke]={data:Ge,i:Ve};else if(yt===45)if($e)$e=!1,ut=Ve;else{if(at=ft.pop(),!at){(0,t.warn)("TT: ENDF bad stack"),Ie.hintsValid=!1;return}Ke=we.pop(),Ge=at.data,Ve=at.i,Ie.functionsStackDeltas[Ke]=bt.length-at.stackTop}else if(yt===137)($e||et)&&((0,t.warn)("TT: nested IDEFs not allowed"),_e=!0),$e=!0,St=Ve;else if(yt===88)++je;else if(yt===27)et=je;else if(yt===89)et===je&&(et=0),--je;else if(yt===28&&!$e&&!et){const wt=bt.at(-1);wt>0&&(Ve+=wt-1)}if(!$e&&!et){let wt=0;for(yt<=142?wt=ce[yt]:yt>=192&&yt<=223?wt=-1:yt>=224&&(wt=-2),yt>=113&&yt<=117&&(gt=bt.pop(),isNaN(gt)||(wt=-gt*2));wt<0&&bt.length>0;)bt.pop(),wt++;for(;wt>0;)bt.push(NaN),wt--}}Ie.tooComplexToFollowFunctions=_e;const xt=[Ge];Ve>Ge.length&&xt.push(new Uint8Array(Ve-Ge.length)),St>ut&&((0,t.warn)("TT: complementing a missing function tail"),xt.push(new Uint8Array([34,45]))),He(Xe,xt)}function Re(Xe,Ie){if(!Xe.tooComplexToFollowFunctions){if(Xe.functionsDefined.length>Ie){(0,t.warn)("TT: more functions defined than expected"),Xe.hintsValid=!1;return}for(let Ge=0,Ve=Xe.functionsUsed.length;Ge<Ve;Ge++){if(Ge>Ie){(0,t.warn)("TT: invalid function id: "+Ge),Xe.hintsValid=!1;return}if(Xe.functionsUsed[Ge]&&!Xe.functionsDefined[Ge]){(0,t.warn)("TT: undefined function: "+Ge),Xe.hintsValid=!1;return}}}}function He(Xe,Ie){if(Ie.length>1){let Ge=0,Ve,it;for(Ve=0,it=Ie.length;Ve<it;Ve++)Ge+=Ie[Ve].length;Ge=Ge+3&-4;const gt=new Uint8Array(Ge);let nt=0;for(Ve=0,it=Ie.length;Ve<it;Ve++)gt.set(Ie[Ve],nt),nt+=Ie[Ve].length;Xe.data=gt,Xe.length=Ge}}function Ce(Xe,Ie,Ge,Ve){const it={functionsDefined:[],functionsUsed:[],functionsStackDeltas:[],tooComplexToFollowFunctions:!1,hintsValid:!0};if(Xe&&Te(Xe,it),Ie&&Te(Ie,it),Xe&&Re(it,Ve),Ge&&Ge.length&1){const gt=new Uint8Array(Ge.length+1);gt.set(Ge.data),Ge.data=gt}return it.hintsValid}ne=new A.Stream(new Uint8Array(ne.getBytes()));let ve,fe;if(b(ne)){const Xe=Ae(ne,this.name);ve=Xe.header,fe=Xe.tables}else ve=me(ne),fe=se(ne,ve.numTables);let We,Ue;const ze=!fe["CFF "];if(ze){if(!fe.loca)throw new t.FormatError('Required "loca" table is not found');fe.glyf||((0,t.warn)('Required "glyf" table is not found -- trying to recover.'),fe.glyf={tag:"glyf",data:new Uint8Array(0)}),this.isOpenType=!1}else{const Xe=re.composite&&((re.cidToGidMap||[]).length>0||!(re.cMap instanceof g.IdentityCMap));if(ve.version==="OTTO"&&!Xe||!fe.head||!fe.hhea||!fe.maxp||!fe.post)return Ue=new A.Stream(fe["CFF "].data),We=new l.CFFFont(Ue,re),j(re),this.convert(J,We,re);delete fe.glyf,delete fe.loca,delete fe.fpgm,delete fe.prep,delete fe["cvt "],this.isOpenType=!0}if(!fe.maxp)throw new t.FormatError('Required "maxp" table is not found');ne.pos=(ne.start||0)+fe.maxp.offset;const tt=ne.getInt32(),Ne=ne.getUint16();if(re.scaleFactors&&re.scaleFactors.length===Ne&&ze){const{scaleFactors:Xe}=re,Ie=y(fe.head.data[50],fe.head.data[51]),Ge=new i.GlyfTable({glyfTable:fe.glyf.data,isGlyphLocationsLong:Ie,locaTable:fe.loca.data,numGlyphs:Ne});Ge.scale(Xe);const{glyf:Ve,loca:it,isLocationLong:gt}=Ge.write();fe.glyf.data=Ve,fe.loca.data=it,gt!==!!Ie&&(fe.head.data[50]=0,fe.head.data[51]=gt?1:0);const nt=fe.hmtx.data;for(let Ke=0;Ke<Ne;Ke++){const at=4*Ke,ut=Math.round(Xe[Ke]*y(nt[at],nt[at+1]));nt[at]=ut>>8&255,nt[at+1]=ut&255;const St=Math.round(Xe[Ke]*P(nt[at+2],nt[at+3]));p(nt,at+2,St)}}let Qe=Ne+1,ct=!0;Qe>65535&&(ct=!1,Qe=Ne,(0,t.warn)("Not enough space in glyfs to duplicate first glyph."));let Ee=0,rt=0;tt>=65536&&fe.maxp.length>=22&&(ne.pos+=8,ne.getUint16()>2&&(fe.maxp.data[14]=0,fe.maxp.data[15]=2),ne.pos+=4,Ee=ne.getUint16(),ne.pos+=4,rt=ne.getUint16()),fe.maxp.data[4]=Qe>>8,fe.maxp.data[5]=Qe&255;const Ze=Ce(fe.fpgm,fe.prep,fe["cvt "],Ee);if(Ze||(delete fe.fpgm,delete fe.prep,delete fe["cvt "]),Fe(ne,fe.hhea,fe.hmtx,fe.head,Qe,ct),!fe.head)throw new t.FormatError('Required "head" table is not found');ue(fe.head,Ne,ze?fe.loca.length:0);let vt=Object.create(null);if(ze){const Xe=y(fe.head.data[50],fe.head.data[51]),Ie=ye(fe.loca,fe.glyf,Ne,Xe,Ze,ct,rt);vt=Ie.missingGlyphs,tt>=65536&&fe.maxp.length>=22&&(fe.maxp.data[26]=Ie.maxSizeOfInstructions>>8,fe.maxp.data[27]=Ie.maxSizeOfInstructions&255)}if(!fe.hhea)throw new t.FormatError('Required "hhea" table is not found');fe.hhea.data[10]===0&&fe.hhea.data[11]===0&&(fe.hhea.data[10]=255,fe.hhea.data[11]=255);const lt={unitsPerEm:y(fe.head.data[18],fe.head.data[19]),yMax:y(fe.head.data[42],fe.head.data[43]),yMin:P(fe.head.data[38],fe.head.data[39]),ascent:P(fe.hhea.data[4],fe.hhea.data[5]),descent:P(fe.hhea.data[6],fe.hhea.data[7]),lineGap:P(fe.hhea.data[8],fe.hhea.data[9])};this.ascent=lt.ascent/lt.unitsPerEm,this.descent=lt.descent/lt.unitsPerEm,this.lineGap=lt.lineGap/lt.unitsPerEm,this.cssFontInfo&&this.cssFontInfo.lineHeight?(this.lineHeight=this.cssFontInfo.metrics.lineHeight,this.lineGap=this.cssFontInfo.metrics.lineGap):this.lineHeight=this.ascent-this.descent+this.lineGap,fe.post&&le(fe.post,re,Ne),fe.post={tag:"post",data:H(re)};const ht=[];function ot(Xe){return!vt[Xe]}if(re.composite){const Xe=re.cidToGidMap||[],Ie=Xe.length===0;re.cMap.forEach(function(Ge,Ve){if(typeof Ve=="string"&&(Ve=I(Ge,Ve,!0)),Ve>65535)throw new t.FormatError("Max size of CID is 65,535");let it=-1;Ie?it=Ve:Xe[Ve]!==void 0&&(it=Xe[Ve]),it>=0&&it<Ne&&ot(it)&&(ht[Ge]=it)})}else{const Xe=Se(fe.cmap,ne,this.isSymbolicFont,re.hasEncoding),Ie=Xe.platformId,Ge=Xe.encodingId,Ve=Xe.mappings,it=Ve.length;let gt=[],nt=!1;if(re.hasEncoding&&(re.baseEncodingName==="MacRomanEncoding"||re.baseEncodingName==="WinAnsiEncoding")&&(gt=(0,a.getEncoding)(re.baseEncodingName)),re.hasEncoding&&!this.isSymbolicFont&&(Ie===3&&Ge===1||Ie===1&&Ge===0)){const Ke=(0,e.getGlyphsUnicode)();for(let at=0;at<256;at++){let ut;if(this.differences[at]!==void 0?ut=this.differences[at]:gt.length&&gt[at]!==""?ut=gt[at]:ut=a.StandardEncoding[at],!ut)continue;const St=(0,c.recoverGlyphName)(ut,Ke);let bt;if(Ie===3&&Ge===1?bt=Ke[St]:Ie===1&&Ge===0&&(bt=a.MacRomanEncoding.indexOf(St)),bt===void 0){if(!re.glyphNames&&re.hasIncludedToUnicodeMap&&!(this.toUnicode instanceof n.IdentityToUnicodeMap)){const ft=this.toUnicode.get(at);ft&&(bt=ft.codePointAt(0))}if(bt===void 0)continue}for(let ft=0;ft<it;++ft)if(Ve[ft].charCode===bt){ht[at]=Ve[ft].glyphId;break}}}else if(Ie===0){for(let Ke=0;Ke<it;++Ke)ht[Ve[Ke].charCode]=Ve[Ke].glyphId;nt=!0}else for(let Ke=0;Ke<it;++Ke){let at=Ve[Ke].charCode;Ie===3&&at>=61440&&at<=61695&&(at&=255),ht[at]=Ve[Ke].glyphId}if(re.glyphNames&&(gt.length||this.differences.length))for(let Ke=0;Ke<256;++Ke){if(!nt&&ht[Ke]!==void 0)continue;const at=this.differences[Ke]||gt[Ke];if(!at)continue;const ut=re.glyphNames.indexOf(at);ut>0&&ot(ut)&&(ht[Ke]=ut)}}ht.length===0&&(ht[0]=0);let Dt=Qe-1;if(ct||(Dt=0),!re.cssFontInfo){const Xe=L(ht,ot,Dt,this.toUnicode);this.toFontChar=Xe.toFontChar,fe.cmap={tag:"cmap",data:W(Xe.charCodeToGlyphId,Xe.toUnicodeExtraMap,Qe)},(!fe["OS/2"]||!z(fe["OS/2"],ne))&&(fe["OS/2"]={tag:"OS/2",data:B(re,Xe.charCodeToGlyphId,lt)})}if(!ze)try{Ue=new A.Stream(fe["CFF "].data),We=new o.CFFParser(Ue,re,c.SEAC_ANALYSIS_ENABLED).parse(),We.duplicateFirstGlyph();const Ie=new o.CFFCompiler(We);fe["CFF "].data=Ie.compile()}catch{(0,t.warn)("Failed to compile font "+re.loadedName)}if(!fe.name)fe.name={tag:"name",data:Z(this.name)};else{const Xe=he(fe.name);fe.name.data=Z(J,Xe),this.psName=Xe[0][6]||null}const Ot=new x.OpenTypeFileBuilder(ve.version);for(const Xe in fe)Ot.addTable(Xe,fe[Xe].data);return Ot.toArray()}convert(J,ne,re){re.fixedPitch=!1,re.builtInEncoding&&O(re,re.builtInEncoding);let ae=1;ne instanceof l.CFFFont&&(ae=ne.numGlyphs-1);const se=ne.getGlyphMapping(re);let oe=null,me=se,xe=null;re.cssFontInfo||(oe=L(se,ne.hasGlyphId.bind(ne),ae,this.toUnicode),this.toFontChar=oe.toFontChar,me=oe.charCodeToGlyphId,xe=oe.toUnicodeExtraMap);const Ae=ne.numGlyphs;function Se(le,he){let ce=null;for(const Te in le)he===le[Te]&&(ce||(ce=[]),ce.push(Te|0));return ce}function Fe(le,he){for(const ce in le)if(he===le[ce])return ce|0;return oe.charCodeToGlyphId[oe.nextAvailableFontCharCode]=he,oe.nextAvailableFontCharCode++}const Pe=ne.seacs;if(oe&&c.SEAC_ANALYSIS_ENABLED&&Pe&&Pe.length){const le=re.fontMatrix||t.FONT_IDENTITY_MATRIX,he=ne.getCharset(),ce=Object.create(null);for(let Te in Pe){Te|=0;const Re=Pe[Te],He=a.StandardEncoding[Re[2]],Ce=a.StandardEncoding[Re[3]],ve=he.indexOf(He),fe=he.indexOf(Ce);if(ve<0||fe<0)continue;const We={x:Re[0]*le[0]+Re[1]*le[2]+le[4],y:Re[0]*le[1]+Re[1]*le[3]+le[5]},Ue=Se(se,Te);if(Ue)for(let ze=0,tt=Ue.length;ze<tt;ze++){const Ne=Ue[ze],Qe=oe.charCodeToGlyphId,ct=Fe(Qe,ve),Ee=Fe(Qe,fe);ce[Ne]={baseFontCharCode:ct,accentFontCharCode:Ee,accentOffset:We}}}re.seacMap=ce}const ue=1/(re.fontMatrix||t.FONT_IDENTITY_MATRIX)[0],ye=new x.OpenTypeFileBuilder("OTTO");return ye.addTable("CFF ",ne.data),ye.addTable("OS/2",B(re,me)),ye.addTable("cmap",W(me,xe,Ae)),ye.addTable("head","\0\0\0\0\0\0\0\0\0\0_<õ\0\0"+F(ue)+"\0\0\0\0\v~'\0\0\0\0\v~'\0\0"+F(re.descent)+"ÿ"+F(re.ascent)+S(re.italicAngle?2:0)+"\0\0\0\0\0\0\0"),ye.addTable("hhea","\0\0\0"+F(re.ascent)+F(re.descent)+"\0\0ÿÿ\0\0\0\0\0\0"+F(re.capHeight)+F(Math.tan(re.italicAngle)*re.xHeight)+"\0\0\0\0\0\0\0\0\0\0\0\0"+S(Ae)),ye.addTable("hmtx",function(){const he=ne.charstrings,ce=ne.cff?ne.cff.widths:null;let Te="\0\0\0\0";for(let Re=1,He=Ae;Re<He;Re++){let Ce=0;if(he){const ve=he[Re-1];Ce="width"in ve?ve.width:0}else ce&&(Ce=Math.ceil(ce[Re]||0));Te+=S(Ce)+S(0)}return Te}()),ye.addTable("maxp","\0\0P\0"+S(Ae)),ye.addTable("name",Z(J)),ye.addTable("post",H(re)),ye.toArray()}get spaceWidth(){const J=["space","minus","one","i","I"];let ne;for(let re=0,ae=J.length;re<ae;re++){const se=J[re];if(se in this.widths){ne=this.widths[se];break}const me=(0,e.getGlyphsUnicode)()[se];let xe=0;if(this.composite&&this.cMap.contains(me)&&(xe=this.cMap.lookup(me),typeof xe=="string"&&(xe=I(me,xe))),!xe&&this.toUnicode&&(xe=this.toUnicode.charCodeOf(me)),xe<=0&&(xe=me),ne=this.widths[xe],ne)break}return ne=ne||this.defaultWidth,(0,t.shadow)(this,"spaceWidth",ne)}_charToGlyph(J,ne=!1){let re,ae,se,oe=J;this.cMap&&this.cMap.contains(J)&&(oe=this.cMap.lookup(J),typeof oe=="string"&&(oe=I(J,oe))),ae=this.widths[oe],typeof ae!="number"&&(ae=this.defaultWidth);const me=this.vmetrics&&this.vmetrics[oe];let xe=this.toUnicode.get(J)||J;typeof xe=="number"&&(xe=String.fromCharCode(xe));let Ae=this.toFontChar[J]!==void 0;if(re=this.toFontChar[J]||J,this.missingFile){const ue=this.differences[J]||this.defaultEncoding[J];(ue===".notdef"||ue==="")&&this.type==="Type1"&&(re=32),re=(0,s.mapSpecialUnicodeValues)(re)}this.isType3Font&&(se=re);let Se=null;if(this.seacMap&&this.seacMap[J]){Ae=!0;const ue=this.seacMap[J];re=ue.baseFontCharCode,Se={fontChar:String.fromCodePoint(ue.accentFontCharCode),offset:ue.accentOffset}}let Fe="";typeof re=="number"&&(re<=1114111?Fe=String.fromCodePoint(re):(0,t.warn)(`charToGlyph - invalid fontCharCode: ${re}`));let Pe=this._glyphCache[J];return(!Pe||!Pe.matchesForCache(J,Fe,xe,Se,ae,me,se,ne,Ae))&&(Pe=new R(J,Fe,xe,Se,ae,me,se,ne,Ae),this._glyphCache[J]=Pe),Pe}charsToGlyphs(J){let ne=this._charsCache[J];if(ne)return ne;if(ne=[],this.cMap){const re=Object.create(null),ae=J.length;let se=0;for(;se<ae;){this.cMap.readCharCode(J,se,re);const{charcode:oe,length:me}=re;se+=me;const xe=this._charToGlyph(oe,me===1&&J.charCodeAt(se-1)===32);ne.push(xe)}}else for(let re=0,ae=J.length;re<ae;++re){const se=J.charCodeAt(re),oe=this._charToGlyph(se,se===32);ne.push(oe)}return this._charsCache[J]=ne}getCharPositions(J){const ne=[];if(this.cMap){const re=Object.create(null);let ae=0;for(;ae<J.length;){this.cMap.readCharCode(J,ae,re);const se=re.length;ne.push([ae,ae+se]),ae+=se}}else for(let re=0,ae=J.length;re<ae;++re)ne.push([re,re+1]);return ne}get glyphCacheValues(){return Object.values(this._glyphCache)}encodeString(J){const ne=[],re=[],ae=()=>ne.length%2===1,se=this.toUnicode instanceof n.IdentityToUnicodeMap?oe=>this.toUnicode.charCodeOf(oe):oe=>this.toUnicode.charCodeOf(String.fromCodePoint(oe));for(let oe=0,me=J.length;oe<me;oe++){const xe=J.codePointAt(oe);if(xe>55295&&(xe<57344||xe>65533)&&oe++,this.toUnicode){const Ae=se(xe);if(Ae!==-1){ae()&&(ne.push(re.join("")),re.length=0);const Se=this.cMap?this.cMap.getCharCodeLength(Ae):1;for(let Fe=Se-1;Fe>=0;Fe--)re.push(String.fromCharCode(Ae>>8*Fe&255));continue}}ae()||(ne.push(re.join("")),re.length=0),re.push(String.fromCodePoint(xe))}return ne.push(re.join("")),ne}}f.Font=te;class Q{constructor(J){this.error=J,this.loadedName="g_font_error",this.missingFile=!0}charsToGlyphs(){return[]}encodeString(J){return[J]}exportData(J=!1){return{error:this.error}}}f.ErrorFont=Q},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.CFFTopDict=f.CFFStrings=f.CFFStandardStrings=f.CFFPrivateDict=f.CFFParser=f.CFFIndex=f.CFFHeader=f.CFFFDSelect=f.CFFCompiler=f.CFFCharset=f.CFF=void 0;var t=h(2),o=h(36),c=h(37);const s=10,e=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];f.CFFStandardStrings=e;const a=391,r=[null,{id:"hstem",min:2,stackClearing:!0,stem:!0},null,{id:"vstem",min:2,stackClearing:!0,stem:!0},{id:"vmoveto",min:1,stackClearing:!0},{id:"rlineto",min:2,resetStack:!0},{id:"hlineto",min:1,resetStack:!0},{id:"vlineto",min:1,resetStack:!0},{id:"rrcurveto",min:6,resetStack:!0},null,{id:"callsubr",min:1,undefStack:!0},{id:"return",min:0,undefStack:!0},null,null,{id:"endchar",min:0,stackClearing:!0},null,null,null,{id:"hstemhm",min:2,stackClearing:!0,stem:!0},{id:"hintmask",min:0,stackClearing:!0},{id:"cntrmask",min:0,stackClearing:!0},{id:"rmoveto",min:2,stackClearing:!0},{id:"hmoveto",min:1,stackClearing:!0},{id:"vstemhm",min:2,stackClearing:!0,stem:!0},{id:"rcurveline",min:8,resetStack:!0},{id:"rlinecurve",min:8,resetStack:!0},{id:"vvcurveto",min:4,resetStack:!0},{id:"hhcurveto",min:4,resetStack:!0},null,{id:"callgsubr",min:1,undefStack:!0},{id:"vhcurveto",min:4,resetStack:!0},{id:"hvcurveto",min:4,resetStack:!0}],n=[null,null,null,{id:"and",min:2,stackDelta:-1},{id:"or",min:2,stackDelta:-1},{id:"not",min:1,stackDelta:0},null,null,null,{id:"abs",min:1,stackDelta:0},{id:"add",min:2,stackDelta:-1,stackFn(R,y){R[y-2]=R[y-2]+R[y-1]}},{id:"sub",min:2,stackDelta:-1,stackFn(R,y){R[y-2]=R[y-2]-R[y-1]}},{id:"div",min:2,stackDelta:-1,stackFn(R,y){R[y-2]=R[y-2]/R[y-1]}},null,{id:"neg",min:1,stackDelta:0,stackFn(R,y){R[y-1]=-R[y-1]}},{id:"eq",min:2,stackDelta:-1},null,null,{id:"drop",min:1,stackDelta:-1},null,{id:"put",min:2,stackDelta:-2},{id:"get",min:1,stackDelta:0},{id:"ifelse",min:4,stackDelta:-3},{id:"random",min:0,stackDelta:1},{id:"mul",min:2,stackDelta:-1,stackFn(R,y){R[y-2]=R[y-2]*R[y-1]}},null,{id:"sqrt",min:1,stackDelta:0},{id:"dup",min:1,stackDelta:1},{id:"exch",min:2,stackDelta:0},{id:"index",min:2,stackDelta:0},{id:"roll",min:3,stackDelta:-2},null,null,null,{id:"hflex",min:7,resetStack:!0},{id:"flex",min:13,resetStack:!0},{id:"hflex1",min:9,resetStack:!0},{id:"flex1",min:11,resetStack:!0}];class l{constructor(y,p,P){this.bytes=y.getBytes(),this.properties=p,this.seacAnalysisEnabled=!!P}parse(){const y=this.properties,p=new u;this.cff=p;const P=this.parseHeader(),E=this.parseIndex(P.endPos),S=this.parseIndex(E.endPos),F=this.parseIndex(S.endPos),C=this.parseIndex(F.endPos),b=this.parseDict(S.obj.get(0)),D=this.createDict(A,b,p.strings);p.header=P.obj,p.names=this.parseNameIndex(E.obj),p.strings=this.parseStringIndex(F.obj),p.topDict=D,p.globalSubrIndex=C.obj,this.parsePrivateDict(p.topDict),p.isCIDFont=D.hasName("ROS");const U=D.getByName("CharStrings"),X=this.parseIndex(U).obj,G=D.getByName("FontMatrix");G&&(y.fontMatrix=G);const Y=D.getByName("FontBBox");Y&&(y.ascent=Math.max(Y[3],Y[1]),y.descent=Math.min(Y[1],Y[3]),y.ascentScaled=!0);let N,I;if(p.isCIDFont){const $=this.parseIndex(D.getByName("FDArray")).obj;for(let W=0,z=$.count;W<z;++W){const B=$.get(W),H=this.createDict(A,this.parseDict(B),p.strings);this.parsePrivateDict(H),p.fdArray.push(H)}I=null,N=this.parseCharsets(D.getByName("charset"),X.count,p.strings,!0),p.fdSelect=this.parseFDSelect(D.getByName("FDSelect"),X.count)}else N=this.parseCharsets(D.getByName("charset"),X.count,p.strings,!1),I=this.parseEncoding(D.getByName("Encoding"),y,p.strings,N.charset);p.charset=N,p.encoding=I;const L=this.parseCharStrings({charStrings:X,localSubrIndex:D.privateDict.subrsIndex,globalSubrIndex:C.obj,fdSelect:p.fdSelect,fdArray:p.fdArray,privateDict:D.privateDict});return p.charStrings=L.charStrings,p.seacs=L.seacs,p.widths=L.widths,p}parseHeader(){let y=this.bytes;const p=y.length;let P=0;for(;P<p&&y[P]!==1;)++P;if(P>=p)throw new t.FormatError("Invalid CFF header");P!==0&&((0,t.info)("cff data is shifted"),y=y.subarray(P),this.bytes=y);const E=y[0],S=y[1],F=y[2],C=y[3];return{obj:new d(E,S,F,C),endPos:F}}parseDict(y){let p=0;function P(){let b=y[p++];return b===30?E():b===28?(b=y[p++],b=(b<<24|y[p++]<<16)>>16,b):b===29?(b=y[p++],b=b<<8|y[p++],b=b<<8|y[p++],b=b<<8|y[p++],b):b>=32&&b<=246?b-139:b>=247&&b<=250?(b-247)*256+y[p++]+108:b>=251&&b<=254?-((b-251)*256)-y[p++]-108:((0,t.warn)('CFFParser_parseDict: "'+b+'" is a reserved command.'),NaN)}function E(){let b="";const U=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"],X=y.length;for(;p<X;){const G=y[p++],Y=G>>4,N=G&15;if(Y===15||(b+=U[Y],N===15))break;b+=U[N]}return parseFloat(b)}let S=[];const F=[];p=0;const C=y.length;for(;p<C;){let b=y[p];b<=21?(b===12&&(b=b<<8|y[++p]),F.push([b,S]),S=[],++p):S.push(P())}return F}parseIndex(y){const p=new g,P=this.bytes,E=P[y++]<<8|P[y++],S=[];let F=y,C,b;if(E!==0){const D=P[y++],U=y+(E+1)*D-1;for(C=0,b=E+1;C<b;++C){let X=0;for(let G=0;G<D;++G)X<<=8,X+=P[y++];S.push(U+X)}F=S[E]}for(C=0,b=S.length-1;C<b;++C){const D=S[C],U=S[C+1];p.add(P.subarray(D,U))}return{obj:p,endPos:F}}parseNameIndex(y){const p=[];for(let P=0,E=y.count;P<E;++P){const S=y.get(P);p.push((0,t.bytesToString)(S))}return p}parseStringIndex(y){const p=new i;for(let P=0,E=y.count;P<E;++P){const S=y.get(P);p.add((0,t.bytesToString)(S))}return p}createDict(y,p,P){const E=new y(P);for(let S=0,F=p.length;S<F;++S){const C=p[S],b=C[0],D=C[1];E.setByKey(b,D)}return E}parseCharString(y,p,P,E){if(!p||y.callDepth>s)return!1;let S=y.stackSize;const F=y.stack,C=p.length;for(let b=0;b<C;){const D=p[b++];let U=null;if(D===12){const X=p[b++];X===0?(p[b-2]=139,p[b-1]=22,S=0):U=n[X]}else if(D===28)F[S]=(p[b]<<24|p[b+1]<<16)>>16,b+=2,S++;else if(D===14){if(S>=4&&(S-=4,this.seacAnalysisEnabled))return y.seac=F.slice(S,S+4),!1;U=r[D]}else if(D>=32&&D<=246)F[S]=D-139,S++;else if(D>=247&&D<=254)F[S]=D<251?(D-247<<8)+p[b]+108:-(D-251<<8)-p[b]-108,b++,S++;else if(D===255)F[S]=(p[b]<<24|p[b+1]<<16|p[b+2]<<8|p[b+3])/65536,b+=4,S++;else if(D===19||D===20)y.hints+=S>>1,b+=y.hints+7>>3,S%=2,U=r[D];else if(D===10||D===29){let X;if(D===10?X=P:X=E,!X)return U=r[D],(0,t.warn)("Missing subrsIndex for "+U.id),!1;let G=32768;X.count<1240?G=107:X.count<33900&&(G=1131);const Y=F[--S]+G;if(Y<0||Y>=X.count||isNaN(Y))return U=r[D],(0,t.warn)("Out of bounds subrIndex for "+U.id),!1;if(y.stackSize=S,y.callDepth++,!this.parseCharString(y,X.get(Y),P,E))return!1;y.callDepth--,S=y.stackSize;continue}else{if(D===11)return y.stackSize=S,!0;D===0&&b===p.length?(p[b-1]=14,U=r[14]):U=r[D]}if(U){if(U.stem&&(y.hints+=S>>1,D===3||D===23?y.hasVStems=!0:y.hasVStems&&(D===1||D===18)&&((0,t.warn)("CFF stem hints are in wrong order"),p[b-1]=D===1?3:23)),"min"in U&&!y.undefStack&&S<U.min)return(0,t.warn)("Not enough parameters for "+U.id+"; actual: "+S+", expected: "+U.min),S===0?(p[b-1]=14,!0):!1;y.firstStackClearing&&U.stackClearing&&(y.firstStackClearing=!1,S-=U.min,S>=2&&U.stem?S%=2:S>1&&(0,t.warn)("Found too many parameters for stack-clearing command"),S>0&&(y.width=F[S-1])),"stackDelta"in U?("stackFn"in U&&U.stackFn(F,S),S+=U.stackDelta):U.stackClearing?S=0:U.resetStack?(S=0,y.undefStack=!1):U.undefStack&&(S=0,y.undefStack=!0,y.firstStackClearing=!1)}}return y.stackSize=S,!0}parseCharStrings({charStrings:y,localSubrIndex:p,globalSubrIndex:P,fdSelect:E,fdArray:S,privateDict:F}){const C=[],b=[],D=y.count;for(let U=0;U<D;U++){const X=y.get(U),G={callDepth:0,stackSize:0,stack:[],undefStack:!0,hints:0,firstStackClearing:!0,seac:null,width:null,hasVStems:!1};let Y=!0,N=null,I=F;if(E&&S.length){const L=E.getFDIndex(U);L===-1&&((0,t.warn)("Glyph index is not in fd select."),Y=!1),L>=S.length&&((0,t.warn)("Invalid fd index for glyph index."),Y=!1),Y&&(I=S[L].privateDict,N=I.subrsIndex)}else p&&(N=p);if(Y&&(Y=this.parseCharString(G,X,N,P)),G.width!==null){const L=I.getByName("nominalWidthX");b[U]=L+G.width}else{const L=I.getByName("defaultWidthX");b[U]=L}G.seac!==null&&(C[U]=G.seac),Y||y.set(U,new Uint8Array([14]))}return{charStrings:y,seacs:C,widths:b}}emptyPrivateDictionary(y){const p=this.createDict(v,[],y.strings);y.setByKey(18,[0,0]),y.privateDict=p}parsePrivateDict(y){if(!y.hasName("Private")){this.emptyPrivateDictionary(y);return}const p=y.getByName("Private");if(!Array.isArray(p)||p.length!==2){y.removeByName("Private");return}const P=p[0],E=p[1];if(P===0||E>=this.bytes.length){this.emptyPrivateDictionary(y);return}const S=E+P,F=this.bytes.subarray(E,S),C=this.parseDict(F),b=this.createDict(v,C,y.strings);if(y.privateDict=b,!b.getByName("Subrs"))return;const D=b.getByName("Subrs"),U=E+D;if(D===0||U>=this.bytes.length){this.emptyPrivateDictionary(y);return}const X=this.parseIndex(U);b.subrsIndex=X.obj}parseCharsets(y,p,P,E){if(y===0)return new K(!0,_.ISO_ADOBE,o.ISOAdobeCharset);if(y===1)return new K(!0,_.EXPERT,o.ExpertCharset);if(y===2)return new K(!0,_.EXPERT_SUBSET,o.ExpertSubsetCharset);const S=this.bytes,F=y,C=S[y++],b=[E?0:".notdef"];let D,U,X;switch(p-=1,C){case 0:for(X=0;X<p;X++)D=S[y++]<<8|S[y++],b.push(E?D:P.get(D));break;case 1:for(;b.length<=p;)for(D=S[y++]<<8|S[y++],U=S[y++],X=0;X<=U;X++)b.push(E?D++:P.get(D++));break;case 2:for(;b.length<=p;)for(D=S[y++]<<8|S[y++],U=S[y++]<<8|S[y++],X=0;X<=U;X++)b.push(E?D++:P.get(D++));break;default:throw new t.FormatError("Unknown charset format")}const G=y,Y=S.subarray(F,G);return new K(!1,C,b,Y)}parseEncoding(y,p,P,E){const S=Object.create(null),F=this.bytes;let C=!1,b,D,U,X=null;function G(){const Y=F[y++];for(D=0;D<Y;D++){const N=F[y++],I=(F[y++]<<8)+(F[y++]&255);S[N]=E.indexOf(P.get(I))}}if(y===0||y===1){C=!0,b=y;const Y=y?c.ExpertEncoding:c.StandardEncoding;for(D=0,U=E.length;D<U;D++){const N=Y.indexOf(E[D]);N!==-1&&(S[N]=D)}}else{const Y=y;switch(b=F[y++],b&127){case 0:const I=F[y++];for(D=1;D<=I;D++)S[F[y++]]=D;break;case 1:const L=F[y++];let $=1;for(D=0;D<L;D++){const W=F[y++],z=F[y++];for(let B=W;B<=W+z;B++)S[B]=$++}break;default:throw new t.FormatError(`Unknown encoding format: ${b} in CFF`)}const N=y;b&128&&(F[Y]&=127,G()),X=F.subarray(Y,N)}return b&=127,new M(C,b,S,X)}parseFDSelect(y,p){const P=this.bytes,E=P[y++],S=[];let F;switch(E){case 0:for(F=0;F<p;++F){const b=P[y++];S.push(b)}break;case 3:const C=P[y++]<<8|P[y++];for(F=0;F<C;++F){let b=P[y++]<<8|P[y++];F===0&&b!==0&&((0,t.warn)("parseFDSelect: The first range must have a first GID of 0 -- trying to recover."),b=0);const D=P[y++],U=P[y]<<8|P[y+1];for(let X=b;X<U;++X)S.push(D)}y+=2;break;default:throw new t.FormatError(`parseFDSelect: Unknown format "${E}".`)}if(S.length!==p)throw new t.FormatError("parseFDSelect: Invalid font data.");return new j(E,S)}}f.CFFParser=l;class u{constructor(){this.header=null,this.names=[],this.topDict=null,this.strings=new i,this.globalSubrIndex=null,this.encoding=null,this.charset=null,this.charStrings=null,this.fdArray=[],this.fdSelect=null,this.isCIDFont=!1}duplicateFirstGlyph(){if(this.charStrings.count>=65535){(0,t.warn)("Not enough space in charstrings to duplicate first glyph.");return}const y=this.charStrings.get(0);this.charStrings.add(y),this.isCIDFont&&this.fdSelect.fdSelect.push(this.fdSelect.fdSelect[0])}hasGlyphId(y){return y<0||y>=this.charStrings.count?!1:this.charStrings.get(y).length>0}}f.CFF=u;class d{constructor(y,p,P,E){this.major=y,this.minor=p,this.hdrSize=P,this.offSize=E}}f.CFFHeader=d;class i{constructor(){this.strings=[]}get(y){return y>=0&&y<=a-1?e[y]:y-a<=this.strings.length?this.strings[y-a]:e[0]}getSID(y){let p=e.indexOf(y);return p!==-1?p:(p=this.strings.indexOf(y),p!==-1?p+a:-1)}add(y){this.strings.push(y)}get count(){return this.strings.length}}f.CFFStrings=i;class g{constructor(){this.objects=[],this.length=0}add(y){this.length+=y.length,this.objects.push(y)}set(y,p){this.length+=p.length-this.objects[y].length,this.objects[y]=p}get(y){return this.objects[y]}get count(){return this.objects.length}}f.CFFIndex=g;class x{constructor(y,p){this.keyToNameMap=y.keyToNameMap,this.nameToKeyMap=y.nameToKeyMap,this.defaults=y.defaults,this.types=y.types,this.opcodes=y.opcodes,this.order=y.order,this.strings=p,this.values=Object.create(null)}setByKey(y,p){if(!(y in this.keyToNameMap))return!1;const P=p.length;if(P===0)return!0;for(let S=0;S<P;S++)if(isNaN(p[S]))return(0,t.warn)('Invalid CFFDict value: "'+p+'" for key "'+y+'".'),!0;const E=this.types[y];return(E==="num"||E==="sid"||E==="offset")&&(p=p[0]),this.values[y]=p,!0}setByName(y,p){if(!(y in this.nameToKeyMap))throw new t.FormatError(`Invalid dictionary name "${y}"`);this.values[this.nameToKeyMap[y]]=p}hasName(y){return this.nameToKeyMap[y]in this.values}getByName(y){if(!(y in this.nameToKeyMap))throw new t.FormatError(`Invalid dictionary name ${y}"`);const p=this.nameToKeyMap[y];return p in this.values?this.values[p]:this.defaults[p]}removeByName(y){delete this.values[this.nameToKeyMap[y]]}static createTables(y){const p={keyToNameMap:{},nameToKeyMap:{},defaults:{},types:{},opcodes:{},order:[]};for(let P=0,E=y.length;P<E;++P){const S=y[P],F=Array.isArray(S[0])?(S[0][0]<<8)+S[0][1]:S[0];p.keyToNameMap[F]=S[1],p.nameToKeyMap[S[1]]=F,p.types[F]=S[2],p.defaults[F]=S[3],p.opcodes[F]=Array.isArray(S[0])?S[0]:[S[0]],p.order.push(F)}return p}}const m=[[[12,30],"ROS",["sid","sid","num"],null],[[12,20],"SyntheticBase","num",null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","num",0],[[12,2],"ItalicAngle","num",0],[[12,3],"UnderlinePosition","num",-100],[[12,4],"UnderlineThickness","num",50],[[12,5],"PaintType","num",0],[[12,6],"CharstringType","num",2],[[12,7],"FontMatrix",["num","num","num","num","num","num"],[.001,0,0,.001,0,0]],[13,"UniqueID","num",null],[5,"FontBBox",["num","num","num","num"],[0,0,0,0]],[[12,8],"StrokeWidth","num",0],[14,"XUID","array",null],[15,"charset","offset",0],[16,"Encoding","offset",0],[17,"CharStrings","offset",0],[18,"Private",["offset","offset"],null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","num",0],[[12,32],"CIDFontRevision","num",0],[[12,33],"CIDFontType","num",0],[[12,34],"CIDCount","num",8720],[[12,35],"UIDBase","num",null],[[12,37],"FDSelect","offset",null],[[12,36],"FDArray","offset",null],[[12,38],"FontName","sid",null]];class A extends x{static get tables(){return(0,t.shadow)(this,"tables",this.createTables(m))}constructor(y){super(A.tables,y),this.privateDict=null}}f.CFFTopDict=A;const k=[[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","num",.039625],[[12,10],"BlueShift","num",7],[[12,11],"BlueFuzz","num",1],[10,"StdHW","num",null],[11,"StdVW","num",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","num",0],[[12,17],"LanguageGroup","num",0],[[12,18],"ExpansionFactor","num",.06],[[12,19],"initialRandomSeed","num",0],[20,"defaultWidthX","num",0],[21,"nominalWidthX","num",0],[19,"Subrs","offset",null]];class v extends x{static get tables(){return(0,t.shadow)(this,"tables",this.createTables(k))}constructor(y){super(v.tables,y),this.subrsIndex=null}}f.CFFPrivateDict=v;const _={ISO_ADOBE:0,EXPERT:1,EXPERT_SUBSET:2};class K{constructor(y,p,P,E){this.predefined=y,this.format=p,this.charset=P,this.raw=E}}f.CFFCharset=K;class M{constructor(y,p,P,E){this.predefined=y,this.format=p,this.encoding=P,this.raw=E}}class j{constructor(y,p){this.format=y,this.fdSelect=p}getFDIndex(y){return y<0||y>=this.fdSelect.length?-1:this.fdSelect[y]}}f.CFFFDSelect=j;class O{constructor(){this.offsets=Object.create(null)}isTracking(y){return y in this.offsets}track(y,p){if(y in this.offsets)throw new t.FormatError(`Already tracking location of ${y}`);this.offsets[y]=p}offset(y){for(const p in this.offsets)this.offsets[p]+=y}setEntryLocation(y,p,P){if(!(y in this.offsets))throw new t.FormatError(`Not tracking location of ${y}`);const E=P.data,S=this.offsets[y],F=5;for(let C=0,b=p.length;C<b;++C){const D=C*F+S,U=D+1,X=D+2,G=D+3,Y=D+4;if(E[D]!==29||E[U]!==0||E[X]!==0||E[G]!==0||E[Y]!==0)throw new t.FormatError("writing to an offset that is not empty");const N=p[C];E[D]=29,E[U]=N>>24&255,E[X]=N>>16&255,E[G]=N>>8&255,E[Y]=N&255}}}class T{constructor(y){this.cff=y}compile(){const y=this.cff,p={data:[],length:0,add(G){this.data=this.data.concat(G),this.length=this.data.length}},P=this.compileHeader(y.header);p.add(P);const E=this.compileNameIndex(y.names);if(p.add(E),y.isCIDFont&&y.topDict.hasName("FontMatrix")){const G=y.topDict.getByName("FontMatrix");y.topDict.removeByName("FontMatrix");for(let Y=0,N=y.fdArray.length;Y<N;Y++){const I=y.fdArray[Y];let L=G.slice(0);I.hasName("FontMatrix")&&(L=t.Util.transform(L,I.getByName("FontMatrix"))),I.setByName("FontMatrix",L)}}const S=y.topDict.getByName("XUID");S&&S.length>16&&y.topDict.removeByName("XUID"),y.topDict.setByName("charset",0);let F=this.compileTopDicts([y.topDict],p.length,y.isCIDFont);p.add(F.output);const C=F.trackers[0],b=this.compileStringIndex(y.strings.strings);p.add(b);const D=this.compileIndex(y.globalSubrIndex);if(p.add(D),y.encoding&&y.topDict.hasName("Encoding"))if(y.encoding.predefined)C.setEntryLocation("Encoding",[y.encoding.format],p);else{const G=this.compileEncoding(y.encoding);C.setEntryLocation("Encoding",[p.length],p),p.add(G)}const U=this.compileCharset(y.charset,y.charStrings.count,y.strings,y.isCIDFont);C.setEntryLocation("charset",[p.length],p),p.add(U);const X=this.compileCharStrings(y.charStrings);if(C.setEntryLocation("CharStrings",[p.length],p),p.add(X),y.isCIDFont){C.setEntryLocation("FDSelect",[p.length],p);const G=this.compileFDSelect(y.fdSelect);p.add(G),F=this.compileTopDicts(y.fdArray,p.length,!0),C.setEntryLocation("FDArray",[p.length],p),p.add(F.output);const Y=F.trackers;this.compilePrivateDicts(y.fdArray,Y,p)}return this.compilePrivateDicts([y.topDict],[C],p),p.add([0]),p.data}encodeNumber(y){return Number.isInteger(y)?this.encodeInteger(y):this.encodeFloat(y)}static get EncodeFloatRegExp(){return(0,t.shadow)(this,"EncodeFloatRegExp",/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/)}encodeFloat(y){let p=y.toString();const P=T.EncodeFloatRegExp.exec(p);if(P){const b=parseFloat("1e"+((P[2]?+P[2]:0)+P[1].length));p=(Math.round(y*b)/b).toString()}let E="",S,F;for(S=0,F=p.length;S<F;++S){const b=p[S];b==="e"?E+=p[++S]==="-"?"c":"b":b==="."?E+="a":b==="-"?E+="e":E+=b}E+=E.length&1?"f":"ff";const C=[30];for(S=0,F=E.length;S<F;S+=2)C.push(parseInt(E.substring(S,S+2),16));return C}encodeInteger(y){let p;return y>=-107&&y<=107?p=[y+139]:y>=108&&y<=1131?(y-=108,p=[(y>>8)+247,y&255]):y>=-1131&&y<=-108?(y=-y-108,p=[(y>>8)+251,y&255]):y>=-32768&&y<=32767?p=[28,y>>8&255,y&255]:p=[29,y>>24&255,y>>16&255,y>>8&255,y&255],p}compileHeader(y){return[y.major,y.minor,4,y.offSize]}compileNameIndex(y){const p=new g;for(let P=0,E=y.length;P<E;++P){const S=y[P],F=Math.min(S.length,127);let C=new Array(F);for(let b=0;b<F;b++){let D=S[b];(D<"!"||D>"~"||D==="["||D==="]"||D==="("||D===")"||D==="{"||D==="}"||D==="<"||D===">"||D==="/"||D==="%")&&(D="_"),C[b]=D}C=C.join(""),C===""&&(C="Bad_Font_Name"),p.add((0,t.stringToBytes)(C))}return this.compileIndex(p)}compileTopDicts(y,p,P){const E=[];let S=new g;for(let F=0,C=y.length;F<C;++F){const b=y[F];P&&(b.removeByName("CIDFontVersion"),b.removeByName("CIDFontRevision"),b.removeByName("CIDFontType"),b.removeByName("CIDCount"),b.removeByName("UIDBase"));const D=new O,U=this.compileDict(b,D);E.push(D),S.add(U),D.offset(p)}return S=this.compileIndex(S,E),{trackers:E,output:S}}compilePrivateDicts(y,p,P){for(let E=0,S=y.length;E<S;++E){const F=y[E],C=F.privateDict;if(!C||!F.hasName("Private"))throw new t.FormatError("There must be a private dictionary.");const b=new O,D=this.compileDict(C,b);let U=P.length;if(b.offset(U),D.length||(U=0),p[E].setEntryLocation("Private",[D.length,U],P),P.add(D),C.subrsIndex&&C.hasName("Subrs")){const X=this.compileIndex(C.subrsIndex);b.setEntryLocation("Subrs",[D.length],P),P.add(X)}}}compileDict(y,p){const P=[];for(const E of y.order){if(!(E in y.values))continue;let S=y.values[E],F=y.types[E];if(Array.isArray(F)||(F=[F]),Array.isArray(S)||(S=[S]),S.length!==0){for(let C=0,b=F.length;C<b;++C){const D=F[C],U=S[C];switch(D){case"num":case"sid":P.push(...this.encodeNumber(U));break;case"offset":const X=y.keyToNameMap[E];p.isTracking(X)||p.track(X,P.length),P.push(29,0,0,0,0);break;case"array":case"delta":P.push(...this.encodeNumber(U));for(let G=1,Y=S.length;G<Y;++G)P.push(...this.encodeNumber(S[G]));break;default:throw new t.FormatError(`Unknown data type of ${D}`)}}P.push(...y.opcodes[E])}}return P}compileStringIndex(y){const p=new g;for(let P=0,E=y.length;P<E;++P)p.add((0,t.stringToBytes)(y[P]));return this.compileIndex(p)}compileGlobalSubrIndex(){const y=this.cff.globalSubrIndex;this.out.writeByteArray(this.compileIndex(y))}compileCharStrings(y){const p=new g;for(let P=0;P<y.count;P++){const E=y.get(P);if(E.length===0){p.add(new Uint8Array([139,14]));continue}p.add(E)}return this.compileIndex(p)}compileCharset(y,p,P,E){let S;const F=p-1;if(E)S=new Uint8Array([2,0,0,F>>8&255,F&255]);else{const C=1+F*2;S=new Uint8Array(C),S[0]=0;let b=0;const D=y.charset.length;let U=!1;for(let X=1;X<S.length;X+=2){let G=0;if(b<D){const Y=y.charset[b++];G=P.getSID(Y),G===-1&&(G=0,U||(U=!0,(0,t.warn)(`Couldn't find ${Y} in CFF strings`)))}S[X]=G>>8&255,S[X+1]=G&255}}return this.compileTypedArray(S)}compileEncoding(y){return this.compileTypedArray(y.raw)}compileFDSelect(y){const p=y.format;let P,E;switch(p){case 0:for(P=new Uint8Array(1+y.fdSelect.length),P[0]=p,E=0;E<y.fdSelect.length;E++)P[E+1]=y.fdSelect[E];break;case 3:const S=0;let F=y.fdSelect[0];const C=[p,0,0,S>>8&255,S&255,F];for(E=1;E<y.fdSelect.length;E++){const D=y.fdSelect[E];D!==F&&(C.push(E>>8&255,E&255,D),F=D)}const b=(C.length-3)/3;C[1]=b>>8&255,C[2]=b&255,C.push(E>>8&255,E&255),P=new Uint8Array(C);break}return this.compileTypedArray(P)}compileTypedArray(y){const p=[];for(let P=0,E=y.length;P<E;++P)p[P]=y[P];return p}compileIndex(y,p=[]){const P=y.objects,E=P.length;if(E===0)return[0,0];const S=[E>>8&255,E&255];let F=1,C;for(C=0;C<E;++C)F+=P[C].length;let b;F<256?b=1:F<65536?b=2:F<16777216?b=3:b=4,S.push(b);let D=1;for(C=0;C<E+1;C++)b===1?S.push(D&255):b===2?S.push(D>>8&255,D&255):b===3?S.push(D>>16&255,D>>8&255,D&255):S.push(D>>>24&255,D>>16&255,D>>8&255,D&255),P[C]&&(D+=P[C].length);for(C=0;C<E;C++){p[C]&&p[C].offset(S.length);for(let U=0,X=P[C].length;U<X;U++)S.push(P[C][U])}return S}}f.CFFCompiler=T},(ge,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ISOAdobeCharset=f.ExpertSubsetCharset=f.ExpertCharset=void 0;const h=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"];f.ISOAdobeCharset=h;const t=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];f.ExpertCharset=t;const o=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"];f.ExpertSubsetCharset=o},(ge,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ZapfDingbatsEncoding=f.WinAnsiEncoding=f.SymbolSetEncoding=f.StandardEncoding=f.MacRomanEncoding=f.ExpertEncoding=void 0,f.getEncoding=r;const h=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];f.ExpertEncoding=h;const t=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","centoldstyle","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","","threequartersemdash","","questionsmall","","","","","Ethsmall","","","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","","","","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hypheninferior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","asuperior","centsuperior","","","","","Aacutesmall","Agravesmall","Acircumflexsmall","Adieresissmall","Atildesmall","Aringsmall","Ccedillasmall","Eacutesmall","Egravesmall","Ecircumflexsmall","Edieresissmall","Iacutesmall","Igravesmall","Icircumflexsmall","Idieresissmall","Ntildesmall","Oacutesmall","Ogravesmall","Ocircumflexsmall","Odieresissmall","Otildesmall","Uacutesmall","Ugravesmall","Ucircumflexsmall","Udieresissmall","","eightsuperior","fourinferior","threeinferior","sixinferior","eightinferior","seveninferior","Scaronsmall","","centinferior","twoinferior","","Dieresissmall","","Caronsmall","osuperior","fiveinferior","","commainferior","periodinferior","Yacutesmall","","dollarinferior","","","Thornsmall","","nineinferior","zeroinferior","Zcaronsmall","AEsmall","Oslashsmall","questiondownsmall","oneinferior","Lslashsmall","","","","","","","Cedillasmall","","","","","","OEsmall","figuredash","hyphensuperior","","","","","exclamdownsmall","","Ydieresissmall","","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","ninesuperior","zerosuperior","","esuperior","rsuperior","tsuperior","","","isuperior","ssuperior","dsuperior","","","","","","lsuperior","Ogoneksmall","Brevesmall","Macronsmall","bsuperior","nsuperior","msuperior","commasuperior","periodsuperior","Dotaccentsmall","Ringsmall","","","",""],o=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","space","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron"];f.MacRomanEncoding=o;const c=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls","","","",""];f.StandardEncoding=c;const s=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","bullet","Euro","bullet","quotesinglbase","florin","quotedblbase","ellipsis","dagger","daggerdbl","circumflex","perthousand","Scaron","guilsinglleft","OE","bullet","Zcaron","bullet","bullet","quoteleft","quoteright","quotedblleft","quotedblright","bullet","endash","emdash","tilde","trademark","scaron","guilsinglright","oe","bullet","zcaron","Ydieresis","space","exclamdown","cent","sterling","currency","yen","brokenbar","section","dieresis","copyright","ordfeminine","guillemotleft","logicalnot","hyphen","registered","macron","degree","plusminus","twosuperior","threesuperior","acute","mu","paragraph","periodcentered","cedilla","onesuperior","ordmasculine","guillemotright","onequarter","onehalf","threequarters","questiondown","Agrave","Aacute","Acircumflex","Atilde","Adieresis","Aring","AE","Ccedilla","Egrave","Eacute","Ecircumflex","Edieresis","Igrave","Iacute","Icircumflex","Idieresis","Eth","Ntilde","Ograve","Oacute","Ocircumflex","Otilde","Odieresis","multiply","Oslash","Ugrave","Uacute","Ucircumflex","Udieresis","Yacute","Thorn","germandbls","agrave","aacute","acircumflex","atilde","adieresis","aring","ae","ccedilla","egrave","eacute","ecircumflex","edieresis","igrave","iacute","icircumflex","idieresis","eth","ntilde","ograve","oacute","ocircumflex","otilde","odieresis","divide","oslash","ugrave","uacute","ucircumflex","udieresis","yacute","thorn","ydieresis"];f.WinAnsiEncoding=s;const e=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","universal","numbersign","existential","percent","ampersand","suchthat","parenleft","parenright","asteriskmath","plus","comma","minus","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","congruent","Alpha","Beta","Chi","Delta","Epsilon","Phi","Gamma","Eta","Iota","theta1","Kappa","Lambda","Mu","Nu","Omicron","Pi","Theta","Rho","Sigma","Tau","Upsilon","sigma1","Omega","Xi","Psi","Zeta","bracketleft","therefore","bracketright","perpendicular","underscore","radicalex","alpha","beta","chi","delta","epsilon","phi","gamma","eta","iota","phi1","kappa","lambda","mu","nu","omicron","pi","theta","rho","sigma","tau","upsilon","omega1","omega","xi","psi","zeta","braceleft","bar","braceright","similar","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Euro","Upsilon1","minute","lessequal","fraction","infinity","florin","club","diamond","heart","spade","arrowboth","arrowleft","arrowup","arrowright","arrowdown","degree","plusminus","second","greaterequal","multiply","proportional","partialdiff","bullet","divide","notequal","equivalence","approxequal","ellipsis","arrowvertex","arrowhorizex","carriagereturn","aleph","Ifraktur","Rfraktur","weierstrass","circlemultiply","circleplus","emptyset","intersection","union","propersuperset","reflexsuperset","notsubset","propersubset","reflexsubset","element","notelement","angle","gradient","registerserif","copyrightserif","trademarkserif","product","radical","dotmath","logicalnot","logicaland","logicalor","arrowdblboth","arrowdblleft","arrowdblup","arrowdblright","arrowdbldown","lozenge","angleleft","registersans","copyrightsans","trademarksans","summation","parenlefttp","parenleftex","parenleftbt","bracketlefttp","bracketleftex","bracketleftbt","bracelefttp","braceleftmid","braceleftbt","braceex","","angleright","integral","integraltp","integralex","integralbt","parenrighttp","parenrightex","parenrightbt","bracketrighttp","bracketrightex","bracketrightbt","bracerighttp","bracerightmid","bracerightbt",""];f.SymbolSetEncoding=e;const a=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","a1","a2","a202","a3","a4","a5","a119","a118","a117","a11","a12","a13","a14","a15","a16","a105","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a6","a7","a8","a9","a10","a29","a30","a31","a32","a33","a34","a35","a36","a37","a38","a39","a40","a41","a42","a43","a44","a45","a46","a47","a48","a49","a50","a51","a52","a53","a54","a55","a56","a57","a58","a59","a60","a61","a62","a63","a64","a65","a66","a67","a68","a69","a70","a71","a72","a73","a74","a203","a75","a204","a76","a77","a78","a79","a81","a82","a83","a84","a97","a98","a99","a100","","a89","a90","a93","a94","a91","a92","a205","a85","a206","a86","a87","a88","a95","a96","","","","","","","","","","","","","","","","","","","","a101","a102","a103","a104","a106","a107","a108","a112","a111","a110","a109","a120","a121","a122","a123","a124","a125","a126","a127","a128","a129","a130","a131","a132","a133","a134","a135","a136","a137","a138","a139","a140","a141","a142","a143","a144","a145","a146","a147","a148","a149","a150","a151","a152","a153","a154","a155","a156","a157","a158","a159","a160","a161","a163","a164","a196","a165","a192","a166","a167","a168","a169","a170","a171","a172","a173","a162","a174","a175","a176","a177","a178","a179","a193","a180","a199","a181","a200","a182","","a201","a183","a184","a197","a185","a194","a198","a186","a195","a187","a188","a189","a190","a191",""];f.ZapfDingbatsEncoding=a;function r(n){switch(n){case"WinAnsiEncoding":return s;case"StandardEncoding":return c;case"MacRomanEncoding":return o;case"SymbolSetEncoding":return e;case"ZapfDingbatsEncoding":return a;case"ExpertEncoding":return h;case"MacExpertEncoding":return t;default:return null}}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.SEAC_ANALYSIS_ENABLED=f.MacStandardGlyphOrdering=f.FontFlags=void 0,f.getFontType=n,f.normalizeFontName=d,f.recoverGlyphName=l,f.type1FontGlyphMapping=u;var t=h(2),o=h(37),c=h(39),s=h(40);const e=!0;f.SEAC_ANALYSIS_ENABLED=e;const a={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144};f.FontFlags=a;const r=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];f.MacStandardGlyphOrdering=r;function n(i,g,x=!1){switch(i){case"Type1":return x?t.FontType.TYPE1STANDARD:g==="Type1C"?t.FontType.TYPE1C:t.FontType.TYPE1;case"CIDFontType0":return g==="CIDFontType0C"?t.FontType.CIDFONTTYPE0C:t.FontType.CIDFONTTYPE0;case"OpenType":return t.FontType.OPENTYPE;case"TrueType":return t.FontType.TRUETYPE;case"CIDFontType2":return t.FontType.CIDFONTTYPE2;case"MMType1":return t.FontType.MMTYPE1;case"Type0":return t.FontType.TYPE0;default:return t.FontType.UNKNOWN}}function l(i,g){if(g[i]!==void 0)return i;const x=(0,s.getUnicodeForGlyph)(i,g);if(x!==-1){for(const m in g)if(g[m]===x)return m}return(0,t.info)("Unable to recover a standard glyph name for: "+i),i}function u(i,g,x){const m=Object.create(null);let A,k,v;const _=!!(i.flags&a.Symbolic);if(i.isInternalFont)for(v=g,k=0;k<v.length;k++)A=x.indexOf(v[k]),A>=0?m[k]=A:m[k]=0;else if(i.baseEncodingName)for(v=(0,o.getEncoding)(i.baseEncodingName),k=0;k<v.length;k++)A=x.indexOf(v[k]),A>=0?m[k]=A:m[k]=0;else if(_)for(k in g)m[k]=g[k];else for(v=o.StandardEncoding,k=0;k<v.length;k++)A=x.indexOf(v[k]),A>=0?m[k]=A:m[k]=0;const K=i.differences;let M;if(K)for(k in K){const j=K[k];if(A=x.indexOf(j),A===-1){M||(M=(0,c.getGlyphsUnicode)());const O=l(j,M);O!==j&&(A=x.indexOf(O))}A>=0?m[k]=A:m[k]=0}return m}function d(i){return i.replace(/[,_]/g,"-").replace(/\s/g,"")}},(ge,f,h)=>{h.r(f),h.d(f,{getDingbatsGlyphsUnicode:()=>c,getGlyphsUnicode:()=>o});var t=h(6);const o=(0,t.getArrayLookupTableFactory)(function(){return["A",65,"AE",198,"AEacute",508,"AEmacron",482,"AEsmall",63462,"Aacute",193,"Aacutesmall",63457,"Abreve",258,"Abreveacute",7854,"Abrevecyrillic",1232,"Abrevedotbelow",7862,"Abrevegrave",7856,"Abrevehookabove",7858,"Abrevetilde",7860,"Acaron",461,"Acircle",9398,"Acircumflex",194,"Acircumflexacute",7844,"Acircumflexdotbelow",7852,"Acircumflexgrave",7846,"Acircumflexhookabove",7848,"Acircumflexsmall",63458,"Acircumflextilde",7850,"Acute",63177,"Acutesmall",63412,"Acyrillic",1040,"Adblgrave",512,"Adieresis",196,"Adieresiscyrillic",1234,"Adieresismacron",478,"Adieresissmall",63460,"Adotbelow",7840,"Adotmacron",480,"Agrave",192,"Agravesmall",63456,"Ahookabove",7842,"Aiecyrillic",1236,"Ainvertedbreve",514,"Alpha",913,"Alphatonos",902,"Amacron",256,"Amonospace",65313,"Aogonek",260,"Aring",197,"Aringacute",506,"Aringbelow",7680,"Aringsmall",63461,"Asmall",63329,"Atilde",195,"Atildesmall",63459,"Aybarmenian",1329,"B",66,"Bcircle",9399,"Bdotaccent",7682,"Bdotbelow",7684,"Becyrillic",1041,"Benarmenian",1330,"Beta",914,"Bhook",385,"Blinebelow",7686,"Bmonospace",65314,"Brevesmall",63220,"Bsmall",63330,"Btopbar",386,"C",67,"Caarmenian",1342,"Cacute",262,"Caron",63178,"Caronsmall",63221,"Ccaron",268,"Ccedilla",199,"Ccedillaacute",7688,"Ccedillasmall",63463,"Ccircle",9400,"Ccircumflex",264,"Cdot",266,"Cdotaccent",266,"Cedillasmall",63416,"Chaarmenian",1353,"Cheabkhasiancyrillic",1212,"Checyrillic",1063,"Chedescenderabkhasiancyrillic",1214,"Chedescendercyrillic",1206,"Chedieresiscyrillic",1268,"Cheharmenian",1347,"Chekhakassiancyrillic",1227,"Cheverticalstrokecyrillic",1208,"Chi",935,"Chook",391,"Circumflexsmall",63222,"Cmonospace",65315,"Coarmenian",1361,"Csmall",63331,"D",68,"DZ",497,"DZcaron",452,"Daarmenian",1332,"Dafrican",393,"Dcaron",270,"Dcedilla",7696,"Dcircle",9401,"Dcircumflexbelow",7698,"Dcroat",272,"Ddotaccent",7690,"Ddotbelow",7692,"Decyrillic",1044,"Deicoptic",1006,"Delta",8710,"Deltagreek",916,"Dhook",394,"Dieresis",63179,"DieresisAcute",63180,"DieresisGrave",63181,"Dieresissmall",63400,"Digammagreek",988,"Djecyrillic",1026,"Dlinebelow",7694,"Dmonospace",65316,"Dotaccentsmall",63223,"Dslash",272,"Dsmall",63332,"Dtopbar",395,"Dz",498,"Dzcaron",453,"Dzeabkhasiancyrillic",1248,"Dzecyrillic",1029,"Dzhecyrillic",1039,"E",69,"Eacute",201,"Eacutesmall",63465,"Ebreve",276,"Ecaron",282,"Ecedillabreve",7708,"Echarmenian",1333,"Ecircle",9402,"Ecircumflex",202,"Ecircumflexacute",7870,"Ecircumflexbelow",7704,"Ecircumflexdotbelow",7878,"Ecircumflexgrave",7872,"Ecircumflexhookabove",7874,"Ecircumflexsmall",63466,"Ecircumflextilde",7876,"Ecyrillic",1028,"Edblgrave",516,"Edieresis",203,"Edieresissmall",63467,"Edot",278,"Edotaccent",278,"Edotbelow",7864,"Efcyrillic",1060,"Egrave",200,"Egravesmall",63464,"Eharmenian",1335,"Ehookabove",7866,"Eightroman",8551,"Einvertedbreve",518,"Eiotifiedcyrillic",1124,"Elcyrillic",1051,"Elevenroman",8554,"Emacron",274,"Emacronacute",7702,"Emacrongrave",7700,"Emcyrillic",1052,"Emonospace",65317,"Encyrillic",1053,"Endescendercyrillic",1186,"Eng",330,"Enghecyrillic",1188,"Enhookcyrillic",1223,"Eogonek",280,"Eopen",400,"Epsilon",917,"Epsilontonos",904,"Ercyrillic",1056,"Ereversed",398,"Ereversedcyrillic",1069,"Escyrillic",1057,"Esdescendercyrillic",1194,"Esh",425,"Esmall",63333,"Eta",919,"Etarmenian",1336,"Etatonos",905,"Eth",208,"Ethsmall",63472,"Etilde",7868,"Etildebelow",7706,"Euro",8364,"Ezh",439,"Ezhcaron",494,"Ezhreversed",440,"F",70,"Fcircle",9403,"Fdotaccent",7710,"Feharmenian",1366,"Feicoptic",996,"Fhook",401,"Fitacyrillic",1138,"Fiveroman",8548,"Fmonospace",65318,"Fourroman",8547,"Fsmall",63334,"G",71,"GBsquare",13191,"Gacute",500,"Gamma",915,"Gammaafrican",404,"Gangiacoptic",1002,"Gbreve",286,"Gcaron",486,"Gcedilla",290,"Gcircle",9404,"Gcircumflex",284,"Gcommaaccent",290,"Gdot",288,"Gdotaccent",288,"Gecyrillic",1043,"Ghadarmenian",1346,"Ghemiddlehookcyrillic",1172,"Ghestrokecyrillic",1170,"Gheupturncyrillic",1168,"Ghook",403,"Gimarmenian",1331,"Gjecyrillic",1027,"Gmacron",7712,"Gmonospace",65319,"Grave",63182,"Gravesmall",63328,"Gsmall",63335,"Gsmallhook",667,"Gstroke",484,"H",72,"H18533",9679,"H18543",9642,"H18551",9643,"H22073",9633,"HPsquare",13259,"Haabkhasiancyrillic",1192,"Hadescendercyrillic",1202,"Hardsigncyrillic",1066,"Hbar",294,"Hbrevebelow",7722,"Hcedilla",7720,"Hcircle",9405,"Hcircumflex",292,"Hdieresis",7718,"Hdotaccent",7714,"Hdotbelow",7716,"Hmonospace",65320,"Hoarmenian",1344,"Horicoptic",1e3,"Hsmall",63336,"Hungarumlaut",63183,"Hungarumlautsmall",63224,"Hzsquare",13200,"I",73,"IAcyrillic",1071,"IJ",306,"IUcyrillic",1070,"Iacute",205,"Iacutesmall",63469,"Ibreve",300,"Icaron",463,"Icircle",9406,"Icircumflex",206,"Icircumflexsmall",63470,"Icyrillic",1030,"Idblgrave",520,"Idieresis",207,"Idieresisacute",7726,"Idieresiscyrillic",1252,"Idieresissmall",63471,"Idot",304,"Idotaccent",304,"Idotbelow",7882,"Iebrevecyrillic",1238,"Iecyrillic",1045,"Ifraktur",8465,"Igrave",204,"Igravesmall",63468,"Ihookabove",7880,"Iicyrillic",1048,"Iinvertedbreve",522,"Iishortcyrillic",1049,"Imacron",298,"Imacroncyrillic",1250,"Imonospace",65321,"Iniarmenian",1339,"Iocyrillic",1025,"Iogonek",302,"Iota",921,"Iotaafrican",406,"Iotadieresis",938,"Iotatonos",906,"Ismall",63337,"Istroke",407,"Itilde",296,"Itildebelow",7724,"Izhitsacyrillic",1140,"Izhitsadblgravecyrillic",1142,"J",74,"Jaarmenian",1345,"Jcircle",9407,"Jcircumflex",308,"Jecyrillic",1032,"Jheharmenian",1355,"Jmonospace",65322,"Jsmall",63338,"K",75,"KBsquare",13189,"KKsquare",13261,"Kabashkircyrillic",1184,"Kacute",7728,"Kacyrillic",1050,"Kadescendercyrillic",1178,"Kahookcyrillic",1219,"Kappa",922,"Kastrokecyrillic",1182,"Kaverticalstrokecyrillic",1180,"Kcaron",488,"Kcedilla",310,"Kcircle",9408,"Kcommaaccent",310,"Kdotbelow",7730,"Keharmenian",1364,"Kenarmenian",1343,"Khacyrillic",1061,"Kheicoptic",998,"Khook",408,"Kjecyrillic",1036,"Klinebelow",7732,"Kmonospace",65323,"Koppacyrillic",1152,"Koppagreek",990,"Ksicyrillic",1134,"Ksmall",63339,"L",76,"LJ",455,"LL",63167,"Lacute",313,"Lambda",923,"Lcaron",317,"Lcedilla",315,"Lcircle",9409,"Lcircumflexbelow",7740,"Lcommaaccent",315,"Ldot",319,"Ldotaccent",319,"Ldotbelow",7734,"Ldotbelowmacron",7736,"Liwnarmenian",1340,"Lj",456,"Ljecyrillic",1033,"Llinebelow",7738,"Lmonospace",65324,"Lslash",321,"Lslashsmall",63225,"Lsmall",63340,"M",77,"MBsquare",13190,"Macron",63184,"Macronsmall",63407,"Macute",7742,"Mcircle",9410,"Mdotaccent",7744,"Mdotbelow",7746,"Menarmenian",1348,"Mmonospace",65325,"Msmall",63341,"Mturned",412,"Mu",924,"N",78,"NJ",458,"Nacute",323,"Ncaron",327,"Ncedilla",325,"Ncircle",9411,"Ncircumflexbelow",7754,"Ncommaaccent",325,"Ndotaccent",7748,"Ndotbelow",7750,"Nhookleft",413,"Nineroman",8552,"Nj",459,"Njecyrillic",1034,"Nlinebelow",7752,"Nmonospace",65326,"Nowarmenian",1350,"Nsmall",63342,"Ntilde",209,"Ntildesmall",63473,"Nu",925,"O",79,"OE",338,"OEsmall",63226,"Oacute",211,"Oacutesmall",63475,"Obarredcyrillic",1256,"Obarreddieresiscyrillic",1258,"Obreve",334,"Ocaron",465,"Ocenteredtilde",415,"Ocircle",9412,"Ocircumflex",212,"Ocircumflexacute",7888,"Ocircumflexdotbelow",7896,"Ocircumflexgrave",7890,"Ocircumflexhookabove",7892,"Ocircumflexsmall",63476,"Ocircumflextilde",7894,"Ocyrillic",1054,"Odblacute",336,"Odblgrave",524,"Odieresis",214,"Odieresiscyrillic",1254,"Odieresissmall",63478,"Odotbelow",7884,"Ogoneksmall",63227,"Ograve",210,"Ogravesmall",63474,"Oharmenian",1365,"Ohm",8486,"Ohookabove",7886,"Ohorn",416,"Ohornacute",7898,"Ohorndotbelow",7906,"Ohorngrave",7900,"Ohornhookabove",7902,"Ohorntilde",7904,"Ohungarumlaut",336,"Oi",418,"Oinvertedbreve",526,"Omacron",332,"Omacronacute",7762,"Omacrongrave",7760,"Omega",8486,"Omegacyrillic",1120,"Omegagreek",937,"Omegaroundcyrillic",1146,"Omegatitlocyrillic",1148,"Omegatonos",911,"Omicron",927,"Omicrontonos",908,"Omonospace",65327,"Oneroman",8544,"Oogonek",490,"Oogonekmacron",492,"Oopen",390,"Oslash",216,"Oslashacute",510,"Oslashsmall",63480,"Osmall",63343,"Ostrokeacute",510,"Otcyrillic",1150,"Otilde",213,"Otildeacute",7756,"Otildedieresis",7758,"Otildesmall",63477,"P",80,"Pacute",7764,"Pcircle",9413,"Pdotaccent",7766,"Pecyrillic",1055,"Peharmenian",1354,"Pemiddlehookcyrillic",1190,"Phi",934,"Phook",420,"Pi",928,"Piwrarmenian",1363,"Pmonospace",65328,"Psi",936,"Psicyrillic",1136,"Psmall",63344,"Q",81,"Qcircle",9414,"Qmonospace",65329,"Qsmall",63345,"R",82,"Raarmenian",1356,"Racute",340,"Rcaron",344,"Rcedilla",342,"Rcircle",9415,"Rcommaaccent",342,"Rdblgrave",528,"Rdotaccent",7768,"Rdotbelow",7770,"Rdotbelowmacron",7772,"Reharmenian",1360,"Rfraktur",8476,"Rho",929,"Ringsmall",63228,"Rinvertedbreve",530,"Rlinebelow",7774,"Rmonospace",65330,"Rsmall",63346,"Rsmallinverted",641,"Rsmallinvertedsuperior",694,"S",83,"SF010000",9484,"SF020000",9492,"SF030000",9488,"SF040000",9496,"SF050000",9532,"SF060000",9516,"SF070000",9524,"SF080000",9500,"SF090000",9508,"SF100000",9472,"SF110000",9474,"SF190000",9569,"SF200000",9570,"SF210000",9558,"SF220000",9557,"SF230000",9571,"SF240000",9553,"SF250000",9559,"SF260000",9565,"SF270000",9564,"SF280000",9563,"SF360000",9566,"SF370000",9567,"SF380000",9562,"SF390000",9556,"SF400000",9577,"SF410000",9574,"SF420000",9568,"SF430000",9552,"SF440000",9580,"SF450000",9575,"SF460000",9576,"SF470000",9572,"SF480000",9573,"SF490000",9561,"SF500000",9560,"SF510000",9554,"SF520000",9555,"SF530000",9579,"SF540000",9578,"Sacute",346,"Sacutedotaccent",7780,"Sampigreek",992,"Scaron",352,"Scarondotaccent",7782,"Scaronsmall",63229,"Scedilla",350,"Schwa",399,"Schwacyrillic",1240,"Schwadieresiscyrillic",1242,"Scircle",9416,"Scircumflex",348,"Scommaaccent",536,"Sdotaccent",7776,"Sdotbelow",7778,"Sdotbelowdotaccent",7784,"Seharmenian",1357,"Sevenroman",8550,"Shaarmenian",1351,"Shacyrillic",1064,"Shchacyrillic",1065,"Sheicoptic",994,"Shhacyrillic",1210,"Shimacoptic",1004,"Sigma",931,"Sixroman",8549,"Smonospace",65331,"Softsigncyrillic",1068,"Ssmall",63347,"Stigmagreek",986,"T",84,"Tau",932,"Tbar",358,"Tcaron",356,"Tcedilla",354,"Tcircle",9417,"Tcircumflexbelow",7792,"Tcommaaccent",354,"Tdotaccent",7786,"Tdotbelow",7788,"Tecyrillic",1058,"Tedescendercyrillic",1196,"Tenroman",8553,"Tetsecyrillic",1204,"Theta",920,"Thook",428,"Thorn",222,"Thornsmall",63486,"Threeroman",8546,"Tildesmall",63230,"Tiwnarmenian",1359,"Tlinebelow",7790,"Tmonospace",65332,"Toarmenian",1337,"Tonefive",444,"Tonesix",388,"Tonetwo",423,"Tretroflexhook",430,"Tsecyrillic",1062,"Tshecyrillic",1035,"Tsmall",63348,"Twelveroman",8555,"Tworoman",8545,"U",85,"Uacute",218,"Uacutesmall",63482,"Ubreve",364,"Ucaron",467,"Ucircle",9418,"Ucircumflex",219,"Ucircumflexbelow",7798,"Ucircumflexsmall",63483,"Ucyrillic",1059,"Udblacute",368,"Udblgrave",532,"Udieresis",220,"Udieresisacute",471,"Udieresisbelow",7794,"Udieresiscaron",473,"Udieresiscyrillic",1264,"Udieresisgrave",475,"Udieresismacron",469,"Udieresissmall",63484,"Udotbelow",7908,"Ugrave",217,"Ugravesmall",63481,"Uhookabove",7910,"Uhorn",431,"Uhornacute",7912,"Uhorndotbelow",7920,"Uhorngrave",7914,"Uhornhookabove",7916,"Uhorntilde",7918,"Uhungarumlaut",368,"Uhungarumlautcyrillic",1266,"Uinvertedbreve",534,"Ukcyrillic",1144,"Umacron",362,"Umacroncyrillic",1262,"Umacrondieresis",7802,"Umonospace",65333,"Uogonek",370,"Upsilon",933,"Upsilon1",978,"Upsilonacutehooksymbolgreek",979,"Upsilonafrican",433,"Upsilondieresis",939,"Upsilondieresishooksymbolgreek",980,"Upsilonhooksymbol",978,"Upsilontonos",910,"Uring",366,"Ushortcyrillic",1038,"Usmall",63349,"Ustraightcyrillic",1198,"Ustraightstrokecyrillic",1200,"Utilde",360,"Utildeacute",7800,"Utildebelow",7796,"V",86,"Vcircle",9419,"Vdotbelow",7806,"Vecyrillic",1042,"Vewarmenian",1358,"Vhook",434,"Vmonospace",65334,"Voarmenian",1352,"Vsmall",63350,"Vtilde",7804,"W",87,"Wacute",7810,"Wcircle",9420,"Wcircumflex",372,"Wdieresis",7812,"Wdotaccent",7814,"Wdotbelow",7816,"Wgrave",7808,"Wmonospace",65335,"Wsmall",63351,"X",88,"Xcircle",9421,"Xdieresis",7820,"Xdotaccent",7818,"Xeharmenian",1341,"Xi",926,"Xmonospace",65336,"Xsmall",63352,"Y",89,"Yacute",221,"Yacutesmall",63485,"Yatcyrillic",1122,"Ycircle",9422,"Ycircumflex",374,"Ydieresis",376,"Ydieresissmall",63487,"Ydotaccent",7822,"Ydotbelow",7924,"Yericyrillic",1067,"Yerudieresiscyrillic",1272,"Ygrave",7922,"Yhook",435,"Yhookabove",7926,"Yiarmenian",1349,"Yicyrillic",1031,"Yiwnarmenian",1362,"Ymonospace",65337,"Ysmall",63353,"Ytilde",7928,"Yusbigcyrillic",1130,"Yusbigiotifiedcyrillic",1132,"Yuslittlecyrillic",1126,"Yuslittleiotifiedcyrillic",1128,"Z",90,"Zaarmenian",1334,"Zacute",377,"Zcaron",381,"Zcaronsmall",63231,"Zcircle",9423,"Zcircumflex",7824,"Zdot",379,"Zdotaccent",379,"Zdotbelow",7826,"Zecyrillic",1047,"Zedescendercyrillic",1176,"Zedieresiscyrillic",1246,"Zeta",918,"Zhearmenian",1338,"Zhebrevecyrillic",1217,"Zhecyrillic",1046,"Zhedescendercyrillic",1174,"Zhedieresiscyrillic",1244,"Zlinebelow",7828,"Zmonospace",65338,"Zsmall",63354,"Zstroke",437,"a",97,"aabengali",2438,"aacute",225,"aadeva",2310,"aagujarati",2694,"aagurmukhi",2566,"aamatragurmukhi",2622,"aarusquare",13059,"aavowelsignbengali",2494,"aavowelsigndeva",2366,"aavowelsigngujarati",2750,"abbreviationmarkarmenian",1375,"abbreviationsigndeva",2416,"abengali",2437,"abopomofo",12570,"abreve",259,"abreveacute",7855,"abrevecyrillic",1233,"abrevedotbelow",7863,"abrevegrave",7857,"abrevehookabove",7859,"abrevetilde",7861,"acaron",462,"acircle",9424,"acircumflex",226,"acircumflexacute",7845,"acircumflexdotbelow",7853,"acircumflexgrave",7847,"acircumflexhookabove",7849,"acircumflextilde",7851,"acute",180,"acutebelowcmb",791,"acutecmb",769,"acutecomb",769,"acutedeva",2388,"acutelowmod",719,"acutetonecmb",833,"acyrillic",1072,"adblgrave",513,"addakgurmukhi",2673,"adeva",2309,"adieresis",228,"adieresiscyrillic",1235,"adieresismacron",479,"adotbelow",7841,"adotmacron",481,"ae",230,"aeacute",509,"aekorean",12624,"aemacron",483,"afii00208",8213,"afii08941",8356,"afii10017",1040,"afii10018",1041,"afii10019",1042,"afii10020",1043,"afii10021",1044,"afii10022",1045,"afii10023",1025,"afii10024",1046,"afii10025",1047,"afii10026",1048,"afii10027",1049,"afii10028",1050,"afii10029",1051,"afii10030",1052,"afii10031",1053,"afii10032",1054,"afii10033",1055,"afii10034",1056,"afii10035",1057,"afii10036",1058,"afii10037",1059,"afii10038",1060,"afii10039",1061,"afii10040",1062,"afii10041",1063,"afii10042",1064,"afii10043",1065,"afii10044",1066,"afii10045",1067,"afii10046",1068,"afii10047",1069,"afii10048",1070,"afii10049",1071,"afii10050",1168,"afii10051",1026,"afii10052",1027,"afii10053",1028,"afii10054",1029,"afii10055",1030,"afii10056",1031,"afii10057",1032,"afii10058",1033,"afii10059",1034,"afii10060",1035,"afii10061",1036,"afii10062",1038,"afii10063",63172,"afii10064",63173,"afii10065",1072,"afii10066",1073,"afii10067",1074,"afii10068",1075,"afii10069",1076,"afii10070",1077,"afii10071",1105,"afii10072",1078,"afii10073",1079,"afii10074",1080,"afii10075",1081,"afii10076",1082,"afii10077",1083,"afii10078",1084,"afii10079",1085,"afii10080",1086,"afii10081",1087,"afii10082",1088,"afii10083",1089,"afii10084",1090,"afii10085",1091,"afii10086",1092,"afii10087",1093,"afii10088",1094,"afii10089",1095,"afii10090",1096,"afii10091",1097,"afii10092",1098,"afii10093",1099,"afii10094",1100,"afii10095",1101,"afii10096",1102,"afii10097",1103,"afii10098",1169,"afii10099",1106,"afii10100",1107,"afii10101",1108,"afii10102",1109,"afii10103",1110,"afii10104",1111,"afii10105",1112,"afii10106",1113,"afii10107",1114,"afii10108",1115,"afii10109",1116,"afii10110",1118,"afii10145",1039,"afii10146",1122,"afii10147",1138,"afii10148",1140,"afii10192",63174,"afii10193",1119,"afii10194",1123,"afii10195",1139,"afii10196",1141,"afii10831",63175,"afii10832",63176,"afii10846",1241,"afii299",8206,"afii300",8207,"afii301",8205,"afii57381",1642,"afii57388",1548,"afii57392",1632,"afii57393",1633,"afii57394",1634,"afii57395",1635,"afii57396",1636,"afii57397",1637,"afii57398",1638,"afii57399",1639,"afii57400",1640,"afii57401",1641,"afii57403",1563,"afii57407",1567,"afii57409",1569,"afii57410",1570,"afii57411",1571,"afii57412",1572,"afii57413",1573,"afii57414",1574,"afii57415",1575,"afii57416",1576,"afii57417",1577,"afii57418",1578,"afii57419",1579,"afii57420",1580,"afii57421",1581,"afii57422",1582,"afii57423",1583,"afii57424",1584,"afii57425",1585,"afii57426",1586,"afii57427",1587,"afii57428",1588,"afii57429",1589,"afii57430",1590,"afii57431",1591,"afii57432",1592,"afii57433",1593,"afii57434",1594,"afii57440",1600,"afii57441",1601,"afii57442",1602,"afii57443",1603,"afii57444",1604,"afii57445",1605,"afii57446",1606,"afii57448",1608,"afii57449",1609,"afii57450",1610,"afii57451",1611,"afii57452",1612,"afii57453",1613,"afii57454",1614,"afii57455",1615,"afii57456",1616,"afii57457",1617,"afii57458",1618,"afii57470",1607,"afii57505",1700,"afii57506",1662,"afii57507",1670,"afii57508",1688,"afii57509",1711,"afii57511",1657,"afii57512",1672,"afii57513",1681,"afii57514",1722,"afii57519",1746,"afii57534",1749,"afii57636",8362,"afii57645",1470,"afii57658",1475,"afii57664",1488,"afii57665",1489,"afii57666",1490,"afii57667",1491,"afii57668",1492,"afii57669",1493,"afii57670",1494,"afii57671",1495,"afii57672",1496,"afii57673",1497,"afii57674",1498,"afii57675",1499,"afii57676",1500,"afii57677",1501,"afii57678",1502,"afii57679",1503,"afii57680",1504,"afii57681",1505,"afii57682",1506,"afii57683",1507,"afii57684",1508,"afii57685",1509,"afii57686",1510,"afii57687",1511,"afii57688",1512,"afii57689",1513,"afii57690",1514,"afii57694",64298,"afii57695",64299,"afii57700",64331,"afii57705",64287,"afii57716",1520,"afii57717",1521,"afii57718",1522,"afii57723",64309,"afii57793",1460,"afii57794",1461,"afii57795",1462,"afii57796",1467,"afii57797",1464,"afii57798",1463,"afii57799",1456,"afii57800",1458,"afii57801",1457,"afii57802",1459,"afii57803",1474,"afii57804",1473,"afii57806",1465,"afii57807",1468,"afii57839",1469,"afii57841",1471,"afii57842",1472,"afii57929",700,"afii61248",8453,"afii61289",8467,"afii61352",8470,"afii61573",8236,"afii61574",8237,"afii61575",8238,"afii61664",8204,"afii63167",1645,"afii64937",701,"agrave",224,"agujarati",2693,"agurmukhi",2565,"ahiragana",12354,"ahookabove",7843,"aibengali",2448,"aibopomofo",12574,"aideva",2320,"aiecyrillic",1237,"aigujarati",2704,"aigurmukhi",2576,"aimatragurmukhi",2632,"ainarabic",1593,"ainfinalarabic",65226,"aininitialarabic",65227,"ainmedialarabic",65228,"ainvertedbreve",515,"aivowelsignbengali",2504,"aivowelsigndeva",2376,"aivowelsigngujarati",2760,"akatakana",12450,"akatakanahalfwidth",65393,"akorean",12623,"alef",1488,"alefarabic",1575,"alefdageshhebrew",64304,"aleffinalarabic",65166,"alefhamzaabovearabic",1571,"alefhamzaabovefinalarabic",65156,"alefhamzabelowarabic",1573,"alefhamzabelowfinalarabic",65160,"alefhebrew",1488,"aleflamedhebrew",64335,"alefmaddaabovearabic",1570,"alefmaddaabovefinalarabic",65154,"alefmaksuraarabic",1609,"alefmaksurafinalarabic",65264,"alefmaksurainitialarabic",65267,"alefmaksuramedialarabic",65268,"alefpatahhebrew",64302,"alefqamatshebrew",64303,"aleph",8501,"allequal",8780,"alpha",945,"alphatonos",940,"amacron",257,"amonospace",65345,"ampersand",38,"ampersandmonospace",65286,"ampersandsmall",63270,"amsquare",13250,"anbopomofo",12578,"angbopomofo",12580,"angbracketleft",12296,"angbracketright",12297,"angkhankhuthai",3674,"angle",8736,"anglebracketleft",12296,"anglebracketleftvertical",65087,"anglebracketright",12297,"anglebracketrightvertical",65088,"angleleft",9001,"angleright",9002,"angstrom",8491,"anoteleia",903,"anudattadeva",2386,"anusvarabengali",2434,"anusvaradeva",2306,"anusvaragujarati",2690,"aogonek",261,"apaatosquare",13056,"aparen",9372,"apostrophearmenian",1370,"apostrophemod",700,"apple",63743,"approaches",8784,"approxequal",8776,"approxequalorimage",8786,"approximatelyequal",8773,"araeaekorean",12686,"araeakorean",12685,"arc",8978,"arighthalfring",7834,"aring",229,"aringacute",507,"aringbelow",7681,"arrowboth",8596,"arrowdashdown",8675,"arrowdashleft",8672,"arrowdashright",8674,"arrowdashup",8673,"arrowdblboth",8660,"arrowdbldown",8659,"arrowdblleft",8656,"arrowdblright",8658,"arrowdblup",8657,"arrowdown",8595,"arrowdownleft",8601,"arrowdownright",8600,"arrowdownwhite",8681,"arrowheaddownmod",709,"arrowheadleftmod",706,"arrowheadrightmod",707,"arrowheadupmod",708,"arrowhorizex",63719,"arrowleft",8592,"arrowleftdbl",8656,"arrowleftdblstroke",8653,"arrowleftoverright",8646,"arrowleftwhite",8678,"arrowright",8594,"arrowrightdblstroke",8655,"arrowrightheavy",10142,"arrowrightoverleft",8644,"arrowrightwhite",8680,"arrowtableft",8676,"arrowtabright",8677,"arrowup",8593,"arrowupdn",8597,"arrowupdnbse",8616,"arrowupdownbase",8616,"arrowupleft",8598,"arrowupleftofdown",8645,"arrowupright",8599,"arrowupwhite",8679,"arrowvertex",63718,"asciicircum",94,"asciicircummonospace",65342,"asciitilde",126,"asciitildemonospace",65374,"ascript",593,"ascriptturned",594,"asmallhiragana",12353,"asmallkatakana",12449,"asmallkatakanahalfwidth",65383,"asterisk",42,"asteriskaltonearabic",1645,"asteriskarabic",1645,"asteriskmath",8727,"asteriskmonospace",65290,"asterisksmall",65121,"asterism",8258,"asuperior",63209,"asymptoticallyequal",8771,"at",64,"atilde",227,"atmonospace",65312,"atsmall",65131,"aturned",592,"aubengali",2452,"aubopomofo",12576,"audeva",2324,"augujarati",2708,"augurmukhi",2580,"aulengthmarkbengali",2519,"aumatragurmukhi",2636,"auvowelsignbengali",2508,"auvowelsigndeva",2380,"auvowelsigngujarati",2764,"avagrahadeva",2365,"aybarmenian",1377,"ayin",1506,"ayinaltonehebrew",64288,"ayinhebrew",1506,"b",98,"babengali",2476,"backslash",92,"backslashmonospace",65340,"badeva",2348,"bagujarati",2732,"bagurmukhi",2604,"bahiragana",12400,"bahtthai",3647,"bakatakana",12496,"bar",124,"barmonospace",65372,"bbopomofo",12549,"bcircle",9425,"bdotaccent",7683,"bdotbelow",7685,"beamedsixteenthnotes",9836,"because",8757,"becyrillic",1073,"beharabic",1576,"behfinalarabic",65168,"behinitialarabic",65169,"behiragana",12409,"behmedialarabic",65170,"behmeeminitialarabic",64671,"behmeemisolatedarabic",64520,"behnoonfinalarabic",64621,"bekatakana",12505,"benarmenian",1378,"bet",1489,"beta",946,"betasymbolgreek",976,"betdagesh",64305,"betdageshhebrew",64305,"bethebrew",1489,"betrafehebrew",64332,"bhabengali",2477,"bhadeva",2349,"bhagujarati",2733,"bhagurmukhi",2605,"bhook",595,"bihiragana",12403,"bikatakana",12499,"bilabialclick",664,"bindigurmukhi",2562,"birusquare",13105,"blackcircle",9679,"blackdiamond",9670,"blackdownpointingtriangle",9660,"blackleftpointingpointer",9668,"blackleftpointingtriangle",9664,"blacklenticularbracketleft",12304,"blacklenticularbracketleftvertical",65083,"blacklenticularbracketright",12305,"blacklenticularbracketrightvertical",65084,"blacklowerlefttriangle",9699,"blacklowerrighttriangle",9698,"blackrectangle",9644,"blackrightpointingpointer",9658,"blackrightpointingtriangle",9654,"blacksmallsquare",9642,"blacksmilingface",9787,"blacksquare",9632,"blackstar",9733,"blackupperlefttriangle",9700,"blackupperrighttriangle",9701,"blackuppointingsmalltriangle",9652,"blackuppointingtriangle",9650,"blank",9251,"blinebelow",7687,"block",9608,"bmonospace",65346,"bobaimaithai",3610,"bohiragana",12412,"bokatakana",12508,"bparen",9373,"bqsquare",13251,"braceex",63732,"braceleft",123,"braceleftbt",63731,"braceleftmid",63730,"braceleftmonospace",65371,"braceleftsmall",65115,"bracelefttp",63729,"braceleftvertical",65079,"braceright",125,"bracerightbt",63742,"bracerightmid",63741,"bracerightmonospace",65373,"bracerightsmall",65116,"bracerighttp",63740,"bracerightvertical",65080,"bracketleft",91,"bracketleftbt",63728,"bracketleftex",63727,"bracketleftmonospace",65339,"bracketlefttp",63726,"bracketright",93,"bracketrightbt",63739,"bracketrightex",63738,"bracketrightmonospace",65341,"bracketrighttp",63737,"breve",728,"brevebelowcmb",814,"brevecmb",774,"breveinvertedbelowcmb",815,"breveinvertedcmb",785,"breveinverteddoublecmb",865,"bridgebelowcmb",810,"bridgeinvertedbelowcmb",826,"brokenbar",166,"bstroke",384,"bsuperior",63210,"btopbar",387,"buhiragana",12406,"bukatakana",12502,"bullet",8226,"bulletinverse",9688,"bulletoperator",8729,"bullseye",9678,"c",99,"caarmenian",1390,"cabengali",2458,"cacute",263,"cadeva",2330,"cagujarati",2714,"cagurmukhi",2586,"calsquare",13192,"candrabindubengali",2433,"candrabinducmb",784,"candrabindudeva",2305,"candrabindugujarati",2689,"capslock",8682,"careof",8453,"caron",711,"caronbelowcmb",812,"caroncmb",780,"carriagereturn",8629,"cbopomofo",12568,"ccaron",269,"ccedilla",231,"ccedillaacute",7689,"ccircle",9426,"ccircumflex",265,"ccurl",597,"cdot",267,"cdotaccent",267,"cdsquare",13253,"cedilla",184,"cedillacmb",807,"cent",162,"centigrade",8451,"centinferior",63199,"centmonospace",65504,"centoldstyle",63394,"centsuperior",63200,"chaarmenian",1401,"chabengali",2459,"chadeva",2331,"chagujarati",2715,"chagurmukhi",2587,"chbopomofo",12564,"cheabkhasiancyrillic",1213,"checkmark",10003,"checyrillic",1095,"chedescenderabkhasiancyrillic",1215,"chedescendercyrillic",1207,"chedieresiscyrillic",1269,"cheharmenian",1395,"chekhakassiancyrillic",1228,"cheverticalstrokecyrillic",1209,"chi",967,"chieuchacirclekorean",12919,"chieuchaparenkorean",12823,"chieuchcirclekorean",12905,"chieuchkorean",12618,"chieuchparenkorean",12809,"chochangthai",3594,"chochanthai",3592,"chochingthai",3593,"chochoethai",3596,"chook",392,"cieucacirclekorean",12918,"cieucaparenkorean",12822,"cieuccirclekorean",12904,"cieuckorean",12616,"cieucparenkorean",12808,"cieucuparenkorean",12828,"circle",9675,"circlecopyrt",169,"circlemultiply",8855,"circleot",8857,"circleplus",8853,"circlepostalmark",12342,"circlewithlefthalfblack",9680,"circlewithrighthalfblack",9681,"circumflex",710,"circumflexbelowcmb",813,"circumflexcmb",770,"clear",8999,"clickalveolar",450,"clickdental",448,"clicklateral",449,"clickretroflex",451,"club",9827,"clubsuitblack",9827,"clubsuitwhite",9831,"cmcubedsquare",13220,"cmonospace",65347,"cmsquaredsquare",13216,"coarmenian",1409,"colon",58,"colonmonetary",8353,"colonmonospace",65306,"colonsign",8353,"colonsmall",65109,"colontriangularhalfmod",721,"colontriangularmod",720,"comma",44,"commaabovecmb",787,"commaaboverightcmb",789,"commaaccent",63171,"commaarabic",1548,"commaarmenian",1373,"commainferior",63201,"commamonospace",65292,"commareversedabovecmb",788,"commareversedmod",701,"commasmall",65104,"commasuperior",63202,"commaturnedabovecmb",786,"commaturnedmod",699,"compass",9788,"congruent",8773,"contourintegral",8750,"control",8963,"controlACK",6,"controlBEL",7,"controlBS",8,"controlCAN",24,"controlCR",13,"controlDC1",17,"controlDC2",18,"controlDC3",19,"controlDC4",20,"controlDEL",127,"controlDLE",16,"controlEM",25,"controlENQ",5,"controlEOT",4,"controlESC",27,"controlETB",23,"controlETX",3,"controlFF",12,"controlFS",28,"controlGS",29,"controlHT",9,"controlLF",10,"controlNAK",21,"controlNULL",0,"controlRS",30,"controlSI",15,"controlSO",14,"controlSOT",2,"controlSTX",1,"controlSUB",26,"controlSYN",22,"controlUS",31,"controlVT",11,"copyright",169,"copyrightsans",63721,"copyrightserif",63193,"cornerbracketleft",12300,"cornerbracketlefthalfwidth",65378,"cornerbracketleftvertical",65089,"cornerbracketright",12301,"cornerbracketrighthalfwidth",65379,"cornerbracketrightvertical",65090,"corporationsquare",13183,"cosquare",13255,"coverkgsquare",13254,"cparen",9374,"cruzeiro",8354,"cstretched",663,"curlyand",8911,"curlyor",8910,"currency",164,"cyrBreve",63185,"cyrFlex",63186,"cyrbreve",63188,"cyrflex",63189,"d",100,"daarmenian",1380,"dabengali",2470,"dadarabic",1590,"dadeva",2342,"dadfinalarabic",65214,"dadinitialarabic",65215,"dadmedialarabic",65216,"dagesh",1468,"dageshhebrew",1468,"dagger",8224,"daggerdbl",8225,"dagujarati",2726,"dagurmukhi",2598,"dahiragana",12384,"dakatakana",12480,"dalarabic",1583,"dalet",1491,"daletdagesh",64307,"daletdageshhebrew",64307,"dalethebrew",1491,"dalfinalarabic",65194,"dammaarabic",1615,"dammalowarabic",1615,"dammatanaltonearabic",1612,"dammatanarabic",1612,"danda",2404,"dargahebrew",1447,"dargalefthebrew",1447,"dasiapneumatacyrilliccmb",1157,"dblGrave",63187,"dblanglebracketleft",12298,"dblanglebracketleftvertical",65085,"dblanglebracketright",12299,"dblanglebracketrightvertical",65086,"dblarchinvertedbelowcmb",811,"dblarrowleft",8660,"dblarrowright",8658,"dbldanda",2405,"dblgrave",63190,"dblgravecmb",783,"dblintegral",8748,"dbllowline",8215,"dbllowlinecmb",819,"dbloverlinecmb",831,"dblprimemod",698,"dblverticalbar",8214,"dblverticallineabovecmb",782,"dbopomofo",12553,"dbsquare",13256,"dcaron",271,"dcedilla",7697,"dcircle",9427,"dcircumflexbelow",7699,"dcroat",273,"ddabengali",2465,"ddadeva",2337,"ddagujarati",2721,"ddagurmukhi",2593,"ddalarabic",1672,"ddalfinalarabic",64393,"dddhadeva",2396,"ddhabengali",2466,"ddhadeva",2338,"ddhagujarati",2722,"ddhagurmukhi",2594,"ddotaccent",7691,"ddotbelow",7693,"decimalseparatorarabic",1643,"decimalseparatorpersian",1643,"decyrillic",1076,"degree",176,"dehihebrew",1453,"dehiragana",12391,"deicoptic",1007,"dekatakana",12487,"deleteleft",9003,"deleteright",8998,"delta",948,"deltaturned",397,"denominatorminusonenumeratorbengali",2552,"dezh",676,"dhabengali",2471,"dhadeva",2343,"dhagujarati",2727,"dhagurmukhi",2599,"dhook",599,"dialytikatonos",901,"dialytikatonoscmb",836,"diamond",9830,"diamondsuitwhite",9826,"dieresis",168,"dieresisacute",63191,"dieresisbelowcmb",804,"dieresiscmb",776,"dieresisgrave",63192,"dieresistonos",901,"dihiragana",12386,"dikatakana",12482,"dittomark",12291,"divide",247,"divides",8739,"divisionslash",8725,"djecyrillic",1106,"dkshade",9619,"dlinebelow",7695,"dlsquare",13207,"dmacron",273,"dmonospace",65348,"dnblock",9604,"dochadathai",3598,"dodekthai",3604,"dohiragana",12393,"dokatakana",12489,"dollar",36,"dollarinferior",63203,"dollarmonospace",65284,"dollaroldstyle",63268,"dollarsmall",65129,"dollarsuperior",63204,"dong",8363,"dorusquare",13094,"dotaccent",729,"dotaccentcmb",775,"dotbelowcmb",803,"dotbelowcomb",803,"dotkatakana",12539,"dotlessi",305,"dotlessj",63166,"dotlessjstrokehook",644,"dotmath",8901,"dottedcircle",9676,"doubleyodpatah",64287,"doubleyodpatahhebrew",64287,"downtackbelowcmb",798,"downtackmod",725,"dparen",9375,"dsuperior",63211,"dtail",598,"dtopbar",396,"duhiragana",12389,"dukatakana",12485,"dz",499,"dzaltone",675,"dzcaron",454,"dzcurl",677,"dzeabkhasiancyrillic",1249,"dzecyrillic",1109,"dzhecyrillic",1119,"e",101,"eacute",233,"earth",9793,"ebengali",2447,"ebopomofo",12572,"ebreve",277,"ecandradeva",2317,"ecandragujarati",2701,"ecandravowelsigndeva",2373,"ecandravowelsigngujarati",2757,"ecaron",283,"ecedillabreve",7709,"echarmenian",1381,"echyiwnarmenian",1415,"ecircle",9428,"ecircumflex",234,"ecircumflexacute",7871,"ecircumflexbelow",7705,"ecircumflexdotbelow",7879,"ecircumflexgrave",7873,"ecircumflexhookabove",7875,"ecircumflextilde",7877,"ecyrillic",1108,"edblgrave",517,"edeva",2319,"edieresis",235,"edot",279,"edotaccent",279,"edotbelow",7865,"eegurmukhi",2575,"eematragurmukhi",2631,"efcyrillic",1092,"egrave",232,"egujarati",2703,"eharmenian",1383,"ehbopomofo",12573,"ehiragana",12360,"ehookabove",7867,"eibopomofo",12575,"eight",56,"eightarabic",1640,"eightbengali",2542,"eightcircle",9319,"eightcircleinversesansserif",10129,"eightdeva",2414,"eighteencircle",9329,"eighteenparen",9349,"eighteenperiod",9369,"eightgujarati",2798,"eightgurmukhi",2670,"eighthackarabic",1640,"eighthangzhou",12328,"eighthnotebeamed",9835,"eightideographicparen",12839,"eightinferior",8328,"eightmonospace",65304,"eightoldstyle",63288,"eightparen",9339,"eightperiod",9359,"eightpersian",1784,"eightroman",8567,"eightsuperior",8312,"eightthai",3672,"einvertedbreve",519,"eiotifiedcyrillic",1125,"ekatakana",12456,"ekatakanahalfwidth",65396,"ekonkargurmukhi",2676,"ekorean",12628,"elcyrillic",1083,"element",8712,"elevencircle",9322,"elevenparen",9342,"elevenperiod",9362,"elevenroman",8570,"ellipsis",8230,"ellipsisvertical",8942,"emacron",275,"emacronacute",7703,"emacrongrave",7701,"emcyrillic",1084,"emdash",8212,"emdashvertical",65073,"emonospace",65349,"emphasismarkarmenian",1371,"emptyset",8709,"enbopomofo",12579,"encyrillic",1085,"endash",8211,"endashvertical",65074,"endescendercyrillic",1187,"eng",331,"engbopomofo",12581,"enghecyrillic",1189,"enhookcyrillic",1224,"enspace",8194,"eogonek",281,"eokorean",12627,"eopen",603,"eopenclosed",666,"eopenreversed",604,"eopenreversedclosed",606,"eopenreversedhook",605,"eparen",9376,"epsilon",949,"epsilontonos",941,"equal",61,"equalmonospace",65309,"equalsmall",65126,"equalsuperior",8316,"equivalence",8801,"erbopomofo",12582,"ercyrillic",1088,"ereversed",600,"ereversedcyrillic",1101,"escyrillic",1089,"esdescendercyrillic",1195,"esh",643,"eshcurl",646,"eshortdeva",2318,"eshortvowelsigndeva",2374,"eshreversedloop",426,"eshsquatreversed",645,"esmallhiragana",12359,"esmallkatakana",12455,"esmallkatakanahalfwidth",65386,"estimated",8494,"esuperior",63212,"eta",951,"etarmenian",1384,"etatonos",942,"eth",240,"etilde",7869,"etildebelow",7707,"etnahtafoukhhebrew",1425,"etnahtafoukhlefthebrew",1425,"etnahtahebrew",1425,"etnahtalefthebrew",1425,"eturned",477,"eukorean",12641,"euro",8364,"evowelsignbengali",2503,"evowelsigndeva",2375,"evowelsigngujarati",2759,"exclam",33,"exclamarmenian",1372,"exclamdbl",8252,"exclamdown",161,"exclamdownsmall",63393,"exclammonospace",65281,"exclamsmall",63265,"existential",8707,"ezh",658,"ezhcaron",495,"ezhcurl",659,"ezhreversed",441,"ezhtail",442,"f",102,"fadeva",2398,"fagurmukhi",2654,"fahrenheit",8457,"fathaarabic",1614,"fathalowarabic",1614,"fathatanarabic",1611,"fbopomofo",12552,"fcircle",9429,"fdotaccent",7711,"feharabic",1601,"feharmenian",1414,"fehfinalarabic",65234,"fehinitialarabic",65235,"fehmedialarabic",65236,"feicoptic",997,"female",9792,"ff",64256,"f_f",64256,"ffi",64259,"ffl",64260,"fi",64257,"fifteencircle",9326,"fifteenparen",9346,"fifteenperiod",9366,"figuredash",8210,"filledbox",9632,"filledrect",9644,"finalkaf",1498,"finalkafdagesh",64314,"finalkafdageshhebrew",64314,"finalkafhebrew",1498,"finalmem",1501,"finalmemhebrew",1501,"finalnun",1503,"finalnunhebrew",1503,"finalpe",1507,"finalpehebrew",1507,"finaltsadi",1509,"finaltsadihebrew",1509,"firsttonechinese",713,"fisheye",9673,"fitacyrillic",1139,"five",53,"fivearabic",1637,"fivebengali",2539,"fivecircle",9316,"fivecircleinversesansserif",10126,"fivedeva",2411,"fiveeighths",8541,"fivegujarati",2795,"fivegurmukhi",2667,"fivehackarabic",1637,"fivehangzhou",12325,"fiveideographicparen",12836,"fiveinferior",8325,"fivemonospace",65301,"fiveoldstyle",63285,"fiveparen",9336,"fiveperiod",9356,"fivepersian",1781,"fiveroman",8564,"fivesuperior",8309,"fivethai",3669,"fl",64258,"florin",402,"fmonospace",65350,"fmsquare",13209,"fofanthai",3615,"fofathai",3613,"fongmanthai",3663,"forall",8704,"four",52,"fourarabic",1636,"fourbengali",2538,"fourcircle",9315,"fourcircleinversesansserif",10125,"fourdeva",2410,"fourgujarati",2794,"fourgurmukhi",2666,"fourhackarabic",1636,"fourhangzhou",12324,"fourideographicparen",12835,"fourinferior",8324,"fourmonospace",65300,"fournumeratorbengali",2551,"fouroldstyle",63284,"fourparen",9335,"fourperiod",9355,"fourpersian",1780,"fourroman",8563,"foursuperior",8308,"fourteencircle",9325,"fourteenparen",9345,"fourteenperiod",9365,"fourthai",3668,"fourthtonechinese",715,"fparen",9377,"fraction",8260,"franc",8355,"g",103,"gabengali",2455,"gacute",501,"gadeva",2327,"gafarabic",1711,"gaffinalarabic",64403,"gafinitialarabic",64404,"gafmedialarabic",64405,"gagujarati",2711,"gagurmukhi",2583,"gahiragana",12364,"gakatakana",12460,"gamma",947,"gammalatinsmall",611,"gammasuperior",736,"gangiacoptic",1003,"gbopomofo",12557,"gbreve",287,"gcaron",487,"gcedilla",291,"gcircle",9430,"gcircumflex",285,"gcommaaccent",291,"gdot",289,"gdotaccent",289,"gecyrillic",1075,"gehiragana",12370,"gekatakana",12466,"geometricallyequal",8785,"gereshaccenthebrew",1436,"gereshhebrew",1523,"gereshmuqdamhebrew",1437,"germandbls",223,"gershayimaccenthebrew",1438,"gershayimhebrew",1524,"getamark",12307,"ghabengali",2456,"ghadarmenian",1394,"ghadeva",2328,"ghagujarati",2712,"ghagurmukhi",2584,"ghainarabic",1594,"ghainfinalarabic",65230,"ghaininitialarabic",65231,"ghainmedialarabic",65232,"ghemiddlehookcyrillic",1173,"ghestrokecyrillic",1171,"gheupturncyrillic",1169,"ghhadeva",2394,"ghhagurmukhi",2650,"ghook",608,"ghzsquare",13203,"gihiragana",12366,"gikatakana",12462,"gimarmenian",1379,"gimel",1490,"gimeldagesh",64306,"gimeldageshhebrew",64306,"gimelhebrew",1490,"gjecyrillic",1107,"glottalinvertedstroke",446,"glottalstop",660,"glottalstopinverted",662,"glottalstopmod",704,"glottalstopreversed",661,"glottalstopreversedmod",705,"glottalstopreversedsuperior",740,"glottalstopstroke",673,"glottalstopstrokereversed",674,"gmacron",7713,"gmonospace",65351,"gohiragana",12372,"gokatakana",12468,"gparen",9378,"gpasquare",13228,"gradient",8711,"grave",96,"gravebelowcmb",790,"gravecmb",768,"gravecomb",768,"gravedeva",2387,"gravelowmod",718,"gravemonospace",65344,"gravetonecmb",832,"greater",62,"greaterequal",8805,"greaterequalorless",8923,"greatermonospace",65310,"greaterorequivalent",8819,"greaterorless",8823,"greateroverequal",8807,"greatersmall",65125,"gscript",609,"gstroke",485,"guhiragana",12368,"guillemotleft",171,"guillemotright",187,"guilsinglleft",8249,"guilsinglright",8250,"gukatakana",12464,"guramusquare",13080,"gysquare",13257,"h",104,"haabkhasiancyrillic",1193,"haaltonearabic",1729,"habengali",2489,"hadescendercyrillic",1203,"hadeva",2361,"hagujarati",2745,"hagurmukhi",2617,"haharabic",1581,"hahfinalarabic",65186,"hahinitialarabic",65187,"hahiragana",12399,"hahmedialarabic",65188,"haitusquare",13098,"hakatakana",12495,"hakatakanahalfwidth",65418,"halantgurmukhi",2637,"hamzaarabic",1569,"hamzalowarabic",1569,"hangulfiller",12644,"hardsigncyrillic",1098,"harpoonleftbarbup",8636,"harpoonrightbarbup",8640,"hasquare",13258,"hatafpatah",1458,"hatafpatah16",1458,"hatafpatah23",1458,"hatafpatah2f",1458,"hatafpatahhebrew",1458,"hatafpatahnarrowhebrew",1458,"hatafpatahquarterhebrew",1458,"hatafpatahwidehebrew",1458,"hatafqamats",1459,"hatafqamats1b",1459,"hatafqamats28",1459,"hatafqamats34",1459,"hatafqamatshebrew",1459,"hatafqamatsnarrowhebrew",1459,"hatafqamatsquarterhebrew",1459,"hatafqamatswidehebrew",1459,"hatafsegol",1457,"hatafsegol17",1457,"hatafsegol24",1457,"hatafsegol30",1457,"hatafsegolhebrew",1457,"hatafsegolnarrowhebrew",1457,"hatafsegolquarterhebrew",1457,"hatafsegolwidehebrew",1457,"hbar",295,"hbopomofo",12559,"hbrevebelow",7723,"hcedilla",7721,"hcircle",9431,"hcircumflex",293,"hdieresis",7719,"hdotaccent",7715,"hdotbelow",7717,"he",1492,"heart",9829,"heartsuitblack",9829,"heartsuitwhite",9825,"hedagesh",64308,"hedageshhebrew",64308,"hehaltonearabic",1729,"heharabic",1607,"hehebrew",1492,"hehfinalaltonearabic",64423,"hehfinalalttwoarabic",65258,"hehfinalarabic",65258,"hehhamzaabovefinalarabic",64421,"hehhamzaaboveisolatedarabic",64420,"hehinitialaltonearabic",64424,"hehinitialarabic",65259,"hehiragana",12408,"hehmedialaltonearabic",64425,"hehmedialarabic",65260,"heiseierasquare",13179,"hekatakana",12504,"hekatakanahalfwidth",65421,"hekutaarusquare",13110,"henghook",615,"herutusquare",13113,"het",1495,"hethebrew",1495,"hhook",614,"hhooksuperior",689,"hieuhacirclekorean",12923,"hieuhaparenkorean",12827,"hieuhcirclekorean",12909,"hieuhkorean",12622,"hieuhparenkorean",12813,"hihiragana",12402,"hikatakana",12498,"hikatakanahalfwidth",65419,"hiriq",1460,"hiriq14",1460,"hiriq21",1460,"hiriq2d",1460,"hiriqhebrew",1460,"hiriqnarrowhebrew",1460,"hiriqquarterhebrew",1460,"hiriqwidehebrew",1460,"hlinebelow",7830,"hmonospace",65352,"hoarmenian",1392,"hohipthai",3627,"hohiragana",12411,"hokatakana",12507,"hokatakanahalfwidth",65422,"holam",1465,"holam19",1465,"holam26",1465,"holam32",1465,"holamhebrew",1465,"holamnarrowhebrew",1465,"holamquarterhebrew",1465,"holamwidehebrew",1465,"honokhukthai",3630,"hookabovecomb",777,"hookcmb",777,"hookpalatalizedbelowcmb",801,"hookretroflexbelowcmb",802,"hoonsquare",13122,"horicoptic",1001,"horizontalbar",8213,"horncmb",795,"hotsprings",9832,"house",8962,"hparen",9379,"hsuperior",688,"hturned",613,"huhiragana",12405,"huiitosquare",13107,"hukatakana",12501,"hukatakanahalfwidth",65420,"hungarumlaut",733,"hungarumlautcmb",779,"hv",405,"hyphen",45,"hypheninferior",63205,"hyphenmonospace",65293,"hyphensmall",65123,"hyphensuperior",63206,"hyphentwo",8208,"i",105,"iacute",237,"iacyrillic",1103,"ibengali",2439,"ibopomofo",12583,"ibreve",301,"icaron",464,"icircle",9432,"icircumflex",238,"icyrillic",1110,"idblgrave",521,"ideographearthcircle",12943,"ideographfirecircle",12939,"ideographicallianceparen",12863,"ideographiccallparen",12858,"ideographiccentrecircle",12965,"ideographicclose",12294,"ideographiccomma",12289,"ideographiccommaleft",65380,"ideographiccongratulationparen",12855,"ideographiccorrectcircle",12963,"ideographicearthparen",12847,"ideographicenterpriseparen",12861,"ideographicexcellentcircle",12957,"ideographicfestivalparen",12864,"ideographicfinancialcircle",12950,"ideographicfinancialparen",12854,"ideographicfireparen",12843,"ideographichaveparen",12850,"ideographichighcircle",12964,"ideographiciterationmark",12293,"ideographiclaborcircle",12952,"ideographiclaborparen",12856,"ideographicleftcircle",12967,"ideographiclowcircle",12966,"ideographicmedicinecircle",12969,"ideographicmetalparen",12846,"ideographicmoonparen",12842,"ideographicnameparen",12852,"ideographicperiod",12290,"ideographicprintcircle",12958,"ideographicreachparen",12867,"ideographicrepresentparen",12857,"ideographicresourceparen",12862,"ideographicrightcircle",12968,"ideographicsecretcircle",12953,"ideographicselfparen",12866,"ideographicsocietyparen",12851,"ideographicspace",12288,"ideographicspecialparen",12853,"ideographicstockparen",12849,"ideographicstudyparen",12859,"ideographicsunparen",12848,"ideographicsuperviseparen",12860,"ideographicwaterparen",12844,"ideographicwoodparen",12845,"ideographiczero",12295,"ideographmetalcircle",12942,"ideographmooncircle",12938,"ideographnamecircle",12948,"ideographsuncircle",12944,"ideographwatercircle",12940,"ideographwoodcircle",12941,"ideva",2311,"idieresis",239,"idieresisacute",7727,"idieresiscyrillic",1253,"idotbelow",7883,"iebrevecyrillic",1239,"iecyrillic",1077,"ieungacirclekorean",12917,"ieungaparenkorean",12821,"ieungcirclekorean",12903,"ieungkorean",12615,"ieungparenkorean",12807,"igrave",236,"igujarati",2695,"igurmukhi",2567,"ihiragana",12356,"ihookabove",7881,"iibengali",2440,"iicyrillic",1080,"iideva",2312,"iigujarati",2696,"iigurmukhi",2568,"iimatragurmukhi",2624,"iinvertedbreve",523,"iishortcyrillic",1081,"iivowelsignbengali",2496,"iivowelsigndeva",2368,"iivowelsigngujarati",2752,"ij",307,"ikatakana",12452,"ikatakanahalfwidth",65394,"ikorean",12643,"ilde",732,"iluyhebrew",1452,"imacron",299,"imacroncyrillic",1251,"imageorapproximatelyequal",8787,"imatragurmukhi",2623,"imonospace",65353,"increment",8710,"infinity",8734,"iniarmenian",1387,"integral",8747,"integralbottom",8993,"integralbt",8993,"integralex",63733,"integraltop",8992,"integraltp",8992,"intersection",8745,"intisquare",13061,"invbullet",9688,"invcircle",9689,"invsmileface",9787,"iocyrillic",1105,"iogonek",303,"iota",953,"iotadieresis",970,"iotadieresistonos",912,"iotalatin",617,"iotatonos",943,"iparen",9380,"irigurmukhi",2674,"ismallhiragana",12355,"ismallkatakana",12451,"ismallkatakanahalfwidth",65384,"issharbengali",2554,"istroke",616,"isuperior",63213,"iterationhiragana",12445,"iterationkatakana",12541,"itilde",297,"itildebelow",7725,"iubopomofo",12585,"iucyrillic",1102,"ivowelsignbengali",2495,"ivowelsigndeva",2367,"ivowelsigngujarati",2751,"izhitsacyrillic",1141,"izhitsadblgravecyrillic",1143,"j",106,"jaarmenian",1393,"jabengali",2460,"jadeva",2332,"jagujarati",2716,"jagurmukhi",2588,"jbopomofo",12560,"jcaron",496,"jcircle",9433,"jcircumflex",309,"jcrossedtail",669,"jdotlessstroke",607,"jecyrillic",1112,"jeemarabic",1580,"jeemfinalarabic",65182,"jeeminitialarabic",65183,"jeemmedialarabic",65184,"jeharabic",1688,"jehfinalarabic",64395,"jhabengali",2461,"jhadeva",2333,"jhagujarati",2717,"jhagurmukhi",2589,"jheharmenian",1403,"jis",12292,"jmonospace",65354,"jparen",9381,"jsuperior",690,"k",107,"kabashkircyrillic",1185,"kabengali",2453,"kacute",7729,"kacyrillic",1082,"kadescendercyrillic",1179,"kadeva",2325,"kaf",1499,"kafarabic",1603,"kafdagesh",64315,"kafdageshhebrew",64315,"kaffinalarabic",65242,"kafhebrew",1499,"kafinitialarabic",65243,"kafmedialarabic",65244,"kafrafehebrew",64333,"kagujarati",2709,"kagurmukhi",2581,"kahiragana",12363,"kahookcyrillic",1220,"kakatakana",12459,"kakatakanahalfwidth",65398,"kappa",954,"kappasymbolgreek",1008,"kapyeounmieumkorean",12657,"kapyeounphieuphkorean",12676,"kapyeounpieupkorean",12664,"kapyeounssangpieupkorean",12665,"karoriisquare",13069,"kashidaautoarabic",1600,"kashidaautonosidebearingarabic",1600,"kasmallkatakana",12533,"kasquare",13188,"kasraarabic",1616,"kasratanarabic",1613,"kastrokecyrillic",1183,"katahiraprolongmarkhalfwidth",65392,"kaverticalstrokecyrillic",1181,"kbopomofo",12558,"kcalsquare",13193,"kcaron",489,"kcedilla",311,"kcircle",9434,"kcommaaccent",311,"kdotbelow",7731,"keharmenian",1412,"kehiragana",12369,"kekatakana",12465,"kekatakanahalfwidth",65401,"kenarmenian",1391,"kesmallkatakana",12534,"kgreenlandic",312,"khabengali",2454,"khacyrillic",1093,"khadeva",2326,"khagujarati",2710,"khagurmukhi",2582,"khaharabic",1582,"khahfinalarabic",65190,"khahinitialarabic",65191,"khahmedialarabic",65192,"kheicoptic",999,"khhadeva",2393,"khhagurmukhi",2649,"khieukhacirclekorean",12920,"khieukhaparenkorean",12824,"khieukhcirclekorean",12906,"khieukhkorean",12619,"khieukhparenkorean",12810,"khokhaithai",3586,"khokhonthai",3589,"khokhuatthai",3587,"khokhwaithai",3588,"khomutthai",3675,"khook",409,"khorakhangthai",3590,"khzsquare",13201,"kihiragana",12365,"kikatakana",12461,"kikatakanahalfwidth",65399,"kiroguramusquare",13077,"kiromeetorusquare",13078,"kirosquare",13076,"kiyeokacirclekorean",12910,"kiyeokaparenkorean",12814,"kiyeokcirclekorean",12896,"kiyeokkorean",12593,"kiyeokparenkorean",12800,"kiyeoksioskorean",12595,"kjecyrillic",1116,"klinebelow",7733,"klsquare",13208,"kmcubedsquare",13222,"kmonospace",65355,"kmsquaredsquare",13218,"kohiragana",12371,"kohmsquare",13248,"kokaithai",3585,"kokatakana",12467,"kokatakanahalfwidth",65402,"kooposquare",13086,"koppacyrillic",1153,"koreanstandardsymbol",12927,"koroniscmb",835,"kparen",9382,"kpasquare",13226,"ksicyrillic",1135,"ktsquare",13263,"kturned",670,"kuhiragana",12367,"kukatakana",12463,"kukatakanahalfwidth",65400,"kvsquare",13240,"kwsquare",13246,"l",108,"labengali",2482,"lacute",314,"ladeva",2354,"lagujarati",2738,"lagurmukhi",2610,"lakkhangyaothai",3653,"lamaleffinalarabic",65276,"lamalefhamzaabovefinalarabic",65272,"lamalefhamzaaboveisolatedarabic",65271,"lamalefhamzabelowfinalarabic",65274,"lamalefhamzabelowisolatedarabic",65273,"lamalefisolatedarabic",65275,"lamalefmaddaabovefinalarabic",65270,"lamalefmaddaaboveisolatedarabic",65269,"lamarabic",1604,"lambda",955,"lambdastroke",411,"lamed",1500,"lameddagesh",64316,"lameddageshhebrew",64316,"lamedhebrew",1500,"lamfinalarabic",65246,"lamhahinitialarabic",64714,"laminitialarabic",65247,"lamjeeminitialarabic",64713,"lamkhahinitialarabic",64715,"lamlamhehisolatedarabic",65010,"lammedialarabic",65248,"lammeemhahinitialarabic",64904,"lammeeminitialarabic",64716,"largecircle",9711,"lbar",410,"lbelt",620,"lbopomofo",12556,"lcaron",318,"lcedilla",316,"lcircle",9435,"lcircumflexbelow",7741,"lcommaaccent",316,"ldot",320,"ldotaccent",320,"ldotbelow",7735,"ldotbelowmacron",7737,"leftangleabovecmb",794,"lefttackbelowcmb",792,"less",60,"lessequal",8804,"lessequalorgreater",8922,"lessmonospace",65308,"lessorequivalent",8818,"lessorgreater",8822,"lessoverequal",8806,"lesssmall",65124,"lezh",622,"lfblock",9612,"lhookretroflex",621,"lira",8356,"liwnarmenian",1388,"lj",457,"ljecyrillic",1113,"ll",63168,"lladeva",2355,"llagujarati",2739,"llinebelow",7739,"llladeva",2356,"llvocalicbengali",2529,"llvocalicdeva",2401,"llvocalicvowelsignbengali",2531,"llvocalicvowelsigndeva",2403,"lmiddletilde",619,"lmonospace",65356,"lmsquare",13264,"lochulathai",3628,"logicaland",8743,"logicalnot",172,"logicalnotreversed",8976,"logicalor",8744,"lolingthai",3621,"longs",383,"lowlinecenterline",65102,"lowlinecmb",818,"lowlinedashed",65101,"lozenge",9674,"lparen",9383,"lslash",322,"lsquare",8467,"lsuperior",63214,"ltshade",9617,"luthai",3622,"lvocalicbengali",2444,"lvocalicdeva",2316,"lvocalicvowelsignbengali",2530,"lvocalicvowelsigndeva",2402,"lxsquare",13267,"m",109,"mabengali",2478,"macron",175,"macronbelowcmb",817,"macroncmb",772,"macronlowmod",717,"macronmonospace",65507,"macute",7743,"madeva",2350,"magujarati",2734,"magurmukhi",2606,"mahapakhhebrew",1444,"mahapakhlefthebrew",1444,"mahiragana",12414,"maichattawalowleftthai",63637,"maichattawalowrightthai",63636,"maichattawathai",3659,"maichattawaupperleftthai",63635,"maieklowleftthai",63628,"maieklowrightthai",63627,"maiekthai",3656,"maiekupperleftthai",63626,"maihanakatleftthai",63620,"maihanakatthai",3633,"maitaikhuleftthai",63625,"maitaikhuthai",3655,"maitholowleftthai",63631,"maitholowrightthai",63630,"maithothai",3657,"maithoupperleftthai",63629,"maitrilowleftthai",63634,"maitrilowrightthai",63633,"maitrithai",3658,"maitriupperleftthai",63632,"maiyamokthai",3654,"makatakana",12510,"makatakanahalfwidth",65423,"male",9794,"mansyonsquare",13127,"maqafhebrew",1470,"mars",9794,"masoracirclehebrew",1455,"masquare",13187,"mbopomofo",12551,"mbsquare",13268,"mcircle",9436,"mcubedsquare",13221,"mdotaccent",7745,"mdotbelow",7747,"meemarabic",1605,"meemfinalarabic",65250,"meeminitialarabic",65251,"meemmedialarabic",65252,"meemmeeminitialarabic",64721,"meemmeemisolatedarabic",64584,"meetorusquare",13133,"mehiragana",12417,"meizierasquare",13182,"mekatakana",12513,"mekatakanahalfwidth",65426,"mem",1502,"memdagesh",64318,"memdageshhebrew",64318,"memhebrew",1502,"menarmenian",1396,"merkhahebrew",1445,"merkhakefulahebrew",1446,"merkhakefulalefthebrew",1446,"merkhalefthebrew",1445,"mhook",625,"mhzsquare",13202,"middledotkatakanahalfwidth",65381,"middot",183,"mieumacirclekorean",12914,"mieumaparenkorean",12818,"mieumcirclekorean",12900,"mieumkorean",12609,"mieumpansioskorean",12656,"mieumparenkorean",12804,"mieumpieupkorean",12654,"mieumsioskorean",12655,"mihiragana",12415,"mikatakana",12511,"mikatakanahalfwidth",65424,"minus",8722,"minusbelowcmb",800,"minuscircle",8854,"minusmod",727,"minusplus",8723,"minute",8242,"miribaarusquare",13130,"mirisquare",13129,"mlonglegturned",624,"mlsquare",13206,"mmcubedsquare",13219,"mmonospace",65357,"mmsquaredsquare",13215,"mohiragana",12418,"mohmsquare",13249,"mokatakana",12514,"mokatakanahalfwidth",65427,"molsquare",13270,"momathai",3617,"moverssquare",13223,"moverssquaredsquare",13224,"mparen",9384,"mpasquare",13227,"mssquare",13235,"msuperior",63215,"mturned",623,"mu",181,"mu1",181,"muasquare",13186,"muchgreater",8811,"muchless",8810,"mufsquare",13196,"mugreek",956,"mugsquare",13197,"muhiragana",12416,"mukatakana",12512,"mukatakanahalfwidth",65425,"mulsquare",13205,"multiply",215,"mumsquare",13211,"munahhebrew",1443,"munahlefthebrew",1443,"musicalnote",9834,"musicalnotedbl",9835,"musicflatsign",9837,"musicsharpsign",9839,"mussquare",13234,"muvsquare",13238,"muwsquare",13244,"mvmegasquare",13241,"mvsquare",13239,"mwmegasquare",13247,"mwsquare",13245,"n",110,"nabengali",2472,"nabla",8711,"nacute",324,"nadeva",2344,"nagujarati",2728,"nagurmukhi",2600,"nahiragana",12394,"nakatakana",12490,"nakatakanahalfwidth",65413,"napostrophe",329,"nasquare",13185,"nbopomofo",12555,"nbspace",160,"ncaron",328,"ncedilla",326,"ncircle",9437,"ncircumflexbelow",7755,"ncommaaccent",326,"ndotaccent",7749,"ndotbelow",7751,"nehiragana",12397,"nekatakana",12493,"nekatakanahalfwidth",65416,"newsheqelsign",8362,"nfsquare",13195,"ngabengali",2457,"ngadeva",2329,"ngagujarati",2713,"ngagurmukhi",2585,"ngonguthai",3591,"nhiragana",12435,"nhookleft",626,"nhookretroflex",627,"nieunacirclekorean",12911,"nieunaparenkorean",12815,"nieuncieuckorean",12597,"nieuncirclekorean",12897,"nieunhieuhkorean",12598,"nieunkorean",12596,"nieunpansioskorean",12648,"nieunparenkorean",12801,"nieunsioskorean",12647,"nieuntikeutkorean",12646,"nihiragana",12395,"nikatakana",12491,"nikatakanahalfwidth",65414,"nikhahitleftthai",63641,"nikhahitthai",3661,"nine",57,"ninearabic",1641,"ninebengali",2543,"ninecircle",9320,"ninecircleinversesansserif",10130,"ninedeva",2415,"ninegujarati",2799,"ninegurmukhi",2671,"ninehackarabic",1641,"ninehangzhou",12329,"nineideographicparen",12840,"nineinferior",8329,"ninemonospace",65305,"nineoldstyle",63289,"nineparen",9340,"nineperiod",9360,"ninepersian",1785,"nineroman",8568,"ninesuperior",8313,"nineteencircle",9330,"nineteenparen",9350,"nineteenperiod",9370,"ninethai",3673,"nj",460,"njecyrillic",1114,"nkatakana",12531,"nkatakanahalfwidth",65437,"nlegrightlong",414,"nlinebelow",7753,"nmonospace",65358,"nmsquare",13210,"nnabengali",2467,"nnadeva",2339,"nnagujarati",2723,"nnagurmukhi",2595,"nnnadeva",2345,"nohiragana",12398,"nokatakana",12494,"nokatakanahalfwidth",65417,"nonbreakingspace",160,"nonenthai",3603,"nonuthai",3609,"noonarabic",1606,"noonfinalarabic",65254,"noonghunnaarabic",1722,"noonghunnafinalarabic",64415,"nooninitialarabic",65255,"noonjeeminitialarabic",64722,"noonjeemisolatedarabic",64587,"noonmedialarabic",65256,"noonmeeminitialarabic",64725,"noonmeemisolatedarabic",64590,"noonnoonfinalarabic",64653,"notcontains",8716,"notelement",8713,"notelementof",8713,"notequal",8800,"notgreater",8815,"notgreaternorequal",8817,"notgreaternorless",8825,"notidentical",8802,"notless",8814,"notlessnorequal",8816,"notparallel",8742,"notprecedes",8832,"notsubset",8836,"notsucceeds",8833,"notsuperset",8837,"nowarmenian",1398,"nparen",9385,"nssquare",13233,"nsuperior",8319,"ntilde",241,"nu",957,"nuhiragana",12396,"nukatakana",12492,"nukatakanahalfwidth",65415,"nuktabengali",2492,"nuktadeva",2364,"nuktagujarati",2748,"nuktagurmukhi",2620,"numbersign",35,"numbersignmonospace",65283,"numbersignsmall",65119,"numeralsigngreek",884,"numeralsignlowergreek",885,"numero",8470,"nun",1504,"nundagesh",64320,"nundageshhebrew",64320,"nunhebrew",1504,"nvsquare",13237,"nwsquare",13243,"nyabengali",2462,"nyadeva",2334,"nyagujarati",2718,"nyagurmukhi",2590,"o",111,"oacute",243,"oangthai",3629,"obarred",629,"obarredcyrillic",1257,"obarreddieresiscyrillic",1259,"obengali",2451,"obopomofo",12571,"obreve",335,"ocandradeva",2321,"ocandragujarati",2705,"ocandravowelsigndeva",2377,"ocandravowelsigngujarati",2761,"ocaron",466,"ocircle",9438,"ocircumflex",244,"ocircumflexacute",7889,"ocircumflexdotbelow",7897,"ocircumflexgrave",7891,"ocircumflexhookabove",7893,"ocircumflextilde",7895,"ocyrillic",1086,"odblacute",337,"odblgrave",525,"odeva",2323,"odieresis",246,"odieresiscyrillic",1255,"odotbelow",7885,"oe",339,"oekorean",12634,"ogonek",731,"ogonekcmb",808,"ograve",242,"ogujarati",2707,"oharmenian",1413,"ohiragana",12362,"ohookabove",7887,"ohorn",417,"ohornacute",7899,"ohorndotbelow",7907,"ohorngrave",7901,"ohornhookabove",7903,"ohorntilde",7905,"ohungarumlaut",337,"oi",419,"oinvertedbreve",527,"okatakana",12458,"okatakanahalfwidth",65397,"okorean",12631,"olehebrew",1451,"omacron",333,"omacronacute",7763,"omacrongrave",7761,"omdeva",2384,"omega",969,"omega1",982,"omegacyrillic",1121,"omegalatinclosed",631,"omegaroundcyrillic",1147,"omegatitlocyrillic",1149,"omegatonos",974,"omgujarati",2768,"omicron",959,"omicrontonos",972,"omonospace",65359,"one",49,"onearabic",1633,"onebengali",2535,"onecircle",9312,"onecircleinversesansserif",10122,"onedeva",2407,"onedotenleader",8228,"oneeighth",8539,"onefitted",63196,"onegujarati",2791,"onegurmukhi",2663,"onehackarabic",1633,"onehalf",189,"onehangzhou",12321,"oneideographicparen",12832,"oneinferior",8321,"onemonospace",65297,"onenumeratorbengali",2548,"oneoldstyle",63281,"oneparen",9332,"oneperiod",9352,"onepersian",1777,"onequarter",188,"oneroman",8560,"onesuperior",185,"onethai",3665,"onethird",8531,"oogonek",491,"oogonekmacron",493,"oogurmukhi",2579,"oomatragurmukhi",2635,"oopen",596,"oparen",9386,"openbullet",9702,"option",8997,"ordfeminine",170,"ordmasculine",186,"orthogonal",8735,"oshortdeva",2322,"oshortvowelsigndeva",2378,"oslash",248,"oslashacute",511,"osmallhiragana",12361,"osmallkatakana",12457,"osmallkatakanahalfwidth",65387,"ostrokeacute",511,"osuperior",63216,"otcyrillic",1151,"otilde",245,"otildeacute",7757,"otildedieresis",7759,"oubopomofo",12577,"overline",8254,"overlinecenterline",65098,"overlinecmb",773,"overlinedashed",65097,"overlinedblwavy",65100,"overlinewavy",65099,"overscore",175,"ovowelsignbengali",2507,"ovowelsigndeva",2379,"ovowelsigngujarati",2763,"p",112,"paampssquare",13184,"paasentosquare",13099,"pabengali",2474,"pacute",7765,"padeva",2346,"pagedown",8671,"pageup",8670,"pagujarati",2730,"pagurmukhi",2602,"pahiragana",12401,"paiyannoithai",3631,"pakatakana",12497,"palatalizationcyrilliccmb",1156,"palochkacyrillic",1216,"pansioskorean",12671,"paragraph",182,"parallel",8741,"parenleft",40,"parenleftaltonearabic",64830,"parenleftbt",63725,"parenleftex",63724,"parenleftinferior",8333,"parenleftmonospace",65288,"parenleftsmall",65113,"parenleftsuperior",8317,"parenlefttp",63723,"parenleftvertical",65077,"parenright",41,"parenrightaltonearabic",64831,"parenrightbt",63736,"parenrightex",63735,"parenrightinferior",8334,"parenrightmonospace",65289,"parenrightsmall",65114,"parenrightsuperior",8318,"parenrighttp",63734,"parenrightvertical",65078,"partialdiff",8706,"paseqhebrew",1472,"pashtahebrew",1433,"pasquare",13225,"patah",1463,"patah11",1463,"patah1d",1463,"patah2a",1463,"patahhebrew",1463,"patahnarrowhebrew",1463,"patahquarterhebrew",1463,"patahwidehebrew",1463,"pazerhebrew",1441,"pbopomofo",12550,"pcircle",9439,"pdotaccent",7767,"pe",1508,"pecyrillic",1087,"pedagesh",64324,"pedageshhebrew",64324,"peezisquare",13115,"pefinaldageshhebrew",64323,"peharabic",1662,"peharmenian",1402,"pehebrew",1508,"pehfinalarabic",64343,"pehinitialarabic",64344,"pehiragana",12410,"pehmedialarabic",64345,"pekatakana",12506,"pemiddlehookcyrillic",1191,"perafehebrew",64334,"percent",37,"percentarabic",1642,"percentmonospace",65285,"percentsmall",65130,"period",46,"periodarmenian",1417,"periodcentered",183,"periodhalfwidth",65377,"periodinferior",63207,"periodmonospace",65294,"periodsmall",65106,"periodsuperior",63208,"perispomenigreekcmb",834,"perpendicular",8869,"perthousand",8240,"peseta",8359,"pfsquare",13194,"phabengali",2475,"phadeva",2347,"phagujarati",2731,"phagurmukhi",2603,"phi",966,"phi1",981,"phieuphacirclekorean",12922,"phieuphaparenkorean",12826,"phieuphcirclekorean",12908,"phieuphkorean",12621,"phieuphparenkorean",12812,"philatin",632,"phinthuthai",3642,"phisymbolgreek",981,"phook",421,"phophanthai",3614,"phophungthai",3612,"phosamphaothai",3616,"pi",960,"pieupacirclekorean",12915,"pieupaparenkorean",12819,"pieupcieuckorean",12662,"pieupcirclekorean",12901,"pieupkiyeokkorean",12658,"pieupkorean",12610,"pieupparenkorean",12805,"pieupsioskiyeokkorean",12660,"pieupsioskorean",12612,"pieupsiostikeutkorean",12661,"pieupthieuthkorean",12663,"pieuptikeutkorean",12659,"pihiragana",12404,"pikatakana",12500,"pisymbolgreek",982,"piwrarmenian",1411,"plus",43,"plusbelowcmb",799,"pluscircle",8853,"plusminus",177,"plusmod",726,"plusmonospace",65291,"plussmall",65122,"plussuperior",8314,"pmonospace",65360,"pmsquare",13272,"pohiragana",12413,"pointingindexdownwhite",9759,"pointingindexleftwhite",9756,"pointingindexrightwhite",9758,"pointingindexupwhite",9757,"pokatakana",12509,"poplathai",3611,"postalmark",12306,"postalmarkface",12320,"pparen",9387,"precedes",8826,"prescription",8478,"primemod",697,"primereversed",8245,"product",8719,"projective",8965,"prolongedkana",12540,"propellor",8984,"propersubset",8834,"propersuperset",8835,"proportion",8759,"proportional",8733,"psi",968,"psicyrillic",1137,"psilipneumatacyrilliccmb",1158,"pssquare",13232,"puhiragana",12407,"pukatakana",12503,"pvsquare",13236,"pwsquare",13242,"q",113,"qadeva",2392,"qadmahebrew",1448,"qafarabic",1602,"qaffinalarabic",65238,"qafinitialarabic",65239,"qafmedialarabic",65240,"qamats",1464,"qamats10",1464,"qamats1a",1464,"qamats1c",1464,"qamats27",1464,"qamats29",1464,"qamats33",1464,"qamatsde",1464,"qamatshebrew",1464,"qamatsnarrowhebrew",1464,"qamatsqatanhebrew",1464,"qamatsqatannarrowhebrew",1464,"qamatsqatanquarterhebrew",1464,"qamatsqatanwidehebrew",1464,"qamatsquarterhebrew",1464,"qamatswidehebrew",1464,"qarneyparahebrew",1439,"qbopomofo",12561,"qcircle",9440,"qhook",672,"qmonospace",65361,"qof",1511,"qofdagesh",64327,"qofdageshhebrew",64327,"qofhebrew",1511,"qparen",9388,"quarternote",9833,"qubuts",1467,"qubuts18",1467,"qubuts25",1467,"qubuts31",1467,"qubutshebrew",1467,"qubutsnarrowhebrew",1467,"qubutsquarterhebrew",1467,"qubutswidehebrew",1467,"question",63,"questionarabic",1567,"questionarmenian",1374,"questiondown",191,"questiondownsmall",63423,"questiongreek",894,"questionmonospace",65311,"questionsmall",63295,"quotedbl",34,"quotedblbase",8222,"quotedblleft",8220,"quotedblmonospace",65282,"quotedblprime",12318,"quotedblprimereversed",12317,"quotedblright",8221,"quoteleft",8216,"quoteleftreversed",8219,"quotereversed",8219,"quoteright",8217,"quoterightn",329,"quotesinglbase",8218,"quotesingle",39,"quotesinglemonospace",65287,"r",114,"raarmenian",1404,"rabengali",2480,"racute",341,"radeva",2352,"radical",8730,"radicalex",63717,"radoverssquare",13230,"radoverssquaredsquare",13231,"radsquare",13229,"rafe",1471,"rafehebrew",1471,"ragujarati",2736,"ragurmukhi",2608,"rahiragana",12425,"rakatakana",12521,"rakatakanahalfwidth",65431,"ralowerdiagonalbengali",2545,"ramiddlediagonalbengali",2544,"ramshorn",612,"ratio",8758,"rbopomofo",12566,"rcaron",345,"rcedilla",343,"rcircle",9441,"rcommaaccent",343,"rdblgrave",529,"rdotaccent",7769,"rdotbelow",7771,"rdotbelowmacron",7773,"referencemark",8251,"reflexsubset",8838,"reflexsuperset",8839,"registered",174,"registersans",63720,"registerserif",63194,"reharabic",1585,"reharmenian",1408,"rehfinalarabic",65198,"rehiragana",12428,"rekatakana",12524,"rekatakanahalfwidth",65434,"resh",1512,"reshdageshhebrew",64328,"reshhebrew",1512,"reversedtilde",8765,"reviahebrew",1431,"reviamugrashhebrew",1431,"revlogicalnot",8976,"rfishhook",638,"rfishhookreversed",639,"rhabengali",2525,"rhadeva",2397,"rho",961,"rhook",637,"rhookturned",635,"rhookturnedsuperior",693,"rhosymbolgreek",1009,"rhotichookmod",734,"rieulacirclekorean",12913,"rieulaparenkorean",12817,"rieulcirclekorean",12899,"rieulhieuhkorean",12608,"rieulkiyeokkorean",12602,"rieulkiyeoksioskorean",12649,"rieulkorean",12601,"rieulmieumkorean",12603,"rieulpansioskorean",12652,"rieulparenkorean",12803,"rieulphieuphkorean",12607,"rieulpieupkorean",12604,"rieulpieupsioskorean",12651,"rieulsioskorean",12605,"rieulthieuthkorean",12606,"rieultikeutkorean",12650,"rieulyeorinhieuhkorean",12653,"rightangle",8735,"righttackbelowcmb",793,"righttriangle",8895,"rihiragana",12426,"rikatakana",12522,"rikatakanahalfwidth",65432,"ring",730,"ringbelowcmb",805,"ringcmb",778,"ringhalfleft",703,"ringhalfleftarmenian",1369,"ringhalfleftbelowcmb",796,"ringhalfleftcentered",723,"ringhalfright",702,"ringhalfrightbelowcmb",825,"ringhalfrightcentered",722,"rinvertedbreve",531,"rittorusquare",13137,"rlinebelow",7775,"rlongleg",636,"rlonglegturned",634,"rmonospace",65362,"rohiragana",12429,"rokatakana",12525,"rokatakanahalfwidth",65435,"roruathai",3619,"rparen",9389,"rrabengali",2524,"rradeva",2353,"rragurmukhi",2652,"rreharabic",1681,"rrehfinalarabic",64397,"rrvocalicbengali",2528,"rrvocalicdeva",2400,"rrvocalicgujarati",2784,"rrvocalicvowelsignbengali",2500,"rrvocalicvowelsigndeva",2372,"rrvocalicvowelsigngujarati",2756,"rsuperior",63217,"rtblock",9616,"rturned",633,"rturnedsuperior",692,"ruhiragana",12427,"rukatakana",12523,"rukatakanahalfwidth",65433,"rupeemarkbengali",2546,"rupeesignbengali",2547,"rupiah",63197,"ruthai",3620,"rvocalicbengali",2443,"rvocalicdeva",2315,"rvocalicgujarati",2699,"rvocalicvowelsignbengali",2499,"rvocalicvowelsigndeva",2371,"rvocalicvowelsigngujarati",2755,"s",115,"sabengali",2488,"sacute",347,"sacutedotaccent",7781,"sadarabic",1589,"sadeva",2360,"sadfinalarabic",65210,"sadinitialarabic",65211,"sadmedialarabic",65212,"sagujarati",2744,"sagurmukhi",2616,"sahiragana",12373,"sakatakana",12469,"sakatakanahalfwidth",65403,"sallallahoualayhewasallamarabic",65018,"samekh",1505,"samekhdagesh",64321,"samekhdageshhebrew",64321,"samekhhebrew",1505,"saraaathai",3634,"saraaethai",3649,"saraaimaimalaithai",3652,"saraaimaimuanthai",3651,"saraamthai",3635,"saraathai",3632,"saraethai",3648,"saraiileftthai",63622,"saraiithai",3637,"saraileftthai",63621,"saraithai",3636,"saraothai",3650,"saraueeleftthai",63624,"saraueethai",3639,"saraueleftthai",63623,"sarauethai",3638,"sarauthai",3640,"sarauuthai",3641,"sbopomofo",12569,"scaron",353,"scarondotaccent",7783,"scedilla",351,"schwa",601,"schwacyrillic",1241,"schwadieresiscyrillic",1243,"schwahook",602,"scircle",9442,"scircumflex",349,"scommaaccent",537,"sdotaccent",7777,"sdotbelow",7779,"sdotbelowdotaccent",7785,"seagullbelowcmb",828,"second",8243,"secondtonechinese",714,"section",167,"seenarabic",1587,"seenfinalarabic",65202,"seeninitialarabic",65203,"seenmedialarabic",65204,"segol",1462,"segol13",1462,"segol1f",1462,"segol2c",1462,"segolhebrew",1462,"segolnarrowhebrew",1462,"segolquarterhebrew",1462,"segoltahebrew",1426,"segolwidehebrew",1462,"seharmenian",1405,"sehiragana",12379,"sekatakana",12475,"sekatakanahalfwidth",65406,"semicolon",59,"semicolonarabic",1563,"semicolonmonospace",65307,"semicolonsmall",65108,"semivoicedmarkkana",12444,"semivoicedmarkkanahalfwidth",65439,"sentisquare",13090,"sentosquare",13091,"seven",55,"sevenarabic",1639,"sevenbengali",2541,"sevencircle",9318,"sevencircleinversesansserif",10128,"sevendeva",2413,"seveneighths",8542,"sevengujarati",2797,"sevengurmukhi",2669,"sevenhackarabic",1639,"sevenhangzhou",12327,"sevenideographicparen",12838,"seveninferior",8327,"sevenmonospace",65303,"sevenoldstyle",63287,"sevenparen",9338,"sevenperiod",9358,"sevenpersian",1783,"sevenroman",8566,"sevensuperior",8311,"seventeencircle",9328,"seventeenparen",9348,"seventeenperiod",9368,"seventhai",3671,"sfthyphen",173,"shaarmenian",1399,"shabengali",2486,"shacyrillic",1096,"shaddaarabic",1617,"shaddadammaarabic",64609,"shaddadammatanarabic",64606,"shaddafathaarabic",64608,"shaddakasraarabic",64610,"shaddakasratanarabic",64607,"shade",9618,"shadedark",9619,"shadelight",9617,"shademedium",9618,"shadeva",2358,"shagujarati",2742,"shagurmukhi",2614,"shalshelethebrew",1427,"shbopomofo",12565,"shchacyrillic",1097,"sheenarabic",1588,"sheenfinalarabic",65206,"sheeninitialarabic",65207,"sheenmedialarabic",65208,"sheicoptic",995,"sheqel",8362,"sheqelhebrew",8362,"sheva",1456,"sheva115",1456,"sheva15",1456,"sheva22",1456,"sheva2e",1456,"shevahebrew",1456,"shevanarrowhebrew",1456,"shevaquarterhebrew",1456,"shevawidehebrew",1456,"shhacyrillic",1211,"shimacoptic",1005,"shin",1513,"shindagesh",64329,"shindageshhebrew",64329,"shindageshshindot",64300,"shindageshshindothebrew",64300,"shindageshsindot",64301,"shindageshsindothebrew",64301,"shindothebrew",1473,"shinhebrew",1513,"shinshindot",64298,"shinshindothebrew",64298,"shinsindot",64299,"shinsindothebrew",64299,"shook",642,"sigma",963,"sigma1",962,"sigmafinal",962,"sigmalunatesymbolgreek",1010,"sihiragana",12375,"sikatakana",12471,"sikatakanahalfwidth",65404,"siluqhebrew",1469,"siluqlefthebrew",1469,"similar",8764,"sindothebrew",1474,"siosacirclekorean",12916,"siosaparenkorean",12820,"sioscieuckorean",12670,"sioscirclekorean",12902,"sioskiyeokkorean",12666,"sioskorean",12613,"siosnieunkorean",12667,"siosparenkorean",12806,"siospieupkorean",12669,"siostikeutkorean",12668,"six",54,"sixarabic",1638,"sixbengali",2540,"sixcircle",9317,"sixcircleinversesansserif",10127,"sixdeva",2412,"sixgujarati",2796,"sixgurmukhi",2668,"sixhackarabic",1638,"sixhangzhou",12326,"sixideographicparen",12837,"sixinferior",8326,"sixmonospace",65302,"sixoldstyle",63286,"sixparen",9337,"sixperiod",9357,"sixpersian",1782,"sixroman",8565,"sixsuperior",8310,"sixteencircle",9327,"sixteencurrencydenominatorbengali",2553,"sixteenparen",9347,"sixteenperiod",9367,"sixthai",3670,"slash",47,"slashmonospace",65295,"slong",383,"slongdotaccent",7835,"smileface",9786,"smonospace",65363,"sofpasuqhebrew",1475,"softhyphen",173,"softsigncyrillic",1100,"sohiragana",12381,"sokatakana",12477,"sokatakanahalfwidth",65407,"soliduslongoverlaycmb",824,"solidusshortoverlaycmb",823,"sorusithai",3625,"sosalathai",3624,"sosothai",3595,"sosuathai",3626,"space",32,"spacehackarabic",32,"spade",9824,"spadesuitblack",9824,"spadesuitwhite",9828,"sparen",9390,"squarebelowcmb",827,"squarecc",13252,"squarecm",13213,"squarediagonalcrosshatchfill",9641,"squarehorizontalfill",9636,"squarekg",13199,"squarekm",13214,"squarekmcapital",13262,"squareln",13265,"squarelog",13266,"squaremg",13198,"squaremil",13269,"squaremm",13212,"squaremsquared",13217,"squareorthogonalcrosshatchfill",9638,"squareupperlefttolowerrightfill",9639,"squareupperrighttolowerleftfill",9640,"squareverticalfill",9637,"squarewhitewithsmallblack",9635,"srsquare",13275,"ssabengali",2487,"ssadeva",2359,"ssagujarati",2743,"ssangcieuckorean",12617,"ssanghieuhkorean",12677,"ssangieungkorean",12672,"ssangkiyeokkorean",12594,"ssangnieunkorean",12645,"ssangpieupkorean",12611,"ssangsioskorean",12614,"ssangtikeutkorean",12600,"ssuperior",63218,"sterling",163,"sterlingmonospace",65505,"strokelongoverlaycmb",822,"strokeshortoverlaycmb",821,"subset",8834,"subsetnotequal",8842,"subsetorequal",8838,"succeeds",8827,"suchthat",8715,"suhiragana",12377,"sukatakana",12473,"sukatakanahalfwidth",65405,"sukunarabic",1618,"summation",8721,"sun",9788,"superset",8835,"supersetnotequal",8843,"supersetorequal",8839,"svsquare",13276,"syouwaerasquare",13180,"t",116,"tabengali",2468,"tackdown",8868,"tackleft",8867,"tadeva",2340,"tagujarati",2724,"tagurmukhi",2596,"taharabic",1591,"tahfinalarabic",65218,"tahinitialarabic",65219,"tahiragana",12383,"tahmedialarabic",65220,"taisyouerasquare",13181,"takatakana",12479,"takatakanahalfwidth",65408,"tatweelarabic",1600,"tau",964,"tav",1514,"tavdages",64330,"tavdagesh",64330,"tavdageshhebrew",64330,"tavhebrew",1514,"tbar",359,"tbopomofo",12554,"tcaron",357,"tccurl",680,"tcedilla",355,"tcheharabic",1670,"tchehfinalarabic",64379,"tchehinitialarabic",64380,"tchehmedialarabic",64381,"tcircle",9443,"tcircumflexbelow",7793,"tcommaaccent",355,"tdieresis",7831,"tdotaccent",7787,"tdotbelow",7789,"tecyrillic",1090,"tedescendercyrillic",1197,"teharabic",1578,"tehfinalarabic",65174,"tehhahinitialarabic",64674,"tehhahisolatedarabic",64524,"tehinitialarabic",65175,"tehiragana",12390,"tehjeeminitialarabic",64673,"tehjeemisolatedarabic",64523,"tehmarbutaarabic",1577,"tehmarbutafinalarabic",65172,"tehmedialarabic",65176,"tehmeeminitialarabic",64676,"tehmeemisolatedarabic",64526,"tehnoonfinalarabic",64627,"tekatakana",12486,"tekatakanahalfwidth",65411,"telephone",8481,"telephoneblack",9742,"telishagedolahebrew",1440,"telishaqetanahebrew",1449,"tencircle",9321,"tenideographicparen",12841,"tenparen",9341,"tenperiod",9361,"tenroman",8569,"tesh",679,"tet",1496,"tetdagesh",64312,"tetdageshhebrew",64312,"tethebrew",1496,"tetsecyrillic",1205,"tevirhebrew",1435,"tevirlefthebrew",1435,"thabengali",2469,"thadeva",2341,"thagujarati",2725,"thagurmukhi",2597,"thalarabic",1584,"thalfinalarabic",65196,"thanthakhatlowleftthai",63640,"thanthakhatlowrightthai",63639,"thanthakhatthai",3660,"thanthakhatupperleftthai",63638,"theharabic",1579,"thehfinalarabic",65178,"thehinitialarabic",65179,"thehmedialarabic",65180,"thereexists",8707,"therefore",8756,"theta",952,"theta1",977,"thetasymbolgreek",977,"thieuthacirclekorean",12921,"thieuthaparenkorean",12825,"thieuthcirclekorean",12907,"thieuthkorean",12620,"thieuthparenkorean",12811,"thirteencircle",9324,"thirteenparen",9344,"thirteenperiod",9364,"thonangmonthothai",3601,"thook",429,"thophuthaothai",3602,"thorn",254,"thothahanthai",3607,"thothanthai",3600,"thothongthai",3608,"thothungthai",3606,"thousandcyrillic",1154,"thousandsseparatorarabic",1644,"thousandsseparatorpersian",1644,"three",51,"threearabic",1635,"threebengali",2537,"threecircle",9314,"threecircleinversesansserif",10124,"threedeva",2409,"threeeighths",8540,"threegujarati",2793,"threegurmukhi",2665,"threehackarabic",1635,"threehangzhou",12323,"threeideographicparen",12834,"threeinferior",8323,"threemonospace",65299,"threenumeratorbengali",2550,"threeoldstyle",63283,"threeparen",9334,"threeperiod",9354,"threepersian",1779,"threequarters",190,"threequartersemdash",63198,"threeroman",8562,"threesuperior",179,"threethai",3667,"thzsquare",13204,"tihiragana",12385,"tikatakana",12481,"tikatakanahalfwidth",65409,"tikeutacirclekorean",12912,"tikeutaparenkorean",12816,"tikeutcirclekorean",12898,"tikeutkorean",12599,"tikeutparenkorean",12802,"tilde",732,"tildebelowcmb",816,"tildecmb",771,"tildecomb",771,"tildedoublecmb",864,"tildeoperator",8764,"tildeoverlaycmb",820,"tildeverticalcmb",830,"timescircle",8855,"tipehahebrew",1430,"tipehalefthebrew",1430,"tippigurmukhi",2672,"titlocyrilliccmb",1155,"tiwnarmenian",1407,"tlinebelow",7791,"tmonospace",65364,"toarmenian",1385,"tohiragana",12392,"tokatakana",12488,"tokatakanahalfwidth",65412,"tonebarextrahighmod",741,"tonebarextralowmod",745,"tonebarhighmod",742,"tonebarlowmod",744,"tonebarmidmod",743,"tonefive",445,"tonesix",389,"tonetwo",424,"tonos",900,"tonsquare",13095,"topatakthai",3599,"tortoiseshellbracketleft",12308,"tortoiseshellbracketleftsmall",65117,"tortoiseshellbracketleftvertical",65081,"tortoiseshellbracketright",12309,"tortoiseshellbracketrightsmall",65118,"tortoiseshellbracketrightvertical",65082,"totaothai",3605,"tpalatalhook",427,"tparen",9391,"trademark",8482,"trademarksans",63722,"trademarkserif",63195,"tretroflexhook",648,"triagdn",9660,"triaglf",9668,"triagrt",9658,"triagup",9650,"ts",678,"tsadi",1510,"tsadidagesh",64326,"tsadidageshhebrew",64326,"tsadihebrew",1510,"tsecyrillic",1094,"tsere",1461,"tsere12",1461,"tsere1e",1461,"tsere2b",1461,"tserehebrew",1461,"tserenarrowhebrew",1461,"tserequarterhebrew",1461,"tserewidehebrew",1461,"tshecyrillic",1115,"tsuperior",63219,"ttabengali",2463,"ttadeva",2335,"ttagujarati",2719,"ttagurmukhi",2591,"tteharabic",1657,"ttehfinalarabic",64359,"ttehinitialarabic",64360,"ttehmedialarabic",64361,"tthabengali",2464,"tthadeva",2336,"tthagujarati",2720,"tthagurmukhi",2592,"tturned",647,"tuhiragana",12388,"tukatakana",12484,"tukatakanahalfwidth",65410,"tusmallhiragana",12387,"tusmallkatakana",12483,"tusmallkatakanahalfwidth",65391,"twelvecircle",9323,"twelveparen",9343,"twelveperiod",9363,"twelveroman",8571,"twentycircle",9331,"twentyhangzhou",21316,"twentyparen",9351,"twentyperiod",9371,"two",50,"twoarabic",1634,"twobengali",2536,"twocircle",9313,"twocircleinversesansserif",10123,"twodeva",2408,"twodotenleader",8229,"twodotleader",8229,"twodotleadervertical",65072,"twogujarati",2792,"twogurmukhi",2664,"twohackarabic",1634,"twohangzhou",12322,"twoideographicparen",12833,"twoinferior",8322,"twomonospace",65298,"twonumeratorbengali",2549,"twooldstyle",63282,"twoparen",9333,"twoperiod",9353,"twopersian",1778,"tworoman",8561,"twostroke",443,"twosuperior",178,"twothai",3666,"twothirds",8532,"u",117,"uacute",250,"ubar",649,"ubengali",2441,"ubopomofo",12584,"ubreve",365,"ucaron",468,"ucircle",9444,"ucircumflex",251,"ucircumflexbelow",7799,"ucyrillic",1091,"udattadeva",2385,"udblacute",369,"udblgrave",533,"udeva",2313,"udieresis",252,"udieresisacute",472,"udieresisbelow",7795,"udieresiscaron",474,"udieresiscyrillic",1265,"udieresisgrave",476,"udieresismacron",470,"udotbelow",7909,"ugrave",249,"ugujarati",2697,"ugurmukhi",2569,"uhiragana",12358,"uhookabove",7911,"uhorn",432,"uhornacute",7913,"uhorndotbelow",7921,"uhorngrave",7915,"uhornhookabove",7917,"uhorntilde",7919,"uhungarumlaut",369,"uhungarumlautcyrillic",1267,"uinvertedbreve",535,"ukatakana",12454,"ukatakanahalfwidth",65395,"ukcyrillic",1145,"ukorean",12636,"umacron",363,"umacroncyrillic",1263,"umacrondieresis",7803,"umatragurmukhi",2625,"umonospace",65365,"underscore",95,"underscoredbl",8215,"underscoremonospace",65343,"underscorevertical",65075,"underscorewavy",65103,"union",8746,"universal",8704,"uogonek",371,"uparen",9392,"upblock",9600,"upperdothebrew",1476,"upsilon",965,"upsilondieresis",971,"upsilondieresistonos",944,"upsilonlatin",650,"upsilontonos",973,"uptackbelowcmb",797,"uptackmod",724,"uragurmukhi",2675,"uring",367,"ushortcyrillic",1118,"usmallhiragana",12357,"usmallkatakana",12453,"usmallkatakanahalfwidth",65385,"ustraightcyrillic",1199,"ustraightstrokecyrillic",1201,"utilde",361,"utildeacute",7801,"utildebelow",7797,"uubengali",2442,"uudeva",2314,"uugujarati",2698,"uugurmukhi",2570,"uumatragurmukhi",2626,"uuvowelsignbengali",2498,"uuvowelsigndeva",2370,"uuvowelsigngujarati",2754,"uvowelsignbengali",2497,"uvowelsigndeva",2369,"uvowelsigngujarati",2753,"v",118,"vadeva",2357,"vagujarati",2741,"vagurmukhi",2613,"vakatakana",12535,"vav",1493,"vavdagesh",64309,"vavdagesh65",64309,"vavdageshhebrew",64309,"vavhebrew",1493,"vavholam",64331,"vavholamhebrew",64331,"vavvavhebrew",1520,"vavyodhebrew",1521,"vcircle",9445,"vdotbelow",7807,"vecyrillic",1074,"veharabic",1700,"vehfinalarabic",64363,"vehinitialarabic",64364,"vehmedialarabic",64365,"vekatakana",12537,"venus",9792,"verticalbar",124,"verticallineabovecmb",781,"verticallinebelowcmb",809,"verticallinelowmod",716,"verticallinemod",712,"vewarmenian",1406,"vhook",651,"vikatakana",12536,"viramabengali",2509,"viramadeva",2381,"viramagujarati",2765,"visargabengali",2435,"visargadeva",2307,"visargagujarati",2691,"vmonospace",65366,"voarmenian",1400,"voicediterationhiragana",12446,"voicediterationkatakana",12542,"voicedmarkkana",12443,"voicedmarkkanahalfwidth",65438,"vokatakana",12538,"vparen",9393,"vtilde",7805,"vturned",652,"vuhiragana",12436,"vukatakana",12532,"w",119,"wacute",7811,"waekorean",12633,"wahiragana",12431,"wakatakana",12527,"wakatakanahalfwidth",65436,"wakorean",12632,"wasmallhiragana",12430,"wasmallkatakana",12526,"wattosquare",13143,"wavedash",12316,"wavyunderscorevertical",65076,"wawarabic",1608,"wawfinalarabic",65262,"wawhamzaabovearabic",1572,"wawhamzaabovefinalarabic",65158,"wbsquare",13277,"wcircle",9446,"wcircumflex",373,"wdieresis",7813,"wdotaccent",7815,"wdotbelow",7817,"wehiragana",12433,"weierstrass",8472,"wekatakana",12529,"wekorean",12638,"weokorean",12637,"wgrave",7809,"whitebullet",9702,"whitecircle",9675,"whitecircleinverse",9689,"whitecornerbracketleft",12302,"whitecornerbracketleftvertical",65091,"whitecornerbracketright",12303,"whitecornerbracketrightvertical",65092,"whitediamond",9671,"whitediamondcontainingblacksmalldiamond",9672,"whitedownpointingsmalltriangle",9663,"whitedownpointingtriangle",9661,"whiteleftpointingsmalltriangle",9667,"whiteleftpointingtriangle",9665,"whitelenticularbracketleft",12310,"whitelenticularbracketright",12311,"whiterightpointingsmalltriangle",9657,"whiterightpointingtriangle",9655,"whitesmallsquare",9643,"whitesmilingface",9786,"whitesquare",9633,"whitestar",9734,"whitetelephone",9743,"whitetortoiseshellbracketleft",12312,"whitetortoiseshellbracketright",12313,"whiteuppointingsmalltriangle",9653,"whiteuppointingtriangle",9651,"wihiragana",12432,"wikatakana",12528,"wikorean",12639,"wmonospace",65367,"wohiragana",12434,"wokatakana",12530,"wokatakanahalfwidth",65382,"won",8361,"wonmonospace",65510,"wowaenthai",3623,"wparen",9394,"wring",7832,"wsuperior",695,"wturned",653,"wynn",447,"x",120,"xabovecmb",829,"xbopomofo",12562,"xcircle",9447,"xdieresis",7821,"xdotaccent",7819,"xeharmenian",1389,"xi",958,"xmonospace",65368,"xparen",9395,"xsuperior",739,"y",121,"yaadosquare",13134,"yabengali",2479,"yacute",253,"yadeva",2351,"yaekorean",12626,"yagujarati",2735,"yagurmukhi",2607,"yahiragana",12420,"yakatakana",12516,"yakatakanahalfwidth",65428,"yakorean",12625,"yamakkanthai",3662,"yasmallhiragana",12419,"yasmallkatakana",12515,"yasmallkatakanahalfwidth",65388,"yatcyrillic",1123,"ycircle",9448,"ycircumflex",375,"ydieresis",255,"ydotaccent",7823,"ydotbelow",7925,"yeharabic",1610,"yehbarreearabic",1746,"yehbarreefinalarabic",64431,"yehfinalarabic",65266,"yehhamzaabovearabic",1574,"yehhamzaabovefinalarabic",65162,"yehhamzaaboveinitialarabic",65163,"yehhamzaabovemedialarabic",65164,"yehinitialarabic",65267,"yehmedialarabic",65268,"yehmeeminitialarabic",64733,"yehmeemisolatedarabic",64600,"yehnoonfinalarabic",64660,"yehthreedotsbelowarabic",1745,"yekorean",12630,"yen",165,"yenmonospace",65509,"yeokorean",12629,"yeorinhieuhkorean",12678,"yerahbenyomohebrew",1450,"yerahbenyomolefthebrew",1450,"yericyrillic",1099,"yerudieresiscyrillic",1273,"yesieungkorean",12673,"yesieungpansioskorean",12675,"yesieungsioskorean",12674,"yetivhebrew",1434,"ygrave",7923,"yhook",436,"yhookabove",7927,"yiarmenian",1397,"yicyrillic",1111,"yikorean",12642,"yinyang",9775,"yiwnarmenian",1410,"ymonospace",65369,"yod",1497,"yoddagesh",64313,"yoddageshhebrew",64313,"yodhebrew",1497,"yodyodhebrew",1522,"yodyodpatahhebrew",64287,"yohiragana",12424,"yoikorean",12681,"yokatakana",12520,"yokatakanahalfwidth",65430,"yokorean",12635,"yosmallhiragana",12423,"yosmallkatakana",12519,"yosmallkatakanahalfwidth",65390,"yotgreek",1011,"yoyaekorean",12680,"yoyakorean",12679,"yoyakthai",3618,"yoyingthai",3597,"yparen",9396,"ypogegrammeni",890,"ypogegrammenigreekcmb",837,"yr",422,"yring",7833,"ysuperior",696,"ytilde",7929,"yturned",654,"yuhiragana",12422,"yuikorean",12684,"yukatakana",12518,"yukatakanahalfwidth",65429,"yukorean",12640,"yusbigcyrillic",1131,"yusbigiotifiedcyrillic",1133,"yuslittlecyrillic",1127,"yuslittleiotifiedcyrillic",1129,"yusmallhiragana",12421,"yusmallkatakana",12517,"yusmallkatakanahalfwidth",65389,"yuyekorean",12683,"yuyeokorean",12682,"yyabengali",2527,"yyadeva",2399,"z",122,"zaarmenian",1382,"zacute",378,"zadeva",2395,"zagurmukhi",2651,"zaharabic",1592,"zahfinalarabic",65222,"zahinitialarabic",65223,"zahiragana",12374,"zahmedialarabic",65224,"zainarabic",1586,"zainfinalarabic",65200,"zakatakana",12470,"zaqefgadolhebrew",1429,"zaqefqatanhebrew",1428,"zarqahebrew",1432,"zayin",1494,"zayindagesh",64310,"zayindageshhebrew",64310,"zayinhebrew",1494,"zbopomofo",12567,"zcaron",382,"zcircle",9449,"zcircumflex",7825,"zcurl",657,"zdot",380,"zdotaccent",380,"zdotbelow",7827,"zecyrillic",1079,"zedescendercyrillic",1177,"zedieresiscyrillic",1247,"zehiragana",12380,"zekatakana",12476,"zero",48,"zeroarabic",1632,"zerobengali",2534,"zerodeva",2406,"zerogujarati",2790,"zerogurmukhi",2662,"zerohackarabic",1632,"zeroinferior",8320,"zeromonospace",65296,"zerooldstyle",63280,"zeropersian",1776,"zerosuperior",8304,"zerothai",3664,"zerowidthjoiner",65279,"zerowidthnonjoiner",8204,"zerowidthspace",8203,"zeta",950,"zhbopomofo",12563,"zhearmenian",1386,"zhebrevecyrillic",1218,"zhecyrillic",1078,"zhedescendercyrillic",1175,"zhedieresiscyrillic",1245,"zihiragana",12376,"zikatakana",12472,"zinorhebrew",1454,"zlinebelow",7829,"zmonospace",65370,"zohiragana",12382,"zokatakana",12478,"zparen",9397,"zretroflexhook",656,"zstroke",438,"zuhiragana",12378,"zukatakana",12474,".notdef",0,"angbracketleftbig",9001,"angbracketleftBig",9001,"angbracketleftbigg",9001,"angbracketleftBigg",9001,"angbracketrightBig",9002,"angbracketrightbig",9002,"angbracketrightBigg",9002,"angbracketrightbigg",9002,"arrowhookleft",8618,"arrowhookright",8617,"arrowlefttophalf",8636,"arrowleftbothalf",8637,"arrownortheast",8599,"arrownorthwest",8598,"arrowrighttophalf",8640,"arrowrightbothalf",8641,"arrowsoutheast",8600,"arrowsouthwest",8601,"backslashbig",8726,"backslashBig",8726,"backslashBigg",8726,"backslashbigg",8726,"bardbl",8214,"bracehtipdownleft",65079,"bracehtipdownright",65079,"bracehtipupleft",65080,"bracehtipupright",65080,"braceleftBig",123,"braceleftbig",123,"braceleftbigg",123,"braceleftBigg",123,"bracerightBig",125,"bracerightbig",125,"bracerightbigg",125,"bracerightBigg",125,"bracketleftbig",91,"bracketleftBig",91,"bracketleftbigg",91,"bracketleftBigg",91,"bracketrightBig",93,"bracketrightbig",93,"bracketrightbigg",93,"bracketrightBigg",93,"ceilingleftbig",8968,"ceilingleftBig",8968,"ceilingleftBigg",8968,"ceilingleftbigg",8968,"ceilingrightbig",8969,"ceilingrightBig",8969,"ceilingrightbigg",8969,"ceilingrightBigg",8969,"circledotdisplay",8857,"circledottext",8857,"circlemultiplydisplay",8855,"circlemultiplytext",8855,"circleplusdisplay",8853,"circleplustext",8853,"contintegraldisplay",8750,"contintegraltext",8750,"coproductdisplay",8720,"coproducttext",8720,"floorleftBig",8970,"floorleftbig",8970,"floorleftbigg",8970,"floorleftBigg",8970,"floorrightbig",8971,"floorrightBig",8971,"floorrightBigg",8971,"floorrightbigg",8971,"hatwide",770,"hatwider",770,"hatwidest",770,"intercal",7488,"integraldisplay",8747,"integraltext",8747,"intersectiondisplay",8898,"intersectiontext",8898,"logicalanddisplay",8743,"logicalandtext",8743,"logicalordisplay",8744,"logicalortext",8744,"parenleftBig",40,"parenleftbig",40,"parenleftBigg",40,"parenleftbigg",40,"parenrightBig",41,"parenrightbig",41,"parenrightBigg",41,"parenrightbigg",41,"prime",8242,"productdisplay",8719,"producttext",8719,"radicalbig",8730,"radicalBig",8730,"radicalBigg",8730,"radicalbigg",8730,"radicalbt",8730,"radicaltp",8730,"radicalvertex",8730,"slashbig",47,"slashBig",47,"slashBigg",47,"slashbigg",47,"summationdisplay",8721,"summationtext",8721,"tildewide",732,"tildewider",732,"tildewidest",732,"uniondisplay",8899,"unionmultidisplay",8846,"unionmultitext",8846,"unionsqdisplay",8852,"unionsqtext",8852,"uniontext",8899,"vextenddouble",8741,"vextendsingle",8739]}),c=(0,t.getArrayLookupTableFactory)(function(){return["space",32,"a1",9985,"a2",9986,"a202",9987,"a3",9988,"a4",9742,"a5",9990,"a119",9991,"a118",9992,"a117",9993,"a11",9755,"a12",9758,"a13",9996,"a14",9997,"a15",9998,"a16",9999,"a105",1e4,"a17",10001,"a18",10002,"a19",10003,"a20",10004,"a21",10005,"a22",10006,"a23",10007,"a24",10008,"a25",10009,"a26",10010,"a27",10011,"a28",10012,"a6",10013,"a7",10014,"a8",10015,"a9",10016,"a10",10017,"a29",10018,"a30",10019,"a31",10020,"a32",10021,"a33",10022,"a34",10023,"a35",9733,"a36",10025,"a37",10026,"a38",10027,"a39",10028,"a40",10029,"a41",10030,"a42",10031,"a43",10032,"a44",10033,"a45",10034,"a46",10035,"a47",10036,"a48",10037,"a49",10038,"a50",10039,"a51",10040,"a52",10041,"a53",10042,"a54",10043,"a55",10044,"a56",10045,"a57",10046,"a58",10047,"a59",10048,"a60",10049,"a61",10050,"a62",10051,"a63",10052,"a64",10053,"a65",10054,"a66",10055,"a67",10056,"a68",10057,"a69",10058,"a70",10059,"a71",9679,"a72",10061,"a73",9632,"a74",10063,"a203",10064,"a75",10065,"a204",10066,"a76",9650,"a77",9660,"a78",9670,"a79",10070,"a81",9687,"a82",10072,"a83",10073,"a84",10074,"a97",10075,"a98",10076,"a99",10077,"a100",10078,"a101",10081,"a102",10082,"a103",10083,"a104",10084,"a106",10085,"a107",10086,"a108",10087,"a112",9827,"a111",9830,"a110",9829,"a109",9824,"a120",9312,"a121",9313,"a122",9314,"a123",9315,"a124",9316,"a125",9317,"a126",9318,"a127",9319,"a128",9320,"a129",9321,"a130",10102,"a131",10103,"a132",10104,"a133",10105,"a134",10106,"a135",10107,"a136",10108,"a137",10109,"a138",10110,"a139",10111,"a140",10112,"a141",10113,"a142",10114,"a143",10115,"a144",10116,"a145",10117,"a146",10118,"a147",10119,"a148",10120,"a149",10121,"a150",10122,"a151",10123,"a152",10124,"a153",10125,"a154",10126,"a155",10127,"a156",10128,"a157",10129,"a158",10130,"a159",10131,"a160",10132,"a161",8594,"a163",8596,"a164",8597,"a196",10136,"a165",10137,"a192",10138,"a166",10139,"a167",10140,"a168",10141,"a169",10142,"a170",10143,"a171",10144,"a172",10145,"a173",10146,"a162",10147,"a174",10148,"a175",10149,"a176",10150,"a177",10151,"a178",10152,"a179",10153,"a193",10154,"a180",10155,"a199",10156,"a181",10157,"a200",10158,"a182",10159,"a201",10161,"a183",10162,"a184",10163,"a197",10164,"a185",10165,"a194",10166,"a198",10167,"a186",10168,"a195",10169,"a187",10170,"a188",10171,"a189",10172,"a190",10173,"a191",10174,"a89",10088,"a90",10089,"a93",10090,"a94",10091,"a91",10092,"a92",10093,"a205",10094,"a85",10095,"a206",10096,"a86",10097,"a87",10098,"a88",10099,"a95",10100,"a96",10101,".notdef",0]})},(ge,f,h)=>{h.r(f),h.d(f,{clearUnicodeCaches:()=>g,getCharUnicodeCategory:()=>i,getNormalizedUnicodes:()=>n,getUnicodeForGlyph:()=>s,getUnicodeRangeFor:()=>a,mapSpecialUnicodeValues:()=>c,reverseIfRtl:()=>l});var t=h(6);const o=(0,t.getLookupTableFactory)(function(x){x[63721]=169,x[63193]=169,x[63720]=174,x[63194]=174,x[63722]=8482,x[63195]=8482,x[63729]=9127,x[63730]=9128,x[63731]=9129,x[63740]=9131,x[63741]=9132,x[63742]=9133,x[63726]=9121,x[63727]=9122,x[63728]=9123,x[63737]=9124,x[63738]=9125,x[63739]=9126,x[63723]=9115,x[63724]=9116,x[63725]=9117,x[63734]=9118,x[63735]=9119,x[63736]=9120});function c(x){return x>=65520&&x<=65535?0:x>=62976&&x<=63743?o()[x]||x:x===173?45:x}function s(x,m){let A=m[x];if(A!==void 0)return A;if(!x)return-1;if(x[0]==="u"){const k=x.length;let v;if(k===7&&x[1]==="n"&&x[2]==="i")v=x.substring(3);else if(k>=5&&k<=7)v=x.substring(1);else return-1;if(v===v.toUpperCase()&&(A=parseInt(v,16),A>=0))return A}return-1}const e=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function a(x){for(let m=0,A=e.length;m<A;m++){const k=e[m];if(x>=k.begin&&x<k.end)return m}return-1}function r(x){let m=e[13];return x>=m.begin&&x<m.end||(m=e[11],x>=m.begin&&x<m.end)}const n=(0,t.getArrayLookupTableFactory)(function(){return["¨"," ̈","¯"," ̄","´"," ́","µ","μ","¸"," ̧","Ĳ","IJ","ĳ","ij","Ŀ","L·","ŀ","l·","ŉ","ʼn","ſ","s","Ǆ","DŽ","ǅ","Dž","ǆ","dž","Ǉ","LJ","ǈ","Lj","ǉ","lj","Ǌ","NJ","ǋ","Nj","ǌ","nj","Ǳ","DZ","ǲ","Dz","ǳ","dz","˘"," ̆","˙"," ̇","˚"," ̊","˛"," ̨","˜"," ̃","˝"," ̋","ͺ"," ͅ","΄"," ́","ϐ","β","ϑ","θ","ϒ","Υ","ϕ","φ","ϖ","π","ϰ","κ","ϱ","ρ","ϲ","ς","ϴ","Θ","ϵ","ε","Ϲ","Σ","և","եւ","ٵ","اٴ","ٶ","وٴ","ٷ","ۇٴ","ٸ","يٴ","ำ","ํา","ຳ","ໍາ","ໜ","ຫນ","ໝ","ຫມ","ཷ","ྲཱྀ","ཹ","ླཱྀ","ẚ","aʾ","᾽"," ̓","᾿"," ̓","῀"," ͂","῾"," ̔"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","‗"," ̳","․",".","‥","..","…","...","″","′′","‴","′′′","‶","‵‵","‷","‵‵‵","‼","!!","‾"," ̅","⁇","??","⁈","?!","⁉","!?","⁗","′′′′"," "," ","₨","Rs","℀","a/c","℁","a/s","℃","°C","℅","c/o","℆","c/u","ℇ","Ɛ","℉","°F","№","No","℡","TEL","ℵ","א","ℶ","ב","ℷ","ג","ℸ","ד","℻","FAX","Ⅰ","I","Ⅱ","II","Ⅲ","III","Ⅳ","IV","Ⅴ","V","Ⅵ","VI","Ⅶ","VII","Ⅷ","VIII","Ⅸ","IX","Ⅹ","X","Ⅺ","XI","Ⅻ","XII","Ⅼ","L","Ⅽ","C","Ⅾ","D","Ⅿ","M","ⅰ","i","ⅱ","ii","ⅲ","iii","ⅳ","iv","ⅴ","v","ⅵ","vi","ⅶ","vii","ⅷ","viii","ⅸ","ix","ⅹ","x","ⅺ","xi","ⅻ","xii","ⅼ","l","ⅽ","c","ⅾ","d","ⅿ","m","∬","∫∫","∭","∫∫∫","∯","∮∮","∰","∮∮∮","⑴","(1)","⑵","(2)","⑶","(3)","⑷","(4)","⑸","(5)","⑹","(6)","⑺","(7)","⑻","(8)","⑼","(9)","⑽","(10)","⑾","(11)","⑿","(12)","⒀","(13)","⒁","(14)","⒂","(15)","⒃","(16)","⒄","(17)","⒅","(18)","⒆","(19)","⒇","(20)","⒈","1.","⒉","2.","⒊","3.","⒋","4.","⒌","5.","⒍","6.","⒎","7.","⒏","8.","⒐","9.","⒑","10.","⒒","11.","⒓","12.","⒔","13.","⒕","14.","⒖","15.","⒗","16.","⒘","17.","⒙","18.","⒚","19.","⒛","20.","⒜","(a)","⒝","(b)","⒞","(c)","⒟","(d)","⒠","(e)","⒡","(f)","⒢","(g)","⒣","(h)","⒤","(i)","⒥","(j)","⒦","(k)","⒧","(l)","⒨","(m)","⒩","(n)","⒪","(o)","⒫","(p)","⒬","(q)","⒭","(r)","⒮","(s)","⒯","(t)","⒰","(u)","⒱","(v)","⒲","(w)","⒳","(x)","⒴","(y)","⒵","(z)","⨌","∫∫∫∫","⩴","::=","⩵","==","⩶","===","⺟","母","⻳","龟","⼀","一","⼁","丨","⼂","丶","⼃","丿","⼄","乙","⼅","亅","⼆","二","⼇","亠","⼈","人","⼉","儿","⼊","入","⼋","八","⼌","冂","⼍","冖","⼎","冫","⼏","几","⼐","凵","⼑","刀","⼒","力","⼓","勹","⼔","匕","⼕","匚","⼖","匸","⼗","十","⼘","卜","⼙","卩","⼚","厂","⼛","厶","⼜","又","⼝","口","⼞","囗","⼟","土","⼠","士","⼡","夂","⼢","夊","⼣","夕","⼤","大","⼥","女","⼦","子","⼧","宀","⼨","寸","⼩","小","⼪","尢","⼫","尸","⼬","屮","⼭","山","⼮","巛","⼯","工","⼰","己","⼱","巾","⼲","干","⼳","幺","⼴","广","⼵","廴","⼶","廾","⼷","弋","⼸","弓","⼹","彐","⼺","彡","⼻","彳","⼼","心","⼽","戈","⼾","戶","⼿","手","⽀","支","⽁","攴","⽂","文","⽃","斗","⽄","斤","⽅","方","⽆","无","⽇","日","⽈","曰","⽉","月","⽊","木","⽋","欠","⽌","止","⽍","歹","⽎","殳","⽏","毋","⽐","比","⽑","毛","⽒","氏","⽓","气","⽔","水","⽕","火","⽖","爪","⽗","父","⽘","爻","⽙","爿","⽚","片","⽛","牙","⽜","牛","⽝","犬","⽞","玄","⽟","玉","⽠","瓜","⽡","瓦","⽢","甘","⽣","生","⽤","用","⽥","田","⽦","疋","⽧","疒","⽨","癶","⽩","白","⽪","皮","⽫","皿","⽬","目","⽭","矛","⽮","矢","⽯","石","⽰","示","⽱","禸","⽲","禾","⽳","穴","⽴","立","⽵","竹","⽶","米","⽷","糸","⽸","缶","⽹","网","⽺","羊","⽻","羽","⽼","老","⽽","而","⽾","耒","⽿","耳","⾀","聿","⾁","肉","⾂","臣","⾃","自","⾄","至","⾅","臼","⾆","舌","⾇","舛","⾈","舟","⾉","艮","⾊","色","⾋","艸","⾌","虍","⾍","虫","⾎","血","⾏","行","⾐","衣","⾑","襾","⾒","見","⾓","角","⾔","言","⾕","谷","⾖","豆","⾗","豕","⾘","豸","⾙","貝","⾚","赤","⾛","走","⾜","足","⾝","身","⾞","車","⾟","辛","⾠","辰","⾡","辵","⾢","邑","⾣","酉","⾤","釆","⾥","里","⾦","金","⾧","長","⾨","門","⾩","阜","⾪","隶","⾫","隹","⾬","雨","⾭","靑","⾮","非","⾯","面","⾰","革","⾱","韋","⾲","韭","⾳","音","⾴","頁","⾵","風","⾶","飛","⾷","食","⾸","首","⾹","香","⾺","馬","⾻","骨","⾼","高","⾽","髟","⾾","鬥","⾿","鬯","⿀","鬲","⿁","鬼","⿂","魚","⿃","鳥","⿄","鹵","⿅","鹿","⿆","麥","⿇","麻","⿈","黃","⿉","黍","⿊","黑","⿋","黹","⿌","黽","⿍","鼎","⿎","鼓","⿏","鼠","⿐","鼻","⿑","齊","⿒","齒","⿓","龍","⿔","龜","⿕","龠","〶","〒","〸","十","〹","卄","〺","卅","゛"," ゙","゜"," ゚","ㄱ","ᄀ","ㄲ","ᄁ","ㄳ","ᆪ","ㄴ","ᄂ","ㄵ","ᆬ","ㄶ","ᆭ","ㄷ","ᄃ","ㄸ","ᄄ","ㄹ","ᄅ","ㄺ","ᆰ","ㄻ","ᆱ","ㄼ","ᆲ","ㄽ","ᆳ","ㄾ","ᆴ","ㄿ","ᆵ","ㅀ","ᄚ","ㅁ","ᄆ","ㅂ","ᄇ","ㅃ","ᄈ","ㅄ","ᄡ","ㅅ","ᄉ","ㅆ","ᄊ","ㅇ","ᄋ","ㅈ","ᄌ","ㅉ","ᄍ","ㅊ","ᄎ","ㅋ","ᄏ","ㅌ","ᄐ","ㅍ","ᄑ","ㅎ","ᄒ","ㅏ","ᅡ","ㅐ","ᅢ","ㅑ","ᅣ","ㅒ","ᅤ","ㅓ","ᅥ","ㅔ","ᅦ","ㅕ","ᅧ","ㅖ","ᅨ","ㅗ","ᅩ","ㅘ","ᅪ","ㅙ","ᅫ","ㅚ","ᅬ","ㅛ","ᅭ","ㅜ","ᅮ","ㅝ","ᅯ","ㅞ","ᅰ","ㅟ","ᅱ","ㅠ","ᅲ","ㅡ","ᅳ","ㅢ","ᅴ","ㅣ","ᅵ","ㅤ","ᅠ","ㅥ","ᄔ","ㅦ","ᄕ","ㅧ","ᇇ","ㅨ","ᇈ","ㅩ","ᇌ","ㅪ","ᇎ","ㅫ","ᇓ","ㅬ","ᇗ","ㅭ","ᇙ","ㅮ","ᄜ","ㅯ","ᇝ","ㅰ","ᇟ","ㅱ","ᄝ","ㅲ","ᄞ","ㅳ","ᄠ","ㅴ","ᄢ","ㅵ","ᄣ","ㅶ","ᄧ","ㅷ","ᄩ","ㅸ","ᄫ","ㅹ","ᄬ","ㅺ","ᄭ","ㅻ","ᄮ","ㅼ","ᄯ","ㅽ","ᄲ","ㅾ","ᄶ","ㅿ","ᅀ","ㆀ","ᅇ","ㆁ","ᅌ","ㆂ","ᇱ","ㆃ","ᇲ","ㆄ","ᅗ","ㆅ","ᅘ","ㆆ","ᅙ","ㆇ","ᆄ","ㆈ","ᆅ","ㆉ","ᆈ","ㆊ","ᆑ","ㆋ","ᆒ","ㆌ","ᆔ","ㆍ","ᆞ","ㆎ","ᆡ","㈀","(ᄀ)","㈁","(ᄂ)","㈂","(ᄃ)","㈃","(ᄅ)","㈄","(ᄆ)","㈅","(ᄇ)","㈆","(ᄉ)","㈇","(ᄋ)","㈈","(ᄌ)","㈉","(ᄎ)","㈊","(ᄏ)","㈋","(ᄐ)","㈌","(ᄑ)","㈍","(ᄒ)","㈎","(가)","㈏","(나)","㈐","(다)","㈑","(라)","㈒","(마)","㈓","(바)","㈔","(사)","㈕","(아)","㈖","(자)","㈗","(차)","㈘","(카)","㈙","(타)","㈚","(파)","㈛","(하)","㈜","(주)","㈝","(오전)","㈞","(오후)","㈠","(一)","㈡","(二)","㈢","(三)","㈣","(四)","㈤","(五)","㈥","(六)","㈦","(七)","㈧","(八)","㈨","(九)","㈩","(十)","㈪","(月)","㈫","(火)","㈬","(水)","㈭","(木)","㈮","(金)","㈯","(土)","㈰","(日)","㈱","(株)","㈲","(有)","㈳","(社)","㈴","(名)","㈵","(特)","㈶","(財)","㈷","(祝)","㈸","(労)","㈹","(代)","㈺","(呼)","㈻","(学)","㈼","(監)","㈽","(企)","㈾","(資)","㈿","(協)","㉀","(祭)","㉁","(休)","㉂","(自)","㉃","(至)","㋀","1月","㋁","2月","㋂","3月","㋃","4月","㋄","5月","㋅","6月","㋆","7月","㋇","8月","㋈","9月","㋉","10月","㋊","11月","㋋","12月","㍘","0点","㍙","1点","㍚","2点","㍛","3点","㍜","4点","㍝","5点","㍞","6点","㍟","7点","㍠","8点","㍡","9点","㍢","10点","㍣","11点","㍤","12点","㍥","13点","㍦","14点","㍧","15点","㍨","16点","㍩","17点","㍪","18点","㍫","19点","㍬","20点","㍭","21点","㍮","22点","㍯","23点","㍰","24点","㏠","1日","㏡","2日","㏢","3日","㏣","4日","㏤","5日","㏥","6日","㏦","7日","㏧","8日","㏨","9日","㏩","10日","㏪","11日","㏫","12日","㏬","13日","㏭","14日","㏮","15日","㏯","16日","㏰","17日","㏱","18日","㏲","19日","㏳","20日","㏴","21日","㏵","22日","㏶","23日","㏷","24日","㏸","25日","㏹","26日","㏺","27日","㏻","28日","㏼","29日","㏽","30日","㏾","31日","ﬀ","ff","ﬁ","fi","ﬂ","fl","ﬃ","ffi","ﬄ","ffl","ﬅ","ſt","ﬆ","st","ﬓ","մն","ﬔ","մե","ﬕ","մի","ﬖ","վն","ﬗ","մխ","ﭏ","אל","ﭐ","ٱ","ﭑ","ٱ","ﭒ","ٻ","ﭓ","ٻ","ﭔ","ٻ","ﭕ","ٻ","ﭖ","پ","ﭗ","پ","ﭘ","پ","ﭙ","پ","ﭚ","ڀ","ﭛ","ڀ","ﭜ","ڀ","ﭝ","ڀ","ﭞ","ٺ","ﭟ","ٺ","ﭠ","ٺ","ﭡ","ٺ","ﭢ","ٿ","ﭣ","ٿ","ﭤ","ٿ","ﭥ","ٿ","ﭦ","ٹ","ﭧ","ٹ","ﭨ","ٹ","ﭩ","ٹ","ﭪ","ڤ","ﭫ","ڤ","ﭬ","ڤ","ﭭ","ڤ","ﭮ","ڦ","ﭯ","ڦ","ﭰ","ڦ","ﭱ","ڦ","ﭲ","ڄ","ﭳ","ڄ","ﭴ","ڄ","ﭵ","ڄ","ﭶ","ڃ","ﭷ","ڃ","ﭸ","ڃ","ﭹ","ڃ","ﭺ","چ","ﭻ","چ","ﭼ","چ","ﭽ","چ","ﭾ","ڇ","ﭿ","ڇ","ﮀ","ڇ","ﮁ","ڇ","ﮂ","ڍ","ﮃ","ڍ","ﮄ","ڌ","ﮅ","ڌ","ﮆ","ڎ","ﮇ","ڎ","ﮈ","ڈ","ﮉ","ڈ","ﮊ","ژ","ﮋ","ژ","ﮌ","ڑ","ﮍ","ڑ","ﮎ","ک","ﮏ","ک","ﮐ","ک","ﮑ","ک","ﮒ","گ","ﮓ","گ","ﮔ","گ","ﮕ","گ","ﮖ","ڳ","ﮗ","ڳ","ﮘ","ڳ","ﮙ","ڳ","ﮚ","ڱ","ﮛ","ڱ","ﮜ","ڱ","ﮝ","ڱ","ﮞ","ں","ﮟ","ں","ﮠ","ڻ","ﮡ","ڻ","ﮢ","ڻ","ﮣ","ڻ","ﮤ","ۀ","ﮥ","ۀ","ﮦ","ہ","ﮧ","ہ","ﮨ","ہ","ﮩ","ہ","ﮪ","ھ","ﮫ","ھ","ﮬ","ھ","ﮭ","ھ","ﮮ","ے","ﮯ","ے","ﮰ","ۓ","ﮱ","ۓ","ﯓ","ڭ","ﯔ","ڭ","ﯕ","ڭ","ﯖ","ڭ","ﯗ","ۇ","ﯘ","ۇ","ﯙ","ۆ","ﯚ","ۆ","ﯛ","ۈ","ﯜ","ۈ","ﯝ","ٷ","ﯞ","ۋ","ﯟ","ۋ","ﯠ","ۅ","ﯡ","ۅ","ﯢ","ۉ","ﯣ","ۉ","ﯤ","ې","ﯥ","ې","ﯦ","ې","ﯧ","ې","ﯨ","ى","ﯩ","ى","ﯪ","ئا","ﯫ","ئا","ﯬ","ئە","ﯭ","ئە","ﯮ","ئو","ﯯ","ئو","ﯰ","ئۇ","ﯱ","ئۇ","ﯲ","ئۆ","ﯳ","ئۆ","ﯴ","ئۈ","ﯵ","ئۈ","ﯶ","ئې","ﯷ","ئې","ﯸ","ئې","ﯹ","ئى","ﯺ","ئى","ﯻ","ئى","ﯼ","ی","ﯽ","ی","ﯾ","ی","ﯿ","ی","ﰀ","ئج","ﰁ","ئح","ﰂ","ئم","ﰃ","ئى","ﰄ","ئي","ﰅ","بج","ﰆ","بح","ﰇ","بخ","ﰈ","بم","ﰉ","بى","ﰊ","بي","ﰋ","تج","ﰌ","تح","ﰍ","تخ","ﰎ","تم","ﰏ","تى","ﰐ","تي","ﰑ","ثج","ﰒ","ثم","ﰓ","ثى","ﰔ","ثي","ﰕ","جح","ﰖ","جم","ﰗ","حج","ﰘ","حم","ﰙ","خج","ﰚ","خح","ﰛ","خم","ﰜ","سج","ﰝ","سح","ﰞ","سخ","ﰟ","سم","ﰠ","صح","ﰡ","صم","ﰢ","ضج","ﰣ","ضح","ﰤ","ضخ","ﰥ","ضم","ﰦ","طح","ﰧ","طم","ﰨ","ظم","ﰩ","عج","ﰪ","عم","ﰫ","غج","ﰬ","غم","ﰭ","فج","ﰮ","فح","ﰯ","فخ","ﰰ","فم","ﰱ","فى","ﰲ","في","ﰳ","قح","ﰴ","قم","ﰵ","قى","ﰶ","قي","ﰷ","كا","ﰸ","كج","ﰹ","كح","ﰺ","كخ","ﰻ","كل","ﰼ","كم","ﰽ","كى","ﰾ","كي","ﰿ","لج","ﱀ","لح","ﱁ","لخ","ﱂ","لم","ﱃ","لى","ﱄ","لي","ﱅ","مج","ﱆ","مح","ﱇ","مخ","ﱈ","مم","ﱉ","مى","ﱊ","مي","ﱋ","نج","ﱌ","نح","ﱍ","نخ","ﱎ","نم","ﱏ","نى","ﱐ","ني","ﱑ","هج","ﱒ","هم","ﱓ","هى","ﱔ","هي","ﱕ","يج","ﱖ","يح","ﱗ","يخ","ﱘ","يم","ﱙ","يى","ﱚ","يي","ﱛ","ذٰ","ﱜ","رٰ","ﱝ","ىٰ","ﱞ"," ٌّ","ﱟ"," ٍّ","ﱠ"," َّ","ﱡ"," ُّ","ﱢ"," ِّ","ﱣ"," ّٰ","ﱤ","ئر","ﱥ","ئز","ﱦ","ئم","ﱧ","ئن","ﱨ","ئى","ﱩ","ئي","ﱪ","بر","ﱫ","بز","ﱬ","بم","ﱭ","بن","ﱮ","بى","ﱯ","بي","ﱰ","تر","ﱱ","تز","ﱲ","تم","ﱳ","تن","ﱴ","تى","ﱵ","تي","ﱶ","ثر","ﱷ","ثز","ﱸ","ثم","ﱹ","ثن","ﱺ","ثى","ﱻ","ثي","ﱼ","فى","ﱽ","في","ﱾ","قى","ﱿ","قي","ﲀ","كا","ﲁ","كل","ﲂ","كم","ﲃ","كى","ﲄ","كي","ﲅ","لم","ﲆ","لى","ﲇ","لي","ﲈ","ما","ﲉ","مم","ﲊ","نر","ﲋ","نز","ﲌ","نم","ﲍ","نن","ﲎ","نى","ﲏ","ني","ﲐ","ىٰ","ﲑ","ير","ﲒ","يز","ﲓ","يم","ﲔ","ين","ﲕ","يى","ﲖ","يي","ﲗ","ئج","ﲘ","ئح","ﲙ","ئخ","ﲚ","ئم","ﲛ","ئه","ﲜ","بج","ﲝ","بح","ﲞ","بخ","ﲟ","بم","ﲠ","به","ﲡ","تج","ﲢ","تح","ﲣ","تخ","ﲤ","تم","ﲥ","ته","ﲦ","ثم","ﲧ","جح","ﲨ","جم","ﲩ","حج","ﲪ","حم","ﲫ","خج","ﲬ","خم","ﲭ","سج","ﲮ","سح","ﲯ","سخ","ﲰ","سم","ﲱ","صح","ﲲ","صخ","ﲳ","صم","ﲴ","ضج","ﲵ","ضح","ﲶ","ضخ","ﲷ","ضم","ﲸ","طح","ﲹ","ظم","ﲺ","عج","ﲻ","عم","ﲼ","غج","ﲽ","غم","ﲾ","فج","ﲿ","فح","ﳀ","فخ","ﳁ","فم","ﳂ","قح","ﳃ","قم","ﳄ","كج","ﳅ","كح","ﳆ","كخ","ﳇ","كل","ﳈ","كم","ﳉ","لج","ﳊ","لح","ﳋ","لخ","ﳌ","لم","ﳍ","له","ﳎ","مج","ﳏ","مح","ﳐ","مخ","ﳑ","مم","ﳒ","نج","ﳓ","نح","ﳔ","نخ","ﳕ","نم","ﳖ","نه","ﳗ","هج","ﳘ","هم","ﳙ","هٰ","ﳚ","يج","ﳛ","يح","ﳜ","يخ","ﳝ","يم","ﳞ","يه","ﳟ","ئم","ﳠ","ئه","ﳡ","بم","ﳢ","به","ﳣ","تم","ﳤ","ته","ﳥ","ثم","ﳦ","ثه","ﳧ","سم","ﳨ","سه","ﳩ","شم","ﳪ","شه","ﳫ","كل","ﳬ","كم","ﳭ","لم","ﳮ","نم","ﳯ","نه","ﳰ","يم","ﳱ","يه","ﳲ","ـَّ","ﳳ","ـُّ","ﳴ","ـِّ","ﳵ","طى","ﳶ","طي","ﳷ","عى","ﳸ","عي","ﳹ","غى","ﳺ","غي","ﳻ","سى","ﳼ","سي","ﳽ","شى","ﳾ","شي","ﳿ","حى","ﴀ","حي","ﴁ","جى","ﴂ","جي","ﴃ","خى","ﴄ","خي","ﴅ","صى","ﴆ","صي","ﴇ","ضى","ﴈ","ضي","ﴉ","شج","ﴊ","شح","ﴋ","شخ","ﴌ","شم","ﴍ","شر","ﴎ","سر","ﴏ","صر","ﴐ","ضر","ﴑ","طى","ﴒ","طي","ﴓ","عى","ﴔ","عي","ﴕ","غى","ﴖ","غي","ﴗ","سى","ﴘ","سي","ﴙ","شى","ﴚ","شي","ﴛ","حى","ﴜ","حي","ﴝ","جى","ﴞ","جي","ﴟ","خى","ﴠ","خي","ﴡ","صى","ﴢ","صي","ﴣ","ضى","ﴤ","ضي","ﴥ","شج","ﴦ","شح","ﴧ","شخ","ﴨ","شم","ﴩ","شر","ﴪ","سر","ﴫ","صر","ﴬ","ضر","ﴭ","شج","ﴮ","شح","ﴯ","شخ","ﴰ","شم","ﴱ","سه","ﴲ","شه","ﴳ","طم","ﴴ","سج","ﴵ","سح","ﴶ","سخ","ﴷ","شج","ﴸ","شح","ﴹ","شخ","ﴺ","طم","ﴻ","ظم","ﴼ","اً","ﴽ","اً","ﵐ","تجم","ﵑ","تحج","ﵒ","تحج","ﵓ","تحم","ﵔ","تخم","ﵕ","تمج","ﵖ","تمح","ﵗ","تمخ","ﵘ","جمح","ﵙ","جمح","ﵚ","حمي","ﵛ","حمى","ﵜ","سحج","ﵝ","سجح","ﵞ","سجى","ﵟ","سمح","ﵠ","سمح","ﵡ","سمج","ﵢ","سمم","ﵣ","سمم","ﵤ","صحح","ﵥ","صحح","ﵦ","صمم","ﵧ","شحم","ﵨ","شحم","ﵩ","شجي","ﵪ","شمخ","ﵫ","شمخ","ﵬ","شمم","ﵭ","شمم","ﵮ","ضحى","ﵯ","ضخم","ﵰ","ضخم","ﵱ","طمح","ﵲ","طمح","ﵳ","طمم","ﵴ","طمي","ﵵ","عجم","ﵶ","عمم","ﵷ","عمم","ﵸ","عمى","ﵹ","غمم","ﵺ","غمي","ﵻ","غمى","ﵼ","فخم","ﵽ","فخم","ﵾ","قمح","ﵿ","قمم","ﶀ","لحم","ﶁ","لحي","ﶂ","لحى","ﶃ","لجج","ﶄ","لجج","ﶅ","لخم","ﶆ","لخم","ﶇ","لمح","ﶈ","لمح","ﶉ","محج","ﶊ","محم","ﶋ","محي","ﶌ","مجح","ﶍ","مجم","ﶎ","مخج","ﶏ","مخم","ﶒ","مجخ","ﶓ","همج","ﶔ","همم","ﶕ","نحم","ﶖ","نحى","ﶗ","نجم","ﶘ","نجم","ﶙ","نجى","ﶚ","نمي","ﶛ","نمى","ﶜ","يمم","ﶝ","يمم","ﶞ","بخي","ﶟ","تجي","ﶠ","تجى","ﶡ","تخي","ﶢ","تخى","ﶣ","تمي","ﶤ","تمى","ﶥ","جمي","ﶦ","جحى","ﶧ","جمى","ﶨ","سخى","ﶩ","صحي","ﶪ","شحي","ﶫ","ضحي","ﶬ","لجي","ﶭ","لمي","ﶮ","يحي","ﶯ","يجي","ﶰ","يمي","ﶱ","ممي","ﶲ","قمي","ﶳ","نحي","ﶴ","قمح","ﶵ","لحم","ﶶ","عمي","ﶷ","كمي","ﶸ","نجح","ﶹ","مخي","ﶺ","لجم","ﶻ","كمم","ﶼ","لجم","ﶽ","نجح","ﶾ","جحي","ﶿ","حجي","ﷀ","مجي","ﷁ","فمي","ﷂ","بحي","ﷃ","كمم","ﷄ","عجم","ﷅ","صمم","ﷆ","سخي","ﷇ","نجي","﹉","‾","﹊","‾","﹋","‾","﹌","‾","﹍","_","﹎","_","﹏","_","ﺀ","ء","ﺁ","آ","ﺂ","آ","ﺃ","أ","ﺄ","أ","ﺅ","ؤ","ﺆ","ؤ","ﺇ","إ","ﺈ","إ","ﺉ","ئ","ﺊ","ئ","ﺋ","ئ","ﺌ","ئ","ﺍ","ا","ﺎ","ا","ﺏ","ب","ﺐ","ب","ﺑ","ب","ﺒ","ب","ﺓ","ة","ﺔ","ة","ﺕ","ت","ﺖ","ت","ﺗ","ت","ﺘ","ت","ﺙ","ث","ﺚ","ث","ﺛ","ث","ﺜ","ث","ﺝ","ج","ﺞ","ج","ﺟ","ج","ﺠ","ج","ﺡ","ح","ﺢ","ح","ﺣ","ح","ﺤ","ح","ﺥ","خ","ﺦ","خ","ﺧ","خ","ﺨ","خ","ﺩ","د","ﺪ","د","ﺫ","ذ","ﺬ","ذ","ﺭ","ر","ﺮ","ر","ﺯ","ز","ﺰ","ز","ﺱ","س","ﺲ","س","ﺳ","س","ﺴ","س","ﺵ","ش","ﺶ","ش","ﺷ","ش","ﺸ","ش","ﺹ","ص","ﺺ","ص","ﺻ","ص","ﺼ","ص","ﺽ","ض","ﺾ","ض","ﺿ","ض","ﻀ","ض","ﻁ","ط","ﻂ","ط","ﻃ","ط","ﻄ","ط","ﻅ","ظ","ﻆ","ظ","ﻇ","ظ","ﻈ","ظ","ﻉ","ع","ﻊ","ع","ﻋ","ع","ﻌ","ع","ﻍ","غ","ﻎ","غ","ﻏ","غ","ﻐ","غ","ﻑ","ف","ﻒ","ف","ﻓ","ف","ﻔ","ف","ﻕ","ق","ﻖ","ق","ﻗ","ق","ﻘ","ق","ﻙ","ك","ﻚ","ك","ﻛ","ك","ﻜ","ك","ﻝ","ل","ﻞ","ل","ﻟ","ل","ﻠ","ل","ﻡ","م","ﻢ","م","ﻣ","م","ﻤ","م","ﻥ","ن","ﻦ","ن","ﻧ","ن","ﻨ","ن","ﻩ","ه","ﻪ","ه","ﻫ","ه","ﻬ","ه","ﻭ","و","ﻮ","و","ﻯ","ى","ﻰ","ى","ﻱ","ي","ﻲ","ي","ﻳ","ي","ﻴ","ي","ﻵ","لآ","ﻶ","لآ","ﻷ","لأ","ﻸ","لأ","ﻹ","لإ","ﻺ","لإ","ﻻ","لا","ﻼ","لا"]});function l(x){const m=x.length;if(m<=1||!r(x.charCodeAt(0)))return x;const A=[];for(let k=m-1;k>=0;k--)A.push(x[k]);return A.join("")}const u=new RegExp("^(\\s)|(\\p{Mn})|(\\p{Cf})$","u"),d=new Map;function i(x){const m=d.get(x);if(m)return m;const A=x.match(u),k={isWhitespace:!!(A&&A[1]),isZeroWidthDiacritic:!!(A&&A[2]),isInvisibleFormatMark:!!(A&&A[3])};return d.set(x,k),k}function g(){d.clear()}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.getSerifFonts=f.getNonStdFontMap=f.getGlyphMapForStandardFonts=f.getFontNameToFileMap=void 0,f.getStandardFontName=d,f.getSymbolsFonts=f.getSupplementalGlyphMapForCalibri=f.getSupplementalGlyphMapForArialBlack=f.getStdFontMap=void 0;var t=h(6),o=h(38);const c=(0,t.getLookupTableFactory)(function(i){i["Times-Roman"]="Times-Roman",i.Helvetica="Helvetica",i.Courier="Courier",i.Symbol="Symbol",i["Times-Bold"]="Times-Bold",i["Helvetica-Bold"]="Helvetica-Bold",i["Courier-Bold"]="Courier-Bold",i.ZapfDingbats="ZapfDingbats",i["Times-Italic"]="Times-Italic",i["Helvetica-Oblique"]="Helvetica-Oblique",i["Courier-Oblique"]="Courier-Oblique",i["Times-BoldItalic"]="Times-BoldItalic",i["Helvetica-BoldOblique"]="Helvetica-BoldOblique",i["Courier-BoldOblique"]="Courier-BoldOblique",i.ArialNarrow="Helvetica",i["ArialNarrow-Bold"]="Helvetica-Bold",i["ArialNarrow-BoldItalic"]="Helvetica-BoldOblique",i["ArialNarrow-Italic"]="Helvetica-Oblique",i.ArialBlack="Helvetica",i["ArialBlack-Bold"]="Helvetica-Bold",i["ArialBlack-BoldItalic"]="Helvetica-BoldOblique",i["ArialBlack-Italic"]="Helvetica-Oblique",i["Arial-Black"]="Helvetica",i["Arial-Black-Bold"]="Helvetica-Bold",i["Arial-Black-BoldItalic"]="Helvetica-BoldOblique",i["Arial-Black-Italic"]="Helvetica-Oblique",i.Arial="Helvetica",i["Arial-Bold"]="Helvetica-Bold",i["Arial-BoldItalic"]="Helvetica-BoldOblique",i["Arial-Italic"]="Helvetica-Oblique",i.ArialMT="Helvetica",i["Arial-BoldItalicMT"]="Helvetica-BoldOblique",i["Arial-BoldMT"]="Helvetica-Bold",i["Arial-ItalicMT"]="Helvetica-Oblique",i.ArialUnicodeMS="Helvetica",i["ArialUnicodeMS-Bold"]="Helvetica-Bold",i["ArialUnicodeMS-BoldItalic"]="Helvetica-BoldOblique",i["ArialUnicodeMS-Italic"]="Helvetica-Oblique",i["Courier-BoldItalic"]="Courier-BoldOblique",i["Courier-Italic"]="Courier-Oblique",i.CourierNew="Courier",i["CourierNew-Bold"]="Courier-Bold",i["CourierNew-BoldItalic"]="Courier-BoldOblique",i["CourierNew-Italic"]="Courier-Oblique",i["CourierNewPS-BoldItalicMT"]="Courier-BoldOblique",i["CourierNewPS-BoldMT"]="Courier-Bold",i["CourierNewPS-ItalicMT"]="Courier-Oblique",i.CourierNewPSMT="Courier",i["Helvetica-BoldItalic"]="Helvetica-BoldOblique",i["Helvetica-Italic"]="Helvetica-Oblique",i["Symbol-Bold"]="Symbol",i["Symbol-BoldItalic"]="Symbol",i["Symbol-Italic"]="Symbol",i.TimesNewRoman="Times-Roman",i["TimesNewRoman-Bold"]="Times-Bold",i["TimesNewRoman-BoldItalic"]="Times-BoldItalic",i["TimesNewRoman-Italic"]="Times-Italic",i.TimesNewRomanPS="Times-Roman",i["TimesNewRomanPS-Bold"]="Times-Bold",i["TimesNewRomanPS-BoldItalic"]="Times-BoldItalic",i["TimesNewRomanPS-BoldItalicMT"]="Times-BoldItalic",i["TimesNewRomanPS-BoldMT"]="Times-Bold",i["TimesNewRomanPS-Italic"]="Times-Italic",i["TimesNewRomanPS-ItalicMT"]="Times-Italic",i.TimesNewRomanPSMT="Times-Roman",i["TimesNewRomanPSMT-Bold"]="Times-Bold",i["TimesNewRomanPSMT-BoldItalic"]="Times-BoldItalic",i["TimesNewRomanPSMT-Italic"]="Times-Italic"});f.getStdFontMap=c;const s=(0,t.getLookupTableFactory)(function(i){i.Courier="FoxitFixed.pfb",i["Courier-Bold"]="FoxitFixedBold.pfb",i["Courier-BoldOblique"]="FoxitFixedBoldItalic.pfb",i["Courier-Oblique"]="FoxitFixedItalic.pfb",i.Helvetica="FoxitSans.pfb",i["Helvetica-Bold"]="FoxitSansBold.pfb",i["Helvetica-BoldOblique"]="FoxitSansBoldItalic.pfb",i["Helvetica-Oblique"]="FoxitSansItalic.pfb",i["Times-Roman"]="FoxitSerif.pfb",i["Times-Bold"]="FoxitSerifBold.pfb",i["Times-BoldItalic"]="FoxitSerifBoldItalic.pfb",i["Times-Italic"]="FoxitSerifItalic.pfb",i.Symbol="FoxitSymbol.pfb",i.ZapfDingbats="FoxitDingbats.pfb",i["LiberationSans-Regular"]="LiberationSans-Regular.ttf",i["LiberationSans-Bold"]="LiberationSans-Bold.ttf",i["LiberationSans-Italic"]="LiberationSans-Italic.ttf",i["LiberationSans-BoldItalic"]="LiberationSans-BoldItalic.ttf"});f.getFontNameToFileMap=s;const e=(0,t.getLookupTableFactory)(function(i){i.Calibri="Helvetica",i["Calibri-Bold"]="Helvetica-Bold",i["Calibri-BoldItalic"]="Helvetica-BoldOblique",i["Calibri-Italic"]="Helvetica-Oblique",i.CenturyGothic="Helvetica",i["CenturyGothic-Bold"]="Helvetica-Bold",i["CenturyGothic-BoldItalic"]="Helvetica-BoldOblique",i["CenturyGothic-Italic"]="Helvetica-Oblique",i.ComicSansMS="Comic Sans MS",i["ComicSansMS-Bold"]="Comic Sans MS-Bold",i["ComicSansMS-BoldItalic"]="Comic Sans MS-BoldItalic",i["ComicSansMS-Italic"]="Comic Sans MS-Italic",i["ItcSymbol-Bold"]="Helvetica-Bold",i["ItcSymbol-BoldItalic"]="Helvetica-BoldOblique",i["ItcSymbol-Book"]="Helvetica",i["ItcSymbol-BookItalic"]="Helvetica-Oblique",i["ItcSymbol-Medium"]="Helvetica",i["ItcSymbol-MediumItalic"]="Helvetica-Oblique",i.LucidaConsole="Courier",i["LucidaConsole-Bold"]="Courier-Bold",i["LucidaConsole-BoldItalic"]="Courier-BoldOblique",i["LucidaConsole-Italic"]="Courier-Oblique",i["LucidaSans-Demi"]="Helvetica-Bold",i["MS-Gothic"]="MS Gothic",i["MS-Gothic-Bold"]="MS Gothic-Bold",i["MS-Gothic-BoldItalic"]="MS Gothic-BoldItalic",i["MS-Gothic-Italic"]="MS Gothic-Italic",i["MS-Mincho"]="MS Mincho",i["MS-Mincho-Bold"]="MS Mincho-Bold",i["MS-Mincho-BoldItalic"]="MS Mincho-BoldItalic",i["MS-Mincho-Italic"]="MS Mincho-Italic",i["MS-PGothic"]="MS PGothic",i["MS-PGothic-Bold"]="MS PGothic-Bold",i["MS-PGothic-BoldItalic"]="MS PGothic-BoldItalic",i["MS-PGothic-Italic"]="MS PGothic-Italic",i["MS-PMincho"]="MS PMincho",i["MS-PMincho-Bold"]="MS PMincho-Bold",i["MS-PMincho-BoldItalic"]="MS PMincho-BoldItalic",i["MS-PMincho-Italic"]="MS PMincho-Italic",i.NuptialScript="Times-Italic",i.SegoeUISymbol="Helvetica",i.Wingdings="ZapfDingbats",i["Wingdings-Regular"]="ZapfDingbats"});f.getNonStdFontMap=e;const a=(0,t.getLookupTableFactory)(function(i){i["Adobe Jenson"]=!0,i["Adobe Text"]=!0,i.Albertus=!0,i.Aldus=!0,i.Alexandria=!0,i.Algerian=!0,i["American Typewriter"]=!0,i.Antiqua=!0,i.Apex=!0,i.Arno=!0,i.Aster=!0,i.Aurora=!0,i.Baskerville=!0,i.Bell=!0,i.Bembo=!0,i["Bembo Schoolbook"]=!0,i.Benguiat=!0,i["Berkeley Old Style"]=!0,i["Bernhard Modern"]=!0,i["Berthold City"]=!0,i.Bodoni=!0,i["Bauer Bodoni"]=!0,i["Book Antiqua"]=!0,i.Bookman=!0,i["Bordeaux Roman"]=!0,i["Californian FB"]=!0,i.Calisto=!0,i.Calvert=!0,i.Capitals=!0,i.Cambria=!0,i.Cartier=!0,i.Caslon=!0,i.Catull=!0,i.Centaur=!0,i["Century Old Style"]=!0,i["Century Schoolbook"]=!0,i.Chaparral=!0,i["Charis SIL"]=!0,i.Cheltenham=!0,i["Cholla Slab"]=!0,i.Clarendon=!0,i.Clearface=!0,i.Cochin=!0,i.Colonna=!0,i["Computer Modern"]=!0,i["Concrete Roman"]=!0,i.Constantia=!0,i["Cooper Black"]=!0,i.Corona=!0,i.Ecotype=!0,i.Egyptienne=!0,i.Elephant=!0,i.Excelsior=!0,i.Fairfield=!0,i["FF Scala"]=!0,i.Folkard=!0,i.Footlight=!0,i.FreeSerif=!0,i["Friz Quadrata"]=!0,i.Garamond=!0,i.Gentium=!0,i.Georgia=!0,i.Gloucester=!0,i["Goudy Old Style"]=!0,i["Goudy Schoolbook"]=!0,i["Goudy Pro Font"]=!0,i.Granjon=!0,i["Guardian Egyptian"]=!0,i.Heather=!0,i.Hercules=!0,i["High Tower Text"]=!0,i.Hiroshige=!0,i["Hoefler Text"]=!0,i["Humana Serif"]=!0,i.Imprint=!0,i["Ionic No. 5"]=!0,i.Janson=!0,i.Joanna=!0,i.Korinna=!0,i.Lexicon=!0,i.LiberationSerif=!0,i["Liberation Serif"]=!0,i["Linux Libertine"]=!0,i.Literaturnaya=!0,i.Lucida=!0,i["Lucida Bright"]=!0,i.Melior=!0,i.Memphis=!0,i.Miller=!0,i.Minion=!0,i.Modern=!0,i["Mona Lisa"]=!0,i["Mrs Eaves"]=!0,i["MS Serif"]=!0,i["Museo Slab"]=!0,i["New York"]=!0,i["Nimbus Roman"]=!0,i["NPS Rawlinson Roadway"]=!0,i.NuptialScript=!0,i.Palatino=!0,i.Perpetua=!0,i.Plantin=!0,i["Plantin Schoolbook"]=!0,i.Playbill=!0,i["Poor Richard"]=!0,i["Rawlinson Roadway"]=!0,i.Renault=!0,i.Requiem=!0,i.Rockwell=!0,i.Roman=!0,i["Rotis Serif"]=!0,i.Sabon=!0,i.Scala=!0,i.Seagull=!0,i.Sistina=!0,i.Souvenir=!0,i.STIX=!0,i["Stone Informal"]=!0,i["Stone Serif"]=!0,i.Sylfaen=!0,i.Times=!0,i.Trajan=!0,i.Trinité=!0,i["Trump Mediaeval"]=!0,i.Utopia=!0,i["Vale Type"]=!0,i["Bitstream Vera"]=!0,i["Vera Serif"]=!0,i.Versailles=!0,i.Wanted=!0,i.Weiss=!0,i["Wide Latin"]=!0,i.Windsor=!0,i.XITS=!0});f.getSerifFonts=a;const r=(0,t.getLookupTableFactory)(function(i){i.Dingbats=!0,i.Symbol=!0,i.ZapfDingbats=!0});f.getSymbolsFonts=r;const n=(0,t.getLookupTableFactory)(function(i){i[2]=10,i[3]=32,i[4]=33,i[5]=34,i[6]=35,i[7]=36,i[8]=37,i[9]=38,i[10]=39,i[11]=40,i[12]=41,i[13]=42,i[14]=43,i[15]=44,i[16]=45,i[17]=46,i[18]=47,i[19]=48,i[20]=49,i[21]=50,i[22]=51,i[23]=52,i[24]=53,i[25]=54,i[26]=55,i[27]=56,i[28]=57,i[29]=58,i[30]=894,i[31]=60,i[32]=61,i[33]=62,i[34]=63,i[35]=64,i[36]=65,i[37]=66,i[38]=67,i[39]=68,i[40]=69,i[41]=70,i[42]=71,i[43]=72,i[44]=73,i[45]=74,i[46]=75,i[47]=76,i[48]=77,i[49]=78,i[50]=79,i[51]=80,i[52]=81,i[53]=82,i[54]=83,i[55]=84,i[56]=85,i[57]=86,i[58]=87,i[59]=88,i[60]=89,i[61]=90,i[62]=91,i[63]=92,i[64]=93,i[65]=94,i[66]=95,i[67]=96,i[68]=97,i[69]=98,i[70]=99,i[71]=100,i[72]=101,i[73]=102,i[74]=103,i[75]=104,i[76]=105,i[77]=106,i[78]=107,i[79]=108,i[80]=109,i[81]=110,i[82]=111,i[83]=112,i[84]=113,i[85]=114,i[86]=115,i[87]=116,i[88]=117,i[89]=118,i[90]=119,i[91]=120,i[92]=121,i[93]=122,i[94]=123,i[95]=124,i[96]=125,i[97]=126,i[98]=196,i[99]=197,i[100]=199,i[101]=201,i[102]=209,i[103]=214,i[104]=220,i[105]=225,i[106]=224,i[107]=226,i[108]=228,i[109]=227,i[110]=229,i[111]=231,i[112]=233,i[113]=232,i[114]=234,i[115]=235,i[116]=237,i[117]=236,i[118]=238,i[119]=239,i[120]=241,i[121]=243,i[122]=242,i[123]=244,i[124]=246,i[125]=245,i[126]=250,i[127]=249,i[128]=251,i[129]=252,i[130]=8224,i[131]=176,i[132]=162,i[133]=163,i[134]=167,i[135]=8226,i[136]=182,i[137]=223,i[138]=174,i[139]=169,i[140]=8482,i[141]=180,i[142]=168,i[143]=8800,i[144]=198,i[145]=216,i[146]=8734,i[147]=177,i[148]=8804,i[149]=8805,i[150]=165,i[151]=181,i[152]=8706,i[153]=8721,i[154]=8719,i[156]=8747,i[157]=170,i[158]=186,i[159]=8486,i[160]=230,i[161]=248,i[162]=191,i[163]=161,i[164]=172,i[165]=8730,i[166]=402,i[167]=8776,i[168]=8710,i[169]=171,i[170]=187,i[171]=8230,i[200]=193,i[203]=205,i[210]=218,i[223]=711,i[224]=321,i[225]=322,i[226]=352,i[227]=353,i[228]=381,i[229]=382,i[233]=221,i[234]=253,i[252]=263,i[253]=268,i[254]=269,i[258]=258,i[260]=260,i[261]=261,i[265]=280,i[266]=281,i[267]=282,i[268]=283,i[269]=313,i[275]=323,i[276]=324,i[278]=328,i[283]=344,i[284]=345,i[285]=346,i[286]=347,i[292]=367,i[295]=377,i[296]=378,i[298]=380,i[305]=963,i[306]=964,i[307]=966,i[308]=8215,i[309]=8252,i[310]=8319,i[311]=8359,i[312]=8592,i[313]=8593,i[337]=9552,i[493]=1039,i[494]=1040,i[672]=1488,i[673]=1489,i[674]=1490,i[675]=1491,i[676]=1492,i[677]=1493,i[678]=1494,i[679]=1495,i[680]=1496,i[681]=1497,i[682]=1498,i[683]=1499,i[684]=1500,i[685]=1501,i[686]=1502,i[687]=1503,i[688]=1504,i[689]=1505,i[690]=1506,i[691]=1507,i[692]=1508,i[693]=1509,i[694]=1510,i[695]=1511,i[696]=1512,i[697]=1513,i[698]=1514,i[705]=1524,i[706]=8362,i[710]=64288,i[711]=64298,i[759]=1617,i[761]=1776,i[763]=1778,i[775]=1652,i[777]=1764,i[778]=1780,i[779]=1781,i[780]=1782,i[782]=771,i[783]=64726,i[786]=8363,i[788]=8532,i[790]=768,i[791]=769,i[792]=768,i[795]=803,i[797]=64336,i[798]=64337,i[799]=64342,i[800]=64343,i[801]=64344,i[802]=64345,i[803]=64362,i[804]=64363,i[805]=64364,i[2424]=7821,i[2425]=7822,i[2426]=7823,i[2427]=7824,i[2428]=7825,i[2429]=7826,i[2430]=7827,i[2433]=7682,i[2678]=8045,i[2679]=8046,i[2830]=1552,i[2838]=686,i[2840]=751,i[2842]=753,i[2843]=754,i[2844]=755,i[2846]=757,i[2856]=767,i[2857]=848,i[2858]=849,i[2862]=853,i[2863]=854,i[2864]=855,i[2865]=861,i[2866]=862,i[2906]=7460,i[2908]=7462,i[2909]=7463,i[2910]=7464,i[2912]=7466,i[2913]=7467,i[2914]=7468,i[2916]=7470,i[2917]=7471,i[2918]=7472,i[2920]=7474,i[2921]=7475,i[2922]=7476,i[2924]=7478,i[2925]=7479,i[2926]=7480,i[2928]=7482,i[2929]=7483,i[2930]=7484,i[2932]=7486,i[2933]=7487,i[2934]=7488,i[2936]=7490,i[2937]=7491,i[2938]=7492,i[2940]=7494,i[2941]=7495,i[2942]=7496,i[2944]=7498,i[2946]=7500,i[2948]=7502,i[2950]=7504,i[2951]=7505,i[2952]=7506,i[2954]=7508,i[2955]=7509,i[2956]=7510,i[2958]=7512,i[2959]=7513,i[2960]=7514,i[2962]=7516,i[2963]=7517,i[2964]=7518,i[2966]=7520,i[2967]=7521,i[2968]=7522,i[2970]=7524,i[2971]=7525,i[2972]=7526,i[2974]=7528,i[2975]=7529,i[2976]=7530,i[2978]=1537,i[2979]=1538,i[2980]=1539,i[2982]=1549,i[2983]=1551,i[2984]=1552,i[2986]=1554,i[2987]=1555,i[2988]=1556,i[2990]=1623,i[2991]=1624,i[2995]=1775,i[2999]=1791,i[3002]=64290,i[3003]=64291,i[3004]=64292,i[3006]=64294,i[3007]=64295,i[3008]=64296,i[3011]=1900,i[3014]=8223,i[3015]=8244,i[3017]=7532,i[3018]=7533,i[3019]=7534,i[3075]=7590,i[3076]=7591,i[3079]=7594,i[3080]=7595,i[3083]=7598,i[3084]=7599,i[3087]=7602,i[3088]=7603,i[3091]=7606,i[3092]=7607,i[3095]=7610,i[3096]=7611,i[3099]=7614,i[3100]=7615,i[3103]=7618,i[3104]=7619,i[3107]=8337,i[3108]=8338,i[3116]=1884,i[3119]=1885,i[3120]=1885,i[3123]=1886,i[3124]=1886,i[3127]=1887,i[3128]=1887,i[3131]=1888,i[3132]=1888,i[3135]=1889,i[3136]=1889,i[3139]=1890,i[3140]=1890,i[3143]=1891,i[3144]=1891,i[3147]=1892,i[3148]=1892,i[3153]=580,i[3154]=581,i[3157]=584,i[3158]=585,i[3161]=588,i[3162]=589,i[3165]=891,i[3166]=892,i[3169]=1274,i[3170]=1275,i[3173]=1278,i[3174]=1279,i[3181]=7622,i[3182]=7623,i[3282]=11799,i[3316]=578,i[3379]=42785,i[3393]=1159,i[3416]=8377});f.getGlyphMapForStandardFonts=n;const l=(0,t.getLookupTableFactory)(function(i){i[227]=322,i[264]=261,i[291]=346});f.getSupplementalGlyphMapForArialBlack=l;const u=(0,t.getLookupTableFactory)(function(i){i[1]=32,i[4]=65,i[6]=193,i[17]=66,i[18]=67,i[21]=268,i[24]=68,i[28]=69,i[30]=201,i[32]=282,i[38]=70,i[39]=71,i[44]=72,i[47]=73,i[49]=205,i[58]=74,i[60]=75,i[62]=76,i[68]=77,i[69]=78,i[75]=79,i[87]=80,i[89]=81,i[90]=82,i[92]=344,i[94]=83,i[97]=352,i[100]=84,i[104]=85,i[115]=86,i[116]=87,i[121]=88,i[122]=89,i[124]=221,i[127]=90,i[129]=381,i[258]=97,i[260]=225,i[268]=261,i[271]=98,i[272]=99,i[273]=263,i[275]=269,i[282]=100,i[286]=101,i[288]=233,i[290]=283,i[295]=281,i[296]=102,i[336]=103,i[346]=104,i[349]=105,i[351]=237,i[361]=106,i[364]=107,i[367]=108,i[371]=322,i[373]=109,i[374]=110,i[381]=111,i[383]=243,i[393]=112,i[395]=113,i[396]=114,i[398]=345,i[400]=115,i[401]=347,i[403]=353,i[410]=116,i[437]=117,i[448]=118,i[449]=119,i[454]=120,i[455]=121,i[457]=253,i[460]=122,i[462]=382,i[463]=380,i[853]=44,i[855]=58,i[856]=46,i[876]=47,i[878]=45,i[882]=45,i[894]=40,i[895]=41,i[896]=91,i[897]=93,i[923]=64,i[1004]=48,i[1005]=49,i[1006]=50,i[1007]=51,i[1008]=52,i[1009]=53,i[1010]=54,i[1011]=55,i[1012]=56,i[1013]=57,i[1081]=37,i[1085]=43,i[1086]=45});f.getSupplementalGlyphMapForCalibri=u;function d(i){const g=(0,o.normalizeFontName)(i);return c()[g]}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ToUnicodeMap=f.IdentityToUnicodeMap=void 0;var t=h(2);class o{constructor(e=[]){this._map=e}get length(){return this._map.length}forEach(e){for(const a in this._map)e(a,this._map[a].charCodeAt(0))}has(e){return this._map[e]!==void 0}get(e){return this._map[e]}charCodeOf(e){const a=this._map;if(a.length<=65536)return a.indexOf(e);for(const r in a)if(a[r]===e)return r|0;return-1}amend(e){for(const a in e)this._map[a]=e[a]}}f.ToUnicodeMap=o;class c{constructor(e,a){this.firstChar=e,this.lastChar=a}get length(){return this.lastChar+1-this.firstChar}forEach(e){for(let a=this.firstChar,r=this.lastChar;a<=r;a++)e(a,a)}has(e){return this.firstChar<=e&&e<=this.lastChar}get(e){if(this.firstChar<=e&&e<=this.lastChar)return String.fromCharCode(e)}charCodeOf(e){return Number.isInteger(e)&&e>=this.firstChar&&e<=this.lastChar?e:-1}amend(e){(0,t.unreachable)("Should not call amend()")}}f.IdentityToUnicodeMap=c},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.CFFFont=void 0;var t=h(35),o=h(38),c=h(2);class s{constructor(a,r){this.properties=r;const n=new t.CFFParser(a,r,o.SEAC_ANALYSIS_ENABLED);this.cff=n.parse(),this.cff.duplicateFirstGlyph();const l=new t.CFFCompiler(this.cff);this.seacs=this.cff.seacs;try{this.data=l.compile()}catch{(0,c.warn)("Failed to compile font "+r.loadedName),this.data=a}this._createBuiltInEncoding()}get numGlyphs(){return this.cff.charStrings.count}getCharset(){return this.cff.charset.charset}getGlyphMapping(){const a=this.cff,r=this.properties,n=a.charset.charset;let l,u;if(r.composite){l=Object.create(null);let i;if(a.isCIDFont)for(u=0;u<n.length;u++){const g=n[u];i=r.cMap.charCodeOf(g),l[i]=u}else for(u=0;u<a.charStrings.count;u++)i=r.cMap.charCodeOf(u),l[i]=u;return l}let d=a.encoding?a.encoding.encoding:null;return r.isInternalFont&&(d=r.defaultEncoding),l=(0,o.type1FontGlyphMapping)(r,d,n),l}hasGlyphId(a){return this.cff.hasGlyphId(a)}_createBuiltInEncoding(){const{charset:a,encoding:r}=this.cff;if(!a||!r)return;const n=a.charset,l=r.encoding,u=[];for(const d in l){const i=l[d];if(i>=0){const g=n[i];g&&(u[d]=g)}}u.length>0&&(this.properties.builtInEncoding=u)}}f.CFFFont=s},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.FontRendererFactory=void 0;var t=h(2),o=h(35),c=h(39),s=h(37),e=h(10);function a(O,T){return(O[T]<<24|O[T+1]<<16|O[T+2]<<8|O[T+3])>>>0}function r(O,T){return O[T]<<8|O[T+1]}function n(O,T){return(O[T]<<24|O[T+1]<<16)>>16}function l(O,T){return O[T]<<24>>24}function u(O,T){return n(O,T)/16384}function d(O){const T=O.length;let R=32768;return T<1240?R=107:T<33900&&(R=1131),R}function i(O,T,R){const y=r(O,T+2)===1?a(O,T+8):a(O,T+16),p=r(O,T+y);let P,E,S;if(p===4){r(O,T+y+2);const F=r(O,T+y+6)>>1;for(E=T+y+14,P=[],S=0;S<F;S++,E+=2)P[S]={end:r(O,E)};for(E+=2,S=0;S<F;S++,E+=2)P[S].start=r(O,E);for(S=0;S<F;S++,E+=2)P[S].idDelta=r(O,E);for(S=0;S<F;S++,E+=2){let C=r(O,E);if(C!==0){P[S].ids=[];for(let b=0,D=P[S].end-P[S].start+1;b<D;b++)P[S].ids[b]=r(O,E+C),C+=2}}return P}else if(p===12){const F=a(O,T+y+12);for(E=T+y+16,P=[],S=0;S<F;S++)T=a(O,E),P.push({start:T,end:a(O,E+4),idDelta:a(O,E+8)-T}),E+=12;return P}throw new t.FormatError(`unsupported cmap: ${p}`)}function g(O,T,R,y){const p={},E=new o.CFFParser(new e.Stream(O,T,R-T),p,y).parse();return{glyphs:E.charStrings.objects,subrs:E.topDict.privateDict&&E.topDict.privateDict.subrsIndex&&E.topDict.privateDict.subrsIndex.objects,gsubrs:E.globalSubrIndex&&E.globalSubrIndex.objects,isCFFCIDFont:E.isCIDFont,fdSelect:E.fdSelect,fdArray:E.fdArray}}function x(O,T,R){let y,p;R?(y=4,p=a):(y=2,p=(S,F)=>2*r(S,F));const P=[];let E=p(T,0);for(let S=y;S<T.length;S+=y){const F=p(T,S);P.push(O.subarray(E,F)),E=F}return P}function m(O,T){const R=T.codePointAt(0);let y=0,p=0,P=O.length-1;for(;p<P;){const E=p+P+1>>1;R<O[E].start?P=E-1:p=E}return O[p].start<=R&&R<=O[p].end&&(y=O[p].idDelta+(O[p].ids?O[p].ids[R-O[p].start]:R)&65535),{charCode:R,glyphId:y}}function A(O,T,R){function y(D,U){T.push({cmd:"moveTo",args:[D,U]})}function p(D,U){T.push({cmd:"lineTo",args:[D,U]})}function P(D,U,X,G){T.push({cmd:"quadraticCurveTo",args:[D,U,X,G]})}let E=0;const S=n(O,E);let F,C=0,b=0;if(E+=10,S<0)do{F=r(O,E);const D=r(O,E+2);E+=4;let U,X;F&1?(F&2?(U=n(O,E),X=n(O,E+2)):(U=r(O,E),X=r(O,E+2)),E+=4):F&2?(U=l(O,E++),X=l(O,E++)):(U=O[E++],X=O[E++]),F&2?(C=U,b=X):(C=0,b=0);let G=1,Y=1,N=0,I=0;F&8?(G=Y=u(O,E),E+=2):F&64?(G=u(O,E),Y=u(O,E+2),E+=4):F&128&&(G=u(O,E),N=u(O,E+2),I=u(O,E+4),Y=u(O,E+6),E+=8);const L=R.glyphs[D];L&&(T.push({cmd:"save"},{cmd:"transform",args:[G,N,I,Y,C,b]}),A(L,T,R),T.push({cmd:"restore"}))}while(F&32);else{const D=[];let U,X;for(U=0;U<S;U++)D.push(r(O,E)),E+=2;const G=r(O,E);E+=2+G;const Y=D.at(-1)+1,N=[];for(;N.length<Y;){F=O[E++];let L=1;for(F&8&&(L+=O[E++]);L-- >0;)N.push({flags:F})}for(U=0;U<Y;U++){switch(N[U].flags&18){case 0:C+=n(O,E),E+=2;break;case 2:C-=O[E++];break;case 18:C+=O[E++];break}N[U].x=C}for(U=0;U<Y;U++){switch(N[U].flags&36){case 0:b+=n(O,E),E+=2;break;case 4:b-=O[E++];break;case 36:b+=O[E++];break}N[U].y=b}let I=0;for(E=0;E<S;E++){const L=D[E],$=N.slice(I,L+1);if($[0].flags&1)$.push($[0]);else if($.at(-1).flags&1)$.unshift($.at(-1));else{const W={flags:1,x:($[0].x+$.at(-1).x)/2,y:($[0].y+$.at(-1).y)/2};$.unshift(W),$.push(W)}for(y($[0].x,$[0].y),U=1,X=$.length;U<X;U++)$[U].flags&1?p($[U].x,$[U].y):$[U+1].flags&1?(P($[U].x,$[U].y,$[U+1].x,$[U+1].y),U++):P($[U].x,$[U].y,($[U].x+$[U+1].x)/2,($[U].y+$[U+1].y)/2);I=L+1}}}function k(O,T,R,y){function p(U,X){T.push({cmd:"moveTo",args:[U,X]})}function P(U,X){T.push({cmd:"lineTo",args:[U,X]})}function E(U,X,G,Y,N,I){T.push({cmd:"bezierCurveTo",args:[U,X,G,Y,N,I]})}const S=[];let F=0,C=0,b=0;function D(U){let X=0;for(;X<U.length;){let G=!1,Y=U[X++],N,I,L,$,W,z,B,H,q;switch(Y){case 1:b+=S.length>>1,G=!0;break;case 3:b+=S.length>>1,G=!0;break;case 4:C+=S.pop(),p(F,C),G=!0;break;case 5:for(;S.length>0;)F+=S.shift(),C+=S.shift(),P(F,C);break;case 6:for(;S.length>0&&(F+=S.shift(),P(F,C),S.length!==0);)C+=S.shift(),P(F,C);break;case 7:for(;S.length>0&&(C+=S.shift(),P(F,C),S.length!==0);)F+=S.shift(),P(F,C);break;case 8:for(;S.length>0;)N=F+S.shift(),L=C+S.shift(),I=N+S.shift(),$=L+S.shift(),F=I+S.shift(),C=$+S.shift(),E(N,L,I,$,F,C);break;case 10:if(H=S.pop(),q=null,R.isCFFCIDFont){const Z=R.fdSelect.getFDIndex(y);if(Z>=0&&Z<R.fdArray.length){const te=R.fdArray[Z];let Q;te.privateDict&&te.privateDict.subrsIndex&&(Q=te.privateDict.subrsIndex.objects),Q&&(H+=d(Q),q=Q[H])}else(0,t.warn)("Invalid fd index for glyph index.")}else q=R.subrs[H+R.subrsBias];q&&D(q);break;case 11:return;case 12:switch(Y=U[X++],Y){case 34:N=F+S.shift(),I=N+S.shift(),W=C+S.shift(),F=I+S.shift(),E(N,C,I,W,F,W),N=F+S.shift(),I=N+S.shift(),F=I+S.shift(),E(N,W,I,C,F,C);break;case 35:N=F+S.shift(),L=C+S.shift(),I=N+S.shift(),$=L+S.shift(),F=I+S.shift(),C=$+S.shift(),E(N,L,I,$,F,C),N=F+S.shift(),L=C+S.shift(),I=N+S.shift(),$=L+S.shift(),F=I+S.shift(),C=$+S.shift(),E(N,L,I,$,F,C),S.pop();break;case 36:N=F+S.shift(),W=C+S.shift(),I=N+S.shift(),z=W+S.shift(),F=I+S.shift(),E(N,W,I,z,F,z),N=F+S.shift(),I=N+S.shift(),B=z+S.shift(),F=I+S.shift(),E(N,z,I,B,F,C);break;case 37:const Z=F,te=C;N=F+S.shift(),L=C+S.shift(),I=N+S.shift(),$=L+S.shift(),F=I+S.shift(),C=$+S.shift(),E(N,L,I,$,F,C),N=F+S.shift(),L=C+S.shift(),I=N+S.shift(),$=L+S.shift(),F=I,C=$,Math.abs(F-Z)>Math.abs(C-te)?F+=S.shift():C+=S.shift(),E(N,L,I,$,F,C);break;default:throw new t.FormatError(`unknown operator: 12 ${Y}`)}break;case 14:if(S.length>=4){const Z=S.pop(),te=S.pop();C=S.pop(),F=S.pop(),T.push({cmd:"save"},{cmd:"translate",args:[F,C]});let Q=m(R.cmap,String.fromCharCode(R.glyphNameMap[s.StandardEncoding[Z]]));k(R.glyphs[Q.glyphId],T,R,Q.glyphId),T.push({cmd:"restore"}),Q=m(R.cmap,String.fromCharCode(R.glyphNameMap[s.StandardEncoding[te]])),k(R.glyphs[Q.glyphId],T,R,Q.glyphId)}return;case 18:b+=S.length>>1,G=!0;break;case 19:b+=S.length>>1,X+=b+7>>3,G=!0;break;case 20:b+=S.length>>1,X+=b+7>>3,G=!0;break;case 21:C+=S.pop(),F+=S.pop(),p(F,C),G=!0;break;case 22:F+=S.pop(),p(F,C),G=!0;break;case 23:b+=S.length>>1,G=!0;break;case 24:for(;S.length>2;)N=F+S.shift(),L=C+S.shift(),I=N+S.shift(),$=L+S.shift(),F=I+S.shift(),C=$+S.shift(),E(N,L,I,$,F,C);F+=S.shift(),C+=S.shift(),P(F,C);break;case 25:for(;S.length>6;)F+=S.shift(),C+=S.shift(),P(F,C);N=F+S.shift(),L=C+S.shift(),I=N+S.shift(),$=L+S.shift(),F=I+S.shift(),C=$+S.shift(),E(N,L,I,$,F,C);break;case 26:for(S.length%2&&(F+=S.shift());S.length>0;)N=F,L=C+S.shift(),I=N+S.shift(),$=L+S.shift(),F=I,C=$+S.shift(),E(N,L,I,$,F,C);break;case 27:for(S.length%2&&(C+=S.shift());S.length>0;)N=F+S.shift(),L=C,I=N+S.shift(),$=L+S.shift(),F=I+S.shift(),C=$,E(N,L,I,$,F,C);break;case 28:S.push((U[X]<<24|U[X+1]<<16)>>16),X+=2;break;case 29:H=S.pop()+R.gsubrsBias,q=R.gsubrs[H],q&&D(q);break;case 30:for(;S.length>0&&(N=F,L=C+S.shift(),I=N+S.shift(),$=L+S.shift(),F=I+S.shift(),C=$+(S.length===1?S.shift():0),E(N,L,I,$,F,C),S.length!==0);)N=F+S.shift(),L=C,I=N+S.shift(),$=L+S.shift(),C=$+S.shift(),F=I+(S.length===1?S.shift():0),E(N,L,I,$,F,C);break;case 31:for(;S.length>0&&(N=F+S.shift(),L=C,I=N+S.shift(),$=L+S.shift(),C=$+S.shift(),F=I+(S.length===1?S.shift():0),E(N,L,I,$,F,C),S.length!==0);)N=F,L=C+S.shift(),I=N+S.shift(),$=L+S.shift(),F=I+S.shift(),C=$+(S.length===1?S.shift():0),E(N,L,I,$,F,C);break;default:if(Y<32)throw new t.FormatError(`unknown operator: ${Y}`);Y<247?S.push(Y-139):Y<251?S.push((Y-247)*256+U[X++]+108):Y<255?S.push(-(Y-251)*256-U[X++]-108):(S.push((U[X]<<24|U[X+1]<<16|U[X+2]<<8|U[X+3])/65536),X+=4);break}G&&(S.length=0)}}D(O)}const v=[];class _{constructor(T){this.constructor===_&&(0,t.unreachable)("Cannot initialize CompiledFont."),this.fontMatrix=T,this.compiledGlyphs=Object.create(null),this.compiledCharCodeToGlyphId=Object.create(null)}getPathJs(T){const{charCode:R,glyphId:y}=m(this.cmap,T);let p=this.compiledGlyphs[y];if(!p)try{p=this.compileGlyph(this.glyphs[y],y),this.compiledGlyphs[y]=p}catch(P){throw this.compiledGlyphs[y]=v,this.compiledCharCodeToGlyphId[R]===void 0&&(this.compiledCharCodeToGlyphId[R]=y),P}return this.compiledCharCodeToGlyphId[R]===void 0&&(this.compiledCharCodeToGlyphId[R]=y),p}compileGlyph(T,R){if(!T||T.length===0||T[0]===14)return v;let y=this.fontMatrix;if(this.isCFFCIDFont){const P=this.fdSelect.getFDIndex(R);P>=0&&P<this.fdArray.length?y=this.fdArray[P].getByName("FontMatrix")||t.FONT_IDENTITY_MATRIX:(0,t.warn)("Invalid fd index for glyph index.")}const p=[{cmd:"save"},{cmd:"transform",args:y.slice()},{cmd:"scale",args:["size","-size"]}];return this.compileGlyphImpl(T,p,R),p.push({cmd:"restore"}),p}compileGlyphImpl(){(0,t.unreachable)("Children classes should implement this.")}hasBuiltPath(T){const{charCode:R,glyphId:y}=m(this.cmap,T);return this.compiledGlyphs[y]!==void 0&&this.compiledCharCodeToGlyphId[R]!==void 0}}class K extends _{constructor(T,R,y){super(y||[488e-6,0,0,488e-6,0,0]),this.glyphs=T,this.cmap=R}compileGlyphImpl(T,R){A(T,R,this)}}class M extends _{constructor(T,R,y,p){super(y||[.001,0,0,.001,0,0]),this.glyphs=T.glyphs,this.gsubrs=T.gsubrs||[],this.subrs=T.subrs||[],this.cmap=R,this.glyphNameMap=p||(0,c.getGlyphsUnicode)(),this.gsubrsBias=d(this.gsubrs),this.subrsBias=d(this.subrs),this.isCFFCIDFont=T.isCFFCIDFont,this.fdSelect=T.fdSelect,this.fdArray=T.fdArray}compileGlyphImpl(T,R,y){k(T,R,this,y)}}class j{static create(T,R){const y=new Uint8Array(T.data);let p,P,E,S,F,C;const b=r(y,4);for(let D=0,U=12;D<b;D++,U+=16){const X=(0,t.bytesToString)(y.subarray(U,U+4)),G=a(y,U+8),Y=a(y,U+12);switch(X){case"cmap":p=i(y,G);break;case"glyf":P=y.subarray(G,G+Y);break;case"loca":E=y.subarray(G,G+Y);break;case"head":C=r(y,G+18),F=r(y,G+50);break;case"CFF ":S=g(y,G,G+Y,R);break}}if(P){const D=C?[1/C,0,0,1/C,0,0]:T.fontMatrix;return new K(x(P,E,F),p,D)}return new M(S,p,T.fontMatrix,T.glyphNameMap)}}f.FontRendererFactory=j},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.getMetrics=f.getFontBasicMetrics=void 0;var t=h(6);const o=(0,t.getLookupTableFactory)(function(s){s.Courier=600,s["Courier-Bold"]=600,s["Courier-BoldOblique"]=600,s["Courier-Oblique"]=600,s.Helvetica=(0,t.getLookupTableFactory)(function(e){e.space=278,e.exclam=278,e.quotedbl=355,e.numbersign=556,e.dollar=556,e.percent=889,e.ampersand=667,e.quoteright=222,e.parenleft=333,e.parenright=333,e.asterisk=389,e.plus=584,e.comma=278,e.hyphen=333,e.period=278,e.slash=278,e.zero=556,e.one=556,e.two=556,e.three=556,e.four=556,e.five=556,e.six=556,e.seven=556,e.eight=556,e.nine=556,e.colon=278,e.semicolon=278,e.less=584,e.equal=584,e.greater=584,e.question=556,e.at=1015,e.A=667,e.B=667,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=722,e.I=278,e.J=500,e.K=667,e.L=556,e.M=833,e.N=722,e.O=778,e.P=667,e.Q=778,e.R=722,e.S=667,e.T=611,e.U=722,e.V=667,e.W=944,e.X=667,e.Y=667,e.Z=611,e.bracketleft=278,e.backslash=278,e.bracketright=278,e.asciicircum=469,e.underscore=556,e.quoteleft=222,e.a=556,e.b=556,e.c=500,e.d=556,e.e=556,e.f=278,e.g=556,e.h=556,e.i=222,e.j=222,e.k=500,e.l=222,e.m=833,e.n=556,e.o=556,e.p=556,e.q=556,e.r=333,e.s=500,e.t=278,e.u=556,e.v=500,e.w=722,e.x=500,e.y=500,e.z=500,e.braceleft=334,e.bar=260,e.braceright=334,e.asciitilde=584,e.exclamdown=333,e.cent=556,e.sterling=556,e.fraction=167,e.yen=556,e.florin=556,e.section=556,e.currency=556,e.quotesingle=191,e.quotedblleft=333,e.guillemotleft=556,e.guilsinglleft=333,e.guilsinglright=333,e.fi=500,e.fl=500,e.endash=556,e.dagger=556,e.daggerdbl=556,e.periodcentered=278,e.paragraph=537,e.bullet=350,e.quotesinglbase=222,e.quotedblbase=333,e.quotedblright=333,e.guillemotright=556,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=611,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=370,e.Lslash=556,e.Oslash=778,e.OE=1e3,e.ordmasculine=365,e.ae=889,e.dotlessi=278,e.lslash=222,e.oslash=611,e.oe=944,e.germandbls=611,e.Idieresis=278,e.eacute=556,e.abreve=556,e.uhungarumlaut=556,e.ecaron=556,e.Ydieresis=667,e.divide=584,e.Yacute=667,e.Acircumflex=667,e.aacute=556,e.Ucircumflex=722,e.yacute=500,e.scommaaccent=500,e.ecircumflex=556,e.Uring=722,e.Udieresis=722,e.aogonek=556,e.Uacute=722,e.uogonek=556,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=737,e.Emacron=667,e.ccaron=500,e.aring=556,e.Ncommaaccent=722,e.lacute=222,e.agrave=556,e.Tcommaaccent=611,e.Cacute=722,e.atilde=556,e.Edotaccent=667,e.scaron=500,e.scedilla=500,e.iacute=278,e.lozenge=471,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=556,e.acircumflex=556,e.Amacron=667,e.rcaron=333,e.ccedilla=500,e.Zdotaccent=611,e.Thorn=667,e.Omacron=778,e.Racute=722,e.Sacute=667,e.dcaron=643,e.Umacron=722,e.uring=556,e.threesuperior=333,e.Ograve=778,e.Agrave=667,e.Abreve=667,e.multiply=584,e.uacute=556,e.Tcaron=611,e.partialdiff=476,e.ydieresis=500,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=556,e.edieresis=556,e.cacute=500,e.nacute=556,e.umacron=556,e.Ncaron=722,e.Iacute=278,e.plusminus=584,e.brokenbar=260,e.registered=737,e.Gbreve=778,e.Idotaccent=278,e.summation=600,e.Egrave=667,e.racute=333,e.omacron=556,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=222,e.tcaron=317,e.eogonek=556,e.Uogonek=722,e.Aacute=667,e.Adieresis=667,e.egrave=556,e.zacute=500,e.iogonek=222,e.Oacute=778,e.oacute=556,e.amacron=556,e.sacute=500,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=556,e.twosuperior=333,e.Odieresis=778,e.mu=556,e.igrave=278,e.ohungarumlaut=556,e.Eogonek=667,e.dcroat=556,e.threequarters=834,e.Scedilla=667,e.lcaron=299,e.Kcommaaccent=667,e.Lacute=556,e.trademark=1e3,e.edotaccent=556,e.Igrave=278,e.Imacron=278,e.Lcaron=556,e.onehalf=834,e.lessequal=549,e.ocircumflex=556,e.ntilde=556,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=556,e.gbreve=556,e.onequarter=834,e.Scaron=667,e.Scommaaccent=667,e.Ohungarumlaut=778,e.degree=400,e.ograve=556,e.Ccaron=722,e.ugrave=556,e.radical=453,e.Dcaron=722,e.rcommaaccent=333,e.Ntilde=722,e.otilde=556,e.Rcommaaccent=722,e.Lcommaaccent=556,e.Atilde=667,e.Aogonek=667,e.Aring=667,e.Otilde=778,e.zdotaccent=500,e.Ecaron=667,e.Iogonek=278,e.kcommaaccent=500,e.minus=584,e.Icircumflex=278,e.ncaron=556,e.tcommaaccent=278,e.logicalnot=584,e.odieresis=556,e.udieresis=556,e.notequal=549,e.gcommaaccent=556,e.eth=556,e.zcaron=500,e.ncommaaccent=556,e.onesuperior=333,e.imacron=278,e.Euro=556}),s["Helvetica-Bold"]=(0,t.getLookupTableFactory)(function(e){e.space=278,e.exclam=333,e.quotedbl=474,e.numbersign=556,e.dollar=556,e.percent=889,e.ampersand=722,e.quoteright=278,e.parenleft=333,e.parenright=333,e.asterisk=389,e.plus=584,e.comma=278,e.hyphen=333,e.period=278,e.slash=278,e.zero=556,e.one=556,e.two=556,e.three=556,e.four=556,e.five=556,e.six=556,e.seven=556,e.eight=556,e.nine=556,e.colon=333,e.semicolon=333,e.less=584,e.equal=584,e.greater=584,e.question=611,e.at=975,e.A=722,e.B=722,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=722,e.I=278,e.J=556,e.K=722,e.L=611,e.M=833,e.N=722,e.O=778,e.P=667,e.Q=778,e.R=722,e.S=667,e.T=611,e.U=722,e.V=667,e.W=944,e.X=667,e.Y=667,e.Z=611,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=584,e.underscore=556,e.quoteleft=278,e.a=556,e.b=611,e.c=556,e.d=611,e.e=556,e.f=333,e.g=611,e.h=611,e.i=278,e.j=278,e.k=556,e.l=278,e.m=889,e.n=611,e.o=611,e.p=611,e.q=611,e.r=389,e.s=556,e.t=333,e.u=611,e.v=556,e.w=778,e.x=556,e.y=556,e.z=500,e.braceleft=389,e.bar=280,e.braceright=389,e.asciitilde=584,e.exclamdown=333,e.cent=556,e.sterling=556,e.fraction=167,e.yen=556,e.florin=556,e.section=556,e.currency=556,e.quotesingle=238,e.quotedblleft=500,e.guillemotleft=556,e.guilsinglleft=333,e.guilsinglright=333,e.fi=611,e.fl=611,e.endash=556,e.dagger=556,e.daggerdbl=556,e.periodcentered=278,e.paragraph=556,e.bullet=350,e.quotesinglbase=278,e.quotedblbase=500,e.quotedblright=500,e.guillemotright=556,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=611,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=370,e.Lslash=611,e.Oslash=778,e.OE=1e3,e.ordmasculine=365,e.ae=889,e.dotlessi=278,e.lslash=278,e.oslash=611,e.oe=944,e.germandbls=611,e.Idieresis=278,e.eacute=556,e.abreve=556,e.uhungarumlaut=611,e.ecaron=556,e.Ydieresis=667,e.divide=584,e.Yacute=667,e.Acircumflex=722,e.aacute=556,e.Ucircumflex=722,e.yacute=556,e.scommaaccent=556,e.ecircumflex=556,e.Uring=722,e.Udieresis=722,e.aogonek=556,e.Uacute=722,e.uogonek=611,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=737,e.Emacron=667,e.ccaron=556,e.aring=556,e.Ncommaaccent=722,e.lacute=278,e.agrave=556,e.Tcommaaccent=611,e.Cacute=722,e.atilde=556,e.Edotaccent=667,e.scaron=556,e.scedilla=556,e.iacute=278,e.lozenge=494,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=611,e.acircumflex=556,e.Amacron=722,e.rcaron=389,e.ccedilla=556,e.Zdotaccent=611,e.Thorn=667,e.Omacron=778,e.Racute=722,e.Sacute=667,e.dcaron=743,e.Umacron=722,e.uring=611,e.threesuperior=333,e.Ograve=778,e.Agrave=722,e.Abreve=722,e.multiply=584,e.uacute=611,e.Tcaron=611,e.partialdiff=494,e.ydieresis=556,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=556,e.edieresis=556,e.cacute=556,e.nacute=611,e.umacron=611,e.Ncaron=722,e.Iacute=278,e.plusminus=584,e.brokenbar=280,e.registered=737,e.Gbreve=778,e.Idotaccent=278,e.summation=600,e.Egrave=667,e.racute=389,e.omacron=611,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=278,e.tcaron=389,e.eogonek=556,e.Uogonek=722,e.Aacute=722,e.Adieresis=722,e.egrave=556,e.zacute=500,e.iogonek=278,e.Oacute=778,e.oacute=611,e.amacron=556,e.sacute=556,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=611,e.twosuperior=333,e.Odieresis=778,e.mu=611,e.igrave=278,e.ohungarumlaut=611,e.Eogonek=667,e.dcroat=611,e.threequarters=834,e.Scedilla=667,e.lcaron=400,e.Kcommaaccent=722,e.Lacute=611,e.trademark=1e3,e.edotaccent=556,e.Igrave=278,e.Imacron=278,e.Lcaron=611,e.onehalf=834,e.lessequal=549,e.ocircumflex=611,e.ntilde=611,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=556,e.gbreve=611,e.onequarter=834,e.Scaron=667,e.Scommaaccent=667,e.Ohungarumlaut=778,e.degree=400,e.ograve=611,e.Ccaron=722,e.ugrave=611,e.radical=549,e.Dcaron=722,e.rcommaaccent=389,e.Ntilde=722,e.otilde=611,e.Rcommaaccent=722,e.Lcommaaccent=611,e.Atilde=722,e.Aogonek=722,e.Aring=722,e.Otilde=778,e.zdotaccent=500,e.Ecaron=667,e.Iogonek=278,e.kcommaaccent=556,e.minus=584,e.Icircumflex=278,e.ncaron=611,e.tcommaaccent=333,e.logicalnot=584,e.odieresis=611,e.udieresis=611,e.notequal=549,e.gcommaaccent=611,e.eth=611,e.zcaron=500,e.ncommaaccent=611,e.onesuperior=333,e.imacron=278,e.Euro=556}),s["Helvetica-BoldOblique"]=(0,t.getLookupTableFactory)(function(e){e.space=278,e.exclam=333,e.quotedbl=474,e.numbersign=556,e.dollar=556,e.percent=889,e.ampersand=722,e.quoteright=278,e.parenleft=333,e.parenright=333,e.asterisk=389,e.plus=584,e.comma=278,e.hyphen=333,e.period=278,e.slash=278,e.zero=556,e.one=556,e.two=556,e.three=556,e.four=556,e.five=556,e.six=556,e.seven=556,e.eight=556,e.nine=556,e.colon=333,e.semicolon=333,e.less=584,e.equal=584,e.greater=584,e.question=611,e.at=975,e.A=722,e.B=722,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=722,e.I=278,e.J=556,e.K=722,e.L=611,e.M=833,e.N=722,e.O=778,e.P=667,e.Q=778,e.R=722,e.S=667,e.T=611,e.U=722,e.V=667,e.W=944,e.X=667,e.Y=667,e.Z=611,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=584,e.underscore=556,e.quoteleft=278,e.a=556,e.b=611,e.c=556,e.d=611,e.e=556,e.f=333,e.g=611,e.h=611,e.i=278,e.j=278,e.k=556,e.l=278,e.m=889,e.n=611,e.o=611,e.p=611,e.q=611,e.r=389,e.s=556,e.t=333,e.u=611,e.v=556,e.w=778,e.x=556,e.y=556,e.z=500,e.braceleft=389,e.bar=280,e.braceright=389,e.asciitilde=584,e.exclamdown=333,e.cent=556,e.sterling=556,e.fraction=167,e.yen=556,e.florin=556,e.section=556,e.currency=556,e.quotesingle=238,e.quotedblleft=500,e.guillemotleft=556,e.guilsinglleft=333,e.guilsinglright=333,e.fi=611,e.fl=611,e.endash=556,e.dagger=556,e.daggerdbl=556,e.periodcentered=278,e.paragraph=556,e.bullet=350,e.quotesinglbase=278,e.quotedblbase=500,e.quotedblright=500,e.guillemotright=556,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=611,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=370,e.Lslash=611,e.Oslash=778,e.OE=1e3,e.ordmasculine=365,e.ae=889,e.dotlessi=278,e.lslash=278,e.oslash=611,e.oe=944,e.germandbls=611,e.Idieresis=278,e.eacute=556,e.abreve=556,e.uhungarumlaut=611,e.ecaron=556,e.Ydieresis=667,e.divide=584,e.Yacute=667,e.Acircumflex=722,e.aacute=556,e.Ucircumflex=722,e.yacute=556,e.scommaaccent=556,e.ecircumflex=556,e.Uring=722,e.Udieresis=722,e.aogonek=556,e.Uacute=722,e.uogonek=611,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=737,e.Emacron=667,e.ccaron=556,e.aring=556,e.Ncommaaccent=722,e.lacute=278,e.agrave=556,e.Tcommaaccent=611,e.Cacute=722,e.atilde=556,e.Edotaccent=667,e.scaron=556,e.scedilla=556,e.iacute=278,e.lozenge=494,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=611,e.acircumflex=556,e.Amacron=722,e.rcaron=389,e.ccedilla=556,e.Zdotaccent=611,e.Thorn=667,e.Omacron=778,e.Racute=722,e.Sacute=667,e.dcaron=743,e.Umacron=722,e.uring=611,e.threesuperior=333,e.Ograve=778,e.Agrave=722,e.Abreve=722,e.multiply=584,e.uacute=611,e.Tcaron=611,e.partialdiff=494,e.ydieresis=556,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=556,e.edieresis=556,e.cacute=556,e.nacute=611,e.umacron=611,e.Ncaron=722,e.Iacute=278,e.plusminus=584,e.brokenbar=280,e.registered=737,e.Gbreve=778,e.Idotaccent=278,e.summation=600,e.Egrave=667,e.racute=389,e.omacron=611,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=278,e.tcaron=389,e.eogonek=556,e.Uogonek=722,e.Aacute=722,e.Adieresis=722,e.egrave=556,e.zacute=500,e.iogonek=278,e.Oacute=778,e.oacute=611,e.amacron=556,e.sacute=556,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=611,e.twosuperior=333,e.Odieresis=778,e.mu=611,e.igrave=278,e.ohungarumlaut=611,e.Eogonek=667,e.dcroat=611,e.threequarters=834,e.Scedilla=667,e.lcaron=400,e.Kcommaaccent=722,e.Lacute=611,e.trademark=1e3,e.edotaccent=556,e.Igrave=278,e.Imacron=278,e.Lcaron=611,e.onehalf=834,e.lessequal=549,e.ocircumflex=611,e.ntilde=611,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=556,e.gbreve=611,e.onequarter=834,e.Scaron=667,e.Scommaaccent=667,e.Ohungarumlaut=778,e.degree=400,e.ograve=611,e.Ccaron=722,e.ugrave=611,e.radical=549,e.Dcaron=722,e.rcommaaccent=389,e.Ntilde=722,e.otilde=611,e.Rcommaaccent=722,e.Lcommaaccent=611,e.Atilde=722,e.Aogonek=722,e.Aring=722,e.Otilde=778,e.zdotaccent=500,e.Ecaron=667,e.Iogonek=278,e.kcommaaccent=556,e.minus=584,e.Icircumflex=278,e.ncaron=611,e.tcommaaccent=333,e.logicalnot=584,e.odieresis=611,e.udieresis=611,e.notequal=549,e.gcommaaccent=611,e.eth=611,e.zcaron=500,e.ncommaaccent=611,e.onesuperior=333,e.imacron=278,e.Euro=556}),s["Helvetica-Oblique"]=(0,t.getLookupTableFactory)(function(e){e.space=278,e.exclam=278,e.quotedbl=355,e.numbersign=556,e.dollar=556,e.percent=889,e.ampersand=667,e.quoteright=222,e.parenleft=333,e.parenright=333,e.asterisk=389,e.plus=584,e.comma=278,e.hyphen=333,e.period=278,e.slash=278,e.zero=556,e.one=556,e.two=556,e.three=556,e.four=556,e.five=556,e.six=556,e.seven=556,e.eight=556,e.nine=556,e.colon=278,e.semicolon=278,e.less=584,e.equal=584,e.greater=584,e.question=556,e.at=1015,e.A=667,e.B=667,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=722,e.I=278,e.J=500,e.K=667,e.L=556,e.M=833,e.N=722,e.O=778,e.P=667,e.Q=778,e.R=722,e.S=667,e.T=611,e.U=722,e.V=667,e.W=944,e.X=667,e.Y=667,e.Z=611,e.bracketleft=278,e.backslash=278,e.bracketright=278,e.asciicircum=469,e.underscore=556,e.quoteleft=222,e.a=556,e.b=556,e.c=500,e.d=556,e.e=556,e.f=278,e.g=556,e.h=556,e.i=222,e.j=222,e.k=500,e.l=222,e.m=833,e.n=556,e.o=556,e.p=556,e.q=556,e.r=333,e.s=500,e.t=278,e.u=556,e.v=500,e.w=722,e.x=500,e.y=500,e.z=500,e.braceleft=334,e.bar=260,e.braceright=334,e.asciitilde=584,e.exclamdown=333,e.cent=556,e.sterling=556,e.fraction=167,e.yen=556,e.florin=556,e.section=556,e.currency=556,e.quotesingle=191,e.quotedblleft=333,e.guillemotleft=556,e.guilsinglleft=333,e.guilsinglright=333,e.fi=500,e.fl=500,e.endash=556,e.dagger=556,e.daggerdbl=556,e.periodcentered=278,e.paragraph=537,e.bullet=350,e.quotesinglbase=222,e.quotedblbase=333,e.quotedblright=333,e.guillemotright=556,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=611,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=370,e.Lslash=556,e.Oslash=778,e.OE=1e3,e.ordmasculine=365,e.ae=889,e.dotlessi=278,e.lslash=222,e.oslash=611,e.oe=944,e.germandbls=611,e.Idieresis=278,e.eacute=556,e.abreve=556,e.uhungarumlaut=556,e.ecaron=556,e.Ydieresis=667,e.divide=584,e.Yacute=667,e.Acircumflex=667,e.aacute=556,e.Ucircumflex=722,e.yacute=500,e.scommaaccent=500,e.ecircumflex=556,e.Uring=722,e.Udieresis=722,e.aogonek=556,e.Uacute=722,e.uogonek=556,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=737,e.Emacron=667,e.ccaron=500,e.aring=556,e.Ncommaaccent=722,e.lacute=222,e.agrave=556,e.Tcommaaccent=611,e.Cacute=722,e.atilde=556,e.Edotaccent=667,e.scaron=500,e.scedilla=500,e.iacute=278,e.lozenge=471,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=556,e.acircumflex=556,e.Amacron=667,e.rcaron=333,e.ccedilla=500,e.Zdotaccent=611,e.Thorn=667,e.Omacron=778,e.Racute=722,e.Sacute=667,e.dcaron=643,e.Umacron=722,e.uring=556,e.threesuperior=333,e.Ograve=778,e.Agrave=667,e.Abreve=667,e.multiply=584,e.uacute=556,e.Tcaron=611,e.partialdiff=476,e.ydieresis=500,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=556,e.edieresis=556,e.cacute=500,e.nacute=556,e.umacron=556,e.Ncaron=722,e.Iacute=278,e.plusminus=584,e.brokenbar=260,e.registered=737,e.Gbreve=778,e.Idotaccent=278,e.summation=600,e.Egrave=667,e.racute=333,e.omacron=556,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=222,e.tcaron=317,e.eogonek=556,e.Uogonek=722,e.Aacute=667,e.Adieresis=667,e.egrave=556,e.zacute=500,e.iogonek=222,e.Oacute=778,e.oacute=556,e.amacron=556,e.sacute=500,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=556,e.twosuperior=333,e.Odieresis=778,e.mu=556,e.igrave=278,e.ohungarumlaut=556,e.Eogonek=667,e.dcroat=556,e.threequarters=834,e.Scedilla=667,e.lcaron=299,e.Kcommaaccent=667,e.Lacute=556,e.trademark=1e3,e.edotaccent=556,e.Igrave=278,e.Imacron=278,e.Lcaron=556,e.onehalf=834,e.lessequal=549,e.ocircumflex=556,e.ntilde=556,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=556,e.gbreve=556,e.onequarter=834,e.Scaron=667,e.Scommaaccent=667,e.Ohungarumlaut=778,e.degree=400,e.ograve=556,e.Ccaron=722,e.ugrave=556,e.radical=453,e.Dcaron=722,e.rcommaaccent=333,e.Ntilde=722,e.otilde=556,e.Rcommaaccent=722,e.Lcommaaccent=556,e.Atilde=667,e.Aogonek=667,e.Aring=667,e.Otilde=778,e.zdotaccent=500,e.Ecaron=667,e.Iogonek=278,e.kcommaaccent=500,e.minus=584,e.Icircumflex=278,e.ncaron=556,e.tcommaaccent=278,e.logicalnot=584,e.odieresis=556,e.udieresis=556,e.notequal=549,e.gcommaaccent=556,e.eth=556,e.zcaron=500,e.ncommaaccent=556,e.onesuperior=333,e.imacron=278,e.Euro=556}),s.Symbol=(0,t.getLookupTableFactory)(function(e){e.space=250,e.exclam=333,e.universal=713,e.numbersign=500,e.existential=549,e.percent=833,e.ampersand=778,e.suchthat=439,e.parenleft=333,e.parenright=333,e.asteriskmath=500,e.plus=549,e.comma=250,e.minus=549,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=278,e.semicolon=278,e.less=549,e.equal=549,e.greater=549,e.question=444,e.congruent=549,e.Alpha=722,e.Beta=667,e.Chi=722,e.Delta=612,e.Epsilon=611,e.Phi=763,e.Gamma=603,e.Eta=722,e.Iota=333,e.theta1=631,e.Kappa=722,e.Lambda=686,e.Mu=889,e.Nu=722,e.Omicron=722,e.Pi=768,e.Theta=741,e.Rho=556,e.Sigma=592,e.Tau=611,e.Upsilon=690,e.sigma1=439,e.Omega=768,e.Xi=645,e.Psi=795,e.Zeta=611,e.bracketleft=333,e.therefore=863,e.bracketright=333,e.perpendicular=658,e.underscore=500,e.radicalex=500,e.alpha=631,e.beta=549,e.chi=549,e.delta=494,e.epsilon=439,e.phi=521,e.gamma=411,e.eta=603,e.iota=329,e.phi1=603,e.kappa=549,e.lambda=549,e.mu=576,e.nu=521,e.omicron=549,e.pi=549,e.theta=521,e.rho=549,e.sigma=603,e.tau=439,e.upsilon=576,e.omega1=713,e.omega=686,e.xi=493,e.psi=686,e.zeta=494,e.braceleft=480,e.bar=200,e.braceright=480,e.similar=549,e.Euro=750,e.Upsilon1=620,e.minute=247,e.lessequal=549,e.fraction=167,e.infinity=713,e.florin=500,e.club=753,e.diamond=753,e.heart=753,e.spade=753,e.arrowboth=1042,e.arrowleft=987,e.arrowup=603,e.arrowright=987,e.arrowdown=603,e.degree=400,e.plusminus=549,e.second=411,e.greaterequal=549,e.multiply=549,e.proportional=713,e.partialdiff=494,e.bullet=460,e.divide=549,e.notequal=549,e.equivalence=549,e.approxequal=549,e.ellipsis=1e3,e.arrowvertex=603,e.arrowhorizex=1e3,e.carriagereturn=658,e.aleph=823,e.Ifraktur=686,e.Rfraktur=795,e.weierstrass=987,e.circlemultiply=768,e.circleplus=768,e.emptyset=823,e.intersection=768,e.union=768,e.propersuperset=713,e.reflexsuperset=713,e.notsubset=713,e.propersubset=713,e.reflexsubset=713,e.element=713,e.notelement=713,e.angle=768,e.gradient=713,e.registerserif=790,e.copyrightserif=790,e.trademarkserif=890,e.product=823,e.radical=549,e.dotmath=250,e.logicalnot=713,e.logicaland=603,e.logicalor=603,e.arrowdblboth=1042,e.arrowdblleft=987,e.arrowdblup=603,e.arrowdblright=987,e.arrowdbldown=603,e.lozenge=494,e.angleleft=329,e.registersans=790,e.copyrightsans=790,e.trademarksans=786,e.summation=713,e.parenlefttp=384,e.parenleftex=384,e.parenleftbt=384,e.bracketlefttp=384,e.bracketleftex=384,e.bracketleftbt=384,e.bracelefttp=494,e.braceleftmid=494,e.braceleftbt=494,e.braceex=494,e.angleright=329,e.integral=274,e.integraltp=686,e.integralex=686,e.integralbt=686,e.parenrighttp=384,e.parenrightex=384,e.parenrightbt=384,e.bracketrighttp=384,e.bracketrightex=384,e.bracketrightbt=384,e.bracerighttp=494,e.bracerightmid=494,e.bracerightbt=494,e.apple=790}),s["Times-Roman"]=(0,t.getLookupTableFactory)(function(e){e.space=250,e.exclam=333,e.quotedbl=408,e.numbersign=500,e.dollar=500,e.percent=833,e.ampersand=778,e.quoteright=333,e.parenleft=333,e.parenright=333,e.asterisk=500,e.plus=564,e.comma=250,e.hyphen=333,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=278,e.semicolon=278,e.less=564,e.equal=564,e.greater=564,e.question=444,e.at=921,e.A=722,e.B=667,e.C=667,e.D=722,e.E=611,e.F=556,e.G=722,e.H=722,e.I=333,e.J=389,e.K=722,e.L=611,e.M=889,e.N=722,e.O=722,e.P=556,e.Q=722,e.R=667,e.S=556,e.T=611,e.U=722,e.V=722,e.W=944,e.X=722,e.Y=722,e.Z=611,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=469,e.underscore=500,e.quoteleft=333,e.a=444,e.b=500,e.c=444,e.d=500,e.e=444,e.f=333,e.g=500,e.h=500,e.i=278,e.j=278,e.k=500,e.l=278,e.m=778,e.n=500,e.o=500,e.p=500,e.q=500,e.r=333,e.s=389,e.t=278,e.u=500,e.v=500,e.w=722,e.x=500,e.y=500,e.z=444,e.braceleft=480,e.bar=200,e.braceright=480,e.asciitilde=541,e.exclamdown=333,e.cent=500,e.sterling=500,e.fraction=167,e.yen=500,e.florin=500,e.section=500,e.currency=500,e.quotesingle=180,e.quotedblleft=444,e.guillemotleft=500,e.guilsinglleft=333,e.guilsinglright=333,e.fi=556,e.fl=556,e.endash=500,e.dagger=500,e.daggerdbl=500,e.periodcentered=250,e.paragraph=453,e.bullet=350,e.quotesinglbase=333,e.quotedblbase=444,e.quotedblright=444,e.guillemotright=500,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=444,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=889,e.ordfeminine=276,e.Lslash=611,e.Oslash=722,e.OE=889,e.ordmasculine=310,e.ae=667,e.dotlessi=278,e.lslash=278,e.oslash=500,e.oe=722,e.germandbls=500,e.Idieresis=333,e.eacute=444,e.abreve=444,e.uhungarumlaut=500,e.ecaron=444,e.Ydieresis=722,e.divide=564,e.Yacute=722,e.Acircumflex=722,e.aacute=444,e.Ucircumflex=722,e.yacute=500,e.scommaaccent=389,e.ecircumflex=444,e.Uring=722,e.Udieresis=722,e.aogonek=444,e.Uacute=722,e.uogonek=500,e.Edieresis=611,e.Dcroat=722,e.commaaccent=250,e.copyright=760,e.Emacron=611,e.ccaron=444,e.aring=444,e.Ncommaaccent=722,e.lacute=278,e.agrave=444,e.Tcommaaccent=611,e.Cacute=667,e.atilde=444,e.Edotaccent=611,e.scaron=389,e.scedilla=389,e.iacute=278,e.lozenge=471,e.Rcaron=667,e.Gcommaaccent=722,e.ucircumflex=500,e.acircumflex=444,e.Amacron=722,e.rcaron=333,e.ccedilla=444,e.Zdotaccent=611,e.Thorn=556,e.Omacron=722,e.Racute=667,e.Sacute=556,e.dcaron=588,e.Umacron=722,e.uring=500,e.threesuperior=300,e.Ograve=722,e.Agrave=722,e.Abreve=722,e.multiply=564,e.uacute=500,e.Tcaron=611,e.partialdiff=476,e.ydieresis=500,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=611,e.adieresis=444,e.edieresis=444,e.cacute=444,e.nacute=500,e.umacron=500,e.Ncaron=722,e.Iacute=333,e.plusminus=564,e.brokenbar=200,e.registered=760,e.Gbreve=722,e.Idotaccent=333,e.summation=600,e.Egrave=611,e.racute=333,e.omacron=500,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=667,e.lcommaaccent=278,e.tcaron=326,e.eogonek=444,e.Uogonek=722,e.Aacute=722,e.Adieresis=722,e.egrave=444,e.zacute=444,e.iogonek=278,e.Oacute=722,e.oacute=500,e.amacron=444,e.sacute=389,e.idieresis=278,e.Ocircumflex=722,e.Ugrave=722,e.Delta=612,e.thorn=500,e.twosuperior=300,e.Odieresis=722,e.mu=500,e.igrave=278,e.ohungarumlaut=500,e.Eogonek=611,e.dcroat=500,e.threequarters=750,e.Scedilla=556,e.lcaron=344,e.Kcommaaccent=722,e.Lacute=611,e.trademark=980,e.edotaccent=444,e.Igrave=333,e.Imacron=333,e.Lcaron=611,e.onehalf=750,e.lessequal=549,e.ocircumflex=500,e.ntilde=500,e.Uhungarumlaut=722,e.Eacute=611,e.emacron=444,e.gbreve=500,e.onequarter=750,e.Scaron=556,e.Scommaaccent=556,e.Ohungarumlaut=722,e.degree=400,e.ograve=500,e.Ccaron=667,e.ugrave=500,e.radical=453,e.Dcaron=722,e.rcommaaccent=333,e.Ntilde=722,e.otilde=500,e.Rcommaaccent=667,e.Lcommaaccent=611,e.Atilde=722,e.Aogonek=722,e.Aring=722,e.Otilde=722,e.zdotaccent=444,e.Ecaron=611,e.Iogonek=333,e.kcommaaccent=500,e.minus=564,e.Icircumflex=333,e.ncaron=500,e.tcommaaccent=278,e.logicalnot=564,e.odieresis=500,e.udieresis=500,e.notequal=549,e.gcommaaccent=500,e.eth=500,e.zcaron=444,e.ncommaaccent=500,e.onesuperior=300,e.imacron=278,e.Euro=500}),s["Times-Bold"]=(0,t.getLookupTableFactory)(function(e){e.space=250,e.exclam=333,e.quotedbl=555,e.numbersign=500,e.dollar=500,e.percent=1e3,e.ampersand=833,e.quoteright=333,e.parenleft=333,e.parenright=333,e.asterisk=500,e.plus=570,e.comma=250,e.hyphen=333,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=333,e.semicolon=333,e.less=570,e.equal=570,e.greater=570,e.question=500,e.at=930,e.A=722,e.B=667,e.C=722,e.D=722,e.E=667,e.F=611,e.G=778,e.H=778,e.I=389,e.J=500,e.K=778,e.L=667,e.M=944,e.N=722,e.O=778,e.P=611,e.Q=778,e.R=722,e.S=556,e.T=667,e.U=722,e.V=722,e.W=1e3,e.X=722,e.Y=722,e.Z=667,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=581,e.underscore=500,e.quoteleft=333,e.a=500,e.b=556,e.c=444,e.d=556,e.e=444,e.f=333,e.g=500,e.h=556,e.i=278,e.j=333,e.k=556,e.l=278,e.m=833,e.n=556,e.o=500,e.p=556,e.q=556,e.r=444,e.s=389,e.t=333,e.u=556,e.v=500,e.w=722,e.x=500,e.y=500,e.z=444,e.braceleft=394,e.bar=220,e.braceright=394,e.asciitilde=520,e.exclamdown=333,e.cent=500,e.sterling=500,e.fraction=167,e.yen=500,e.florin=500,e.section=500,e.currency=500,e.quotesingle=278,e.quotedblleft=500,e.guillemotleft=500,e.guilsinglleft=333,e.guilsinglright=333,e.fi=556,e.fl=556,e.endash=500,e.dagger=500,e.daggerdbl=500,e.periodcentered=250,e.paragraph=540,e.bullet=350,e.quotesinglbase=333,e.quotedblbase=500,e.quotedblright=500,e.guillemotright=500,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=500,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=1e3,e.ordfeminine=300,e.Lslash=667,e.Oslash=778,e.OE=1e3,e.ordmasculine=330,e.ae=722,e.dotlessi=278,e.lslash=278,e.oslash=500,e.oe=722,e.germandbls=556,e.Idieresis=389,e.eacute=444,e.abreve=500,e.uhungarumlaut=556,e.ecaron=444,e.Ydieresis=722,e.divide=570,e.Yacute=722,e.Acircumflex=722,e.aacute=500,e.Ucircumflex=722,e.yacute=500,e.scommaaccent=389,e.ecircumflex=444,e.Uring=722,e.Udieresis=722,e.aogonek=500,e.Uacute=722,e.uogonek=556,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=747,e.Emacron=667,e.ccaron=444,e.aring=500,e.Ncommaaccent=722,e.lacute=278,e.agrave=500,e.Tcommaaccent=667,e.Cacute=722,e.atilde=500,e.Edotaccent=667,e.scaron=389,e.scedilla=389,e.iacute=278,e.lozenge=494,e.Rcaron=722,e.Gcommaaccent=778,e.ucircumflex=556,e.acircumflex=500,e.Amacron=722,e.rcaron=444,e.ccedilla=444,e.Zdotaccent=667,e.Thorn=611,e.Omacron=778,e.Racute=722,e.Sacute=556,e.dcaron=672,e.Umacron=722,e.uring=556,e.threesuperior=300,e.Ograve=778,e.Agrave=722,e.Abreve=722,e.multiply=570,e.uacute=556,e.Tcaron=667,e.partialdiff=494,e.ydieresis=500,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=500,e.edieresis=444,e.cacute=444,e.nacute=556,e.umacron=556,e.Ncaron=722,e.Iacute=389,e.plusminus=570,e.brokenbar=220,e.registered=747,e.Gbreve=778,e.Idotaccent=389,e.summation=600,e.Egrave=667,e.racute=444,e.omacron=500,e.Zacute=667,e.Zcaron=667,e.greaterequal=549,e.Eth=722,e.Ccedilla=722,e.lcommaaccent=278,e.tcaron=416,e.eogonek=444,e.Uogonek=722,e.Aacute=722,e.Adieresis=722,e.egrave=444,e.zacute=444,e.iogonek=278,e.Oacute=778,e.oacute=500,e.amacron=500,e.sacute=389,e.idieresis=278,e.Ocircumflex=778,e.Ugrave=722,e.Delta=612,e.thorn=556,e.twosuperior=300,e.Odieresis=778,e.mu=556,e.igrave=278,e.ohungarumlaut=500,e.Eogonek=667,e.dcroat=556,e.threequarters=750,e.Scedilla=556,e.lcaron=394,e.Kcommaaccent=778,e.Lacute=667,e.trademark=1e3,e.edotaccent=444,e.Igrave=389,e.Imacron=389,e.Lcaron=667,e.onehalf=750,e.lessequal=549,e.ocircumflex=500,e.ntilde=556,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=444,e.gbreve=500,e.onequarter=750,e.Scaron=556,e.Scommaaccent=556,e.Ohungarumlaut=778,e.degree=400,e.ograve=500,e.Ccaron=722,e.ugrave=556,e.radical=549,e.Dcaron=722,e.rcommaaccent=444,e.Ntilde=722,e.otilde=500,e.Rcommaaccent=722,e.Lcommaaccent=667,e.Atilde=722,e.Aogonek=722,e.Aring=722,e.Otilde=778,e.zdotaccent=444,e.Ecaron=667,e.Iogonek=389,e.kcommaaccent=556,e.minus=570,e.Icircumflex=389,e.ncaron=556,e.tcommaaccent=333,e.logicalnot=570,e.odieresis=500,e.udieresis=556,e.notequal=549,e.gcommaaccent=500,e.eth=500,e.zcaron=444,e.ncommaaccent=556,e.onesuperior=300,e.imacron=278,e.Euro=500}),s["Times-BoldItalic"]=(0,t.getLookupTableFactory)(function(e){e.space=250,e.exclam=389,e.quotedbl=555,e.numbersign=500,e.dollar=500,e.percent=833,e.ampersand=778,e.quoteright=333,e.parenleft=333,e.parenright=333,e.asterisk=500,e.plus=570,e.comma=250,e.hyphen=333,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=333,e.semicolon=333,e.less=570,e.equal=570,e.greater=570,e.question=500,e.at=832,e.A=667,e.B=667,e.C=667,e.D=722,e.E=667,e.F=667,e.G=722,e.H=778,e.I=389,e.J=500,e.K=667,e.L=611,e.M=889,e.N=722,e.O=722,e.P=611,e.Q=722,e.R=667,e.S=556,e.T=611,e.U=722,e.V=667,e.W=889,e.X=667,e.Y=611,e.Z=611,e.bracketleft=333,e.backslash=278,e.bracketright=333,e.asciicircum=570,e.underscore=500,e.quoteleft=333,e.a=500,e.b=500,e.c=444,e.d=500,e.e=444,e.f=333,e.g=500,e.h=556,e.i=278,e.j=278,e.k=500,e.l=278,e.m=778,e.n=556,e.o=500,e.p=500,e.q=500,e.r=389,e.s=389,e.t=278,e.u=556,e.v=444,e.w=667,e.x=500,e.y=444,e.z=389,e.braceleft=348,e.bar=220,e.braceright=348,e.asciitilde=570,e.exclamdown=389,e.cent=500,e.sterling=500,e.fraction=167,e.yen=500,e.florin=500,e.section=500,e.currency=500,e.quotesingle=278,e.quotedblleft=500,e.guillemotleft=500,e.guilsinglleft=333,e.guilsinglright=333,e.fi=556,e.fl=556,e.endash=500,e.dagger=500,e.daggerdbl=500,e.periodcentered=250,e.paragraph=500,e.bullet=350,e.quotesinglbase=333,e.quotedblbase=500,e.quotedblright=500,e.guillemotright=500,e.ellipsis=1e3,e.perthousand=1e3,e.questiondown=500,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=1e3,e.AE=944,e.ordfeminine=266,e.Lslash=611,e.Oslash=722,e.OE=944,e.ordmasculine=300,e.ae=722,e.dotlessi=278,e.lslash=278,e.oslash=500,e.oe=722,e.germandbls=500,e.Idieresis=389,e.eacute=444,e.abreve=500,e.uhungarumlaut=556,e.ecaron=444,e.Ydieresis=611,e.divide=570,e.Yacute=611,e.Acircumflex=667,e.aacute=500,e.Ucircumflex=722,e.yacute=444,e.scommaaccent=389,e.ecircumflex=444,e.Uring=722,e.Udieresis=722,e.aogonek=500,e.Uacute=722,e.uogonek=556,e.Edieresis=667,e.Dcroat=722,e.commaaccent=250,e.copyright=747,e.Emacron=667,e.ccaron=444,e.aring=500,e.Ncommaaccent=722,e.lacute=278,e.agrave=500,e.Tcommaaccent=611,e.Cacute=667,e.atilde=500,e.Edotaccent=667,e.scaron=389,e.scedilla=389,e.iacute=278,e.lozenge=494,e.Rcaron=667,e.Gcommaaccent=722,e.ucircumflex=556,e.acircumflex=500,e.Amacron=667,e.rcaron=389,e.ccedilla=444,e.Zdotaccent=611,e.Thorn=611,e.Omacron=722,e.Racute=667,e.Sacute=556,e.dcaron=608,e.Umacron=722,e.uring=556,e.threesuperior=300,e.Ograve=722,e.Agrave=667,e.Abreve=667,e.multiply=570,e.uacute=556,e.Tcaron=611,e.partialdiff=494,e.ydieresis=444,e.Nacute=722,e.icircumflex=278,e.Ecircumflex=667,e.adieresis=500,e.edieresis=444,e.cacute=444,e.nacute=556,e.umacron=556,e.Ncaron=722,e.Iacute=389,e.plusminus=570,e.brokenbar=220,e.registered=747,e.Gbreve=722,e.Idotaccent=389,e.summation=600,e.Egrave=667,e.racute=389,e.omacron=500,e.Zacute=611,e.Zcaron=611,e.greaterequal=549,e.Eth=722,e.Ccedilla=667,e.lcommaaccent=278,e.tcaron=366,e.eogonek=444,e.Uogonek=722,e.Aacute=667,e.Adieresis=667,e.egrave=444,e.zacute=389,e.iogonek=278,e.Oacute=722,e.oacute=500,e.amacron=500,e.sacute=389,e.idieresis=278,e.Ocircumflex=722,e.Ugrave=722,e.Delta=612,e.thorn=500,e.twosuperior=300,e.Odieresis=722,e.mu=576,e.igrave=278,e.ohungarumlaut=500,e.Eogonek=667,e.dcroat=500,e.threequarters=750,e.Scedilla=556,e.lcaron=382,e.Kcommaaccent=667,e.Lacute=611,e.trademark=1e3,e.edotaccent=444,e.Igrave=389,e.Imacron=389,e.Lcaron=611,e.onehalf=750,e.lessequal=549,e.ocircumflex=500,e.ntilde=556,e.Uhungarumlaut=722,e.Eacute=667,e.emacron=444,e.gbreve=500,e.onequarter=750,e.Scaron=556,e.Scommaaccent=556,e.Ohungarumlaut=722,e.degree=400,e.ograve=500,e.Ccaron=667,e.ugrave=556,e.radical=549,e.Dcaron=722,e.rcommaaccent=389,e.Ntilde=722,e.otilde=500,e.Rcommaaccent=667,e.Lcommaaccent=611,e.Atilde=667,e.Aogonek=667,e.Aring=667,e.Otilde=722,e.zdotaccent=389,e.Ecaron=667,e.Iogonek=389,e.kcommaaccent=500,e.minus=606,e.Icircumflex=389,e.ncaron=556,e.tcommaaccent=278,e.logicalnot=606,e.odieresis=500,e.udieresis=556,e.notequal=549,e.gcommaaccent=500,e.eth=500,e.zcaron=389,e.ncommaaccent=556,e.onesuperior=300,e.imacron=278,e.Euro=500}),s["Times-Italic"]=(0,t.getLookupTableFactory)(function(e){e.space=250,e.exclam=333,e.quotedbl=420,e.numbersign=500,e.dollar=500,e.percent=833,e.ampersand=778,e.quoteright=333,e.parenleft=333,e.parenright=333,e.asterisk=500,e.plus=675,e.comma=250,e.hyphen=333,e.period=250,e.slash=278,e.zero=500,e.one=500,e.two=500,e.three=500,e.four=500,e.five=500,e.six=500,e.seven=500,e.eight=500,e.nine=500,e.colon=333,e.semicolon=333,e.less=675,e.equal=675,e.greater=675,e.question=500,e.at=920,e.A=611,e.B=611,e.C=667,e.D=722,e.E=611,e.F=611,e.G=722,e.H=722,e.I=333,e.J=444,e.K=667,e.L=556,e.M=833,e.N=667,e.O=722,e.P=611,e.Q=722,e.R=611,e.S=500,e.T=556,e.U=722,e.V=611,e.W=833,e.X=611,e.Y=556,e.Z=556,e.bracketleft=389,e.backslash=278,e.bracketright=389,e.asciicircum=422,e.underscore=500,e.quoteleft=333,e.a=500,e.b=500,e.c=444,e.d=500,e.e=444,e.f=278,e.g=500,e.h=500,e.i=278,e.j=278,e.k=444,e.l=278,e.m=722,e.n=500,e.o=500,e.p=500,e.q=500,e.r=389,e.s=389,e.t=278,e.u=500,e.v=444,e.w=667,e.x=444,e.y=444,e.z=389,e.braceleft=400,e.bar=275,e.braceright=400,e.asciitilde=541,e.exclamdown=389,e.cent=500,e.sterling=500,e.fraction=167,e.yen=500,e.florin=500,e.section=500,e.currency=500,e.quotesingle=214,e.quotedblleft=556,e.guillemotleft=500,e.guilsinglleft=333,e.guilsinglright=333,e.fi=500,e.fl=500,e.endash=500,e.dagger=500,e.daggerdbl=500,e.periodcentered=250,e.paragraph=523,e.bullet=350,e.quotesinglbase=333,e.quotedblbase=556,e.quotedblright=556,e.guillemotright=500,e.ellipsis=889,e.perthousand=1e3,e.questiondown=500,e.grave=333,e.acute=333,e.circumflex=333,e.tilde=333,e.macron=333,e.breve=333,e.dotaccent=333,e.dieresis=333,e.ring=333,e.cedilla=333,e.hungarumlaut=333,e.ogonek=333,e.caron=333,e.emdash=889,e.AE=889,e.ordfeminine=276,e.Lslash=556,e.Oslash=722,e.OE=944,e.ordmasculine=310,e.ae=667,e.dotlessi=278,e.lslash=278,e.oslash=500,e.oe=667,e.germandbls=500,e.Idieresis=333,e.eacute=444,e.abreve=500,e.uhungarumlaut=500,e.ecaron=444,e.Ydieresis=556,e.divide=675,e.Yacute=556,e.Acircumflex=611,e.aacute=500,e.Ucircumflex=722,e.yacute=444,e.scommaaccent=389,e.ecircumflex=444,e.Uring=722,e.Udieresis=722,e.aogonek=500,e.Uacute=722,e.uogonek=500,e.Edieresis=611,e.Dcroat=722,e.commaaccent=250,e.copyright=760,e.Emacron=611,e.ccaron=444,e.aring=500,e.Ncommaaccent=667,e.lacute=278,e.agrave=500,e.Tcommaaccent=556,e.Cacute=667,e.atilde=500,e.Edotaccent=611,e.scaron=389,e.scedilla=389,e.iacute=278,e.lozenge=471,e.Rcaron=611,e.Gcommaaccent=722,e.ucircumflex=500,e.acircumflex=500,e.Amacron=611,e.rcaron=389,e.ccedilla=444,e.Zdotaccent=556,e.Thorn=611,e.Omacron=722,e.Racute=611,e.Sacute=500,e.dcaron=544,e.Umacron=722,e.uring=500,e.threesuperior=300,e.Ograve=722,e.Agrave=611,e.Abreve=611,e.multiply=675,e.uacute=500,e.Tcaron=556,e.partialdiff=476,e.ydieresis=444,e.Nacute=667,e.icircumflex=278,e.Ecircumflex=611,e.adieresis=500,e.edieresis=444,e.cacute=444,e.nacute=500,e.umacron=500,e.Ncaron=667,e.Iacute=333,e.plusminus=675,e.brokenbar=275,e.registered=760,e.Gbreve=722,e.Idotaccent=333,e.summation=600,e.Egrave=611,e.racute=389,e.omacron=500,e.Zacute=556,e.Zcaron=556,e.greaterequal=549,e.Eth=722,e.Ccedilla=667,e.lcommaaccent=278,e.tcaron=300,e.eogonek=444,e.Uogonek=722,e.Aacute=611,e.Adieresis=611,e.egrave=444,e.zacute=389,e.iogonek=278,e.Oacute=722,e.oacute=500,e.amacron=500,e.sacute=389,e.idieresis=278,e.Ocircumflex=722,e.Ugrave=722,e.Delta=612,e.thorn=500,e.twosuperior=300,e.Odieresis=722,e.mu=500,e.igrave=278,e.ohungarumlaut=500,e.Eogonek=611,e.dcroat=500,e.threequarters=750,e.Scedilla=500,e.lcaron=300,e.Kcommaaccent=667,e.Lacute=556,e.trademark=980,e.edotaccent=444,e.Igrave=333,e.Imacron=333,e.Lcaron=611,e.onehalf=750,e.lessequal=549,e.ocircumflex=500,e.ntilde=500,e.Uhungarumlaut=722,e.Eacute=611,e.emacron=444,e.gbreve=500,e.onequarter=750,e.Scaron=500,e.Scommaaccent=500,e.Ohungarumlaut=722,e.degree=400,e.ograve=500,e.Ccaron=667,e.ugrave=500,e.radical=453,e.Dcaron=722,e.rcommaaccent=389,e.Ntilde=667,e.otilde=500,e.Rcommaaccent=611,e.Lcommaaccent=556,e.Atilde=611,e.Aogonek=611,e.Aring=611,e.Otilde=722,e.zdotaccent=389,e.Ecaron=611,e.Iogonek=333,e.kcommaaccent=444,e.minus=675,e.Icircumflex=333,e.ncaron=500,e.tcommaaccent=278,e.logicalnot=675,e.odieresis=500,e.udieresis=500,e.notequal=549,e.gcommaaccent=500,e.eth=500,e.zcaron=389,e.ncommaaccent=500,e.onesuperior=300,e.imacron=278,e.Euro=500}),s.ZapfDingbats=(0,t.getLookupTableFactory)(function(e){e.space=278,e.a1=974,e.a2=961,e.a202=974,e.a3=980,e.a4=719,e.a5=789,e.a119=790,e.a118=791,e.a117=690,e.a11=960,e.a12=939,e.a13=549,e.a14=855,e.a15=911,e.a16=933,e.a105=911,e.a17=945,e.a18=974,e.a19=755,e.a20=846,e.a21=762,e.a22=761,e.a23=571,e.a24=677,e.a25=763,e.a26=760,e.a27=759,e.a28=754,e.a6=494,e.a7=552,e.a8=537,e.a9=577,e.a10=692,e.a29=786,e.a30=788,e.a31=788,e.a32=790,e.a33=793,e.a34=794,e.a35=816,e.a36=823,e.a37=789,e.a38=841,e.a39=823,e.a40=833,e.a41=816,e.a42=831,e.a43=923,e.a44=744,e.a45=723,e.a46=749,e.a47=790,e.a48=792,e.a49=695,e.a50=776,e.a51=768,e.a52=792,e.a53=759,e.a54=707,e.a55=708,e.a56=682,e.a57=701,e.a58=826,e.a59=815,e.a60=789,e.a61=789,e.a62=707,e.a63=687,e.a64=696,e.a65=689,e.a66=786,e.a67=787,e.a68=713,e.a69=791,e.a70=785,e.a71=791,e.a72=873,e.a73=761,e.a74=762,e.a203=762,e.a75=759,e.a204=759,e.a76=892,e.a77=892,e.a78=788,e.a79=784,e.a81=438,e.a82=138,e.a83=277,e.a84=415,e.a97=392,e.a98=392,e.a99=668,e.a100=668,e.a89=390,e.a90=390,e.a93=317,e.a94=317,e.a91=276,e.a92=276,e.a205=509,e.a85=509,e.a206=410,e.a86=410,e.a87=234,e.a88=234,e.a95=334,e.a96=334,e.a101=732,e.a102=544,e.a103=544,e.a104=910,e.a106=667,e.a107=760,e.a108=760,e.a112=776,e.a111=595,e.a110=694,e.a109=626,e.a120=788,e.a121=788,e.a122=788,e.a123=788,e.a124=788,e.a125=788,e.a126=788,e.a127=788,e.a128=788,e.a129=788,e.a130=788,e.a131=788,e.a132=788,e.a133=788,e.a134=788,e.a135=788,e.a136=788,e.a137=788,e.a138=788,e.a139=788,e.a140=788,e.a141=788,e.a142=788,e.a143=788,e.a144=788,e.a145=788,e.a146=788,e.a147=788,e.a148=788,e.a149=788,e.a150=788,e.a151=788,e.a152=788,e.a153=788,e.a154=788,e.a155=788,e.a156=788,e.a157=788,e.a158=788,e.a159=788,e.a160=894,e.a161=838,e.a163=1016,e.a164=458,e.a196=748,e.a165=924,e.a192=748,e.a166=918,e.a167=927,e.a168=928,e.a169=928,e.a170=834,e.a171=873,e.a172=828,e.a173=924,e.a162=924,e.a174=917,e.a175=930,e.a176=931,e.a177=463,e.a178=883,e.a179=836,e.a193=836,e.a180=867,e.a199=867,e.a181=696,e.a200=696,e.a182=874,e.a201=874,e.a183=760,e.a184=946,e.a197=771,e.a185=865,e.a194=771,e.a198=888,e.a186=967,e.a195=888,e.a187=831,e.a188=873,e.a189=927,e.a190=970,e.a191=918})});f.getMetrics=o;const c=(0,t.getLookupTableFactory)(function(s){s.Courier={ascent:629,descent:-157,capHeight:562,xHeight:-426},s["Courier-Bold"]={ascent:629,descent:-157,capHeight:562,xHeight:439},s["Courier-Oblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426},s["Courier-BoldOblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426},s.Helvetica={ascent:718,descent:-207,capHeight:718,xHeight:523},s["Helvetica-Bold"]={ascent:718,descent:-207,capHeight:718,xHeight:532},s["Helvetica-Oblique"]={ascent:718,descent:-207,capHeight:718,xHeight:523},s["Helvetica-BoldOblique"]={ascent:718,descent:-207,capHeight:718,xHeight:532},s["Times-Roman"]={ascent:683,descent:-217,capHeight:662,xHeight:450},s["Times-Bold"]={ascent:683,descent:-217,capHeight:676,xHeight:461},s["Times-Italic"]={ascent:683,descent:-217,capHeight:653,xHeight:441},s["Times-BoldItalic"]={ascent:683,descent:-217,capHeight:669,xHeight:462},s.Symbol={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN},s.ZapfDingbats={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN}});f.getFontBasicMetrics=c},(ge,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.GlyfTable=void 0;const h=1<<0,t=1<<1,o=1<<2,c=1<<3,s=1<<4,e=1<<5,a=1<<6,r=1<<0,n=1<<1,l=1<<3,u=1<<5,d=1<<6,i=1<<7,g=1<<8;class x{constructor({glyfTable:M,isGlyphLocationsLong:j,locaTable:O,numGlyphs:T}){this.glyphs=[];const R=new DataView(O.buffer,O.byteOffset,O.byteLength),y=new DataView(M.buffer,M.byteOffset,M.byteLength),p=j?4:2;let P=j?R.getUint32(0):2*R.getUint16(0),E=0;for(let S=0;S<T;S++){E+=p;const F=j?R.getUint32(E):2*R.getUint16(E);if(F===P){this.glyphs.push(new m({}));continue}const C=m.parse(P,y);this.glyphs.push(C),P=F}}getSize(){return this.glyphs.reduce((M,j)=>{const O=j.getSize();return M+(O+3&-4)},0)}write(){const M=this.getSize(),j=new DataView(new ArrayBuffer(M)),O=M>131070,T=O?4:2,R=new DataView(new ArrayBuffer((this.glyphs.length+1)*T));O?R.setUint32(0,0):R.setUint16(0,0);let y=0,p=0;for(const P of this.glyphs)y+=P.write(y,j),y=y+3&-4,p+=T,O?R.setUint32(p,y):R.setUint16(p,y>>1);return{isLocationLong:O,loca:new Uint8Array(R.buffer),glyf:new Uint8Array(j.buffer)}}scale(M){for(let j=0,O=this.glyphs.length;j<O;j++)this.glyphs[j].scale(M[j])}}f.GlyfTable=x;class m{constructor({header:M=null,simple:j=null,composites:O=null}){this.header=M,this.simple=j,this.composites=O}static parse(M,j){const[O,T]=A.parse(M,j);if(M+=O,T.numberOfContours<0){const y=[];for(;;){const[p,P]=_.parse(M,j);if(M+=p,y.push(P),!(P.flags&u))break}return new m({header:T,composites:y})}const R=v.parse(M,j,T.numberOfContours);return new m({header:T,simple:R})}getSize(){if(!this.header)return 0;const M=this.simple?this.simple.getSize():this.composites.reduce((j,O)=>j+O.getSize(),0);return this.header.getSize()+M}write(M,j){if(!this.header)return 0;const O=M;if(M+=this.header.write(M,j),this.simple)M+=this.simple.write(M,j);else for(const T of this.composites)M+=T.write(M,j);return M-O}scale(M){if(!this.header)return;const j=(this.header.xMin+this.header.xMax)/2;if(this.header.scale(j,M),this.simple)this.simple.scale(j,M);else for(const O of this.composites)O.scale(j,M)}}class A{constructor({numberOfContours:M,xMin:j,yMin:O,xMax:T,yMax:R}){this.numberOfContours=M,this.xMin=j,this.yMin=O,this.xMax=T,this.yMax=R}static parse(M,j){return[10,new A({numberOfContours:j.getInt16(M),xMin:j.getInt16(M+2),yMin:j.getInt16(M+4),xMax:j.getInt16(M+6),yMax:j.getInt16(M+8)})]}getSize(){return 10}write(M,j){return j.setInt16(M,this.numberOfContours),j.setInt16(M+2,this.xMin),j.setInt16(M+4,this.yMin),j.setInt16(M+6,this.xMax),j.setInt16(M+8,this.yMax),10}scale(M,j){this.xMin=Math.round(M+(this.xMin-M)*j),this.xMax=Math.round(M+(this.xMax-M)*j)}}class k{constructor({flags:M,xCoordinates:j,yCoordinates:O}){this.xCoordinates=j,this.yCoordinates=O,this.flags=M}}class v{constructor({contours:M,instructions:j}){this.contours=M,this.instructions=j}static parse(M,j,O){const T=[];for(let X=0;X<O;X++){const G=j.getUint16(M);M+=2,T.push(G)}const R=T[O-1]+1,y=j.getUint16(M);M+=2;const p=new Uint8Array(j).slice(M,M+y);M+=y;const P=[];for(let X=0;X<R;M++,X++){let G=j.getUint8(M);if(P.push(G),G&c){const Y=j.getUint8(++M);G^=c;for(let N=0;N<Y;N++)P.push(G);X+=Y}}const E=[];let S=[],F=[],C=[];const b=[];let D=0,U=0;for(let X=0;X<R;X++){const G=P[X];if(G&t){const Y=j.getUint8(M++);U+=G&s?Y:-Y,S.push(U)}else G&s||(U+=j.getInt16(M),M+=2),S.push(U);T[D]===X&&(D++,E.push(S),S=[])}U=0,D=0;for(let X=0;X<R;X++){const G=P[X];if(G&o){const Y=j.getUint8(M++);U+=G&e?Y:-Y,F.push(U)}else G&e||(U+=j.getInt16(M),M+=2),F.push(U);C.push(G&h|G&a),T[D]===X&&(S=E[D],D++,b.push(new k({flags:C,xCoordinates:S,yCoordinates:F})),F=[],C=[])}return new v({contours:b,instructions:p})}getSize(){let M=this.contours.length*2+2+this.instructions.length,j=0,O=0;for(const T of this.contours){M+=T.flags.length;for(let R=0,y=T.xCoordinates.length;R<y;R++){const p=T.xCoordinates[R],P=T.yCoordinates[R];let E=Math.abs(p-j);E>255?M+=2:E>0&&(M+=1),j=p,E=Math.abs(P-O),E>255?M+=2:E>0&&(M+=1),O=P}}return M}write(M,j){const O=M,T=[],R=[],y=[];let p=0,P=0;for(const E of this.contours){for(let S=0,F=E.xCoordinates.length;S<F;S++){let C=E.flags[S];const b=E.xCoordinates[S];let D=b-p;if(D===0)C|=s,T.push(0);else{const X=Math.abs(D);X<=255?(C|=D>=0?t|s:t,T.push(X)):T.push(D)}p=b;const U=E.yCoordinates[S];if(D=U-P,D===0)C|=e,R.push(0);else{const X=Math.abs(D);X<=255?(C|=D>=0?o|e:o,R.push(X)):R.push(D)}P=U,y.push(C)}j.setUint16(M,T.length-1),M+=2}j.setUint16(M,this.instructions.length),M+=2,this.instructions.length&&(new Uint8Array(j.buffer,0,j.buffer.byteLength).set(this.instructions,M),M+=this.instructions.length);for(const E of y)j.setUint8(M++,E);for(let E=0,S=T.length;E<S;E++){const F=T[E],C=y[E];C&t?j.setUint8(M++,F):C&s||(j.setInt16(M,F),M+=2)}for(let E=0,S=R.length;E<S;E++){const F=R[E],C=y[E];C&o?j.setUint8(M++,F):C&e||(j.setInt16(M,F),M+=2)}return M-O}scale(M,j){for(const O of this.contours)if(O.xCoordinates.length!==0)for(let T=0,R=O.xCoordinates.length;T<R;T++)O.xCoordinates[T]=Math.round(M+(O.xCoordinates[T]-M)*j)}}class _{constructor({flags:M,glyphIndex:j,argument1:O,argument2:T,transf:R,instructions:y}){this.flags=M,this.glyphIndex=j,this.argument1=O,this.argument2=T,this.transf=R,this.instructions=y}static parse(M,j){const O=M,T=[];let R=j.getUint16(M);const y=j.getUint16(M+2);M+=4;let p,P;R&r?(R&n?(p=j.getInt16(M),P=j.getInt16(M+2)):(p=j.getUint16(M),P=j.getUint16(M+2)),M+=4,R^=r):(R&n?(p=j.getInt8(M),P=j.getInt8(M+1)):(p=j.getUint8(M),P=j.getUint8(M+1)),M+=2),R&l?(T.push(j.getUint16(M)),M+=2):R&d?(T.push(j.getUint16(M),j.getUint16(M+2)),M+=4):R&i&&(T.push(j.getUint16(M),j.getUint16(M+2),j.getUint16(M+4),j.getUint16(M+6)),M+=8);let E=null;if(R&g){const S=j.getUint16(M);M+=2,E=new Uint8Array(j).slice(M,M+S),M+=S}return[M-O,new _({flags:R,glyphIndex:y,argument1:p,argument2:P,transf:T,instructions:E})]}getSize(){let M=4+this.transf.length*2;return this.flags&g&&(M+=2+this.instructions.length),M+=2,this.flags&2?this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127||(M+=2):this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255||(M+=2),M}write(M,j){const O=M;return this.flags&n?this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127||(this.flags|=r):this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255||(this.flags|=r),j.setUint16(M,this.flags),j.setUint16(M+2,this.glyphIndex),M+=4,this.flags&r?(this.flags&n?(j.setInt16(M,this.argument1),j.setInt16(M+2,this.argument2)):(j.setUint16(M,this.argument1),j.setUint16(M+2,this.argument2)),M+=4):(j.setUint8(M,this.argument1),j.setUint8(M+1,this.argument2),M+=2),this.flags&g&&(j.setUint16(M,this.instructions.length),M+=2,this.instructions.length&&(new Uint8Array(j.buffer,0,j.buffer.byteLength).set(this.instructions,M),M+=this.instructions.length)),M-O}scale(M,j){}}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.OpenTypeFileBuilder=void 0;var t=h(6),o=h(2);function c(l,u,d){l[u]=d>>8&255,l[u+1]=d&255}function s(l,u,d){l[u]=d>>24&255,l[u+1]=d>>16&255,l[u+2]=d>>8&255,l[u+3]=d&255}function e(l,u,d){if(d instanceof Uint8Array)l.set(d,u);else if(typeof d=="string")for(let i=0,g=d.length;i<g;i++)l[u++]=d.charCodeAt(i)&255;else for(let i=0,g=d.length;i<g;i++)l[u++]=d[i]&255}const a=12,r=16;class n{constructor(u){this.sfnt=u,this.tables=Object.create(null)}static getSearchParams(u,d){let i=1,g=0;for(;(i^u)>i;)i<<=1,g++;const x=i*d;return{range:x,entry:g,rangeShift:d*u-x}}toArray(){let u=this.sfnt;const d=this.tables,i=Object.keys(d);i.sort();const g=i.length;let x,m,A,k,v,_=a+g*r;const K=[_];for(x=0;x<g;x++){k=d[i[x]];const O=(k.length+3&-4)>>>0;_+=O,K.push(_)}const M=new Uint8Array(_);for(x=0;x<g;x++)k=d[i[x]],e(M,K[x],k);u==="true"&&(u=(0,o.string32)(65536)),M[0]=u.charCodeAt(0)&255,M[1]=u.charCodeAt(1)&255,M[2]=u.charCodeAt(2)&255,M[3]=u.charCodeAt(3)&255,c(M,4,g);const j=n.getSearchParams(g,16);for(c(M,6,j.range),c(M,8,j.entry),c(M,10,j.rangeShift),_=a,x=0;x<g;x++){v=i[x],M[_]=v.charCodeAt(0)&255,M[_+1]=v.charCodeAt(1)&255,M[_+2]=v.charCodeAt(2)&255,M[_+3]=v.charCodeAt(3)&255;let O=0;for(m=K[x],A=K[x+1];m<A;m+=4){const T=(0,t.readUint32)(M,m);O=O+T>>>0}s(M,_+4,O),s(M,_+8,K[x]),s(M,_+12,d[v].length),_+=r}return M}addTable(u,d){if(u in this.tables)throw new Error("Table "+u+" already exists");this.tables[u]=d}}f.OpenTypeFileBuilder=n},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Type1Font=void 0;var t=h(35),o=h(38),c=h(6),s=h(10),e=h(49),a=h(2);function r(d,i,g){const x=d.length,m=i.length,A=x-m;let k=g,v=!1;for(;k<A;){let _=0;for(;_<m&&d[k+_]===i[_];)_++;if(_>=m){for(k+=_;k<x&&(0,c.isWhiteSpace)(d[k]);)k++;v=!0;break}k++}return{found:v,length:k}}function n(d,i){const g=[101,101,120,101,99],x=d.pos;let m,A,k;try{m=d.getBytes(i),A=m.length}catch{}if(A===i&&(k=r(m,g,i-2*g.length),k.found&&k.length===i))return{stream:new s.Stream(m),length:i};(0,a.warn)('Invalid "Length1" property in Type1 font -- trying to recover.'),d.pos=x;const v=2048;let _;for(;;){const K=d.peekBytes(v);if(k=r(K,g,0),k.length===0)break;if(d.pos+=k.length,k.found){_=d.pos-x;break}}return d.pos=x,_?{stream:new s.Stream(d.getBytes(_)),length:_}:((0,a.warn)('Unable to recover "Length1" property in Type1 font -- using as is.'),{stream:new s.Stream(d.getBytes(i)),length:i})}function l(d,i){const g=d.getBytes();return{stream:new s.Stream(g),length:g.length}}class u{constructor(i,g,x){let A=x.length1;x.length2;let k=g.peekBytes(6);const v=k[0]===128&&k[1]===1;v&&(g.skip(6),A=k[5]<<24|k[4]<<16|k[3]<<8|k[2]);const _=n(g,A);new e.Type1Parser(_.stream,!1,o.SEAC_ANALYSIS_ENABLED).extractFontHeader(x),v&&(k=g.getBytes(6),k[5]<<24|k[4]<<16|k[3]<<8|k[2]);const M=l(g),O=new e.Type1Parser(M.stream,!0,o.SEAC_ANALYSIS_ENABLED).extractFontProgram(x);for(const p in O.properties)x[p]=O.properties[p];const T=O.charstrings,R=this.getType2Charstrings(T),y=this.getType2Subrs(O.subrs);this.charstrings=T,this.data=this.wrap(i,R,this.charstrings,y,x),this.seacs=this.getSeacs(O.charstrings)}get numGlyphs(){return this.charstrings.length+1}getCharset(){const i=[".notdef"];for(const{glyphName:g}of this.charstrings)i.push(g);return i}getGlyphMapping(i){const g=this.charstrings;if(i.composite){const v=Object.create(null);for(let _=0,K=g.length;_<K;_++){const M=i.cMap.charCodeOf(_);v[M]=_+1}return v}const x=[".notdef"];let m,A;for(A=0;A<g.length;A++)x.push(g[A].glyphName);const k=i.builtInEncoding;if(k){m=Object.create(null);for(const v in k)A=x.indexOf(k[v]),A>=0&&(m[v]=A)}return(0,o.type1FontGlyphMapping)(i,m,x)}hasGlyphId(i){return i<0||i>=this.numGlyphs?!1:i===0?!0:this.charstrings[i-1].charstring.length>0}getSeacs(i){const g=[];for(let x=0,m=i.length;x<m;x++){const A=i[x];A.seac&&(g[x+1]=A.seac)}return g}getType2Charstrings(i){const g=[];for(let x=0,m=i.length;x<m;x++)g.push(i[x].charstring);return g}getType2Subrs(i){let g=0;const x=i.length;x<1133?g=107:x<33769?g=1131:g=32768;const m=[];let A;for(A=0;A<g;A++)m.push([11]);for(A=0;A<x;A++)m.push(i[A]);return m}wrap(i,g,x,m,A){const k=new t.CFF;k.header=new t.CFFHeader(1,0,4,4),k.names=[i];const v=new t.CFFTopDict;v.setByName("version",391),v.setByName("Notice",392),v.setByName("FullName",393),v.setByName("FamilyName",394),v.setByName("Weight",395),v.setByName("Encoding",null),v.setByName("FontMatrix",A.fontMatrix),v.setByName("FontBBox",A.bbox),v.setByName("charset",null),v.setByName("CharStrings",null),v.setByName("Private",null),k.topDict=v;const _=new t.CFFStrings;_.add("Version 0.11"),_.add("See original notice"),_.add(i),_.add(i),_.add("Medium"),k.strings=_,k.globalSubrIndex=new t.CFFIndex;const K=g.length,M=[".notdef"];let j,O;for(j=0;j<K;j++){const E=x[j].glyphName;t.CFFStandardStrings.indexOf(E)===-1&&_.add(E),M.push(E)}k.charset=new t.CFFCharset(!1,0,M);const T=new t.CFFIndex;for(T.add([139,14]),j=0;j<K;j++)T.add(g[j]);k.charStrings=T;const R=new t.CFFPrivateDict;R.setByName("Subrs",null);const y=["BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StemSnapH","StemSnapV","BlueShift","BlueFuzz","BlueScale","LanguageGroup","ExpansionFactor","ForceBold","StdHW","StdVW"];for(j=0,O=y.length;j<O;j++){const E=y[j];if(!(E in A.privateData))continue;const S=A.privateData[E];if(Array.isArray(S))for(let F=S.length-1;F>0;F--)S[F]-=S[F-1];R.setByName(E,S)}k.topDict.privateDict=R;const p=new t.CFFIndex;for(j=0,O=m.length;j<O;j++)p.add(m[j]);return R.subrsIndex=p,new t.CFFCompiler(k).compile()}}f.Type1Font=u},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Type1Parser=void 0;var t=h(37),o=h(6),c=h(10),s=h(2);const e=!1,a={hstem:[1],vstem:[3],vmoveto:[4],rlineto:[5],hlineto:[6],vlineto:[7],rrcurveto:[8],callsubr:[10],flex:[12,35],drop:[12,18],endchar:[14],rmoveto:[21],hmoveto:[22],vhcurveto:[30],hvcurveto:[31]};class r{constructor(){this.width=0,this.lsb=0,this.flexing=!1,this.output=[],this.stack=[]}convert(A,k,v){const _=A.length;let K=!1,M,j,O;for(let T=0;T<_;T++){let R=A[T];if(R<32){switch(R===12&&(R=(R<<8)+A[++T]),R){case 1:{this.stack=[];break}case 3:{this.stack=[];break}case 4:if(this.flexing){if(this.stack.length<1){K=!0;break}const S=this.stack.pop();this.stack.push(0,S);break}K=this.executeCommand(1,a.vmoveto);break;case 5:K=this.executeCommand(2,a.rlineto);break;case 6:K=this.executeCommand(1,a.hlineto);break;case 7:K=this.executeCommand(1,a.vlineto);break;case 8:K=this.executeCommand(6,a.rrcurveto);break;case 9:this.stack=[];break;case 10:if(this.stack.length<1){K=!0;break}if(O=this.stack.pop(),!k[O]){K=!0;break}K=this.convert(k[O],k,v);break;case 11:return K;case 13:if(this.stack.length<2){K=!0;break}M=this.stack.pop(),j=this.stack.pop(),this.lsb=j,this.width=M,this.stack.push(M,j),K=this.executeCommand(2,a.hmoveto);break;case 14:this.output.push(a.endchar[0]);break;case 21:if(this.flexing)break;K=this.executeCommand(2,a.rmoveto);break;case 22:if(this.flexing){this.stack.push(0);break}K=this.executeCommand(1,a.hmoveto);break;case 30:K=this.executeCommand(4,a.vhcurveto);break;case 31:K=this.executeCommand(4,a.hvcurveto);break;case 3072:this.stack=[];break;case 3073:{this.stack=[];break}case 3074:{this.stack=[];break}case 3078:if(v){const S=this.stack.at(-5);this.seac=this.stack.splice(-4,4),this.seac[0]+=this.lsb-S,K=this.executeCommand(0,a.endchar)}else K=this.executeCommand(4,a.endchar);break;case 3079:if(this.stack.length<4){K=!0;break}this.stack.pop(),M=this.stack.pop();const y=this.stack.pop();j=this.stack.pop(),this.lsb=j,this.width=M,this.stack.push(M,j,y),K=this.executeCommand(3,a.rmoveto);break;case 3084:if(this.stack.length<2){K=!0;break}const p=this.stack.pop(),P=this.stack.pop();this.stack.push(P/p);break;case 3088:if(this.stack.length<2){K=!0;break}O=this.stack.pop();const E=this.stack.pop();if(O===0&&E===3){const S=this.stack.splice(this.stack.length-17,17);this.stack.push(S[2]+S[0],S[3]+S[1],S[4],S[5],S[6],S[7],S[8],S[9],S[10],S[11],S[12],S[13],S[14]),K=this.executeCommand(13,a.flex,!0),this.flexing=!1,this.stack.push(S[15],S[16])}else O===1&&E===0&&(this.flexing=!0);break;case 3089:break;case 3105:this.stack=[];break;default:(0,s.warn)('Unknown type 1 charstring command of "'+R+'"');break}if(K)break;continue}else R<=246?R-=139:R<=250?R=(R-247)*256+A[++T]+108:R<=254?R=-((R-251)*256)-A[++T]-108:R=(A[++T]&255)<<24|(A[++T]&255)<<16|(A[++T]&255)<<8|(A[++T]&255)<<0;this.stack.push(R)}return K}executeCommand(A,k,v){const _=this.stack.length;if(A>_)return!0;const K=_-A;for(let M=K;M<_;M++){let j=this.stack[M];Number.isInteger(j)?this.output.push(28,j>>8&255,j&255):(j=65536*j|0,this.output.push(255,j>>24&255,j>>16&255,j>>8&255,j&255))}return this.output.push(...k),v?this.stack.splice(K,A):this.stack.length=0,!1}}const n=55665,l=4330;function u(m){return m>=48&&m<=57||m>=65&&m<=70||m>=97&&m<=102}function d(m,A,k){if(k>=m.length)return new Uint8Array(0);const v=52845,_=22719;let K=A|0,M,j;for(M=0;M<k;M++)K=(m[M]+K)*v+_&65535;const O=m.length-k,T=new Uint8Array(O);for(M=k,j=0;j<O;M++,j++){const R=m[M];T[j]=R^K>>8,K=(R+K)*v+_&65535}return T}function i(m,A,k){let K=A|0;const M=m.length,j=M>>>1,O=new Uint8Array(j);let T,R;for(T=0,R=0;T<M;T++){const y=m[T];if(!u(y))continue;T++;let p;for(;T<M&&!u(p=m[T]);)T++;if(T<M){const P=parseInt(String.fromCharCode(y,p),16);O[R++]=P^K>>8,K=(P+K)*52845+22719&65535}}return O.slice(k,R)}function g(m){return m===47||m===91||m===93||m===123||m===125||m===40||m===41}class x{constructor(A,k,v){if(k){const _=A.getBytes(),K=!((u(_[0])||(0,o.isWhiteSpace)(_[0]))&&u(_[1])&&u(_[2])&&u(_[3])&&u(_[4])&&u(_[5])&&u(_[6])&&u(_[7]));A=new c.Stream(K?d(_,n,4):i(_,n,4))}this.seacAnalysisEnabled=!!v,this.stream=A,this.nextChar()}readNumberArray(){this.getToken();const A=[];for(;;){const k=this.getToken();if(k===null||k==="]"||k==="}")break;A.push(parseFloat(k||0))}return A}readNumber(){const A=this.getToken();return parseFloat(A||0)}readInt(){const A=this.getToken();return parseInt(A||0,10)|0}readBoolean(){return this.getToken()==="true"?1:0}nextChar(){return this.currentChar=this.stream.getByte()}prevChar(){return this.stream.skip(-2),this.currentChar=this.stream.getByte()}getToken(){let A=!1,k=this.currentChar;for(;;){if(k===-1)return null;if(A)(k===10||k===13)&&(A=!1);else if(k===37)A=!0;else if(!(0,o.isWhiteSpace)(k))break;k=this.nextChar()}if(g(k))return this.nextChar(),String.fromCharCode(k);let v="";do v+=String.fromCharCode(k),k=this.nextChar();while(k>=0&&!(0,o.isWhiteSpace)(k)&&!g(k));return v}readCharStrings(A,k){return k===-1?A:d(A,l,k)}extractFontProgram(A){const k=this.stream,v=[],_=[],K=Object.create(null);K.lenIV=4;const M={subrs:[],charstrings:[],properties:{privateData:K}};let j,O,T,R;for(;(j=this.getToken())!==null;)if(j==="/")switch(j=this.getToken(),j){case"CharStrings":for(this.getToken(),this.getToken(),this.getToken(),this.getToken();j=this.getToken(),!(j===null||j==="end");){if(j!=="/")continue;const p=this.getToken();O=this.readInt(),this.getToken(),T=O>0?k.getBytes(O):new Uint8Array(0),R=M.properties.privateData.lenIV;const P=this.readCharStrings(T,R);this.nextChar(),j=this.getToken(),j==="noaccess"?this.getToken():j==="/"&&this.prevChar(),_.push({glyph:p,encoded:P})}break;case"Subrs":for(this.readInt(),this.getToken();this.getToken()==="dup";){const p=this.readInt();O=this.readInt(),this.getToken(),T=O>0?k.getBytes(O):new Uint8Array(0),R=M.properties.privateData.lenIV;const P=this.readCharStrings(T,R);this.nextChar(),j=this.getToken(),j==="noaccess"&&this.getToken(),v[p]=P}break;case"BlueValues":case"OtherBlues":case"FamilyBlues":case"FamilyOtherBlues":const y=this.readNumberArray();y.length>0&&y.length%2===0&&e&&(M.properties.privateData[j]=y);break;case"StemSnapH":case"StemSnapV":M.properties.privateData[j]=this.readNumberArray();break;case"StdHW":case"StdVW":M.properties.privateData[j]=this.readNumberArray()[0];break;case"BlueShift":case"lenIV":case"BlueFuzz":case"BlueScale":case"LanguageGroup":case"ExpansionFactor":M.properties.privateData[j]=this.readNumber();break;case"ForceBold":M.properties.privateData[j]=this.readBoolean();break}for(const{encoded:y,glyph:p}of _){const P=new r,E=P.convert(y,v,this.seacAnalysisEnabled);let S=P.output;E&&(S=[14]);const F={glyphName:p,charstring:S,width:P.width,lsb:P.lsb,seac:P.seac};if(p===".notdef"?M.charstrings.unshift(F):M.charstrings.push(F),A.builtInEncoding){const C=A.builtInEncoding.indexOf(p);C>-1&&A.widths[C]===void 0&&C>=A.firstChar&&C<=A.lastChar&&(A.widths[C]=P.width)}}return M}extractFontHeader(A){let k;for(;(k=this.getToken())!==null;)if(k==="/")switch(k=this.getToken(),k){case"FontMatrix":const v=this.readNumberArray();A.fontMatrix=v;break;case"Encoding":const _=this.getToken();let K;if(!/^\d+$/.test(_))K=(0,t.getEncoding)(_);else{K=[];const j=parseInt(_,10)|0;this.getToken();for(let O=0;O<j;O++){for(k=this.getToken();k!=="dup"&&k!=="def";)if(k=this.getToken(),k===null)return;if(k==="def")break;const T=this.readInt();this.getToken();const R=this.getToken();K[T]=R,this.getToken()}}A.builtInEncoding=K;break;case"FontBBox":const M=this.readNumberArray();A.ascent=Math.max(M[3],M[1]),A.descent=Math.min(M[1],M[3]),A.ascentScaled=!0;break}}}f.Type1Parser=x},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Pattern=void 0,f.getTilingPatternIR=g;var t=h(2),o=h(7),c=h(14),s=h(6);const e={FUNCTION_BASED:1,AXIAL:2,RADIAL:3,FREE_FORM_MESH:4,LATTICE_FORM_MESH:5,COONS_PATCH_MESH:6,TENSOR_PATCH_MESH:7};class a{constructor(){(0,t.unreachable)("Cannot initialize Pattern.")}static parseShading(m,A,k,v,_,K){const M=m instanceof o.BaseStream?m.dict:m,j=M.get("ShadingType");try{switch(j){case e.AXIAL:case e.RADIAL:return new n(M,A,k,_,K);case e.FREE_FORM_MESH:case e.LATTICE_FORM_MESH:case e.COONS_PATCH_MESH:case e.TENSOR_PATCH_MESH:return new d(m,A,k,_,K);default:throw new t.FormatError("Unsupported ShadingType: "+j)}}catch(O){if(O instanceof s.MissingDataException)throw O;return v.send("UnsupportedFeature",{featureId:t.UNSUPPORTED_FEATURES.shadingPattern}),(0,t.warn)(O),new i}}}f.Pattern=a;class r{static get SMALL_NUMBER(){return(0,t.shadow)(this,"SMALL_NUMBER",1e-6)}constructor(){this.constructor===r&&(0,t.unreachable)("Cannot initialize BaseShading.")}getIR(){(0,t.unreachable)("Abstract method `getIR` called.")}}class n extends r{constructor(m,A,k,v,_){super(),this.coordsArr=m.getArray("Coords"),this.shadingType=m.get("ShadingType");const K=c.ColorSpace.parse({cs:m.getRaw("CS")||m.getRaw("ColorSpace"),xref:A,resources:k,pdfFunctionFactory:v,localColorSpaceCache:_}),M=m.getArray("BBox");Array.isArray(M)&&M.length===4?this.bbox=t.Util.normalizeRect(M):this.bbox=null;let j=0,O=1;if(m.has("Domain")){const U=m.getArray("Domain");j=U[0],O=U[1]}let T=!1,R=!1;if(m.has("Extend")){const U=m.getArray("Extend");T=U[0],R=U[1]}if(this.shadingType===e.RADIAL&&(!T||!R)){const[U,X,G,Y,N,I]=this.coordsArr,L=Math.hypot(U-Y,X-N);G<=I+L&&I<=G+L&&(0,t.warn)("Unsupported radial gradient.")}this.extendStart=T,this.extendEnd=R;const y=m.getRaw("Function"),p=v.createFromArray(y),P=10,E=(O-j)/P,S=this.colorStops=[];if(j>=O||E<=0){(0,t.info)("Bad shading domain.");return}const F=new Float32Array(K.numComps),C=new Float32Array(1);let b;for(let U=0;U<=P;U++){C[0]=j+U*E,p(C,0,F,0),b=K.getRgb(F,0);const X=t.Util.makeHexColor(b[0],b[1],b[2]);S.push([U/P,X])}let D="transparent";m.has("Background")&&(b=K.getRgb(m.get("Background"),0),D=t.Util.makeHexColor(b[0],b[1],b[2])),T||(S.unshift([0,D]),S[1][0]+=r.SMALL_NUMBER),R||(S.at(-1)[0]-=r.SMALL_NUMBER,S.push([1,D])),this.colorStops=S}getIR(){const m=this.coordsArr,A=this.shadingType;let k,v,_,K,M;return A===e.AXIAL?(v=[m[0],m[1]],_=[m[2],m[3]],K=null,M=null,k="axial"):A===e.RADIAL?(v=[m[0],m[1]],_=[m[3],m[4]],K=m[2],M=m[5],k="radial"):(0,t.unreachable)(`getPattern type unknown: ${A}`),["RadialAxial",k,this.bbox,this.colorStops,v,_,K,M]}}class l{constructor(m,A){this.stream=m,this.context=A,this.buffer=0,this.bufferLength=0;const k=A.numComps;this.tmpCompsBuf=new Float32Array(k);const v=A.colorSpace.numComps;this.tmpCsCompsBuf=A.colorFn?new Float32Array(v):this.tmpCompsBuf}get hasData(){if(this.stream.end)return this.stream.pos<this.stream.end;if(this.bufferLength>0)return!0;const m=this.stream.getByte();return m<0?!1:(this.buffer=m,this.bufferLength=8,!0)}readBits(m){let A=this.buffer,k=this.bufferLength;if(m===32){if(k===0)return(this.stream.getByte()<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte())>>>0;A=A<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte();const v=this.stream.getByte();return this.buffer=v&(1<<k)-1,(A<<8-k|(v&255)>>k)>>>0}if(m===8&&k===0)return this.stream.getByte();for(;k<m;)A=A<<8|this.stream.getByte(),k+=8;return k-=m,this.bufferLength=k,this.buffer=A&(1<<k)-1,A>>k}align(){this.buffer=0,this.bufferLength=0}readFlag(){return this.readBits(this.context.bitsPerFlag)}readCoordinate(){const m=this.context.bitsPerCoordinate,A=this.readBits(m),k=this.readBits(m),v=this.context.decode,_=m<32?1/((1<<m)-1):23283064365386963e-26;return[A*_*(v[1]-v[0])+v[0],k*_*(v[3]-v[2])+v[2]]}readComponents(){const m=this.context.numComps,A=this.context.bitsPerComponent,k=A<32?1/((1<<A)-1):23283064365386963e-26,v=this.context.decode,_=this.tmpCompsBuf;for(let M=0,j=4;M<m;M++,j+=2){const O=this.readBits(A);_[M]=O*k*(v[j+1]-v[j])+v[j]}const K=this.tmpCsCompsBuf;return this.context.colorFn&&this.context.colorFn(_,0,K,0),this.context.colorSpace.getRgb(K,0)}}const u=function(){function m(k){const v=[];for(let _=0;_<=k;_++){const K=_/k,M=1-K;v.push(new Float32Array([M*M*M,3*K*M*M,3*K*K*M,K*K*K]))}return v}const A=[];return function(k){return A[k]||(A[k]=m(k)),A[k]}}();class d extends r{static get MIN_SPLIT_PATCH_CHUNKS_AMOUNT(){return(0,t.shadow)(this,"MIN_SPLIT_PATCH_CHUNKS_AMOUNT",3)}static get MAX_SPLIT_PATCH_CHUNKS_AMOUNT(){return(0,t.shadow)(this,"MAX_SPLIT_PATCH_CHUNKS_AMOUNT",20)}static get TRIANGLE_DENSITY(){return(0,t.shadow)(this,"TRIANGLE_DENSITY",20)}constructor(m,A,k,v,_){if(super(),!(m instanceof o.BaseStream))throw new t.FormatError("Mesh data is not a stream");const K=m.dict;this.shadingType=K.get("ShadingType");const M=K.getArray("BBox");Array.isArray(M)&&M.length===4?this.bbox=t.Util.normalizeRect(M):this.bbox=null;const j=c.ColorSpace.parse({cs:K.getRaw("CS")||K.getRaw("ColorSpace"),xref:A,resources:k,pdfFunctionFactory:v,localColorSpaceCache:_});this.background=K.has("Background")?j.getRgb(K.get("Background"),0):null;const O=K.getRaw("Function"),T=O?v.createFromArray(O):null;this.coords=[],this.colors=[],this.figures=[];const R={bitsPerCoordinate:K.get("BitsPerCoordinate"),bitsPerComponent:K.get("BitsPerComponent"),bitsPerFlag:K.get("BitsPerFlag"),decode:K.getArray("Decode"),colorFn:T,colorSpace:j,numComps:T?1:j.numComps},y=new l(m,R);let p=!1;switch(this.shadingType){case e.FREE_FORM_MESH:this._decodeType4Shading(y);break;case e.LATTICE_FORM_MESH:const P=K.get("VerticesPerRow")|0;if(P<2)throw new t.FormatError("Invalid VerticesPerRow");this._decodeType5Shading(y,P);break;case e.COONS_PATCH_MESH:this._decodeType6Shading(y),p=!0;break;case e.TENSOR_PATCH_MESH:this._decodeType7Shading(y),p=!0;break;default:(0,t.unreachable)("Unsupported mesh type.");break}if(p){this._updateBounds();for(let P=0,E=this.figures.length;P<E;P++)this._buildFigureFromPatch(P)}this._updateBounds(),this._packData()}_decodeType4Shading(m){const A=this.coords,k=this.colors,v=[];let _=0;for(;m.hasData;){const K=m.readFlag(),M=m.readCoordinate(),j=m.readComponents();if(_===0){if(!(0<=K&&K<=2))throw new t.FormatError("Unknown type4 flag");switch(K){case 0:_=3;break;case 1:v.push(v.at(-2),v.at(-1)),_=1;break;case 2:v.push(v.at(-3),v.at(-1)),_=1;break}}v.push(A.length),A.push(M),k.push(j),_--,m.align()}this.figures.push({type:"triangles",coords:new Int32Array(v),colors:new Int32Array(v)})}_decodeType5Shading(m,A){const k=this.coords,v=this.colors,_=[];for(;m.hasData;){const K=m.readCoordinate(),M=m.readComponents();_.push(k.length),k.push(K),v.push(M)}this.figures.push({type:"lattice",coords:new Int32Array(_),colors:new Int32Array(_),verticesPerRow:A})}_decodeType6Shading(m){const A=this.coords,k=this.colors,v=new Int32Array(16),_=new Int32Array(4);for(;m.hasData;){const K=m.readFlag();if(!(0<=K&&K<=3))throw new t.FormatError("Unknown type6 flag");const M=A.length;for(let p=0,P=K!==0?8:12;p<P;p++)A.push(m.readCoordinate());const j=k.length;for(let p=0,P=K!==0?2:4;p<P;p++)k.push(m.readComponents());let O,T,R,y;switch(K){case 0:v[12]=M+3,v[13]=M+4,v[14]=M+5,v[15]=M+6,v[8]=M+2,v[11]=M+7,v[4]=M+1,v[7]=M+8,v[0]=M,v[1]=M+11,v[2]=M+10,v[3]=M+9,_[2]=j+1,_[3]=j+2,_[0]=j,_[1]=j+3;break;case 1:O=v[12],T=v[13],R=v[14],y=v[15],v[12]=y,v[13]=M+0,v[14]=M+1,v[15]=M+2,v[8]=R,v[11]=M+3,v[4]=T,v[7]=M+4,v[0]=O,v[1]=M+7,v[2]=M+6,v[3]=M+5,O=_[2],T=_[3],_[2]=T,_[3]=j,_[0]=O,_[1]=j+1;break;case 2:O=v[15],T=v[11],v[12]=v[3],v[13]=M+0,v[14]=M+1,v[15]=M+2,v[8]=v[7],v[11]=M+3,v[4]=T,v[7]=M+4,v[0]=O,v[1]=M+7,v[2]=M+6,v[3]=M+5,O=_[3],_[2]=_[1],_[3]=j,_[0]=O,_[1]=j+1;break;case 3:v[12]=v[0],v[13]=M+0,v[14]=M+1,v[15]=M+2,v[8]=v[1],v[11]=M+3,v[4]=v[2],v[7]=M+4,v[0]=v[3],v[1]=M+7,v[2]=M+6,v[3]=M+5,_[2]=_[0],_[3]=j,_[0]=_[1],_[1]=j+1;break}v[5]=A.length,A.push([(-4*A[v[0]][0]-A[v[15]][0]+6*(A[v[4]][0]+A[v[1]][0])-2*(A[v[12]][0]+A[v[3]][0])+3*(A[v[13]][0]+A[v[7]][0]))/9,(-4*A[v[0]][1]-A[v[15]][1]+6*(A[v[4]][1]+A[v[1]][1])-2*(A[v[12]][1]+A[v[3]][1])+3*(A[v[13]][1]+A[v[7]][1]))/9]),v[6]=A.length,A.push([(-4*A[v[3]][0]-A[v[12]][0]+6*(A[v[2]][0]+A[v[7]][0])-2*(A[v[0]][0]+A[v[15]][0])+3*(A[v[4]][0]+A[v[14]][0]))/9,(-4*A[v[3]][1]-A[v[12]][1]+6*(A[v[2]][1]+A[v[7]][1])-2*(A[v[0]][1]+A[v[15]][1])+3*(A[v[4]][1]+A[v[14]][1]))/9]),v[9]=A.length,A.push([(-4*A[v[12]][0]-A[v[3]][0]+6*(A[v[8]][0]+A[v[13]][0])-2*(A[v[0]][0]+A[v[15]][0])+3*(A[v[11]][0]+A[v[1]][0]))/9,(-4*A[v[12]][1]-A[v[3]][1]+6*(A[v[8]][1]+A[v[13]][1])-2*(A[v[0]][1]+A[v[15]][1])+3*(A[v[11]][1]+A[v[1]][1]))/9]),v[10]=A.length,A.push([(-4*A[v[15]][0]-A[v[0]][0]+6*(A[v[11]][0]+A[v[14]][0])-2*(A[v[12]][0]+A[v[3]][0])+3*(A[v[2]][0]+A[v[8]][0]))/9,(-4*A[v[15]][1]-A[v[0]][1]+6*(A[v[11]][1]+A[v[14]][1])-2*(A[v[12]][1]+A[v[3]][1])+3*(A[v[2]][1]+A[v[8]][1]))/9]),this.figures.push({type:"patch",coords:new Int32Array(v),colors:new Int32Array(_)})}}_decodeType7Shading(m){const A=this.coords,k=this.colors,v=new Int32Array(16),_=new Int32Array(4);for(;m.hasData;){const K=m.readFlag();if(!(0<=K&&K<=3))throw new t.FormatError("Unknown type7 flag");const M=A.length;for(let p=0,P=K!==0?12:16;p<P;p++)A.push(m.readCoordinate());const j=k.length;for(let p=0,P=K!==0?2:4;p<P;p++)k.push(m.readComponents());let O,T,R,y;switch(K){case 0:v[12]=M+3,v[13]=M+4,v[14]=M+5,v[15]=M+6,v[8]=M+2,v[9]=M+13,v[10]=M+14,v[11]=M+7,v[4]=M+1,v[5]=M+12,v[6]=M+15,v[7]=M+8,v[0]=M,v[1]=M+11,v[2]=M+10,v[3]=M+9,_[2]=j+1,_[3]=j+2,_[0]=j,_[1]=j+3;break;case 1:O=v[12],T=v[13],R=v[14],y=v[15],v[12]=y,v[13]=M+0,v[14]=M+1,v[15]=M+2,v[8]=R,v[9]=M+9,v[10]=M+10,v[11]=M+3,v[4]=T,v[5]=M+8,v[6]=M+11,v[7]=M+4,v[0]=O,v[1]=M+7,v[2]=M+6,v[3]=M+5,O=_[2],T=_[3],_[2]=T,_[3]=j,_[0]=O,_[1]=j+1;break;case 2:O=v[15],T=v[11],v[12]=v[3],v[13]=M+0,v[14]=M+1,v[15]=M+2,v[8]=v[7],v[9]=M+9,v[10]=M+10,v[11]=M+3,v[4]=T,v[5]=M+8,v[6]=M+11,v[7]=M+4,v[0]=O,v[1]=M+7,v[2]=M+6,v[3]=M+5,O=_[3],_[2]=_[1],_[3]=j,_[0]=O,_[1]=j+1;break;case 3:v[12]=v[0],v[13]=M+0,v[14]=M+1,v[15]=M+2,v[8]=v[1],v[9]=M+9,v[10]=M+10,v[11]=M+3,v[4]=v[2],v[5]=M+8,v[6]=M+11,v[7]=M+4,v[0]=v[3],v[1]=M+7,v[2]=M+6,v[3]=M+5,_[2]=_[0],_[3]=j,_[0]=_[1],_[1]=j+1;break}this.figures.push({type:"patch",coords:new Int32Array(v),colors:new Int32Array(_)})}}_buildFigureFromPatch(m){const A=this.figures[m];(0,t.assert)(A.type==="patch","Unexpected patch mesh figure");const k=this.coords,v=this.colors,_=A.coords,K=A.colors,M=Math.min(k[_[0]][0],k[_[3]][0],k[_[12]][0],k[_[15]][0]),j=Math.min(k[_[0]][1],k[_[3]][1],k[_[12]][1],k[_[15]][1]),O=Math.max(k[_[0]][0],k[_[3]][0],k[_[12]][0],k[_[15]][0]),T=Math.max(k[_[0]][1],k[_[3]][1],k[_[12]][1],k[_[15]][1]);let R=Math.ceil((O-M)*d.TRIANGLE_DENSITY/(this.bounds[2]-this.bounds[0]));R=Math.max(d.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(d.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,R));let y=Math.ceil((T-j)*d.TRIANGLE_DENSITY/(this.bounds[3]-this.bounds[1]));y=Math.max(d.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(d.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,y));const p=R+1,P=new Int32Array((y+1)*p),E=new Int32Array((y+1)*p);let S=0;const F=new Uint8Array(3),C=new Uint8Array(3),b=v[K[0]],D=v[K[1]],U=v[K[2]],X=v[K[3]],G=u(y),Y=u(R);for(let N=0;N<=y;N++){F[0]=(b[0]*(y-N)+U[0]*N)/y|0,F[1]=(b[1]*(y-N)+U[1]*N)/y|0,F[2]=(b[2]*(y-N)+U[2]*N)/y|0,C[0]=(D[0]*(y-N)+X[0]*N)/y|0,C[1]=(D[1]*(y-N)+X[1]*N)/y|0,C[2]=(D[2]*(y-N)+X[2]*N)/y|0;for(let I=0;I<=R;I++,S++){if((N===0||N===y)&&(I===0||I===R))continue;let L=0,$=0,W=0;for(let B=0;B<=3;B++)for(let H=0;H<=3;H++,W++){const q=G[N][B]*Y[I][H];L+=k[_[W]][0]*q,$+=k[_[W]][1]*q}P[S]=k.length,k.push([L,$]),E[S]=v.length;const z=new Uint8Array(3);z[0]=(F[0]*(R-I)+C[0]*I)/R|0,z[1]=(F[1]*(R-I)+C[1]*I)/R|0,z[2]=(F[2]*(R-I)+C[2]*I)/R|0,v.push(z)}}P[0]=_[0],E[0]=K[0],P[R]=_[3],E[R]=K[1],P[p*y]=_[12],E[p*y]=K[2],P[p*y+R]=_[15],E[p*y+R]=K[3],this.figures[m]={type:"lattice",coords:P,colors:E,verticesPerRow:p}}_updateBounds(){let m=this.coords[0][0],A=this.coords[0][1],k=m,v=A;for(let _=1,K=this.coords.length;_<K;_++){const M=this.coords[_][0],j=this.coords[_][1];m=m>M?M:m,A=A>j?j:A,k=k<M?M:k,v=v<j?j:v}this.bounds=[m,A,k,v]}_packData(){let m,A,k,v;const _=this.coords,K=new Float32Array(_.length*2);for(m=0,k=0,A=_.length;m<A;m++){const T=_[m];K[k++]=T[0],K[k++]=T[1]}this.coords=K;const M=this.colors,j=new Uint8Array(M.length*3);for(m=0,k=0,A=M.length;m<A;m++){const T=M[m];j[k++]=T[0],j[k++]=T[1],j[k++]=T[2]}this.colors=j;const O=this.figures;for(m=0,A=O.length;m<A;m++){const T=O[m],R=T.coords,y=T.colors;for(k=0,v=R.length;k<v;k++)R[k]*=2,y[k]*=3}}getIR(){return["Mesh",this.shadingType,this.coords,this.colors,this.figures,this.bounds,this.bbox,this.background]}}class i extends r{getIR(){return["Dummy"]}}function g(x,m,A){const k=m.getArray("Matrix"),v=t.Util.normalizeRect(m.getArray("BBox")),_=m.get("XStep"),K=m.get("YStep"),M=m.get("PaintType"),j=m.get("TilingType");if(v[2]-v[0]===0||v[3]-v[1]===0)throw new t.FormatError(`Invalid getTilingPatternIR /BBox array: [${v}].`);return["TilingPattern",A,x,k,v,_,K,M,j]}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.getXfaFontDict=i,f.getXfaFontName=u;var t=h(52),o=h(5),c=h(53),s=h(54),e=h(55),a=h(56),r=h(6),n=h(38);const l=(0,r.getLookupTableFactory)(function(g){g["MyriadPro-Regular"]=g["PdfJS-Fallback-Regular"]={name:"LiberationSans-Regular",factors:e.MyriadProRegularFactors,baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping,metrics:e.MyriadProRegularMetrics},g["MyriadPro-Bold"]=g["PdfJS-Fallback-Bold"]={name:"LiberationSans-Bold",factors:e.MyriadProBoldFactors,baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping,metrics:e.MyriadProBoldMetrics},g["MyriadPro-It"]=g["MyriadPro-Italic"]=g["PdfJS-Fallback-Italic"]={name:"LiberationSans-Italic",factors:e.MyriadProItalicFactors,baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping,metrics:e.MyriadProItalicMetrics},g["MyriadPro-BoldIt"]=g["MyriadPro-BoldItalic"]=g["PdfJS-Fallback-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:e.MyriadProBoldItalicFactors,baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping,metrics:e.MyriadProBoldItalicMetrics},g.ArialMT=g.Arial=g["Arial-Regular"]={name:"LiberationSans-Regular",baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping},g["Arial-BoldMT"]=g["Arial-Bold"]={name:"LiberationSans-Bold",baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping},g["Arial-ItalicMT"]=g["Arial-Italic"]={name:"LiberationSans-Italic",baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping},g["Arial-BoldItalicMT"]=g["Arial-BoldItalic"]={name:"LiberationSans-BoldItalic",baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping},g["Calibri-Regular"]={name:"LiberationSans-Regular",factors:t.CalibriRegularFactors,baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping,metrics:t.CalibriRegularMetrics},g["Calibri-Bold"]={name:"LiberationSans-Bold",factors:t.CalibriBoldFactors,baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping,metrics:t.CalibriBoldMetrics},g["Calibri-Italic"]={name:"LiberationSans-Italic",factors:t.CalibriItalicFactors,baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping,metrics:t.CalibriItalicMetrics},g["Calibri-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:t.CalibriBoldItalicFactors,baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping,metrics:t.CalibriBoldItalicMetrics},g["Segoeui-Regular"]={name:"LiberationSans-Regular",factors:a.SegoeuiRegularFactors,baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping,metrics:a.SegoeuiRegularMetrics},g["Segoeui-Bold"]={name:"LiberationSans-Bold",factors:a.SegoeuiBoldFactors,baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping,metrics:a.SegoeuiBoldMetrics},g["Segoeui-Italic"]={name:"LiberationSans-Italic",factors:a.SegoeuiItalicFactors,baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping,metrics:a.SegoeuiItalicMetrics},g["Segoeui-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:a.SegoeuiBoldItalicFactors,baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping,metrics:a.SegoeuiBoldItalicMetrics},g["Helvetica-Regular"]=g.Helvetica={name:"LiberationSans-Regular",factors:c.HelveticaRegularFactors,baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping,metrics:c.HelveticaRegularMetrics},g["Helvetica-Bold"]={name:"LiberationSans-Bold",factors:c.HelveticaBoldFactors,baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping,metrics:c.HelveticaBoldMetrics},g["Helvetica-Italic"]={name:"LiberationSans-Italic",factors:c.HelveticaItalicFactors,baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping,metrics:c.HelveticaItalicMetrics},g["Helvetica-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:c.HelveticaBoldItalicFactors,baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping,metrics:c.HelveticaBoldItalicMetrics}});function u(g){const x=(0,n.normalizeFontName)(g);return l()[x]}function d(g){const x=u(g);if(!x)return null;const{baseWidths:m,baseMapping:A,factors:k}=x;let v;k?v=m.map((j,O)=>j*k[O]):v=m;let _=-2,K;const M=[];for(const[j,O]of A.map((T,R)=>[T,R]).sort(([T],[R])=>T-R))j!==-1&&(j===_+1?(K.push(v[O]),_+=1):(_=j,K=[v[O]],M.push(j,K)));return M}function i(g){const x=d(g),m=new o.Dict(null);m.set("BaseFont",o.Name.get(g)),m.set("Type",o.Name.get("Font")),m.set("Subtype",o.Name.get("CIDFontType2")),m.set("Encoding",o.Name.get("Identity-H")),m.set("CIDToGIDMap",o.Name.get("Identity")),m.set("W",x),m.set("FirstChar",x[0]),m.set("LastChar",x.at(-2)+x.at(-1).length-1);const A=new o.Dict(null);m.set("FontDescriptor",A);const k=new o.Dict(null);return k.set("Ordering","Identity"),k.set("Registry","Adobe"),k.set("Supplement",0),m.set("CIDSystemInfo",k),m}},(ge,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.CalibriRegularMetrics=f.CalibriRegularFactors=f.CalibriItalicMetrics=f.CalibriItalicFactors=f.CalibriBoldMetrics=f.CalibriBoldItalicMetrics=f.CalibriBoldItalicFactors=f.CalibriBoldFactors=void 0;const h=[1.3877,1,1,1,.97801,.92482,.89552,.91133,.81988,.97566,.98152,.93548,.93548,1.2798,.85284,.92794,1,.96134,1.54657,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.82845,.82845,.85284,.85284,.85284,.75859,.92138,.83908,.7762,.73293,.87289,.73133,.7514,.81921,.87356,.95958,.59526,.75727,.69225,1.04924,.9121,.86943,.79795,.88198,.77958,.70864,.81055,.90399,.88653,.96017,.82577,.77892,.78257,.97507,1.54657,.97507,.85284,.89552,.90176,.88762,.8785,.75241,.8785,.90518,.95015,.77618,.8785,.88401,.91916,.86304,.88401,.91488,.8785,.8801,.8785,.8785,.91343,.7173,1.04106,.8785,.85075,.95794,.82616,.85162,.79492,.88331,1.69808,.88331,.85284,.97801,.89552,.91133,.89552,.91133,1.7801,.89552,1.24487,1.13254,1.12401,.96839,.85284,.68787,.70645,.85592,.90747,1.01466,1.0088,.90323,1,1.07463,1,.91056,.75806,1.19118,.96839,.78864,.82845,.84133,.75859,.83908,.83908,.83908,.83908,.83908,.83908,.77539,.73293,.73133,.73133,.73133,.73133,.95958,.95958,.95958,.95958,.88506,.9121,.86943,.86943,.86943,.86943,.86943,.85284,.87508,.90399,.90399,.90399,.90399,.77892,.79795,.90807,.88762,.88762,.88762,.88762,.88762,.88762,.8715,.75241,.90518,.90518,.90518,.90518,.88401,.88401,.88401,.88401,.8785,.8785,.8801,.8801,.8801,.8801,.8801,.90747,.89049,.8785,.8785,.8785,.8785,.85162,.8785,.85162,.83908,.88762,.83908,.88762,.83908,.88762,.73293,.75241,.73293,.75241,.73293,.75241,.73293,.75241,.87289,.83016,.88506,.93125,.73133,.90518,.73133,.90518,.73133,.90518,.73133,.90518,.73133,.90518,.81921,.77618,.81921,.77618,.81921,.77618,1,1,.87356,.8785,.91075,.89608,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.76229,.90167,.59526,.91916,1,1,.86304,.69225,.88401,1,1,.70424,.79468,.91926,.88175,.70823,.94903,.9121,.8785,1,1,.9121,.8785,.87802,.88656,.8785,.86943,.8801,.86943,.8801,.86943,.8801,.87402,.89291,.77958,.91343,1,1,.77958,.91343,.70864,.7173,.70864,.7173,.70864,.7173,.70864,.7173,1,1,.81055,.75841,.81055,1.06452,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.96017,.95794,.77892,.85162,.77892,.78257,.79492,.78257,.79492,.78257,.79492,.9297,.56892,.83908,.88762,.77539,.8715,.87508,.89049,1,1,.81055,1.04106,1.20528,1.20528,1,1.15543,.70674,.98387,.94721,1.33431,1.45894,.95161,1.06303,.83908,.80352,.57184,.6965,.56289,.82001,.56029,.81235,1.02988,.83908,.7762,.68156,.80367,.73133,.78257,.87356,.86943,.95958,.75727,.89019,1.04924,.9121,.7648,.86943,.87356,.79795,.78275,.81055,.77892,.9762,.82577,.99819,.84896,.95958,.77892,.96108,1.01407,.89049,1.02988,.94211,.96108,.8936,.84021,.87842,.96399,.79109,.89049,1.00813,1.02988,.86077,.87445,.92099,.84723,.86513,.8801,.75638,.85714,.78216,.79586,.87965,.94211,.97747,.78287,.97926,.84971,1.02988,.94211,.8801,.94211,.84971,.73133,1,1,1,1,1,1,1,1,1,1,1,1,.90264,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.90518,1,1,1,1,1,1,1,1,1,1,1,1,.90548,1,1,1,1,1,1,.96017,.95794,.96017,.95794,.96017,.95794,.77892,.85162,1,1,.89552,.90527,1,.90363,.92794,.92794,.92794,.92794,.87012,.87012,.87012,.89552,.89552,1.42259,.71143,1.06152,1,1,1.03372,1.03372,.97171,1.4956,2.2807,.93835,.83406,.91133,.84107,.91133,1,1,1,.72021,1,1.23108,.83489,.88525,.88525,.81499,.90527,1.81055,.90527,1.81055,1.31006,1.53711,.94434,1.08696,1,.95018,.77192,.85284,.90747,1.17534,.69825,.9716,1.37077,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.08004,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,.90727,.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];f.CalibriBoldFactors=h;const t={lineHeight:1.2207,lineGap:.2207};f.CalibriBoldMetrics=t;const o=[1.3877,1,1,1,.97801,.92482,.89552,.91133,.81988,.97566,.98152,.93548,.93548,1.2798,.85284,.92794,1,.96134,1.56239,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.82845,.82845,.85284,.85284,.85284,.75859,.92138,.83908,.7762,.71805,.87289,.73133,.7514,.81921,.87356,.95958,.59526,.75727,.69225,1.04924,.90872,.85938,.79795,.87068,.77958,.69766,.81055,.90399,.88653,.96068,.82577,.77892,.78257,.97507,1.529,.97507,.85284,.89552,.90176,.94908,.86411,.74012,.86411,.88323,.95015,.86411,.86331,.88401,.91916,.86304,.88401,.9039,.86331,.86331,.86411,.86411,.90464,.70852,1.04106,.86331,.84372,.95794,.82616,.84548,.79492,.88331,1.69808,.88331,.85284,.97801,.89552,.91133,.89552,.91133,1.7801,.89552,1.24487,1.13254,1.19129,.96839,.85284,.68787,.70645,.85592,.90747,1.01466,1.0088,.90323,1,1.07463,1,.91056,.75806,1.19118,.96839,.78864,.82845,.84133,.75859,.83908,.83908,.83908,.83908,.83908,.83908,.77539,.71805,.73133,.73133,.73133,.73133,.95958,.95958,.95958,.95958,.88506,.90872,.85938,.85938,.85938,.85938,.85938,.85284,.87068,.90399,.90399,.90399,.90399,.77892,.79795,.90807,.94908,.94908,.94908,.94908,.94908,.94908,.85887,.74012,.88323,.88323,.88323,.88323,.88401,.88401,.88401,.88401,.8785,.86331,.86331,.86331,.86331,.86331,.86331,.90747,.89049,.86331,.86331,.86331,.86331,.84548,.86411,.84548,.83908,.94908,.83908,.94908,.83908,.94908,.71805,.74012,.71805,.74012,.71805,.74012,.71805,.74012,.87289,.79538,.88506,.92726,.73133,.88323,.73133,.88323,.73133,.88323,.73133,.88323,.73133,.88323,.81921,.86411,.81921,.86411,.81921,.86411,1,1,.87356,.86331,.91075,.8777,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.76467,.90167,.59526,.91916,1,1,.86304,.69225,.88401,1,1,.70424,.77312,.91926,.88175,.70823,.94903,.90872,.86331,1,1,.90872,.86331,.86906,.88116,.86331,.85938,.86331,.85938,.86331,.85938,.86331,.87402,.86549,.77958,.90464,1,1,.77958,.90464,.69766,.70852,.69766,.70852,.69766,.70852,.69766,.70852,1,1,.81055,.75841,.81055,1.06452,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.96068,.95794,.77892,.84548,.77892,.78257,.79492,.78257,.79492,.78257,.79492,.9297,.56892,.83908,.94908,.77539,.85887,.87068,.89049,1,1,.81055,1.04106,1.20528,1.20528,1,1.15543,.70088,.98387,.94721,1.33431,1.45894,.95161,1.48387,.83908,.80352,.57118,.6965,.56347,.79179,.55853,.80346,1.02988,.83908,.7762,.67174,.86036,.73133,.78257,.87356,.86441,.95958,.75727,.89019,1.04924,.90872,.74889,.85938,.87891,.79795,.7957,.81055,.77892,.97447,.82577,.97466,.87179,.95958,.77892,.94252,.95612,.8753,1.02988,.92733,.94252,.87411,.84021,.8728,.95612,.74081,.8753,1.02189,1.02988,.84814,.87445,.91822,.84723,.85668,.86331,.81344,.87581,.76422,.82046,.96057,.92733,.99375,.78022,.95452,.86015,1.02988,.92733,.86331,.92733,.86015,.73133,1,1,1,1,1,1,1,1,1,1,1,1,.90631,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.88323,1,1,1,1,1,1,1,1,1,1,1,1,.85174,1,1,1,1,1,1,.96068,.95794,.96068,.95794,.96068,.95794,.77892,.84548,1,1,.89552,.90527,1,.90363,.92794,.92794,.92794,.89807,.87012,.87012,.87012,.89552,.89552,1.42259,.71094,1.06152,1,1,1.03372,1.03372,.97171,1.4956,2.2807,.92972,.83406,.91133,.83326,.91133,1,1,1,.72021,1,1.23108,.83489,.88525,.88525,.81499,.90616,1.81055,.90527,1.81055,1.3107,1.53711,.94434,1.08696,1,.95018,.77192,.85284,.90747,1.17534,.69825,.9716,1.37077,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.08004,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,.90727,.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];f.CalibriBoldItalicFactors=o;const c={lineHeight:1.2207,lineGap:.2207};f.CalibriBoldItalicMetrics=c;const s=[1.3877,1,1,1,1.17223,1.1293,.89552,.91133,.80395,1.02269,1.15601,.91056,.91056,1.2798,.85284,.89807,1,.90861,1.39543,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.96309,.96309,.85284,.85284,.85284,.83319,.88071,.8675,.81552,.72346,.85193,.73206,.7522,.81105,.86275,.90685,.6377,.77892,.75593,1.02638,.89249,.84118,.77452,.85374,.75186,.67789,.79776,.88844,.85066,.94309,.77818,.7306,.76659,1.10369,1.38313,1.10369,1.06139,.89552,.8739,.9245,.9245,.83203,.9245,.85865,1.09842,.9245,.9245,1.03297,1.07692,.90918,1.03297,.94959,.9245,.92274,.9245,.9245,1.02933,.77832,1.20562,.9245,.8916,.98986,.86621,.89453,.79004,.94152,1.77256,.94152,.85284,.97801,.89552,.91133,.89552,.91133,1.91729,.89552,1.17889,1.13254,1.16359,.92098,.85284,.68787,.71353,.84737,.90747,1.0088,1.0044,.87683,1,1.09091,1,.92229,.739,1.15642,.92098,.76288,.80504,.80972,.75859,.8675,.8675,.8675,.8675,.8675,.8675,.76318,.72346,.73206,.73206,.73206,.73206,.90685,.90685,.90685,.90685,.86477,.89249,.84118,.84118,.84118,.84118,.84118,.85284,.84557,.88844,.88844,.88844,.88844,.7306,.77452,.86331,.9245,.9245,.9245,.9245,.9245,.9245,.84843,.83203,.85865,.85865,.85865,.85865,.82601,.82601,.82601,.82601,.94469,.9245,.92274,.92274,.92274,.92274,.92274,.90747,.86651,.9245,.9245,.9245,.9245,.89453,.9245,.89453,.8675,.9245,.8675,.9245,.8675,.9245,.72346,.83203,.72346,.83203,.72346,.83203,.72346,.83203,.85193,.8875,.86477,.99034,.73206,.85865,.73206,.85865,.73206,.85865,.73206,.85865,.73206,.85865,.81105,.9245,.81105,.9245,.81105,.9245,1,1,.86275,.9245,.90872,.93591,.90685,.82601,.90685,.82601,.90685,.82601,.90685,1.03297,.90685,.82601,.77896,1.05611,.6377,1.07692,1,1,.90918,.75593,1.03297,1,1,.76032,.9375,.98156,.93407,.77261,1.11429,.89249,.9245,1,1,.89249,.9245,.92534,.86698,.9245,.84118,.92274,.84118,.92274,.84118,.92274,.8667,.86291,.75186,1.02933,1,1,.75186,1.02933,.67789,.77832,.67789,.77832,.67789,.77832,.67789,.77832,1,1,.79776,.97655,.79776,1.23023,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.94309,.98986,.7306,.89453,.7306,.76659,.79004,.76659,.79004,.76659,.79004,1.09231,.54873,.8675,.9245,.76318,.84843,.84557,.86651,1,1,.79776,1.20562,1.18622,1.18622,1,1.1437,.67009,.96334,.93695,1.35191,1.40909,.95161,1.48387,.8675,.90861,.6192,.7363,.64824,.82411,.56321,.85696,1.23516,.8675,.81552,.7286,.84134,.73206,.76659,.86275,.84369,.90685,.77892,.85871,1.02638,.89249,.75828,.84118,.85984,.77452,.76466,.79776,.7306,.90782,.77818,.903,.87291,.90685,.7306,.99058,1.03667,.94635,1.23516,.9849,.99058,.92393,.8916,.942,1.03667,.75026,.94635,1.0297,1.23516,.90918,.94048,.98217,.89746,.84153,.92274,.82507,.88832,.84438,.88178,1.03525,.9849,1.00225,.78086,.97248,.89404,1.23516,.9849,.92274,.9849,.89404,.73206,1,1,1,1,1,1,1,1,1,1,1,1,.89693,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.85865,1,1,1,1,1,1,1,1,1,1,1,1,.90933,1,1,1,1,1,1,.94309,.98986,.94309,.98986,.94309,.98986,.7306,.89453,1,1,.89552,.90527,1,.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,.89552,.89552,1.42259,.68994,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,.97858,.82616,.91133,.83437,.91133,1,1,1,.70508,1,1.23108,.79801,.84426,.84426,.774,.90572,1.81055,.90749,1.81055,1.28809,1.55469,.94434,1.07806,1,.97094,.7589,.85284,.90747,1.19658,.69825,.97622,1.33512,.90747,.90747,.85284,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.0336,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];f.CalibriItalicFactors=s;const e={lineHeight:1.2207,lineGap:.2207};f.CalibriItalicMetrics=e;const a=[1.3877,1,1,1,1.17223,1.1293,.89552,.91133,.80395,1.02269,1.15601,.91056,.91056,1.2798,.85284,.89807,1,.90861,1.39016,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.96309,.96309,.85284,.85284,.85284,.83319,.88071,.8675,.81552,.73834,.85193,.73206,.7522,.81105,.86275,.90685,.6377,.77892,.75593,1.02638,.89385,.85122,.77452,.86503,.75186,.68887,.79776,.88844,.85066,.94258,.77818,.7306,.76659,1.10369,1.39016,1.10369,1.06139,.89552,.8739,.86128,.94469,.8457,.94469,.89464,1.09842,.84636,.94469,1.03297,1.07692,.90918,1.03297,.95897,.94469,.9482,.94469,.94469,1.04692,.78223,1.20562,.94469,.90332,.98986,.86621,.90527,.79004,.94152,1.77256,.94152,.85284,.97801,.89552,.91133,.89552,.91133,1.91729,.89552,1.17889,1.13254,1.08707,.92098,.85284,.68787,.71353,.84737,.90747,1.0088,1.0044,.87683,1,1.09091,1,.92229,.739,1.15642,.92098,.76288,.80504,.80972,.75859,.8675,.8675,.8675,.8675,.8675,.8675,.76318,.73834,.73206,.73206,.73206,.73206,.90685,.90685,.90685,.90685,.86477,.89385,.85122,.85122,.85122,.85122,.85122,.85284,.85311,.88844,.88844,.88844,.88844,.7306,.77452,.86331,.86128,.86128,.86128,.86128,.86128,.86128,.8693,.8457,.89464,.89464,.89464,.89464,.82601,.82601,.82601,.82601,.94469,.94469,.9482,.9482,.9482,.9482,.9482,.90747,.86651,.94469,.94469,.94469,.94469,.90527,.94469,.90527,.8675,.86128,.8675,.86128,.8675,.86128,.73834,.8457,.73834,.8457,.73834,.8457,.73834,.8457,.85193,.92454,.86477,.9921,.73206,.89464,.73206,.89464,.73206,.89464,.73206,.89464,.73206,.89464,.81105,.84636,.81105,.84636,.81105,.84636,1,1,.86275,.94469,.90872,.95786,.90685,.82601,.90685,.82601,.90685,.82601,.90685,1.03297,.90685,.82601,.77741,1.05611,.6377,1.07692,1,1,.90918,.75593,1.03297,1,1,.76032,.90452,.98156,1.11842,.77261,1.11429,.89385,.94469,1,1,.89385,.94469,.95877,.86901,.94469,.85122,.9482,.85122,.9482,.85122,.9482,.8667,.90016,.75186,1.04692,1,1,.75186,1.04692,.68887,.78223,.68887,.78223,.68887,.78223,.68887,.78223,1,1,.79776,.92188,.79776,1.23023,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.94258,.98986,.7306,.90527,.7306,.76659,.79004,.76659,.79004,.76659,.79004,1.09231,.54873,.8675,.86128,.76318,.8693,.85311,.86651,1,1,.79776,1.20562,1.18622,1.18622,1,1.1437,.67742,.96334,.93695,1.35191,1.40909,.95161,1.48387,.86686,.90861,.62267,.74359,.65649,.85498,.56963,.88254,1.23516,.8675,.81552,.75443,.84503,.73206,.76659,.86275,.85122,.90685,.77892,.85746,1.02638,.89385,.75657,.85122,.86275,.77452,.74171,.79776,.7306,.95165,.77818,.89772,.88831,.90685,.7306,.98142,1.02191,.96576,1.23516,.99018,.98142,.9236,.89258,.94035,1.02191,.78848,.96576,.9561,1.23516,.90918,.92578,.95424,.89746,.83969,.9482,.80113,.89442,.85208,.86155,.98022,.99018,1.00452,.81209,.99247,.89181,1.23516,.99018,.9482,.99018,.89181,.73206,1,1,1,1,1,1,1,1,1,1,1,1,.88844,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.89464,1,1,1,1,1,1,1,1,1,1,1,1,.96766,1,1,1,1,1,1,.94258,.98986,.94258,.98986,.94258,.98986,.7306,.90527,1,1,.89552,.90527,1,.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,.89552,.89552,1.42259,.69043,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,.99331,.82616,.91133,.84286,.91133,1,1,1,.70508,1,1.23108,.79801,.84426,.84426,.774,.90527,1.81055,.90527,1.81055,1.28809,1.55469,.94434,1.07806,1,.97094,.7589,.85284,.90747,1.19658,.69825,.97622,1.33512,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.0336,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1.07185,.99413,.96334,1.08065,1,1,1,1,1,1,1,1,1,1,1];f.CalibriRegularFactors=a;const r={lineHeight:1.2207,lineGap:.2207};f.CalibriRegularMetrics=r},(ge,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.HelveticaRegularMetrics=f.HelveticaRegularFactors=f.HelveticaItalicMetrics=f.HelveticaItalicFactors=f.HelveticaBoldMetrics=f.HelveticaBoldItalicMetrics=f.HelveticaBoldItalicFactors=f.HelveticaBoldFactors=void 0;const h=[.76116,1,1,1.0006,.99998,.99974,.99973,.99973,.99982,.99977,1.00087,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99998,1,1.00003,1.00003,1.00003,1.00026,.9999,.99977,.99977,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,.99973,.99977,1.00026,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,.99998,1.0006,.99998,1.00003,.99973,.99998,.99973,1.00026,.99973,1.00026,.99973,.99998,1.00026,1.00026,1.0006,1.0006,.99973,1.0006,.99982,1.00026,1.00026,1.00026,1.00026,.99959,.99973,.99998,1.00026,.99973,1.00022,.99973,.99973,1,.99959,1.00077,.99959,1.00003,.99998,.99973,.99973,.99973,.99973,1.00077,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.99973,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,.99977,.99977,.99977,.99977,.99977,.99977,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,.99973,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,.99973,1.00026,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,1.03374,.99977,1.00026,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,.99977,1.00026,.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.00042,.99973,.99973,1.0006,.99977,.99973,.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.03828,1.00026,.99999,1.00026,1.0006,.99977,1.00026,.99977,1.00026,.99977,1.00026,.9993,.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,.99977,.99959,.99977,.99959,.99977,.99959,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00026,.99998,1.00026,.8121,1.00026,.99998,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,1.00016,1.00022,1.00001,.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,.99973,.99977,.99973,1,.99982,1.00022,1.00026,1.00001,.99973,1.00026,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,1.00034,.99977,1,.99997,1.00026,1.00078,1.00036,.99973,1.00013,1.0006,.99977,.99977,.99988,.85148,1.00001,1.00026,.99977,1.00022,1.0006,.99977,1.00001,.99999,.99977,1.00069,1.00022,.99977,1.00001,.99984,1.00026,1.00001,1.00024,1.00001,.9999,1,1.0006,1.00001,1.00041,.99962,1.00026,1.0006,.99995,1.00041,.99942,.99973,.99927,1.00082,.99902,1.00026,1.00087,1.0006,1.00069,.99973,.99867,.99973,.9993,1.00026,1.00049,1.00056,1,.99988,.99935,.99995,.99954,1.00055,.99945,1.00032,1.0006,.99995,1.00026,.99995,1.00032,1.00001,1.00008,.99971,1.00019,.9994,1.00001,1.0006,1.00044,.99973,1.00023,1.00047,1,.99942,.99561,.99989,1.00035,.99977,1.00035,.99977,1.00019,.99944,1.00001,1.00021,.99926,1.00035,1.00035,.99942,1.00048,.99999,.99977,1.00022,1.00035,1.00001,.99977,1.00026,.99989,1.00057,1.00001,.99936,1.00052,1.00012,.99996,1.00043,1,1.00035,.9994,.99976,1.00035,.99973,1.00052,1.00041,1.00119,1.00037,.99973,1.00002,.99986,1.00041,1.00041,.99902,.9996,1.00034,.99999,1.00026,.99999,1.00026,.99973,1.00052,.99973,1,.99973,1.00041,1.00075,.9994,1.0003,.99999,1,1.00041,.99955,1,.99915,.99973,.99973,1.00026,1.00119,.99955,.99973,1.0006,.99911,1.0006,1.00026,.99972,1.00026,.99902,1.00041,.99973,.99999,1,1,1.00038,1.0005,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,.99973,1,1,.99973,1,1,.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,.99973,.99973,.99972,1,1,1.00106,.99999,.99998,.99998,.99999,.99998,1.66475,1,.99973,.99973,1.00023,.99973,.99971,1.00047,1.00023,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,.99561,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.99972,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1];f.HelveticaBoldFactors=h;const t={lineHeight:1.2,lineGap:.2};f.HelveticaBoldMetrics=t;const o=[.76116,1,1,1.0006,.99998,.99974,.99973,.99973,.99982,.99977,1.00087,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99998,1,1.00003,1.00003,1.00003,1.00026,.9999,.99977,.99977,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,.99973,.99977,1.00026,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,.99998,1.0006,.99998,1.00003,.99973,.99998,.99973,1.00026,.99973,1.00026,.99973,.99998,1.00026,1.00026,1.0006,1.0006,.99973,1.0006,.99982,1.00026,1.00026,1.00026,1.00026,.99959,.99973,.99998,1.00026,.99973,1.00022,.99973,.99973,1,.99959,1.00077,.99959,1.00003,.99998,.99973,.99973,.99973,.99973,1.00077,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.99973,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,.99977,.99977,.99977,.99977,.99977,.99977,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,.99973,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,.99973,1.00026,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,1.0044,.99977,1.00026,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,.99977,1.00026,.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99971,.99973,.99973,1.0006,.99977,.99973,.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.01011,1.00026,.99999,1.00026,1.0006,.99977,1.00026,.99977,1.00026,.99977,1.00026,.9993,.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,.99977,.99959,.99977,.99959,.99977,.99959,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00026,.99998,1.00026,.8121,1.00026,.99998,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,1.00016,1.00022,1.00001,.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,.99973,.99977,.99973,1,.99982,1.00022,1.00026,1.00001,.99973,1.00026,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99977,1,1,1.00026,.99969,.99972,.99981,.9998,1.0006,.99977,.99977,1.00022,.91155,1.00001,1.00026,.99977,1.00022,1.0006,.99977,1.00001,.99999,.99977,.99966,1.00022,1.00032,1.00001,.99944,1.00026,1.00001,.99968,1.00001,1.00047,1,1.0006,1.00001,.99981,1.00101,1.00026,1.0006,.99948,.99981,1.00064,.99973,.99942,1.00101,1.00061,1.00026,1.00069,1.0006,1.00014,.99973,1.01322,.99973,1.00065,1.00026,1.00012,.99923,1,1.00064,1.00076,.99948,1.00055,1.00063,1.00007,.99943,1.0006,.99948,1.00026,.99948,.99943,1.00001,1.00001,1.00029,1.00038,1.00035,1.00001,1.0006,1.0006,.99973,.99978,1.00001,1.00057,.99989,.99967,.99964,.99967,.99977,.99999,.99977,1.00038,.99977,1.00001,.99973,1.00066,.99967,.99967,1.00041,.99998,.99999,.99977,1.00022,.99967,1.00001,.99977,1.00026,.99964,1.00031,1.00001,.99999,.99999,1,1.00023,1,1,.99999,1.00035,1.00001,.99999,.99973,.99977,.99999,1.00058,.99973,.99973,.99955,.9995,1.00026,1.00026,1.00032,.99989,1.00034,.99999,1.00026,1.00026,1.00026,.99973,.45998,.99973,1.00026,.99973,1.00001,.99999,.99982,.99994,.99996,1,1.00042,1.00044,1.00029,1.00023,.99973,.99973,1.00026,.99949,1.00002,.99973,1.0006,1.0006,1.0006,.99975,1.00026,1.00026,1.00032,.98685,.99973,1.00026,1,1,.99966,1.00044,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,.99973,1,1,.99973,1,1,.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,.99973,.99973,.99972,1,1,1.00106,.99999,.99998,.99998,.99999,.99998,1.66475,1,.99973,.99973,1,.99973,.99971,.99978,1,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1.00098,1,1,1,1.00049,1,1,.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,.99561,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.99972,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1];f.HelveticaBoldItalicFactors=o;const c={lineHeight:1.35,lineGap:.2};f.HelveticaBoldItalicMetrics=c;const s=[.76116,1,1,1.0006,1.0006,1.00006,.99973,.99973,.99982,1.00001,1.00043,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.0006,1,1.00003,1.00003,1.00003,.99973,.99987,1.00001,1.00001,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,1,1.00001,.99973,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,.99949,.99973,.99998,.99973,.99973,1,.99973,.99973,1.0006,.99973,.99973,.99924,.99924,1,.99924,.99999,.99973,.99973,.99973,.99973,.99998,1,1.0006,.99973,1,.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,.99998,.99973,.99973,.99973,.99973,1.0009,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.9998,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,1,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.06409,1.00026,.99973,.99973,.99973,.99973,1,.99973,1,1.00001,.99973,1.00001,.99973,1.00001,.99973,.99977,1,.99977,1,.99977,1,.99977,1,.99977,1.0288,.99977,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,.99977,.99973,.99977,.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99924,1.0006,1.0006,.99946,1.00034,1,.99924,1.00001,1,1,.99973,.99924,.99973,.99924,.99973,1.06311,.99973,1.00024,.99973,.99924,.99977,.99973,.99977,.99973,.99977,.99973,1.00041,.9998,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1,1.00016,.99977,.99998,.99977,.99998,.99977,.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,.89547,1.00026,1.0006,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,1.00016,.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,.99924,.99973,1.00001,.99973,1,.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,1.00001,1,1.00054,.99977,1.00084,1.00007,.99973,1.00013,.99924,1.00001,1.00001,.99945,.91221,1.00001,1.00026,.99977,1.00022,1.0006,1.00001,1.00001,.99999,.99977,.99933,1.00022,1.00054,1.00001,1.00065,1.00026,1.00001,1.0001,1.00001,1.00052,1,1.0006,1.00001,.99945,.99897,.99968,.99924,1.00036,.99945,.99949,1,1.0006,.99897,.99918,.99968,.99911,.99924,1,.99962,1.01487,1,1.0005,.99973,1.00012,1.00043,1,.99995,.99994,1.00036,.99947,1.00019,1.00063,1.00025,.99924,1.00036,.99973,1.00036,1.00025,1.00001,1.00001,1.00027,1.0001,1.00068,1.00001,1.0006,1.0006,1,1.00008,.99957,.99972,.9994,.99954,.99975,1.00051,1.00001,1.00019,1.00001,1.0001,.99986,1.00001,1.00001,1.00038,.99954,.99954,.9994,1.00066,.99999,.99977,1.00022,1.00054,1.00001,.99977,1.00026,.99975,1.0001,1.00001,.99993,.9995,.99955,1.00016,.99978,.99974,1.00019,1.00022,.99955,1.00053,.99973,1.00089,1.00005,.99967,1.00048,.99973,1.00002,1.00034,.99973,.99973,.99964,1.00006,1.00066,.99947,.99973,.98894,.99973,1,.44898,1,.99946,1,1.00039,1.00082,.99991,.99991,.99985,1.00022,1.00023,1.00061,1.00006,.99966,.99973,.99973,.99973,1.00019,1.0008,1,.99924,.99924,.99924,.99983,1.00044,.99973,.99964,.98332,1,.99973,1,1,.99962,.99895,1.00016,.99977,1.00016,.99977,1.00016,.99977,1.00001,1,1,1,.99973,1,1,.99955,.99924,.99924,.99924,.99924,.99998,.99998,.99998,.99973,.99973,.99972,1,1,1.00267,.99999,.99998,.99998,1,.99998,1.66475,1,.99973,.99973,1.00023,.99973,1.00423,.99925,.99999,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1.00049,1,1.00245,1,1,1,1,.96329,1,1.20985,1.39713,1.00003,.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,1.00003,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.95317,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1];f.HelveticaItalicFactors=s;const e={lineHeight:1.35,lineGap:.2};f.HelveticaItalicMetrics=e;const a=[.76116,1,1,1.0006,1.0006,1.00006,.99973,.99973,.99982,1.00001,1.00043,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.0006,1,1.00003,1.00003,1.00003,.99973,.99987,1.00001,1.00001,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,1,1.00001,.99973,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,.99949,.99973,.99998,.99973,.99973,1,.99973,.99973,1.0006,.99973,.99973,.99924,.99924,1,.99924,.99999,.99973,.99973,.99973,.99973,.99998,1,1.0006,.99973,1,.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,.99998,.99973,.99973,.99973,.99973,1.0009,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.9998,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,1,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.06409,1.00026,.99973,.99973,.99973,.99973,1,.99973,1,1.00001,.99973,1.00001,.99973,1.00001,.99973,.99977,1,.99977,1,.99977,1,.99977,1,.99977,1.04596,.99977,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,.99977,.99973,.99977,.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99924,1.0006,1.0006,1.00019,1.00034,1,.99924,1.00001,1,1,.99973,.99924,.99973,.99924,.99973,1.02572,.99973,1.00005,.99973,.99924,.99977,.99973,.99977,.99973,.99977,.99973,.99999,.9998,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1,1.00016,.99977,.99998,.99977,.99998,.99977,.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,.84533,1.00026,1.0006,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,1.00016,.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,.99924,.99973,1.00001,.99973,1,.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99928,1,.99977,1.00013,1.00055,.99947,.99945,.99941,.99924,1.00001,1.00001,1.0004,.91621,1.00001,1.00026,.99977,1.00022,1.0006,1.00001,1.00005,.99999,.99977,1.00015,1.00022,.99977,1.00001,.99973,1.00026,1.00001,1.00019,1.00001,.99946,1,1.0006,1.00001,.99978,1.00045,.99973,.99924,1.00023,.99978,.99966,1,1.00065,1.00045,1.00019,.99973,.99973,.99924,1,1,.96499,1,1.00055,.99973,1.00008,1.00027,1,.9997,.99995,1.00023,.99933,1.00019,1.00015,1.00031,.99924,1.00023,.99973,1.00023,1.00031,1.00001,.99928,1.00029,1.00092,1.00035,1.00001,1.0006,1.0006,1,.99988,.99975,1,1.00082,.99561,.9996,1.00035,1.00001,.99962,1.00001,1.00092,.99964,1.00001,.99963,.99999,1.00035,1.00035,1.00082,.99962,.99999,.99977,1.00022,1.00035,1.00001,.99977,1.00026,.9996,.99967,1.00001,1.00034,1.00074,1.00054,1.00053,1.00063,.99971,.99962,1.00035,.99975,.99977,.99973,1.00043,.99953,1.0007,.99915,.99973,1.00008,.99892,1.00073,1.00073,1.00114,.99915,1.00073,.99955,.99973,1.00092,.99973,1,.99998,1,1.0003,1,1.00043,1.00001,.99969,1.0003,1,1.00035,1.00001,.9995,1,1.00092,.99973,.99973,.99973,1.0007,.9995,1,.99924,1.0006,.99924,.99972,1.00062,.99973,1.00114,1.00073,1,.99955,1,1,1.00047,.99968,1.00016,.99977,1.00016,.99977,1.00016,.99977,1.00001,1,1,1,.99973,1,1,.99955,.99924,.99924,.99924,.99924,.99998,.99998,.99998,.99973,.99973,.99972,1,1,1.00267,.99999,.99998,.99998,1,.99998,1.66475,1,.99973,.99973,1.00023,.99973,.99971,.99925,1.00023,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,.96329,1,1.20985,1.39713,1.00003,.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.95317,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];f.HelveticaRegularFactors=a;const r={lineHeight:1.2,lineGap:.2};f.HelveticaRegularMetrics=r},(ge,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.LiberationSansRegularWidths=f.LiberationSansRegularMapping=f.LiberationSansItalicWidths=f.LiberationSansItalicMapping=f.LiberationSansBoldWidths=f.LiberationSansBoldMapping=f.LiberationSansBoldItalicWidths=f.LiberationSansBoldItalicMapping=void 0;const h=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,719,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,785,556,556,278,722,556,556,611,278,611,278,611,385,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1e3,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1e3,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,465,722,333,853,906,474,825,927,838,278,722,722,601,719,667,611,722,778,278,722,667,833,722,644,778,722,667,600,611,667,821,667,809,802,278,667,615,451,611,278,582,615,610,556,606,475,460,611,541,278,558,556,612,556,445,611,766,619,520,684,446,582,715,576,753,845,278,582,611,582,845,667,669,885,567,711,667,278,276,556,1094,1062,875,610,722,622,719,722,719,722,567,712,667,904,626,719,719,610,702,833,722,778,719,667,722,611,622,854,667,730,703,1005,1019,870,979,719,711,1031,719,556,618,615,417,635,556,709,497,615,615,500,635,740,604,611,604,611,556,490,556,875,556,615,581,833,844,729,854,615,552,854,583,556,556,611,417,552,556,278,281,278,969,906,611,500,615,556,604,778,611,487,447,944,778,944,778,944,778,667,556,333,333,556,1e3,1e3,552,278,278,278,278,500,500,500,556,556,350,1e3,1e3,240,479,333,333,604,333,167,396,556,556,1094,556,885,489,1115,1e3,768,600,834,834,834,834,1e3,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333];f.LiberationSansBoldWidths=h;const t=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];f.LiberationSansBoldMapping=t;const o=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,740,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,782,556,556,278,722,556,556,611,278,611,278,611,396,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1e3,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1e3,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,333,722,333,854,906,473,844,930,847,278,722,722,610,671,667,611,722,778,278,722,667,833,722,657,778,718,667,590,611,667,822,667,829,781,278,667,620,479,611,278,591,620,621,556,610,479,492,611,558,278,566,556,603,556,450,611,712,605,532,664,409,591,704,578,773,834,278,591,611,591,834,667,667,886,614,719,667,278,278,556,1094,1042,854,622,719,677,719,722,708,722,614,722,667,927,643,719,719,615,687,833,722,778,719,667,722,611,677,781,667,729,708,979,989,854,1e3,708,719,1042,729,556,619,604,534,618,556,736,510,611,611,507,622,740,604,611,611,611,556,889,556,885,556,646,583,889,935,707,854,594,552,865,589,556,556,611,469,563,556,278,278,278,969,906,611,507,619,556,611,778,611,575,467,944,778,944,778,944,778,667,556,333,333,556,1e3,1e3,552,278,278,278,278,500,500,500,556,556,350,1e3,1e3,240,479,333,333,604,333,167,396,556,556,1104,556,885,516,1146,1e3,768,600,834,834,834,834,999,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333];f.LiberationSansBoldItalicWidths=o;const c=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];f.LiberationSansBoldItalicMapping=c;const s=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,625,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,733,444,500,222,667,500,500,556,222,556,222,556,281,556,400,556,222,722,556,722,556,722,556,615,723,556,778,556,778,556,778,556,1e3,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,354,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1e3,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,789,846,389,794,865,775,222,667,667,570,671,667,611,722,778,278,667,667,833,722,648,778,725,667,600,611,667,837,667,831,761,278,667,570,439,555,222,550,570,571,500,556,439,463,555,542,222,500,492,548,500,447,556,670,573,486,603,374,550,652,546,728,779,222,550,556,550,779,667,667,843,544,708,667,278,278,500,1066,982,844,589,715,639,724,667,651,667,544,704,667,917,614,715,715,589,686,833,722,778,725,667,722,611,639,795,667,727,673,920,923,805,886,651,694,1022,682,556,562,522,493,553,556,688,465,556,556,472,564,686,550,556,556,556,500,833,500,835,500,572,518,830,851,621,736,526,492,752,534,556,556,556,378,496,500,222,222,222,910,828,556,472,565,500,556,778,556,492,339,944,722,944,722,944,722,667,500,333,333,556,1e3,1e3,552,222,222,222,222,333,333,333,556,556,350,1e3,1e3,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1083,1e3,768,600,834,834,834,834,1e3,500,998,500,1e3,500,500,494,612,823,713,584,549,713,979,719,274,549,549,584,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285];f.LiberationSansItalicWidths=s;const e=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];f.LiberationSansItalicMapping=e;const a=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,615,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,735,444,500,222,667,500,500,556,222,556,222,556,292,556,334,556,222,722,556,722,556,722,556,604,723,556,778,556,778,556,778,556,1e3,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,375,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1e3,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,784,838,384,774,855,752,222,667,667,551,668,667,611,722,778,278,667,668,833,722,650,778,722,667,618,611,667,798,667,835,748,278,667,578,446,556,222,547,578,575,500,557,446,441,556,556,222,500,500,576,500,448,556,690,569,482,617,395,547,648,525,713,781,222,547,556,547,781,667,667,865,542,719,667,278,278,500,1057,1010,854,583,722,635,719,667,656,667,542,677,667,923,604,719,719,583,656,833,722,778,719,667,722,611,635,760,667,740,667,917,938,792,885,656,719,1010,722,556,573,531,365,583,556,669,458,559,559,438,583,688,552,556,542,556,500,458,500,823,500,573,521,802,823,625,719,521,510,750,542,556,556,556,365,510,500,222,278,222,906,812,556,438,559,500,552,778,556,489,411,944,722,944,722,944,722,667,500,333,333,556,1e3,1e3,552,222,222,222,222,333,333,333,556,556,350,1e3,1e3,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1073,1e3,768,600,834,834,834,834,1e3,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,719,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285];f.LiberationSansRegularWidths=a;const r=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];f.LiberationSansRegularMapping=r},(ge,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.MyriadProRegularMetrics=f.MyriadProRegularFactors=f.MyriadProItalicMetrics=f.MyriadProItalicFactors=f.MyriadProBoldMetrics=f.MyriadProBoldItalicMetrics=f.MyriadProBoldItalicFactors=f.MyriadProBoldFactors=void 0;const h=[1.36898,1,1,.72706,.80479,.83734,.98894,.99793,.9897,.93884,.86209,.94292,.94292,1.16661,1.02058,.93582,.96694,.93582,1.19137,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.78076,.78076,1.02058,1.02058,1.02058,.72851,.78966,.90838,.83637,.82391,.96376,.80061,.86275,.8768,.95407,1.0258,.73901,.85022,.83655,1.0156,.95546,.92179,.87107,.92179,.82114,.8096,.89713,.94438,.95353,.94083,.91905,.90406,.9446,.94292,1.18777,.94292,1.02058,.89903,.90088,.94938,.97898,.81093,.97571,.94938,1.024,.9577,.95933,.98621,1.0474,.97455,.98981,.9672,.95933,.9446,.97898,.97407,.97646,.78036,1.10208,.95442,.95298,.97579,.9332,.94039,.938,.80687,1.01149,.80687,1.02058,.80479,.99793,.99793,.99793,.99793,1.01149,1.00872,.90088,.91882,1.0213,.8361,1.02058,.62295,.54324,.89022,1.08595,1,1,.90088,1,.97455,.93582,.90088,1,1.05686,.8361,.99642,.99642,.99642,.72851,.90838,.90838,.90838,.90838,.90838,.90838,.868,.82391,.80061,.80061,.80061,.80061,1.0258,1.0258,1.0258,1.0258,.97484,.95546,.92179,.92179,.92179,.92179,.92179,1.02058,.92179,.94438,.94438,.94438,.94438,.90406,.86958,.98225,.94938,.94938,.94938,.94938,.94938,.94938,.9031,.81093,.94938,.94938,.94938,.94938,.98621,.98621,.98621,.98621,.93969,.95933,.9446,.9446,.9446,.9446,.9446,1.08595,.9446,.95442,.95442,.95442,.95442,.94039,.97898,.94039,.90838,.94938,.90838,.94938,.90838,.94938,.82391,.81093,.82391,.81093,.82391,.81093,.82391,.81093,.96376,.84313,.97484,.97571,.80061,.94938,.80061,.94938,.80061,.94938,.80061,.94938,.80061,.94938,.8768,.9577,.8768,.9577,.8768,.9577,1,1,.95407,.95933,.97069,.95933,1.0258,.98621,1.0258,.98621,1.0258,.98621,1.0258,.98621,1.0258,.98621,.887,1.01591,.73901,1.0474,1,1,.97455,.83655,.98981,1,1,.83655,.73977,.83655,.73903,.84638,1.033,.95546,.95933,1,1,.95546,.95933,.8271,.95417,.95933,.92179,.9446,.92179,.9446,.92179,.9446,.936,.91964,.82114,.97646,1,1,.82114,.97646,.8096,.78036,.8096,.78036,1,1,.8096,.78036,1,1,.89713,.77452,.89713,1.10208,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94083,.97579,.90406,.94039,.90406,.9446,.938,.9446,.938,.9446,.938,1,.99793,.90838,.94938,.868,.9031,.92179,.9446,1,1,.89713,1.10208,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90989,.9358,.91945,.83181,.75261,.87992,.82976,.96034,.83689,.97268,1.0078,.90838,.83637,.8019,.90157,.80061,.9446,.95407,.92436,1.0258,.85022,.97153,1.0156,.95546,.89192,.92179,.92361,.87107,.96318,.89713,.93704,.95638,.91905,.91709,.92796,1.0258,.93704,.94836,1.0373,.95933,1.0078,.95871,.94836,.96174,.92601,.9498,.98607,.95776,.95933,1.05453,1.0078,.98275,.9314,.95617,.91701,1.05993,.9446,.78367,.9553,1,.86832,1.0128,.95871,.99394,.87548,.96361,.86774,1.0078,.95871,.9446,.95871,.86774,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.94083,.97579,.94083,.97579,.94083,.97579,.90406,.94039,.96694,1,.89903,1,1,1,.93582,.93582,.93582,1,.908,.908,.918,.94219,.94219,.96544,1,1.285,1,1,.81079,.81079,1,1,.74854,1,1,1,1,.99793,1,1,1,.65,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.17173,1,.80535,.76169,1.02058,1.0732,1.05486,1,1,1.30692,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.16161,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];f.MyriadProBoldFactors=h;const t={lineHeight:1.2,lineGap:.2};f.MyriadProBoldMetrics=t;const o=[1.36898,1,1,.66227,.80779,.81625,.97276,.97276,.97733,.92222,.83266,.94292,.94292,1.16148,1.02058,.93582,.96694,.93582,1.17337,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.78076,.78076,1.02058,1.02058,1.02058,.71541,.76813,.85576,.80591,.80729,.94299,.77512,.83655,.86523,.92222,.98621,.71743,.81698,.79726,.98558,.92222,.90637,.83809,.90637,.80729,.76463,.86275,.90699,.91605,.9154,.85308,.85458,.90531,.94292,1.21296,.94292,1.02058,.89903,1.18616,.99613,.91677,.78216,.91677,.90083,.98796,.9135,.92168,.95381,.98981,.95298,.95381,.93459,.92168,.91513,.92004,.91677,.95077,.748,1.04502,.91677,.92061,.94236,.89544,.89364,.9,.80687,.8578,.80687,1.02058,.80779,.97276,.97276,.97276,.97276,.8578,.99973,1.18616,.91339,1.08074,.82891,1.02058,.55509,.71526,.89022,1.08595,1,1,1.18616,1,.96736,.93582,1.18616,1,1.04864,.82711,.99043,.99043,.99043,.71541,.85576,.85576,.85576,.85576,.85576,.85576,.845,.80729,.77512,.77512,.77512,.77512,.98621,.98621,.98621,.98621,.95961,.92222,.90637,.90637,.90637,.90637,.90637,1.02058,.90251,.90699,.90699,.90699,.90699,.85458,.83659,.94951,.99613,.99613,.99613,.99613,.99613,.99613,.85811,.78216,.90083,.90083,.90083,.90083,.95381,.95381,.95381,.95381,.9135,.92168,.91513,.91513,.91513,.91513,.91513,1.08595,.91677,.91677,.91677,.91677,.91677,.89364,.92332,.89364,.85576,.99613,.85576,.99613,.85576,.99613,.80729,.78216,.80729,.78216,.80729,.78216,.80729,.78216,.94299,.76783,.95961,.91677,.77512,.90083,.77512,.90083,.77512,.90083,.77512,.90083,.77512,.90083,.86523,.9135,.86523,.9135,.86523,.9135,1,1,.92222,.92168,.92222,.92168,.98621,.95381,.98621,.95381,.98621,.95381,.98621,.95381,.98621,.95381,.86036,.97096,.71743,.98981,1,1,.95298,.79726,.95381,1,1,.79726,.6894,.79726,.74321,.81691,1.0006,.92222,.92168,1,1,.92222,.92168,.79464,.92098,.92168,.90637,.91513,.90637,.91513,.90637,.91513,.909,.87514,.80729,.95077,1,1,.80729,.95077,.76463,.748,.76463,.748,1,1,.76463,.748,1,1,.86275,.72651,.86275,1.04502,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.9154,.94236,.85458,.89364,.85458,.90531,.9,.90531,.9,.90531,.9,1,.97276,.85576,.99613,.845,.85811,.90251,.91677,1,1,.86275,1.04502,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.00899,1.30628,.85576,.80178,.66862,.7927,.69323,.88127,.72459,.89711,.95381,.85576,.80591,.7805,.94729,.77512,.90531,.92222,.90637,.98621,.81698,.92655,.98558,.92222,.85359,.90637,.90976,.83809,.94523,.86275,.83509,.93157,.85308,.83392,.92346,.98621,.83509,.92886,.91324,.92168,.95381,.90646,.92886,.90557,.86847,.90276,.91324,.86842,.92168,.99531,.95381,.9224,.85408,.92699,.86847,1.0051,.91513,.80487,.93481,1,.88159,1.05214,.90646,.97355,.81539,.89398,.85923,.95381,.90646,.91513,.90646,.85923,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.9154,.94236,.9154,.94236,.9154,.94236,.85458,.89364,.96694,1,.89903,1,1,1,.91782,.91782,.91782,1,.896,.896,.896,.9332,.9332,.95973,1,1.26,1,1,.80479,.80178,1,1,.85633,1,1,1,1,.97276,1,1,1,.698,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.14542,1,.79199,.78694,1.02058,1.03493,1.05486,1,1,1.23026,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.20006,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];f.MyriadProBoldItalicFactors=o;const c={lineHeight:1.2,lineGap:.2};f.MyriadProBoldItalicMetrics=c;const s=[1.36898,1,1,.65507,.84943,.85639,.88465,.88465,.86936,.88307,.86948,.85283,.85283,1.06383,1.02058,.75945,.9219,.75945,1.17337,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.75945,.75945,1.02058,1.02058,1.02058,.69046,.70926,.85158,.77812,.76852,.89591,.70466,.76125,.80094,.86822,.83864,.728,.77212,.79475,.93637,.87514,.8588,.76013,.8588,.72421,.69866,.77598,.85991,.80811,.87832,.78112,.77512,.8562,1.0222,1.18417,1.0222,1.27014,.89903,1.15012,.93859,.94399,.846,.94399,.81453,1.0186,.94219,.96017,1.03075,1.02175,.912,1.03075,.96998,.96017,.93859,.94399,.94399,.95493,.746,1.12658,.94578,.91,.979,.882,.882,.83,.85034,.83537,.85034,1.02058,.70869,.88465,.88465,.88465,.88465,.83537,.90083,1.15012,.9161,.94565,.73541,1.02058,.53609,.69353,.79519,1.08595,1,1,1.15012,1,.91974,.75945,1.15012,1,.9446,.73361,.9005,.9005,.9005,.62864,.85158,.85158,.85158,.85158,.85158,.85158,.773,.76852,.70466,.70466,.70466,.70466,.83864,.83864,.83864,.83864,.90561,.87514,.8588,.8588,.8588,.8588,.8588,1.02058,.85751,.85991,.85991,.85991,.85991,.77512,.76013,.88075,.93859,.93859,.93859,.93859,.93859,.93859,.8075,.846,.81453,.81453,.81453,.81453,.82424,.82424,.82424,.82424,.9278,.96017,.93859,.93859,.93859,.93859,.93859,1.08595,.8562,.94578,.94578,.94578,.94578,.882,.94578,.882,.85158,.93859,.85158,.93859,.85158,.93859,.76852,.846,.76852,.846,.76852,.846,.76852,.846,.89591,.8544,.90561,.94399,.70466,.81453,.70466,.81453,.70466,.81453,.70466,.81453,.70466,.81453,.80094,.94219,.80094,.94219,.80094,.94219,1,1,.86822,.96017,.86822,.96017,.83864,.82424,.83864,.82424,.83864,.82424,.83864,1.03075,.83864,.82424,.81402,1.02738,.728,1.02175,1,1,.912,.79475,1.03075,1,1,.79475,.83911,.79475,.66266,.80553,1.06676,.87514,.96017,1,1,.87514,.96017,.86865,.87396,.96017,.8588,.93859,.8588,.93859,.8588,.93859,.867,.84759,.72421,.95493,1,1,.72421,.95493,.69866,.746,.69866,.746,1,1,.69866,.746,1,1,.77598,.88417,.77598,1.12658,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.87832,.979,.77512,.882,.77512,.8562,.83,.8562,.83,.8562,.83,1,.88465,.85158,.93859,.773,.8075,.85751,.8562,1,1,.77598,1.12658,1.15012,1.15012,1.15012,1.15012,1.15012,1.15313,1.15012,1.15012,1.15012,1.08106,1.03901,.85158,.77025,.62264,.7646,.65351,.86026,.69461,.89947,1.03075,.85158,.77812,.76449,.88836,.70466,.8562,.86822,.8588,.83864,.77212,.85308,.93637,.87514,.82352,.8588,.85701,.76013,.89058,.77598,.8156,.82565,.78112,.77899,.89386,.83864,.8156,.9486,.92388,.96186,1.03075,.91123,.9486,.93298,.878,.93942,.92388,.84596,.96186,.95119,1.03075,.922,.88787,.95829,.88,.93559,.93859,.78815,.93758,1,.89217,1.03737,.91123,.93969,.77487,.85769,.86799,1.03075,.91123,.93859,.91123,.86799,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.87832,.979,.87832,.979,.87832,.979,.77512,.882,.9219,1,.89903,1,1,1,.87321,.87321,.87321,1,1.027,1.027,1.027,.86847,.86847,.79121,1,1.124,1,1,.73572,.73572,1,1,.85034,1,1,1,1,.88465,1,1,1,.669,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.04828,1,.74948,.75187,1.02058,.98391,1.02119,1,1,1.06233,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05233,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];f.MyriadProItalicFactors=s;const e={lineHeight:1.2,lineGap:.2};f.MyriadProItalicMetrics=e;const a=[1.36898,1,1,.76305,.82784,.94935,.89364,.92241,.89073,.90706,.98472,.85283,.85283,1.0664,1.02058,.74505,.9219,.74505,1.23456,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.74505,.74505,1.02058,1.02058,1.02058,.73002,.72601,.91755,.8126,.80314,.92222,.73764,.79726,.83051,.90284,.86023,.74,.8126,.84869,.96518,.91115,.8858,.79761,.8858,.74498,.73914,.81363,.89591,.83659,.89633,.85608,.8111,.90531,1.0222,1.22736,1.0222,1.27014,.89903,.90088,.86667,1.0231,.896,1.01411,.90083,1.05099,1.00512,.99793,1.05326,1.09377,.938,1.06226,1.00119,.99793,.98714,1.0231,1.01231,.98196,.792,1.19137,.99074,.962,1.01915,.926,.942,.856,.85034,.92006,.85034,1.02058,.69067,.92241,.92241,.92241,.92241,.92006,.9332,.90088,.91882,.93484,.75339,1.02058,.56866,.54324,.79519,1.08595,1,1,.90088,1,.95325,.74505,.90088,1,.97198,.75339,.91009,.91009,.91009,.66466,.91755,.91755,.91755,.91755,.91755,.91755,.788,.80314,.73764,.73764,.73764,.73764,.86023,.86023,.86023,.86023,.92915,.91115,.8858,.8858,.8858,.8858,.8858,1.02058,.8858,.89591,.89591,.89591,.89591,.8111,.79611,.89713,.86667,.86667,.86667,.86667,.86667,.86667,.86936,.896,.90083,.90083,.90083,.90083,.84224,.84224,.84224,.84224,.97276,.99793,.98714,.98714,.98714,.98714,.98714,1.08595,.89876,.99074,.99074,.99074,.99074,.942,1.0231,.942,.91755,.86667,.91755,.86667,.91755,.86667,.80314,.896,.80314,.896,.80314,.896,.80314,.896,.92222,.93372,.92915,1.01411,.73764,.90083,.73764,.90083,.73764,.90083,.73764,.90083,.73764,.90083,.83051,1.00512,.83051,1.00512,.83051,1.00512,1,1,.90284,.99793,.90976,.99793,.86023,.84224,.86023,.84224,.86023,.84224,.86023,1.05326,.86023,.84224,.82873,1.07469,.74,1.09377,1,1,.938,.84869,1.06226,1,1,.84869,.83704,.84869,.81441,.85588,1.08927,.91115,.99793,1,1,.91115,.99793,.91887,.90991,.99793,.8858,.98714,.8858,.98714,.8858,.98714,.894,.91434,.74498,.98196,1,1,.74498,.98196,.73914,.792,.73914,.792,1,1,.73914,.792,1,1,.81363,.904,.81363,1.19137,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89633,1.01915,.8111,.942,.8111,.90531,.856,.90531,.856,.90531,.856,1,.92241,.91755,.86667,.788,.86936,.8858,.89876,1,1,.81363,1.19137,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90388,1.03901,.92138,.78105,.7154,.86169,.80513,.94007,.82528,.98612,1.06226,.91755,.8126,.81884,.92819,.73764,.90531,.90284,.8858,.86023,.8126,.91172,.96518,.91115,.83089,.8858,.87791,.79761,.89297,.81363,.88157,.89992,.85608,.81992,.94307,.86023,.88157,.95308,.98699,.99793,1.06226,.95817,.95308,.97358,.928,.98088,.98699,.92761,.99793,.96017,1.06226,.986,.944,.95978,.938,.96705,.98714,.80442,.98972,1,.89762,1.04552,.95817,.99007,.87064,.91879,.88888,1.06226,.95817,.98714,.95817,.88888,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.89633,1.01915,.89633,1.01915,.89633,1.01915,.8111,.942,.9219,1,.89903,1,1,1,.93173,.93173,.93173,1,1.06304,1.06304,1.06904,.89903,.89903,.80549,1,1.156,1,1,.76575,.76575,1,1,.72458,1,1,1,1,.92241,1,1,1,.619,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.07257,1,.74705,.71119,1.02058,1.024,1.02119,1,1,1.1536,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05638,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];f.MyriadProRegularFactors=a;const r={lineHeight:1.2,lineGap:.2};f.MyriadProRegularMetrics=r},(ge,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.SegoeuiRegularMetrics=f.SegoeuiRegularFactors=f.SegoeuiItalicMetrics=f.SegoeuiItalicFactors=f.SegoeuiBoldMetrics=f.SegoeuiBoldItalicMetrics=f.SegoeuiBoldItalicFactors=f.SegoeuiBoldFactors=void 0;const h=[1.76738,1,1,.99297,.9824,1.04016,1.06497,1.03424,.97529,1.17647,1.23203,1.1085,1.1085,1.16939,1.2107,.9754,1.21408,.9754,1.59578,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,.81378,.81378,1.2107,1.2107,1.2107,.71703,.97847,.97363,.88776,.8641,1.02096,.79795,.85132,.914,1.06085,1.1406,.8007,.89858,.83693,1.14889,1.09398,.97489,.92094,.97489,.90399,.84041,.95923,1.00135,1,1.06467,.98243,.90996,.99361,1.1085,1.56942,1.1085,1.2107,.74627,.94282,.96752,1.01519,.86304,1.01359,.97278,1.15103,1.01359,.98561,1.02285,1.02285,1.00527,1.02285,1.0302,.99041,1.0008,1.01519,1.01359,1.02258,.79104,1.16862,.99041,.97454,1.02511,.99298,.96752,.95801,.94856,1.16579,.94856,1.2107,.9824,1.03424,1.03424,1,1.03424,1.16579,.8727,1.3871,1.18622,1.10818,1.04478,1.2107,1.18622,.75155,.94994,1.28826,1.21408,1.21408,.91056,1,.91572,.9754,.64663,1.18328,1.24866,1.04478,1.14169,1.15749,1.17389,.71703,.97363,.97363,.97363,.97363,.97363,.97363,.93506,.8641,.79795,.79795,.79795,.79795,1.1406,1.1406,1.1406,1.1406,1.02096,1.09398,.97426,.97426,.97426,.97426,.97426,1.2107,.97489,1.00135,1.00135,1.00135,1.00135,.90996,.92094,1.02798,.96752,.96752,.96752,.96752,.96752,.96752,.93136,.86304,.97278,.97278,.97278,.97278,1.02285,1.02285,1.02285,1.02285,.97122,.99041,1,1,1,1,1,1.28826,1.0008,.99041,.99041,.99041,.99041,.96752,1.01519,.96752,.97363,.96752,.97363,.96752,.97363,.96752,.8641,.86304,.8641,.86304,.8641,.86304,.8641,.86304,1.02096,1.03057,1.02096,1.03517,.79795,.97278,.79795,.97278,.79795,.97278,.79795,.97278,.79795,.97278,.914,1.01359,.914,1.01359,.914,1.01359,1,1,1.06085,.98561,1.06085,1.00879,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,.97138,1.08692,.8007,1.02285,1,1,1.00527,.83693,1.02285,1,1,.83693,.9455,.83693,.90418,.83693,1.13005,1.09398,.99041,1,1,1.09398,.99041,.96692,1.09251,.99041,.97489,1.0008,.97489,1.0008,.97489,1.0008,.93994,.97931,.90399,1.02258,1,1,.90399,1.02258,.84041,.79104,.84041,.79104,.84041,.79104,.84041,.79104,1,1,.95923,1.07034,.95923,1.16862,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.06467,1.02511,.90996,.96752,.90996,.99361,.95801,.99361,.95801,.99361,.95801,1.07733,1.03424,.97363,.96752,.93506,.93136,.97489,1.0008,1,1,.95923,1.16862,1.15103,1.15103,1.01173,1.03959,.75953,.81378,.79912,1.15103,1.21994,.95161,.87815,1.01149,.81525,.7676,.98167,1.01134,1.02546,.84097,1.03089,1.18102,.97363,.88776,.85134,.97826,.79795,.99361,1.06085,.97489,1.1406,.89858,1.0388,1.14889,1.09398,.86039,.97489,1.0595,.92094,.94793,.95923,.90996,.99346,.98243,1.02112,.95493,1.1406,.90996,1.03574,1.02597,1.0008,1.18102,1.06628,1.03574,1.0192,1.01932,1.00886,.97531,1.0106,1.0008,1.13189,1.18102,1.02277,.98683,1.0016,.99561,1.07237,1.0008,.90434,.99921,.93803,.8965,1.23085,1.06628,1.04983,.96268,1.0499,.98439,1.18102,1.06628,1.0008,1.06628,.98439,.79795,1,1,1,1,1,1,1,1,1,1,1,1,1.09466,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.97278,1,1,1,1,1,1,1,1,1,1,1,1,1.02065,1,1,1,1,1,1,1.06467,1.02511,1.06467,1.02511,1.06467,1.02511,.90996,.96752,1,1.21408,.89903,1,1,.75155,1.04394,1.04394,1.04394,1.04394,.98633,.98633,.98633,.73047,.73047,1.20642,.91211,1.25635,1.222,1.02956,1.03372,1.03372,.96039,1.24633,1,1.12454,.93503,1.03424,1.19687,1.03424,1,1,1,.771,1,1,1.15749,1.15749,1.15749,1.10948,.86279,.94434,.86279,.94434,.86182,1,1,1.16897,1,.96085,.90137,1.2107,1.18416,1.13973,.69825,.9716,2.10339,1.29004,1.29004,1.21172,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18874,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.09193,1.09193,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];f.SegoeuiBoldFactors=h;const t={lineHeight:1.33008,lineGap:0};f.SegoeuiBoldMetrics=t;const o=[1.76738,1,1,.98946,1.03959,1.04016,1.02809,1.036,.97639,1.10953,1.23203,1.11144,1.11144,1.16939,1.21237,.9754,1.21261,.9754,1.59754,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,.81378,.81378,1.21237,1.21237,1.21237,.73541,.97847,.97363,.89723,.87897,1.0426,.79429,.85292,.91149,1.05815,1.1406,.79631,.90128,.83853,1.04396,1.10615,.97552,.94436,.97552,.88641,.80527,.96083,1.00135,1,1.06777,.9817,.91142,.99361,1.11144,1.57293,1.11144,1.21237,.74627,1.31818,1.06585,.97042,.83055,.97042,.93503,1.1261,.97042,.97922,1.14236,.94552,1.01054,1.14236,1.02471,.97922,.94165,.97042,.97042,1.0276,.78929,1.1261,.97922,.95874,1.02197,.98507,.96752,.97168,.95107,1.16579,.95107,1.21237,1.03959,1.036,1.036,1,1.036,1.16579,.87357,1.31818,1.18754,1.26781,1.05356,1.21237,1.18622,.79487,.94994,1.29004,1.24047,1.24047,1.31818,1,.91484,.9754,1.31818,1.1349,1.24866,1.05356,1.13934,1.15574,1.17389,.73541,.97363,.97363,.97363,.97363,.97363,.97363,.94385,.87897,.79429,.79429,.79429,.79429,1.1406,1.1406,1.1406,1.1406,1.0426,1.10615,.97552,.97552,.97552,.97552,.97552,1.21237,.97552,1.00135,1.00135,1.00135,1.00135,.91142,.94436,.98721,1.06585,1.06585,1.06585,1.06585,1.06585,1.06585,.96705,.83055,.93503,.93503,.93503,.93503,1.14236,1.14236,1.14236,1.14236,.93125,.97922,.94165,.94165,.94165,.94165,.94165,1.29004,.94165,.97922,.97922,.97922,.97922,.96752,.97042,.96752,.97363,1.06585,.97363,1.06585,.97363,1.06585,.87897,.83055,.87897,.83055,.87897,.83055,.87897,.83055,1.0426,1.0033,1.0426,.97042,.79429,.93503,.79429,.93503,.79429,.93503,.79429,.93503,.79429,.93503,.91149,.97042,.91149,.97042,.91149,.97042,1,1,1.05815,.97922,1.05815,.97922,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,.97441,1.04302,.79631,1.01582,1,1,1.01054,.83853,1.14236,1,1,.83853,1.09125,.83853,.90418,.83853,1.19508,1.10615,.97922,1,1,1.10615,.97922,1.01034,1.10466,.97922,.97552,.94165,.97552,.94165,.97552,.94165,.91602,.91981,.88641,1.0276,1,1,.88641,1.0276,.80527,.78929,.80527,.78929,.80527,.78929,.80527,.78929,1,1,.96083,1.05403,.95923,1.16862,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.06777,1.02197,.91142,.96752,.91142,.99361,.97168,.99361,.97168,.99361,.97168,1.23199,1.036,.97363,1.06585,.94385,.96705,.97552,.94165,1,1,.96083,1.1261,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,.95161,1.27126,1.00811,.83284,.77702,.99137,.95253,1.0347,.86142,1.07205,1.14236,.97363,.89723,.86869,1.09818,.79429,.99361,1.05815,.97552,1.1406,.90128,1.06662,1.04396,1.10615,.84918,.97552,1.04694,.94436,.98015,.96083,.91142,1.00356,.9817,1.01945,.98999,1.1406,.91142,1.04961,.9898,1.00639,1.14236,1.07514,1.04961,.99607,1.02897,1.008,.9898,.95134,1.00639,1.11121,1.14236,1.00518,.97981,1.02186,1,1.08578,.94165,.99314,.98387,.93028,.93377,1.35125,1.07514,1.10687,.93491,1.04232,1.00351,1.14236,1.07514,.94165,1.07514,1.00351,.79429,1,1,1,1,1,1,1,1,1,1,1,1,1.09097,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.93503,1,1,1,1,1,1,1,1,1,1,1,1,.96609,1,1,1,1,1,1,1.06777,1.02197,1.06777,1.02197,1.06777,1.02197,.91142,.96752,1,1.21261,.89903,1,1,.75155,1.04745,1.04745,1.04745,1.04394,.98633,.98633,.98633,.72959,.72959,1.20502,.91406,1.26514,1.222,1.02956,1.03372,1.03372,.96039,1.24633,1,1.09125,.93327,1.03336,1.16541,1.036,1,1,1,.771,1,1,1.15574,1.15574,1.15574,1.15574,.86364,.94434,.86279,.94434,.86224,1,1,1.16798,1,.96085,.90068,1.21237,1.18416,1.13904,.69825,.9716,2.10339,1.29004,1.29004,1.21339,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18775,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.13269,1.13269,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];f.SegoeuiBoldItalicFactors=o;const c={lineHeight:1.33008,lineGap:0};f.SegoeuiBoldItalicMetrics=c;const s=[1.76738,1,1,.98946,1.14763,1.05365,1.06234,.96927,.92586,1.15373,1.18414,.91349,.91349,1.07403,1.17308,.78383,1.20088,.78383,1.42531,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.78383,.78383,1.17308,1.17308,1.17308,.77349,.94565,.94729,.85944,.88506,.9858,.74817,.80016,.88449,.98039,.95782,.69238,.89898,.83231,.98183,1.03989,.96924,.86237,.96924,.80595,.74524,.86091,.95402,.94143,.98448,.8858,.83089,.93285,1.0949,1.39016,1.0949,1.45994,.74627,1.04839,.97454,.97454,.87207,.97454,.87533,1.06151,.97454,1.00176,1.16484,1.08132,.98047,1.16484,1.02989,1.01054,.96225,.97454,.97454,1.06598,.79004,1.16344,1.00351,.94629,.9973,.91016,.96777,.9043,.91082,.92481,.91082,1.17308,.95748,.96927,.96927,1,.96927,.92481,.80597,1.04839,1.23393,1.1781,.9245,1.17308,1.20808,.63218,.94261,1.24822,1.09971,1.09971,1.04839,1,.85273,.78032,1.04839,1.09971,1.22326,.9245,1.09836,1.13525,1.15222,.70424,.94729,.94729,.94729,.94729,.94729,.94729,.85498,.88506,.74817,.74817,.74817,.74817,.95782,.95782,.95782,.95782,.9858,1.03989,.96924,.96924,.96924,.96924,.96924,1.17308,.96924,.95402,.95402,.95402,.95402,.83089,.86237,.88409,.97454,.97454,.97454,.97454,.97454,.97454,.92916,.87207,.87533,.87533,.87533,.87533,.93146,.93146,.93146,.93146,.93854,1.01054,.96225,.96225,.96225,.96225,.96225,1.24822,.8761,1.00351,1.00351,1.00351,1.00351,.96777,.97454,.96777,.94729,.97454,.94729,.97454,.94729,.97454,.88506,.87207,.88506,.87207,.88506,.87207,.88506,.87207,.9858,.95391,.9858,.97454,.74817,.87533,.74817,.87533,.74817,.87533,.74817,.87533,.74817,.87533,.88449,.97454,.88449,.97454,.88449,.97454,1,1,.98039,1.00176,.98039,1.00176,.95782,.93146,.95782,.93146,.95782,.93146,.95782,1.16484,.95782,.93146,.84421,1.12761,.69238,1.08132,1,1,.98047,.83231,1.16484,1,1,.84723,1.04861,.84723,.78755,.83231,1.23736,1.03989,1.01054,1,1,1.03989,1.01054,.9857,1.03849,1.01054,.96924,.96225,.96924,.96225,.96924,.96225,.92383,.90171,.80595,1.06598,1,1,.80595,1.06598,.74524,.79004,.74524,.79004,.74524,.79004,.74524,.79004,1,1,.86091,1.02759,.85771,1.16344,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.98448,.9973,.83089,.96777,.83089,.93285,.9043,.93285,.9043,.93285,.9043,1.31868,.96927,.94729,.97454,.85498,.92916,.96924,.8761,1,1,.86091,1.16344,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,.81965,.81965,.94729,.78032,.71022,.90883,.84171,.99877,.77596,1.05734,1.2,.94729,.85944,.82791,.9607,.74817,.93285,.98039,.96924,.95782,.89898,.98316,.98183,1.03989,.78614,.96924,.97642,.86237,.86075,.86091,.83089,.90082,.8858,.97296,1.01284,.95782,.83089,1.0976,1.04,1.03342,1.2,1.0675,1.0976,.98205,1.03809,1.05097,1.04,.95364,1.03342,1.05401,1.2,1.02148,1.0119,1.04724,1.0127,1.02732,.96225,.8965,.97783,.93574,.94818,1.30679,1.0675,1.11826,.99821,1.0557,1.0326,1.2,1.0675,.96225,1.0675,1.0326,.74817,1,1,1,1,1,1,1,1,1,1,1,1,1.03754,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.87533,1,1,1,1,1,1,1,1,1,1,1,1,.98705,1,1,1,1,1,1,.98448,.9973,.98448,.9973,.98448,.9973,.83089,.96777,1,1.20088,.89903,1,1,.75155,.94945,.94945,.94945,.94945,1.12317,1.12317,1.12317,.67603,.67603,1.15621,.73584,1.21191,1.22135,1.06483,.94868,.94868,.95996,1.24633,1,1.07497,.87709,.96927,1.01473,.96927,1,1,1,.77295,1,1,1.09836,1.09836,1.09836,1.01522,.86321,.94434,.8649,.94434,.86182,1,1,1.083,1,.91578,.86438,1.17308,1.18416,1.14589,.69825,.97622,1.96791,1.24822,1.24822,1.17308,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.17984,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10742,1.10742,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];f.SegoeuiItalicFactors=s;const e={lineHeight:1.33008,lineGap:0};f.SegoeuiItalicMetrics=e;const a=[1.76738,1,1,.98594,1.02285,1.10454,1.06234,.96927,.92037,1.19985,1.2046,.90616,.90616,1.07152,1.1714,.78032,1.20088,.78032,1.40246,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.78032,.78032,1.1714,1.1714,1.1714,.80597,.94084,.96706,.85944,.85734,.97093,.75842,.79936,.88198,.9831,.95782,.71387,.86969,.84636,1.07796,1.03584,.96924,.83968,.96924,.82826,.79649,.85771,.95132,.93119,.98965,.88433,.8287,.93365,1.08612,1.3638,1.08612,1.45786,.74627,.80499,.91484,1.05707,.92383,1.05882,.9403,1.12654,1.05882,1.01756,1.09011,1.09011,.99414,1.09011,1.034,1.01756,1.05356,1.05707,1.05882,1.04399,.84863,1.21968,1.01756,.95801,1.00068,.91797,.96777,.9043,.90351,.92105,.90351,1.1714,.85337,.96927,.96927,.99912,.96927,.92105,.80597,1.2434,1.20808,1.05937,.90957,1.1714,1.20808,.75155,.94261,1.24644,1.09971,1.09971,.84751,1,.85273,.78032,.61584,1.05425,1.17914,.90957,1.08665,1.11593,1.14169,.73381,.96706,.96706,.96706,.96706,.96706,.96706,.86035,.85734,.75842,.75842,.75842,.75842,.95782,.95782,.95782,.95782,.97093,1.03584,.96924,.96924,.96924,.96924,.96924,1.1714,.96924,.95132,.95132,.95132,.95132,.8287,.83968,.89049,.91484,.91484,.91484,.91484,.91484,.91484,.93575,.92383,.9403,.9403,.9403,.9403,.8717,.8717,.8717,.8717,1.00527,1.01756,1.05356,1.05356,1.05356,1.05356,1.05356,1.24644,.95923,1.01756,1.01756,1.01756,1.01756,.96777,1.05707,.96777,.96706,.91484,.96706,.91484,.96706,.91484,.85734,.92383,.85734,.92383,.85734,.92383,.85734,.92383,.97093,1.0969,.97093,1.05882,.75842,.9403,.75842,.9403,.75842,.9403,.75842,.9403,.75842,.9403,.88198,1.05882,.88198,1.05882,.88198,1.05882,1,1,.9831,1.01756,.9831,1.01756,.95782,.8717,.95782,.8717,.95782,.8717,.95782,1.09011,.95782,.8717,.84784,1.11551,.71387,1.09011,1,1,.99414,.84636,1.09011,1,1,.84636,1.0536,.84636,.94298,.84636,1.23297,1.03584,1.01756,1,1,1.03584,1.01756,1.00323,1.03444,1.01756,.96924,1.05356,.96924,1.05356,.96924,1.05356,.93066,.98293,.82826,1.04399,1,1,.82826,1.04399,.79649,.84863,.79649,.84863,.79649,.84863,.79649,.84863,1,1,.85771,1.17318,.85771,1.21968,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.98965,1.00068,.8287,.96777,.8287,.93365,.9043,.93365,.9043,.93365,.9043,1.08571,.96927,.96706,.91484,.86035,.93575,.96924,.95923,1,1,.85771,1.21968,1.11437,1.11437,.93109,.91202,.60411,.84164,.55572,1.01173,.97361,.81818,.81818,.96635,.78032,.72727,.92366,.98601,1.03405,.77968,1.09799,1.2,.96706,.85944,.85638,.96491,.75842,.93365,.9831,.96924,.95782,.86969,.94152,1.07796,1.03584,.78437,.96924,.98715,.83968,.83491,.85771,.8287,.94492,.88433,.9287,1.0098,.95782,.8287,1.0625,.98248,1.03424,1.2,1.01071,1.0625,.95246,1.03809,1.04912,.98248,1.00221,1.03424,1.05443,1.2,1.04785,.99609,1.00169,1.05176,.99346,1.05356,.9087,1.03004,.95542,.93117,1.23362,1.01071,1.07831,1.02512,1.05205,1.03502,1.2,1.01071,1.05356,1.01071,1.03502,.75842,1,1,1,1,1,1,1,1,1,1,1,1,1.03719,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.9403,1,1,1,1,1,1,1,1,1,1,1,1,1.04021,1,1,1,1,1,1,.98965,1.00068,.98965,1.00068,.98965,1.00068,.8287,.96777,1,1.20088,.89903,1,1,.75155,1.03077,1.03077,1.03077,1.03077,1.13196,1.13196,1.13196,.67428,.67428,1.16039,.73291,1.20996,1.22135,1.06483,.94868,.94868,.95996,1.24633,1,1.07497,.87796,.96927,1.01518,.96927,1,1,1,.77295,1,1,1.10539,1.10539,1.11358,1.06967,.86279,.94434,.86279,.94434,.86182,1,1,1.083,1,.91578,.86507,1.1714,1.18416,1.14589,.69825,.97622,1.9697,1.24822,1.24822,1.17238,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18083,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10938,1.10938,1,1,1,1.05425,1.09971,1.09971,1.09971,1,1,1,1,1,1,1,1,1,1,1];f.SegoeuiRegularFactors=a;const r={lineHeight:1.33008,lineGap:0};f.SegoeuiRegularMetrics=r},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PostScriptEvaluator=f.PostScriptCompiler=f.PDFFunctionFactory=void 0,f.isPDFFunction=l;var t=h(5),o=h(2),c=h(58),s=h(7),e=h(59);class a{constructor({xref:y,isEvalSupported:p=!0}){this.xref=y,this.isEvalSupported=p!==!1}create(y){const p=this.getCached(y);if(p)return p;const P=n.parse({xref:this.xref,isEvalSupported:this.isEvalSupported,fn:y instanceof t.Ref?this.xref.fetch(y):y});return this._cache(y,P),P}createFromArray(y){const p=this.getCached(y);if(p)return p;const P=n.parseArray({xref:this.xref,isEvalSupported:this.isEvalSupported,fnObj:y instanceof t.Ref?this.xref.fetch(y):y});return this._cache(y,P),P}getCached(y){let p;if(y instanceof t.Ref?p=y:y instanceof t.Dict?p=y.objId:y instanceof s.BaseStream&&(p=y.dict&&y.dict.objId),p){const P=this._localFunctionCache.getByRef(p);if(P)return P}return null}_cache(y,p){if(!p)throw new Error('PDFFunctionFactory._cache - expected "parsedFunction" argument.');let P;y instanceof t.Ref?P=y:y instanceof t.Dict?P=y.objId:y instanceof s.BaseStream&&(P=y.dict&&y.dict.objId),P&&this._localFunctionCache.set(null,P,p)}get _localFunctionCache(){return(0,o.shadow)(this,"_localFunctionCache",new e.LocalFunctionCache)}}f.PDFFunctionFactory=a;function r(R){if(!Array.isArray(R))return null;const y=R.length;for(let p=0;p<y;p++)if(typeof R[p]!="number"){const P=new Array(y);for(let E=0;E<y;E++)P[E]=+R[E];return P}return R}class n{static getSampleArray(y,p,P,E){let S,F,C=1;for(S=0,F=y.length;S<F;S++)C*=y[S];C*=p;const b=new Array(C);let D=0,U=0;const X=1/(2**P-1),G=E.getBytes((C*P+7)/8);let Y=0;for(S=0;S<C;S++){for(;D<P;)U<<=8,U|=G[Y++],D+=8;D-=P,b[S]=(U>>D)*X,U&=(1<<D)-1}return b}static parse({xref:y,isEvalSupported:p,fn:P}){const E=P.dict||P;switch(E.get("FunctionType")){case 0:return this.constructSampled({xref:y,isEvalSupported:p,fn:P,dict:E});case 1:break;case 2:return this.constructInterpolated({xref:y,isEvalSupported:p,dict:E});case 3:return this.constructStiched({xref:y,isEvalSupported:p,dict:E});case 4:return this.constructPostScript({xref:y,isEvalSupported:p,fn:P,dict:E})}throw new o.FormatError("Unknown type of function")}static parseArray({xref:y,isEvalSupported:p,fnObj:P}){if(!Array.isArray(P))return this.parse({xref:y,isEvalSupported:p,fn:P});const E=[];for(let S=0,F=P.length;S<F;S++)E.push(this.parse({xref:y,isEvalSupported:p,fn:y.fetchIfRef(P[S])}));return function(S,F,C,b){for(let D=0,U=E.length;D<U;D++)E[D](S,F,C,b+D)}}static constructSampled({xref:y,isEvalSupported:p,fn:P,dict:E}){function S($){const W=$.length,z=[];let B=0;for(let H=0;H<W;H+=2)z[B++]=[$[H],$[H+1]];return z}function F($,W,z,B,H){return B+($-W)*((H-B)/(z-W))}let C=r(E.getArray("Domain")),b=r(E.getArray("Range"));if(!C||!b)throw new o.FormatError("No domain or range");const D=C.length/2,U=b.length/2;C=S(C),b=S(b);const X=r(E.getArray("Size")),G=E.get("BitsPerSample"),Y=E.get("Order")||1;Y!==1&&(0,o.info)("No support for cubic spline interpolation: "+Y);let N=r(E.getArray("Encode"));if(N)N=S(N);else{N=[];for(let $=0;$<D;++$)N.push([0,X[$]-1])}let I=r(E.getArray("Decode"));I?I=S(I):I=b;const L=this.getSampleArray(X,U,G,P);return function(W,z,B,H){const q=1<<D,Z=new Float64Array(q),te=new Uint32Array(q);let Q,ee;for(ee=0;ee<q;ee++)Z[ee]=1;let J=U,ne=1;for(Q=0;Q<D;++Q){const re=C[Q][0],ae=C[Q][1],se=Math.min(Math.max(W[z+Q],re),ae);let oe=F(se,re,ae,N[Q][0],N[Q][1]);const me=X[Q];oe=Math.min(Math.max(oe,0),me-1);const xe=oe<me-1?Math.floor(oe):oe-1,Ae=xe+1-oe,Se=oe-xe,Fe=xe*J,Pe=Fe+J;for(ee=0;ee<q;ee++)ee&ne?(Z[ee]*=Se,te[ee]+=Pe):(Z[ee]*=Ae,te[ee]+=Fe);J*=me,ne<<=1}for(ee=0;ee<U;++ee){let re=0;for(Q=0;Q<q;Q++)re+=L[te[Q]+ee]*Z[Q];re=F(re,0,1,I[ee][0],I[ee][1]),B[H+ee]=Math.min(Math.max(re,b[ee][0]),b[ee][1])}}}static constructInterpolated({xref:y,isEvalSupported:p,dict:P}){const E=r(P.getArray("C0"))||[0],S=r(P.getArray("C1"))||[1],F=P.get("N"),C=[];for(let D=0,U=E.length;D<U;++D)C.push(S[D]-E[D]);const b=C.length;return function(U,X,G,Y){const N=F===1?U[X]:U[X]**F;for(let I=0;I<b;++I)G[Y+I]=E[I]+N*C[I]}}static constructStiched({xref:y,isEvalSupported:p,dict:P}){const E=r(P.getArray("Domain"));if(!E)throw new o.FormatError("No domain");if(E.length/2!==1)throw new o.FormatError("Bad domain for stiched function");const F=P.get("Functions"),C=[];for(let X=0,G=F.length;X<G;++X)C.push(this.parse({xref:y,isEvalSupported:p,fn:y.fetchIfRef(F[X])}));const b=r(P.getArray("Bounds")),D=r(P.getArray("Encode")),U=new Float32Array(1);return function(G,Y,N,I){const $=function(Q,ee,J){return Q>J?Q=J:Q<ee&&(Q=ee),Q}(G[Y],E[0],E[1]),W=b.length;let z;for(z=0;z<W&&!($<b[z]);++z);let B=E[0];z>0&&(B=b[z-1]);let H=E[1];z<b.length&&(H=b[z]);const q=D[2*z],Z=D[2*z+1];U[0]=B===H?q:q+($-B)*(Z-q)/(H-B),C[z](U,0,N,I)}}static constructPostScript({xref:y,isEvalSupported:p,fn:P,dict:E}){const S=r(E.getArray("Domain")),F=r(E.getArray("Range"));if(!S)throw new o.FormatError("No domain.");if(!F)throw new o.FormatError("No range.");const C=new c.PostScriptLexer(P),D=new c.PostScriptParser(C).parse();if(p&&o.FeatureTest.isEvalSupported){const $=new T().compile(D,S,F);if($)return new Function("src","srcOffset","dest","destOffset",$)}(0,o.info)("Unable to compile PS function");const U=F.length>>1,X=S.length>>1,G=new d(D),Y=Object.create(null);let I=2048*4;const L=new Float32Array(X);return function(W,z,B,H){let q,Z,te="";const Q=L;for(q=0;q<X;q++)Z=W[z+q],Q[q]=Z,te+=Z+"_";const ee=Y[te];if(ee!==void 0){B.set(ee,H);return}const J=new Float32Array(U),ne=G.execute(Q),re=ne.length-U;for(q=0;q<U;q++){Z=ne[re+q];let ae=F[q*2];Z<ae?Z=ae:(ae=F[q*2+1],Z>ae&&(Z=ae)),J[q]=Z}I>0&&(I--,Y[te]=J),B.set(J,H)}}}function l(R){let y;if(typeof R!="object")return!1;if(R instanceof t.Dict)y=R;else if(R instanceof s.BaseStream)y=R.dict;else return!1;return y.has("FunctionType")}class u{static get MAX_STACK_SIZE(){return(0,o.shadow)(this,"MAX_STACK_SIZE",100)}constructor(y){this.stack=y?Array.prototype.slice.call(y,0):[]}push(y){if(this.stack.length>=u.MAX_STACK_SIZE)throw new Error("PostScript function stack overflow.");this.stack.push(y)}pop(){if(this.stack.length<=0)throw new Error("PostScript function stack underflow.");return this.stack.pop()}copy(y){if(this.stack.length+y>=u.MAX_STACK_SIZE)throw new Error("PostScript function stack overflow.");const p=this.stack;for(let P=p.length-y,E=y-1;E>=0;E--,P++)p.push(p[P])}index(y){this.push(this.stack[this.stack.length-y-1])}roll(y,p){const P=this.stack,E=P.length-y,S=P.length-1,F=E+(p-Math.floor(p/y)*y);for(let C=E,b=S;C<b;C++,b--){const D=P[C];P[C]=P[b],P[b]=D}for(let C=E,b=F-1;C<b;C++,b--){const D=P[C];P[C]=P[b],P[b]=D}for(let C=F,b=S;C<b;C++,b--){const D=P[C];P[C]=P[b],P[b]=D}}}class d{constructor(y){this.operators=y}execute(y){const p=new u(y);let P=0;const E=this.operators,S=E.length;let F,C,b;for(;P<S;){if(F=E[P++],typeof F=="number"){p.push(F);continue}switch(F){case"jz":b=p.pop(),C=p.pop(),C||(P=b);break;case"j":C=p.pop(),P=C;break;case"abs":C=p.pop(),p.push(Math.abs(C));break;case"add":b=p.pop(),C=p.pop(),p.push(C+b);break;case"and":b=p.pop(),C=p.pop(),typeof C=="boolean"&&typeof b=="boolean"?p.push(C&&b):p.push(C&b);break;case"atan":C=p.pop(),p.push(Math.atan(C));break;case"bitshift":b=p.pop(),C=p.pop(),C>0?p.push(C<<b):p.push(C>>b);break;case"ceiling":C=p.pop(),p.push(Math.ceil(C));break;case"copy":C=p.pop(),p.copy(C);break;case"cos":C=p.pop(),p.push(Math.cos(C));break;case"cvi":C=p.pop()|0,p.push(C);break;case"cvr":break;case"div":b=p.pop(),C=p.pop(),p.push(C/b);break;case"dup":p.copy(1);break;case"eq":b=p.pop(),C=p.pop(),p.push(C===b);break;case"exch":p.roll(2,1);break;case"exp":b=p.pop(),C=p.pop(),p.push(C**b);break;case"false":p.push(!1);break;case"floor":C=p.pop(),p.push(Math.floor(C));break;case"ge":b=p.pop(),C=p.pop(),p.push(C>=b);break;case"gt":b=p.pop(),C=p.pop(),p.push(C>b);break;case"idiv":b=p.pop(),C=p.pop(),p.push(C/b|0);break;case"index":C=p.pop(),p.index(C);break;case"le":b=p.pop(),C=p.pop(),p.push(C<=b);break;case"ln":C=p.pop(),p.push(Math.log(C));break;case"log":C=p.pop(),p.push(Math.log(C)/Math.LN10);break;case"lt":b=p.pop(),C=p.pop(),p.push(C<b);break;case"mod":b=p.pop(),C=p.pop(),p.push(C%b);break;case"mul":b=p.pop(),C=p.pop(),p.push(C*b);break;case"ne":b=p.pop(),C=p.pop(),p.push(C!==b);break;case"neg":C=p.pop(),p.push(-C);break;case"not":C=p.pop(),typeof C=="boolean"?p.push(!C):p.push(~C);break;case"or":b=p.pop(),C=p.pop(),typeof C=="boolean"&&typeof b=="boolean"?p.push(C||b):p.push(C|b);break;case"pop":p.pop();break;case"roll":b=p.pop(),C=p.pop(),p.roll(C,b);break;case"round":C=p.pop(),p.push(Math.round(C));break;case"sin":C=p.pop(),p.push(Math.sin(C));break;case"sqrt":C=p.pop(),p.push(Math.sqrt(C));break;case"sub":b=p.pop(),C=p.pop(),p.push(C-b);break;case"true":p.push(!0);break;case"truncate":C=p.pop(),C=C<0?Math.ceil(C):Math.floor(C),p.push(C);break;case"xor":b=p.pop(),C=p.pop(),typeof C=="boolean"&&typeof b=="boolean"?p.push(C!==b):p.push(C^b);break;default:throw new o.FormatError(`Unknown operator ${F}`)}}return p.stack}}f.PostScriptEvaluator=d;class i{constructor(y){this.type=y}visit(y){(0,o.unreachable)("abstract method")}}class g extends i{constructor(y,p,P){super("args"),this.index=y,this.min=p,this.max=P}visit(y){y.visitArgument(this)}}class x extends i{constructor(y){super("literal"),this.number=y,this.min=y,this.max=y}visit(y){y.visitLiteral(this)}}class m extends i{constructor(y,p,P,E,S){super("binary"),this.op=y,this.arg1=p,this.arg2=P,this.min=E,this.max=S}visit(y){y.visitBinaryOperation(this)}}class A extends i{constructor(y,p){super("max"),this.arg=y,this.min=y.min,this.max=p}visit(y){y.visitMin(this)}}class k extends i{constructor(y,p,P){super("var"),this.index=y,this.min=p,this.max=P}visit(y){y.visitVariable(this)}}class v extends i{constructor(y,p){super("definition"),this.variable=y,this.arg=p}visit(y){y.visitVariableDefinition(this)}}class _{constructor(){this.parts=[]}visitArgument(y){this.parts.push("Math.max(",y.min,", Math.min(",y.max,", src[srcOffset + ",y.index,"]))")}visitVariable(y){this.parts.push("v",y.index)}visitLiteral(y){this.parts.push(y.number)}visitBinaryOperation(y){this.parts.push("("),y.arg1.visit(this),this.parts.push(" ",y.op," "),y.arg2.visit(this),this.parts.push(")")}visitVariableDefinition(y){this.parts.push("var "),y.variable.visit(this),this.parts.push(" = "),y.arg.visit(this),this.parts.push(";")}visitMin(y){this.parts.push("Math.min("),y.arg.visit(this),this.parts.push(", ",y.max,")")}toString(){return this.parts.join("")}}function K(R,y){return y.type==="literal"&&y.number===0?R:R.type==="literal"&&R.number===0?y:y.type==="literal"&&R.type==="literal"?new x(R.number+y.number):new m("+",R,y,R.min+y.min,R.max+y.max)}function M(R,y){if(y.type==="literal"){if(y.number===0)return new x(0);if(y.number===1)return R;if(R.type==="literal")return new x(R.number*y.number)}if(R.type==="literal"){if(R.number===0)return new x(0);if(R.number===1)return y}const p=Math.min(R.min*y.min,R.min*y.max,R.max*y.min,R.max*y.max),P=Math.max(R.min*y.min,R.min*y.max,R.max*y.min,R.max*y.max);return new m("*",R,y,p,P)}function j(R,y){if(y.type==="literal"){if(y.number===0)return R;if(R.type==="literal")return new x(R.number-y.number)}return y.type==="binary"&&y.op==="-"&&R.type==="literal"&&R.number===1&&y.arg1.type==="literal"&&y.arg1.number===1?y.arg2:new m("-",R,y,R.min-y.max,R.max-y.min)}function O(R,y){return R.min>=y?new x(y):R.max<=y?R:new A(R,y)}class T{compile(y,p,P){const E=[],S=[],F=p.length>>1,C=P.length>>1;let b=0,D,U,X,G,Y,N,I,L;for(let W=0;W<F;W++)E.push(new g(W,p[W*2],p[W*2+1]));for(let W=0,z=y.length;W<z;W++){if(L=y[W],typeof L=="number"){E.push(new x(L));continue}switch(L){case"add":if(E.length<2)return null;G=E.pop(),X=E.pop(),E.push(K(X,G));break;case"cvr":if(E.length<1)return null;break;case"mul":if(E.length<2)return null;G=E.pop(),X=E.pop(),E.push(M(X,G));break;case"sub":if(E.length<2)return null;G=E.pop(),X=E.pop(),E.push(j(X,G));break;case"exch":if(E.length<2)return null;Y=E.pop(),N=E.pop(),E.push(Y,N);break;case"pop":if(E.length<1)return null;E.pop();break;case"index":if(E.length<1||(X=E.pop(),X.type!=="literal")||(D=X.number,D<0||!Number.isInteger(D)||E.length<D))return null;if(Y=E[E.length-D-1],Y.type==="literal"||Y.type==="var"){E.push(Y);break}I=new k(b++,Y.min,Y.max),E[E.length-D-1]=I,E.push(I),S.push(new v(I,Y));break;case"dup":if(E.length<1)return null;if(typeof y[W+1]=="number"&&y[W+2]==="gt"&&y[W+3]===W+7&&y[W+4]==="jz"&&y[W+5]==="pop"&&y[W+6]===y[W+1]){X=E.pop(),E.push(O(X,y[W+1])),W+=6;break}if(Y=E.at(-1),Y.type==="literal"||Y.type==="var"){E.push(Y);break}I=new k(b++,Y.min,Y.max),E[E.length-1]=I,E.push(I),S.push(new v(I,Y));break;case"roll":if(E.length<2||(G=E.pop(),X=E.pop(),G.type!=="literal"||X.type!=="literal")||(U=G.number,D=X.number,D<=0||!Number.isInteger(D)||!Number.isInteger(U)||E.length<D))return null;if(U=(U%D+D)%D,U===0)break;Array.prototype.push.apply(E,E.splice(E.length-D,D-U));break;default:return null}}if(E.length!==C)return null;const $=[];for(const W of S){const z=new _;W.visit(z),$.push(z.toString())}for(let W=0,z=E.length;W<z;W++){const B=E[W],H=new _;B.visit(H);const q=P[W*2],Z=P[W*2+1],te=[H.toString()];q>B.min&&(te.unshift("Math.max(",q,", "),te.push(")")),Z<B.max&&(te.unshift("Math.min(",Z,", "),te.push(")")),te.unshift("dest[destOffset + ",W,"] = "),te.push(";"),$.push(te.join(""))}return $.join(`
`)}}f.PostScriptCompiler=T},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PostScriptParser=f.PostScriptLexer=void 0;var t=h(2),o=h(5),c=h(6);class s{constructor(l){this.lexer=l,this.operators=[],this.token=null,this.prev=null}nextToken(){this.prev=this.token,this.token=this.lexer.getToken()}accept(l){return this.token.type===l?(this.nextToken(),!0):!1}expect(l){if(this.accept(l))return!0;throw new t.FormatError(`Unexpected symbol: found ${this.token.type} expected ${l}.`)}parse(){return this.nextToken(),this.expect(e.LBRACE),this.parseBlock(),this.expect(e.RBRACE),this.operators}parseBlock(){for(;;)if(this.accept(e.NUMBER))this.operators.push(this.prev.value);else if(this.accept(e.OPERATOR))this.operators.push(this.prev.value);else if(this.accept(e.LBRACE))this.parseCondition();else return}parseCondition(){const l=this.operators.length;if(this.operators.push(null,null),this.parseBlock(),this.expect(e.RBRACE),this.accept(e.IF))this.operators[l]=this.operators.length,this.operators[l+1]="jz";else if(this.accept(e.LBRACE)){const u=this.operators.length;this.operators.push(null,null);const d=this.operators.length;this.parseBlock(),this.expect(e.RBRACE),this.expect(e.IFELSE),this.operators[u]=this.operators.length,this.operators[u+1]="j",this.operators[l]=d,this.operators[l+1]="jz"}else throw new t.FormatError("PS Function: error parsing conditional.")}}f.PostScriptParser=s;const e={LBRACE:0,RBRACE:1,NUMBER:2,OPERATOR:3,IF:4,IFELSE:5};class a{static get opCache(){return(0,t.shadow)(this,"opCache",Object.create(null))}constructor(l,u){this.type=l,this.value=u}static getOperator(l){const u=a.opCache[l];return u||(a.opCache[l]=new a(e.OPERATOR,l))}static get LBRACE(){return(0,t.shadow)(this,"LBRACE",new a(e.LBRACE,"{"))}static get RBRACE(){return(0,t.shadow)(this,"RBRACE",new a(e.RBRACE,"}"))}static get IF(){return(0,t.shadow)(this,"IF",new a(e.IF,"IF"))}static get IFELSE(){return(0,t.shadow)(this,"IFELSE",new a(e.IFELSE,"IFELSE"))}}class r{constructor(l){this.stream=l,this.nextChar(),this.strBuf=[]}nextChar(){return this.currentChar=this.stream.getByte()}getToken(){let l=!1,u=this.currentChar;for(;;){if(u<0)return o.EOF;if(l)(u===10||u===13)&&(l=!1);else if(u===37)l=!0;else if(!(0,c.isWhiteSpace)(u))break;u=this.nextChar()}switch(u|0){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return new a(e.NUMBER,this.getNumber());case 123:return this.nextChar(),a.LBRACE;case 125:return this.nextChar(),a.RBRACE}const d=this.strBuf;for(d.length=0,d[0]=String.fromCharCode(u);(u=this.nextChar())>=0&&(u>=65&&u<=90||u>=97&&u<=122);)d.push(String.fromCharCode(u));const i=d.join("");switch(i.toLowerCase()){case"if":return a.IF;case"ifelse":return a.IFELSE;default:return a.getOperator(i)}}getNumber(){let l=this.currentChar;const u=this.strBuf;for(u.length=0,u[0]=String.fromCharCode(l);(l=this.nextChar())>=0&&(l>=48&&l<=57||l===45||l===46);)u.push(String.fromCharCode(l));const d=parseFloat(u.join(""));if(isNaN(d))throw new t.FormatError(`Invalid floating point number: ${d}`);return d}}f.PostScriptLexer=r},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.LocalTilingPatternCache=f.LocalImageCache=f.LocalGStateCache=f.LocalFunctionCache=f.LocalColorSpaceCache=f.GlobalImageCache=void 0;var t=h(2),o=h(5);class c{constructor(d){this.constructor===c&&(0,t.unreachable)("Cannot initialize BaseLocalCache."),this._onlyRefs=(d&&d.onlyRefs)===!0,this._onlyRefs||(this._nameRefMap=new Map,this._imageMap=new Map),this._imageCache=new o.RefSetCache}getByName(d){this._onlyRefs&&(0,t.unreachable)("Should not call `getByName` method.");const i=this._nameRefMap.get(d);return i?this.getByRef(i):this._imageMap.get(d)||null}getByRef(d){return this._imageCache.get(d)||null}set(d,i,g){(0,t.unreachable)("Abstract method `set` called.")}}class s extends c{set(d,i=null,g){if(typeof d!="string")throw new Error('LocalImageCache.set - expected "name" argument.');if(i){if(this._imageCache.has(i))return;this._nameRefMap.set(d,i),this._imageCache.put(i,g);return}this._imageMap.has(d)||this._imageMap.set(d,g)}}f.LocalImageCache=s;class e extends c{set(d=null,i=null,g){if(typeof d!="string"&&!i)throw new Error('LocalColorSpaceCache.set - expected "name" and/or "ref" argument.');if(i){if(this._imageCache.has(i))return;d!==null&&this._nameRefMap.set(d,i),this._imageCache.put(i,g);return}this._imageMap.has(d)||this._imageMap.set(d,g)}}f.LocalColorSpaceCache=e;class a extends c{constructor(d){super({onlyRefs:!0})}set(d=null,i,g){if(!i)throw new Error('LocalFunctionCache.set - expected "ref" argument.');this._imageCache.has(i)||this._imageCache.put(i,g)}}f.LocalFunctionCache=a;class r extends c{set(d,i=null,g){if(typeof d!="string")throw new Error('LocalGStateCache.set - expected "name" argument.');if(i){if(this._imageCache.has(i))return;this._nameRefMap.set(d,i),this._imageCache.put(i,g);return}this._imageMap.has(d)||this._imageMap.set(d,g)}}f.LocalGStateCache=r;class n extends c{constructor(d){super({onlyRefs:!0})}set(d=null,i,g){if(!i)throw new Error('LocalTilingPatternCache.set - expected "ref" argument.');this._imageCache.has(i)||this._imageCache.put(i,g)}}f.LocalTilingPatternCache=n;class l{static get NUM_PAGES_THRESHOLD(){return(0,t.shadow)(this,"NUM_PAGES_THRESHOLD",2)}static get MIN_IMAGES_TO_CACHE(){return(0,t.shadow)(this,"MIN_IMAGES_TO_CACHE",10)}static get MAX_BYTE_SIZE(){return(0,t.shadow)(this,"MAX_BYTE_SIZE",4e7)}constructor(){this._refCache=new o.RefSetCache,this._imageCache=new o.RefSetCache}get _byteSize(){let d=0;for(const i of this._imageCache)d+=i.byteSize;return d}get _cacheLimitReached(){return!(this._imageCache.size<l.MIN_IMAGES_TO_CACHE||this._byteSize<l.MAX_BYTE_SIZE)}shouldCache(d,i){const g=this._refCache.get(d);return!((g?g.size+(g.has(i)?0:1):1)<l.NUM_PAGES_THRESHOLD||!this._imageCache.has(d)&&this._cacheLimitReached)}addPageIndex(d,i){let g=this._refCache.get(d);g||(g=new Set,this._refCache.put(d,g)),g.add(i)}addByteSize(d,i){const g=this._imageCache.get(d);g&&(g.byteSize||(g.byteSize=i))}getData(d,i){const g=this._refCache.get(d);if(!g||g.size<l.NUM_PAGES_THRESHOLD)return null;const x=this._imageCache.get(d);return x?(g.add(i),x):null}setData(d,i){if(!this._refCache.has(d))throw new Error('GlobalImageCache.setData - expected "addPageIndex" to have been called.');if(!this._imageCache.has(d)){if(this._cacheLimitReached){(0,t.warn)("GlobalImageCache.setData - cache limit reached.");return}this._imageCache.put(d,i)}}clear(d=!1){d||this._refCache.clear(),this._imageCache.clear()}}f.GlobalImageCache=l},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.bidi=i;var t=h(2);const o=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],c=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function s(g){return(g&1)!==0}function e(g){return(g&1)===0}function a(g,x,m){let A,k;for(A=x,k=g.length;A<k;++A)if(g[A]!==m)return A;return A}function r(g,x,m,A){for(let k=x;k<m;++k)g[k]=A}function n(g,x,m){for(let A=x,k=m-1;A<k;++A,--k){const v=g[A];g[A]=g[k],g[k]=v}}function l(g,x,m=!1){let A="ltr";return m?A="ttb":x||(A="rtl"),{str:g,dir:A}}const u=[],d=[];function i(g,x=-1,m=!1){let A=!0;const k=g.length;if(k===0||m)return l(g,A,m);u.length=k,d.length=k;let v=0,_,K;for(_=0;_<k;++_){u[_]=g.charAt(_);const S=g.charCodeAt(_);let F="L";S<=255?F=o[S]:1424<=S&&S<=1524?F="R":1536<=S&&S<=1791?(F=c[S&255],F||(0,t.warn)("Bidi: invalid Unicode character "+S.toString(16))):1792<=S&&S<=2220&&(F="AL"),(F==="R"||F==="AL"||F==="AN")&&v++,d[_]=F}if(v===0)return A=!0,l(g,A);x===-1&&(v/k<.3&&k>4?(A=!0,x=0):(A=!1,x=1));const M=[];for(_=0;_<k;++_)M[_]=x;const j=s(x)?"R":"L",O=j,T=O;let R=O;for(_=0;_<k;++_)d[_]==="NSM"?d[_]=R:R=d[_];R=O;let y;for(_=0;_<k;++_)y=d[_],y==="EN"?d[_]=R==="AL"?"AN":"EN":(y==="R"||y==="L"||y==="AL")&&(R=y);for(_=0;_<k;++_)y=d[_],y==="AL"&&(d[_]="R");for(_=1;_<k-1;++_)d[_]==="ES"&&d[_-1]==="EN"&&d[_+1]==="EN"&&(d[_]="EN"),d[_]==="CS"&&(d[_-1]==="EN"||d[_-1]==="AN")&&d[_+1]===d[_-1]&&(d[_]=d[_-1]);for(_=0;_<k;++_)if(d[_]==="EN"){for(let S=_-1;S>=0&&d[S]==="ET";--S)d[S]="EN";for(let S=_+1;S<k&&d[S]==="ET";++S)d[S]="EN"}for(_=0;_<k;++_)y=d[_],(y==="WS"||y==="ES"||y==="ET"||y==="CS")&&(d[_]="ON");for(R=O,_=0;_<k;++_)y=d[_],y==="EN"?d[_]=R==="L"?"L":"EN":(y==="R"||y==="L")&&(R=y);for(_=0;_<k;++_)if(d[_]==="ON"){const S=a(d,_+1,"ON");let F=O;_>0&&(F=d[_-1]);let C=T;S+1<k&&(C=d[S+1]),F!=="L"&&(F="R"),C!=="L"&&(C="R"),F===C&&r(d,_,S,F),_=S-1}for(_=0;_<k;++_)d[_]==="ON"&&(d[_]=j);for(_=0;_<k;++_)y=d[_],e(M[_])?y==="R"?M[_]+=1:(y==="AN"||y==="EN")&&(M[_]+=2):(y==="L"||y==="AN"||y==="EN")&&(M[_]+=1);let p=-1,P=99,E;for(_=0,K=M.length;_<K;++_)E=M[_],p<E&&(p=E),P>E&&s(E)&&(P=E);for(E=p;E>=P;--E){let S=-1;for(_=0,K=M.length;_<K;++_)M[_]<E?S>=0&&(n(u,S,_),S=-1):S<0&&(S=_);S>=0&&n(u,S,M.length)}for(_=0,K=u.length;_<K;++_){const S=u[_];(S==="<"||S===">")&&(u[_]="")}return l(u.join(""),A)}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.MurmurHash3_64=void 0;var t=h(2);const o=3285377520,c=4294901760,s=65535;class e{constructor(r){this.h1=r?r&4294967295:o,this.h2=r?r&4294967295:o}update(r){let n,l;if(typeof r=="string"){n=new Uint8Array(r.length*2),l=0;for(let M=0,j=r.length;M<j;M++){const O=r.charCodeAt(M);O<=255?n[l++]=O:(n[l++]=O>>>8,n[l++]=O&255)}}else if((0,t.isArrayBuffer)(r))n=r.slice(),l=n.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const u=l>>2,d=l-u*4,i=new Uint32Array(n.buffer,0,u);let g=0,x=0,m=this.h1,A=this.h2;const k=3432918353,v=461845907,_=k&s,K=v&s;for(let M=0;M<u;M++)M&1?(g=i[M],g=g*k&c|g*_&s,g=g<<15|g>>>17,g=g*v&c|g*K&s,m^=g,m=m<<13|m>>>19,m=m*5+3864292196):(x=i[M],x=x*k&c|x*_&s,x=x<<15|x>>>17,x=x*v&c|x*K&s,A^=x,A=A<<13|A>>>19,A=A*5+3864292196);switch(g=0,d){case 3:g^=n[u*4+2]<<16;case 2:g^=n[u*4+1]<<8;case 1:g^=n[u*4],g=g*k&c|g*_&s,g=g<<15|g>>>17,g=g*v&c|g*K&s,u&1?m^=g:A^=g}this.h1=m,this.h2=A}hexdigest(){let r=this.h1,n=this.h2;r^=n>>>1,r=r*3981806797&c|r*36045&s,n=n*4283543511&c|((n<<16|r>>>16)*2950163797&c)>>>16,r^=n>>>1,r=r*444984403&c|r*60499&s,n=n*3301882366&c|((n<<16|r>>>16)*3120437893&c)>>>16,r^=n>>>1;const l=(r>>>0).toString(16),u=(n>>>0).toString(16);return l.padStart(8,"0")+u.padStart(8,"0")}}f.MurmurHash3_64=e},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.OperatorList=void 0;var t=h(2);function o(r,n,l,u,d){let i=r;for(let g=0,x=n.length-1;g<x;g++){const m=n[g];i=i[m]||(i[m]=[])}i[n.at(-1)]={checkFn:l,iterateFn:u,processFn:d}}const c=[];o(c,[t.OPS.save,t.OPS.transform,t.OPS.paintInlineImageXObject,t.OPS.restore],null,function(n,l){const u=n.fnArray,d=n.iCurr-3,i=(l-d)%4;switch(i){case 0:return u[l]===t.OPS.save;case 1:return u[l]===t.OPS.transform;case 2:return u[l]===t.OPS.paintInlineImageXObject;case 3:return u[l]===t.OPS.restore}throw new Error(`iterateInlineImageGroup - invalid pos: ${i}`)},function(n,l){const x=n.fnArray,m=n.argsArray,A=n.iCurr,k=A-3,v=A-2,_=A-1,K=Math.min(Math.floor((l-k)/4),200);if(K<10)return l-(l-k)%4;let M=0;const j=[];let O=0,T=1,R=1;for(let S=0;S<K;S++){const F=m[v+(S<<2)],C=m[_+(S<<2)][0];T+C.width>1e3&&(M=Math.max(M,T),R+=O+2,T=0,O=0),j.push({transform:F,x:T,y:R,w:C.width,h:C.height}),T+=C.width+2,O=Math.max(O,C.height)}const y=Math.max(M,T)+1,p=R+O+1,P=new Uint8Array(y*p*4),E=y<<2;for(let S=0;S<K;S++){const F=m[_+(S<<2)][0].data,C=j[S].w<<2;let b=0,D=j[S].x+j[S].y*y<<2;P.set(F.subarray(0,C),D-E);for(let U=0,X=j[S].h;U<X;U++)P.set(F.subarray(b,b+C),D),b+=C,D+=E;for(P.set(F.subarray(b-C,b),D);D>=0;)F[D-4]=F[D],F[D-3]=F[D+1],F[D-2]=F[D+2],F[D-1]=F[D+3],F[D+C]=F[D+C-4],F[D+C+1]=F[D+C-3],F[D+C+2]=F[D+C-2],F[D+C+3]=F[D+C-1],D-=E}return x.splice(k,K*4,t.OPS.paintInlineImageXObjectGroup),m.splice(k,K*4,[{width:y,height:p,kind:t.ImageKind.RGBA_32BPP,data:P},j]),k+1}),o(c,[t.OPS.save,t.OPS.transform,t.OPS.paintImageMaskXObject,t.OPS.restore],null,function(n,l){const u=n.fnArray,d=n.iCurr-3,i=(l-d)%4;switch(i){case 0:return u[l]===t.OPS.save;case 1:return u[l]===t.OPS.transform;case 2:return u[l]===t.OPS.paintImageMaskXObject;case 3:return u[l]===t.OPS.restore}throw new Error(`iterateImageMaskGroup - invalid pos: ${i}`)},function(n,l){const g=n.fnArray,x=n.argsArray,m=n.iCurr,A=m-3,k=m-2,v=m-1;let _=Math.floor((l-A)/4);if(_<10)return l-(l-A)%4;let K=!1,M,j;const O=x[v][0],T=x[k][0],R=x[k][1],y=x[k][2],p=x[k][3];if(R===y){K=!0,M=k+4;let P=v+4;for(let E=1;E<_;E++,M+=4,P+=4)if(j=x[M],x[P][0]!==O||j[0]!==T||j[1]!==R||j[2]!==y||j[3]!==p){E<10?K=!1:_=E;break}}if(K){_=Math.min(_,1e3);const P=new Float32Array(_*2);M=k;for(let E=0;E<_;E++,M+=4)j=x[M],P[E<<1]=j[4],P[(E<<1)+1]=j[5];g.splice(A,_*4,t.OPS.paintImageMaskXObjectRepeat),x.splice(A,_*4,[O,T,R,y,p,P])}else{_=Math.min(_,100);const P=[];for(let E=0;E<_;E++){j=x[k+(E<<2)];const S=x[v+(E<<2)][0];P.push({data:S.data,width:S.width,height:S.height,interpolate:S.interpolate,count:S.count,transform:j})}g.splice(A,_*4,t.OPS.paintImageMaskXObjectGroup),x.splice(A,_*4,[P])}return A+1}),o(c,[t.OPS.save,t.OPS.transform,t.OPS.paintImageXObject,t.OPS.restore],function(r){const n=r.argsArray,l=r.iCurr-2;return n[l][1]===0&&n[l][2]===0},function(n,l){const u=n.fnArray,d=n.argsArray,i=n.iCurr-3,g=(l-i)%4;switch(g){case 0:return u[l]===t.OPS.save;case 1:if(u[l]!==t.OPS.transform)return!1;const x=n.iCurr-2,m=d[x][0],A=d[x][3];return!(d[l][0]!==m||d[l][1]!==0||d[l][2]!==0||d[l][3]!==A);case 2:if(u[l]!==t.OPS.paintImageXObject)return!1;const k=n.iCurr-1,v=d[k][0];return d[l][0]===v;case 3:return u[l]===t.OPS.restore}throw new Error(`iterateImageGroup - invalid pos: ${g}`)},function(r,n){const d=r.fnArray,i=r.argsArray,g=r.iCurr,x=g-3,m=g-2,A=g-1,k=i[A][0],v=i[m][0],_=i[m][3],K=Math.min(Math.floor((n-x)/4),1e3);if(K<3)return n-(n-x)%4;const M=new Float32Array(K*2);let j=m;for(let T=0;T<K;T++,j+=4){const R=i[j];M[T<<1]=R[4],M[(T<<1)+1]=R[5]}const O=[k,v,_,M];return d.splice(x,K*4,t.OPS.paintImageXObjectRepeat),i.splice(x,K*4,O),x+1}),o(c,[t.OPS.beginText,t.OPS.setFont,t.OPS.setTextMatrix,t.OPS.showText,t.OPS.endText],null,function(n,l){const u=n.fnArray,d=n.argsArray,i=n.iCurr-4,g=(l-i)%5;switch(g){case 0:return u[l]===t.OPS.beginText;case 1:return u[l]===t.OPS.setFont;case 2:return u[l]===t.OPS.setTextMatrix;case 3:if(u[l]!==t.OPS.showText)return!1;const x=n.iCurr-3,m=d[x][0],A=d[x][1];return!(d[l][0]!==m||d[l][1]!==A);case 4:return u[l]===t.OPS.endText}throw new Error(`iterateShowTextGroup - invalid pos: ${g}`)},function(r,n){const d=r.fnArray,i=r.argsArray,g=r.iCurr,x=g-4,m=g-3,A=g-2,k=g-1,v=g,_=i[m][0],K=i[m][1];let M=Math.min(Math.floor((n-x)/5),1e3);if(M<3)return n-(n-x)%5;let j=x;x>=4&&d[x-4]===d[m]&&d[x-3]===d[A]&&d[x-2]===d[k]&&d[x-1]===d[v]&&i[x-4][0]===_&&i[x-4][1]===K&&(M++,j-=5);let O=j+4;for(let T=1;T<M;T++)d.splice(O,3),i.splice(O,3),O+=2;return O+1});class s{constructor(n){this.queue=n}_optimize(){}push(n,l){this.queue.fnArray.push(n),this.queue.argsArray.push(l),this._optimize()}flush(){}reset(){}}class e extends s{constructor(n){super(n),this.state=null,this.context={iCurr:0,fnArray:n.fnArray,argsArray:n.argsArray},this.match=null,this.lastProcessed=0}_optimize(){const n=this.queue.fnArray;let l=this.lastProcessed,u=n.length,d=this.state,i=this.match;if(!d&&!i&&l+1===u&&!c[n[l]]){this.lastProcessed=u;return}const g=this.context;for(;l<u;){if(i){if((0,i.iterateFn)(g,l)){l++;continue}if(l=(0,i.processFn)(g,l+1),u=n.length,i=null,d=null,l>=u)break}if(d=(d||c)[n[l]],!d||Array.isArray(d)){l++;continue}if(g.iCurr=l,l++,d.checkFn&&!(0,d.checkFn)(g)){d=null;continue}i=d,d=null}this.state=d,this.match=i,this.lastProcessed=l}flush(){for(;this.match;){const n=this.queue.fnArray.length;this.lastProcessed=(0,this.match.processFn)(this.context,n),this.match=null,this.state=null,this._optimize()}}reset(){this.state=null,this.match=null,this.lastProcessed=0}}class a{static get CHUNK_SIZE(){return(0,t.shadow)(this,"CHUNK_SIZE",1e3)}static get CHUNK_SIZE_ABOUT(){return(0,t.shadow)(this,"CHUNK_SIZE_ABOUT",this.CHUNK_SIZE-5)}constructor(n=0,l){this._streamSink=l,this.fnArray=[],this.argsArray=[],l&&!(n&t.RenderingIntentFlag.OPLIST)?this.optimizer=new e(this):this.optimizer=new s(this),this.dependencies=new Set,this._totalLength=0,this.weight=0,this._resolved=l?null:Promise.resolve()}get length(){return this.argsArray.length}get ready(){return this._resolved||this._streamSink.ready}get totalLength(){return this._totalLength+this.length}addOp(n,l){this.optimizer.push(n,l),this.weight++,this._streamSink&&(this.weight>=a.CHUNK_SIZE?this.flush():this.weight>=a.CHUNK_SIZE_ABOUT&&(n===t.OPS.restore||n===t.OPS.endText)&&this.flush())}addImageOps(n,l,u){u!==void 0&&this.addOp(t.OPS.beginMarkedContentProps,["OC",u]),this.addOp(n,l),u!==void 0&&this.addOp(t.OPS.endMarkedContent,[])}addDependency(n){this.dependencies.has(n)||(this.dependencies.add(n),this.addOp(t.OPS.dependency,[n]))}addDependencies(n){for(const l of n)this.addDependency(l)}addOpList(n){if(!(n instanceof a)){(0,t.warn)('addOpList - ignoring invalid "opList" parameter.');return}for(const l of n.dependencies)this.dependencies.add(l);for(let l=0,u=n.length;l<u;l++)this.addOp(n.fnArray[l],n.argsArray[l])}getIR(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length}}get _transfers(){const n=[],{fnArray:l,argsArray:u,length:d}=this;for(let i=0;i<d;i++)switch(l[i]){case t.OPS.paintInlineImageXObject:case t.OPS.paintInlineImageXObjectGroup:case t.OPS.paintImageMaskXObject:const g=u[i][0];!g.cached&&g.data&&g.data.buffer instanceof ArrayBuffer&&n.push(g.data.buffer);break}return n}flush(n=!1,l=null){this.optimizer.flush();const u=this.length;this._totalLength+=u,this._streamSink.enqueue({fnArray:this.fnArray,argsArray:this.argsArray,lastChunk:n,separateAnnots:l,length:u},1,this._transfers),this.dependencies.clear(),this.fnArray.length=0,this.argsArray.length=0,this.weight=0,this.optimizer.reset()}}f.OperatorList=a},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PDFImage=void 0;var t=h(2),o=h(64),c=h(7),s=h(14),e=h(19),a=h(27),r=h(30),n=h(5);function l(i,g,x,m){return i=g+i*x,i<0?i=0:i>m&&(i=m),i}function u(i,g,x,m,A,k){const v=A*k;let _;g<=8?_=new Uint8Array(v):g<=16?_=new Uint16Array(v):_=new Uint32Array(v);const K=x/A,M=m/k;let j,O,T,R=0,y;const p=new Uint16Array(A),P=x;for(j=0;j<A;j++)p[j]=Math.floor(j*K);for(j=0;j<k;j++)for(T=Math.floor(j*M)*P,O=0;O<A;O++)y=T+p[O],_[R++]=i[y];return _}class d{constructor({xref:g,res:x,image:m,isInline:A=!1,smask:k=null,mask:v=null,isMask:_=!1,pdfFunctionFactory:K,localColorSpaceCache:M}){this.image=m;const j=m.dict,O=j.get("F","Filter");let T;if(O instanceof n.Name)T=O.name;else if(Array.isArray(O)){const P=g.fetchIfRef(O[0]);P instanceof n.Name&&(T=P.name)}switch(T){case"JPXDecode":const P=new r.JpxImage;P.parseImageProperties(m.stream),m.stream.reset(),m.width=P.width,m.height=P.height,m.bitsPerComponent=P.bitsPerComponent,m.numComps=P.componentsCount;break;case"JBIG2Decode":m.bitsPerComponent=1,m.numComps=1;break}let R=j.get("W","Width"),y=j.get("H","Height");if(Number.isInteger(m.width)&&m.width>0&&Number.isInteger(m.height)&&m.height>0&&(m.width!==R||m.height!==y)&&((0,t.warn)("PDFImage - using the Width/Height of the image data, rather than the image dictionary."),R=m.width,y=m.height),R<1||y<1)throw new t.FormatError(`Invalid image width: ${R} or height: ${y}`);this.width=R,this.height=y,this.interpolate=j.get("I","Interpolate"),this.imageMask=j.get("IM","ImageMask")||!1,this.matte=j.get("Matte")||!1;let p=m.bitsPerComponent;if(!p&&(p=j.get("BPC","BitsPerComponent"),!p))if(this.imageMask)p=1;else throw new t.FormatError(`Bits per component missing in image: ${this.imageMask}`);if(this.bpc=p,!this.imageMask){let P=j.getRaw("CS")||j.getRaw("ColorSpace");if(!P)switch((0,t.info)("JPX images (which do not require color spaces)"),m.numComps){case 1:P=n.Name.get("DeviceGray");break;case 3:P=n.Name.get("DeviceRGB");break;case 4:P=n.Name.get("DeviceCMYK");break;default:throw new Error(`JPX images with ${m.numComps} color components not supported.`)}this.colorSpace=s.ColorSpace.parse({cs:P,xref:g,resources:A?x:null,pdfFunctionFactory:K,localColorSpaceCache:M}),this.numComps=this.colorSpace.numComps}if(this.decode=j.getArray("D","Decode"),this.needsDecode=!1,this.decode&&(this.colorSpace&&!this.colorSpace.isDefaultDecode(this.decode,p)||_&&!s.ColorSpace.isDefaultDecode(this.decode,1))){this.needsDecode=!0;const P=(1<<p)-1;this.decodeCoefficients=[],this.decodeAddends=[];const E=this.colorSpace&&this.colorSpace.name==="Indexed";for(let S=0,F=0;S<this.decode.length;S+=2,++F){const C=this.decode[S],b=this.decode[S+1];this.decodeCoefficients[F]=E?(b-C)/P:b-C,this.decodeAddends[F]=E?C:P*C}}k?this.smask=new d({xref:g,res:x,image:k,isInline:A,pdfFunctionFactory:K,localColorSpaceCache:M}):v&&(v instanceof c.BaseStream?v.dict.get("IM","ImageMask")?this.mask=new d({xref:g,res:x,image:v,isInline:A,isMask:!0,pdfFunctionFactory:K,localColorSpaceCache:M}):(0,t.warn)("Ignoring /Mask in image without /ImageMask."):this.mask=v)}static async buildImage({xref:g,res:x,image:m,isInline:A=!1,pdfFunctionFactory:k,localColorSpaceCache:v}){const _=m;let K=null,M=null;const j=m.dict.get("SMask"),O=m.dict.get("Mask");return j?j instanceof c.BaseStream?K=j:(0,t.warn)("Unsupported /SMask format."):O&&(O instanceof c.BaseStream||Array.isArray(O)?M=O:(0,t.warn)("Unsupported /Mask format.")),new d({xref:g,res:x,image:_,isInline:A,smask:K,mask:M,pdfFunctionFactory:k,localColorSpaceCache:v})}static createRawMask({imgArray:g,width:x,height:m,imageIsFromDecodeStream:A,inverseDecode:k,interpolate:v}){const _=(x+7>>3)*m,K=g.byteLength,M=_===K;let j,O;if(A&&(!k||M)?j=g:k?(j=new Uint8Array(_),j.set(g),j.fill(255,K)):j=new Uint8Array(g),k)for(O=0;O<K;O++)j[O]^=255;return{data:j,width:x,height:m,interpolate:v}}static createMask({imgArray:g,width:x,height:m,imageIsFromDecodeStream:A,inverseDecode:k,interpolate:v}){const _=x===1&&m===1&&k===(g.length===0||!!(g[0]&128));if(_)return{isSingleOpaquePixel:_};if(t.FeatureTest.isOffscreenCanvasSupported){const K=new OffscreenCanvas(x,m),M=K.getContext("2d"),j=M.createImageData(x,m);(0,o.applyMaskImageData)({src:g,dest:j.data,width:x,height:m,inverseDecode:k}),M.putImageData(j,0,0);const O=K.transferToImageBitmap();return{data:null,width:x,height:m,interpolate:v,bitmap:O}}return this.createRawMask({imgArray:g,width:x,height:m,inverseDecode:k,imageIsFromDecodeStream:A,interpolate:v})}get drawWidth(){return Math.max(this.width,this.smask&&this.smask.width||0,this.mask&&this.mask.width||0)}get drawHeight(){return Math.max(this.height,this.smask&&this.smask.height||0,this.mask&&this.mask.height||0)}decodeBuffer(g){const x=this.bpc,m=this.numComps,A=this.decodeAddends,k=this.decodeCoefficients,v=(1<<x)-1;let _,K;if(x===1){for(_=0,K=g.length;_<K;_++)g[_]=+!g[_];return}let M=0;for(_=0,K=this.width*this.height;_<K;_++)for(let j=0;j<m;j++)g[M]=l(g[M],A[j],k[j],v),M++}getComponents(g){const x=this.bpc;if(x===8)return g;const m=this.width,A=this.height,k=this.numComps,v=m*A*k;let _=0,K;x<=8?K=new Uint8Array(v):x<=16?K=new Uint16Array(v):K=new Uint32Array(v);const M=m*k,j=(1<<x)-1;let O=0,T,R;if(x===1){let y,p,P;for(let E=0;E<A;E++){for(p=O+(M&-8),P=O+M;O<p;)R=g[_++],K[O]=R>>7&1,K[O+1]=R>>6&1,K[O+2]=R>>5&1,K[O+3]=R>>4&1,K[O+4]=R>>3&1,K[O+5]=R>>2&1,K[O+6]=R>>1&1,K[O+7]=R&1,O+=8;if(O<P)for(R=g[_++],y=128;O<P;)K[O++]=+!!(R&y),y>>=1}}else{let y=0;for(R=0,O=0,T=v;O<T;++O){for(O%M===0&&(R=0,y=0);y<x;)R=R<<8|g[_++],y+=8;const p=y-x;let P=R>>p;P<0?P=0:P>j&&(P=j),K[O]=P,R&=(1<<p)-1,y=p}}return K}fillOpacity(g,x,m,A,k){const v=this.smask,_=this.mask;let K,M,j,O,T,R;if(v)M=v.width,j=v.height,K=new Uint8ClampedArray(M*j),v.fillGrayBuffer(K),(M!==x||j!==m)&&(K=u(K,v.bpc,M,j,x,m));else if(_)if(_ instanceof d){for(M=_.width,j=_.height,K=new Uint8ClampedArray(M*j),_.numComps=1,_.fillGrayBuffer(K),O=0,T=M*j;O<T;++O)K[O]=255-K[O];(M!==x||j!==m)&&(K=u(K,_.bpc,M,j,x,m))}else if(Array.isArray(_)){K=new Uint8ClampedArray(x*m);const y=this.numComps;for(O=0,T=x*m;O<T;++O){let p=0;const P=O*y;for(R=0;R<y;++R){const E=k[P+R],S=R*2;if(E<_[S]||E>_[S+1]){p=255;break}}K[O]=p}}else throw new t.FormatError("Unknown mask format.");if(K)for(O=0,R=3,T=x*A;O<T;++O,R+=4)g[R]=K[O];else for(O=0,R=3,T=x*A;O<T;++O,R+=4)g[R]=255}undoPreblend(g,x,m){const A=this.smask&&this.smask.matte;if(!A)return;const k=this.colorSpace.getRgb(A,0),v=k[0],_=k[1],K=k[2],M=x*m*4;for(let j=0;j<M;j+=4){const O=g[j+3];if(O===0){g[j]=255,g[j+1]=255,g[j+2]=255;continue}const T=255/O;g[j]=(g[j]-v)*T+v,g[j+1]=(g[j+1]-_)*T+_,g[j+2]=(g[j+2]-K)*T+K}}createImageData(g=!1){const x=this.drawWidth,m=this.drawHeight,A={width:x,height:m,interpolate:this.interpolate,kind:0,data:null},k=this.numComps,v=this.width,_=this.height,K=this.bpc,M=v*k*K+7>>3;if(!g){let p;if(this.colorSpace.name==="DeviceGray"&&K===1?p=t.ImageKind.GRAYSCALE_1BPP:this.colorSpace.name==="DeviceRGB"&&K===8&&!this.needsDecode&&(p=t.ImageKind.RGB_24BPP),p&&!this.smask&&!this.mask&&x===v&&m===_){if(A.kind=p,A.data=this.getImageBytes(_*M,{}),this.needsDecode){(0,t.assert)(p===t.ImageKind.GRAYSCALE_1BPP,"PDFImage.createImageData: The image must be grayscale.");const P=A.data;for(let E=0,S=P.length;E<S;E++)P[E]^=255}return A}if(this.image instanceof a.JpegStream&&!this.smask&&!this.mask){let P=_*M;switch(this.colorSpace.name){case"DeviceGray":P*=3;case"DeviceRGB":case"DeviceCMYK":return A.kind=t.ImageKind.RGB_24BPP,A.data=this.getImageBytes(P,{drawWidth:x,drawHeight:m,forceRGB:!0}),A}}}const j=this.getImageBytes(_*M,{internal:!0}),O=0|j.length/M*m/_,T=this.getComponents(j);let R,y;return!g&&!this.smask&&!this.mask?(A.kind=t.ImageKind.RGB_24BPP,A.data=new Uint8ClampedArray(x*m*3),R=0,y=!1):(A.kind=t.ImageKind.RGBA_32BPP,A.data=new Uint8ClampedArray(x*m*4),R=1,y=!0,this.fillOpacity(A.data,x,m,O,T)),this.needsDecode&&this.decodeBuffer(T),this.colorSpace.fillRgb(A.data,v,_,x,m,O,K,T,R),y&&this.undoPreblend(A.data,x,O),A}fillGrayBuffer(g){const x=this.numComps;if(x!==1)throw new t.FormatError(`Reading gray scale from a color image: ${x}`);const m=this.width,A=this.height,k=this.bpc,v=m*x*k+7>>3,_=this.getImageBytes(A*v,{internal:!0}),K=this.getComponents(_);let M,j;if(k===1){if(j=m*A,this.needsDecode)for(M=0;M<j;++M)g[M]=K[M]-1&255;else for(M=0;M<j;++M)g[M]=-K[M]&255;return}this.needsDecode&&this.decodeBuffer(K),j=m*A;const O=255/((1<<k)-1);for(M=0;M<j;++M)g[M]=O*K[M]}getImageBytes(g,{drawWidth:x,drawHeight:m,forceRGB:A=!1,internal:k=!1}){this.image.reset(),this.image.drawWidth=x||this.width,this.image.drawHeight=m||this.height,this.image.forceRGB=!!A;const v=this.image.getBytes(g);return k||this.image instanceof e.DecodeStream?v:((0,t.assert)(v instanceof Uint8Array,'PDFImage.getImageBytes: Unsupported "imageBytes" type.'),new Uint8Array(v))}}f.PDFImage=d},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.applyMaskImageData=o;var t=h(2);function o({src:c,srcPos:s=0,dest:e,destPos:a=0,width:r,height:n,inverseDecode:l=!1}){const u=t.FeatureTest.isLittleEndian?4278190080:255,[d,i]=l?[0,u]:[u,0],g=r>>3,x=r&7,m=c.length;e=new Uint32Array(e.buffer);for(let A=0;A<n;A++){for(const v=s+g;s<v;s++){const _=s<m?c[s]:255;e[a++]=_&128?i:d,e[a++]=_&64?i:d,e[a++]=_&32?i:d,e[a++]=_&16?i:d,e[a++]=_&8?i:d,e[a++]=_&4?i:d,e[a++]=_&2?i:d,e[a++]=_&1?i:d}if(x===0)continue;const k=s<m?c[s++]:255;for(let v=0;v<x;v++)e[a++]=k&1<<7-v?i:d}return{srcPos:s,destPos:a}}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.incrementalUpdate=k,f.writeDict=n,f.writeObject=r;var t=h(2),o=h(5),c=h(6),s=h(66),e=h(7),a=h(67);function r(v,_,K,M){K.push(`${v.num} ${v.gen} obj
`),_ instanceof o.Dict?n(_,K,M):_ instanceof e.BaseStream&&l(_,K,M),K.push(`
endobj
`)}function n(v,_,K){_.push("<<");for(const M of v.getKeys())_.push(` /${(0,c.escapePDFName)(M)} `),d(v.getRaw(M),_,K);_.push(">>")}function l(v,_,K){n(v.dict,_,K),_.push(` stream
`);let M=v.getString();K!==null&&(M=K.encryptString(M)),_.push(M,`
endstream
`)}function u(v,_,K){_.push("[");let M=!0;for(const j of v)M?M=!1:_.push(" "),d(j,_,K);_.push("]")}function d(v,_,K){v instanceof o.Name?_.push(`/${(0,c.escapePDFName)(v.name)}`):v instanceof o.Ref?_.push(`${v.num} ${v.gen} R`):Array.isArray(v)?u(v,_,K):typeof v=="string"?(K!==null&&(v=K.encryptString(v)),_.push(`(${(0,t.escapeString)(v)})`)):typeof v=="number"?_.push((0,c.numberToString)(v)):typeof v=="boolean"?_.push(v.toString()):v instanceof o.Dict?n(v,_,K):v instanceof e.BaseStream?l(v,_,K):v===null?_.push("null"):(0,t.warn)(`Unhandled value in writer: ${typeof v}, please file a bug.`)}function i(v,_,K,M){for(let j=_+K-1;j>K-1;j--)M[j]=v&255,v>>=8;return K+_}function g(v,_,K){for(let M=0,j=v.length;M<j;M++)K[_+M]=v.charCodeAt(M)&255}function x(v,_){const K=Math.floor(Date.now()/1e3),M=_.filename||"",j=[K.toString(),M,v.toString()];let O=j.reduce((y,p)=>y+p.length,0);for(const y of Object.values(_.info))j.push(y),O+=y.length;const T=new Uint8Array(O);let R=0;for(const y of j)g(y,R,T),R+=y.length;return(0,t.bytesToString)((0,a.calculateMD5)(T))}function m(v,_){const K=new s.SimpleXMLParser({hasAttributes:!0}).parseFromString(v);for(const{xfa:j}of _){if(!j)continue;const{path:O,value:T}=j;if(!O)continue;const R=K.documentElement.searchNode((0,c.parseXFAPath)(O),0);R?Array.isArray(T)?R.childNodes=T.map(y=>new s.SimpleDOMNode("value",y)):R.childNodes=[new s.SimpleDOMNode("#text",T)]:(0,t.warn)(`Node not found for path: ${O}`)}const M=[];return K.documentElement.dump(M),M.join("")}function A({xfaData:v,xfaDatasetsRef:_,hasXfaDatasetsEntry:K,acroFormRef:M,acroForm:j,newRefs:O,xref:T,xrefInfo:R}){if(T===null)return;if(!K){if(!M){(0,t.warn)("XFA - Cannot save it");return}const P=j.get("XFA"),E=P.slice();E.splice(2,0,"datasets"),E.splice(3,0,_),j.set("XFA",E);const S=T.encrypt;let F=null;S&&(F=S.createCipherTransform(M.num,M.gen));const C=[`${M.num} ${M.gen} obj
`];n(j,C,F),C.push(`
`),j.set("XFA",P),O.push({ref:M,data:C.join("")})}if(v===null){const P=T.fetchIfRef(_);v=m(P.getString(),O)}const y=T.encrypt;y&&(v=y.createCipherTransform(_.num,_.gen).encryptString(v));const p=`${_.num} ${_.gen} obj
<< /Type /EmbeddedFile /Length ${v.length}>>
stream
`+v+`
endstream
endobj
`;O.push({ref:_,data:p})}function k({originalData:v,xrefInfo:_,newRefs:K,xref:M=null,hasXfa:j=!1,xfaDatasetsRef:O=null,hasXfaDatasetsEntry:T=!1,acroFormRef:R=null,acroForm:y=null,xfaData:p=null}){j&&A({xfaData:p,xfaDatasetsRef:O,hasXfaDatasetsEntry:T,acroFormRef:R,acroForm:y,newRefs:K,xref:M,xrefInfo:_});const P=new o.Dict(null),E=_.newRef;let S,F;const C=v.at(-1);C===10||C===13?(S=[],F=v.length):(S=[`
`],F=v.length+1),P.set("Size",E.num+1),P.set("Prev",_.startXRef),P.set("Type",o.Name.get("XRef")),_.rootRef!==null&&P.set("Root",_.rootRef),_.infoRef!==null&&P.set("Info",_.infoRef),_.encryptRef!==null&&P.set("Encrypt",_.encryptRef),K.push({ref:E,data:""}),K=K.sort((z,B)=>z.ref.num-B.ref.num);const b=[[0,1,65535]],D=[0,1];let U=0;for(const{ref:z,data:B}of K)U=Math.max(U,F),b.push([1,F,Math.min(z.gen,65535)]),F+=B.length,D.push(z.num,1),S.push(B);if(P.set("Index",D),Array.isArray(_.fileIds)&&_.fileIds.length>0){const z=x(F,_);P.set("ID",[_.fileIds[0],z])}const G=[1,Math.ceil(Math.log2(U)/8),2],N=(G[0]+G[1]+G[2])*b.length;P.set("W",G),P.set("Length",N),S.push(`${E.num} ${E.gen} obj
`),n(P,S,null),S.push(` stream
`);const I=S.reduce((z,B)=>z+B.length,0),L=`
endstream
endobj
startxref
${F}
%%EOF
`,$=new Uint8Array(v.length+I+N+L.length);$.set(v);let W=v.length;for(const z of S)g(z,W,$),W+=z.length;for(const[z,B,H]of b)W=i(z,G[0],W,$),W=i(B,G[1],W,$),W=i(H,G[2],W,$);return g(L,W,$),$}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.XMLParserErrorCode=f.XMLParserBase=f.SimpleXMLParser=f.SimpleDOMNode=void 0;var t=h(6);const o={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};f.XMLParserErrorCode=o;function c(n,l){const u=n[l];return u===" "||u===`
`||u==="\r"||u==="	"}function s(n){for(let l=0,u=n.length;l<u;l++)if(!c(n,l))return!1;return!0}class e{_resolveEntities(l){return l.replace(/&([^;]+);/g,(u,d)=>{if(d.substring(0,2)==="#x")return String.fromCodePoint(parseInt(d.substring(2),16));if(d.substring(0,1)==="#")return String.fromCodePoint(parseInt(d.substring(1),10));switch(d){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"';case"apos":return"'"}return this.onResolveEntity(d)})}_parseContent(l,u){const d=[];let i=u;function g(){for(;i<l.length&&c(l,i);)++i}for(;i<l.length&&!c(l,i)&&l[i]!==">"&&l[i]!=="/";)++i;const x=l.substring(u,i);for(g();i<l.length&&l[i]!==">"&&l[i]!=="/"&&l[i]!=="?";){g();let m="",A="";for(;i<l.length&&!c(l,i)&&l[i]!=="=";)m+=l[i],++i;if(g(),l[i]!=="=")return null;++i,g();const k=l[i];if(k!=='"'&&k!=="'")return null;const v=l.indexOf(k,++i);if(v<0)return null;A=l.substring(i,v),d.push({name:m,value:this._resolveEntities(A)}),i=v+1,g()}return{name:x,attributes:d,parsed:i-u}}_parseProcessingInstruction(l,u){let d=u;function i(){for(;d<l.length&&c(l,d);)++d}for(;d<l.length&&!c(l,d)&&l[d]!==">"&&l[d]!=="?"&&l[d]!=="/";)++d;const g=l.substring(u,d);i();const x=d;for(;d<l.length&&(l[d]!=="?"||l[d+1]!==">");)++d;const m=l.substring(x,d);return{name:g,value:m,parsed:d-u}}parseXml(l){let u=0;for(;u<l.length;){const d=l[u];let i=u;if(d==="<"){++i;const g=l[i];let x;switch(g){case"/":if(++i,x=l.indexOf(">",i),x<0){this.onError(o.UnterminatedElement);return}this.onEndElement(l.substring(i,x)),i=x+1;break;case"?":++i;const m=this._parseProcessingInstruction(l,i);if(l.substring(i+m.parsed,i+m.parsed+2)!=="?>"){this.onError(o.UnterminatedXmlDeclaration);return}this.onPi(m.name,m.value),i+=m.parsed+2;break;case"!":if(l.substring(i+1,i+3)==="--"){if(x=l.indexOf("-->",i+3),x<0){this.onError(o.UnterminatedComment);return}this.onComment(l.substring(i+3,x)),i=x+3}else if(l.substring(i+1,i+8)==="[CDATA["){if(x=l.indexOf("]]>",i+8),x<0){this.onError(o.UnterminatedCdat);return}this.onCdata(l.substring(i+8,x)),i=x+3}else if(l.substring(i+1,i+8)==="DOCTYPE"){const v=l.indexOf("[",i+8);let _=!1;if(x=l.indexOf(">",i+8),x<0){this.onError(o.UnterminatedDoctypeDeclaration);return}if(v>0&&x>v){if(x=l.indexOf("]>",i+8),x<0){this.onError(o.UnterminatedDoctypeDeclaration);return}_=!0}const K=l.substring(i+8,x+(_?1:0));this.onDoctype(K),i=x+(_?2:1)}else{this.onError(o.MalformedElement);return}break;default:const A=this._parseContent(l,i);if(A===null){this.onError(o.MalformedElement);return}let k=!1;if(l.substring(i+A.parsed,i+A.parsed+2)==="/>")k=!0;else if(l.substring(i+A.parsed,i+A.parsed+1)!==">"){this.onError(o.UnterminatedElement);return}this.onBeginElement(A.name,A.attributes,k),i+=A.parsed+(k?2:1);break}}else{for(;i<l.length&&l[i]!=="<";)i++;const g=l.substring(u,i);this.onText(this._resolveEntities(g))}u=i}}onResolveEntity(l){return`&${l};`}onPi(l,u){}onComment(l){}onCdata(l){}onDoctype(l){}onText(l){}onBeginElement(l,u,d){}onEndElement(l){}onError(l){}}f.XMLParserBase=e;class a{constructor(l,u){this.nodeName=l,this.nodeValue=u,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const l=this.parentNode.childNodes;if(!l)return;const u=l.indexOf(this);if(u!==-1)return l[u+1]}get textContent(){return this.childNodes?this.childNodes.map(function(l){return l.textContent}).join(""):this.nodeValue||""}get children(){return this.childNodes||[]}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}searchNode(l,u){if(u>=l.length)return this;const d=l[u],i=[];let g=this;for(;;){if(d.name===g.nodeName)if(d.pos===0){const x=g.searchNode(l,u+1);if(x!==null)return x}else{if(i.length===0)return null;{const[x]=i.pop();let m=0;for(const A of x.childNodes)if(d.name===A.nodeName){if(m===d.pos)return A.searchNode(l,u+1);m++}return g.searchNode(l,u+1)}}if(g.childNodes&&g.childNodes.length!==0)i.push([g,0]),g=g.childNodes[0];else{if(i.length===0)return null;for(;i.length!==0;){const[x,m]=i.pop(),A=m+1;if(A<x.childNodes.length){i.push([x,A]),g=x.childNodes[A];break}}if(i.length===0)return null}}}dump(l){if(this.nodeName==="#text"){l.push((0,t.encodeToXmlString)(this.nodeValue));return}if(l.push(`<${this.nodeName}`),this.attributes)for(const u of this.attributes)l.push(` ${u.name}="${(0,t.encodeToXmlString)(u.value)}"`);if(this.hasChildNodes()){l.push(">");for(const u of this.childNodes)u.dump(l);l.push(`</${this.nodeName}>`)}else this.nodeValue?l.push(`>${(0,t.encodeToXmlString)(this.nodeValue)}</${this.nodeName}>`):l.push("/>")}}f.SimpleDOMNode=a;class r extends e{constructor({hasAttributes:l=!1,lowerCaseName:u=!1}){super(),this._currentFragment=null,this._stack=null,this._errorCode=o.NoError,this._hasAttributes=l,this._lowerCaseName=u}parseFromString(l){if(this._currentFragment=[],this._stack=[],this._errorCode=o.NoError,this.parseXml(l),this._errorCode!==o.NoError)return;const[u]=this._currentFragment;if(u)return{documentElement:u}}onText(l){if(s(l))return;const u=new a("#text",l);this._currentFragment.push(u)}onCdata(l){const u=new a("#text",l);this._currentFragment.push(u)}onBeginElement(l,u,d){this._lowerCaseName&&(l=l.toLowerCase());const i=new a(l);i.childNodes=[],this._hasAttributes&&(i.attributes=u),this._currentFragment.push(i),!d&&(this._stack.push(this._currentFragment),this._currentFragment=i.childNodes)}onEndElement(l){this._currentFragment=this._stack.pop()||[];const u=this._currentFragment.at(-1);if(!u)return null;for(let d=0,i=u.childNodes.length;d<i;d++)u.childNodes[d].parentNode=u;return u}onError(l){this._errorCode=l}}f.SimpleXMLParser=r},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.calculateSHA256=f.calculateMD5=f.PDF20=f.PDF17=f.CipherTransformFactory=f.ARCFourCipher=f.AES256Cipher=f.AES128Cipher=void 0,f.calculateSHA384=l,f.calculateSHA512=void 0;var t=h(2),o=h(5),c=h(68);class s{constructor(_){this.a=0,this.b=0;const K=new Uint8Array(256),M=_.length;for(let j=0;j<256;++j)K[j]=j;for(let j=0,O=0;j<256;++j){const T=K[j];O=O+T+_[j%M]&255,K[j]=K[O],K[O]=T}this.s=K}encryptBlock(_){let K=this.a,M=this.b;const j=this.s,O=_.length,T=new Uint8Array(O);for(let R=0;R<O;++R){K=K+1&255;const y=j[K];M=M+y&255;const p=j[M];j[K]=p,j[M]=y,T[R]=_[R]^j[y+p&255]}return this.a=K,this.b=M,T}decryptBlock(_){return this.encryptBlock(_)}encrypt(_){return this.encryptBlock(_)}}f.ARCFourCipher=s;const e=function(){const _=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),K=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]);function M(j,O,T){let R=1732584193,y=-271733879,p=-1732584194,P=271733878;const E=T+72&-64,S=new Uint8Array(E);let F,C;for(F=0;F<T;++F)S[F]=j[O++];S[F++]=128;const b=E-8;for(;F<b;)S[F++]=0;S[F++]=T<<3&255,S[F++]=T>>5&255,S[F++]=T>>13&255,S[F++]=T>>21&255,S[F++]=T>>>29&255,S[F++]=0,S[F++]=0,S[F++]=0;const D=new Int32Array(16);for(F=0;F<E;){for(C=0;C<16;++C,F+=4)D[C]=S[F]|S[F+1]<<8|S[F+2]<<16|S[F+3]<<24;let U=R,X=y,G=p,Y=P,N,I;for(C=0;C<64;++C){C<16?(N=X&G|~X&Y,I=C):C<32?(N=Y&X|~Y&G,I=5*C+1&15):C<48?(N=X^G^Y,I=3*C+5&15):(N=G^(X|~Y),I=7*C&15);const L=Y,$=U+N+K[C]+D[I]|0,W=_[C];Y=G,G=X,X=X+($<<W|$>>>32-W)|0,U=L}R=R+U|0,y=y+X|0,p=p+G|0,P=P+Y|0}return new Uint8Array([R&255,R>>8&255,R>>16&255,R>>>24&255,y&255,y>>8&255,y>>16&255,y>>>24&255,p&255,p>>8&255,p>>16&255,p>>>24&255,P&255,P>>8&255,P>>16&255,P>>>24&255])}return M}();f.calculateMD5=e;class a{constructor(_,K){this.high=_|0,this.low=K|0}and(_){this.high&=_.high,this.low&=_.low}xor(_){this.high^=_.high,this.low^=_.low}or(_){this.high|=_.high,this.low|=_.low}shiftRight(_){_>=32?(this.low=this.high>>>_-32|0,this.high=0):(this.low=this.low>>>_|this.high<<32-_,this.high=this.high>>>_|0)}shiftLeft(_){_>=32?(this.high=this.low<<_-32,this.low=0):(this.high=this.high<<_|this.low>>>32-_,this.low<<=_)}rotateRight(_){let K,M;_&32?(M=this.low,K=this.high):(K=this.low,M=this.high),_&=31,this.low=K>>>_|M<<32-_,this.high=M>>>_|K<<32-_}not(){this.high=~this.high,this.low=~this.low}add(_){const K=(this.low>>>0)+(_.low>>>0);let M=(this.high>>>0)+(_.high>>>0);K>4294967295&&(M+=1),this.low=K|0,this.high=M|0}copyTo(_,K){_[K]=this.high>>>24&255,_[K+1]=this.high>>16&255,_[K+2]=this.high>>8&255,_[K+3]=this.high&255,_[K+4]=this.low>>>24&255,_[K+5]=this.low>>16&255,_[K+6]=this.low>>8&255,_[K+7]=this.low&255}assign(_){this.high=_.high,this.low=_.low}}const r=function(){function _(P,E){return P>>>E|P<<32-E}function K(P,E,S){return P&E^~P&S}function M(P,E,S){return P&E^P&S^E&S}function j(P){return _(P,2)^_(P,13)^_(P,22)}function O(P){return _(P,6)^_(P,11)^_(P,25)}function T(P){return _(P,7)^_(P,18)^P>>>3}function R(P){return _(P,17)^_(P,19)^P>>>10}const y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function p(P,E,S){let F=1779033703,C=3144134277,b=1013904242,D=2773480762,U=1359893119,X=2600822924,G=528734635,Y=1541459225;const N=Math.ceil((S+9)/64)*64,I=new Uint8Array(N);let L,$;for(L=0;L<S;++L)I[L]=P[E++];I[L++]=128;const W=N-8;for(;L<W;)I[L++]=0;I[L++]=0,I[L++]=0,I[L++]=0,I[L++]=S>>>29&255,I[L++]=S>>21&255,I[L++]=S>>13&255,I[L++]=S>>5&255,I[L++]=S<<3&255;const z=new Uint32Array(64);for(L=0;L<N;){for($=0;$<16;++$)z[$]=I[L]<<24|I[L+1]<<16|I[L+2]<<8|I[L+3],L+=4;for($=16;$<64;++$)z[$]=R(z[$-2])+z[$-7]+T(z[$-15])+z[$-16]|0;let B=F,H=C,q=b,Z=D,te=U,Q=X,ee=G,J=Y,ne,re;for($=0;$<64;++$)ne=J+O(te)+K(te,Q,ee)+y[$]+z[$],re=j(B)+M(B,H,q),J=ee,ee=Q,Q=te,te=Z+ne|0,Z=q,q=H,H=B,B=ne+re|0;F=F+B|0,C=C+H|0,b=b+q|0,D=D+Z|0,U=U+te|0,X=X+Q|0,G=G+ee|0,Y=Y+J|0}return new Uint8Array([F>>24&255,F>>16&255,F>>8&255,F&255,C>>24&255,C>>16&255,C>>8&255,C&255,b>>24&255,b>>16&255,b>>8&255,b&255,D>>24&255,D>>16&255,D>>8&255,D&255,U>>24&255,U>>16&255,U>>8&255,U&255,X>>24&255,X>>16&255,X>>8&255,X&255,G>>24&255,G>>16&255,G>>8&255,G&255,Y>>24&255,Y>>16&255,Y>>8&255,Y&255])}return p}();f.calculateSHA256=r;const n=function(){function _(p,P,E,S,F){p.assign(P),p.and(E),F.assign(P),F.not(),F.and(S),p.xor(F)}function K(p,P,E,S,F){p.assign(P),p.and(E),F.assign(P),F.and(S),p.xor(F),F.assign(E),F.and(S),p.xor(F)}function M(p,P,E){p.assign(P),p.rotateRight(28),E.assign(P),E.rotateRight(34),p.xor(E),E.assign(P),E.rotateRight(39),p.xor(E)}function j(p,P,E){p.assign(P),p.rotateRight(14),E.assign(P),E.rotateRight(18),p.xor(E),E.assign(P),E.rotateRight(41),p.xor(E)}function O(p,P,E){p.assign(P),p.rotateRight(1),E.assign(P),E.rotateRight(8),p.xor(E),E.assign(P),E.shiftRight(7),p.xor(E)}function T(p,P,E){p.assign(P),p.rotateRight(19),E.assign(P),E.rotateRight(61),p.xor(E),E.assign(P),E.shiftRight(6),p.xor(E)}const R=[new a(1116352408,3609767458),new a(1899447441,602891725),new a(3049323471,3964484399),new a(3921009573,2173295548),new a(961987163,4081628472),new a(1508970993,3053834265),new a(2453635748,2937671579),new a(2870763221,3664609560),new a(3624381080,2734883394),new a(310598401,1164996542),new a(607225278,1323610764),new a(1426881987,3590304994),new a(1925078388,4068182383),new a(2162078206,991336113),new a(2614888103,633803317),new a(3248222580,3479774868),new a(3835390401,2666613458),new a(4022224774,944711139),new a(264347078,2341262773),new a(604807628,2007800933),new a(770255983,1495990901),new a(1249150122,1856431235),new a(1555081692,3175218132),new a(1996064986,2198950837),new a(2554220882,3999719339),new a(2821834349,766784016),new a(2952996808,2566594879),new a(3210313671,3203337956),new a(3336571891,1034457026),new a(3584528711,2466948901),new a(113926993,3758326383),new a(338241895,168717936),new a(666307205,1188179964),new a(773529912,1546045734),new a(1294757372,1522805485),new a(1396182291,2643833823),new a(1695183700,2343527390),new a(1986661051,1014477480),new a(2177026350,1206759142),new a(2456956037,344077627),new a(2730485921,1290863460),new a(2820302411,3158454273),new a(3259730800,3505952657),new a(3345764771,106217008),new a(3516065817,3606008344),new a(3600352804,1432725776),new a(4094571909,1467031594),new a(275423344,851169720),new a(430227734,3100823752),new a(506948616,1363258195),new a(659060556,3750685593),new a(883997877,3785050280),new a(958139571,3318307427),new a(1322822218,3812723403),new a(1537002063,2003034995),new a(1747873779,3602036899),new a(1955562222,1575990012),new a(2024104815,1125592928),new a(2227730452,2716904306),new a(2361852424,442776044),new a(2428436474,593698344),new a(2756734187,3733110249),new a(3204031479,2999351573),new a(3329325298,3815920427),new a(3391569614,3928383900),new a(3515267271,566280711),new a(3940187606,3454069534),new a(4118630271,4000239992),new a(116418474,1914138554),new a(174292421,2731055270),new a(289380356,3203993006),new a(460393269,320620315),new a(685471733,587496836),new a(852142971,1086792851),new a(1017036298,365543100),new a(1126000580,2618297676),new a(1288033470,3409855158),new a(1501505948,4234509866),new a(1607167915,987167468),new a(1816402316,1246189591)];function y(p,P,E,S=!1){let F,C,b,D,U,X,G,Y;S?(F=new a(3418070365,3238371032),C=new a(1654270250,914150663),b=new a(2438529370,812702999),D=new a(355462360,4144912697),U=new a(1731405415,4290775857),X=new a(2394180231,1750603025),G=new a(3675008525,1694076839),Y=new a(1203062813,3204075428)):(F=new a(1779033703,4089235720),C=new a(3144134277,2227873595),b=new a(1013904242,4271175723),D=new a(2773480762,1595750129),U=new a(1359893119,2917565137),X=new a(2600822924,725511199),G=new a(528734635,4215389547),Y=new a(1541459225,327033209));const N=Math.ceil((E+17)/128)*128,I=new Uint8Array(N);let L,$;for(L=0;L<E;++L)I[L]=p[P++];I[L++]=128;const W=N-16;for(;L<W;)I[L++]=0;I[L++]=0,I[L++]=0,I[L++]=0,I[L++]=0,I[L++]=0,I[L++]=0,I[L++]=0,I[L++]=0,I[L++]=0,I[L++]=0,I[L++]=0,I[L++]=E>>>29&255,I[L++]=E>>21&255,I[L++]=E>>13&255,I[L++]=E>>5&255,I[L++]=E<<3&255;const z=new Array(80);for(L=0;L<80;L++)z[L]=new a(0,0);let B=new a(0,0),H=new a(0,0),q=new a(0,0),Z=new a(0,0),te=new a(0,0),Q=new a(0,0),ee=new a(0,0),J=new a(0,0);const ne=new a(0,0),re=new a(0,0),ae=new a(0,0),se=new a(0,0);let oe;for(L=0;L<N;){for($=0;$<16;++$)z[$].high=I[L]<<24|I[L+1]<<16|I[L+2]<<8|I[L+3],z[$].low=I[L+4]<<24|I[L+5]<<16|I[L+6]<<8|I[L+7],L+=8;for($=16;$<80;++$)oe=z[$],T(oe,z[$-2],se),oe.add(z[$-7]),O(ae,z[$-15],se),oe.add(ae),oe.add(z[$-16]);for(B.assign(F),H.assign(C),q.assign(b),Z.assign(D),te.assign(U),Q.assign(X),ee.assign(G),J.assign(Y),$=0;$<80;++$)ne.assign(J),j(ae,te,se),ne.add(ae),_(ae,te,Q,ee,se),ne.add(ae),ne.add(R[$]),ne.add(z[$]),M(re,B,se),K(ae,B,H,q,se),re.add(ae),oe=J,J=ee,ee=Q,Q=te,Z.add(ne),te=Z,Z=q,q=H,H=B,oe.assign(ne),oe.add(re),B=oe;F.add(B),C.add(H),b.add(q),D.add(Z),U.add(te),X.add(Q),G.add(ee),Y.add(J)}let me;return S?(me=new Uint8Array(48),F.copyTo(me,0),C.copyTo(me,8),b.copyTo(me,16),D.copyTo(me,24),U.copyTo(me,32),X.copyTo(me,40)):(me=new Uint8Array(64),F.copyTo(me,0),C.copyTo(me,8),b.copyTo(me,16),D.copyTo(me,24),U.copyTo(me,32),X.copyTo(me,40),G.copyTo(me,48),Y.copyTo(me,56)),me}return y}();f.calculateSHA512=n;function l(v,_,K){return n(v,_,K,!0)}class u{decryptBlock(_){return _}encrypt(_){return _}}class d{constructor(){this.constructor===d&&(0,t.unreachable)("Cannot initialize AESBaseCipher."),this._s=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),this._inv_s=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),this._mix=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]),this._mixCol=new Uint8Array(256);for(let _=0;_<256;_++)_<128?this._mixCol[_]=_<<1:this._mixCol[_]=_<<1^27;this.buffer=new Uint8Array(16),this.bufferPosition=0}_expandKey(_){(0,t.unreachable)("Cannot call `_expandKey` on the base class")}_decrypt(_,K){let M,j,O;const T=new Uint8Array(16);T.set(_);for(let R=0,y=this._keySize;R<16;++R,++y)T[R]^=K[y];for(let R=this._cyclesOfRepetition-1;R>=1;--R){M=T[13],T[13]=T[9],T[9]=T[5],T[5]=T[1],T[1]=M,M=T[14],j=T[10],T[14]=T[6],T[10]=T[2],T[6]=M,T[2]=j,M=T[15],j=T[11],O=T[7],T[15]=T[3],T[11]=M,T[7]=j,T[3]=O;for(let y=0;y<16;++y)T[y]=this._inv_s[T[y]];for(let y=0,p=R*16;y<16;++y,++p)T[y]^=K[p];for(let y=0;y<16;y+=4){const p=this._mix[T[y]],P=this._mix[T[y+1]],E=this._mix[T[y+2]],S=this._mix[T[y+3]];M=p^P>>>8^P<<24^E>>>16^E<<16^S>>>24^S<<8,T[y]=M>>>24&255,T[y+1]=M>>16&255,T[y+2]=M>>8&255,T[y+3]=M&255}}M=T[13],T[13]=T[9],T[9]=T[5],T[5]=T[1],T[1]=M,M=T[14],j=T[10],T[14]=T[6],T[10]=T[2],T[6]=M,T[2]=j,M=T[15],j=T[11],O=T[7],T[15]=T[3],T[11]=M,T[7]=j,T[3]=O;for(let R=0;R<16;++R)T[R]=this._inv_s[T[R]],T[R]^=K[R];return T}_encrypt(_,K){const M=this._s;let j,O,T;const R=new Uint8Array(16);R.set(_);for(let y=0;y<16;++y)R[y]^=K[y];for(let y=1;y<this._cyclesOfRepetition;y++){for(let p=0;p<16;++p)R[p]=M[R[p]];T=R[1],R[1]=R[5],R[5]=R[9],R[9]=R[13],R[13]=T,T=R[2],O=R[6],R[2]=R[10],R[6]=R[14],R[10]=T,R[14]=O,T=R[3],O=R[7],j=R[11],R[3]=R[15],R[7]=T,R[11]=O,R[15]=j;for(let p=0;p<16;p+=4){const P=R[p+0],E=R[p+1],S=R[p+2],F=R[p+3];j=P^E^S^F,R[p+0]^=j^this._mixCol[P^E],R[p+1]^=j^this._mixCol[E^S],R[p+2]^=j^this._mixCol[S^F],R[p+3]^=j^this._mixCol[F^P]}for(let p=0,P=y*16;p<16;++p,++P)R[p]^=K[P]}for(let y=0;y<16;++y)R[y]=M[R[y]];T=R[1],R[1]=R[5],R[5]=R[9],R[9]=R[13],R[13]=T,T=R[2],O=R[6],R[2]=R[10],R[6]=R[14],R[10]=T,R[14]=O,T=R[3],O=R[7],j=R[11],R[3]=R[15],R[7]=T,R[11]=O,R[15]=j;for(let y=0,p=this._keySize;y<16;++y,++p)R[y]^=K[p];return R}_decryptBlock2(_,K){const M=_.length;let j=this.buffer,O=this.bufferPosition;const T=[];let R=this.iv;for(let P=0;P<M;++P){if(j[O]=_[P],++O,O<16)continue;const E=this._decrypt(j,this._key);for(let S=0;S<16;++S)E[S]^=R[S];R=j,T.push(E),j=new Uint8Array(16),O=0}if(this.buffer=j,this.bufferLength=O,this.iv=R,T.length===0)return new Uint8Array(0);let y=16*T.length;if(K){const P=T.at(-1);let E=P[15];if(E<=16){for(let S=15,F=16-E;S>=F;--S)if(P[S]!==E){E=0;break}y-=E,T[T.length-1]=P.subarray(0,16-E)}}const p=new Uint8Array(y);for(let P=0,E=0,S=T.length;P<S;++P,E+=16)p.set(T[P],E);return p}decryptBlock(_,K,M=null){const j=_.length,O=this.buffer;let T=this.bufferPosition;if(M)this.iv=M;else{for(let R=0;T<16&&R<j;++R,++T)O[T]=_[R];if(T<16)return this.bufferLength=T,new Uint8Array(0);this.iv=O,_=_.subarray(16)}return this.buffer=new Uint8Array(16),this.bufferLength=0,this.decryptBlock=this._decryptBlock2,this.decryptBlock(_,K)}encrypt(_,K){const M=_.length;let j=this.buffer,O=this.bufferPosition;const T=[];K||(K=new Uint8Array(16));for(let p=0;p<M;++p){if(j[O]=_[p],++O,O<16)continue;for(let E=0;E<16;++E)j[E]^=K[E];const P=this._encrypt(j,this._key);K=P,T.push(P),j=new Uint8Array(16),O=0}if(this.buffer=j,this.bufferLength=O,this.iv=K,T.length===0)return new Uint8Array(0);const R=16*T.length,y=new Uint8Array(R);for(let p=0,P=0,E=T.length;p<E;++p,P+=16)y.set(T[p],P);return y}}class i extends d{constructor(_){super(),this._cyclesOfRepetition=10,this._keySize=160,this._rcon=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]),this._key=this._expandKey(_)}_expandKey(_){const M=this._s,j=this._rcon,O=new Uint8Array(176);O.set(_);for(let T=16,R=1;T<176;++R){let y=O[T-3],p=O[T-2],P=O[T-1],E=O[T-4];y=M[y],p=M[p],P=M[P],E=M[E],y^=j[R];for(let S=0;S<4;++S)O[T]=y^=O[T-16],T++,O[T]=p^=O[T-16],T++,O[T]=P^=O[T-16],T++,O[T]=E^=O[T-16],T++}return O}}f.AES128Cipher=i;class g extends d{constructor(_){super(),this._cyclesOfRepetition=14,this._keySize=224,this._key=this._expandKey(_)}_expandKey(_){const M=this._s,j=new Uint8Array(240);j.set(_);let O=1,T,R,y,p;for(let P=32,E=1;P<240;++E){P%32===16?(T=M[T],R=M[R],y=M[y],p=M[p]):P%32===0&&(T=j[P-3],R=j[P-2],y=j[P-1],p=j[P-4],T=M[T],R=M[R],y=M[y],p=M[p],T^=O,(O<<=1)>=256&&(O=(O^27)&255));for(let S=0;S<4;++S)j[P]=T^=j[P-32],P++,j[P]=R^=j[P-32],P++,j[P]=y^=j[P-32],P++,j[P]=p^=j[P-32],P++}return j}}f.AES256Cipher=g;class x{checkOwnerPassword(_,K,M,j){const O=new Uint8Array(_.length+56);O.set(_,0),O.set(K,_.length),O.set(M,_.length+K.length);const T=r(O,0,O.length);return(0,t.isArrayEqual)(T,j)}checkUserPassword(_,K,M){const j=new Uint8Array(_.length+8);j.set(_,0),j.set(K,_.length);const O=r(j,0,j.length);return(0,t.isArrayEqual)(O,M)}getOwnerKey(_,K,M,j){const O=new Uint8Array(_.length+56);O.set(_,0),O.set(K,_.length),O.set(M,_.length+K.length);const T=r(O,0,O.length);return new g(T).decryptBlock(j,!1,new Uint8Array(16))}getUserKey(_,K,M){const j=new Uint8Array(_.length+8);j.set(_,0),j.set(K,_.length);const O=r(j,0,j.length);return new g(O).decryptBlock(M,!1,new Uint8Array(16))}}f.PDF17=x;const m=function(){function _(M,j,O){let T=r(j,0,j.length).subarray(0,32),R=[0],y=0;for(;y<64||R.at(-1)>y-32;){const p=M.length+T.length+O.length,P=new Uint8Array(p);let E=0;P.set(M,E),E+=M.length,P.set(T,E),E+=T.length,P.set(O,E);const S=new Uint8Array(p*64);for(let b=0,D=0;b<64;b++,D+=p)S.set(P,D);R=new i(T.subarray(0,16)).encrypt(S,T.subarray(16,32));let C=0;for(let b=0;b<16;b++)C*=256%3,C%=3,C+=(R[b]>>>0)%3,C%=3;C===0?T=r(R,0,R.length):C===1?T=l(R,0,R.length):C===2&&(T=n(R,0,R.length)),y++}return T.subarray(0,32)}class K{hash(j,O,T){return _(j,O,T)}checkOwnerPassword(j,O,T,R){const y=new Uint8Array(j.length+56);y.set(j,0),y.set(O,j.length),y.set(T,j.length+O.length);const p=_(j,y,T);return(0,t.isArrayEqual)(p,R)}checkUserPassword(j,O,T){const R=new Uint8Array(j.length+8);R.set(j,0),R.set(O,j.length);const y=_(j,R,[]);return(0,t.isArrayEqual)(y,T)}getOwnerKey(j,O,T,R){const y=new Uint8Array(j.length+56);y.set(j,0),y.set(O,j.length),y.set(T,j.length+O.length);const p=_(j,y,T);return new g(p).decryptBlock(R,!1,new Uint8Array(16))}getUserKey(j,O,T){const R=new Uint8Array(j.length+8);R.set(j,0),R.set(O,j.length);const y=_(j,R,[]);return new g(y).decryptBlock(T,!1,new Uint8Array(16))}}return K}();f.PDF20=m;class A{constructor(_,K){this.StringCipherConstructor=_,this.StreamCipherConstructor=K}createStream(_,K){const M=new this.StreamCipherConstructor;return new c.DecryptStream(_,K,function(O,T){return M.decryptBlock(O,T)})}decryptString(_){const K=new this.StringCipherConstructor;let M=(0,t.stringToBytes)(_);return M=K.decryptBlock(M,!0),(0,t.bytesToString)(M)}encryptString(_){const K=new this.StringCipherConstructor;if(K instanceof d){const O=16-_.length%16;_+=String.fromCharCode(O).repeat(O);const T=new Uint8Array(16);if(typeof crypto<"u")crypto.getRandomValues(T);else for(let p=0;p<16;p++)T[p]=Math.floor(256*Math.random());let R=(0,t.stringToBytes)(_);R=K.encrypt(R,T);const y=new Uint8Array(16+R.length);return y.set(T),y.set(R,16),(0,t.bytesToString)(y)}let M=(0,t.stringToBytes)(_);return M=K.encrypt(M),(0,t.bytesToString)(M)}}const k=function(){const _=new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]);function K(p,P,E,S,F,C,b,D,U,X,G,Y){if(P){const I=Math.min(127,P.length);P=P.subarray(0,I)}else P=[];let N;return p===6?N=new m:N=new x,N.checkUserPassword(P,D,b)?N.getUserKey(P,U,G):P.length&&N.checkOwnerPassword(P,S,C,E)?N.getOwnerKey(P,F,C,X):null}function M(p,P,E,S,F,C,b,D){const U=40+E.length+p.length,X=new Uint8Array(U);let G=0,Y,N;if(P)for(N=Math.min(32,P.length);G<N;++G)X[G]=P[G];for(Y=0;G<32;)X[G++]=_[Y++];for(Y=0,N=E.length;Y<N;++Y)X[G++]=E[Y];for(X[G++]=F&255,X[G++]=F>>8&255,X[G++]=F>>16&255,X[G++]=F>>>24&255,Y=0,N=p.length;Y<N;++Y)X[G++]=p[Y];C>=4&&!D&&(X[G++]=255,X[G++]=255,X[G++]=255,X[G++]=255);let I=e(X,0,G);const L=b>>3;if(C>=3)for(Y=0;Y<50;++Y)I=e(I,0,L);const $=I.subarray(0,L);let W,z;if(C>=3){for(G=0;G<32;++G)X[G]=_[G];for(Y=0,N=p.length;Y<N;++Y)X[G++]=p[Y];W=new s($),z=W.encryptBlock(e(X,0,G)),N=$.length;const B=new Uint8Array(N);for(Y=1;Y<=19;++Y){for(let H=0;H<N;++H)B[H]=$[H]^Y;W=new s(B),z=W.encryptBlock(z)}for(Y=0,N=z.length;Y<N;++Y)if(S[Y]!==z[Y])return null}else for(W=new s($),z=W.encryptBlock(_),Y=0,N=z.length;Y<N;++Y)if(S[Y]!==z[Y])return null;return $}function j(p,P,E,S){const F=new Uint8Array(32);let C=0;const b=Math.min(32,p.length);for(;C<b;++C)F[C]=p[C];let D=0;for(;C<32;)F[C++]=_[D++];let U=e(F,0,C);const X=S>>3;if(E>=3)for(D=0;D<50;++D)U=e(U,0,U.length);let G,Y;if(E>=3){Y=P;const N=new Uint8Array(X);for(D=19;D>=0;D--){for(let I=0;I<X;++I)N[I]=U[I]^D;G=new s(N),Y=G.encryptBlock(Y)}}else G=new s(U.subarray(0,X)),Y=G.encryptBlock(P);return Y}const O=o.Name.get("Identity");function T(p,P,E,S=!1){const F=new Uint8Array(E.length+9),C=E.length;let b;for(b=0;b<C;++b)F[b]=E[b];return F[b++]=p&255,F[b++]=p>>8&255,F[b++]=p>>16&255,F[b++]=P&255,F[b++]=P>>8&255,S&&(F[b++]=115,F[b++]=65,F[b++]=108,F[b++]=84),e(F,0,b).subarray(0,Math.min(E.length+5,16))}function R(p,P,E,S,F){if(!(P instanceof o.Name))throw new t.FormatError("Invalid crypt filter name.");const C=p.get(P.name);let b;if(C!=null&&(b=C.get("CFM")),!b||b.name==="None")return function(){return new u};if(b.name==="V2")return function(){return new s(T(E,S,F,!1))};if(b.name==="AESV2")return function(){return new i(T(E,S,F,!0))};if(b.name==="AESV3")return function(){return new g(F)};throw new t.FormatError("Unknown crypto method")}class y{constructor(P,E,S){const F=P.get("Filter");if(!(0,o.isName)(F,"Standard"))throw new t.FormatError("unknown encryption method");this.filterName=F.name,this.dict=P;const C=P.get("V");if(!Number.isInteger(C)||C!==1&&C!==2&&C!==4&&C!==5)throw new t.FormatError("unsupported encryption algorithm");this.algorithm=C;let b=P.get("Length");if(!b)if(C<=3)b=40;else{const $=P.get("CF"),W=P.get("StmF");if($ instanceof o.Dict&&W instanceof o.Name){$.suppressEncryption=!0;const z=$.get(W.name);b=z&&z.get("Length")||128,b<40&&(b<<=3)}}if(!Number.isInteger(b)||b<40||b%8!==0)throw new t.FormatError("invalid key length");const D=(0,t.stringToBytes)(P.get("O")).subarray(0,32),U=(0,t.stringToBytes)(P.get("U")).subarray(0,32),X=P.get("P"),G=P.get("R"),Y=(C===4||C===5)&&P.get("EncryptMetadata")!==!1;this.encryptMetadata=Y;const N=(0,t.stringToBytes)(E);let I;if(S){if(G===6)try{S=(0,t.utf8StringToString)(S)}catch{(0,t.warn)("CipherTransformFactory: Unable to convert UTF8 encoded password.")}I=(0,t.stringToBytes)(S)}let L;if(C!==5)L=M(N,I,D,U,X,G,b,Y);else{const $=(0,t.stringToBytes)(P.get("O")).subarray(32,40),W=(0,t.stringToBytes)(P.get("O")).subarray(40,48),z=(0,t.stringToBytes)(P.get("U")).subarray(0,48),B=(0,t.stringToBytes)(P.get("U")).subarray(32,40),H=(0,t.stringToBytes)(P.get("U")).subarray(40,48),q=(0,t.stringToBytes)(P.get("OE")),Z=(0,t.stringToBytes)(P.get("UE"));(0,t.stringToBytes)(P.get("Perms")),L=K(G,I,D,$,W,z,U,B,H,q,Z)}if(!L&&!S)throw new t.PasswordException("No password given",t.PasswordResponses.NEED_PASSWORD);if(!L&&S){const $=j(I,D,G,b);L=M(N,$,D,U,X,G,b,Y)}if(!L)throw new t.PasswordException("Incorrect Password",t.PasswordResponses.INCORRECT_PASSWORD);if(this.encryptionKey=L,C>=4){const $=P.get("CF");$ instanceof o.Dict&&($.suppressEncryption=!0),this.cf=$,this.stmf=P.get("StmF")||O,this.strf=P.get("StrF")||O,this.eff=P.get("EFF")||this.stmf}}createCipherTransform(P,E){if(this.algorithm===4||this.algorithm===5)return new A(R(this.cf,this.strf,P,E,this.encryptionKey),R(this.cf,this.stmf,P,E,this.encryptionKey));const S=T(P,E,this.encryptionKey,!1),F=function(){return new s(S)};return new A(F,F)}}return y}();f.CipherTransformFactory=k},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.DecryptStream=void 0;var t=h(19);const o=512;class c extends t.DecodeStream{constructor(e,a,r){super(a),this.str=e,this.dict=e.dict,this.decrypt=r,this.nextChunk=null,this.initialized=!1}readBlock(){let e;if(this.initialized?e=this.nextChunk:(e=this.str.getBytes(o),this.initialized=!0),!e||e.length===0){this.eof=!0;return}this.nextChunk=this.str.getBytes(o);const a=this.nextChunk&&this.nextChunk.length>0,r=this.decrypt;e=r(e,!a);let n=this.bufferLength;const l=e.length,u=this.ensureBuffer(n+l);for(let d=0;d<l;d++)u[n++]=e[d];this.bufferLength=n}}f.DecryptStream=c},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Catalog=void 0;var t=h(6),o=h(2),c=h(5),s=h(70),e=h(7),a=h(71),r=h(14),n=h(72),l=h(59),u=h(73),d=h(74);function i(x){return x instanceof c.Dict&&(x=x.get("D")),Array.isArray(x)?x:null}class g{constructor(m,A){if(this.pdfManager=m,this.xref=A,this._catDict=A.getCatalogObj(),!(this._catDict instanceof c.Dict))throw new o.FormatError("Catalog object is not a dictionary.");this.toplevelPagesDict,this._actualNumPages=null,this.fontCache=new c.RefSetCache,this.builtInCMapCache=new Map,this.standardFontDataCache=new Map,this.globalImageCache=new l.GlobalImageCache,this.pageKidsCountCache=new c.RefSetCache,this.pageIndexCache=new c.RefSetCache,this.nonBlendModesSet=new c.RefSet}get version(){const m=this._catDict.get("Version");return(0,o.shadow)(this,"version",m instanceof c.Name?m.name:null)}get lang(){const m=this._catDict.get("Lang");return(0,o.shadow)(this,"lang",typeof m=="string"?(0,o.stringToPDFString)(m):null)}get needsRendering(){const m=this._catDict.get("NeedsRendering");return(0,o.shadow)(this,"needsRendering",typeof m=="boolean"?m:!1)}get collection(){let m=null;try{const A=this._catDict.get("Collection");A instanceof c.Dict&&A.size>0&&(m=A)}catch(A){if(A instanceof t.MissingDataException)throw A;(0,o.info)("Cannot fetch Collection entry; assuming no collection is present.")}return(0,o.shadow)(this,"collection",m)}get acroForm(){let m=null;try{const A=this._catDict.get("AcroForm");A instanceof c.Dict&&A.size>0&&(m=A)}catch(A){if(A instanceof t.MissingDataException)throw A;(0,o.info)("Cannot fetch AcroForm entry; assuming no forms are present.")}return(0,o.shadow)(this,"acroForm",m)}get acroFormRef(){const m=this._catDict.getRaw("AcroForm");return(0,o.shadow)(this,"acroFormRef",m instanceof c.Ref?m:null)}get metadata(){const m=this._catDict.getRaw("Metadata");if(!(m instanceof c.Ref))return(0,o.shadow)(this,"metadata",null);let A=null;try{const k=!(this.xref.encrypt&&this.xref.encrypt.encryptMetadata),v=this.xref.fetch(m,k);if(v instanceof e.BaseStream&&v.dict instanceof c.Dict){const _=v.dict.get("Type"),K=v.dict.get("Subtype");if((0,c.isName)(_,"Metadata")&&(0,c.isName)(K,"XML")){const M=(0,o.stringToUTF8String)(v.getString());M&&(A=new u.MetadataParser(M).serializable)}}}catch(k){if(k instanceof t.MissingDataException)throw k;(0,o.info)(`Skipping invalid Metadata: "${k}".`)}return(0,o.shadow)(this,"metadata",A)}get markInfo(){let m=null;try{m=this._readMarkInfo()}catch(A){if(A instanceof t.MissingDataException)throw A;(0,o.warn)("Unable to read mark info.")}return(0,o.shadow)(this,"markInfo",m)}_readMarkInfo(){const m=this._catDict.get("MarkInfo");if(!(m instanceof c.Dict))return null;const A={Marked:!1,UserProperties:!1,Suspects:!1};for(const k in A){const v=m.get(k);typeof v=="boolean"&&(A[k]=v)}return A}get structTreeRoot(){let m=null;try{m=this._readStructTreeRoot()}catch(A){if(A instanceof t.MissingDataException)throw A;(0,o.warn)("Unable read to structTreeRoot info.")}return(0,o.shadow)(this,"structTreeRoot",m)}_readStructTreeRoot(){const m=this._catDict.get("StructTreeRoot");if(!(m instanceof c.Dict))return null;const A=new d.StructTreeRoot(m);return A.init(),A}get toplevelPagesDict(){const m=this._catDict.get("Pages");if(!(m instanceof c.Dict))throw new o.FormatError("Invalid top-level pages dictionary.");return(0,o.shadow)(this,"toplevelPagesDict",m)}get documentOutline(){let m=null;try{m=this._readDocumentOutline()}catch(A){if(A instanceof t.MissingDataException)throw A;(0,o.warn)("Unable to read document outline.")}return(0,o.shadow)(this,"documentOutline",m)}_readDocumentOutline(){let m=this._catDict.get("Outlines");if(!(m instanceof c.Dict)||(m=m.getRaw("First"),!(m instanceof c.Ref)))return null;const A={items:[]},k=[{obj:m,parent:A}],v=new c.RefSet;v.put(m);const _=this.xref,K=new Uint8ClampedArray(3);for(;k.length>0;){const M=k.shift(),j=_.fetchIfRef(M.obj);if(j===null)continue;if(!j.has("Title"))throw new o.FormatError("Invalid outline item encountered.");const O={url:null,dest:null};g.parseDestDictionary({destDict:j,resultObj:O,docBaseUrl:this.pdfManager.docBaseUrl});const T=j.get("Title"),R=j.get("F")||0,y=j.getArray("C"),p=j.get("Count");let P=K;Array.isArray(y)&&y.length===3&&(y[0]!==0||y[1]!==0||y[2]!==0)&&(P=r.ColorSpace.singletons.rgb.getRgb(y,0));const E={dest:O.dest,url:O.url,unsafeUrl:O.unsafeUrl,newWindow:O.newWindow,title:(0,o.stringToPDFString)(T),color:P,count:Number.isInteger(p)?p:void 0,bold:!!(R&2),italic:!!(R&1),items:[]};M.parent.items.push(E),m=j.getRaw("First"),m instanceof c.Ref&&!v.has(m)&&(k.push({obj:m,parent:E}),v.put(m)),m=j.getRaw("Next"),m instanceof c.Ref&&!v.has(m)&&(k.push({obj:m,parent:M.parent}),v.put(m))}return A.items.length>0?A.items:null}get permissions(){let m=null;try{m=this._readPermissions()}catch(A){if(A instanceof t.MissingDataException)throw A;(0,o.warn)("Unable to read permissions.")}return(0,o.shadow)(this,"permissions",m)}_readPermissions(){const m=this.xref.trailer.get("Encrypt");if(!(m instanceof c.Dict))return null;let A=m.get("P");if(typeof A!="number")return null;A+=4294967296;const k=[];for(const v in o.PermissionFlag){const _=o.PermissionFlag[v];A&_&&k.push(_)}return k}get optionalContentConfig(){let m=null;try{const A=this._catDict.get("OCProperties");if(!A)return(0,o.shadow)(this,"optionalContentConfig",null);const k=A.get("D");if(!k)return(0,o.shadow)(this,"optionalContentConfig",null);const v=A.get("OCGs");if(!Array.isArray(v))return(0,o.shadow)(this,"optionalContentConfig",null);const _=[],K=[];for(const M of v){if(!(M instanceof c.Ref))continue;K.push(M);const j=this.xref.fetchIfRef(M);_.push({id:M.toString(),name:typeof j.get("Name")=="string"?(0,o.stringToPDFString)(j.get("Name")):null,intent:typeof j.get("Intent")=="string"?(0,o.stringToPDFString)(j.get("Intent")):null})}m=this._readOptionalContentConfig(k,K),m.groups=_}catch(A){if(A instanceof t.MissingDataException)throw A;(0,o.warn)(`Unable to read optional content config: ${A}`)}return(0,o.shadow)(this,"optionalContentConfig",m)}_readOptionalContentConfig(m,A){function k(O){const T=[];if(Array.isArray(O))for(const R of O)R instanceof c.Ref&&A.includes(R)&&T.push(R.toString());return T}function v(O,T=0){if(!Array.isArray(O))return null;const R=[];for(const p of O){if(p instanceof c.Ref&&A.includes(p)){M.put(p),R.push(p.toString());continue}const P=_(p,T);P&&R.push(P)}if(T>0)return R;const y=[];for(const p of A)M.has(p)||y.push(p.toString());return y.length&&R.push({name:null,order:y}),R}function _(O,T){if(++T>j)return(0,o.warn)("parseNestedOrder - reached MAX_NESTED_LEVELS."),null;const R=K.fetchIfRef(O);if(!Array.isArray(R))return null;const y=K.fetchIfRef(R[0]);if(typeof y!="string")return null;const p=v(R.slice(1),T);return!p||!p.length?null:{name:(0,o.stringToPDFString)(y),order:p}}const K=this.xref,M=new c.RefSet,j=10;return{name:typeof m.get("Name")=="string"?(0,o.stringToPDFString)(m.get("Name")):null,creator:typeof m.get("Creator")=="string"?(0,o.stringToPDFString)(m.get("Creator")):null,baseState:m.get("BaseState")instanceof c.Name?m.get("BaseState").name:null,on:k(m.get("ON")),off:k(m.get("OFF")),order:v(m.get("Order")),groups:null}}setActualNumPages(m=null){this._actualNumPages=m}get hasActualNumPages(){return this._actualNumPages!==null}get _pagesCount(){const m=this.toplevelPagesDict.get("Count");if(!Number.isInteger(m))throw new o.FormatError("Page count in top-level pages dictionary is not an integer.");return(0,o.shadow)(this,"_pagesCount",m)}get numPages(){return this.hasActualNumPages?this._actualNumPages:this._pagesCount}get destinations(){const m=this._readDests(),A=Object.create(null);if(m instanceof s.NameTree)for(const[k,v]of m.getAll()){const _=i(v);_&&(A[(0,o.stringToPDFString)(k)]=_)}else m instanceof c.Dict&&m.forEach(function(k,v){const _=i(v);_&&(A[k]=_)});return(0,o.shadow)(this,"destinations",A)}getDestination(m){const A=this._readDests();if(A instanceof s.NameTree){const k=i(A.get(m));if(k)return k;const v=this.destinations[m];if(v)return(0,o.warn)(`Found "${m}" at an incorrect position in the NameTree.`),v}else if(A instanceof c.Dict){const k=i(A.get(m));if(k)return k}return null}_readDests(){const m=this._catDict.get("Names");if(m&&m.has("Dests"))return new s.NameTree(m.getRaw("Dests"),this.xref);if(this._catDict.has("Dests"))return this._catDict.get("Dests")}get pageLabels(){let m=null;try{m=this._readPageLabels()}catch(A){if(A instanceof t.MissingDataException)throw A;(0,o.warn)("Unable to read page labels.")}return(0,o.shadow)(this,"pageLabels",m)}_readPageLabels(){const m=this._catDict.getRaw("PageLabels");if(!m)return null;const A=new Array(this.numPages);let k=null,v="";const K=new s.NumberTree(m,this.xref).getAll();let M="",j=1;for(let O=0,T=this.numPages;O<T;O++){const R=K.get(O);if(R!==void 0){if(!(R instanceof c.Dict))throw new o.FormatError("PageLabel is not a dictionary.");if(R.has("Type")&&!(0,c.isName)(R.get("Type"),"PageLabel"))throw new o.FormatError("Invalid type in PageLabel dictionary.");if(R.has("S")){const y=R.get("S");if(!(y instanceof c.Name))throw new o.FormatError("Invalid style in PageLabel dictionary.");k=y.name}else k=null;if(R.has("P")){const y=R.get("P");if(typeof y!="string")throw new o.FormatError("Invalid prefix in PageLabel dictionary.");v=(0,o.stringToPDFString)(y)}else v="";if(R.has("St")){const y=R.get("St");if(!(Number.isInteger(y)&&y>=1))throw new o.FormatError("Invalid start in PageLabel dictionary.");j=y}else j=1}switch(k){case"D":M=j;break;case"R":case"r":M=(0,t.toRomanNumerals)(j,k==="r");break;case"A":case"a":const y=26,E=k==="a"?97:65,S=j-1;M=String.fromCharCode(E+S%y).repeat(Math.floor(S/y)+1);break;default:if(k)throw new o.FormatError(`Invalid style "${k}" in PageLabel dictionary.`);M=""}A[O]=v+M,j++}return A}get pageLayout(){const m=this._catDict.get("PageLayout");let A="";if(m instanceof c.Name)switch(m.name){case"SinglePage":case"OneColumn":case"TwoColumnLeft":case"TwoColumnRight":case"TwoPageLeft":case"TwoPageRight":A=m.name}return(0,o.shadow)(this,"pageLayout",A)}get pageMode(){const m=this._catDict.get("PageMode");let A="UseNone";if(m instanceof c.Name)switch(m.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"FullScreen":case"UseOC":case"UseAttachments":A=m.name}return(0,o.shadow)(this,"pageMode",A)}get viewerPreferences(){const m=this._catDict.get("ViewerPreferences");if(!(m instanceof c.Dict))return(0,o.shadow)(this,"viewerPreferences",null);let A=null;for(const k of m.getKeys()){const v=m.get(k);let _;switch(k){case"HideToolbar":case"HideMenubar":case"HideWindowUI":case"FitWindow":case"CenterWindow":case"DisplayDocTitle":case"PickTrayByPDFSize":typeof v=="boolean"&&(_=v);break;case"NonFullScreenPageMode":if(v instanceof c.Name)switch(v.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"UseOC":_=v.name;break;default:_="UseNone"}break;case"Direction":if(v instanceof c.Name)switch(v.name){case"L2R":case"R2L":_=v.name;break;default:_="L2R"}break;case"ViewArea":case"ViewClip":case"PrintArea":case"PrintClip":if(v instanceof c.Name)switch(v.name){case"MediaBox":case"CropBox":case"BleedBox":case"TrimBox":case"ArtBox":_=v.name;break;default:_="CropBox"}break;case"PrintScaling":if(v instanceof c.Name)switch(v.name){case"None":case"AppDefault":_=v.name;break;default:_="AppDefault"}break;case"Duplex":if(v instanceof c.Name)switch(v.name){case"Simplex":case"DuplexFlipShortEdge":case"DuplexFlipLongEdge":_=v.name;break;default:_="None"}break;case"PrintPageRange":Array.isArray(v)&&v.length%2===0&&v.every((M,j,O)=>Number.isInteger(M)&&M>0&&(j===0||M>=O[j-1])&&M<=this.numPages)&&(_=v);break;case"NumCopies":Number.isInteger(v)&&v>0&&(_=v);break;default:(0,o.warn)(`Ignoring non-standard key in ViewerPreferences: ${k}.`);continue}if(_===void 0){(0,o.warn)(`Bad value, for key "${k}", in ViewerPreferences: ${v}.`);continue}A||(A=Object.create(null)),A[k]=_}return(0,o.shadow)(this,"viewerPreferences",A)}get openAction(){const m=this._catDict.get("OpenAction"),A=Object.create(null);if(m instanceof c.Dict){const k=new c.Dict(this.xref);k.set("A",m);const v={url:null,dest:null,action:null};g.parseDestDictionary({destDict:k,resultObj:v}),Array.isArray(v.dest)?A.dest=v.dest:v.action&&(A.action=v.action)}else Array.isArray(m)&&(A.dest=m);return(0,o.shadow)(this,"openAction",(0,o.objectSize)(A)>0?A:null)}get attachments(){const m=this._catDict.get("Names");let A=null;if(m instanceof c.Dict&&m.has("EmbeddedFiles")){const k=new s.NameTree(m.getRaw("EmbeddedFiles"),this.xref);for(const[v,_]of k.getAll()){const K=new n.FileSpec(_,this.xref);A||(A=Object.create(null)),A[(0,o.stringToPDFString)(v)]=K.serializable}}return(0,o.shadow)(this,"attachments",A)}get xfaImages(){const m=this._catDict.get("Names");let A=null;if(m instanceof c.Dict&&m.has("XFAImages")){const k=new s.NameTree(m.getRaw("XFAImages"),this.xref);for(const[v,_]of k.getAll())A||(A=new c.Dict(this.xref)),A.set((0,o.stringToPDFString)(v),_)}return(0,o.shadow)(this,"xfaImages",A)}_collectJavaScript(){const m=this._catDict.get("Names");let A=null;function k(_,K){if(!(K instanceof c.Dict)||!(0,c.isName)(K.get("S"),"JavaScript"))return;let M=K.get("JS");if(M instanceof e.BaseStream)M=M.getString();else if(typeof M!="string")return;A===null&&(A=new Map),M=(0,o.stringToPDFString)(M).replace(/\u0000/g,""),A.set(_,M)}if(m instanceof c.Dict&&m.has("JavaScript")){const _=new s.NameTree(m.getRaw("JavaScript"),this.xref);for(const[K,M]of _.getAll())k((0,o.stringToPDFString)(K),M)}const v=this._catDict.get("OpenAction");return v&&k("OpenAction",v),A}get javaScript(){const m=this._collectJavaScript();return(0,o.shadow)(this,"javaScript",m?[...m.values()]:null)}get jsActions(){const m=this._collectJavaScript();let A=(0,t.collectActions)(this.xref,this._catDict,o.DocumentActionEventType);if(m){A||(A=Object.create(null));for(const[k,v]of m)k in A?A[k].push(v):A[k]=[v]}return(0,o.shadow)(this,"jsActions",A)}async fontFallback(m,A){const k=await Promise.all(this.fontCache);for(const v of k)if(v.loadedName===m){v.fallback(A);return}}async cleanup(m=!1){(0,a.clearGlobalCaches)(),this.globalImageCache.clear(m),this.pageKidsCountCache.clear(),this.pageIndexCache.clear(),this.nonBlendModesSet.clear();const A=await Promise.all(this.fontCache);for(const{dict:k}of A)delete k.cacheKey;this.fontCache.clear(),this.builtInCMapCache.clear(),this.standardFontDataCache.clear()}async getPageDict(m){const A=[this.toplevelPagesDict],k=new c.RefSet,v=this._catDict.getRaw("Pages");v instanceof c.Ref&&k.put(v);const _=this.xref,K=this.pageKidsCountCache,M=this.pageIndexCache;let j=0;for(;A.length;){const O=A.pop();if(O instanceof c.Ref){const p=K.get(O);if(p>=0&&j+p<=m){j+=p;continue}if(k.has(O))throw new o.FormatError("Pages tree contains circular reference.");k.put(O);const P=await _.fetchAsync(O);if(P instanceof c.Dict){let E=P.getRaw("Type");if(E instanceof c.Ref&&(E=await _.fetchAsync(E)),(0,c.isName)(E,"Page")||!P.has("Kids")){if(K.has(O)||K.put(O,1),M.has(O)||M.put(O,j),j===m)return[P,O];j++;continue}}A.push(P);continue}if(!(O instanceof c.Dict))throw new o.FormatError("Page dictionary kid reference points to wrong type of object.");const{objId:T}=O;let R=O.getRaw("Count");if(R instanceof c.Ref&&(R=await _.fetchAsync(R)),Number.isInteger(R)&&R>=0&&(T&&!K.has(T)&&K.put(T,R),j+R<=m)){j+=R;continue}let y=O.getRaw("Kids");if(y instanceof c.Ref&&(y=await _.fetchAsync(y)),!Array.isArray(y)){let p=O.getRaw("Type");if(p instanceof c.Ref&&(p=await _.fetchAsync(p)),(0,c.isName)(p,"Page")||!O.has("Kids")){if(j===m)return[O,null];j++;continue}throw new o.FormatError("Page dictionary kids object is not an array.")}for(let p=y.length-1;p>=0;p--)A.push(y[p])}throw new Error(`Page index ${m} not found.`)}async getAllPageDicts(m=!1){const A=[{currentNode:this.toplevelPagesDict,posInKids:0}],k=new c.RefSet,v=this._catDict.getRaw("Pages");v instanceof c.Ref&&k.put(v);const _=new Map,K=this.xref,M=this.pageIndexCache;let j=0;function O(R,y){y&&!M.has(y)&&M.put(y,j),_.set(j++,[R,y])}function T(R){if(R instanceof t.XRefEntryException&&!m)throw R;_.set(j++,[R,null])}for(;A.length>0;){const R=A.at(-1),{currentNode:y,posInKids:p}=R;let P=y.getRaw("Kids");if(P instanceof c.Ref)try{P=await K.fetchAsync(P)}catch(C){T(C);break}if(!Array.isArray(P)){T(new o.FormatError("Page dictionary kids object is not an array."));break}if(p>=P.length){A.pop();continue}const E=P[p];let S;if(E instanceof c.Ref){if(k.has(E)){T(new o.FormatError("Pages tree contains circular reference."));break}k.put(E);try{S=await K.fetchAsync(E)}catch(C){T(C);break}}else S=E;if(!(S instanceof c.Dict)){T(new o.FormatError("Page dictionary kid reference points to wrong type of object."));break}let F=S.getRaw("Type");if(F instanceof c.Ref)try{F=await K.fetchAsync(F)}catch(C){T(C);break}(0,c.isName)(F,"Page")||!S.has("Kids")?O(S,E instanceof c.Ref?E:null):A.push({currentNode:S,posInKids:0}),R.posInKids++}return _}getPageIndex(m){const A=this.pageIndexCache.get(m);if(A!==void 0)return Promise.resolve(A);const k=this.xref;function v(M){let j=0,O;return k.fetchAsync(M).then(function(T){if((0,c.isRefsEqual)(M,m)&&!(0,c.isDict)(T,"Page")&&!(T instanceof c.Dict&&!T.has("Type")&&T.has("Contents")))throw new o.FormatError("The reference does not point to a /Page dictionary.");if(!T)return null;if(!(T instanceof c.Dict))throw new o.FormatError("Node must be a dictionary.");return O=T.getRaw("Parent"),T.getAsync("Parent")}).then(function(T){if(!T)return null;if(!(T instanceof c.Dict))throw new o.FormatError("Parent must be a dictionary.");return T.getAsync("Kids")}).then(function(T){if(!T)return null;const R=[];let y=!1;for(let p=0,P=T.length;p<P;p++){const E=T[p];if(!(E instanceof c.Ref))throw new o.FormatError("Kid must be a reference.");if((0,c.isRefsEqual)(E,M)){y=!0;break}R.push(k.fetchAsync(E).then(function(S){if(!(S instanceof c.Dict))throw new o.FormatError("Kid node must be a dictionary.");S.has("Count")?j+=S.get("Count"):j++}))}if(!y)throw new o.FormatError("Kid reference not found in parent's kids.");return Promise.all(R).then(function(){return[j,O]})})}let _=0;const K=M=>v(M).then(j=>{if(!j)return this.pageIndexCache.put(m,_),_;const[O,T]=j;return _+=O,K(T)});return K(m)}get baseUrl(){const m=this._catDict.get("URI");if(m instanceof c.Dict){const A=m.get("Base");if(typeof A=="string"){const k=(0,o.createValidAbsoluteUrl)(A,null,{tryConvertEncoding:!0});if(k)return(0,o.shadow)(this,"baseUrl",k.href)}}return(0,o.shadow)(this,"baseUrl",null)}static parseDestDictionary(m){const A=m.destDict;if(!(A instanceof c.Dict)){(0,o.warn)("parseDestDictionary: `destDict` must be a dictionary.");return}const k=m.resultObj;if(typeof k!="object"){(0,o.warn)("parseDestDictionary: `resultObj` must be an object.");return}const v=m.docBaseUrl||null;let _=A.get("A"),K,M;if(_ instanceof c.Dict||(A.has("Dest")?_=A.get("Dest"):(_=A.get("AA"),_ instanceof c.Dict&&(_.has("D")?_=_.get("D"):_.has("U")&&(_=_.get("U"))))),_ instanceof c.Dict){const j=_.get("S");if(!(j instanceof c.Name)){(0,o.warn)("parseDestDictionary: Invalid type in Action dictionary.");return}const O=j.name;switch(O){case"ResetForm":const T=_.get("Flags"),R=((typeof T=="number"?T:0)&1)===0,y=[],p=[];for(const U of _.get("Fields")||[])U instanceof c.Ref?p.push(U.toString()):typeof U=="string"&&y.push((0,o.stringToPDFString)(U));k.resetForm={fields:y,refs:p,include:R};break;case"URI":K=_.get("URI"),K instanceof c.Name&&(K="/"+K.name);break;case"GoTo":M=_.get("D");break;case"Launch":case"GoToR":const P=_.get("F");P instanceof c.Dict?K=P.get("F")||null:typeof P=="string"&&(K=P);let E=_.get("D");if(E&&(E instanceof c.Name&&(E=E.name),typeof K=="string")){const U=K.split("#")[0];typeof E=="string"?K=U+"#"+E:Array.isArray(E)&&(K=U+"#"+JSON.stringify(E))}const S=_.get("NewWindow");typeof S=="boolean"&&(k.newWindow=S);break;case"Named":const F=_.get("N");F instanceof c.Name&&(k.action=F.name);break;case"JavaScript":const C=_.get("JS");let b;C instanceof e.BaseStream?b=C.getString():typeof C=="string"&&(b=C);const D=b&&(0,t.recoverJsURL)((0,o.stringToPDFString)(b));if(D){K=D.url,k.newWindow=D.newWindow;break}default:if(O==="JavaScript"||O==="SubmitForm")break;(0,o.warn)(`parseDestDictionary - unsupported action: "${O}".`);break}}else A.has("Dest")&&(M=A.get("Dest"));if(typeof K=="string"){const j=(0,o.createValidAbsoluteUrl)(K,v,{addDefaultProtocol:!0,tryConvertEncoding:!0});j&&(k.url=j.href),k.unsafeUrl=K}M&&(M instanceof c.Name&&(M=M.name),typeof M=="string"?k.dest=(0,o.stringToPDFString)(M):Array.isArray(M)&&(k.dest=M))}}f.Catalog=g},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.NumberTree=f.NameTree=void 0;var t=h(5),o=h(2);class c{constructor(r,n,l){this.constructor===c&&(0,o.unreachable)("Cannot initialize NameOrNumberTree."),this.root=r,this.xref=n,this._type=l}getAll(){const r=new Map;if(!this.root)return r;const n=this.xref,l=new t.RefSet;l.put(this.root);const u=[this.root];for(;u.length>0;){const d=n.fetchIfRef(u.shift());if(!(d instanceof t.Dict))continue;if(d.has("Kids")){const g=d.get("Kids");if(!Array.isArray(g))continue;for(const x of g){if(l.has(x))throw new o.FormatError(`Duplicate entry in "${this._type}" tree.`);u.push(x),l.put(x)}continue}const i=d.get(this._type);if(Array.isArray(i))for(let g=0,x=i.length;g<x;g+=2)r.set(n.fetchIfRef(i[g]),n.fetchIfRef(i[g+1]))}return r}get(r){if(!this.root)return null;const n=this.xref;let l=n.fetchIfRef(this.root),u=0;const d=10;for(;l.has("Kids");){if(++u>d)return(0,o.warn)(`Search depth limit reached for "${this._type}" tree.`),null;const g=l.get("Kids");if(!Array.isArray(g))return null;let x=0,m=g.length-1;for(;x<=m;){const A=x+m>>1,k=n.fetchIfRef(g[A]),v=k.get("Limits");if(r<n.fetchIfRef(v[0]))m=A-1;else if(r>n.fetchIfRef(v[1]))x=A+1;else{l=k;break}}if(x>m)return null}const i=l.get(this._type);if(Array.isArray(i)){let g=0,x=i.length-2;for(;g<=x;){const m=g+x>>1,A=m+(m&1),k=n.fetchIfRef(i[A]);if(r<k)x=A-2;else if(r>k)g=A+2;else return n.fetchIfRef(i[A+1])}}return null}}class s extends c{constructor(r,n){super(r,n,"Names")}}f.NameTree=s;class e extends c{constructor(r,n){super(r,n,"Nums")}}f.NumberTree=e},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.clearGlobalCaches=c;var t=h(5),o=h(40);function c(){(0,t.clearPrimitiveCaches)(),(0,o.clearUnicodeCaches)()}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.FileSpec=void 0;var t=h(2),o=h(7),c=h(5);function s(a){return a.has("UF")?a.get("UF"):a.has("F")?a.get("F"):a.has("Unix")?a.get("Unix"):a.has("Mac")?a.get("Mac"):a.has("DOS")?a.get("DOS"):null}class e{constructor(r,n){r instanceof c.Dict&&(this.xref=n,this.root=r,r.has("FS")&&(this.fs=r.get("FS")),this.description=r.has("Desc")?(0,t.stringToPDFString)(r.get("Desc")):"",r.has("RF")&&(0,t.warn)("Related file specifications are not supported"),this.contentAvailable=!0,r.has("EF")||(this.contentAvailable=!1,(0,t.warn)("Non-embedded file specifications are not supported")))}get filename(){if(!this._filename&&this.root){const r=s(this.root)||"unnamed";this._filename=(0,t.stringToPDFString)(r).replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\/g,"/")}return this._filename}get content(){if(!this.contentAvailable)return null;!this.contentRef&&this.root&&(this.contentRef=s(this.root.get("EF")));let r=null;if(this.contentRef){const n=this.xref.fetchIfRef(this.contentRef);n instanceof o.BaseStream?r=n.getBytes():(0,t.warn)("Embedded file specification points to non-existing/invalid content")}else(0,t.warn)("Embedded file specification does not have a content");return r}get serializable(){return{filename:this.filename,content:this.content}}}f.FileSpec=e},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.MetadataParser=void 0;var t=h(66);class o{constructor(s){s=this._repair(s);const a=new t.SimpleXMLParser({lowerCaseName:!0}).parseFromString(s);this._metadataMap=new Map,this._data=s,a&&this._parse(a)}_repair(s){return s.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,function(e,a){const r=a.replace(/\\([0-3])([0-7])([0-7])/g,function(l,u,d,i){return String.fromCharCode(u*64+d*8+i*1)}).replace(/&(amp|apos|gt|lt|quot);/g,function(l,u){switch(u){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${u} isn't defined.`)}),n=[];for(let l=0,u=r.length;l<u;l+=2){const d=r.charCodeAt(l)*256+r.charCodeAt(l+1);d>=32&&d<127&&d!==60&&d!==62&&d!==38?n.push(String.fromCharCode(d)):n.push("&#x"+(65536+d).toString(16).substring(1)+";")}return">"+n.join("")})}_getSequence(s){const e=s.nodeName;return e!=="rdf:bag"&&e!=="rdf:seq"&&e!=="rdf:alt"?null:s.childNodes.filter(a=>a.nodeName==="rdf:li")}_parseArray(s){if(!s.hasChildNodes())return;const[e]=s.childNodes,a=this._getSequence(e)||[];this._metadataMap.set(s.nodeName,a.map(r=>r.textContent.trim()))}_parse(s){let e=s.documentElement;if(e.nodeName!=="rdf:rdf")for(e=e.firstChild;e&&e.nodeName!=="rdf:rdf";)e=e.nextSibling;if(!(!e||e.nodeName!=="rdf:rdf"||!e.hasChildNodes())){for(const a of e.childNodes)if(a.nodeName==="rdf:description")for(const r of a.childNodes){const n=r.nodeName;switch(n){case"#text":continue;case"dc:creator":case"dc:subject":this._parseArray(r);continue}this._metadataMap.set(n,r.textContent.trim())}}}get serializable(){return{parsedData:this._metadataMap,rawData:this._data}}}f.MetadataParser=o},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.StructTreeRoot=f.StructTreePage=void 0;var t=h(5),o=h(2),c=h(70);const s=40,e={PAGE_CONTENT:"PAGE_CONTENT",STREAM_CONTENT:"STREAM_CONTENT",OBJECT:"OBJECT",ELEMENT:"ELEMENT"};class a{constructor(d){this.dict=d,this.roleMap=new Map}init(){this.readRoleMap()}readRoleMap(){const d=this.dict.get("RoleMap");d instanceof t.Dict&&d.forEach((i,g)=>{g instanceof t.Name&&this.roleMap.set(i,g.name)})}}f.StructTreeRoot=a;class r{constructor(d,i){this.tree=d,this.dict=i,this.kids=[],this.parseKids()}get role(){const d=this.dict.get("S"),i=d instanceof t.Name?d.name:"",{root:g}=this.tree;return g.roleMap.has(i)?g.roleMap.get(i):i}parseKids(){let d=null;const i=this.dict.getRaw("Pg");i instanceof t.Ref&&(d=i.toString());const g=this.dict.get("K");if(Array.isArray(g))for(const x of g){const m=this.parseKid(d,x);m&&this.kids.push(m)}else{const x=this.parseKid(d,g);x&&this.kids.push(x)}}parseKid(d,i){if(Number.isInteger(i))return this.tree.pageDict.objId!==d?null:new n({type:e.PAGE_CONTENT,mcid:i,pageObjId:d});let g=null;if(i instanceof t.Ref?g=this.dict.xref.fetch(i):i instanceof t.Dict&&(g=i),!g)return null;const x=g.getRaw("Pg");x instanceof t.Ref&&(d=x.toString());const m=g.get("Type")instanceof t.Name?g.get("Type").name:null;return m==="MCR"?this.tree.pageDict.objId!==d?null:new n({type:e.STREAM_CONTENT,refObjId:g.getRaw("Stm")instanceof t.Ref?g.getRaw("Stm").toString():null,pageObjId:d,mcid:g.get("MCID")}):m==="OBJR"?this.tree.pageDict.objId!==d?null:new n({type:e.OBJECT,refObjId:g.getRaw("Obj")instanceof t.Ref?g.getRaw("Obj").toString():null,pageObjId:d}):new n({type:e.ELEMENT,dict:g})}}class n{constructor({type:d,dict:i=null,mcid:g=null,pageObjId:x=null,refObjId:m=null}){this.type=d,this.dict=i,this.mcid=g,this.pageObjId=x,this.refObjId=m,this.parentNode=null}}class l{constructor(d,i){this.root=d,this.rootDict=d?d.dict:null,this.pageDict=i,this.nodes=[]}parse(){if(!this.root||!this.rootDict)return;const d=this.rootDict.get("ParentTree");if(!d)return;const i=this.pageDict.get("StructParents");if(!Number.isInteger(i))return;const x=new c.NumberTree(d,this.rootDict.xref).get(i);if(!Array.isArray(x))return;const m=new Map;for(const A of x)A instanceof t.Ref&&this.addNode(this.rootDict.xref.fetch(A),m)}addNode(d,i,g=0){if(g>s)return(0,o.warn)("StructTree MAX_DEPTH reached."),null;if(i.has(d))return i.get(d);const x=new r(this,d);i.set(d,x);const m=d.get("P");if(!m||(0,t.isName)(m.get("Type"),"StructTreeRoot"))return this.addTopLevelNode(d,x)||i.delete(d),x;const A=this.addNode(m,i,g+1);if(!A)return x;let k=!1;for(const v of A.kids)v.type===e.ELEMENT&&v.dict===d&&(v.parentNode=x,k=!0);return k||i.delete(d),x}addTopLevelNode(d,i){const g=this.rootDict.get("K");if(!g)return!1;if(g instanceof t.Dict)return g.objId!==d.objId?!1:(this.nodes[0]=i,!0);if(!Array.isArray(g))return!0;let x=!1;for(let m=0;m<g.length;m++){const A=g[m];A&&A.toString()===d.objId&&(this.nodes[m]=i,x=!0)}return x}get serializable(){function d(g,x,m=0){if(m>s){(0,o.warn)("StructTree too deep to be fully serialized.");return}const A=Object.create(null);A.role=g.role,A.children=[],x.children.push(A);const k=g.dict.get("Alt");typeof k=="string"&&(A.alt=(0,o.stringToPDFString)(k));const v=g.dict.get("Lang");typeof v=="string"&&(A.lang=(0,o.stringToPDFString)(v));for(const _ of g.kids){const K=_.type===e.ELEMENT?_.parentNode:null;if(K){d(K,A,m+1);continue}else _.type===e.PAGE_CONTENT||_.type===e.STREAM_CONTENT?A.children.push({type:"content",id:`page${_.pageObjId}_mcid${_.mcid}`}):_.type===e.OBJECT&&A.children.push({type:"object",id:_.refObjId})}}const i=Object.create(null);i.children=[],i.role="Root";for(const g of this.nodes)g&&d(g,i);return i}}f.StructTreePage=l},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ObjectLoader=void 0;var t=h(5),o=h(7),c=h(6),s=h(2);function e(n){return n instanceof t.Ref||n instanceof t.Dict||n instanceof o.BaseStream||Array.isArray(n)}function a(n,l){if(n instanceof t.Dict)n=n.getRawValues();else if(n instanceof o.BaseStream)n=n.dict.getRawValues();else if(!Array.isArray(n))return;for(const u of n)e(u)&&l.push(u)}class r{constructor(l,u,d){this.dict=l,this.keys=u,this.xref=d,this.refSet=null}async load(){if(this.xref.stream.isDataLoaded)return;const{keys:l,dict:u}=this;this.refSet=new t.RefSet;const d=[];for(let i=0,g=l.length;i<g;i++){const x=u.getRaw(l[i]);x!==void 0&&d.push(x)}return this._walk(d)}async _walk(l){const u=[],d=[];for(;l.length;){let i=l.pop();if(i instanceof t.Ref){if(this.refSet.has(i))continue;try{this.refSet.put(i),i=this.xref.fetch(i)}catch(g){if(!(g instanceof c.MissingDataException)){(0,s.warn)(`ObjectLoader._walk - requesting all data: "${g}".`),this.refSet=null;const{manager:x}=this.xref.stream;return x.requestAllChunks()}u.push(i),d.push({begin:g.begin,end:g.end})}}if(i instanceof o.BaseStream){const g=i.getBaseStreams();if(g){let x=!1;for(const m of g)m.isDataLoaded||(x=!0,d.push({begin:m.start,end:m.end}));x&&u.push(i)}}a(i,l)}if(d.length){await this.xref.stream.manager.requestRanges(d);for(const i of u)i instanceof t.Ref&&this.refSet.remove(i);return this._walk(u)}this.refSet=null}}f.ObjectLoader=r},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.XFAFactory=void 0;var t=h(77),o=h(81),c=h(87),s=h(85),e=h(78),a=h(2),r=h(88),n=h(98);class l{constructor(d){try{this.root=new r.XFAParser().parse(l._createDocument(d));const i=new o.Binder(this.root);this.form=i.bind(),this.dataHandler=new c.DataHandler(this.root,i.getData()),this.form[t.$globalData].template=this.form}catch(i){(0,a.warn)(`XFA - an error occurred during parsing and binding: ${i}`)}}isValid(){return this.root&&this.form}_createPagesHelper(){const d=this.form[t.$toPages]();return new Promise((i,g)=>{const x=()=>{try{const m=d.next();m.done?i(m.value):setTimeout(x,0)}catch(m){g(m)}};setTimeout(x,0)})}async _createPages(){try{this.pages=await this._createPagesHelper(),this.dims=this.pages.children.map(d=>{const{width:i,height:g}=d.attributes.style;return[0,0,parseInt(i),parseInt(g)]})}catch(d){(0,a.warn)(`XFA - an error occurred during layout: ${d}`)}}getBoundingBox(d){return this.dims[d]}async getNumPages(){return this.pages||await this._createPages(),this.dims.length}setImages(d){this.form[t.$globalData].images=d}setFonts(d){this.form[t.$globalData].fontFinder=new s.FontFinder(d);const i=[];for(let g of this.form[t.$globalData].usedTypefaces)g=(0,e.stripQuotes)(g),this.form[t.$globalData].fontFinder.find(g)||i.push(g);return i.length>0?i:null}appendFonts(d,i){this.form[t.$globalData].fontFinder.add(d,i)}async getPages(){this.pages||await this._createPages();const d=this.pages;return this.pages=null,d}serializeData(d){return this.dataHandler.serialize(d)}static _createDocument(d){return d["/xdp:xdp"]?Object.values(d).join(""):d["xdp:xdp"]}static getRichTextAsHtml(d){if(!d||typeof d!="string")return null;try{let i=new r.XFAParser(n.XhtmlNamespace,!0).parse(d);if(!["body","xhtml"].includes(i[t.$nodeName])){const A=n.XhtmlNamespace.body({});A[t.$appendChild](i),i=A}const g=i[t.$toHTML]();if(!g.success)return null;const{html:x}=g,{attributes:m}=x;return m&&(m.class&&(m.class=m.class.filter(A=>!A.startsWith("xfa"))),m.dir="auto"),{html:x,str:i[t.$text]()}}catch(i){(0,a.warn)(`XFA - an error occurred during parsing of rich text: ${i}`)}return null}}f.XFAFactory=l},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.XmlObject=f.XFAObjectArray=f.XFAObject=f.XFAAttribute=f.StringObject=f.OptionObject=f.Option10=f.Option01=f.IntegerObject=f.ContentObject=f.$uid=f.$toStyle=f.$toString=f.$toPages=f.$toHTML=f.$text=f.$tabIndex=f.$setValue=f.$setSetAttributes=f.$setId=f.$searchNode=f.$root=f.$resolvePrototypes=f.$removeChild=f.$pushPara=f.$pushGlyphs=f.$popPara=f.$onText=f.$onChildCheck=f.$onChild=f.$nsAttributes=f.$nodeName=f.$namespaceId=f.$isUsable=f.$isTransparent=f.$isThereMoreWidth=f.$isSplittable=f.$isNsAgnostic=f.$isDescendent=f.$isDataValue=f.$isCDATAXml=f.$isBindable=f.$insertAt=f.$indexOf=f.$ids=f.$hasSettableValue=f.$globalData=f.$getTemplateRoot=f.$getSubformParent=f.$getRealChildrenByNameIt=f.$getParent=f.$getNextPage=f.$getExtra=f.$getDataValue=f.$getContainedChildren=f.$getChildrenByNameIt=f.$getChildrenByName=f.$getChildrenByClass=f.$getChildren=f.$getAvailableSpace=f.$getAttributes=f.$getAttributeIt=f.$flushHTML=f.$finalize=f.$extra=f.$dump=f.$data=f.$content=f.$consumed=f.$clone=f.$cleanup=f.$cleanPage=f.$clean=f.$childrenToHTML=f.$appendChild=f.$addHTML=f.$acceptWhitespace=void 0;var t=h(78),o=h(2),c=h(6),s=h(79),e=h(80);const a=Symbol();f.$acceptWhitespace=a;const r=Symbol();f.$addHTML=r;const n=Symbol();f.$appendChild=n;const l=Symbol();f.$childrenToHTML=l;const u=Symbol();f.$clean=u;const d=Symbol();f.$cleanPage=d;const i=Symbol();f.$cleanup=i;const g=Symbol();f.$clone=g;const x=Symbol();f.$consumed=x;const m=Symbol("content");f.$content=m;const A=Symbol("data");f.$data=A;const k=Symbol();f.$dump=k;const v=Symbol("extra");f.$extra=v;const _=Symbol();f.$finalize=_;const K=Symbol();f.$flushHTML=K;const M=Symbol();f.$getAttributeIt=M;const j=Symbol();f.$getAttributes=j;const O=Symbol();f.$getAvailableSpace=O;const T=Symbol();f.$getChildrenByClass=T;const R=Symbol();f.$getChildrenByName=R;const y=Symbol();f.$getChildrenByNameIt=y;const p=Symbol();f.$getDataValue=p;const P=Symbol();f.$getExtra=P;const E=Symbol();f.$getRealChildrenByNameIt=E;const S=Symbol();f.$getChildren=S;const F=Symbol();f.$getContainedChildren=F;const C=Symbol();f.$getNextPage=C;const b=Symbol();f.$getSubformParent=b;const D=Symbol();f.$getParent=D;const U=Symbol();f.$getTemplateRoot=U;const X=Symbol();f.$globalData=X;const G=Symbol();f.$hasSettableValue=G;const Y=Symbol();f.$ids=Y;const N=Symbol();f.$indexOf=N;const I=Symbol();f.$insertAt=I;const L=Symbol();f.$isCDATAXml=L;const $=Symbol();f.$isBindable=$;const W=Symbol();f.$isDataValue=W;const z=Symbol();f.$isDescendent=z;const B=Symbol();f.$isNsAgnostic=B;const H=Symbol();f.$isSplittable=H;const q=Symbol();f.$isThereMoreWidth=q;const Z=Symbol();f.$isTransparent=Z;const te=Symbol();f.$isUsable=te;const Q=Symbol(),ee=Symbol("namespaceId");f.$namespaceId=ee;const J=Symbol("nodeName");f.$nodeName=J;const ne=Symbol();f.$nsAttributes=ne;const re=Symbol();f.$onChild=re;const ae=Symbol();f.$onChildCheck=ae;const se=Symbol();f.$onText=se;const oe=Symbol();f.$pushGlyphs=oe;const me=Symbol();f.$popPara=me;const xe=Symbol();f.$pushPara=xe;const Ae=Symbol();f.$removeChild=Ae;const Se=Symbol("root");f.$root=Se;const Fe=Symbol();f.$resolvePrototypes=Fe;const Pe=Symbol();f.$searchNode=Pe;const ue=Symbol();f.$setId=ue;const ye=Symbol();f.$setSetAttributes=ye;const le=Symbol();f.$setValue=le;const he=Symbol();f.$tabIndex=he;const ce=Symbol();f.$text=ce;const Te=Symbol();f.$toPages=Te;const Re=Symbol();f.$toHTML=Re;const He=Symbol();f.$toString=He;const Ce=Symbol();f.$toStyle=Ce;const ve=Symbol("uid");f.$uid=ve;const fe=Symbol(),We=Symbol(),Ue=Symbol(),ze=Symbol("_children"),tt=Symbol(),Ne=Symbol(),Qe=Symbol(),ct=Symbol(),Ee=Symbol(),rt=Symbol(),Ze=Symbol(),vt=Symbol(),lt=Symbol(),ht=Symbol("parent"),ot=Symbol(),Dt=Symbol(),Ot=Symbol();let Xe=0;const Ie=s.NamespaceIds.datasets.id;class Ge{constructor(we,_e,$e=!1){this[ee]=we,this[J]=_e,this[Ze]=$e,this[ht]=null,this[ze]=[],this[ve]=`${_e}${Xe++}`,this[X]=null}[re](we){if(!this[Ze]||!this[ae](we))return!1;const _e=we[J],$e=this[_e];if($e instanceof Ve){if($e.push(we))return this[n](we),!0}else return $e!==null&&this[Ae]($e),this[_e]=we,this[n](we),!0;let je="";return this.id?je=` (id: ${this.id})`:this.name&&(je=` (name: ${this.name} ${this.h.value})`),(0,o.warn)(`XFA - node "${this[J]}"${je} has already enough "${_e}"!`),!1}[ae](we){return this.hasOwnProperty(we[J])&&we[ee]===this[ee]}[B](){return!1}[a](){return!1}[L](){return!1}[$](){return!1}[me](){this.para&&this[U]()[v].paraStack.pop()}[xe](){this[U]()[v].paraStack.push(this.para)}[ue](we){this.id&&this[ee]===s.NamespaceIds.template.id&&we.set(this.id,this)}[U](){return this[X].template}[H](){return!1}[q](){return!1}[n](we){we[ht]=this,this[ze].push(we),!we[X]&&this[X]&&(we[X]=this[X])}[Ae](we){const _e=this[ze].indexOf(we);this[ze].splice(_e,1)}[G](){return this.hasOwnProperty("value")}[le](we){}[se](we){}[_](){}[u](we){delete this[Ze],this[i]&&(we.clean(this[i]),delete this[i])}[N](we){return this[ze].indexOf(we)}[I](we,_e){_e[ht]=this,this[ze].splice(we,0,_e),!_e[X]&&this[X]&&(_e[X]=this[X])}[Z](){return!this.name}[Q](){return""}[ce](){return this[ze].length===0?this[m]:this[ze].map(we=>we[ce]()).join("")}get[Ue](){const we=Object.getPrototypeOf(this);if(!we._attributes){const _e=we._attributes=new Set;for(const $e of Object.getOwnPropertyNames(this)){if(this[$e]===null||this[$e]instanceof Ge||this[$e]instanceof Ve)break;_e.add($e)}}return(0,o.shadow)(this,Ue,we._attributes)}[z](we){let _e=this;for(;_e;){if(_e===we)return!0;_e=_e[D]()}return!1}[D](){return this[ht]}[b](){return this[D]()}[S](we=null){return we?this[we]:this[ze]}[k](){const we=Object.create(null);this[m]&&(we.$content=this[m]);for(const _e of Object.getOwnPropertyNames(this)){const $e=this[_e];$e!==null&&($e instanceof Ge?we[_e]=$e[k]():$e instanceof Ve?$e.isEmpty()||(we[_e]=$e.dump()):we[_e]=$e)}return we}[Ce](){return null}[Re](){return t.HTMLResult.EMPTY}*[F](){for(const we of this[S]())yield we}*[ct](we,_e){for(const $e of this[F]())if(!we||_e===we.has($e[J])){const je=this[O](),et=$e[Re](je);et.success||(this[v].failingNode=$e),yield et}}[K](){return null}[r](we,_e){this[v].children.push(we)}[O](){}[l]({filter:we=null,include:_e=!0}){if(!this[v].generator)this[v].generator=this[ct](we,_e);else{const $e=this[O](),je=this[v].failingNode[Re]($e);if(!je.success)return je;je.html&&this[r](je.html,je.bbox),delete this[v].failingNode}for(;;){const $e=this[v].generator.next();if($e.done)break;const je=$e.value;if(!je.success)return je;je.html&&this[r](je.html,je.bbox)}return this[v].generator=null,t.HTMLResult.EMPTY}[ye](we){this[Dt]=new Set(Object.keys(we))}[rt](we){const _e=this[Ue],$e=this[Dt];return[...we].filter(je=>_e.has(je)&&!$e.has(je))}[Fe](we,_e=new Set){for(const $e of this[ze])$e[ot](we,_e)}[ot](we,_e){const $e=this[Ee](we,_e);$e?this[fe]($e,we,_e):this[Fe](we,_e)}[Ee](we,_e){const{use:$e,usehref:je}=this;if(!$e&&!je)return null;let et=null,xt=null,Et=null,yt=$e;if(je?(yt=je,je.startsWith("#som(")&&je.endsWith(")")?xt=je.slice(5,je.length-1):je.startsWith(".#som(")&&je.endsWith(")")?xt=je.slice(6,je.length-1):je.startsWith("#")?Et=je.slice(1):je.startsWith(".#")&&(Et=je.slice(2))):$e.startsWith("#")?Et=$e.slice(1):xt=$e,this.use=this.usehref="",Et?et=we.get(Et):(et=(0,e.searchNode)(we.get(Se),this,xt,!0,!1),et&&(et=et[0])),!et)return(0,o.warn)(`XFA - Invalid prototype reference: ${yt}.`),null;if(et[J]!==this[J])return(0,o.warn)(`XFA - Incompatible prototype: ${et[J]} !== ${this[J]}.`),null;if(_e.has(et))return(0,o.warn)("XFA - Cycle detected in prototypes use."),null;_e.add(et);const wt=et[Ee](we,_e);return wt&&et[fe](wt,we,_e),et[Fe](we,_e),_e.delete(et),et}[fe](we,_e,$e){if($e.has(we)){(0,o.warn)("XFA - Cycle detected in prototypes use.");return}!this[m]&&we[m]&&(this[m]=we[m]),new Set($e).add(we);for(const et of this[rt](we[Dt]))this[et]=we[et],this[Dt]&&this[Dt].add(et);for(const et of Object.getOwnPropertyNames(this)){if(this[Ue].has(et))continue;const xt=this[et],Et=we[et];if(xt instanceof Ve){for(const yt of xt[ze])yt[ot](_e,$e);for(let yt=xt[ze].length,wt=Et[ze].length;yt<wt;yt++){const Pt=we[ze][yt][g]();if(xt.push(Pt))Pt[ht]=this,this[ze].push(Pt),Pt[ot](_e,$e);else break}continue}if(xt!==null){xt[Fe](_e,$e),Et&&xt[fe](Et,_e,$e);continue}if(Et!==null){const yt=Et[g]();yt[ht]=this,this[et]=yt,this[ze].push(yt),yt[ot](_e,$e)}}}static[tt](we){return Array.isArray(we)?we.map(_e=>Ge[tt](_e)):typeof we=="object"&&we!==null?Object.assign({},we):we}[g](){const we=Object.create(Object.getPrototypeOf(this));for(const _e of Object.getOwnPropertySymbols(this))try{we[_e]=this[_e]}catch{(0,o.shadow)(we,_e,this[_e])}we[ve]=`${we[J]}${Xe++}`,we[ze]=[];for(const _e of Object.getOwnPropertyNames(this)){if(this[Ue].has(_e)){we[_e]=Ge[tt](this[_e]);continue}const $e=this[_e];$e instanceof Ve?we[_e]=new Ve($e[vt]):we[_e]=null}for(const _e of this[ze]){const $e=_e[J],je=_e[g]();we[ze].push(je),je[ht]=we,we[$e]===null?we[$e]=je:we[$e][ze].push(je)}return we}[S](we=null){return we?this[ze].filter(_e=>_e[J]===we):this[ze]}[T](we){return this[we]}[R](we,_e,$e=!0){return Array.from(this[y](we,_e,$e))}*[y](we,_e,$e=!0){if(we==="parent"){yield this[ht];return}for(const je of this[ze])je[J]===we&&(yield je),je.name===we&&(yield je),(_e||je[Z]())&&(yield*je[y](we,_e,!1));$e&&this[Ue].has(we)&&(yield new it(this,we,this[we]))}}f.XFAObject=Ge;class Ve{constructor(we=1/0){this[vt]=we,this[ze]=[]}push(we){return this[ze].length<=this[vt]?(this[ze].push(we),!0):((0,o.warn)(`XFA - node "${we[J]}" accepts no more than ${this[vt]} children`),!1)}isEmpty(){return this[ze].length===0}dump(){return this[ze].length===1?this[ze][0][k]():this[ze].map(we=>we[k]())}[g](){const we=new Ve(this[vt]);return we[ze]=this[ze].map(_e=>_e[g]()),we}get children(){return this[ze]}clear(){this[ze].length=0}}f.XFAObjectArray=Ve;class it{constructor(we,_e,$e){this[ht]=we,this[J]=_e,this[m]=$e,this[x]=!1,this[ve]=`attribute${Xe++}`}[D](){return this[ht]}[W](){return!0}[p](){return this[m].trim()}[le](we){we=we.value||"",this[m]=we.toString()}[ce](){return this[m]}[z](we){return this[ht]===we||this[ht][z](we)}}f.XFAAttribute=it;class gt extends Ge{constructor(we,_e,$e={}){if(super(we,_e),this[m]="",this[Ne]=null,_e!=="#text"){const je=new Map;this[We]=je;for(const[et,xt]of Object.entries($e))je.set(et,new it(this,et,xt));if($e.hasOwnProperty(ne)){const et=$e[ne].xfa.dataNode;et!==void 0&&(et==="dataGroup"?this[Ne]=!1:et==="dataValue"&&(this[Ne]=!0))}}this[x]=!1}[He](we){const _e=this[J];if(_e==="#text"){we.push((0,c.encodeToXmlString)(this[m]));return}const $e=(0,o.utf8StringToString)(_e),je=this[ee]===Ie?"xfa:":"";we.push(`<${je}${$e}`);for(const[et,xt]of this[We].entries()){const Et=(0,o.utf8StringToString)(et);we.push(` ${Et}="${(0,c.encodeToXmlString)(xt[m])}"`)}if(this[Ne]!==null&&(this[Ne]?we.push(' xfa:dataNode="dataValue"'):we.push(' xfa:dataNode="dataGroup"')),!this[m]&&this[ze].length===0){we.push("/>");return}if(we.push(">"),this[m])typeof this[m]=="string"?we.push((0,c.encodeToXmlString)(this[m])):this[m][He](we);else for(const et of this[ze])et[He](we);we.push(`</${je}${$e}>`)}[re](we){if(this[m]){const _e=new gt(this[ee],"#text");this[n](_e),_e[m]=this[m],this[m]=""}return this[n](we),!0}[se](we){this[m]+=we}[_](){if(this[m]&&this[ze].length>0){const we=new gt(this[ee],"#text");this[n](we),we[m]=this[m],delete this[m]}}[Re](){return this[J]==="#text"?t.HTMLResult.success({name:"#text",value:this[m]}):t.HTMLResult.EMPTY}[S](we=null){return we?this[ze].filter(_e=>_e[J]===we):this[ze]}[j](){return this[We]}[T](we){const _e=this[We].get(we);return _e!==void 0?_e:this[S](we)}*[y](we,_e){const $e=this[We].get(we);$e&&(yield $e);for(const je of this[ze])je[J]===we&&(yield je),_e&&(yield*je[y](we,_e))}*[M](we,_e){const $e=this[We].get(we);$e&&(!_e||!$e[x])&&(yield $e);for(const je of this[ze])yield*je[M](we,_e)}*[E](we,_e,$e){for(const je of this[ze])je[J]===we&&(!$e||!je[x])&&(yield je),_e&&(yield*je[E](we,_e,$e))}[W](){return this[Ne]===null?this[ze].length===0||this[ze][0][ee]===s.NamespaceIds.xhtml.id:this[Ne]}[p](){return this[Ne]===null?this[ze].length===0?this[m].trim():this[ze][0][ee]===s.NamespaceIds.xhtml.id?this[ze][0][ce]().trim():null:this[m].trim()}[le](we){we=we.value||"",this[m]=we.toString()}[k](we=!1){const _e=Object.create(null);we&&(_e.$ns=this[ee]),this[m]&&(_e.$content=this[m]),_e.$name=this[J],_e.children=[];for(const $e of this[ze])_e.children.push($e[k](we));_e.attributes=Object.create(null);for(const[$e,je]of this[We])_e.attributes[$e]=je[m];return _e}}f.XmlObject=gt;class nt extends Ge{constructor(we,_e){super(we,_e),this[m]=""}[se](we){this[m]+=we}[_](){}}f.ContentObject=nt;class Ke extends nt{constructor(we,_e,$e){super(we,_e),this[lt]=$e}[_](){this[m]=(0,t.getKeyword)({data:this[m],defaultValue:this[lt][0],validate:we=>this[lt].includes(we)})}[u](we){super[u](we),delete this[lt]}}f.OptionObject=Ke;class at extends nt{[_](){this[m]=this[m].trim()}}f.StringObject=at;class ut extends nt{constructor(we,_e,$e,je){super(we,_e),this[Qe]=$e,this[Ot]=je}[_](){this[m]=(0,t.getInteger)({data:this[m],defaultValue:this[Qe],validate:this[Ot]})}[u](we){super[u](we),delete this[Qe],delete this[Ot]}}f.IntegerObject=ut;class St extends ut{constructor(we,_e){super(we,_e,0,$e=>$e===1)}}f.Option01=St;class bt extends ut{constructor(we,_e){super(we,_e,1,$e=>$e===0)}}f.Option10=bt},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.HTMLResult=void 0,f.getBBox=g,f.getColor=i,f.getFloat=a,f.getInteger=e,f.getKeyword=r,f.getMeasurement=l,f.getRatio=u,f.getRelevant=d,f.getStringOption=n,f.stripQuotes=s;var t=h(2);const o={pt:m=>m,cm:m=>m/2.54*72,mm:m=>m/(10*2.54)*72,in:m=>m*72,px:m=>m},c=/([+-]?\d+\.?\d*)(.*)/;function s(m){return m.startsWith("'")||m.startsWith('"')?m.slice(1,m.length-1):m}function e({data:m,defaultValue:A,validate:k}){if(!m)return A;m=m.trim();const v=parseInt(m,10);return!isNaN(v)&&k(v)?v:A}function a({data:m,defaultValue:A,validate:k}){if(!m)return A;m=m.trim();const v=parseFloat(m);return!isNaN(v)&&k(v)?v:A}function r({data:m,defaultValue:A,validate:k}){return m?(m=m.trim(),k(m)?m:A):A}function n(m,A){return r({data:m,defaultValue:A[0],validate:k=>A.includes(k)})}function l(m,A="0"){if(A=A||"0",!m)return l(A);const k=m.trim().match(c);if(!k)return l(A);const[,v,_]=k,K=parseFloat(v);if(isNaN(K))return l(A);if(K===0)return 0;const M=o[_];return M?M(K):K}function u(m){if(!m)return{num:1,den:1};const A=m.trim().split(/\s*:\s*/).map(_=>parseFloat(_)).filter(_=>!isNaN(_));if(A.length===1&&A.push(1),A.length===0)return{num:1,den:1};const[k,v]=A;return{num:k,den:v}}function d(m){return m?m.trim().split(/\s+/).map(A=>({excluded:A[0]==="-",viewname:A.substring(1)})):[]}function i(m,A=[0,0,0]){let[k,v,_]=A;if(!m)return{r:k,g:v,b:_};const K=m.trim().split(/\s*,\s*/).map(M=>Math.min(Math.max(0,parseInt(M.trim(),10)),255)).map(M=>isNaN(M)?0:M);return K.length<3?{r:k,g:v,b:_}:([k,v,_]=K,{r:k,g:v,b:_})}function g(m){if(!m)return{x:-1,y:-1,width:-1,height:-1};const k=m.trim().split(/\s*,\s*/).map(j=>l(j,"-1"));if(k.length<4||k[2]<0||k[3]<0)return{x:-1,y:-1,width:-1,height:-1};const[v,_,K,M]=k;return{x:v,y:_,width:K,height:M}}class x{static get FAILURE(){return(0,t.shadow)(this,"FAILURE",new x(!1,null,null,null))}static get EMPTY(){return(0,t.shadow)(this,"EMPTY",new x(!0,null,null,null))}constructor(A,k,v,_){this.success=A,this.html=k,this.bbox=v,this.breakNode=_}isBreak(){return!!this.breakNode}static breakNode(A){return new x(!1,null,null,A)}static success(A,k=null){return new x(!0,A,k,null)}}f.HTMLResult=x},(ge,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.NamespaceIds=f.$buildXFAObject=void 0;const h=Symbol();f.$buildXFAObject=h;const t={config:{id:0,check:o=>o.startsWith("http://www.xfa.org/schema/xci/")},connectionSet:{id:1,check:o=>o.startsWith("http://www.xfa.org/schema/xfa-connection-set/")},datasets:{id:2,check:o=>o.startsWith("http://www.xfa.org/schema/xfa-data/")},form:{id:3,check:o=>o.startsWith("http://www.xfa.org/schema/xfa-form/")},localeSet:{id:4,check:o=>o.startsWith("http://www.xfa.org/schema/xfa-locale-set/")},pdf:{id:5,check:o=>o==="http://ns.adobe.com/xdp/pdf/"},signature:{id:6,check:o=>o==="http://www.w3.org/2000/09/xmldsig#"},sourceSet:{id:7,check:o=>o.startsWith("http://www.xfa.org/schema/xfa-source-set/")},stylesheet:{id:8,check:o=>o==="http://www.w3.org/1999/XSL/Transform"},template:{id:9,check:o=>o.startsWith("http://www.xfa.org/schema/xfa-template/")},xdc:{id:10,check:o=>o.startsWith("http://www.xfa.org/schema/xdc/")},xdp:{id:11,check:o=>o==="http://ns.adobe.com/xdp/"},xfdf:{id:12,check:o=>o==="http://ns.adobe.com/xfdf/"},xhtml:{id:13,check:o=>o==="http://www.w3.org/1999/xhtml"},xmpmeta:{id:14,check:o=>o==="http://ns.adobe.com/xmpmeta/"}};f.NamespaceIds=t},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.createDataNode=x,f.searchNode=i;var t=h(77),o=h(79),c=h(2);const s=/^[^.[]+/,e=/^[^\]]+/,a={dot:0,dotDot:1,dotHash:2,dotBracket:3,dotParen:4},r=new Map([["$data",(m,A)=>m.datasets?m.datasets.data:m],["$record",(m,A)=>(m.datasets?m.datasets.data:m)[t.$getChildren]()[0]],["$template",(m,A)=>m.template],["$connectionSet",(m,A)=>m.connectionSet],["$form",(m,A)=>m.form],["$layout",(m,A)=>m.layout],["$host",(m,A)=>m.host],["$dataWindow",(m,A)=>m.dataWindow],["$event",(m,A)=>m.event],["!",(m,A)=>m.datasets],["$xfa",(m,A)=>m],["xfa",(m,A)=>m],["$",(m,A)=>A]]),n=new WeakMap,l=o.NamespaceIds.datasets.id;function u(m){return m=m.trim(),m==="*"?1/0:parseInt(m,10)||0}function d(m,A,k=!0){let v=m.match(s);if(!v)return null;let[_]=v;const K=[{name:_,cacheName:"."+_,index:0,js:null,formCalc:null,operator:a.dot}];let M=_.length;for(;M<m.length;){const j=M;if(m.charAt(M++)==="["){if(v=m.slice(M).match(e),!v)return(0,c.warn)("XFA - Invalid index in SOM expression"),null;K.at(-1).index=u(v[0]),M+=v[0].length+1;continue}let T;switch(m.charAt(M)){case".":if(!A)return null;M++,T=a.dotDot;break;case"#":M++,T=a.dotHash;break;case"[":if(k)return(0,c.warn)("XFA - SOM expression contains a FormCalc subexpression which is not supported for now."),null;T=a.dotBracket;break;case"(":if(k)return(0,c.warn)("XFA - SOM expression contains a JavaScript subexpression which is not supported for now."),null;T=a.dotParen;break;default:T=a.dot;break}if(v=m.slice(M).match(s),!v)break;[_]=v,M+=_.length,K.push({name:_,cacheName:m.slice(j,M),operator:T,index:0,js:null,formCalc:null})}return K}function i(m,A,k,v=!0,_=!0){const K=d(k,v);if(!K)return null;const M=r.get(K[0].name);let j=0,O;M?(O=!0,m=[M(m,A)],j=1):(O=A===null,m=[A||m]);for(let T=K.length;j<T;j++){const{name:R,cacheName:y,operator:p,index:P}=K[j],E=[];for(const S of m){if(!(S instanceof t.XFAObject))continue;let F,C;if(_&&(C=n.get(S),C||(C=new Map,n.set(S,C)),F=C.get(y)),!F){switch(p){case a.dot:F=S[t.$getChildrenByName](R,!1);break;case a.dotDot:F=S[t.$getChildrenByName](R,!0);break;case a.dotHash:F=S[t.$getChildrenByClass](R),F instanceof t.XFAObjectArray?F=F.children:F=[F];break}_&&C.set(y,F)}F.length>0&&E.push(F)}if(E.length===0&&!O&&j===0){if(A=A[t.$getParent](),!A)return null;j=-1,m=[A];continue}isFinite(P)?m=E.filter(S=>P<S.length).map(S=>S[P]):m=E.flat()}return m.length===0?null:m}function g(m,A){let k=null;for(const{name:v,index:_}of A){for(let K=0,M=isFinite(_)?_:0;K<=M;K++){const j=m[t.$namespaceId]===l?-1:m[t.$namespaceId];k=new t.XmlObject(j,v),m[t.$appendChild](k)}m=k}return k}function x(m,A,k){const v=d(k);if(!v||v.some(M=>M.operator===a.dotDot))return null;const _=r.get(v[0].name);let K=0;_?(m=_(m,A),K=1):m=A||m;for(let M=v.length;K<M;K++){const{name:j,operator:O,index:T}=v[K];if(!isFinite(T))return v[K].index=0,g(m,v.slice(K));let R;switch(O){case a.dot:R=m[t.$getChildrenByName](j,!1);break;case a.dotDot:R=m[t.$getChildrenByName](j,!0);break;case a.dotHash:R=m[t.$getChildrenByClass](j),R instanceof t.XFAObjectArray?R=R.children:R=[R];break}if(R.length===0)return g(m,v.slice(K));if(T<R.length){const y=R[T];if(!(y instanceof t.XFAObject))return(0,c.warn)("XFA - Cannot create a node."),null;m=y}else return v[K].index=T-R.length,g(m,v.slice(K))}return null}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Binder=void 0;var t=h(77),o=h(82),c=h(80),s=h(79),e=h(2);const a=s.NamespaceIds.datasets.id;function r(l){const u=new o.Text({});return u[t.$content]=l,u}class n{constructor(u){this.root=u,this.datasets=u.datasets,u.datasets&&u.datasets.data?this.data=u.datasets.data:this.data=new t.XmlObject(s.NamespaceIds.datasets.id,"data"),this.emptyMerge=this.data[t.$getChildren]().length===0,this.root.form=this.form=u.template[t.$clone]()}_isConsumeData(){return!this.emptyMerge&&this._mergeMode}_isMatchTemplate(){return!this._isConsumeData()}bind(){return this._bindElement(this.form,this.data),this.form}getData(){return this.data}_bindValue(u,d,i){if(u[t.$data]=d,u[t.$hasSettableValue]())if(d[t.$isDataValue]()){const g=d[t.$getDataValue]();u[t.$setValue](r(g))}else if(u instanceof o.Field&&u.ui&&u.ui.choiceList&&u.ui.choiceList.open==="multiSelect"){const g=d[t.$getChildren]().map(x=>x[t.$content].trim()).join(`
`);u[t.$setValue](r(g))}else this._isConsumeData()&&(0,e.warn)("XFA - Nodes haven't the same type.");else!d[t.$isDataValue]()||this._isMatchTemplate()?this._bindElement(u,d):(0,e.warn)("XFA - Nodes haven't the same type.")}_findDataByNameToConsume(u,d,i,g){if(!u)return null;let x,m;for(let A=0;A<3;A++){for(x=i[t.$getRealChildrenByNameIt](u,!1,!0);m=x.next().value,!!m;)if(d===m[t.$isDataValue]())return m;if(i[t.$namespaceId]===s.NamespaceIds.datasets.id&&i[t.$nodeName]==="data")break;i=i[t.$getParent]()}return g?(x=this.data[t.$getRealChildrenByNameIt](u,!0,!1),m=x.next().value,m||(x=this.data[t.$getAttributeIt](u,!0),m=x.next().value,m&&m[t.$isDataValue]())?m:null):null}_setProperties(u,d){if(u.hasOwnProperty("setProperty"))for(const{ref:i,target:g,connection:x}of u.setProperty.children){if(x||!i)continue;const m=(0,c.searchNode)(this.root,d,i,!1,!1);if(!m){(0,e.warn)(`XFA - Invalid reference: ${i}.`);continue}const[A]=m;if(!A[t.$isDescendent](this.data)){(0,e.warn)("XFA - Invalid node: must be a data node.");continue}const k=(0,c.searchNode)(this.root,u,g,!1,!1);if(!k){(0,e.warn)(`XFA - Invalid target: ${g}.`);continue}const[v]=k;if(!v[t.$isDescendent](u)){(0,e.warn)("XFA - Invalid target: must be a property or subproperty.");continue}const _=v[t.$getParent]();if(v instanceof o.SetProperty||_ instanceof o.SetProperty){(0,e.warn)("XFA - Invalid target: cannot be a setProperty or one of its properties.");continue}if(v instanceof o.BindItems||_ instanceof o.BindItems){(0,e.warn)("XFA - Invalid target: cannot be a bindItems or one of its properties.");continue}const K=A[t.$text](),M=v[t.$nodeName];if(v instanceof t.XFAAttribute){const j=Object.create(null);j[M]=K;const O=Reflect.construct(Object.getPrototypeOf(_).constructor,[j]);_[M]=O[M];continue}if(!v.hasOwnProperty(t.$content)){(0,e.warn)("XFA - Invalid node to use in setProperty");continue}v[t.$data]=A,v[t.$content]=K,v[t.$finalize]()}}_bindItems(u,d){if(!u.hasOwnProperty("items")||!u.hasOwnProperty("bindItems")||u.bindItems.isEmpty())return;for(const x of u.items.children)u[t.$removeChild](x);u.items.clear();const i=new o.Items({}),g=new o.Items({});u[t.$appendChild](i),u.items.push(i),u[t.$appendChild](g),u.items.push(g);for(const{ref:x,labelRef:m,valueRef:A,connection:k}of u.bindItems.children){if(k||!x)continue;const v=(0,c.searchNode)(this.root,d,x,!1,!1);if(!v){(0,e.warn)(`XFA - Invalid reference: ${x}.`);continue}for(const _ of v){if(!_[t.$isDescendent](this.datasets)){(0,e.warn)(`XFA - Invalid ref (${x}): must be a datasets child.`);continue}const K=(0,c.searchNode)(this.root,_,m,!0,!1);if(!K){(0,e.warn)(`XFA - Invalid label: ${m}.`);continue}const[M]=K;if(!M[t.$isDescendent](this.datasets)){(0,e.warn)("XFA - Invalid label: must be a datasets child.");continue}const j=(0,c.searchNode)(this.root,_,A,!0,!1);if(!j){(0,e.warn)(`XFA - Invalid value: ${A}.`);continue}const[O]=j;if(!O[t.$isDescendent](this.datasets)){(0,e.warn)("XFA - Invalid value: must be a datasets child.");continue}const T=r(M[t.$text]()),R=r(O[t.$text]());i[t.$appendChild](T),i.text.push(T),g[t.$appendChild](R),g.text.push(R)}}}_bindOccurrences(u,d,i){let g;if(d.length>1&&(g=u[t.$clone](),g[t.$removeChild](g.occur),g.occur=null),this._bindValue(u,d[0],i),this._setProperties(u,d[0]),this._bindItems(u,d[0]),d.length===1)return;const x=u[t.$getParent](),m=u[t.$nodeName],A=x[t.$indexOf](u);for(let k=1,v=d.length;k<v;k++){const _=d[k],K=g[t.$clone]();x[m].push(K),x[t.$insertAt](A+k,K),this._bindValue(K,_,i),this._setProperties(K,_),this._bindItems(K,_)}}_createOccurrences(u){if(!this.emptyMerge)return;const{occur:d}=u;if(!d||d.initial<=1)return;const i=u[t.$getParent](),g=u[t.$nodeName];if(!(i[g]instanceof t.XFAObjectArray))return;let x;u.name?x=i[g].children.filter(k=>k.name===u.name).length:x=i[g].children.length;const m=i[t.$indexOf](u)+1,A=d.initial-x;if(A){const k=u[t.$clone]();k[t.$removeChild](k.occur),k.occur=null,i[g].push(k),i[t.$insertAt](m,k);for(let v=1;v<A;v++){const _=k[t.$clone]();i[g].push(_),i[t.$insertAt](m+v,_)}}}_getOccurInfo(u){const{name:d,occur:i}=u;if(!i||!d)return[1,1];const g=i.max===-1?1/0:i.max;return[i.min,g]}_setAndBind(u,d){this._setProperties(u,d),this._bindItems(u,d),this._bindElement(u,d)}_bindElement(u,d){const i=[];this._createOccurrences(u);for(const g of u[t.$getChildren]()){if(g[t.$data])continue;if(this._mergeMode===void 0&&g[t.$nodeName]==="subform"){this._mergeMode=g.mergeMode==="consumeData";const K=d[t.$getChildren]();if(K.length>0)this._bindOccurrences(g,[K[0]],null);else if(this.emptyMerge){const M=d[t.$namespaceId]===a?-1:d[t.$namespaceId],j=g[t.$data]=new t.XmlObject(M,g.name||"root");d[t.$appendChild](j),this._bindElement(g,j)}continue}if(!g[t.$isBindable]())continue;let x=!1,m=null,A=null,k=null;if(g.bind){switch(g.bind.match){case"none":this._setAndBind(g,d);continue;case"global":x=!0;break;case"dataRef":if(!g.bind.ref){(0,e.warn)(`XFA - ref is empty in node ${g[t.$nodeName]}.`),this._setAndBind(g,d);continue}A=g.bind.ref;break}g.bind.picture&&(m=g.bind.picture[t.$content])}const[v,_]=this._getOccurInfo(g);if(A)if(k=(0,c.searchNode)(this.root,d,A,!0,!1),k===null){if(k=(0,c.createDataNode)(this.data,d,A),!k)continue;this._isConsumeData()&&(k[t.$consumed]=!0),this._setAndBind(g,k);continue}else this._isConsumeData()&&(k=k.filter(K=>!K[t.$consumed])),k.length>_?k=k.slice(0,_):k.length===0&&(k=null),k&&this._isConsumeData()&&k.forEach(K=>{K[t.$consumed]=!0});else{if(!g.name){this._setAndBind(g,d);continue}if(this._isConsumeData()){const K=[];for(;K.length<_;){const M=this._findDataByNameToConsume(g.name,g[t.$hasSettableValue](),d,x);if(!M)break;M[t.$consumed]=!0,K.push(M)}k=K.length>0?K:null}else{if(k=d[t.$getRealChildrenByNameIt](g.name,!1,this.emptyMerge).next().value,!k){if(v===0){i.push(g);continue}const K=d[t.$namespaceId]===a?-1:d[t.$namespaceId];k=g[t.$data]=new t.XmlObject(K,g.name),this.emptyMerge&&(k[t.$consumed]=!0),d[t.$appendChild](k),this._setAndBind(g,k);continue}this.emptyMerge&&(k[t.$consumed]=!0),k=[k]}}k?this._bindOccurrences(g,k,m):v>0?this._setAndBind(g,d):i.push(g)}i.forEach(g=>g[t.$getParent]()[t.$removeChild](g))}}f.Binder=n},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Value=f.Text=f.TemplateNamespace=f.Template=f.SetProperty=f.Items=f.Field=f.BindItems=void 0;var t=h(77),o=h(79),c=h(83),s=h(84),e=h(78),a=h(2),r=h(85),n=h(6),l=h(80);const u=o.NamespaceIds.template.id,d="http://www.w3.org/2000/svg",i=2,g=3,x=5e3,m=/^H(\d+)$/,A=new Set(["image/gif","image/jpeg","image/jpg","image/pjpeg","image/png","image/apng","image/x-png","image/bmp","image/x-ms-bmp","image/tiff","image/tif","application/octet-stream"]),k=[[[66,77],"image/bmp"],[[255,216,255],"image/jpeg"],[[73,73,42,0],"image/tiff"],[[77,77,0,42],"image/tiff"],[[71,73,70,56,57,97],"image/gif"],[[137,80,78,71,13,10,26,10],"image/png"]];function v(Oe){if(!Oe||!Oe.border)return{w:0,h:0};const w=Oe.border[t.$getExtra]();return w?{w:w.widths[0]+w.widths[2]+w.insets[0]+w.insets[2],h:w.widths[1]+w.widths[3]+w.insets[1]+w.insets[3]}:{w:0,h:0}}function _(Oe){return Oe.margin&&(Oe.margin.topInset||Oe.margin.rightInset||Oe.margin.bottomInset||Oe.margin.leftInset)}function K(Oe,w){if(!Oe.value){const ie=new Vt({});Oe[t.$appendChild](ie),Oe.value=ie}Oe.value[t.$setValue](w)}function*M(Oe){for(const w of Oe[t.$getChildren]()){if(w instanceof Zt){yield*w[t.$getContainedChildren]();continue}yield w}}function j(Oe){return Oe.validate&&Oe.validate.nullTest==="error"}function O(Oe){for(;Oe;){if(!Oe.traversal){Oe[t.$tabIndex]=Oe[t.$getParent]()[t.$tabIndex];return}if(Oe[t.$tabIndex])return;let w=null;for(const Le of Oe.traversal[t.$getChildren]())if(Le.operation==="next"){w=Le;break}if(!w||!w.ref){Oe[t.$tabIndex]=Oe[t.$getParent]()[t.$tabIndex];return}const ie=Oe[t.$getTemplateRoot]();Oe[t.$tabIndex]=++ie[t.$tabIndex];const ke=ie[t.$searchNode](w.ref,Oe);if(!ke)return;Oe=ke[0]}}function T(Oe,w){const ie=Oe.assist;if(ie){const ke=ie[t.$toHTML]();ke&&(w.title=ke);const qe=ie.role.match(m);if(qe){const pt="heading",dt=qe[1];w.role=pt,w["aria-level"]=dt}}if(Oe.layout==="table")w.role="table";else if(Oe.layout==="row")w.role="row";else{const ke=Oe[t.$getParent]();ke.layout==="row"&&(ke.assist&&ke.assist.role==="TH"?w.role="columnheader":w.role="cell")}}function R(Oe){if(!Oe.assist)return null;const w=Oe.assist;return w.speak&&w.speak[t.$content]!==""?w.speak[t.$content]:w.toolTip?w.toolTip[t.$content]:null}function y(Oe){return e.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:Object.create(null)},children:[{name:"span",attributes:{style:Object.create(null)},value:Oe}]})}function p(Oe){const w=Oe[t.$getTemplateRoot]();w[t.$extra].firstUnsplittable===null&&(w[t.$extra].firstUnsplittable=Oe,w[t.$extra].noLayoutFailure=!0)}function P(Oe){const w=Oe[t.$getTemplateRoot]();w[t.$extra].firstUnsplittable===Oe&&(w[t.$extra].noLayoutFailure=!1)}function E(Oe){if(Oe[t.$extra]||(Oe[t.$extra]=Object.create(null),Oe.targetType==="auto"))return!1;const w=Oe[t.$getTemplateRoot]();let ie=null;if(Oe.target){if(ie=w[t.$searchNode](Oe.target,Oe[t.$getParent]()),!ie)return!1;ie=ie[0]}const{currentPageArea:ke,currentContentArea:Le}=w[t.$extra];if(Oe.targetType==="pageArea")return ie instanceof je||(ie=null),Oe.startNew?(Oe[t.$extra].target=ie||ke,!0):ie&&ie!==ke?(Oe[t.$extra].target=ie,!0):!1;ie instanceof re||(ie=null);const qe=ie&&ie[t.$getParent]();let pt,dt=qe;if(Oe.startNew)if(ie){const mt=qe.contentArea.children,Ct=mt.indexOf(Le),Tt=mt.indexOf(ie);Ct!==-1&&Ct<Tt&&(dt=null),pt=Tt-1}else pt=ke.contentArea.children.indexOf(Le);else if(ie&&ie!==Le)pt=qe.contentArea.children.indexOf(ie)-1,dt=qe===ke?null:qe;else return!1;return Oe[t.$extra].target=dt,Oe[t.$extra].index=pt,!0}function S(Oe,w,ie){const ke=Oe[t.$getTemplateRoot](),Le=ke[t.$extra].noLayoutFailure,qe=w[t.$getSubformParent];w[t.$getSubformParent]=()=>Oe,ke[t.$extra].noLayoutFailure=!0;const pt=w[t.$toHTML](ie);Oe[t.$addHTML](pt.html,pt.bbox),ke[t.$extra].noLayoutFailure=Le,w[t.$getSubformParent]=qe}class F extends t.StringObject{constructor(w){super(u,"appearanceFilter"),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["optional","required"]),this.use=w.use||"",this.usehref=w.usehref||""}}class C extends t.XFAObject{constructor(w){super(u,"arc",!0),this.circular=(0,e.getInteger)({data:w.circular,defaultValue:0,validate:ie=>ie===1}),this.hand=(0,e.getStringOption)(w.hand,["even","left","right"]),this.id=w.id||"",this.startAngle=(0,e.getFloat)({data:w.startAngle,defaultValue:0,validate:ie=>!0}),this.sweepAngle=(0,e.getFloat)({data:w.sweepAngle,defaultValue:360,validate:ie=>!0}),this.use=w.use||"",this.usehref=w.usehref||"",this.edge=null,this.fill=null}[t.$toHTML](){const w=this.edge||new ye({}),ie=w[t.$toStyle](),ke=Object.create(null);this.fill&&this.fill.presence==="visible"?Object.assign(ke,this.fill[t.$toStyle]()):ke.fill="transparent",ke.strokeWidth=(0,s.measureToString)(w.presence==="visible"?w.thickness:0),ke.stroke=ie.color;let Le;const qe={xmlns:d,style:{width:"100%",height:"100%",overflow:"visible"}};if(this.sweepAngle===360)Le={name:"ellipse",attributes:{xmlns:d,cx:"50%",cy:"50%",rx:"50%",ry:"50%",style:ke}};else{const mt=this.startAngle*Math.PI/180,Ct=this.sweepAngle*Math.PI/180,Tt=this.sweepAngle>180?1:0,[Mt,It,Lt,Rt]=[50*(1+Math.cos(mt)),50*(1-Math.sin(mt)),50*(1+Math.cos(mt+Ct)),50*(1-Math.sin(mt+Ct))];Le={name:"path",attributes:{xmlns:d,d:`M ${Mt} ${It} A 50 50 0 ${Tt} 0 ${Lt} ${Rt}`,vectorEffect:"non-scaling-stroke",style:ke}},Object.assign(qe,{viewBox:"0 0 100 100",preserveAspectRatio:"none"})}const pt={name:"svg",children:[Le],attributes:qe},dt=this[t.$getParent]()[t.$getParent]();return _(dt)?e.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[pt]}):(pt.attributes.style.position="absolute",e.HTMLResult.success(pt))}}class b extends t.XFAObject{constructor(w){super(u,"area",!0),this.colSpan=(0,e.getInteger)({data:w.colSpan,defaultValue:1,validate:ie=>ie>=1||ie===-1}),this.id=w.id||"",this.name=w.name||"",this.relevant=(0,e.getRelevant)(w.relevant),this.use=w.use||"",this.usehref=w.usehref||"",this.x=(0,e.getMeasurement)(w.x,"0pt"),this.y=(0,e.getMeasurement)(w.y,"0pt"),this.desc=null,this.extras=null,this.area=new t.XFAObjectArray,this.draw=new t.XFAObjectArray,this.exObject=new t.XFAObjectArray,this.exclGroup=new t.XFAObjectArray,this.field=new t.XFAObjectArray,this.subform=new t.XFAObjectArray,this.subformSet=new t.XFAObjectArray}*[t.$getContainedChildren](){yield*M(this)}[t.$isTransparent](){return!0}[t.$isBindable](){return!0}[t.$addHTML](w,ie){const[ke,Le,qe,pt]=ie;this[t.$extra].width=Math.max(this[t.$extra].width,ke+qe),this[t.$extra].height=Math.max(this[t.$extra].height,Le+pt),this[t.$extra].children.push(w)}[t.$getAvailableSpace](){return this[t.$extra].availableSpace}[t.$toHTML](w){const ie=(0,s.toStyle)(this,"position"),ke={style:ie,id:this[t.$uid],class:["xfaArea"]};(0,s.isPrintOnly)(this)&&ke.class.push("xfaPrintOnly"),this.name&&(ke.xfaName=this.name);const Le=[];this[t.$extra]={children:Le,width:0,height:0,availableSpace:w};const qe=this[t.$childrenToHTML]({filter:new Set(["area","draw","field","exclGroup","subform","subformSet"]),include:!0});if(!qe.success)return qe.isBreak()?qe:(delete this[t.$extra],e.HTMLResult.FAILURE);ie.width=(0,s.measureToString)(this[t.$extra].width),ie.height=(0,s.measureToString)(this[t.$extra].height);const pt={name:"div",attributes:ke,children:Le},dt=[this.x,this.y,this[t.$extra].width,this[t.$extra].height];return delete this[t.$extra],e.HTMLResult.success(pt,dt)}}class D extends t.XFAObject{constructor(w){super(u,"assist",!0),this.id=w.id||"",this.role=w.role||"",this.use=w.use||"",this.usehref=w.usehref||"",this.speak=null,this.toolTip=null}[t.$toHTML](){return this.toolTip&&this.toolTip[t.$content]?this.toolTip[t.$content]:null}}class U extends t.XFAObject{constructor(w){super(u,"barcode",!0),this.charEncoding=(0,e.getKeyword)({data:w.charEncoding?w.charEncoding.toLowerCase():"",defaultValue:"",validate:ie=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(ie)||ie.match(/iso-8859-\d{2}/)}),this.checksum=(0,e.getStringOption)(w.checksum,["none","1mod10","1mod10_1mod11","2mod10","auto"]),this.dataColumnCount=(0,e.getInteger)({data:w.dataColumnCount,defaultValue:-1,validate:ie=>ie>=0}),this.dataLength=(0,e.getInteger)({data:w.dataLength,defaultValue:-1,validate:ie=>ie>=0}),this.dataPrep=(0,e.getStringOption)(w.dataPrep,["none","flateCompress"]),this.dataRowCount=(0,e.getInteger)({data:w.dataRowCount,defaultValue:-1,validate:ie=>ie>=0}),this.endChar=w.endChar||"",this.errorCorrectionLevel=(0,e.getInteger)({data:w.errorCorrectionLevel,defaultValue:-1,validate:ie=>ie>=0&&ie<=8}),this.id=w.id||"",this.moduleHeight=(0,e.getMeasurement)(w.moduleHeight,"5mm"),this.moduleWidth=(0,e.getMeasurement)(w.moduleWidth,"0.25mm"),this.printCheckDigit=(0,e.getInteger)({data:w.printCheckDigit,defaultValue:0,validate:ie=>ie===1}),this.rowColumnRatio=(0,e.getRatio)(w.rowColumnRatio),this.startChar=w.startChar||"",this.textLocation=(0,e.getStringOption)(w.textLocation,["below","above","aboveEmbedded","belowEmbedded","none"]),this.truncate=(0,e.getInteger)({data:w.truncate,defaultValue:0,validate:ie=>ie===1}),this.type=(0,e.getStringOption)(w.type?w.type.toLowerCase():"",["aztec","codabar","code2of5industrial","code2of5interleaved","code2of5matrix","code2of5standard","code3of9","code3of9extended","code11","code49","code93","code128","code128a","code128b","code128c","code128sscc","datamatrix","ean8","ean8add2","ean8add5","ean13","ean13add2","ean13add5","ean13pwcd","fim","logmars","maxicode","msi","pdf417","pdf417macro","plessey","postauscust2","postauscust3","postausreplypaid","postausstandard","postukrm4scc","postusdpbc","postusimb","postusstandard","postus5zip","qrcode","rfid","rss14","rss14expanded","rss14limited","rss14stacked","rss14stackedomni","rss14truncated","telepen","ucc128","ucc128random","ucc128sscc","upca","upcaadd2","upcaadd5","upcapwcd","upce","upceadd2","upceadd5","upcean2","upcean5","upsmaxicode"]),this.upsMode=(0,e.getStringOption)(w.upsMode,["usCarrier","internationalCarrier","secureSymbol","standardSymbol"]),this.use=w.use||"",this.usehref=w.usehref||"",this.wideNarrowRatio=(0,e.getRatio)(w.wideNarrowRatio),this.encrypt=null,this.extras=null}}class X extends t.XFAObject{constructor(w){super(u,"bind",!0),this.match=(0,e.getStringOption)(w.match,["once","dataRef","global","none"]),this.ref=w.ref||"",this.picture=null}}class G extends t.XFAObject{constructor(w){super(u,"bindItems"),this.connection=w.connection||"",this.labelRef=w.labelRef||"",this.ref=w.ref||"",this.valueRef=w.valueRef||""}}f.BindItems=G;class Y extends t.XFAObject{constructor(w){super(u,"bookend"),this.id=w.id||"",this.leader=w.leader||"",this.trailer=w.trailer||"",this.use=w.use||"",this.usehref=w.usehref||""}}class N extends t.Option01{constructor(w){super(u,"boolean"),this.id=w.id||"",this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||""}[t.$toHTML](w){return y(this[t.$content]===1?"1":"0")}}class I extends t.XFAObject{constructor(w){super(u,"border",!0),this.break=(0,e.getStringOption)(w.break,["close","open"]),this.hand=(0,e.getStringOption)(w.hand,["even","left","right"]),this.id=w.id||"",this.presence=(0,e.getStringOption)(w.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,e.getRelevant)(w.relevant),this.use=w.use||"",this.usehref=w.usehref||"",this.corner=new t.XFAObjectArray(4),this.edge=new t.XFAObjectArray(4),this.extras=null,this.fill=null,this.margin=null}[t.$getExtra](){if(!this[t.$extra]){const w=this.edge.children.slice();if(w.length<4){const Le=w.at(-1)||new ye({});for(let qe=w.length;qe<4;qe++)w.push(Le)}const ie=w.map(Le=>Le.thickness),ke=[0,0,0,0];this.margin&&(ke[0]=this.margin.topInset,ke[1]=this.margin.rightInset,ke[2]=this.margin.bottomInset,ke[3]=this.margin.leftInset),this[t.$extra]={widths:ie,insets:ke,edges:w}}return this[t.$extra]}[t.$toStyle](){const{edges:w}=this[t.$getExtra](),ie=w.map(Le=>{const qe=Le[t.$toStyle]();return qe.color=qe.color||"#000000",qe}),ke=Object.create(null);if(this.margin&&Object.assign(ke,this.margin[t.$toStyle]()),this.fill&&this.fill.presence==="visible"&&Object.assign(ke,this.fill[t.$toStyle]()),this.corner.children.some(Le=>Le.radius!==0)){const Le=this.corner.children.map(qe=>qe[t.$toStyle]());if(Le.length===2||Le.length===3){const qe=Le.at(-1);for(let pt=Le.length;pt<4;pt++)Le.push(qe)}ke.borderRadius=Le.map(qe=>qe.radius).join(" ")}switch(this.presence){case"invisible":case"hidden":ke.borderStyle="";break;case"inactive":ke.borderStyle="none";break;default:ke.borderStyle=ie.map(Le=>Le.style).join(" ");break}return ke.borderWidth=ie.map(Le=>Le.width).join(" "),ke.borderColor=ie.map(Le=>Le.color).join(" "),ke}}class L extends t.XFAObject{constructor(w){super(u,"break",!0),this.after=(0,e.getStringOption)(w.after,["auto","contentArea","pageArea","pageEven","pageOdd"]),this.afterTarget=w.afterTarget||"",this.before=(0,e.getStringOption)(w.before,["auto","contentArea","pageArea","pageEven","pageOdd"]),this.beforeTarget=w.beforeTarget||"",this.bookendLeader=w.bookendLeader||"",this.bookendTrailer=w.bookendTrailer||"",this.id=w.id||"",this.overflowLeader=w.overflowLeader||"",this.overflowTarget=w.overflowTarget||"",this.overflowTrailer=w.overflowTrailer||"",this.startNew=(0,e.getInteger)({data:w.startNew,defaultValue:0,validate:ie=>ie===1}),this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null}}class $ extends t.XFAObject{constructor(w){super(u,"breakAfter",!0),this.id=w.id||"",this.leader=w.leader||"",this.startNew=(0,e.getInteger)({data:w.startNew,defaultValue:0,validate:ie=>ie===1}),this.target=w.target||"",this.targetType=(0,e.getStringOption)(w.targetType,["auto","contentArea","pageArea"]),this.trailer=w.trailer||"",this.use=w.use||"",this.usehref=w.usehref||"",this.script=null}}class W extends t.XFAObject{constructor(w){super(u,"breakBefore",!0),this.id=w.id||"",this.leader=w.leader||"",this.startNew=(0,e.getInteger)({data:w.startNew,defaultValue:0,validate:ie=>ie===1}),this.target=w.target||"",this.targetType=(0,e.getStringOption)(w.targetType,["auto","contentArea","pageArea"]),this.trailer=w.trailer||"",this.use=w.use||"",this.usehref=w.usehref||"",this.script=null}[t.$toHTML](w){return this[t.$extra]={},e.HTMLResult.FAILURE}}class z extends t.XFAObject{constructor(w){super(u,"button",!0),this.highlight=(0,e.getStringOption)(w.highlight,["inverted","none","outline","push"]),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null}[t.$toHTML](w){const ke=this[t.$getParent]()[t.$getParent](),Le={name:"button",attributes:{id:this[t.$uid],class:["xfaButton"],style:{}},children:[]};for(const qe of ke.event.children){if(qe.activity!=="click"||!qe.script)continue;const pt=(0,n.recoverJsURL)(qe.script[t.$content]);if(!pt)continue;const dt=(0,s.fixURL)(pt.url);dt&&Le.children.push({name:"a",attributes:{id:"link"+this[t.$uid],href:dt,newWindow:pt.newWindow,class:["xfaLink"],style:{}},children:[]})}return e.HTMLResult.success(Le)}}class B extends t.XFAObject{constructor(w){super(u,"calculate",!0),this.id=w.id||"",this.override=(0,e.getStringOption)(w.override,["disabled","error","ignore","warning"]),this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null,this.message=null,this.script=null}}class H extends t.XFAObject{constructor(w){super(u,"caption",!0),this.id=w.id||"",this.placement=(0,e.getStringOption)(w.placement,["left","bottom","inline","right","top"]),this.presence=(0,e.getStringOption)(w.presence,["visible","hidden","inactive","invisible"]),this.reserve=Math.ceil((0,e.getMeasurement)(w.reserve)),this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null,this.font=null,this.margin=null,this.para=null,this.value=null}[t.$setValue](w){K(this,w)}[t.$getExtra](w){if(!this[t.$extra]){let{width:ie,height:ke}=w;switch(this.placement){case"left":case"right":case"inline":ie=this.reserve<=0?ie:this.reserve;break;case"top":case"bottom":ke=this.reserve<=0?ke:this.reserve;break}this[t.$extra]=(0,s.layoutNode)(this,{width:ie,height:ke})}return this[t.$extra]}[t.$toHTML](w){if(!this.value)return e.HTMLResult.EMPTY;this[t.$pushPara]();const ie=this.value[t.$toHTML](w).html;if(!ie)return this[t.$popPara](),e.HTMLResult.EMPTY;const ke=this.reserve;if(this.reserve<=0){const{w:pt,h:dt}=this[t.$getExtra](w);switch(this.placement){case"left":case"right":case"inline":this.reserve=pt;break;case"top":case"bottom":this.reserve=dt;break}}const Le=[];typeof ie=="string"?Le.push({name:"#text",value:ie}):Le.push(ie);const qe=(0,s.toStyle)(this,"font","margin","visibility");switch(this.placement){case"left":case"right":this.reserve>0&&(qe.width=(0,s.measureToString)(this.reserve));break;case"top":case"bottom":this.reserve>0&&(qe.height=(0,s.measureToString)(this.reserve));break}return(0,s.setPara)(this,null,ie),this[t.$popPara](),this.reserve=ke,e.HTMLResult.success({name:"div",attributes:{style:qe,class:["xfaCaption"]},children:Le})}}class q extends t.StringObject{constructor(w){super(u,"certificate"),this.id=w.id||"",this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||""}}class Z extends t.XFAObject{constructor(w){super(u,"certificates",!0),this.credentialServerPolicy=(0,e.getStringOption)(w.credentialServerPolicy,["optional","required"]),this.id=w.id||"",this.url=w.url||"",this.urlPolicy=w.urlPolicy||"",this.use=w.use||"",this.usehref=w.usehref||"",this.encryption=null,this.issuers=null,this.keyUsage=null,this.oids=null,this.signing=null,this.subjectDNs=null}}class te extends t.XFAObject{constructor(w){super(u,"checkButton",!0),this.id=w.id||"",this.mark=(0,e.getStringOption)(w.mark,["default","check","circle","cross","diamond","square","star"]),this.shape=(0,e.getStringOption)(w.shape,["square","round"]),this.size=(0,e.getMeasurement)(w.size,"10pt"),this.use=w.use||"",this.usehref=w.usehref||"",this.border=null,this.extras=null,this.margin=null}[t.$toHTML](w){const ie=(0,s.toStyle)("margin"),ke=(0,s.measureToString)(this.size);ie.width=ie.height=ke;let Le,qe,pt;const dt=this[t.$getParent]()[t.$getParent](),mt=dt.items.children.length&&dt.items.children[0][t.$toHTML]().html||[],Ct={on:(mt[0]!==void 0?mt[0]:"on").toString(),off:(mt[1]!==void 0?mt[1]:"off").toString()},Mt=(dt.value&&dt.value[t.$text]()||"off")===Ct.on||void 0,It=dt[t.$getSubformParent](),Lt=dt[t.$uid];let Rt;It instanceof Ue?(pt=It[t.$uid],Le="radio",qe="xfaRadio",Rt=It[t.$data]&&It[t.$data][t.$uid]||It[t.$uid]):(Le="checkbox",qe="xfaCheckbox",Rt=dt[t.$data]&&dt[t.$data][t.$uid]||dt[t.$uid]);const At={name:"input",attributes:{class:[qe],style:ie,fieldId:Lt,dataId:Rt,type:Le,checked:Mt,xfaOn:Ct.on,xfaOff:Ct.off,"aria-label":R(dt),"aria-required":!1}};return pt&&(At.attributes.name=pt),j(dt)&&(At.attributes["aria-required"]=!0,At.attributes.required=!0),e.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[At]})}}class Q extends t.XFAObject{constructor(w){super(u,"choiceList",!0),this.commitOn=(0,e.getStringOption)(w.commitOn,["select","exit"]),this.id=w.id||"",this.open=(0,e.getStringOption)(w.open,["userControl","always","multiSelect","onEntry"]),this.textEntry=(0,e.getInteger)({data:w.textEntry,defaultValue:0,validate:ie=>ie===1}),this.use=w.use||"",this.usehref=w.usehref||"",this.border=null,this.extras=null,this.margin=null}[t.$toHTML](w){const ie=(0,s.toStyle)(this,"border","margin"),Le=this[t.$getParent]()[t.$getParent](),pt={fontSize:`calc(${Le.font&&Le.font.size||10}px * var(--scale-factor))`},dt=[];if(Le.items.children.length>0){const Ct=Le.items;let Tt=0,Mt=0;Ct.children.length===2&&(Tt=Ct.children[0].save,Mt=1-Tt);const It=Ct.children[Tt][t.$toHTML]().html,Lt=Ct.children[Mt][t.$toHTML]().html;let Rt=!1;const At=Le.value&&Le.value[t.$text]()||"";for(let jt=0,Ft=It.length;jt<Ft;jt++){const _t={name:"option",attributes:{value:Lt[jt]||It[jt],style:pt},value:It[jt]};Lt[jt]===At&&(_t.attributes.selected=Rt=!0),dt.push(_t)}Rt||dt.splice(0,0,{name:"option",attributes:{hidden:!0,selected:!0},value:" "})}const mt={class:["xfaSelect"],fieldId:Le[t.$uid],dataId:Le[t.$data]&&Le[t.$data][t.$uid]||Le[t.$uid],style:ie,"aria-label":R(Le),"aria-required":!1};return j(Le)&&(mt["aria-required"]=!0,mt.required=!0),this.open==="multiSelect"&&(mt.multiple=!0),e.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[{name:"select",children:dt,attributes:mt}]})}}class ee extends t.XFAObject{constructor(w){super(u,"color",!0),this.cSpace=(0,e.getStringOption)(w.cSpace,["SRGB"]),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||"",this.value=w.value?(0,e.getColor)(w.value):"",this.extras=null}[t.$hasSettableValue](){return!1}[t.$toStyle](){return this.value?a.Util.makeHexColor(this.value.r,this.value.g,this.value.b):null}}class J extends t.XFAObject{constructor(w){super(u,"comb"),this.id=w.id||"",this.numberOfCells=(0,e.getInteger)({data:w.numberOfCells,defaultValue:0,validate:ie=>ie>=0}),this.use=w.use||"",this.usehref=w.usehref||""}}class ne extends t.XFAObject{constructor(w){super(u,"connect",!0),this.connection=w.connection||"",this.id=w.id||"",this.ref=w.ref||"",this.usage=(0,e.getStringOption)(w.usage,["exportAndImport","exportOnly","importOnly"]),this.use=w.use||"",this.usehref=w.usehref||"",this.picture=null}}class re extends t.XFAObject{constructor(w){super(u,"contentArea",!0),this.h=(0,e.getMeasurement)(w.h),this.id=w.id||"",this.name=w.name||"",this.relevant=(0,e.getRelevant)(w.relevant),this.use=w.use||"",this.usehref=w.usehref||"",this.w=(0,e.getMeasurement)(w.w),this.x=(0,e.getMeasurement)(w.x,"0pt"),this.y=(0,e.getMeasurement)(w.y,"0pt"),this.desc=null,this.extras=null}[t.$toHTML](w){const ie=(0,s.measureToString)(this.x),ke=(0,s.measureToString)(this.y),Le={left:ie,top:ke,width:(0,s.measureToString)(this.w),height:(0,s.measureToString)(this.h)},qe=["xfaContentarea"];return(0,s.isPrintOnly)(this)&&qe.push("xfaPrintOnly"),e.HTMLResult.success({name:"div",children:[],attributes:{style:Le,class:qe,id:this[t.$uid]}})}}class ae extends t.XFAObject{constructor(w){super(u,"corner",!0),this.id=w.id||"",this.inverted=(0,e.getInteger)({data:w.inverted,defaultValue:0,validate:ie=>ie===1}),this.join=(0,e.getStringOption)(w.join,["square","round"]),this.presence=(0,e.getStringOption)(w.presence,["visible","hidden","inactive","invisible"]),this.radius=(0,e.getMeasurement)(w.radius),this.stroke=(0,e.getStringOption)(w.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]),this.thickness=(0,e.getMeasurement)(w.thickness,"0.5pt"),this.use=w.use||"",this.usehref=w.usehref||"",this.color=null,this.extras=null}[t.$toStyle](){const w=(0,s.toStyle)(this,"visibility");return w.radius=(0,s.measureToString)(this.join==="square"?0:this.radius),w}}class se extends t.ContentObject{constructor(w){super(u,"date"),this.id=w.id||"",this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||""}[t.$finalize](){const w=this[t.$content].trim();this[t.$content]=w?new Date(w):null}[t.$toHTML](w){return y(this[t.$content]?this[t.$content].toString():"")}}class oe extends t.ContentObject{constructor(w){super(u,"dateTime"),this.id=w.id||"",this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||""}[t.$finalize](){const w=this[t.$content].trim();this[t.$content]=w?new Date(w):null}[t.$toHTML](w){return y(this[t.$content]?this[t.$content].toString():"")}}class me extends t.XFAObject{constructor(w){super(u,"dateTimeEdit",!0),this.hScrollPolicy=(0,e.getStringOption)(w.hScrollPolicy,["auto","off","on"]),this.id=w.id||"",this.picker=(0,e.getStringOption)(w.picker,["host","none"]),this.use=w.use||"",this.usehref=w.usehref||"",this.border=null,this.comb=null,this.extras=null,this.margin=null}[t.$toHTML](w){const ie=(0,s.toStyle)(this,"border","font","margin"),ke=this[t.$getParent]()[t.$getParent](),Le={name:"input",attributes:{type:"text",fieldId:ke[t.$uid],dataId:ke[t.$data]&&ke[t.$data][t.$uid]||ke[t.$uid],class:["xfaTextfield"],style:ie,"aria-label":R(ke),"aria-required":!1}};return j(ke)&&(Le.attributes["aria-required"]=!0,Le.attributes.required=!0),e.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[Le]})}}class xe extends t.ContentObject{constructor(w){super(u,"decimal"),this.fracDigits=(0,e.getInteger)({data:w.fracDigits,defaultValue:2,validate:ie=>!0}),this.id=w.id||"",this.leadDigits=(0,e.getInteger)({data:w.leadDigits,defaultValue:-1,validate:ie=>!0}),this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||""}[t.$finalize](){const w=parseFloat(this[t.$content].trim());this[t.$content]=isNaN(w)?null:w}[t.$toHTML](w){return y(this[t.$content]!==null?this[t.$content].toString():"")}}class Ae extends t.XFAObject{constructor(w){super(u,"defaultUi",!0),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null}}class Se extends t.XFAObject{constructor(w){super(u,"desc",!0),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||"",this.boolean=new t.XFAObjectArray,this.date=new t.XFAObjectArray,this.dateTime=new t.XFAObjectArray,this.decimal=new t.XFAObjectArray,this.exData=new t.XFAObjectArray,this.float=new t.XFAObjectArray,this.image=new t.XFAObjectArray,this.integer=new t.XFAObjectArray,this.text=new t.XFAObjectArray,this.time=new t.XFAObjectArray}}class Fe extends t.OptionObject{constructor(w){super(u,"digestMethod",["","SHA1","SHA256","SHA512","RIPEMD160"]),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||""}}class Pe extends t.XFAObject{constructor(w){super(u,"digestMethods",!0),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["optional","required"]),this.use=w.use||"",this.usehref=w.usehref||"",this.digestMethod=new t.XFAObjectArray}}class ue extends t.XFAObject{constructor(w){super(u,"draw",!0),this.anchorType=(0,e.getStringOption)(w.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,e.getInteger)({data:w.colSpan,defaultValue:1,validate:ie=>ie>=1||ie===-1}),this.h=w.h?(0,e.getMeasurement)(w.h):"",this.hAlign=(0,e.getStringOption)(w.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=w.id||"",this.locale=w.locale||"",this.maxH=(0,e.getMeasurement)(w.maxH,"0pt"),this.maxW=(0,e.getMeasurement)(w.maxW,"0pt"),this.minH=(0,e.getMeasurement)(w.minH,"0pt"),this.minW=(0,e.getMeasurement)(w.minW,"0pt"),this.name=w.name||"",this.presence=(0,e.getStringOption)(w.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,e.getRelevant)(w.relevant),this.rotate=(0,e.getInteger)({data:w.rotate,defaultValue:0,validate:ie=>ie%90===0}),this.use=w.use||"",this.usehref=w.usehref||"",this.w=w.w?(0,e.getMeasurement)(w.w):"",this.x=(0,e.getMeasurement)(w.x,"0pt"),this.y=(0,e.getMeasurement)(w.y,"0pt"),this.assist=null,this.border=null,this.caption=null,this.desc=null,this.extras=null,this.font=null,this.keep=null,this.margin=null,this.para=null,this.traversal=null,this.ui=null,this.value=null,this.setProperty=new t.XFAObjectArray}[t.$setValue](w){K(this,w)}[t.$toHTML](w){if(O(this),this.presence==="hidden"||this.presence==="inactive")return e.HTMLResult.EMPTY;(0,s.fixDimensions)(this),this[t.$pushPara]();const ie=this.w,ke=this.h,{w:Le,h:qe,isBroken:pt}=(0,s.layoutNode)(this,w);if(Le&&this.w===""){if(pt&&this[t.$getSubformParent]()[t.$isThereMoreWidth]())return this[t.$popPara](),e.HTMLResult.FAILURE;this.w=Le}if(qe&&this.h===""&&(this.h=qe),p(this),!(0,c.checkDimensions)(this,w))return this.w=ie,this.h=ke,this[t.$popPara](),e.HTMLResult.FAILURE;P(this);const dt=(0,s.toStyle)(this,"font","hAlign","dimensions","position","presence","rotate","anchorType","border","margin");(0,s.setMinMaxDimensions)(this,dt),dt.margin&&(dt.padding=dt.margin,delete dt.margin);const mt=["xfaDraw"];this.font&&mt.push("xfaFont"),(0,s.isPrintOnly)(this)&&mt.push("xfaPrintOnly");const Ct={style:dt,id:this[t.$uid],class:mt};this.name&&(Ct.xfaName=this.name);const Tt={name:"div",attributes:Ct,children:[]};T(this,Ct);const Mt=(0,s.computeBbox)(this,Tt,w),It=this.value?this.value[t.$toHTML](w).html:null;return It===null?(this.w=ie,this.h=ke,this[t.$popPara](),e.HTMLResult.success((0,s.createWrapper)(this,Tt),Mt)):(Tt.children.push(It),(0,s.setPara)(this,dt,It),this.w=ie,this.h=ke,this[t.$popPara](),e.HTMLResult.success((0,s.createWrapper)(this,Tt),Mt))}}class ye extends t.XFAObject{constructor(w){super(u,"edge",!0),this.cap=(0,e.getStringOption)(w.cap,["square","butt","round"]),this.id=w.id||"",this.presence=(0,e.getStringOption)(w.presence,["visible","hidden","inactive","invisible"]),this.stroke=(0,e.getStringOption)(w.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]),this.thickness=(0,e.getMeasurement)(w.thickness,"0.5pt"),this.use=w.use||"",this.usehref=w.usehref||"",this.color=null,this.extras=null}[t.$toStyle](){const w=(0,s.toStyle)(this,"visibility");if(Object.assign(w,{linecap:this.cap,width:(0,s.measureToString)(this.thickness),color:this.color?this.color[t.$toStyle]():"#000000",style:""}),this.presence!=="visible")w.style="none";else switch(this.stroke){case"solid":w.style="solid";break;case"dashDot":w.style="dashed";break;case"dashDotDot":w.style="dashed";break;case"dashed":w.style="dashed";break;case"dotted":w.style="dotted";break;case"embossed":w.style="ridge";break;case"etched":w.style="groove";break;case"lowered":w.style="inset";break;case"raised":w.style="outset";break}return w}}class le extends t.OptionObject{constructor(w){super(u,"encoding",["adbe.x509.rsa_sha1","adbe.pkcs7.detached","adbe.pkcs7.sha1"]),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||""}}class he extends t.XFAObject{constructor(w){super(u,"encodings",!0),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["optional","required"]),this.use=w.use||"",this.usehref=w.usehref||"",this.encoding=new t.XFAObjectArray}}class ce extends t.XFAObject{constructor(w){super(u,"encrypt",!0),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||"",this.certificate=null}}class Te extends t.XFAObject{constructor(w){super(u,"encryptData",!0),this.id=w.id||"",this.operation=(0,e.getStringOption)(w.operation,["encrypt","decrypt"]),this.target=w.target||"",this.use=w.use||"",this.usehref=w.usehref||"",this.filter=null,this.manifest=null}}class Re extends t.XFAObject{constructor(w){super(u,"encryption",!0),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["optional","required"]),this.use=w.use||"",this.usehref=w.usehref||"",this.certificate=new t.XFAObjectArray}}class He extends t.OptionObject{constructor(w){super(u,"encryptionMethod",["","AES256-CBC","TRIPLEDES-CBC","AES128-CBC","AES192-CBC"]),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||""}}class Ce extends t.XFAObject{constructor(w){super(u,"encryptionMethods",!0),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["optional","required"]),this.use=w.use||"",this.usehref=w.usehref||"",this.encryptionMethod=new t.XFAObjectArray}}class ve extends t.XFAObject{constructor(w){super(u,"event",!0),this.activity=(0,e.getStringOption)(w.activity,["click","change","docClose","docReady","enter","exit","full","indexChange","initialize","mouseDown","mouseEnter","mouseExit","mouseUp","postExecute","postOpen","postPrint","postSave","postSign","postSubmit","preExecute","preOpen","prePrint","preSave","preSign","preSubmit","ready","validationState"]),this.id=w.id||"",this.listen=(0,e.getStringOption)(w.listen,["refOnly","refAndDescendents"]),this.name=w.name||"",this.ref=w.ref||"",this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null,this.encryptData=null,this.execute=null,this.script=null,this.signData=null,this.submit=null}}class fe extends t.ContentObject{constructor(w){super(u,"exData"),this.contentType=w.contentType||"",this.href=w.href||"",this.id=w.id||"",this.maxLength=(0,e.getInteger)({data:w.maxLength,defaultValue:-1,validate:ie=>ie>=-1}),this.name=w.name||"",this.rid=w.rid||"",this.transferEncoding=(0,e.getStringOption)(w.transferEncoding,["none","base64","package"]),this.use=w.use||"",this.usehref=w.usehref||""}[t.$isCDATAXml](){return this.contentType==="text/html"}[t.$onChild](w){return this.contentType==="text/html"&&w[t.$namespaceId]===o.NamespaceIds.xhtml.id?(this[t.$content]=w,!0):this.contentType==="text/xml"?(this[t.$content]=w,!0):!1}[t.$toHTML](w){return this.contentType!=="text/html"||!this[t.$content]?e.HTMLResult.EMPTY:this[t.$content][t.$toHTML](w)}}class We extends t.XFAObject{constructor(w){super(u,"exObject",!0),this.archive=w.archive||"",this.classId=w.classId||"",this.codeBase=w.codeBase||"",this.codeType=w.codeType||"",this.id=w.id||"",this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null,this.boolean=new t.XFAObjectArray,this.date=new t.XFAObjectArray,this.dateTime=new t.XFAObjectArray,this.decimal=new t.XFAObjectArray,this.exData=new t.XFAObjectArray,this.exObject=new t.XFAObjectArray,this.float=new t.XFAObjectArray,this.image=new t.XFAObjectArray,this.integer=new t.XFAObjectArray,this.text=new t.XFAObjectArray,this.time=new t.XFAObjectArray}}class Ue extends t.XFAObject{constructor(w){super(u,"exclGroup",!0),this.access=(0,e.getStringOption)(w.access,["open","nonInteractive","protected","readOnly"]),this.accessKey=w.accessKey||"",this.anchorType=(0,e.getStringOption)(w.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,e.getInteger)({data:w.colSpan,defaultValue:1,validate:ie=>ie>=1||ie===-1}),this.h=w.h?(0,e.getMeasurement)(w.h):"",this.hAlign=(0,e.getStringOption)(w.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=w.id||"",this.layout=(0,e.getStringOption)(w.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]),this.maxH=(0,e.getMeasurement)(w.maxH,"0pt"),this.maxW=(0,e.getMeasurement)(w.maxW,"0pt"),this.minH=(0,e.getMeasurement)(w.minH,"0pt"),this.minW=(0,e.getMeasurement)(w.minW,"0pt"),this.name=w.name||"",this.presence=(0,e.getStringOption)(w.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,e.getRelevant)(w.relevant),this.use=w.use||"",this.usehref=w.usehref||"",this.w=w.w?(0,e.getMeasurement)(w.w):"",this.x=(0,e.getMeasurement)(w.x,"0pt"),this.y=(0,e.getMeasurement)(w.y,"0pt"),this.assist=null,this.bind=null,this.border=null,this.calculate=null,this.caption=null,this.desc=null,this.extras=null,this.margin=null,this.para=null,this.traversal=null,this.validate=null,this.connect=new t.XFAObjectArray,this.event=new t.XFAObjectArray,this.field=new t.XFAObjectArray,this.setProperty=new t.XFAObjectArray}[t.$isBindable](){return!0}[t.$hasSettableValue](){return!0}[t.$setValue](w){for(const ie of this.field.children){if(!ie.value){const ke=new Vt({});ie[t.$appendChild](ke),ie.value=ke}ie.value[t.$setValue](w)}}[t.$isThereMoreWidth](){return this.layout.endsWith("-tb")&&this[t.$extra].attempt===0&&this[t.$extra].numberInLine>0||this[t.$getParent]()[t.$isThereMoreWidth]()}[t.$isSplittable](){const w=this[t.$getSubformParent]();return w[t.$isSplittable]()?this[t.$extra]._isSplittable!==void 0?this[t.$extra]._isSplittable:this.layout==="position"||this.layout.includes("row")?(this[t.$extra]._isSplittable=!1,!1):w.layout&&w.layout.endsWith("-tb")&&w[t.$extra].numberInLine!==0?!1:(this[t.$extra]._isSplittable=!0,!0):!1}[t.$flushHTML](){return(0,c.flushHTML)(this)}[t.$addHTML](w,ie){(0,c.addHTML)(this,w,ie)}[t.$getAvailableSpace](){return(0,c.getAvailableSpace)(this)}[t.$toHTML](w){if(O(this),this.presence==="hidden"||this.presence==="inactive"||this.h===0||this.w===0)return e.HTMLResult.EMPTY;(0,s.fixDimensions)(this);const ie=[],ke={id:this[t.$uid],class:[]};(0,s.setAccess)(this,ke.class),this[t.$extra]||(this[t.$extra]=Object.create(null)),Object.assign(this[t.$extra],{children:ie,attributes:ke,attempt:0,line:null,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,w.width),height:Math.min(this.h||1/0,w.height)},width:0,height:0,prevHeight:0,currentWidth:0});const Le=this[t.$isSplittable]();if(Le||p(this),!(0,c.checkDimensions)(this,w))return e.HTMLResult.FAILURE;const qe=new Set(["field"]);if(this.layout.includes("row")){const Ft=this[t.$getSubformParent]().columnWidths;Array.isArray(Ft)&&Ft.length>0&&(this[t.$extra].columnWidths=Ft,this[t.$extra].currentColumn=0)}const pt=(0,s.toStyle)(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),dt=["xfaExclgroup"],mt=(0,s.layoutClass)(this);mt&&dt.push(mt),(0,s.isPrintOnly)(this)&&dt.push("xfaPrintOnly"),ke.style=pt,ke.class=dt,this.name&&(ke.xfaName=this.name),this[t.$pushPara]();const Ct=this.layout==="lr-tb"||this.layout==="rl-tb",Tt=Ct?i:1;for(;this[t.$extra].attempt<Tt;this[t.$extra].attempt++){Ct&&this[t.$extra].attempt===i-1&&(this[t.$extra].numberInLine=0);const Ft=this[t.$childrenToHTML]({filter:qe,include:!0});if(Ft.success)break;if(Ft.isBreak())return this[t.$popPara](),Ft;if(Ct&&this[t.$extra].attempt===0&&this[t.$extra].numberInLine===0&&!this[t.$getTemplateRoot]()[t.$extra].noLayoutFailure){this[t.$extra].attempt=Tt;break}}if(this[t.$popPara](),Le||P(this),this[t.$extra].attempt===Tt)return Le||delete this[t.$extra],e.HTMLResult.FAILURE;let Mt=0,It=0;this.margin&&(Mt=this.margin.leftInset+this.margin.rightInset,It=this.margin.topInset+this.margin.bottomInset);const Lt=Math.max(this[t.$extra].width+Mt,this.w||0),Rt=Math.max(this[t.$extra].height+It,this.h||0),At=[this.x,this.y,Lt,Rt];this.w===""&&(pt.width=(0,s.measureToString)(Lt)),this.h===""&&(pt.height=(0,s.measureToString)(Rt));const jt={name:"div",attributes:ke,children:ie};return T(this,ke),delete this[t.$extra],e.HTMLResult.success((0,s.createWrapper)(this,jt),At)}}class ze extends t.XFAObject{constructor(w){super(u,"execute"),this.connection=w.connection||"",this.executeType=(0,e.getStringOption)(w.executeType,["import","remerge"]),this.id=w.id||"",this.runAt=(0,e.getStringOption)(w.runAt,["client","both","server"]),this.use=w.use||"",this.usehref=w.usehref||""}}class tt extends t.XFAObject{constructor(w){super(u,"extras",!0),this.id=w.id||"",this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||"",this.boolean=new t.XFAObjectArray,this.date=new t.XFAObjectArray,this.dateTime=new t.XFAObjectArray,this.decimal=new t.XFAObjectArray,this.exData=new t.XFAObjectArray,this.extras=new t.XFAObjectArray,this.float=new t.XFAObjectArray,this.image=new t.XFAObjectArray,this.integer=new t.XFAObjectArray,this.text=new t.XFAObjectArray,this.time=new t.XFAObjectArray}}class Ne extends t.XFAObject{constructor(w){super(u,"field",!0),this.access=(0,e.getStringOption)(w.access,["open","nonInteractive","protected","readOnly"]),this.accessKey=w.accessKey||"",this.anchorType=(0,e.getStringOption)(w.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,e.getInteger)({data:w.colSpan,defaultValue:1,validate:ie=>ie>=1||ie===-1}),this.h=w.h?(0,e.getMeasurement)(w.h):"",this.hAlign=(0,e.getStringOption)(w.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=w.id||"",this.locale=w.locale||"",this.maxH=(0,e.getMeasurement)(w.maxH,"0pt"),this.maxW=(0,e.getMeasurement)(w.maxW,"0pt"),this.minH=(0,e.getMeasurement)(w.minH,"0pt"),this.minW=(0,e.getMeasurement)(w.minW,"0pt"),this.name=w.name||"",this.presence=(0,e.getStringOption)(w.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,e.getRelevant)(w.relevant),this.rotate=(0,e.getInteger)({data:w.rotate,defaultValue:0,validate:ie=>ie%90===0}),this.use=w.use||"",this.usehref=w.usehref||"",this.w=w.w?(0,e.getMeasurement)(w.w):"",this.x=(0,e.getMeasurement)(w.x,"0pt"),this.y=(0,e.getMeasurement)(w.y,"0pt"),this.assist=null,this.bind=null,this.border=null,this.calculate=null,this.caption=null,this.desc=null,this.extras=null,this.font=null,this.format=null,this.items=new t.XFAObjectArray(2),this.keep=null,this.margin=null,this.para=null,this.traversal=null,this.ui=null,this.validate=null,this.value=null,this.bindItems=new t.XFAObjectArray,this.connect=new t.XFAObjectArray,this.event=new t.XFAObjectArray,this.setProperty=new t.XFAObjectArray}[t.$isBindable](){return!0}[t.$setValue](w){K(this,w)}[t.$toHTML](w){if(O(this),!this.ui){this.ui=new ei({}),this.ui[t.$globalData]=this[t.$globalData],this[t.$appendChild](this.ui);let Ft;switch(this.items.children.length){case 0:Ft=new ci({}),this.ui.textEdit=Ft;break;case 1:Ft=new te({}),this.ui.checkButton=Ft;break;case 2:Ft=new Q({}),this.ui.choiceList=Ft;break}this.ui[t.$appendChild](Ft)}if(!this.ui||this.presence==="hidden"||this.presence==="inactive"||this.h===0||this.w===0)return e.HTMLResult.EMPTY;this.caption&&delete this.caption[t.$extra],this[t.$pushPara]();const ie=this.caption?this.caption[t.$toHTML](w).html:null,ke=this.w,Le=this.h;let qe=0,pt=0;this.margin&&(qe=this.margin.leftInset+this.margin.rightInset,pt=this.margin.topInset+this.margin.bottomInset);let dt=null;if(this.w===""||this.h===""){let Ft=null,_t=null,$t=0,kt=0;if(this.ui.checkButton)$t=kt=this.ui.checkButton.size;else{const{w:Gt,h:zt}=(0,s.layoutNode)(this,w);Gt!==null?($t=Gt,kt=zt):kt=(0,r.getMetrics)(this.font,!0).lineNoGap}if(dt=v(this.ui[t.$getExtra]()),$t+=dt.w,kt+=dt.h,this.caption){const{w:Gt,h:zt,isBroken:Ut}=this.caption[t.$getExtra](w);if(Ut&&this[t.$getSubformParent]()[t.$isThereMoreWidth]())return this[t.$popPara](),e.HTMLResult.FAILURE;switch(Ft=Gt,_t=zt,this.caption.placement){case"left":case"right":case"inline":Ft+=$t;break;case"top":case"bottom":_t+=kt;break}}else Ft=$t,_t=kt;Ft&&this.w===""&&(Ft+=qe,this.w=Math.min(this.maxW<=0?1/0:this.maxW,this.minW+1<Ft?Ft:this.minW)),_t&&this.h===""&&(_t+=pt,this.h=Math.min(this.maxH<=0?1/0:this.maxH,this.minH+1<_t?_t:this.minH))}if(this[t.$popPara](),(0,s.fixDimensions)(this),p(this),!(0,c.checkDimensions)(this,w))return this.w=ke,this.h=Le,this[t.$popPara](),e.HTMLResult.FAILURE;P(this);const mt=(0,s.toStyle)(this,"font","dimensions","position","rotate","anchorType","presence","margin","hAlign");(0,s.setMinMaxDimensions)(this,mt);const Ct=["xfaField"];this.font&&Ct.push("xfaFont"),(0,s.isPrintOnly)(this)&&Ct.push("xfaPrintOnly");const Tt={style:mt,id:this[t.$uid],class:Ct};mt.margin&&(mt.padding=mt.margin,delete mt.margin),(0,s.setAccess)(this,Ct),this.name&&(Tt.xfaName=this.name);const Mt=[],It={name:"div",attributes:Tt,children:Mt};T(this,Tt);const Lt=this.border?this.border[t.$toStyle]():null,Rt=(0,s.computeBbox)(this,It,w),At=this.ui[t.$toHTML]().html;if(!At)return Object.assign(mt,Lt),e.HTMLResult.success((0,s.createWrapper)(this,It),Rt);this[t.$tabIndex]&&(At.children&&At.children[0]?At.children[0].attributes.tabindex=this[t.$tabIndex]:At.attributes.tabindex=this[t.$tabIndex]),At.attributes.style||(At.attributes.style=Object.create(null));let jt=null;if(this.ui.button?(At.children.length===1&&([jt]=At.children.splice(0,1)),Object.assign(At.attributes.style,Lt)):Object.assign(mt,Lt),Mt.push(At),this.value){if(this.ui.imageEdit)At.children.push(this.value[t.$toHTML]().html);else if(!this.ui.button){let Ft="";if(this.value.exData)Ft=this.value.exData[t.$text]();else if(this.value.text)Ft=this.value.text[t.$getExtra]();else{const _t=this.value[t.$toHTML]().html;_t!==null&&(Ft=_t.children[0].value)}this.ui.textEdit&&this.value.text&&this.value.text.maxChars&&(At.children[0].attributes.maxLength=this.value.text.maxChars),Ft&&(this.ui.numericEdit&&(Ft=parseFloat(Ft),Ft=isNaN(Ft)?"":Ft.toString()),At.children[0].name==="textarea"?At.children[0].attributes.textContent=Ft:At.children[0].attributes.value=Ft)}}if(!this.ui.imageEdit&&At.children&&At.children[0]&&this.h){dt=dt||v(this.ui[t.$getExtra]());let Ft=0;if(this.caption&&["top","bottom"].includes(this.caption.placement)){Ft=this.caption.reserve,Ft<=0&&(Ft=this.caption[t.$getExtra](w).h);const _t=this.h-Ft-pt-dt.h;At.children[0].attributes.style.height=(0,s.measureToString)(_t)}else At.children[0].attributes.style.height="100%"}if(jt&&At.children.push(jt),!ie)return At.attributes.class&&At.attributes.class.push("xfaLeft"),this.w=ke,this.h=Le,e.HTMLResult.success((0,s.createWrapper)(this,It),Rt);if(this.ui.button)return mt.padding&&delete mt.padding,ie.name==="div"&&(ie.name="span"),At.children.push(ie),e.HTMLResult.success(It,Rt);switch(this.ui.checkButton&&(ie.attributes.class[0]="xfaCaptionForCheckButton"),At.attributes.class||(At.attributes.class=[]),At.children.splice(0,0,ie),this.caption.placement){case"left":At.attributes.class.push("xfaLeft");break;case"right":At.attributes.class.push("xfaRight");break;case"top":At.attributes.class.push("xfaTop");break;case"bottom":At.attributes.class.push("xfaBottom");break;case"inline":At.attributes.class.push("xfaLeft");break}return this.w=ke,this.h=Le,e.HTMLResult.success((0,s.createWrapper)(this,It),Rt)}}f.Field=Ne;class Qe extends t.XFAObject{constructor(w){super(u,"fill",!0),this.id=w.id||"",this.presence=(0,e.getStringOption)(w.presence,["visible","hidden","inactive","invisible"]),this.use=w.use||"",this.usehref=w.usehref||"",this.color=null,this.extras=null,this.linear=null,this.pattern=null,this.radial=null,this.solid=null,this.stipple=null}[t.$toStyle](){const w=this[t.$getParent](),ke=w[t.$getParent]()[t.$getParent](),Le=Object.create(null);let qe="color",pt=qe;w instanceof I&&(qe="background-color",pt="background",ke instanceof ei&&(Le.backgroundColor="white")),(w instanceof ri||w instanceof C)&&(qe=pt="fill",Le.fill="white");for(const dt of Object.getOwnPropertyNames(this)){if(dt==="extras"||dt==="color")continue;const mt=this[dt];if(!(mt instanceof t.XFAObject))continue;const Ct=mt[t.$toStyle](this.color);return Ct&&(Le[Ct.startsWith("#")?qe:pt]=Ct),Le}if(this.color&&this.color.value){const dt=this.color[t.$toStyle]();Le[dt.startsWith("#")?qe:pt]=dt}return Le}}class ct extends t.XFAObject{constructor(w){super(u,"filter",!0),this.addRevocationInfo=(0,e.getStringOption)(w.addRevocationInfo,["","required","optional","none"]),this.id=w.id||"",this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||"",this.version=(0,e.getInteger)({data:this.version,defaultValue:5,validate:ie=>ie>=1&&ie<=5}),this.appearanceFilter=null,this.certificates=null,this.digestMethods=null,this.encodings=null,this.encryptionMethods=null,this.handler=null,this.lockDocument=null,this.mdp=null,this.reasons=null,this.timeStamp=null}}class Ee extends t.ContentObject{constructor(w){super(u,"float"),this.id=w.id||"",this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||""}[t.$finalize](){const w=parseFloat(this[t.$content].trim());this[t.$content]=isNaN(w)?null:w}[t.$toHTML](w){return y(this[t.$content]!==null?this[t.$content].toString():"")}}class rt extends t.XFAObject{constructor(w){super(u,"font",!0),this.baselineShift=(0,e.getMeasurement)(w.baselineShift),this.fontHorizontalScale=(0,e.getFloat)({data:w.fontHorizontalScale,defaultValue:100,validate:ie=>ie>=0}),this.fontVerticalScale=(0,e.getFloat)({data:w.fontVerticalScale,defaultValue:100,validate:ie=>ie>=0}),this.id=w.id||"",this.kerningMode=(0,e.getStringOption)(w.kerningMode,["none","pair"]),this.letterSpacing=(0,e.getMeasurement)(w.letterSpacing,"0"),this.lineThrough=(0,e.getInteger)({data:w.lineThrough,defaultValue:0,validate:ie=>ie===1||ie===2}),this.lineThroughPeriod=(0,e.getStringOption)(w.lineThroughPeriod,["all","word"]),this.overline=(0,e.getInteger)({data:w.overline,defaultValue:0,validate:ie=>ie===1||ie===2}),this.overlinePeriod=(0,e.getStringOption)(w.overlinePeriod,["all","word"]),this.posture=(0,e.getStringOption)(w.posture,["normal","italic"]),this.size=(0,e.getMeasurement)(w.size,"10pt"),this.typeface=w.typeface||"Courier",this.underline=(0,e.getInteger)({data:w.underline,defaultValue:0,validate:ie=>ie===1||ie===2}),this.underlinePeriod=(0,e.getStringOption)(w.underlinePeriod,["all","word"]),this.use=w.use||"",this.usehref=w.usehref||"",this.weight=(0,e.getStringOption)(w.weight,["normal","bold"]),this.extras=null,this.fill=null}[t.$clean](w){super[t.$clean](w),this[t.$globalData].usedTypefaces.add(this.typeface)}[t.$toStyle](){const w=(0,s.toStyle)(this,"fill"),ie=w.color;return ie&&(ie==="#000000"?delete w.color:ie.startsWith("#")||(w.background=ie,w.backgroundClip="text",w.color="transparent")),this.baselineShift&&(w.verticalAlign=(0,s.measureToString)(this.baselineShift)),w.fontKerning=this.kerningMode==="none"?"none":"normal",w.letterSpacing=(0,s.measureToString)(this.letterSpacing),this.lineThrough!==0&&(w.textDecoration="line-through",this.lineThrough===2&&(w.textDecorationStyle="double")),this.overline!==0&&(w.textDecoration="overline",this.overline===2&&(w.textDecorationStyle="double")),w.fontStyle=this.posture,w.fontSize=(0,s.measureToString)(.99*this.size),(0,s.setFontFamily)(this,this,this[t.$globalData].fontFinder,w),this.underline!==0&&(w.textDecoration="underline",this.underline===2&&(w.textDecorationStyle="double")),w.fontWeight=this.weight,w}}class Ze extends t.XFAObject{constructor(w){super(u,"format",!0),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null,this.picture=null}}class vt extends t.StringObject{constructor(w){super(u,"handler"),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["optional","required"]),this.use=w.use||"",this.usehref=w.usehref||""}}class lt extends t.XFAObject{constructor(w){super(u,"hyphenation"),this.excludeAllCaps=(0,e.getInteger)({data:w.excludeAllCaps,defaultValue:0,validate:ie=>ie===1}),this.excludeInitialCap=(0,e.getInteger)({data:w.excludeInitialCap,defaultValue:0,validate:ie=>ie===1}),this.hyphenate=(0,e.getInteger)({data:w.hyphenate,defaultValue:0,validate:ie=>ie===1}),this.id=w.id||"",this.pushCharacterCount=(0,e.getInteger)({data:w.pushCharacterCount,defaultValue:3,validate:ie=>ie>=0}),this.remainCharacterCount=(0,e.getInteger)({data:w.remainCharacterCount,defaultValue:3,validate:ie=>ie>=0}),this.use=w.use||"",this.usehref=w.usehref||"",this.wordCharacterCount=(0,e.getInteger)({data:w.wordCharacterCount,defaultValue:7,validate:ie=>ie>=0})}}class ht extends t.StringObject{constructor(w){super(u,"image"),this.aspect=(0,e.getStringOption)(w.aspect,["fit","actual","height","none","width"]),this.contentType=w.contentType||"",this.href=w.href||"",this.id=w.id||"",this.name=w.name||"",this.transferEncoding=(0,e.getStringOption)(w.transferEncoding,["base64","none","package"]),this.use=w.use||"",this.usehref=w.usehref||""}[t.$toHTML](){if(this.contentType&&!A.has(this.contentType.toLowerCase()))return e.HTMLResult.EMPTY;let w=this[t.$globalData].images&&this[t.$globalData].images.get(this.href);if(!w&&(this.href||!this[t.$content])||(!w&&this.transferEncoding==="base64"&&(w=(0,a.stringToBytes)(atob(this[t.$content]))),!w))return e.HTMLResult.EMPTY;if(!this.contentType){for(const[qe,pt]of k)if(w.length>qe.length&&qe.every((dt,mt)=>dt===w[mt])){this.contentType=pt;break}if(!this.contentType)return e.HTMLResult.EMPTY}const ie=new Blob([w],{type:this.contentType});let ke;switch(this.aspect){case"fit":case"actual":break;case"height":ke={height:"100%",objectFit:"fill"};break;case"none":ke={width:"100%",height:"100%",objectFit:"fill"};break;case"width":ke={width:"100%",objectFit:"fill"};break}const Le=this[t.$getParent]();return e.HTMLResult.success({name:"img",attributes:{class:["xfaImage"],style:ke,src:URL.createObjectURL(ie),alt:Le?R(Le[t.$getParent]()):null}})}}class ot extends t.XFAObject{constructor(w){super(u,"imageEdit",!0),this.data=(0,e.getStringOption)(w.data,["link","embed"]),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||"",this.border=null,this.extras=null,this.margin=null}[t.$toHTML](w){return this.data==="embed"?e.HTMLResult.success({name:"div",children:[],attributes:{}}):e.HTMLResult.EMPTY}}class Dt extends t.ContentObject{constructor(w){super(u,"integer"),this.id=w.id||"",this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||""}[t.$finalize](){const w=parseInt(this[t.$content].trim(),10);this[t.$content]=isNaN(w)?null:w}[t.$toHTML](w){return y(this[t.$content]!==null?this[t.$content].toString():"")}}class Ot extends t.XFAObject{constructor(w){super(u,"issuers",!0),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["optional","required"]),this.use=w.use||"",this.usehref=w.usehref||"",this.certificate=new t.XFAObjectArray}}class Xe extends t.XFAObject{constructor(w){super(u,"items",!0),this.id=w.id||"",this.name=w.name||"",this.presence=(0,e.getStringOption)(w.presence,["visible","hidden","inactive","invisible"]),this.ref=w.ref||"",this.save=(0,e.getInteger)({data:w.save,defaultValue:0,validate:ie=>ie===1}),this.use=w.use||"",this.usehref=w.usehref||"",this.boolean=new t.XFAObjectArray,this.date=new t.XFAObjectArray,this.dateTime=new t.XFAObjectArray,this.decimal=new t.XFAObjectArray,this.exData=new t.XFAObjectArray,this.float=new t.XFAObjectArray,this.image=new t.XFAObjectArray,this.integer=new t.XFAObjectArray,this.text=new t.XFAObjectArray,this.time=new t.XFAObjectArray}[t.$toHTML](){const w=[];for(const ie of this[t.$getChildren]())w.push(ie[t.$text]());return e.HTMLResult.success(w)}}f.Items=Xe;class Ie extends t.XFAObject{constructor(w){super(u,"keep",!0),this.id=w.id||"";const ie=["none","contentArea","pageArea"];this.intact=(0,e.getStringOption)(w.intact,ie),this.next=(0,e.getStringOption)(w.next,ie),this.previous=(0,e.getStringOption)(w.previous,ie),this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null}}class Ge extends t.XFAObject{constructor(w){super(u,"keyUsage");const ie=["","yes","no"];this.crlSign=(0,e.getStringOption)(w.crlSign,ie),this.dataEncipherment=(0,e.getStringOption)(w.dataEncipherment,ie),this.decipherOnly=(0,e.getStringOption)(w.decipherOnly,ie),this.digitalSignature=(0,e.getStringOption)(w.digitalSignature,ie),this.encipherOnly=(0,e.getStringOption)(w.encipherOnly,ie),this.id=w.id||"",this.keyAgreement=(0,e.getStringOption)(w.keyAgreement,ie),this.keyCertSign=(0,e.getStringOption)(w.keyCertSign,ie),this.keyEncipherment=(0,e.getStringOption)(w.keyEncipherment,ie),this.nonRepudiation=(0,e.getStringOption)(w.nonRepudiation,ie),this.type=(0,e.getStringOption)(w.type,["optional","required"]),this.use=w.use||"",this.usehref=w.usehref||""}}class Ve extends t.XFAObject{constructor(w){super(u,"line",!0),this.hand=(0,e.getStringOption)(w.hand,["even","left","right"]),this.id=w.id||"",this.slope=(0,e.getStringOption)(w.slope,["\\","/"]),this.use=w.use||"",this.usehref=w.usehref||"",this.edge=null}[t.$toHTML](){const w=this[t.$getParent]()[t.$getParent](),ie=this.edge||new ye({}),ke=ie[t.$toStyle](),Le=Object.create(null),qe=ie.presence==="visible"?ie.thickness:0;Le.strokeWidth=(0,s.measureToString)(qe),Le.stroke=ke.color;let pt,dt,mt,Ct,Tt="100%",Mt="100%";w.w<=qe?([pt,dt,mt,Ct]=["50%",0,"50%","100%"],Tt=Le.strokeWidth):w.h<=qe?([pt,dt,mt,Ct]=[0,"50%","100%","50%"],Mt=Le.strokeWidth):this.slope==="\\"?[pt,dt,mt,Ct]=[0,0,"100%","100%"]:[pt,dt,mt,Ct]=[0,"100%","100%",0];const Lt={name:"svg",children:[{name:"line",attributes:{xmlns:d,x1:pt,y1:dt,x2:mt,y2:Ct,style:Le}}],attributes:{xmlns:d,width:Tt,height:Mt,style:{overflow:"visible"}}};return _(w)?e.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[Lt]}):(Lt.attributes.style.position="absolute",e.HTMLResult.success(Lt))}}class it extends t.XFAObject{constructor(w){super(u,"linear",!0),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["toRight","toBottom","toLeft","toTop"]),this.use=w.use||"",this.usehref=w.usehref||"",this.color=null,this.extras=null}[t.$toStyle](w){w=w?w[t.$toStyle]():"#FFFFFF";const ie=this.type.replace(/([RBLT])/," $1").toLowerCase(),ke=this.color?this.color[t.$toStyle]():"#000000";return`linear-gradient(${ie}, ${w}, ${ke})`}}class gt extends t.ContentObject{constructor(w){super(u,"lockDocument"),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["optional","required"]),this.use=w.use||"",this.usehref=w.usehref||""}[t.$finalize](){this[t.$content]=(0,e.getStringOption)(this[t.$content],["auto","0","1"])}}class nt extends t.XFAObject{constructor(w){super(u,"manifest",!0),this.action=(0,e.getStringOption)(w.action,["include","all","exclude"]),this.id=w.id||"",this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null,this.ref=new t.XFAObjectArray}}class Ke extends t.XFAObject{constructor(w){super(u,"margin",!0),this.bottomInset=(0,e.getMeasurement)(w.bottomInset,"0"),this.id=w.id||"",this.leftInset=(0,e.getMeasurement)(w.leftInset,"0"),this.rightInset=(0,e.getMeasurement)(w.rightInset,"0"),this.topInset=(0,e.getMeasurement)(w.topInset,"0"),this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null}[t.$toStyle](){return{margin:(0,s.measureToString)(this.topInset)+" "+(0,s.measureToString)(this.rightInset)+" "+(0,s.measureToString)(this.bottomInset)+" "+(0,s.measureToString)(this.leftInset)}}}class at extends t.XFAObject{constructor(w){super(u,"mdp"),this.id=w.id||"",this.permissions=(0,e.getInteger)({data:w.permissions,defaultValue:2,validate:ie=>ie===1||ie===3}),this.signatureType=(0,e.getStringOption)(w.signatureType,["filler","author"]),this.use=w.use||"",this.usehref=w.usehref||""}}class ut extends t.XFAObject{constructor(w){super(u,"medium"),this.id=w.id||"",this.imagingBBox=(0,e.getBBox)(w.imagingBBox),this.long=(0,e.getMeasurement)(w.long),this.orientation=(0,e.getStringOption)(w.orientation,["portrait","landscape"]),this.short=(0,e.getMeasurement)(w.short),this.stock=w.stock||"",this.trayIn=(0,e.getStringOption)(w.trayIn,["auto","delegate","pageFront"]),this.trayOut=(0,e.getStringOption)(w.trayOut,["auto","delegate"]),this.use=w.use||"",this.usehref=w.usehref||""}}class St extends t.XFAObject{constructor(w){super(u,"message",!0),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||"",this.text=new t.XFAObjectArray}}class bt extends t.XFAObject{constructor(w){super(u,"numericEdit",!0),this.hScrollPolicy=(0,e.getStringOption)(w.hScrollPolicy,["auto","off","on"]),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||"",this.border=null,this.comb=null,this.extras=null,this.margin=null}[t.$toHTML](w){const ie=(0,s.toStyle)(this,"border","font","margin"),ke=this[t.$getParent]()[t.$getParent](),Le={name:"input",attributes:{type:"text",fieldId:ke[t.$uid],dataId:ke[t.$data]&&ke[t.$data][t.$uid]||ke[t.$uid],class:["xfaTextfield"],style:ie,"aria-label":R(ke),"aria-required":!1}};return j(ke)&&(Le.attributes["aria-required"]=!0,Le.attributes.required=!0),e.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[Le]})}}class ft extends t.XFAObject{constructor(w){super(u,"occur",!0),this.id=w.id||"",this.initial=w.initial!==""?(0,e.getInteger)({data:w.initial,defaultValue:"",validate:ie=>!0}):"",this.max=w.max!==""?(0,e.getInteger)({data:w.max,defaultValue:1,validate:ie=>!0}):"",this.min=w.min!==""?(0,e.getInteger)({data:w.min,defaultValue:1,validate:ie=>!0}):"",this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null}[t.$clean](){const w=this[t.$getParent](),ie=this.min;this.min===""&&(this.min=w instanceof je||w instanceof et?0:1),this.max===""&&(ie===""?this.max=w instanceof je||w instanceof et?-1:1:this.max=this.min),this.max!==-1&&this.max<this.min&&(this.max=this.min),this.initial===""&&(this.initial=w instanceof Qt?1:this.min)}}class we extends t.StringObject{constructor(w){super(u,"oid"),this.id=w.id||"",this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||""}}class _e extends t.XFAObject{constructor(w){super(u,"oids",!0),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["optional","required"]),this.use=w.use||"",this.usehref=w.usehref||"",this.oid=new t.XFAObjectArray}}class $e extends t.XFAObject{constructor(w){super(u,"overflow"),this.id=w.id||"",this.leader=w.leader||"",this.target=w.target||"",this.trailer=w.trailer||"",this.use=w.use||"",this.usehref=w.usehref||""}[t.$getExtra](){if(!this[t.$extra]){const w=this[t.$getParent](),ie=this[t.$getTemplateRoot](),ke=ie[t.$searchNode](this.target,w),Le=ie[t.$searchNode](this.leader,w),qe=ie[t.$searchNode](this.trailer,w);this[t.$extra]={target:ke&&ke[0]||null,leader:Le&&Le[0]||null,trailer:qe&&qe[0]||null,addLeader:!1,addTrailer:!1}}return this[t.$extra]}}class je extends t.XFAObject{constructor(w){super(u,"pageArea",!0),this.blankOrNotBlank=(0,e.getStringOption)(w.blankOrNotBlank,["any","blank","notBlank"]),this.id=w.id||"",this.initialNumber=(0,e.getInteger)({data:w.initialNumber,defaultValue:1,validate:ie=>!0}),this.name=w.name||"",this.numbered=(0,e.getInteger)({data:w.numbered,defaultValue:1,validate:ie=>!0}),this.oddOrEven=(0,e.getStringOption)(w.oddOrEven,["any","even","odd"]),this.pagePosition=(0,e.getStringOption)(w.pagePosition,["any","first","last","only","rest"]),this.relevant=(0,e.getRelevant)(w.relevant),this.use=w.use||"",this.usehref=w.usehref||"",this.desc=null,this.extras=null,this.medium=null,this.occur=null,this.area=new t.XFAObjectArray,this.contentArea=new t.XFAObjectArray,this.draw=new t.XFAObjectArray,this.exclGroup=new t.XFAObjectArray,this.field=new t.XFAObjectArray,this.subform=new t.XFAObjectArray}[t.$isUsable](){return this[t.$extra]?!this.occur||this.occur.max===-1||this[t.$extra].numberOfUse<this.occur.max:(this[t.$extra]={numberOfUse:0},!0)}[t.$cleanPage](){delete this[t.$extra]}[t.$getNextPage](){this[t.$extra]||(this[t.$extra]={numberOfUse:0});const w=this[t.$getParent]();return w.relation==="orderedOccurrence"&&this[t.$isUsable]()?(this[t.$extra].numberOfUse+=1,this):w[t.$getNextPage]()}[t.$getAvailableSpace](){return this[t.$extra].space||{width:0,height:0}}[t.$toHTML](){this[t.$extra]||(this[t.$extra]={numberOfUse:1});const w=[];this[t.$extra].children=w;const ie=Object.create(null);if(this.medium&&this.medium.short&&this.medium.long){if(ie.width=(0,s.measureToString)(this.medium.short),ie.height=(0,s.measureToString)(this.medium.long),this[t.$extra].space={width:this.medium.short,height:this.medium.long},this.medium.orientation==="landscape"){const ke=ie.width;ie.width=ie.height,ie.height=ke,this[t.$extra].space={width:this.medium.long,height:this.medium.short}}}else(0,a.warn)("XFA - No medium specified in pageArea: please file a bug.");return this[t.$childrenToHTML]({filter:new Set(["area","draw","field","subform"]),include:!0}),this[t.$childrenToHTML]({filter:new Set(["contentArea"]),include:!0}),e.HTMLResult.success({name:"div",children:w,attributes:{class:["xfaPage"],id:this[t.$uid],style:ie,xfaName:this.name}})}}class et extends t.XFAObject{constructor(w){super(u,"pageSet",!0),this.duplexImposition=(0,e.getStringOption)(w.duplexImposition,["longEdge","shortEdge"]),this.id=w.id||"",this.name=w.name||"",this.relation=(0,e.getStringOption)(w.relation,["orderedOccurrence","duplexPaginated","simplexPaginated"]),this.relevant=(0,e.getRelevant)(w.relevant),this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null,this.occur=null,this.pageArea=new t.XFAObjectArray,this.pageSet=new t.XFAObjectArray}[t.$cleanPage](){for(const w of this.pageArea.children)w[t.$cleanPage]();for(const w of this.pageSet.children)w[t.$cleanPage]()}[t.$isUsable](){return!this.occur||this.occur.max===-1||this[t.$extra].numberOfUse<this.occur.max}[t.$getNextPage](){if(this[t.$extra]||(this[t.$extra]={numberOfUse:1,pageIndex:-1,pageSetIndex:-1}),this.relation==="orderedOccurrence"){if(this[t.$extra].pageIndex+1<this.pageArea.children.length)return this[t.$extra].pageIndex+=1,this.pageArea.children[this[t.$extra].pageIndex][t.$getNextPage]();if(this[t.$extra].pageSetIndex+1<this.pageSet.children.length)return this[t.$extra].pageSetIndex+=1,this.pageSet.children[this[t.$extra].pageSetIndex][t.$getNextPage]();if(this[t.$isUsable]())return this[t.$extra].numberOfUse+=1,this[t.$extra].pageIndex=-1,this[t.$extra].pageSetIndex=-1,this[t.$getNextPage]();const qe=this[t.$getParent]();return qe instanceof et?qe[t.$getNextPage]():(this[t.$cleanPage](),this[t.$getNextPage]())}const w=this[t.$getTemplateRoot]()[t.$extra].pageNumber,ie=w%2===0?"even":"odd",ke=w===0?"first":"rest";let Le=this.pageArea.children.find(qe=>qe.oddOrEven===ie&&qe.pagePosition===ke);return Le||(Le=this.pageArea.children.find(qe=>qe.oddOrEven==="any"&&qe.pagePosition===ke),Le)||(Le=this.pageArea.children.find(qe=>qe.oddOrEven==="any"&&qe.pagePosition==="any"),Le)?Le:this.pageArea.children[0]}}class xt extends t.XFAObject{constructor(w){super(u,"para",!0),this.hAlign=(0,e.getStringOption)(w.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=w.id||"",this.lineHeight=w.lineHeight?(0,e.getMeasurement)(w.lineHeight,"0pt"):"",this.marginLeft=w.marginLeft?(0,e.getMeasurement)(w.marginLeft,"0pt"):"",this.marginRight=w.marginRight?(0,e.getMeasurement)(w.marginRight,"0pt"):"",this.orphans=(0,e.getInteger)({data:w.orphans,defaultValue:0,validate:ie=>ie>=0}),this.preserve=w.preserve||"",this.radixOffset=w.radixOffset?(0,e.getMeasurement)(w.radixOffset,"0pt"):"",this.spaceAbove=w.spaceAbove?(0,e.getMeasurement)(w.spaceAbove,"0pt"):"",this.spaceBelow=w.spaceBelow?(0,e.getMeasurement)(w.spaceBelow,"0pt"):"",this.tabDefault=w.tabDefault?(0,e.getMeasurement)(this.tabDefault):"",this.tabStops=(w.tabStops||"").trim().split(/\s+/).map((ie,ke)=>ke%2===1?(0,e.getMeasurement)(ie):ie),this.textIndent=w.textIndent?(0,e.getMeasurement)(w.textIndent,"0pt"):"",this.use=w.use||"",this.usehref=w.usehref||"",this.vAlign=(0,e.getStringOption)(w.vAlign,["top","bottom","middle"]),this.widows=(0,e.getInteger)({data:w.widows,defaultValue:0,validate:ie=>ie>=0}),this.hyphenation=null}[t.$toStyle](){const w=(0,s.toStyle)(this,"hAlign");return this.marginLeft!==""&&(w.paddingLeft=(0,s.measureToString)(this.marginLeft)),this.marginRight!==""&&(w.paddingight=(0,s.measureToString)(this.marginRight)),this.spaceAbove!==""&&(w.paddingTop=(0,s.measureToString)(this.spaceAbove)),this.spaceBelow!==""&&(w.paddingBottom=(0,s.measureToString)(this.spaceBelow)),this.textIndent!==""&&(w.textIndent=(0,s.measureToString)(this.textIndent),(0,s.fixTextIndent)(w)),this.lineHeight>0&&(w.lineHeight=(0,s.measureToString)(this.lineHeight)),this.tabDefault!==""&&(w.tabSize=(0,s.measureToString)(this.tabDefault)),this.tabStops.length>0,this.hyphenatation&&Object.assign(w,this.hyphenatation[t.$toStyle]()),w}}class Et extends t.XFAObject{constructor(w){super(u,"passwordEdit",!0),this.hScrollPolicy=(0,e.getStringOption)(w.hScrollPolicy,["auto","off","on"]),this.id=w.id||"",this.passwordChar=w.passwordChar||"*",this.use=w.use||"",this.usehref=w.usehref||"",this.border=null,this.extras=null,this.margin=null}}class yt extends t.XFAObject{constructor(w){super(u,"pattern",!0),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["crossHatch","crossDiagonal","diagonalLeft","diagonalRight","horizontal","vertical"]),this.use=w.use||"",this.usehref=w.usehref||"",this.color=null,this.extras=null}[t.$toStyle](w){w=w?w[t.$toStyle]():"#FFFFFF";const ie=this.color?this.color[t.$toStyle]():"#000000",ke=5,Le="repeating-linear-gradient",qe=`${w},${w} ${ke}px,${ie} ${ke}px,${ie} ${2*ke}px`;switch(this.type){case"crossHatch":return`${Le}(to top,${qe}) ${Le}(to right,${qe})`;case"crossDiagonal":return`${Le}(45deg,${qe}) ${Le}(-45deg,${qe})`;case"diagonalLeft":return`${Le}(45deg,${qe})`;case"diagonalRight":return`${Le}(-45deg,${qe})`;case"horizontal":return`${Le}(to top,${qe})`;case"vertical":return`${Le}(to right,${qe})`}return""}}class wt extends t.StringObject{constructor(w){super(u,"picture"),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||""}}class Pt extends t.XFAObject{constructor(w){super(u,"proto",!0),this.appearanceFilter=new t.XFAObjectArray,this.arc=new t.XFAObjectArray,this.area=new t.XFAObjectArray,this.assist=new t.XFAObjectArray,this.barcode=new t.XFAObjectArray,this.bindItems=new t.XFAObjectArray,this.bookend=new t.XFAObjectArray,this.boolean=new t.XFAObjectArray,this.border=new t.XFAObjectArray,this.break=new t.XFAObjectArray,this.breakAfter=new t.XFAObjectArray,this.breakBefore=new t.XFAObjectArray,this.button=new t.XFAObjectArray,this.calculate=new t.XFAObjectArray,this.caption=new t.XFAObjectArray,this.certificate=new t.XFAObjectArray,this.certificates=new t.XFAObjectArray,this.checkButton=new t.XFAObjectArray,this.choiceList=new t.XFAObjectArray,this.color=new t.XFAObjectArray,this.comb=new t.XFAObjectArray,this.connect=new t.XFAObjectArray,this.contentArea=new t.XFAObjectArray,this.corner=new t.XFAObjectArray,this.date=new t.XFAObjectArray,this.dateTime=new t.XFAObjectArray,this.dateTimeEdit=new t.XFAObjectArray,this.decimal=new t.XFAObjectArray,this.defaultUi=new t.XFAObjectArray,this.desc=new t.XFAObjectArray,this.digestMethod=new t.XFAObjectArray,this.digestMethods=new t.XFAObjectArray,this.draw=new t.XFAObjectArray,this.edge=new t.XFAObjectArray,this.encoding=new t.XFAObjectArray,this.encodings=new t.XFAObjectArray,this.encrypt=new t.XFAObjectArray,this.encryptData=new t.XFAObjectArray,this.encryption=new t.XFAObjectArray,this.encryptionMethod=new t.XFAObjectArray,this.encryptionMethods=new t.XFAObjectArray,this.event=new t.XFAObjectArray,this.exData=new t.XFAObjectArray,this.exObject=new t.XFAObjectArray,this.exclGroup=new t.XFAObjectArray,this.execute=new t.XFAObjectArray,this.extras=new t.XFAObjectArray,this.field=new t.XFAObjectArray,this.fill=new t.XFAObjectArray,this.filter=new t.XFAObjectArray,this.float=new t.XFAObjectArray,this.font=new t.XFAObjectArray,this.format=new t.XFAObjectArray,this.handler=new t.XFAObjectArray,this.hyphenation=new t.XFAObjectArray,this.image=new t.XFAObjectArray,this.imageEdit=new t.XFAObjectArray,this.integer=new t.XFAObjectArray,this.issuers=new t.XFAObjectArray,this.items=new t.XFAObjectArray,this.keep=new t.XFAObjectArray,this.keyUsage=new t.XFAObjectArray,this.line=new t.XFAObjectArray,this.linear=new t.XFAObjectArray,this.lockDocument=new t.XFAObjectArray,this.manifest=new t.XFAObjectArray,this.margin=new t.XFAObjectArray,this.mdp=new t.XFAObjectArray,this.medium=new t.XFAObjectArray,this.message=new t.XFAObjectArray,this.numericEdit=new t.XFAObjectArray,this.occur=new t.XFAObjectArray,this.oid=new t.XFAObjectArray,this.oids=new t.XFAObjectArray,this.overflow=new t.XFAObjectArray,this.pageArea=new t.XFAObjectArray,this.pageSet=new t.XFAObjectArray,this.para=new t.XFAObjectArray,this.passwordEdit=new t.XFAObjectArray,this.pattern=new t.XFAObjectArray,this.picture=new t.XFAObjectArray,this.radial=new t.XFAObjectArray,this.reason=new t.XFAObjectArray,this.reasons=new t.XFAObjectArray,this.rectangle=new t.XFAObjectArray,this.ref=new t.XFAObjectArray,this.script=new t.XFAObjectArray,this.setProperty=new t.XFAObjectArray,this.signData=new t.XFAObjectArray,this.signature=new t.XFAObjectArray,this.signing=new t.XFAObjectArray,this.solid=new t.XFAObjectArray,this.speak=new t.XFAObjectArray,this.stipple=new t.XFAObjectArray,this.subform=new t.XFAObjectArray,this.subformSet=new t.XFAObjectArray,this.subjectDN=new t.XFAObjectArray,this.subjectDNs=new t.XFAObjectArray,this.submit=new t.XFAObjectArray,this.text=new t.XFAObjectArray,this.textEdit=new t.XFAObjectArray,this.time=new t.XFAObjectArray,this.timeStamp=new t.XFAObjectArray,this.toolTip=new t.XFAObjectArray,this.traversal=new t.XFAObjectArray,this.traverse=new t.XFAObjectArray,this.ui=new t.XFAObjectArray,this.validate=new t.XFAObjectArray,this.value=new t.XFAObjectArray,this.variables=new t.XFAObjectArray}}class Bt extends t.XFAObject{constructor(w){super(u,"radial",!0),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["toEdge","toCenter"]),this.use=w.use||"",this.usehref=w.usehref||"",this.color=null,this.extras=null}[t.$toStyle](w){w=w?w[t.$toStyle]():"#FFFFFF";const ie=this.color?this.color[t.$toStyle]():"#000000";return`radial-gradient(circle at center, ${this.type==="toEdge"?`${w},${ie}`:`${ie},${w}`})`}}class Ht extends t.StringObject{constructor(w){super(u,"reason"),this.id=w.id||"",this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||""}}class pi extends t.XFAObject{constructor(w){super(u,"reasons",!0),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["optional","required"]),this.use=w.use||"",this.usehref=w.usehref||"",this.reason=new t.XFAObjectArray}}class ri extends t.XFAObject{constructor(w){super(u,"rectangle",!0),this.hand=(0,e.getStringOption)(w.hand,["even","left","right"]),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||"",this.corner=new t.XFAObjectArray(4),this.edge=new t.XFAObjectArray(4),this.fill=null}[t.$toHTML](){const w=this.edge.children.length?this.edge.children[0]:new ye({}),ie=w[t.$toStyle](),ke=Object.create(null);this.fill&&this.fill.presence==="visible"?Object.assign(ke,this.fill[t.$toStyle]()):ke.fill="transparent",ke.strokeWidth=(0,s.measureToString)(w.presence==="visible"?w.thickness:0),ke.stroke=ie.color;const qe=(this.corner.children.length?this.corner.children[0]:new ae({}))[t.$toStyle](),dt={name:"svg",children:[{name:"rect",attributes:{xmlns:d,width:"100%",height:"100%",x:0,y:0,rx:qe.radius,ry:qe.radius,style:ke}}],attributes:{xmlns:d,style:{overflow:"visible"},width:"100%",height:"100%"}},mt=this[t.$getParent]()[t.$getParent]();return _(mt)?e.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[dt]}):(dt.attributes.style.position="absolute",e.HTMLResult.success(dt))}}class mi extends t.StringObject{constructor(w){super(u,"ref"),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||""}}class xi extends t.StringObject{constructor(w){super(u,"script"),this.binding=w.binding||"",this.contentType=w.contentType||"",this.id=w.id||"",this.name=w.name||"",this.runAt=(0,e.getStringOption)(w.runAt,["client","both","server"]),this.use=w.use||"",this.usehref=w.usehref||""}}class ai extends t.XFAObject{constructor(w){super(u,"setProperty"),this.connection=w.connection||"",this.ref=w.ref||"",this.target=w.target||""}}f.SetProperty=ai;class bi extends t.XFAObject{constructor(w){super(u,"signData",!0),this.id=w.id||"",this.operation=(0,e.getStringOption)(w.operation,["sign","clear","verify"]),this.ref=w.ref||"",this.target=w.target||"",this.use=w.use||"",this.usehref=w.usehref||"",this.filter=null,this.manifest=null}}class yi extends t.XFAObject{constructor(w){super(u,"signature",!0),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["PDF1.3","PDF1.6"]),this.use=w.use||"",this.usehref=w.usehref||"",this.border=null,this.extras=null,this.filter=null,this.manifest=null,this.margin=null}}class vi extends t.XFAObject{constructor(w){super(u,"signing",!0),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["optional","required"]),this.use=w.use||"",this.usehref=w.usehref||"",this.certificate=new t.XFAObjectArray}}class Si extends t.XFAObject{constructor(w){super(u,"solid",!0),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null}[t.$toStyle](w){return w?w[t.$toStyle]():"#FFFFFF"}}class wi extends t.StringObject{constructor(w){super(u,"speak"),this.disable=(0,e.getInteger)({data:w.disable,defaultValue:0,validate:ie=>ie===1}),this.id=w.id||"",this.priority=(0,e.getStringOption)(w.priority,["custom","caption","name","toolTip"]),this.rid=w.rid||"",this.use=w.use||"",this.usehref=w.usehref||""}}class Ci extends t.XFAObject{constructor(w){super(u,"stipple",!0),this.id=w.id||"",this.rate=(0,e.getInteger)({data:w.rate,defaultValue:50,validate:ie=>ie>=0&&ie<=100}),this.use=w.use||"",this.usehref=w.usehref||"",this.color=null,this.extras=null}[t.$toStyle](w){const ie=this.rate/100;return a.Util.makeHexColor(Math.round(w.value.r*(1-ie)+this.value.r*ie),Math.round(w.value.g*(1-ie)+this.value.g*ie),Math.round(w.value.b*(1-ie)+this.value.b*ie))}}class si extends t.XFAObject{constructor(w){super(u,"subform",!0),this.access=(0,e.getStringOption)(w.access,["open","nonInteractive","protected","readOnly"]),this.allowMacro=(0,e.getInteger)({data:w.allowMacro,defaultValue:0,validate:ie=>ie===1}),this.anchorType=(0,e.getStringOption)(w.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,e.getInteger)({data:w.colSpan,defaultValue:1,validate:ie=>ie>=1||ie===-1}),this.columnWidths=(w.columnWidths||"").trim().split(/\s+/).map(ie=>ie==="-1"?-1:(0,e.getMeasurement)(ie)),this.h=w.h?(0,e.getMeasurement)(w.h):"",this.hAlign=(0,e.getStringOption)(w.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=w.id||"",this.layout=(0,e.getStringOption)(w.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]),this.locale=w.locale||"",this.maxH=(0,e.getMeasurement)(w.maxH,"0pt"),this.maxW=(0,e.getMeasurement)(w.maxW,"0pt"),this.mergeMode=(0,e.getStringOption)(w.mergeMode,["consumeData","matchTemplate"]),this.minH=(0,e.getMeasurement)(w.minH,"0pt"),this.minW=(0,e.getMeasurement)(w.minW,"0pt"),this.name=w.name||"",this.presence=(0,e.getStringOption)(w.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,e.getRelevant)(w.relevant),this.restoreState=(0,e.getStringOption)(w.restoreState,["manual","auto"]),this.scope=(0,e.getStringOption)(w.scope,["name","none"]),this.use=w.use||"",this.usehref=w.usehref||"",this.w=w.w?(0,e.getMeasurement)(w.w):"",this.x=(0,e.getMeasurement)(w.x,"0pt"),this.y=(0,e.getMeasurement)(w.y,"0pt"),this.assist=null,this.bind=null,this.bookend=null,this.border=null,this.break=null,this.calculate=null,this.desc=null,this.extras=null,this.keep=null,this.margin=null,this.occur=null,this.overflow=null,this.pageSet=null,this.para=null,this.traversal=null,this.validate=null,this.variables=null,this.area=new t.XFAObjectArray,this.breakAfter=new t.XFAObjectArray,this.breakBefore=new t.XFAObjectArray,this.connect=new t.XFAObjectArray,this.draw=new t.XFAObjectArray,this.event=new t.XFAObjectArray,this.exObject=new t.XFAObjectArray,this.exclGroup=new t.XFAObjectArray,this.field=new t.XFAObjectArray,this.proto=new t.XFAObjectArray,this.setProperty=new t.XFAObjectArray,this.subform=new t.XFAObjectArray,this.subformSet=new t.XFAObjectArray}[t.$getSubformParent](){const w=this[t.$getParent]();return w instanceof Zt?w[t.$getSubformParent]():w}[t.$isBindable](){return!0}[t.$isThereMoreWidth](){return this.layout.endsWith("-tb")&&this[t.$extra].attempt===0&&this[t.$extra].numberInLine>0||this[t.$getParent]()[t.$isThereMoreWidth]()}*[t.$getContainedChildren](){yield*M(this)}[t.$flushHTML](){return(0,c.flushHTML)(this)}[t.$addHTML](w,ie){(0,c.addHTML)(this,w,ie)}[t.$getAvailableSpace](){return(0,c.getAvailableSpace)(this)}[t.$isSplittable](){const w=this[t.$getSubformParent]();return w[t.$isSplittable]()?this[t.$extra]._isSplittable!==void 0?this[t.$extra]._isSplittable:this.layout==="position"||this.layout.includes("row")?(this[t.$extra]._isSplittable=!1,!1):this.keep&&this.keep.intact!=="none"?(this[t.$extra]._isSplittable=!1,!1):w.layout&&w.layout.endsWith("-tb")&&w[t.$extra].numberInLine!==0?!1:(this[t.$extra]._isSplittable=!0,!0):!1}[t.$toHTML](w){if(O(this),this.break){if(this.break.after!=="auto"||this.break.afterTarget!==""){const kt=new $({targetType:this.break.after,target:this.break.afterTarget,startNew:this.break.startNew.toString()});kt[t.$globalData]=this[t.$globalData],this[t.$appendChild](kt),this.breakAfter.push(kt)}if(this.break.before!=="auto"||this.break.beforeTarget!==""){const kt=new W({targetType:this.break.before,target:this.break.beforeTarget,startNew:this.break.startNew.toString()});kt[t.$globalData]=this[t.$globalData],this[t.$appendChild](kt),this.breakBefore.push(kt)}if(this.break.overflowTarget!==""){const kt=new $e({target:this.break.overflowTarget,leader:this.break.overflowLeader,trailer:this.break.overflowTrailer});kt[t.$globalData]=this[t.$globalData],this[t.$appendChild](kt),this.overflow.push(kt)}this[t.$removeChild](this.break),this.break=null}if(this.presence==="hidden"||this.presence==="inactive")return e.HTMLResult.EMPTY;if((this.breakBefore.children.length>1||this.breakAfter.children.length>1)&&(0,a.warn)("XFA - Several breakBefore or breakAfter in subforms: please file a bug."),this.breakBefore.children.length>=1){const kt=this.breakBefore.children[0];if(E(kt))return e.HTMLResult.breakNode(kt)}if(this[t.$extra]&&this[t.$extra].afterBreakAfter)return e.HTMLResult.EMPTY;(0,s.fixDimensions)(this);const ie=[],ke={id:this[t.$uid],class:[]};(0,s.setAccess)(this,ke.class),this[t.$extra]||(this[t.$extra]=Object.create(null)),Object.assign(this[t.$extra],{children:ie,line:null,attributes:ke,attempt:0,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,w.width),height:Math.min(this.h||1/0,w.height)},width:0,height:0,prevHeight:0,currentWidth:0});const Le=this[t.$getTemplateRoot](),qe=Le[t.$extra].noLayoutFailure,pt=this[t.$isSplittable]();if(pt||p(this),!(0,c.checkDimensions)(this,w))return e.HTMLResult.FAILURE;const dt=new Set(["area","draw","exclGroup","field","subform","subformSet"]);if(this.layout.includes("row")){const kt=this[t.$getSubformParent]().columnWidths;Array.isArray(kt)&&kt.length>0&&(this[t.$extra].columnWidths=kt,this[t.$extra].currentColumn=0)}const mt=(0,s.toStyle)(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),Ct=["xfaSubform"],Tt=(0,s.layoutClass)(this);if(Tt&&Ct.push(Tt),ke.style=mt,ke.class=Ct,this.name&&(ke.xfaName=this.name),this.overflow){const kt=this.overflow[t.$getExtra]();kt.addLeader&&(kt.addLeader=!1,S(this,kt.leader,w))}this[t.$pushPara]();const Mt=this.layout==="lr-tb"||this.layout==="rl-tb",It=Mt?i:1;for(;this[t.$extra].attempt<It;this[t.$extra].attempt++){Mt&&this[t.$extra].attempt===i-1&&(this[t.$extra].numberInLine=0);const kt=this[t.$childrenToHTML]({filter:dt,include:!0});if(kt.success)break;if(kt.isBreak())return this[t.$popPara](),kt;if(Mt&&this[t.$extra].attempt===0&&this[t.$extra].numberInLine===0&&!Le[t.$extra].noLayoutFailure){this[t.$extra].attempt=It;break}}if(this[t.$popPara](),pt||P(this),Le[t.$extra].noLayoutFailure=qe,this[t.$extra].attempt===It)return this.overflow&&(this[t.$getTemplateRoot]()[t.$extra].overflowNode=this.overflow),pt||delete this[t.$extra],e.HTMLResult.FAILURE;if(this.overflow){const kt=this.overflow[t.$getExtra]();kt.addTrailer&&(kt.addTrailer=!1,S(this,kt.trailer,w))}let Lt=0,Rt=0;this.margin&&(Lt=this.margin.leftInset+this.margin.rightInset,Rt=this.margin.topInset+this.margin.bottomInset);const At=Math.max(this[t.$extra].width+Lt,this.w||0),jt=Math.max(this[t.$extra].height+Rt,this.h||0),Ft=[this.x,this.y,At,jt];if(this.w===""&&(mt.width=(0,s.measureToString)(At)),this.h===""&&(mt.height=(0,s.measureToString)(jt)),(mt.width==="0px"||mt.height==="0px")&&ie.length===0)return e.HTMLResult.EMPTY;const _t={name:"div",attributes:ke,children:ie};T(this,ke);const $t=e.HTMLResult.success((0,s.createWrapper)(this,_t),Ft);if(this.breakAfter.children.length>=1){const kt=this.breakAfter.children[0];if(E(kt))return this[t.$extra].afterBreakAfter=$t,e.HTMLResult.breakNode(kt)}return delete this[t.$extra],$t}}class Zt extends t.XFAObject{constructor(w){super(u,"subformSet",!0),this.id=w.id||"",this.name=w.name||"",this.relation=(0,e.getStringOption)(w.relation,["ordered","choice","unordered"]),this.relevant=(0,e.getRelevant)(w.relevant),this.use=w.use||"",this.usehref=w.usehref||"",this.bookend=null,this.break=null,this.desc=null,this.extras=null,this.occur=null,this.overflow=null,this.breakAfter=new t.XFAObjectArray,this.breakBefore=new t.XFAObjectArray,this.subform=new t.XFAObjectArray,this.subformSet=new t.XFAObjectArray}*[t.$getContainedChildren](){yield*M(this)}[t.$getSubformParent](){let w=this[t.$getParent]();for(;!(w instanceof si);)w=w[t.$getParent]();return w}[t.$isBindable](){return!0}}class Ai extends t.ContentObject{constructor(w){super(u,"subjectDN"),this.delimiter=w.delimiter||",",this.id=w.id||"",this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||""}[t.$finalize](){this[t.$content]=new Map(this[t.$content].split(this.delimiter).map(w=>(w=w.split("=",2),w[0]=w[0].trim(),w)))}}class Fi extends t.XFAObject{constructor(w){super(u,"subjectDNs",!0),this.id=w.id||"",this.type=(0,e.getStringOption)(w.type,["optional","required"]),this.use=w.use||"",this.usehref=w.usehref||"",this.subjectDN=new t.XFAObjectArray}}class ki extends t.XFAObject{constructor(w){super(u,"submit",!0),this.embedPDF=(0,e.getInteger)({data:w.embedPDF,defaultValue:0,validate:ie=>ie===1}),this.format=(0,e.getStringOption)(w.format,["xdp","formdata","pdf","urlencoded","xfd","xml"]),this.id=w.id||"",this.target=w.target||"",this.textEncoding=(0,e.getKeyword)({data:w.textEncoding?w.textEncoding.toLowerCase():"",defaultValue:"",validate:ie=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(ie)||ie.match(/iso-8859-\d{2}/)}),this.use=w.use||"",this.usehref=w.usehref||"",this.xdpContent=w.xdpContent||"",this.encrypt=null,this.encryptData=new t.XFAObjectArray,this.signData=new t.XFAObjectArray}}class Qt extends t.XFAObject{constructor(w){super(u,"template",!0),this.baseProfile=(0,e.getStringOption)(w.baseProfile,["full","interactiveForms"]),this.extras=null,this.subform=new t.XFAObjectArray}[t.$finalize](){this.subform.children.length===0&&(0,a.warn)("XFA - No subforms in template node."),this.subform.children.length>=2&&(0,a.warn)("XFA - Several subforms in template node: please file a bug."),this[t.$tabIndex]=x}[t.$isSplittable](){return!0}[t.$searchNode](w,ie){return w.startsWith("#")?[this[t.$ids].get(w.slice(1))]:(0,l.searchNode)(this,ie,w,!0,!0)}*[t.$toPages](){if(!this.subform.children.length)return e.HTMLResult.success({name:"div",children:[]});this[t.$extra]={overflowNode:null,firstUnsplittable:null,currentContentArea:null,currentPageArea:null,noLayoutFailure:!1,pageNumber:1,pagePosition:"first",oddOrEven:"odd",blankOrNotBlank:"nonBlank",paraStack:[]};const w=this.subform.children[0];w.pageSet[t.$cleanPage]();const ie=w.pageSet.pageArea.children,ke={name:"div",children:[]};let Le=null,qe=null,pt=null;if(w.breakBefore.children.length>=1?(qe=w.breakBefore.children[0],pt=qe.target):w.subform.children.length>=1&&w.subform.children[0].breakBefore.children.length>=1?(qe=w.subform.children[0].breakBefore.children[0],pt=qe.target):w.break&&w.break.beforeTarget?(qe=w.break,pt=qe.beforeTarget):w.subform.children.length>=1&&w.subform.children[0].break&&w.subform.children[0].break.beforeTarget&&(qe=w.subform.children[0].break,pt=qe.beforeTarget),qe){const Rt=this[t.$searchNode](pt,qe[t.$getParent]());Rt instanceof je&&(Le=Rt,qe[t.$extra]={})}Le||(Le=ie[0]),Le[t.$extra]={numberOfUse:1};const dt=Le[t.$getParent]();dt[t.$extra]={numberOfUse:1,pageIndex:dt.pageArea.children.indexOf(Le),pageSetIndex:0};let mt,Ct=null,Tt=null,Mt=!0,It=0,Lt=0;for(;;){if(Mt)It=0;else if(ke.children.pop(),++It===g)return(0,a.warn)("XFA - Something goes wrong: please file a bug."),ke;mt=null,this[t.$extra].currentPageArea=Le;const Rt=Le[t.$toHTML]().html;ke.children.push(Rt),Ct&&(this[t.$extra].noLayoutFailure=!0,Rt.children.push(Ct[t.$toHTML](Le[t.$extra].space).html),Ct=null),Tt&&(this[t.$extra].noLayoutFailure=!0,Rt.children.push(Tt[t.$toHTML](Le[t.$extra].space).html),Tt=null);const At=Le.contentArea.children,jt=Rt.children.filter(_t=>_t.attributes.class.includes("xfaContentarea"));Mt=!1,this[t.$extra].firstUnsplittable=null,this[t.$extra].noLayoutFailure=!1;const Ft=_t=>{const $t=w[t.$flushHTML]();$t&&(Mt=Mt||$t.children&&$t.children.length!==0,jt[_t].children.push($t))};for(let _t=Lt,$t=At.length;_t<$t;_t++){const kt=this[t.$extra].currentContentArea=At[_t],Gt={width:kt.w,height:kt.h};Lt=0,Ct&&(jt[_t].children.push(Ct[t.$toHTML](Gt).html),Ct=null),Tt&&(jt[_t].children.push(Tt[t.$toHTML](Gt).html),Tt=null);const zt=w[t.$toHTML](Gt);if(zt.success)return zt.html?(Mt=Mt||zt.html.children&&zt.html.children.length!==0,jt[_t].children.push(zt.html)):!Mt&&ke.children.length>1&&ke.children.pop(),ke;if(zt.isBreak()){const Ut=zt.breakNode;if(Ft(_t),Ut.targetType==="auto")continue;Ut.leader&&(Ct=this[t.$searchNode](Ut.leader,Ut[t.$getParent]()),Ct=Ct?Ct[0]:null),Ut.trailer&&(Tt=this[t.$searchNode](Ut.trailer,Ut[t.$getParent]()),Tt=Tt?Tt[0]:null),Ut.targetType==="pageArea"?(mt=Ut[t.$extra].target,_t=1/0):Ut[t.$extra].target?(mt=Ut[t.$extra].target,Lt=Ut[t.$extra].index+1,_t=1/0):_t=Ut[t.$extra].index;continue}if(this[t.$extra].overflowNode){const Ut=this[t.$extra].overflowNode;this[t.$extra].overflowNode=null;const ti=Ut[t.$getExtra](),Yt=ti.target;ti.addLeader=ti.leader!==null,ti.addTrailer=ti.trailer!==null,Ft(_t);const vn=_t;if(_t=1/0,Yt instanceof je)mt=Yt;else if(Yt instanceof re){const li=At.indexOf(Yt);li!==-1?li>vn?_t=li-1:Lt=li:(mt=Yt[t.$getParent](),Lt=mt.contentArea.children.indexOf(Yt))}continue}Ft(_t)}this[t.$extra].pageNumber+=1,mt&&(mt[t.$isUsable]()?mt[t.$extra].numberOfUse+=1:mt=null),Le=mt||Le[t.$getNextPage](),yield null}}}f.Template=Qt;class oi extends t.ContentObject{constructor(w){super(u,"text"),this.id=w.id||"",this.maxChars=(0,e.getInteger)({data:w.maxChars,defaultValue:0,validate:ie=>ie>=0}),this.name=w.name||"",this.rid=w.rid||"",this.use=w.use||"",this.usehref=w.usehref||""}[t.$acceptWhitespace](){return!0}[t.$onChild](w){return w[t.$namespaceId]===o.NamespaceIds.xhtml.id?(this[t.$content]=w,!0):((0,a.warn)(`XFA - Invalid content in Text: ${w[t.$nodeName]}.`),!1)}[t.$onText](w){this[t.$content]instanceof t.XFAObject||super[t.$onText](w)}[t.$finalize](){typeof this[t.$content]=="string"&&(this[t.$content]=this[t.$content].replace(/\r\n/g,`
`))}[t.$getExtra](){return typeof this[t.$content]=="string"?this[t.$content].split(/[\u2029\u2028\n]/).reduce((w,ie)=>(ie&&w.push(ie),w),[]).join(`
`):this[t.$content][t.$text]()}[t.$toHTML](w){if(typeof this[t.$content]=="string"){const ie=y(this[t.$content]).html;return this[t.$content].includes("\u2029")?(ie.name="div",ie.children=[],this[t.$content].split("\u2029").map(ke=>ke.split(/[\u2028\n]/).reduce((Le,qe)=>(Le.push({name:"span",value:qe},{name:"br"}),Le),[])).forEach(ke=>{ie.children.push({name:"p",children:ke})})):/[\u2028\n]/.test(this[t.$content])&&(ie.name="div",ie.children=[],this[t.$content].split(/[\u2028\n]/).forEach(ke=>{ie.children.push({name:"span",value:ke},{name:"br"})})),e.HTMLResult.success(ie)}return this[t.$content][t.$toHTML](w)}}f.Text=oi;class ci extends t.XFAObject{constructor(w){super(u,"textEdit",!0),this.allowRichText=(0,e.getInteger)({data:w.allowRichText,defaultValue:0,validate:ie=>ie===1}),this.hScrollPolicy=(0,e.getStringOption)(w.hScrollPolicy,["auto","off","on"]),this.id=w.id||"",this.multiLine=(0,e.getInteger)({data:w.multiLine,defaultValue:"",validate:ie=>ie===0||ie===1}),this.use=w.use||"",this.usehref=w.usehref||"",this.vScrollPolicy=(0,e.getStringOption)(w.vScrollPolicy,["auto","off","on"]),this.border=null,this.comb=null,this.extras=null,this.margin=null}[t.$toHTML](w){const ie=(0,s.toStyle)(this,"border","font","margin");let ke;const Le=this[t.$getParent]()[t.$getParent]();return this.multiLine===""&&(this.multiLine=Le instanceof ue?1:0),this.multiLine===1?ke={name:"textarea",attributes:{dataId:Le[t.$data]&&Le[t.$data][t.$uid]||Le[t.$uid],fieldId:Le[t.$uid],class:["xfaTextfield"],style:ie,"aria-label":R(Le),"aria-required":!1}}:ke={name:"input",attributes:{type:"text",dataId:Le[t.$data]&&Le[t.$data][t.$uid]||Le[t.$uid],fieldId:Le[t.$uid],class:["xfaTextfield"],style:ie,"aria-label":R(Le),"aria-required":!1}},j(Le)&&(ke.attributes["aria-required"]=!0,ke.attributes.required=!0),e.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[ke]})}}class Ti extends t.StringObject{constructor(w){super(u,"time"),this.id=w.id||"",this.name=w.name||"",this.use=w.use||"",this.usehref=w.usehref||""}[t.$finalize](){const w=this[t.$content].trim();this[t.$content]=w?new Date(w):null}[t.$toHTML](w){return y(this[t.$content]?this[t.$content].toString():"")}}class _i extends t.XFAObject{constructor(w){super(u,"timeStamp"),this.id=w.id||"",this.server=w.server||"",this.type=(0,e.getStringOption)(w.type,["optional","required"]),this.use=w.use||"",this.usehref=w.usehref||""}}class Ei extends t.StringObject{constructor(w){super(u,"toolTip"),this.id=w.id||"",this.rid=w.rid||"",this.use=w.use||"",this.usehref=w.usehref||""}}class Oi extends t.XFAObject{constructor(w){super(u,"traversal",!0),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null,this.traverse=new t.XFAObjectArray}}class Pi extends t.XFAObject{constructor(w){super(u,"traverse",!0),this.id=w.id||"",this.operation=(0,e.getStringOption)(w.operation,["next","back","down","first","left","right","up"]),this.ref=w.ref||"",this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null,this.script=null}get name(){return this.operation}[t.$isTransparent](){return!1}}class ei extends t.XFAObject{constructor(w){super(u,"ui",!0),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null,this.picture=null,this.barcode=null,this.button=null,this.checkButton=null,this.choiceList=null,this.dateTimeEdit=null,this.defaultUi=null,this.imageEdit=null,this.numericEdit=null,this.passwordEdit=null,this.signature=null,this.textEdit=null}[t.$getExtra](){if(this[t.$extra]===void 0){for(const w of Object.getOwnPropertyNames(this)){if(w==="extras"||w==="picture")continue;const ie=this[w];if(ie instanceof t.XFAObject)return this[t.$extra]=ie,ie}this[t.$extra]=null}return this[t.$extra]}[t.$toHTML](w){const ie=this[t.$getExtra]();return ie?ie[t.$toHTML](w):e.HTMLResult.EMPTY}}class Di extends t.XFAObject{constructor(w){super(u,"validate",!0),this.formatTest=(0,e.getStringOption)(w.formatTest,["warning","disabled","error"]),this.id=w.id||"",this.nullTest=(0,e.getStringOption)(w.nullTest,["disabled","error","warning"]),this.scriptTest=(0,e.getStringOption)(w.scriptTest,["error","disabled","warning"]),this.use=w.use||"",this.usehref=w.usehref||"",this.extras=null,this.message=null,this.picture=null,this.script=null}}class Vt extends t.XFAObject{constructor(w){super(u,"value",!0),this.id=w.id||"",this.override=(0,e.getInteger)({data:w.override,defaultValue:0,validate:ie=>ie===1}),this.relevant=(0,e.getRelevant)(w.relevant),this.use=w.use||"",this.usehref=w.usehref||"",this.arc=null,this.boolean=null,this.date=null,this.dateTime=null,this.decimal=null,this.exData=null,this.float=null,this.image=null,this.integer=null,this.line=null,this.rectangle=null,this.text=null,this.time=null}[t.$setValue](w){const ie=this[t.$getParent]();if(ie instanceof Ne&&ie.ui&&ie.ui.imageEdit){this.image||(this.image=new ht({}),this[t.$appendChild](this.image)),this.image[t.$content]=w[t.$content];return}const ke=w[t.$nodeName];if(this[ke]!==null){this[ke][t.$content]=w[t.$content];return}for(const Le of Object.getOwnPropertyNames(this)){const qe=this[Le];qe instanceof t.XFAObject&&(this[Le]=null,this[t.$removeChild](qe))}this[w[t.$nodeName]]=w,this[t.$appendChild](w)}[t.$text](){if(this.exData)return typeof this.exData[t.$content]=="string"?this.exData[t.$content].trim():this.exData[t.$content][t.$text]().trim();for(const w of Object.getOwnPropertyNames(this)){if(w==="image")continue;const ie=this[w];if(ie instanceof t.XFAObject)return(ie[t.$content]||"").toString().trim()}return null}[t.$toHTML](w){for(const ie of Object.getOwnPropertyNames(this)){const ke=this[ie];if(ke instanceof t.XFAObject)return ke[t.$toHTML](w)}return e.HTMLResult.EMPTY}}f.Value=Vt;class Ii extends t.XFAObject{constructor(w){super(u,"variables",!0),this.id=w.id||"",this.use=w.use||"",this.usehref=w.usehref||"",this.boolean=new t.XFAObjectArray,this.date=new t.XFAObjectArray,this.dateTime=new t.XFAObjectArray,this.decimal=new t.XFAObjectArray,this.exData=new t.XFAObjectArray,this.float=new t.XFAObjectArray,this.image=new t.XFAObjectArray,this.integer=new t.XFAObjectArray,this.manifest=new t.XFAObjectArray,this.script=new t.XFAObjectArray,this.text=new t.XFAObjectArray,this.time=new t.XFAObjectArray}[t.$isTransparent](){return!0}}class qt{static[o.$buildXFAObject](w,ie){if(qt.hasOwnProperty(w)){const ke=qt[w](ie);return ke[t.$setSetAttributes](ie),ke}}static appearanceFilter(w){return new F(w)}static arc(w){return new C(w)}static area(w){return new b(w)}static assist(w){return new D(w)}static barcode(w){return new U(w)}static bind(w){return new X(w)}static bindItems(w){return new G(w)}static bookend(w){return new Y(w)}static boolean(w){return new N(w)}static border(w){return new I(w)}static break(w){return new L(w)}static breakAfter(w){return new $(w)}static breakBefore(w){return new W(w)}static button(w){return new z(w)}static calculate(w){return new B(w)}static caption(w){return new H(w)}static certificate(w){return new q(w)}static certificates(w){return new Z(w)}static checkButton(w){return new te(w)}static choiceList(w){return new Q(w)}static color(w){return new ee(w)}static comb(w){return new J(w)}static connect(w){return new ne(w)}static contentArea(w){return new re(w)}static corner(w){return new ae(w)}static date(w){return new se(w)}static dateTime(w){return new oe(w)}static dateTimeEdit(w){return new me(w)}static decimal(w){return new xe(w)}static defaultUi(w){return new Ae(w)}static desc(w){return new Se(w)}static digestMethod(w){return new Fe(w)}static digestMethods(w){return new Pe(w)}static draw(w){return new ue(w)}static edge(w){return new ye(w)}static encoding(w){return new le(w)}static encodings(w){return new he(w)}static encrypt(w){return new ce(w)}static encryptData(w){return new Te(w)}static encryption(w){return new Re(w)}static encryptionMethod(w){return new He(w)}static encryptionMethods(w){return new Ce(w)}static event(w){return new ve(w)}static exData(w){return new fe(w)}static exObject(w){return new We(w)}static exclGroup(w){return new Ue(w)}static execute(w){return new ze(w)}static extras(w){return new tt(w)}static field(w){return new Ne(w)}static fill(w){return new Qe(w)}static filter(w){return new ct(w)}static float(w){return new Ee(w)}static font(w){return new rt(w)}static format(w){return new Ze(w)}static handler(w){return new vt(w)}static hyphenation(w){return new lt(w)}static image(w){return new ht(w)}static imageEdit(w){return new ot(w)}static integer(w){return new Dt(w)}static issuers(w){return new Ot(w)}static items(w){return new Xe(w)}static keep(w){return new Ie(w)}static keyUsage(w){return new Ge(w)}static line(w){return new Ve(w)}static linear(w){return new it(w)}static lockDocument(w){return new gt(w)}static manifest(w){return new nt(w)}static margin(w){return new Ke(w)}static mdp(w){return new at(w)}static medium(w){return new ut(w)}static message(w){return new St(w)}static numericEdit(w){return new bt(w)}static occur(w){return new ft(w)}static oid(w){return new we(w)}static oids(w){return new _e(w)}static overflow(w){return new $e(w)}static pageArea(w){return new je(w)}static pageSet(w){return new et(w)}static para(w){return new xt(w)}static passwordEdit(w){return new Et(w)}static pattern(w){return new yt(w)}static picture(w){return new wt(w)}static proto(w){return new Pt(w)}static radial(w){return new Bt(w)}static reason(w){return new Ht(w)}static reasons(w){return new pi(w)}static rectangle(w){return new ri(w)}static ref(w){return new mi(w)}static script(w){return new xi(w)}static setProperty(w){return new ai(w)}static signData(w){return new bi(w)}static signature(w){return new yi(w)}static signing(w){return new vi(w)}static solid(w){return new Si(w)}static speak(w){return new wi(w)}static stipple(w){return new Ci(w)}static subform(w){return new si(w)}static subformSet(w){return new Zt(w)}static subjectDN(w){return new Ai(w)}static subjectDNs(w){return new Fi(w)}static submit(w){return new ki(w)}static template(w){return new Qt(w)}static text(w){return new oi(w)}static textEdit(w){return new ci(w)}static time(w){return new Ti(w)}static timeStamp(w){return new _i(w)}static toolTip(w){return new Ei(w)}static traversal(w){return new Oi(w)}static traverse(w){return new Pi(w)}static ui(w){return new ei(w)}static validate(w){return new Di(w)}static value(w){return new Vt(w)}static variables(w){return new Ii(w)}}f.TemplateNamespace=qt},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.addHTML=e,f.checkDimensions=n,f.flushHTML=s,f.getAvailableSpace=a;var t=h(77),o=h(84);function c(l,u){return{name:"div",attributes:{class:[l.layout==="lr-tb"?"xfaLr":"xfaRl"]},children:u}}function s(l){if(!l[t.$extra])return null;const d={name:"div",attributes:l[t.$extra].attributes,children:l[t.$extra].children};if(l[t.$extra].failingNode){const i=l[t.$extra].failingNode[t.$flushHTML]();i&&(l.layout.endsWith("-tb")?d.children.push(c(l,[i])):d.children.push(i))}return d.children.length===0?null:d}function e(l,u,d){const i=l[t.$extra],g=i.availableSpace,[x,m,A,k]=d;switch(l.layout){case"position":{i.width=Math.max(i.width,x+A),i.height=Math.max(i.height,m+k),i.children.push(u);break}case"lr-tb":case"rl-tb":(!i.line||i.attempt===1)&&(i.line=c(l,[]),i.children.push(i.line),i.numberInLine=0),i.numberInLine+=1,i.line.children.push(u),i.attempt===0?(i.currentWidth+=A,i.height=Math.max(i.height,i.prevHeight+k)):(i.currentWidth=A,i.prevHeight=i.height,i.height+=k,i.attempt=0),i.width=Math.max(i.width,i.currentWidth);break;case"rl-row":case"row":{i.children.push(u),i.width+=A,i.height=Math.max(i.height,k);const v=(0,o.measureToString)(i.height);for(const _ of i.children)_.attributes.style.height=v;break}case"table":{i.width=Math.min(g.width,Math.max(i.width,A)),i.height+=k,i.children.push(u);break}case"tb":{i.width=Math.min(g.width,Math.max(i.width,A)),i.height+=k,i.children.push(u);break}}}function a(l){const u=l[t.$extra].availableSpace,d=l.margin?l.margin.topInset+l.margin.bottomInset:0,i=l.margin?l.margin.leftInset+l.margin.rightInset:0;switch(l.layout){case"lr-tb":case"rl-tb":return l[t.$extra].attempt===0?{width:u.width-i-l[t.$extra].currentWidth,height:u.height-d-l[t.$extra].prevHeight}:{width:u.width-i,height:u.height-d-l[t.$extra].height};case"rl-row":case"row":return{width:l[t.$extra].columnWidths.slice(l[t.$extra].currentColumn).reduce((x,m)=>x+m),height:u.height-i};case"table":case"tb":return{width:u.width-i,height:u.height-d-l[t.$extra].height};case"position":default:return u}}function r(l){let u=l.w===""?NaN:l.w,d=l.h===""?NaN:l.h,[i,g]=[0,0];switch(l.anchorType||""){case"bottomCenter":[i,g]=[u/2,d];break;case"bottomLeft":[i,g]=[0,d];break;case"bottomRight":[i,g]=[u,d];break;case"middleCenter":[i,g]=[u/2,d/2];break;case"middleLeft":[i,g]=[0,d/2];break;case"middleRight":[i,g]=[u,d/2];break;case"topCenter":[i,g]=[u/2,0];break;case"topRight":[i,g]=[u,0];break}let x,m;switch(l.rotate||0){case 0:[x,m]=[-i,-g];break;case 90:[x,m]=[-g,i],[u,d]=[d,-u];break;case 180:[x,m]=[i,g],[u,d]=[-u,-d];break;case 270:[x,m]=[g,-i],[u,d]=[-d,u];break}return[l.x+x+Math.min(0,u),l.y+m+Math.min(0,d),Math.abs(u),Math.abs(d)]}function n(l,u){if(l[t.$getTemplateRoot]()[t.$extra].firstUnsplittable===null||l.w===0||l.h===0)return!0;const d=2,i=l[t.$getSubformParent](),g=i[t.$extra]&&i[t.$extra].attempt||0,[,x,m,A]=r(l);switch(i.layout){case"lr-tb":case"rl-tb":return g===0?l[t.$getTemplateRoot]()[t.$extra].noLayoutFailure?l.w!==""?Math.round(m-u.width)<=d:u.width>d:l.h!==""&&Math.round(A-u.height)>d?!1:l.w!==""?Math.round(m-u.width)<=d?!0:i[t.$extra].numberInLine===0?u.height>d:!1:u.width>d:l[t.$getTemplateRoot]()[t.$extra].noLayoutFailure?!0:l.h!==""&&Math.round(A-u.height)>d?!1:l.w===""||Math.round(m-u.width)<=d?u.height>d:i[t.$isThereMoreWidth]()?!1:u.height>d;case"table":case"tb":return l[t.$getTemplateRoot]()[t.$extra].noLayoutFailure?!0:l.h!==""&&!l[t.$isSplittable]()?Math.round(A-u.height)<=d:l.w===""||Math.round(m-u.width)<=d?u.height>d:i[t.$isThereMoreWidth]()?!1:u.height>d;case"position":if(l[t.$getTemplateRoot]()[t.$extra].noLayoutFailure||l.h===""||Math.round(A+x-u.height)<=d)return!0;const k=l[t.$getTemplateRoot]()[t.$extra].currentContentArea;return A+x>k.h;case"rl-row":case"row":return l[t.$getTemplateRoot]()[t.$extra].noLayoutFailure?!0:l.h!==""?Math.round(A-u.height)<=d:!0;default:return!0}}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.computeBbox=d,f.createWrapper=m,f.fixDimensions=i,f.fixTextIndent=A,f.fixURL=j,f.isPrintOnly=v,f.layoutClass=g,f.layoutNode=u,f.measureToString=a,f.setAccess=k,f.setFontFamily=M,f.setMinMaxDimensions=n,f.setPara=K,f.toStyle=x;var t=h(77),o=h(2),c=h(78),s=h(85),e=h(86);function a(O){return typeof O=="string"?"0px":Number.isInteger(O)?`${O}px`:`${O.toFixed(2)}px`}const r={anchorType(O,T){const R=O[t.$getSubformParent]();if(!(!R||R.layout&&R.layout!=="position"))switch("transform"in T||(T.transform=""),O.anchorType){case"bottomCenter":T.transform+="translate(-50%, -100%)";break;case"bottomLeft":T.transform+="translate(0,-100%)";break;case"bottomRight":T.transform+="translate(-100%,-100%)";break;case"middleCenter":T.transform+="translate(-50%,-50%)";break;case"middleLeft":T.transform+="translate(0,-50%)";break;case"middleRight":T.transform+="translate(-100%,-50%)";break;case"topCenter":T.transform+="translate(-50%,0)";break;case"topRight":T.transform+="translate(-100%,0)";break}},dimensions(O,T){const R=O[t.$getSubformParent]();let y=O.w;const p=O.h;if(R.layout&&R.layout.includes("row")){const P=R[t.$extra],E=O.colSpan;let S;E===-1?(S=P.columnWidths.slice(P.currentColumn).reduce((F,C)=>F+C,0),P.currentColumn=0):(S=P.columnWidths.slice(P.currentColumn,P.currentColumn+E).reduce((F,C)=>F+C,0),P.currentColumn=(P.currentColumn+O.colSpan)%P.columnWidths.length),isNaN(S)||(y=O.w=S)}y!==""?T.width=a(y):T.width="auto",p!==""?T.height=a(p):T.height="auto"},position(O,T){const R=O[t.$getSubformParent]();R&&R.layout&&R.layout!=="position"||(T.position="absolute",T.left=a(O.x),T.top=a(O.y))},rotate(O,T){O.rotate&&("transform"in T||(T.transform=""),T.transform+=`rotate(-${O.rotate}deg)`,T.transformOrigin="top left")},presence(O,T){switch(O.presence){case"invisible":T.visibility="hidden";break;case"hidden":case"inactive":T.display="none";break}},hAlign(O,T){if(O[t.$nodeName]==="para")switch(O.hAlign){case"justifyAll":T.textAlign="justify-all";break;case"radix":T.textAlign="left";break;default:T.textAlign=O.hAlign}else switch(O.hAlign){case"left":T.alignSelf="start";break;case"center":T.alignSelf="center";break;case"right":T.alignSelf="end";break}},margin(O,T){O.margin&&(T.margin=O.margin[t.$toStyle]().margin)}};function n(O,T){O[t.$getSubformParent]().layout==="position"&&(O.minW>0&&(T.minWidth=a(O.minW)),O.maxW>0&&(T.maxWidth=a(O.maxW)),O.minH>0&&(T.minHeight=a(O.minH)),O.maxH>0&&(T.maxHeight=a(O.maxH)))}function l(O,T,R,y,p,P){const E=new e.TextMeasure(T,R,y,p);return typeof O=="string"?E.addString(O):O[t.$pushGlyphs](E),E.compute(P)}function u(O,T){let R=null,y=null,p=!1;if((!O.w||!O.h)&&O.value){let P=0,E=0;O.margin&&(P=O.margin.leftInset+O.margin.rightInset,E=O.margin.topInset+O.margin.bottomInset);let S=null,F=null;O.para&&(F=Object.create(null),S=O.para.lineHeight===""?null:O.para.lineHeight,F.top=O.para.spaceAbove===""?0:O.para.spaceAbove,F.bottom=O.para.spaceBelow===""?0:O.para.spaceBelow,F.left=O.para.marginLeft===""?0:O.para.marginLeft,F.right=O.para.marginRight===""?0:O.para.marginRight);let C=O.font;if(!C){const U=O[t.$getTemplateRoot]();let X=O[t.$getParent]();for(;X&&X!==U;){if(X.font){C=X.font;break}X=X[t.$getParent]()}}const b=(O.w||T.width)-P,D=O[t.$globalData].fontFinder;if(O.value.exData&&O.value.exData[t.$content]&&O.value.exData.contentType==="text/html"){const U=l(O.value.exData[t.$content],C,F,S,D,b);y=U.width,R=U.height,p=U.isBroken}else{const U=O.value[t.$text]();if(U){const X=l(U,C,F,S,D,b);y=X.width,R=X.height,p=X.isBroken}}y!==null&&!O.w&&(y+=P),R!==null&&!O.h&&(R+=E)}return{w:y,h:R,isBroken:p}}function d(O,T,R){let y;if(O.w!==""&&O.h!=="")y=[O.x,O.y,O.w,O.h];else{if(!R)return null;let p=O.w;if(p===""){if(O.maxW===0){const E=O[t.$getSubformParent]();E.layout==="position"&&E.w!==""?p=0:p=O.minW}else p=Math.min(O.maxW,R.width);T.attributes.style.width=a(p)}let P=O.h;if(P===""){if(O.maxH===0){const E=O[t.$getSubformParent]();E.layout==="position"&&E.h!==""?P=0:P=O.minH}else P=Math.min(O.maxH,R.height);T.attributes.style.height=a(P)}y=[O.x,O.y,p,P]}return y}function i(O){const T=O[t.$getSubformParent]();if(T.layout&&T.layout.includes("row")){const R=T[t.$extra],y=O.colSpan;let p;y===-1?p=R.columnWidths.slice(R.currentColumn).reduce((P,E)=>P+E,0):p=R.columnWidths.slice(R.currentColumn,R.currentColumn+y).reduce((P,E)=>P+E,0),isNaN(p)||(O.w=p)}T.layout&&T.layout!=="position"&&(O.x=O.y=0),O.layout==="table"&&O.w===""&&Array.isArray(O.columnWidths)&&(O.w=O.columnWidths.reduce((R,y)=>R+y,0))}function g(O){switch(O.layout){case"position":return"xfaPosition";case"lr-tb":return"xfaLrTb";case"rl-row":return"xfaRlRow";case"rl-tb":return"xfaRlTb";case"row":return"xfaRow";case"table":return"xfaTable";case"tb":return"xfaTb";default:return"xfaPosition"}}function x(O,...T){const R=Object.create(null);for(const y of T){const p=O[y];if(p!==null){if(r.hasOwnProperty(y)){r[y](O,R);continue}if(p instanceof t.XFAObject){const P=p[t.$toStyle]();P?Object.assign(R,P):(0,o.warn)(`(DEBUG) - XFA - style for ${y} not implemented yet`)}}}return R}function m(O,T){const{attributes:R}=T,{style:y}=R,p={name:"div",attributes:{class:["xfaWrapper"],style:Object.create(null)},children:[]};if(R.class.push("xfaWrapped"),O.border){const{widths:P,insets:E}=O.border[t.$extra];let S,F,C=E[0],b=E[3];const D=E[0]+E[2],U=E[1]+E[3];switch(O.border.hand){case"even":C-=P[0]/2,b-=P[3]/2,S=`calc(100% + ${(P[1]+P[3])/2-U}px)`,F=`calc(100% + ${(P[0]+P[2])/2-D}px)`;break;case"left":C-=P[0],b-=P[3],S=`calc(100% + ${P[1]+P[3]-U}px)`,F=`calc(100% + ${P[0]+P[2]-D}px)`;break;case"right":S=U?`calc(100% - ${U}px)`:"100%",F=D?`calc(100% - ${D}px)`:"100%";break}const X=["xfaBorder"];v(O.border)&&X.push("xfaPrintOnly");const G={name:"div",attributes:{class:X,style:{top:`${C}px`,left:`${b}px`,width:S,height:F}},children:[]};for(const Y of["border","borderWidth","borderColor","borderRadius","borderStyle"])y[Y]!==void 0&&(G.attributes.style[Y]=y[Y],delete y[Y]);p.children.push(G,T)}else p.children.push(T);for(const P of["background","backgroundClip","top","left","width","height","minWidth","minHeight","maxWidth","maxHeight","transform","transformOrigin","visibility"])y[P]!==void 0&&(p.attributes.style[P]=y[P],delete y[P]);return y.position==="absolute"?p.attributes.style.position="absolute":p.attributes.style.position="relative",delete y.position,y.alignSelf&&(p.attributes.style.alignSelf=y.alignSelf,delete y.alignSelf),p}function A(O){const T=(0,c.getMeasurement)(O.textIndent,"0px");if(T>=0)return;const y="padding"+((O.textAlign==="right"?"right":"left")==="left"?"Left":"Right"),p=(0,c.getMeasurement)(O[y],"0px");O[y]=`${p-T}px`}function k(O,T){switch(O.access){case"nonInteractive":T.push("xfaNonInteractive");break;case"readOnly":T.push("xfaReadOnly");break;case"protected":T.push("xfaDisabled");break}}function v(O){return O.relevant.length>0&&!O.relevant[0].excluded&&O.relevant[0].viewname==="print"}function _(O){const T=O[t.$getTemplateRoot]()[t.$extra].paraStack;return T.length?T.at(-1):null}function K(O,T,R){if(R.attributes.class&&R.attributes.class.includes("xfaRich")){T&&(O.h===""&&(T.height="auto"),O.w===""&&(T.width="auto"));const y=_(O);if(y){const p=R.attributes.style;switch(p.display="flex",p.flexDirection="column",y.vAlign){case"top":p.justifyContent="start";break;case"bottom":p.justifyContent="end";break;case"middle":p.justifyContent="center";break}const P=y[t.$toStyle]();for(const[E,S]of Object.entries(P))E in p||(p[E]=S)}}}function M(O,T,R,y){if(!R){delete y.fontFamily;return}const p=(0,c.stripQuotes)(O.typeface);y.fontFamily=`"${p}"`;const P=R.find(p);if(P){const{fontFamily:E}=P.regular.cssFontInfo;E!==p&&(y.fontFamily=`"${E}"`);const S=_(T);if(S&&S.lineHeight!==""||y.lineHeight)return;const F=(0,s.selectFont)(O,P);F&&(y.lineHeight=Math.max(1.2,F.lineHeight))}}function j(O){const T=(0,o.createValidAbsoluteUrl)(O,null,{addDefaultProtocol:!0,tryConvertEncoding:!0});return T?T.href:null}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.FontFinder=void 0,f.getMetrics=a,f.selectFont=e;var t=h(77),o=h(78),c=h(2);class s{constructor(n){this.fonts=new Map,this.cache=new Map,this.warned=new Set,this.defaultFont=null,this.add(n)}add(n,l=null){for(const d of n)this.addPdfFont(d);for(const d of this.fonts.values())d.regular||(d.regular=d.italic||d.bold||d.bolditalic);if(!l||l.size===0)return;const u=this.fonts.get("PdfJS-Fallback-PdfJS-XFA");for(const d of l)this.fonts.set(d,u)}addPdfFont(n){const l=n.cssFontInfo,u=l.fontFamily;let d=this.fonts.get(u);d||(d=Object.create(null),this.fonts.set(u,d),this.defaultFont||(this.defaultFont=d));let i="";const g=parseFloat(l.fontWeight);parseFloat(l.italicAngle)!==0?i=g>=700?"bolditalic":"italic":g>=700&&(i="bold"),i||((n.name.includes("Bold")||n.psName&&n.psName.includes("Bold"))&&(i="bold"),(n.name.includes("Italic")||n.name.endsWith("It")||n.psName&&(n.psName.includes("Italic")||n.psName.endsWith("It")))&&(i+="italic")),i||(i="regular"),d[i]=n}getDefault(){return this.defaultFont}find(n,l=!0){let u=this.fonts.get(n)||this.cache.get(n);if(u)return u;const d=/,|-|_| |bolditalic|bold|italic|regular|it/gi;let i=n.replace(d,"");if(u=this.fonts.get(i),u)return this.cache.set(n,u),u;i=i.toLowerCase();const g=[];for(const[x,m]of this.fonts.entries())x.replace(d,"").toLowerCase().startsWith(i)&&g.push(m);if(g.length===0)for(const[,x]of this.fonts.entries())x.regular.name&&x.regular.name.replace(d,"").toLowerCase().startsWith(i)&&g.push(x);if(g.length===0){i=i.replace(/psmt|mt/gi,"");for(const[x,m]of this.fonts.entries())x.replace(d,"").toLowerCase().startsWith(i)&&g.push(m)}if(g.length===0)for(const x of this.fonts.values())x.regular.name&&x.regular.name.replace(d,"").toLowerCase().startsWith(i)&&g.push(x);return g.length>=1?(g.length!==1&&l&&(0,c.warn)(`XFA - Too many choices to guess the correct font: ${n}`),this.cache.set(n,g[0]),g[0]):(l&&!this.warned.has(n)&&(this.warned.add(n),(0,c.warn)(`XFA - Cannot find the font: ${n}`)),null)}}f.FontFinder=s;function e(r,n){return r.posture==="italic"?r.weight==="bold"?n.bolditalic:n.italic:r.weight==="bold"?n.bold:n.regular}function a(r,n=!1){let l=null;if(r){const g=(0,o.stripQuotes)(r.typeface),x=r[t.$globalData].fontFinder.find(g);l=e(r,x)}if(!l)return{lineHeight:12,lineGap:2,lineNoGap:10};const u=r.size||10,d=l.lineHeight?Math.max(n?0:1.2,l.lineHeight):1.2,i=l.lineGap===void 0?.2:l.lineGap;return{lineHeight:d*u,lineGap:i*u,lineNoGap:Math.max(1,d-i)*u}}},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.TextMeasure=void 0;var t=h(85);const o=1.02;class c{constructor(r,n,l,u){if(this.lineHeight=l,this.paraMargin=n||{top:0,bottom:0,left:0,right:0},!r){[this.pdfFont,this.xfaFont]=this.defaultFont(u);return}this.xfaFont={typeface:r.typeface,posture:r.posture,weight:r.weight,size:r.size,letterSpacing:r.letterSpacing};const d=u.find(r.typeface);if(!d){[this.pdfFont,this.xfaFont]=this.defaultFont(u);return}this.pdfFont=(0,t.selectFont)(r,d),this.pdfFont||([this.pdfFont,this.xfaFont]=this.defaultFont(u))}defaultFont(r){const n=r.find("Helvetica",!1)||r.find("Myriad Pro",!1)||r.find("Arial",!1)||r.getDefault();if(n&&n.regular){const u=n.regular,i={typeface:u.cssFontInfo.fontFamily,posture:"normal",weight:"normal",size:10,letterSpacing:0};return[u,i]}return[null,{typeface:"Courier",posture:"normal",weight:"normal",size:10,letterSpacing:0}]}}class s{constructor(r,n,l,u){this.fontFinder=u,this.stack=[new c(r,n,l,u)]}pushData(r,n,l){const u=this.stack.at(-1);for(const i of["typeface","posture","weight","size","letterSpacing"])r[i]||(r[i]=u.xfaFont[i]);for(const i of["top","bottom","left","right"])isNaN(n[i])&&(n[i]=u.paraMargin[i]);const d=new c(r,n,l||u.lineHeight,this.fontFinder);d.pdfFont||(d.pdfFont=u.pdfFont),this.stack.push(d)}popFont(){this.stack.pop()}topFont(){return this.stack.at(-1)}}class e{constructor(r,n,l,u){this.glyphs=[],this.fontSelector=new s(r,n,l,u),this.extraHeight=0}pushData(r,n,l){this.fontSelector.pushData(r,n,l)}popFont(r){return this.fontSelector.popFont()}addPara(){const r=this.fontSelector.topFont();this.extraHeight+=r.paraMargin.top+r.paraMargin.bottom}addString(r){if(!r)return;const n=this.fontSelector.topFont(),l=n.xfaFont.size;if(n.pdfFont){const u=n.xfaFont.letterSpacing,d=n.pdfFont,i=d.lineHeight||1.2,g=n.lineHeight||Math.max(1.2,i)*l,x=d.lineGap===void 0?.2:d.lineGap,m=i-x,A=Math.max(1,m)*l,k=l/1e3,v=d.defaultWidth||d.charsToGlyphs(" ")[0].width;for(const _ of r.split(/[\u2029\n]/)){const K=d.encodeString(_).join(""),M=d.charsToGlyphs(K);for(const j of M){const O=j.width||v;this.glyphs.push([O*k+u,g,A,j.unicode,!1])}this.glyphs.push([0,0,0,`
`,!0])}this.glyphs.pop();return}for(const u of r.split(/[\u2029\n]/)){for(const d of u.split(""))this.glyphs.push([l,1.2*l,l,d,!1]);this.glyphs.push([0,0,0,`
`,!0])}this.glyphs.pop()}compute(r){let n=-1,l=0,u=0,d=0,i=0,g=0,x=!1,m=!0;for(let A=0,k=this.glyphs.length;A<k;A++){const[v,_,K,M,j]=this.glyphs[A],O=M===" ",T=m?K:_;if(j){u=Math.max(u,i),i=0,d+=g,g=T,n=-1,l=0,m=!1;continue}if(O){i+v>r?(u=Math.max(u,i),i=0,d+=g,g=T,n=-1,l=0,x=!0,m=!1):(g=Math.max(T,g),l=i,i+=v,n=A);continue}if(i+v>r){d+=g,g=T,n!==-1?(A=n,u=Math.max(u,l),i=0,n=-1,l=0):(u=Math.max(u,i),i=v),x=!0,m=!1;continue}i+=v,g=Math.max(T,g)}return u=Math.max(u,i),d+=g+this.extraHeight,{width:o*u,height:d,isBroken:x}}}f.TextMeasure=e},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.DataHandler=void 0;var t=h(77);class o{constructor(s,e){this.data=e,this.dataset=s.datasets||null}serialize(s){const e=[[-1,this.data[t.$getChildren]()]];for(;e.length>0;){const r=e.at(-1),[n,l]=r;if(n+1===l.length){e.pop();continue}const u=l[++r[0]],d=s.get(u[t.$uid]);if(d)u[t.$setValue](d);else{const g=u[t.$getAttributes]();for(const x of g.values()){const m=s.get(x[t.$uid]);if(m){x[t.$setValue](m);break}}}const i=u[t.$getChildren]();i.length>0&&e.push([-1,i])}const a=['<xfa:datasets xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">'];if(this.dataset)for(const r of this.dataset[t.$getChildren]())r[t.$nodeName]!=="data"&&r[t.$toString](a);return this.data[t.$toString](a),a.push("</xfa:datasets>"),a.join("")}}f.DataHandler=o},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.XFAParser=void 0;var t=h(77),o=h(66),c=h(89),s=h(2);class e extends o.XMLParserBase{constructor(r=null,n=!1){super(),this._builder=new c.Builder(r),this._stack=[],this._globalData={usedTypefaces:new Set},this._ids=new Map,this._current=this._builder.buildRoot(this._ids),this._errorCode=o.XMLParserErrorCode.NoError,this._whiteRegex=/^\s+$/,this._nbsps=/\xa0+/g,this._richText=n}parse(r){if(this.parseXml(r),this._errorCode===o.XMLParserErrorCode.NoError)return this._current[t.$finalize](),this._current.element}onText(r){if(r=r.replace(this._nbsps,n=>n.slice(1)+" "),this._richText||this._current[t.$acceptWhitespace]()){this._current[t.$onText](r,this._richText);return}this._whiteRegex.test(r)||this._current[t.$onText](r.trim())}onCdata(r){this._current[t.$onText](r)}_mkAttributes(r,n){let l=null,u=null;const d=Object.create({});for(const{name:i,value:g}of r)if(i==="xmlns")l?(0,s.warn)(`XFA - multiple namespace definition in <${n}>`):l=g;else if(i.startsWith("xmlns:")){const x=i.substring(6);u||(u=[]),u.push({prefix:x,value:g})}else{const x=i.indexOf(":");if(x===-1)d[i]=g;else{let m=d[t.$nsAttributes];m||(m=d[t.$nsAttributes]=Object.create(null));const[A,k]=[i.slice(0,x),i.slice(x+1)];let v=m[A];v||(v=m[A]=Object.create(null)),v[k]=g}}return[l,u,d]}_getNameAndPrefix(r,n){const l=r.indexOf(":");return l===-1?[r,null]:[r.substring(l+1),n?"":r.substring(0,l)]}onBeginElement(r,n,l){const[u,d,i]=this._mkAttributes(n,r),[g,x]=this._getNameAndPrefix(r,this._builder.isNsAgnostic()),m=this._builder.build({nsPrefix:x,name:g,attributes:i,namespace:u,prefixes:d});if(m[t.$globalData]=this._globalData,l){m[t.$finalize](),this._current[t.$onChild](m)&&m[t.$setId](this._ids),m[t.$clean](this._builder);return}this._stack.push(this._current),this._current=m}onEndElement(r){const n=this._current;if(n[t.$isCDATAXml]()&&typeof n[t.$content]=="string"){const l=new e;l._globalData=this._globalData;const u=l.parse(n[t.$content]);n[t.$content]=null,n[t.$onChild](u)}n[t.$finalize](),this._current=this._stack.pop(),this._current[t.$onChild](n)&&n[t.$setId](this._ids),n[t.$clean](this._builder)}onError(r){this._errorCode=r}}f.XFAParser=e},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Builder=void 0;var t=h(79),o=h(77),c=h(90),s=h(82),e=h(99),a=h(2);class r extends o.XFAObject{constructor(d){super(-1,"root",Object.create(null)),this.element=null,this[o.$ids]=d}[o.$onChild](d){return this.element=d,!0}[o.$finalize](){super[o.$finalize](),this.element.template instanceof s.Template&&(this[o.$ids].set(o.$root,this.element),this.element.template[o.$resolvePrototypes](this[o.$ids]),this.element.template[o.$ids]=this[o.$ids])}}class n extends o.XFAObject{constructor(){super(-1,"",Object.create(null))}[o.$onChild](d){return!1}}class l{constructor(d=null){this._namespaceStack=[],this._nsAgnosticLevel=0,this._namespacePrefixes=new Map,this._namespaces=new Map,this._nextNsId=Math.max(...Object.values(t.NamespaceIds).map(({id:i})=>i)),this._currentNamespace=d||new e.UnknownNamespace(++this._nextNsId)}buildRoot(d){return new r(d)}build({nsPrefix:d,name:i,attributes:g,namespace:x,prefixes:m}){const A=x!==null;if(A&&(this._namespaceStack.push(this._currentNamespace),this._currentNamespace=this._searchNamespace(x)),m&&this._addNamespacePrefix(m),g.hasOwnProperty(o.$nsAttributes)){const _=c.NamespaceSetUp.datasets,K=g[o.$nsAttributes];let M=null;for(const[j,O]of Object.entries(K))if(this._getNamespaceToUse(j)===_){M={xfa:O};break}M?g[o.$nsAttributes]=M:delete g[o.$nsAttributes]}const k=this._getNamespaceToUse(d),v=k&&k[t.$buildXFAObject](i,g)||new n;return v[o.$isNsAgnostic]()&&this._nsAgnosticLevel++,(A||m||v[o.$isNsAgnostic]())&&(v[o.$cleanup]={hasNamespace:A,prefixes:m,nsAgnostic:v[o.$isNsAgnostic]()}),v}isNsAgnostic(){return this._nsAgnosticLevel>0}_searchNamespace(d){let i=this._namespaces.get(d);if(i)return i;for(const[g,{check:x}]of Object.entries(t.NamespaceIds))if(x(d)){if(i=c.NamespaceSetUp[g],i)return this._namespaces.set(d,i),i;break}return i=new e.UnknownNamespace(++this._nextNsId),this._namespaces.set(d,i),i}_addNamespacePrefix(d){for(const{prefix:i,value:g}of d){const x=this._searchNamespace(g);let m=this._namespacePrefixes.get(i);m||(m=[],this._namespacePrefixes.set(i,m)),m.push(x)}}_getNamespaceToUse(d){if(!d)return this._currentNamespace;const i=this._namespacePrefixes.get(d);return i&&i.length>0?i.at(-1):((0,a.warn)(`Unknown namespace prefix: ${d}.`),null)}clean(d){const{hasNamespace:i,prefixes:g,nsAgnostic:x}=d;i&&(this._currentNamespace=this._namespaceStack.pop()),g&&g.forEach(({prefix:m})=>{this._namespacePrefixes.get(m).pop()}),x&&this._nsAgnosticLevel--}}f.Builder=l},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.NamespaceSetUp=void 0;var t=h(91),o=h(92),c=h(93),s=h(94),e=h(95),a=h(96),r=h(82),n=h(97),l=h(98);const u={config:t.ConfigNamespace,connection:o.ConnectionSetNamespace,datasets:c.DatasetsNamespace,localeSet:s.LocaleSetNamespace,signature:e.SignatureNamespace,stylesheet:a.StylesheetNamespace,template:r.TemplateNamespace,xdp:n.XdpNamespace,xhtml:l.XhtmlNamespace};f.NamespaceSetUp=u},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ConfigNamespace=void 0;var t=h(79),o=h(77),c=h(78),s=h(2);const e=t.NamespaceIds.config.id;class a extends o.XFAObject{constructor(ie){super(e,"acrobat",!0),this.acrobat7=null,this.autoSave=null,this.common=null,this.validate=null,this.validateApprovalSignatures=null,this.submitUrl=new o.XFAObjectArray}}class r extends o.XFAObject{constructor(ie){super(e,"acrobat7",!0),this.dynamicRender=null}}class n extends o.OptionObject{constructor(ie){super(e,"ADBE_JSConsole",["delegate","Enable","Disable"])}}class l extends o.OptionObject{constructor(ie){super(e,"ADBE_JSDebugger",["delegate","Enable","Disable"])}}class u extends o.Option01{constructor(ie){super(e,"addSilentPrint")}}class d extends o.Option01{constructor(ie){super(e,"addViewerPreferences")}}class i extends o.Option10{constructor(ie){super(e,"adjustData")}}class g extends o.IntegerObject{constructor(ie){super(e,"adobeExtensionLevel",0,ke=>ke>=1&&ke<=8)}}class x extends o.XFAObject{constructor(ie){super(e,"agent",!0),this.name=ie.name?ie.name.trim():"",this.common=new o.XFAObjectArray}}class m extends o.ContentObject{constructor(ie){super(e,"alwaysEmbed")}}class A extends o.StringObject{constructor(ie){super(e,"amd")}}class k extends o.XFAObject{constructor(ie){super(e,"area"),this.level=(0,c.getInteger)({data:ie.level,defaultValue:0,validate:ke=>ke>=1&&ke<=3}),this.name=(0,c.getStringOption)(ie.name,["","barcode","coreinit","deviceDriver","font","general","layout","merge","script","signature","sourceSet","templateCache"])}}class v extends o.OptionObject{constructor(ie){super(e,"attributes",["preserve","delegate","ignore"])}}class _ extends o.OptionObject{constructor(ie){super(e,"autoSave",["disabled","enabled"])}}class K extends o.StringObject{constructor(ie){super(e,"base")}}class M extends o.XFAObject{constructor(ie){super(e,"batchOutput"),this.format=(0,c.getStringOption)(ie.format,["none","concat","zip","zipCompress"])}}class j extends o.ContentObject{constructor(ie){super(e,"behaviorOverride")}[o.$finalize](){this[o.$content]=new Map(this[o.$content].trim().split(/\s+/).filter(ie=>ie.includes(":")).map(ie=>ie.split(":",2)))}}class O extends o.XFAObject{constructor(ie){super(e,"cache",!0),this.templateCache=null}}class T extends o.Option01{constructor(ie){super(e,"change")}}class R extends o.XFAObject{constructor(ie){super(e,"common",!0),this.data=null,this.locale=null,this.localeSet=null,this.messaging=null,this.suppressBanner=null,this.template=null,this.validationMessaging=null,this.versionControl=null,this.log=new o.XFAObjectArray}}class y extends o.XFAObject{constructor(ie){super(e,"compress"),this.scope=(0,c.getStringOption)(ie.scope,["imageOnly","document"])}}class p extends o.Option01{constructor(ie){super(e,"compressLogicalStructure")}}class P extends o.Option10{constructor(ie){super(e,"compressObjectStream")}}class E extends o.XFAObject{constructor(ie){super(e,"compression",!0),this.compressLogicalStructure=null,this.compressObjectStream=null,this.level=null,this.type=null}}class S extends o.XFAObject{constructor(ie){super(e,"config",!0),this.acrobat=null,this.present=null,this.trace=null,this.agent=new o.XFAObjectArray}}class F extends o.OptionObject{constructor(ie){super(e,"conformance",["A","B"])}}class C extends o.Option01{constructor(ie){super(e,"contentCopy")}}class b extends o.IntegerObject{constructor(ie){super(e,"copies",1,ke=>ke>=1)}}class D extends o.StringObject{constructor(ie){super(e,"creator")}}class U extends o.IntegerObject{constructor(ie){super(e,"currentPage",0,ke=>ke>=0)}}class X extends o.XFAObject{constructor(ie){super(e,"data",!0),this.adjustData=null,this.attributes=null,this.incrementalLoad=null,this.outputXSL=null,this.range=null,this.record=null,this.startNode=null,this.uri=null,this.window=null,this.xsl=null,this.excludeNS=new o.XFAObjectArray,this.transform=new o.XFAObjectArray}}class G extends o.XFAObject{constructor(ie){super(e,"debug",!0),this.uri=null}}class Y extends o.ContentObject{constructor(ie){super(e,"defaultTypeface"),this.writingScript=(0,c.getStringOption)(ie.writingScript,["*","Arabic","Cyrillic","EastEuropeanRoman","Greek","Hebrew","Japanese","Korean","Roman","SimplifiedChinese","Thai","TraditionalChinese","Vietnamese"])}}class N extends o.OptionObject{constructor(ie){super(e,"destination",["pdf","pcl","ps","webClient","zpl"])}}class I extends o.Option01{constructor(ie){super(e,"documentAssembly")}}class L extends o.XFAObject{constructor(ie){super(e,"driver",!0),this.name=ie.name?ie.name.trim():"",this.fontInfo=null,this.xdc=null}}class $ extends o.OptionObject{constructor(ie){super(e,"duplexOption",["simplex","duplexFlipLongEdge","duplexFlipShortEdge"])}}class W extends o.OptionObject{constructor(ie){super(e,"dynamicRender",["forbidden","required"])}}class z extends o.Option01{constructor(ie){super(e,"embed")}}class B extends o.Option01{constructor(ie){super(e,"encrypt")}}class H extends o.XFAObject{constructor(ie){super(e,"encryption",!0),this.encrypt=null,this.encryptionLevel=null,this.permissions=null}}class q extends o.OptionObject{constructor(ie){super(e,"encryptionLevel",["40bit","128bit"])}}class Z extends o.StringObject{constructor(ie){super(e,"enforce")}}class te extends o.XFAObject{constructor(ie){super(e,"equate"),this.force=(0,c.getInteger)({data:ie.force,defaultValue:1,validate:ke=>ke===0}),this.from=ie.from||"",this.to=ie.to||""}}class Q extends o.XFAObject{constructor(ie){super(e,"equateRange"),this.from=ie.from||"",this.to=ie.to||"",this._unicodeRange=ie.unicodeRange||""}get unicodeRange(){const ie=[],ke=/U\+([0-9a-fA-F]+)/,Le=this._unicodeRange;for(let qe of Le.split(",").map(pt=>pt.trim()).filter(pt=>!!pt))qe=qe.split("-",2).map(pt=>{const dt=pt.match(ke);return dt?parseInt(dt[1],16):0}),qe.length===1&&qe.push(qe[0]),ie.push(qe);return(0,s.shadow)(this,"unicodeRange",ie)}}class ee extends o.ContentObject{constructor(ie){super(e,"exclude")}[o.$finalize](){this[o.$content]=this[o.$content].trim().split(/\s+/).filter(ie=>ie&&["calculate","close","enter","exit","initialize","ready","validate"].includes(ie))}}class J extends o.StringObject{constructor(ie){super(e,"excludeNS")}}class ne extends o.OptionObject{constructor(ie){super(e,"flipLabel",["usePrinterSetting","on","off"])}}class re extends o.XFAObject{constructor(ie){super(e,"fontInfo",!0),this.embed=null,this.map=null,this.subsetBelow=null,this.alwaysEmbed=new o.XFAObjectArray,this.defaultTypeface=new o.XFAObjectArray,this.neverEmbed=new o.XFAObjectArray}}class ae extends o.Option01{constructor(ie){super(e,"formFieldFilling")}}class se extends o.StringObject{constructor(ie){super(e,"groupParent")}}class oe extends o.OptionObject{constructor(ie){super(e,"ifEmpty",["dataValue","dataGroup","ignore","remove"])}}class me extends o.StringObject{constructor(ie){super(e,"includeXDPContent")}}class xe extends o.OptionObject{constructor(ie){super(e,"incrementalLoad",["none","forwardOnly"])}}class Ae extends o.Option01{constructor(ie){super(e,"incrementalMerge")}}class Se extends o.Option01{constructor(ie){super(e,"interactive")}}class Fe extends o.OptionObject{constructor(ie){super(e,"jog",["usePrinterSetting","none","pageSet"])}}class Pe extends o.XFAObject{constructor(ie){super(e,"labelPrinter",!0),this.name=(0,c.getStringOption)(ie.name,["zpl","dpl","ipl","tcpl"]),this.batchOutput=null,this.flipLabel=null,this.fontInfo=null,this.xdc=null}}class ue extends o.OptionObject{constructor(ie){super(e,"layout",["paginate","panel"])}}class ye extends o.IntegerObject{constructor(ie){super(e,"level",0,ke=>ke>0)}}class le extends o.Option01{constructor(ie){super(e,"linearized")}}class he extends o.StringObject{constructor(ie){super(e,"locale")}}class ce extends o.StringObject{constructor(ie){super(e,"localeSet")}}class Te extends o.XFAObject{constructor(ie){super(e,"log",!0),this.mode=null,this.threshold=null,this.to=null,this.uri=null}}class Re extends o.XFAObject{constructor(ie){super(e,"map",!0),this.equate=new o.XFAObjectArray,this.equateRange=new o.XFAObjectArray}}class He extends o.XFAObject{constructor(ie){super(e,"mediumInfo",!0),this.map=null}}class Ce extends o.XFAObject{constructor(ie){super(e,"message",!0),this.msgId=null,this.severity=null}}class ve extends o.XFAObject{constructor(ie){super(e,"messaging",!0),this.message=new o.XFAObjectArray}}class fe extends o.OptionObject{constructor(ie){super(e,"mode",["append","overwrite"])}}class We extends o.Option01{constructor(ie){super(e,"modifyAnnots")}}class Ue extends o.IntegerObject{constructor(ie){super(e,"msgId",1,ke=>ke>=1)}}class ze extends o.StringObject{constructor(ie){super(e,"nameAttr")}}class tt extends o.ContentObject{constructor(ie){super(e,"neverEmbed")}}class Ne extends o.IntegerObject{constructor(ie){super(e,"numberOfCopies",null,ke=>ke>=2&&ke<=5)}}class Qe extends o.XFAObject{constructor(ie){super(e,"openAction",!0),this.destination=null}}class ct extends o.XFAObject{constructor(ie){super(e,"output",!0),this.to=null,this.type=null,this.uri=null}}class Ee extends o.StringObject{constructor(ie){super(e,"outputBin")}}class rt extends o.XFAObject{constructor(ie){super(e,"outputXSL",!0),this.uri=null}}class Ze extends o.OptionObject{constructor(ie){super(e,"overprint",["none","both","draw","field"])}}class vt extends o.StringObject{constructor(ie){super(e,"packets")}[o.$finalize](){this[o.$content]!=="*"&&(this[o.$content]=this[o.$content].trim().split(/\s+/).filter(ie=>["config","datasets","template","xfdf","xslt"].includes(ie)))}}class lt extends o.XFAObject{constructor(ie){super(e,"pageOffset"),this.x=(0,c.getInteger)({data:ie.x,defaultValue:"useXDCSetting",validate:ke=>!0}),this.y=(0,c.getInteger)({data:ie.y,defaultValue:"useXDCSetting",validate:ke=>!0})}}class ht extends o.StringObject{constructor(ie){super(e,"pageRange")}[o.$finalize](){const ie=this[o.$content].trim().split(/\s+/).map(Le=>parseInt(Le,10)),ke=[];for(let Le=0,qe=ie.length;Le<qe;Le+=2)ke.push(ie.slice(Le,Le+2));this[o.$content]=ke}}class ot extends o.OptionObject{constructor(ie){super(e,"pagination",["simplex","duplexShortEdge","duplexLongEdge"])}}class Dt extends o.OptionObject{constructor(ie){super(e,"paginationOverride",["none","forceDuplex","forceDuplexLongEdge","forceDuplexShortEdge","forceSimplex"])}}class Ot extends o.IntegerObject{constructor(ie){super(e,"part",1,ke=>!1)}}class Xe extends o.XFAObject{constructor(ie){super(e,"pcl",!0),this.name=ie.name||"",this.batchOutput=null,this.fontInfo=null,this.jog=null,this.mediumInfo=null,this.outputBin=null,this.pageOffset=null,this.staple=null,this.xdc=null}}class Ie extends o.XFAObject{constructor(ie){super(e,"pdf",!0),this.name=ie.name||"",this.adobeExtensionLevel=null,this.batchOutput=null,this.compression=null,this.creator=null,this.encryption=null,this.fontInfo=null,this.interactive=null,this.linearized=null,this.openAction=null,this.pdfa=null,this.producer=null,this.renderPolicy=null,this.scriptModel=null,this.silentPrint=null,this.submitFormat=null,this.tagged=null,this.version=null,this.viewerPreferences=null,this.xdc=null}}class Ge extends o.XFAObject{constructor(ie){super(e,"pdfa",!0),this.amd=null,this.conformance=null,this.includeXDPContent=null,this.part=null}}class Ve extends o.XFAObject{constructor(ie){super(e,"permissions",!0),this.accessibleContent=null,this.change=null,this.contentCopy=null,this.documentAssembly=null,this.formFieldFilling=null,this.modifyAnnots=null,this.plaintextMetadata=null,this.print=null,this.printHighQuality=null}}class it extends o.Option01{constructor(ie){super(e,"pickTrayByPDFSize")}}class gt extends o.StringObject{constructor(ie){super(e,"picture")}}class nt extends o.Option01{constructor(ie){super(e,"plaintextMetadata")}}class Ke extends o.OptionObject{constructor(ie){super(e,"presence",["preserve","dissolve","dissolveStructure","ignore","remove"])}}class at extends o.XFAObject{constructor(ie){super(e,"present",!0),this.behaviorOverride=null,this.cache=null,this.common=null,this.copies=null,this.destination=null,this.incrementalMerge=null,this.layout=null,this.output=null,this.overprint=null,this.pagination=null,this.paginationOverride=null,this.script=null,this.validate=null,this.xdp=null,this.driver=new o.XFAObjectArray,this.labelPrinter=new o.XFAObjectArray,this.pcl=new o.XFAObjectArray,this.pdf=new o.XFAObjectArray,this.ps=new o.XFAObjectArray,this.submitUrl=new o.XFAObjectArray,this.webClient=new o.XFAObjectArray,this.zpl=new o.XFAObjectArray}}class ut extends o.Option01{constructor(ie){super(e,"print")}}class St extends o.Option01{constructor(ie){super(e,"printHighQuality")}}class bt extends o.OptionObject{constructor(ie){super(e,"printScaling",["appdefault","noScaling"])}}class ft extends o.StringObject{constructor(ie){super(e,"printerName")}}class we extends o.StringObject{constructor(ie){super(e,"producer")}}class _e extends o.XFAObject{constructor(ie){super(e,"ps",!0),this.name=ie.name||"",this.batchOutput=null,this.fontInfo=null,this.jog=null,this.mediumInfo=null,this.outputBin=null,this.staple=null,this.xdc=null}}class $e extends o.ContentObject{constructor(ie){super(e,"range")}[o.$finalize](){this[o.$content]=this[o.$content].trim().split(/\s*,\s*/,2).map(ie=>ie.split("-").map(ke=>parseInt(ke.trim(),10))).filter(ie=>ie.every(ke=>!isNaN(ke))).map(ie=>(ie.length===1&&ie.push(ie[0]),ie))}}class je extends o.ContentObject{constructor(ie){super(e,"record")}[o.$finalize](){this[o.$content]=this[o.$content].trim();const ie=parseInt(this[o.$content],10);!isNaN(ie)&&ie>=0&&(this[o.$content]=ie)}}class et extends o.ContentObject{constructor(ie){super(e,"relevant")}[o.$finalize](){this[o.$content]=this[o.$content].trim().split(/\s+/)}}class xt extends o.ContentObject{constructor(ie){super(e,"rename")}[o.$finalize](){this[o.$content]=this[o.$content].trim(),(this[o.$content].toLowerCase().startsWith("xml")||this[o.$content].match(new RegExp("[\\p{L}_][\\p{L}\\d._\\p{M}-]*","u")))&&(0,s.warn)("XFA - Rename: invalid XFA name")}}class Et extends o.OptionObject{constructor(ie){super(e,"renderPolicy",["server","client"])}}class yt extends o.OptionObject{constructor(ie){super(e,"runScripts",["both","client","none","server"])}}class wt extends o.XFAObject{constructor(ie){super(e,"script",!0),this.currentPage=null,this.exclude=null,this.runScripts=null}}class Pt extends o.OptionObject{constructor(ie){super(e,"scriptModel",["XFA","none"])}}class Bt extends o.OptionObject{constructor(ie){super(e,"severity",["ignore","error","information","trace","warning"])}}class Ht extends o.XFAObject{constructor(ie){super(e,"silentPrint",!0),this.addSilentPrint=null,this.printerName=null}}class pi extends o.XFAObject{constructor(ie){super(e,"staple"),this.mode=(0,c.getStringOption)(ie.mode,["usePrinterSetting","on","off"])}}class ri extends o.StringObject{constructor(ie){super(e,"startNode")}}class mi extends o.IntegerObject{constructor(ie){super(e,"startPage",0,ke=>!0)}}class xi extends o.OptionObject{constructor(ie){super(e,"submitFormat",["html","delegate","fdf","xml","pdf"])}}class ai extends o.StringObject{constructor(ie){super(e,"submitUrl")}}class bi extends o.IntegerObject{constructor(ie){super(e,"subsetBelow",100,ke=>ke>=0&&ke<=100)}}class yi extends o.Option01{constructor(ie){super(e,"suppressBanner")}}class vi extends o.Option01{constructor(ie){super(e,"tagged")}}class Si extends o.XFAObject{constructor(ie){super(e,"template",!0),this.base=null,this.relevant=null,this.startPage=null,this.uri=null,this.xsl=null}}class wi extends o.OptionObject{constructor(ie){super(e,"threshold",["trace","error","information","warning"])}}class Ci extends o.OptionObject{constructor(ie){super(e,"to",["null","memory","stderr","stdout","system","uri"])}}class si extends o.XFAObject{constructor(ie){super(e,"templateCache"),this.maxEntries=(0,c.getInteger)({data:ie.maxEntries,defaultValue:5,validate:ke=>ke>=0})}}class Zt extends o.XFAObject{constructor(ie){super(e,"trace",!0),this.area=new o.XFAObjectArray}}class Ai extends o.XFAObject{constructor(ie){super(e,"transform",!0),this.groupParent=null,this.ifEmpty=null,this.nameAttr=null,this.picture=null,this.presence=null,this.rename=null,this.whitespace=null}}class Fi extends o.OptionObject{constructor(ie){super(e,"type",["none","ascii85","asciiHex","ccittfax","flate","lzw","runLength","native","xdp","mergedXDP"])}}class ki extends o.StringObject{constructor(ie){super(e,"uri")}}class Qt extends o.OptionObject{constructor(ie){super(e,"validate",["preSubmit","prePrint","preExecute","preSave"])}}class oi extends o.ContentObject{constructor(ie){super(e,"validateApprovalSignatures")}[o.$finalize](){this[o.$content]=this[o.$content].trim().split(/\s+/).filter(ie=>["docReady","postSign"].includes(ie))}}class ci extends o.OptionObject{constructor(ie){super(e,"validationMessaging",["allMessagesIndividually","allMessagesTogether","firstMessageOnly","noMessages"])}}class Ti extends o.OptionObject{constructor(ie){super(e,"version",["1.7","1.6","1.5","1.4","1.3","1.2"])}}class _i extends o.XFAObject{constructor(ie){super(e,"VersionControl"),this.outputBelow=(0,c.getStringOption)(ie.outputBelow,["warn","error","update"]),this.sourceAbove=(0,c.getStringOption)(ie.sourceAbove,["warn","error"]),this.sourceBelow=(0,c.getStringOption)(ie.sourceBelow,["update","maintain"])}}class Ei extends o.XFAObject{constructor(ie){super(e,"viewerPreferences",!0),this.ADBE_JSConsole=null,this.ADBE_JSDebugger=null,this.addViewerPreferences=null,this.duplexOption=null,this.enforce=null,this.numberOfCopies=null,this.pageRange=null,this.pickTrayByPDFSize=null,this.printScaling=null}}class Oi extends o.XFAObject{constructor(ie){super(e,"webClient",!0),this.name=ie.name?ie.name.trim():"",this.fontInfo=null,this.xdc=null}}class Pi extends o.OptionObject{constructor(ie){super(e,"whitespace",["preserve","ltrim","normalize","rtrim","trim"])}}class ei extends o.ContentObject{constructor(ie){super(e,"window")}[o.$finalize](){const ie=this[o.$content].trim().split(/\s*,\s*/,2).map(ke=>parseInt(ke,10));if(ie.some(ke=>isNaN(ke))){this[o.$content]=[0,0];return}ie.length===1&&ie.push(ie[0]),this[o.$content]=ie}}class Di extends o.XFAObject{constructor(ie){super(e,"xdc",!0),this.uri=new o.XFAObjectArray,this.xsl=new o.XFAObjectArray}}class Vt extends o.XFAObject{constructor(ie){super(e,"xdp",!0),this.packets=null}}class Ii extends o.XFAObject{constructor(ie){super(e,"xsl",!0),this.debug=null,this.uri=null}}class qt extends o.XFAObject{constructor(ie){super(e,"zpl",!0),this.name=ie.name?ie.name.trim():"",this.batchOutput=null,this.flipLabel=null,this.fontInfo=null,this.xdc=null}}class Oe{static[t.$buildXFAObject](ie,ke){if(Oe.hasOwnProperty(ie))return Oe[ie](ke)}static acrobat(ie){return new a(ie)}static acrobat7(ie){return new r(ie)}static ADBE_JSConsole(ie){return new n(ie)}static ADBE_JSDebugger(ie){return new l(ie)}static addSilentPrint(ie){return new u(ie)}static addViewerPreferences(ie){return new d(ie)}static adjustData(ie){return new i(ie)}static adobeExtensionLevel(ie){return new g(ie)}static agent(ie){return new x(ie)}static alwaysEmbed(ie){return new m(ie)}static amd(ie){return new A(ie)}static area(ie){return new k(ie)}static attributes(ie){return new v(ie)}static autoSave(ie){return new _(ie)}static base(ie){return new K(ie)}static batchOutput(ie){return new M(ie)}static behaviorOverride(ie){return new j(ie)}static cache(ie){return new O(ie)}static change(ie){return new T(ie)}static common(ie){return new R(ie)}static compress(ie){return new y(ie)}static compressLogicalStructure(ie){return new p(ie)}static compressObjectStream(ie){return new P(ie)}static compression(ie){return new E(ie)}static config(ie){return new S(ie)}static conformance(ie){return new F(ie)}static contentCopy(ie){return new C(ie)}static copies(ie){return new b(ie)}static creator(ie){return new D(ie)}static currentPage(ie){return new U(ie)}static data(ie){return new X(ie)}static debug(ie){return new G(ie)}static defaultTypeface(ie){return new Y(ie)}static destination(ie){return new N(ie)}static documentAssembly(ie){return new I(ie)}static driver(ie){return new L(ie)}static duplexOption(ie){return new $(ie)}static dynamicRender(ie){return new W(ie)}static embed(ie){return new z(ie)}static encrypt(ie){return new B(ie)}static encryption(ie){return new H(ie)}static encryptionLevel(ie){return new q(ie)}static enforce(ie){return new Z(ie)}static equate(ie){return new te(ie)}static equateRange(ie){return new Q(ie)}static exclude(ie){return new ee(ie)}static excludeNS(ie){return new J(ie)}static flipLabel(ie){return new ne(ie)}static fontInfo(ie){return new re(ie)}static formFieldFilling(ie){return new ae(ie)}static groupParent(ie){return new se(ie)}static ifEmpty(ie){return new oe(ie)}static includeXDPContent(ie){return new me(ie)}static incrementalLoad(ie){return new xe(ie)}static incrementalMerge(ie){return new Ae(ie)}static interactive(ie){return new Se(ie)}static jog(ie){return new Fe(ie)}static labelPrinter(ie){return new Pe(ie)}static layout(ie){return new ue(ie)}static level(ie){return new ye(ie)}static linearized(ie){return new le(ie)}static locale(ie){return new he(ie)}static localeSet(ie){return new ce(ie)}static log(ie){return new Te(ie)}static map(ie){return new Re(ie)}static mediumInfo(ie){return new He(ie)}static message(ie){return new Ce(ie)}static messaging(ie){return new ve(ie)}static mode(ie){return new fe(ie)}static modifyAnnots(ie){return new We(ie)}static msgId(ie){return new Ue(ie)}static nameAttr(ie){return new ze(ie)}static neverEmbed(ie){return new tt(ie)}static numberOfCopies(ie){return new Ne(ie)}static openAction(ie){return new Qe(ie)}static output(ie){return new ct(ie)}static outputBin(ie){return new Ee(ie)}static outputXSL(ie){return new rt(ie)}static overprint(ie){return new Ze(ie)}static packets(ie){return new vt(ie)}static pageOffset(ie){return new lt(ie)}static pageRange(ie){return new ht(ie)}static pagination(ie){return new ot(ie)}static paginationOverride(ie){return new Dt(ie)}static part(ie){return new Ot(ie)}static pcl(ie){return new Xe(ie)}static pdf(ie){return new Ie(ie)}static pdfa(ie){return new Ge(ie)}static permissions(ie){return new Ve(ie)}static pickTrayByPDFSize(ie){return new it(ie)}static picture(ie){return new gt(ie)}static plaintextMetadata(ie){return new nt(ie)}static presence(ie){return new Ke(ie)}static present(ie){return new at(ie)}static print(ie){return new ut(ie)}static printHighQuality(ie){return new St(ie)}static printScaling(ie){return new bt(ie)}static printerName(ie){return new ft(ie)}static producer(ie){return new we(ie)}static ps(ie){return new _e(ie)}static range(ie){return new $e(ie)}static record(ie){return new je(ie)}static relevant(ie){return new et(ie)}static rename(ie){return new xt(ie)}static renderPolicy(ie){return new Et(ie)}static runScripts(ie){return new yt(ie)}static script(ie){return new wt(ie)}static scriptModel(ie){return new Pt(ie)}static severity(ie){return new Bt(ie)}static silentPrint(ie){return new Ht(ie)}static staple(ie){return new pi(ie)}static startNode(ie){return new ri(ie)}static startPage(ie){return new mi(ie)}static submitFormat(ie){return new xi(ie)}static submitUrl(ie){return new ai(ie)}static subsetBelow(ie){return new bi(ie)}static suppressBanner(ie){return new yi(ie)}static tagged(ie){return new vi(ie)}static template(ie){return new Si(ie)}static templateCache(ie){return new si(ie)}static threshold(ie){return new wi(ie)}static to(ie){return new Ci(ie)}static trace(ie){return new Zt(ie)}static transform(ie){return new Ai(ie)}static type(ie){return new Fi(ie)}static uri(ie){return new ki(ie)}static validate(ie){return new Qt(ie)}static validateApprovalSignatures(ie){return new oi(ie)}static validationMessaging(ie){return new ci(ie)}static version(ie){return new Ti(ie)}static versionControl(ie){return new _i(ie)}static viewerPreferences(ie){return new Ei(ie)}static webClient(ie){return new Oi(ie)}static whitespace(ie){return new Pi(ie)}static window(ie){return new ei(ie)}static xdc(ie){return new Di(ie)}static xdp(ie){return new Vt(ie)}static xsl(ie){return new Ii(ie)}static zpl(ie){return new qt(ie)}}f.ConfigNamespace=Oe},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ConnectionSetNamespace=void 0;var t=h(79),o=h(77);const c=t.NamespaceIds.connectionSet.id;class s extends o.XFAObject{constructor(v){super(c,"connectionSet",!0),this.wsdlConnection=new o.XFAObjectArray,this.xmlConnection=new o.XFAObjectArray,this.xsdConnection=new o.XFAObjectArray}}class e extends o.XFAObject{constructor(v){super(c,"effectiveInputPolicy"),this.id=v.id||"",this.name=v.name||"",this.use=v.use||"",this.usehref=v.usehref||""}}class a extends o.XFAObject{constructor(v){super(c,"effectiveOutputPolicy"),this.id=v.id||"",this.name=v.name||"",this.use=v.use||"",this.usehref=v.usehref||""}}class r extends o.StringObject{constructor(v){super(c,"operation"),this.id=v.id||"",this.input=v.input||"",this.name=v.name||"",this.output=v.output||"",this.use=v.use||"",this.usehref=v.usehref||""}}class n extends o.StringObject{constructor(v){super(c,"rootElement"),this.id=v.id||"",this.name=v.name||"",this.use=v.use||"",this.usehref=v.usehref||""}}class l extends o.StringObject{constructor(v){super(c,"soapAction"),this.id=v.id||"",this.name=v.name||"",this.use=v.use||"",this.usehref=v.usehref||""}}class u extends o.StringObject{constructor(v){super(c,"soapAddress"),this.id=v.id||"",this.name=v.name||"",this.use=v.use||"",this.usehref=v.usehref||""}}class d extends o.StringObject{constructor(v){super(c,"uri"),this.id=v.id||"",this.name=v.name||"",this.use=v.use||"",this.usehref=v.usehref||""}}class i extends o.StringObject{constructor(v){super(c,"wsdlAddress"),this.id=v.id||"",this.name=v.name||"",this.use=v.use||"",this.usehref=v.usehref||""}}class g extends o.XFAObject{constructor(v){super(c,"wsdlConnection",!0),this.dataDescription=v.dataDescription||"",this.name=v.name||"",this.effectiveInputPolicy=null,this.effectiveOutputPolicy=null,this.operation=null,this.soapAction=null,this.soapAddress=null,this.wsdlAddress=null}}class x extends o.XFAObject{constructor(v){super(c,"xmlConnection",!0),this.dataDescription=v.dataDescription||"",this.name=v.name||"",this.uri=null}}class m extends o.XFAObject{constructor(v){super(c,"xsdConnection",!0),this.dataDescription=v.dataDescription||"",this.name=v.name||"",this.rootElement=null,this.uri=null}}class A{static[t.$buildXFAObject](v,_){if(A.hasOwnProperty(v))return A[v](_)}static connectionSet(v){return new s(v)}static effectiveInputPolicy(v){return new e(v)}static effectiveOutputPolicy(v){return new a(v)}static operation(v){return new r(v)}static rootElement(v){return new n(v)}static soapAction(v){return new l(v)}static soapAddress(v){return new u(v)}static uri(v){return new d(v)}static wsdlAddress(v){return new i(v)}static wsdlConnection(v){return new g(v)}static xmlConnection(v){return new x(v)}static xsdConnection(v){return new m(v)}}f.ConnectionSetNamespace=A},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.DatasetsNamespace=void 0;var t=h(77),o=h(79);const c=o.NamespaceIds.datasets.id;class s extends t.XmlObject{constructor(n){super(c,"data",n)}[t.$isNsAgnostic](){return!0}}class e extends t.XFAObject{constructor(n){super(c,"datasets",!0),this.data=null,this.Signature=null}[t.$onChild](n){const l=n[t.$nodeName];(l==="data"&&n[t.$namespaceId]===c||l==="Signature"&&n[t.$namespaceId]===o.NamespaceIds.signature.id)&&(this[l]=n),this[t.$appendChild](n)}}class a{static[o.$buildXFAObject](n,l){if(a.hasOwnProperty(n))return a[n](l)}static datasets(n){return new e(n)}static data(n){return new s(n)}}f.DatasetsNamespace=a},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.LocaleSetNamespace=void 0;var t=h(79),o=h(77),c=h(78);const s=t.NamespaceIds.localeSet.id;class e extends o.XFAObject{constructor(F){super(s,"calendarSymbols",!0),this.name="gregorian",this.dayNames=new o.XFAObjectArray(2),this.eraNames=null,this.meridiemNames=null,this.monthNames=new o.XFAObjectArray(2)}}class a extends o.StringObject{constructor(F){super(s,"currencySymbol"),this.name=(0,c.getStringOption)(F.name,["symbol","isoname","decimal"])}}class r extends o.XFAObject{constructor(F){super(s,"currencySymbols",!0),this.currencySymbol=new o.XFAObjectArray(3)}}class n extends o.StringObject{constructor(F){super(s,"datePattern"),this.name=(0,c.getStringOption)(F.name,["full","long","med","short"])}}class l extends o.XFAObject{constructor(F){super(s,"datePatterns",!0),this.datePattern=new o.XFAObjectArray(4)}}class u extends o.ContentObject{constructor(F){super(s,"dateTimeSymbols")}}class d extends o.StringObject{constructor(F){super(s,"day")}}class i extends o.XFAObject{constructor(F){super(s,"dayNames",!0),this.abbr=(0,c.getInteger)({data:F.abbr,defaultValue:0,validate:C=>C===1}),this.day=new o.XFAObjectArray(7)}}class g extends o.StringObject{constructor(F){super(s,"era")}}class x extends o.XFAObject{constructor(F){super(s,"eraNames",!0),this.era=new o.XFAObjectArray(2)}}class m extends o.XFAObject{constructor(F){super(s,"locale",!0),this.desc=F.desc||"",this.name="isoname",this.calendarSymbols=null,this.currencySymbols=null,this.datePatterns=null,this.dateTimeSymbols=null,this.numberPatterns=null,this.numberSymbols=null,this.timePatterns=null,this.typeFaces=null}}class A extends o.XFAObject{constructor(F){super(s,"localeSet",!0),this.locale=new o.XFAObjectArray}}class k extends o.StringObject{constructor(F){super(s,"meridiem")}}class v extends o.XFAObject{constructor(F){super(s,"meridiemNames",!0),this.meridiem=new o.XFAObjectArray(2)}}class _ extends o.StringObject{constructor(F){super(s,"month")}}class K extends o.XFAObject{constructor(F){super(s,"monthNames",!0),this.abbr=(0,c.getInteger)({data:F.abbr,defaultValue:0,validate:C=>C===1}),this.month=new o.XFAObjectArray(12)}}class M extends o.StringObject{constructor(F){super(s,"numberPattern"),this.name=(0,c.getStringOption)(F.name,["full","long","med","short"])}}class j extends o.XFAObject{constructor(F){super(s,"numberPatterns",!0),this.numberPattern=new o.XFAObjectArray(4)}}class O extends o.StringObject{constructor(F){super(s,"numberSymbol"),this.name=(0,c.getStringOption)(F.name,["decimal","grouping","percent","minus","zero"])}}class T extends o.XFAObject{constructor(F){super(s,"numberSymbols",!0),this.numberSymbol=new o.XFAObjectArray(5)}}class R extends o.StringObject{constructor(F){super(s,"timePattern"),this.name=(0,c.getStringOption)(F.name,["full","long","med","short"])}}class y extends o.XFAObject{constructor(F){super(s,"timePatterns",!0),this.timePattern=new o.XFAObjectArray(4)}}class p extends o.XFAObject{constructor(F){super(s,"typeFace",!0),this.name=F.name|""}}class P extends o.XFAObject{constructor(F){super(s,"typeFaces",!0),this.typeFace=new o.XFAObjectArray}}class E{static[t.$buildXFAObject](F,C){if(E.hasOwnProperty(F))return E[F](C)}static calendarSymbols(F){return new e(F)}static currencySymbol(F){return new a(F)}static currencySymbols(F){return new r(F)}static datePattern(F){return new n(F)}static datePatterns(F){return new l(F)}static dateTimeSymbols(F){return new u(F)}static day(F){return new d(F)}static dayNames(F){return new i(F)}static era(F){return new g(F)}static eraNames(F){return new x(F)}static locale(F){return new m(F)}static localeSet(F){return new A(F)}static meridiem(F){return new k(F)}static meridiemNames(F){return new v(F)}static month(F){return new _(F)}static monthNames(F){return new K(F)}static numberPattern(F){return new M(F)}static numberPatterns(F){return new j(F)}static numberSymbol(F){return new O(F)}static numberSymbols(F){return new T(F)}static timePattern(F){return new R(F)}static timePatterns(F){return new y(F)}static typeFace(F){return new p(F)}static typeFaces(F){return new P(F)}}f.LocaleSetNamespace=E},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.SignatureNamespace=void 0;var t=h(79),o=h(77);const c=t.NamespaceIds.signature.id;class s extends o.XFAObject{constructor(r){super(c,"signature",!0)}}class e{static[t.$buildXFAObject](r,n){if(e.hasOwnProperty(r))return e[r](n)}static signature(r){return new s(r)}}f.SignatureNamespace=e},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.StylesheetNamespace=void 0;var t=h(79),o=h(77);const c=t.NamespaceIds.stylesheet.id;class s extends o.XFAObject{constructor(r){super(c,"stylesheet",!0)}}class e{static[t.$buildXFAObject](r,n){if(e.hasOwnProperty(r))return e[r](n)}static stylesheet(r){return new s(r)}}f.StylesheetNamespace=e},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.XdpNamespace=void 0;var t=h(79),o=h(77);const c=t.NamespaceIds.xdp.id;class s extends o.XFAObject{constructor(r){super(c,"xdp",!0),this.uuid=r.uuid||"",this.timeStamp=r.timeStamp||"",this.config=null,this.connectionSet=null,this.datasets=null,this.localeSet=null,this.stylesheet=new o.XFAObjectArray,this.template=null}[o.$onChildCheck](r){const n=t.NamespaceIds[r[o.$nodeName]];return n&&r[o.$namespaceId]===n.id}}class e{static[t.$buildXFAObject](r,n){if(e.hasOwnProperty(r))return e[r](n)}static xdp(r){return new s(r)}}f.XdpNamespace=e},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.XhtmlNamespace=void 0;var t=h(77),o=h(79),c=h(84),s=h(78);const e=o.NamespaceIds.xhtml.id,a=Symbol(),r=new Set(["color","font","font-family","font-size","font-stretch","font-style","font-weight","margin","margin-bottom","margin-left","margin-right","margin-top","letter-spacing","line-height","orphans","page-break-after","page-break-before","page-break-inside","tab-interval","tab-stop","text-align","text-decoration","text-indent","vertical-align","widows","kerning-mode","xfa-font-horizontal-scale","xfa-font-vertical-scale","xfa-spacerun","xfa-tab-stops"]),n=new Map([["page-break-after","breakAfter"],["page-break-before","breakBefore"],["page-break-inside","breakInside"],["kerning-mode",S=>S==="none"?"none":"normal"],["xfa-font-horizontal-scale",S=>`scaleX(${Math.max(0,Math.min(parseInt(S)/100)).toFixed(2)})`],["xfa-font-vertical-scale",S=>`scaleY(${Math.max(0,Math.min(parseInt(S)/100)).toFixed(2)})`],["xfa-spacerun",""],["xfa-tab-stops",""],["font-size",(S,F)=>(S=F.fontSize=(0,s.getMeasurement)(S),(0,c.measureToString)(.99*S))],["letter-spacing",S=>(0,c.measureToString)((0,s.getMeasurement)(S))],["line-height",S=>(0,c.measureToString)((0,s.getMeasurement)(S))],["margin",S=>(0,c.measureToString)((0,s.getMeasurement)(S))],["margin-bottom",S=>(0,c.measureToString)((0,s.getMeasurement)(S))],["margin-left",S=>(0,c.measureToString)((0,s.getMeasurement)(S))],["margin-right",S=>(0,c.measureToString)((0,s.getMeasurement)(S))],["margin-top",S=>(0,c.measureToString)((0,s.getMeasurement)(S))],["text-indent",S=>(0,c.measureToString)((0,s.getMeasurement)(S))],["font-family",S=>S],["vertical-align",S=>(0,c.measureToString)((0,s.getMeasurement)(S))]]),l=/\s+/g,u=/[\r\n]+/g,d=/\r\n?/g;function i(S,F,C){const b=Object.create(null);if(!S)return b;const D=Object.create(null);for(const[U,X]of S.split(";").map(G=>G.split(":",2))){const G=n.get(U);if(G==="")continue;let Y=X;G&&(typeof G=="string"?Y=G:Y=G(X,D)),U.endsWith("scale")?b.transform?b.transform=`${b[U]} ${Y}`:b.transform=Y:b[U.replaceAll(/-([a-zA-Z])/g,(N,I)=>I.toUpperCase())]=Y}if(b.fontFamily&&(0,c.setFontFamily)({typeface:b.fontFamily,weight:b.fontWeight||"normal",posture:b.fontStyle||"normal",size:D.fontSize||0},F,F[t.$globalData].fontFinder,b),C&&b.verticalAlign&&b.verticalAlign!=="0px"&&b.fontSize){const G=(0,s.getMeasurement)(b.fontSize);b.fontSize=(0,c.measureToString)(G*.583),b.verticalAlign=(0,c.measureToString)(Math.sign((0,s.getMeasurement)(b.verticalAlign))*G*.333)}return C&&b.fontSize&&(b.fontSize=`calc(${b.fontSize} * var(--scale-factor))`),(0,c.fixTextIndent)(b),b}function g(S){return S.style?S.style.trim().split(/\s*;\s*/).filter(F=>!!F).map(F=>F.split(/\s*:\s*/,2)).filter(([F,C])=>(F==="font-family"&&S[t.$globalData].usedTypefaces.add(C),r.has(F))).map(F=>F.join(":")).join(";"):""}const x=new Set(["body","html"]);class m extends t.XmlObject{constructor(F,C){super(e,C),this[a]=!1,this.style=F.style||""}[t.$clean](F){super[t.$clean](F),this.style=g(this)}[t.$acceptWhitespace](){return!x.has(this[t.$nodeName])}[t.$onText](F,C=!1){C?this[a]=!0:(F=F.replace(u,""),this.style.includes("xfa-spacerun:yes")||(F=F.replace(l," "))),F&&(this[t.$content]+=F)}[t.$pushGlyphs](F,C=!0){const b=Object.create(null),D={top:NaN,bottom:NaN,left:NaN,right:NaN};let U=null;for(const[X,G]of this.style.split(";").map(Y=>Y.split(":",2)))switch(X){case"font-family":b.typeface=(0,s.stripQuotes)(G);break;case"font-size":b.size=(0,s.getMeasurement)(G);break;case"font-weight":b.weight=G;break;case"font-style":b.posture=G;break;case"letter-spacing":b.letterSpacing=(0,s.getMeasurement)(G);break;case"margin":const Y=G.split(/ \t/).map(N=>(0,s.getMeasurement)(N));switch(Y.length){case 1:D.top=D.bottom=D.left=D.right=Y[0];break;case 2:D.top=D.bottom=Y[0],D.left=D.right=Y[1];break;case 3:D.top=Y[0],D.bottom=Y[2],D.left=D.right=Y[1];break;case 4:D.top=Y[0],D.left=Y[1],D.bottom=Y[2],D.right=Y[3];break}break;case"margin-top":D.top=(0,s.getMeasurement)(G);break;case"margin-bottom":D.bottom=(0,s.getMeasurement)(G);break;case"margin-left":D.left=(0,s.getMeasurement)(G);break;case"margin-right":D.right=(0,s.getMeasurement)(G);break;case"line-height":U=(0,s.getMeasurement)(G);break}if(F.pushData(b,D,U),this[t.$content])F.addString(this[t.$content]);else for(const X of this[t.$getChildren]()){if(X[t.$nodeName]==="#text"){F.addString(X[t.$content]);continue}X[t.$pushGlyphs](F)}C&&F.popFont()}[t.$toHTML](F){const C=[];if(this[t.$extra]={children:C},this[t.$childrenToHTML]({}),C.length===0&&!this[t.$content])return s.HTMLResult.EMPTY;let b;return this[a]?b=this[t.$content]?this[t.$content].replace(d,`
`):void 0:b=this[t.$content]||void 0,s.HTMLResult.success({name:this[t.$nodeName],attributes:{href:this.href,style:i(this.style,this,this[a])},children:C,value:b})}}class A extends m{constructor(F){super(F,"a"),this.href=(0,c.fixURL)(F.href)||""}}class k extends m{constructor(F){super(F,"b")}[t.$pushGlyphs](F){F.pushFont({weight:"bold"}),super[t.$pushGlyphs](F),F.popFont()}}class v extends m{constructor(F){super(F,"body")}[t.$toHTML](F){const C=super[t.$toHTML](F),{html:b}=C;return b?(b.name="div",b.attributes.class=["xfaRich"],C):s.HTMLResult.EMPTY}}class _ extends m{constructor(F){super(F,"br")}[t.$text](){return`
`}[t.$pushGlyphs](F){F.addString(`
`)}[t.$toHTML](F){return s.HTMLResult.success({name:"br"})}}class K extends m{constructor(F){super(F,"html")}[t.$toHTML](F){const C=[];if(this[t.$extra]={children:C},this[t.$childrenToHTML]({}),C.length===0)return s.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},value:this[t.$content]||""});if(C.length===1){const b=C[0];if(b.attributes&&b.attributes.class.includes("xfaRich"))return s.HTMLResult.success(b)}return s.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},children:C})}}class M extends m{constructor(F){super(F,"i")}[t.$pushGlyphs](F){F.pushFont({posture:"italic"}),super[t.$pushGlyphs](F),F.popFont()}}class j extends m{constructor(F){super(F,"li")}}class O extends m{constructor(F){super(F,"ol")}}class T extends m{constructor(F){super(F,"p")}[t.$pushGlyphs](F){super[t.$pushGlyphs](F,!1),F.addString(`
`),F.addPara(),F.popFont()}[t.$text](){return this[t.$getParent]()[t.$getChildren]().at(-1)===this?super[t.$text]():super[t.$text]()+`
`}}class R extends m{constructor(F){super(F,"span")}}class y extends m{constructor(F){super(F,"sub")}}class p extends m{constructor(F){super(F,"sup")}}class P extends m{constructor(F){super(F,"ul")}}class E{static[o.$buildXFAObject](F,C){if(E.hasOwnProperty(F))return E[F](C)}static a(F){return new A(F)}static b(F){return new k(F)}static body(F){return new v(F)}static br(F){return new _(F)}static html(F){return new K(F)}static i(F){return new M(F)}static li(F){return new j(F)}static ol(F){return new O(F)}static p(F){return new T(F)}static span(F){return new R(F)}static sub(F){return new y(F)}static sup(F){return new p(F)}static ul(F){return new P(F)}}f.XhtmlNamespace=E},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.UnknownNamespace=void 0;var t=h(79),o=h(77);class c{constructor(e){this.namespaceId=e}[t.$buildXFAObject](e,a){return new o.XmlObject(this.namespaceId,e,a)}}f.UnknownNamespace=c},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.DatasetReader=void 0;var t=h(2),o=h(6),c=h(66);function s(r){try{return(0,t.stringToUTF8String)(r)}catch(n){return(0,t.warn)(`UTF-8 decoding failed: "${n}".`),r}}class e extends c.SimpleXMLParser{constructor(n){super(n),this.node=null}onEndElement(n){const l=super.onEndElement(n);if(l&&n==="xfa:datasets")throw this.node=l,new Error("Aborting DatasetXMLParser.")}}class a{constructor(n){if(n.datasets)this.node=new c.SimpleXMLParser({hasAttributes:!0}).parseFromString(n.datasets).documentElement;else{const l=new e({hasAttributes:!0});try{l.parseFromString(n["xdp:xdp"])}catch{}this.node=l.node}}getValue(n){if(!this.node||!n)return"";const l=this.node.searchNode((0,o.parseXFAPath)(n),0);if(!l)return"";const u=l.firstChild;return u&&u.nodeName==="value"?l.children.map(d=>s(d.textContent)):s(l.textContent)}}f.DatasetReader=a},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.XRef=void 0;var t=h(2),o=h(5),c=h(6),s=h(17),e=h(7),a=h(67);class r{constructor(l,u){this.stream=l,this.pdfManager=u,this.entries=[],this.xrefstms=Object.create(null),this._cacheMap=new Map,this._pendingRefs=new o.RefSet,this.stats=new c.DocStats(u.msgHandler),this._newRefNum=null}getNewRef(){return this._newRefNum===null&&(this._newRefNum=this.entries.length||1),o.Ref.get(this._newRefNum++,0)}resetNewRef(){this._newRefNum=null}setStartXRef(l){this.startXRefQueue=[l]}parse(l=!1){let u;l?((0,t.warn)("Indexing all PDF objects"),u=this.indexObjects()):u=this.readXRef(),u.assignXref(this),this.trailer=u;let d;try{d=u.get("Encrypt")}catch(g){if(g instanceof c.MissingDataException)throw g;(0,t.warn)(`XRef.parse - Invalid "Encrypt" reference: "${g}".`)}if(d instanceof o.Dict){const g=u.get("ID"),x=g&&g.length?g[0]:"";d.suppressEncryption=!0,this.encrypt=new a.CipherTransformFactory(d,x,this.pdfManager.password)}let i;try{i=u.get("Root")}catch(g){if(g instanceof c.MissingDataException)throw g;(0,t.warn)(`XRef.parse - Invalid "Root" reference: "${g}".`)}if(i instanceof o.Dict)try{if(i.get("Pages")instanceof o.Dict){this.root=i;return}}catch(g){if(g instanceof c.MissingDataException)throw g;(0,t.warn)(`XRef.parse - Invalid "Pages" reference: "${g}".`)}throw l?new t.InvalidPDFException("Invalid Root reference."):new c.XRefParseException}processXRefTable(l){"tableState"in this||(this.tableState={entryNum:0,streamPos:l.lexer.stream.pos,parserBuf1:l.buf1,parserBuf2:l.buf2});const u=this.readXRefTable(l);if(!(0,o.isCmd)(u,"trailer"))throw new t.FormatError("Invalid XRef table: could not find trailer dictionary");let d=l.getObj();if(!(d instanceof o.Dict)&&d.dict&&(d=d.dict),!(d instanceof o.Dict))throw new t.FormatError("Invalid XRef table: could not parse trailer dictionary");return delete this.tableState,d}readXRefTable(l){const u=l.lexer.stream,d=this.tableState;u.pos=d.streamPos,l.buf1=d.parserBuf1,l.buf2=d.parserBuf2;let i;for(;;){if(!("firstEntryNum"in d)||!("entryCount"in d)){if((0,o.isCmd)(i=l.getObj(),"trailer"))break;d.firstEntryNum=i,d.entryCount=l.getObj()}let g=d.firstEntryNum;const x=d.entryCount;if(!Number.isInteger(g)||!Number.isInteger(x))throw new t.FormatError("Invalid XRef table: wrong types in subsection header");for(let m=d.entryNum;m<x;m++){d.streamPos=u.pos,d.entryNum=m,d.parserBuf1=l.buf1,d.parserBuf2=l.buf2;const A={};A.offset=l.getObj(),A.gen=l.getObj();const k=l.getObj();if(k instanceof o.Cmd)switch(k.cmd){case"f":A.free=!0;break;case"n":A.uncompressed=!0;break}if(!Number.isInteger(A.offset)||!Number.isInteger(A.gen)||!(A.free||A.uncompressed))throw new t.FormatError(`Invalid entry in XRef subsection: ${g}, ${x}`);m===0&&A.free&&g===1&&(g=0),this.entries[m+g]||(this.entries[m+g]=A)}d.entryNum=0,d.streamPos=u.pos,d.parserBuf1=l.buf1,d.parserBuf2=l.buf2,delete d.firstEntryNum,delete d.entryCount}if(this.entries[0]&&!this.entries[0].free)throw new t.FormatError("Invalid XRef table: unexpected first object");return i}processXRefStream(l){if(!("streamState"in this)){const u=l.dict,d=u.get("W");let i=u.get("Index");i||(i=[0,u.get("Size")]),this.streamState={entryRanges:i,byteWidths:d,entryNum:0,streamPos:l.pos}}return this.readXRefStream(l),delete this.streamState,l.dict}readXRefStream(l){const u=this.streamState;l.pos=u.streamPos;const[d,i,g]=u.byteWidths,x=u.entryRanges;for(;x.length>0;){const[m,A]=x;if(!Number.isInteger(m)||!Number.isInteger(A))throw new t.FormatError(`Invalid XRef range fields: ${m}, ${A}`);if(!Number.isInteger(d)||!Number.isInteger(i)||!Number.isInteger(g))throw new t.FormatError(`Invalid XRef entry fields length: ${m}, ${A}`);for(let k=u.entryNum;k<A;++k){u.entryNum=k,u.streamPos=l.pos;let v=0,_=0,K=0;for(let j=0;j<d;++j){const O=l.getByte();if(O===-1)throw new t.FormatError("Invalid XRef byteWidths 'type'.");v=v<<8|O}d===0&&(v=1);for(let j=0;j<i;++j){const O=l.getByte();if(O===-1)throw new t.FormatError("Invalid XRef byteWidths 'offset'.");_=_<<8|O}for(let j=0;j<g;++j){const O=l.getByte();if(O===-1)throw new t.FormatError("Invalid XRef byteWidths 'generation'.");K=K<<8|O}const M={};switch(M.offset=_,M.gen=K,v){case 0:M.free=!0;break;case 1:M.uncompressed=!0;break;case 2:break;default:throw new t.FormatError(`Invalid XRef entry type: ${v}`)}this.entries[m+k]||(this.entries[m+k]=M)}u.entryNum=0,u.streamPos=l.pos,x.splice(0,2)}}indexObjects(){function m(C,b){let D="",U=C[b];for(;U!==10&&U!==13&&U!==60&&!(++b>=C.length);)D+=String.fromCharCode(U),U=C[b];return D}function A(C,b,D){const U=D.length,X=C.length;let G=0;for(;b<X;){let Y=0;for(;Y<U&&C[b+Y]===D[Y];)++Y;if(Y>=U)break;b++,G++}return G}const k=/^(\d+)\s+(\d+)\s+obj\b/,v=/\bendobj[\b\s]$/,_=/\s+(\d+\s+\d+\s+obj[\b\s<])$/,K=25,M=new Uint8Array([116,114,97,105,108,101,114]),j=new Uint8Array([115,116,97,114,116,120,114,101,102]),O=new Uint8Array([111,98,106]),T=new Uint8Array([47,88,82,101,102]);this.entries.length=0,this._cacheMap.clear();const R=this.stream;R.pos=0;const y=R.getBytes(),p=y.length;let P=R.start;const E=[],S=[];for(;P<p;){let C=y[P];if(C===9||C===10||C===13||C===32){++P;continue}if(C===37){do{if(++P,P>=p)break;C=y[P]}while(C!==10&&C!==13);continue}const b=m(y,P);let D;if(b.startsWith("xref")&&(b.length===4||/\s/.test(b[4])))P+=A(y,P,M),E.push(P),P+=A(y,P,j);else if(D=k.exec(b)){const U=D[1]|0,X=D[2]|0;let G,Y=P+b.length,N=!1;if(!this.entries[U])N=!0;else if(this.entries[U].gen===X)try{new s.Parser({lexer:new s.Lexer(R.makeSubStream(Y))}).getObj(),N=!0}catch($){$ instanceof c.ParserEOFException?(0,t.warn)(`indexObjects -- checking object (${b}): "${$}".`):N=!0}for(N&&(this.entries[U]={offset:P-R.start,gen:X,uncompressed:!0});Y<y.length;){const $=Y+A(y,Y,O)+4;G=$-P;const W=Math.max($-K,Y),z=(0,t.bytesToString)(y.subarray(W,$));if(v.test(z))break;{const B=_.exec(z);if(B&&B[1]){(0,t.warn)('indexObjects: Found new "obj" inside of another "obj", caused by missing "endobj" -- trying to recover.'),G-=B[1].length;break}}Y=$}const I=y.subarray(P,P+G),L=A(I,0,T);L<G&&I[L+5]<64&&(S.push(P-R.start),this.xrefstms[P-R.start]=1),P+=G}else b.startsWith("trailer")&&(b.length===7||/\s/.test(b[7]))?(E.push(P),P+=A(y,P,j)):P+=b.length+1}for(let C=0,b=S.length;C<b;++C)this.startXRefQueue.push(S[C]),this.readXRef(!0);let F;for(let C=0,b=E.length;C<b;++C){R.pos=E[C];const D=new s.Parser({lexer:new s.Lexer(R),xref:this,allowStreams:!0,recoveryMode:!0}),U=D.getObj();if(!(0,o.isCmd)(U,"trailer"))continue;const X=D.getObj();if(X instanceof o.Dict){try{const G=X.get("Root");if(!(G instanceof o.Dict))continue;const Y=G.get("Pages");if(!(Y instanceof o.Dict))continue;const N=Y.get("Count");if(!Number.isInteger(N))continue}catch{continue}if(X.has("ID"))return X;F=X}}if(F)return F;if(this.topDict)return this.topDict;throw new t.InvalidPDFException("Invalid PDF structure.")}readXRef(l=!1){const u=this.stream,d=new Set;try{for(;this.startXRefQueue.length;){const i=this.startXRefQueue[0];if(d.has(i)){(0,t.warn)("readXRef - skipping XRef table since it was already parsed."),this.startXRefQueue.shift();continue}d.add(i),u.pos=i+u.start;const g=new s.Parser({lexer:new s.Lexer(u),xref:this,allowStreams:!0});let x=g.getObj(),m;if((0,o.isCmd)(x,"xref")){if(m=this.processXRefTable(g),this.topDict||(this.topDict=m),x=m.get("XRefStm"),Number.isInteger(x)){const A=x;A in this.xrefstms||(this.xrefstms[A]=1,this.startXRefQueue.push(A))}}else if(Number.isInteger(x)){if(!Number.isInteger(g.getObj())||!(0,o.isCmd)(g.getObj(),"obj")||!((x=g.getObj())instanceof e.BaseStream))throw new t.FormatError("Invalid XRef stream");if(m=this.processXRefStream(x),this.topDict||(this.topDict=m),!m)throw new t.FormatError("Failed to read XRef stream")}else throw new t.FormatError("Invalid XRef stream header");x=m.get("Prev"),Number.isInteger(x)?this.startXRefQueue.push(x):x instanceof o.Ref&&this.startXRefQueue.push(x.num),this.startXRefQueue.shift()}return this.topDict}catch(i){if(i instanceof c.MissingDataException)throw i;(0,t.info)("(while reading XRef): "+i),this.startXRefQueue.shift()}if(!l)throw new c.XRefParseException}getEntry(l){const u=this.entries[l];return u&&!u.free&&u.offset?u:null}fetchIfRef(l,u=!1){return l instanceof o.Ref?this.fetch(l,u):l}fetch(l,u=!1){if(!(l instanceof o.Ref))throw new Error("ref object is not a reference");const d=l.num,i=this._cacheMap.get(d);if(i!==void 0)return i instanceof o.Dict&&!i.objId&&(i.objId=l.toString()),i;let g=this.getEntry(d);if(g===null)return this._cacheMap.set(d,g),g;if(this._pendingRefs.has(l))return this._pendingRefs.remove(l),(0,t.warn)(`Ignoring circular reference: ${l}.`),o.CIRCULAR_REF;this._pendingRefs.put(l);try{g.uncompressed?g=this.fetchUncompressed(l,g,u):g=this.fetchCompressed(l,g,u),this._pendingRefs.remove(l)}catch(x){throw this._pendingRefs.remove(l),x}return g instanceof o.Dict?g.objId=l.toString():g instanceof e.BaseStream&&(g.dict.objId=l.toString()),g}fetchUncompressed(l,u,d=!1){const i=l.gen;let g=l.num;if(u.gen!==i)throw new c.XRefEntryException(`Inconsistent generation in XRef: ${l}`);const x=this.stream.makeSubStream(u.offset+this.stream.start),m=new s.Parser({lexer:new s.Lexer(x),xref:this,allowStreams:!0}),A=m.getObj(),k=m.getObj(),v=m.getObj();if(A!==g||k!==i||!(v instanceof o.Cmd))throw new c.XRefEntryException(`Bad (uncompressed) XRef entry: ${l}`);if(v.cmd!=="obj"){if(v.cmd.startsWith("obj")&&(g=parseInt(v.cmd.substring(3),10),!Number.isNaN(g)))return g;throw new c.XRefEntryException(`Bad (uncompressed) XRef entry: ${l}`)}return this.encrypt&&!d?u=m.getObj(this.encrypt.createCipherTransform(g,i)):u=m.getObj(),u instanceof e.BaseStream||this._cacheMap.set(g,u),u}fetchCompressed(l,u,d=!1){const i=u.offset,g=this.fetch(o.Ref.get(i,0));if(!(g instanceof e.BaseStream))throw new t.FormatError("bad ObjStm stream");const x=g.dict.get("First"),m=g.dict.get("N");if(!Number.isInteger(x)||!Number.isInteger(m))throw new t.FormatError("invalid first and n parameters for ObjStm stream");let A=new s.Parser({lexer:new s.Lexer(g),xref:this,allowStreams:!0});const k=new Array(m),v=new Array(m);for(let M=0;M<m;++M){const j=A.getObj();if(!Number.isInteger(j))throw new t.FormatError(`invalid object number in the ObjStm stream: ${j}`);const O=A.getObj();if(!Number.isInteger(O))throw new t.FormatError(`invalid object offset in the ObjStm stream: ${O}`);k[M]=j,v[M]=O}const _=(g.start||0)+x,K=new Array(m);for(let M=0;M<m;++M){const j=M<m-1?v[M+1]-v[M]:void 0;if(j<0)throw new t.FormatError("Invalid offset in the ObjStm stream.");A=new s.Parser({lexer:new s.Lexer(g.makeSubStream(_+v[M],j,g.dict)),xref:this,allowStreams:!0});const O=A.getObj();if(K[M]=O,O instanceof e.BaseStream)continue;const T=k[M],R=this.entries[T];R&&R.offset===i&&R.gen===M&&this._cacheMap.set(T,O)}if(u=K[u.gen],u===void 0)throw new c.XRefEntryException(`Bad (compressed) XRef entry: ${l}`);return u}async fetchIfRefAsync(l,u){return l instanceof o.Ref?this.fetchAsync(l,u):l}async fetchAsync(l,u){try{return this.fetch(l,u)}catch(d){if(!(d instanceof c.MissingDataException))throw d;return await this.pdfManager.requestRange(d.begin,d.end),this.fetchAsync(l,u)}}getCatalogObj(){return this.root}}f.XRef=r},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.MessageHandler=void 0;var t=h(2);const o={UNKNOWN:0,DATA:1,ERROR:2},c={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function s(a){switch(a instanceof Error||typeof a=="object"&&a!==null||(0,t.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new t.AbortException(a.message);case"MissingPDFException":return new t.MissingPDFException(a.message);case"PasswordException":return new t.PasswordException(a.message,a.code);case"UnexpectedResponseException":return new t.UnexpectedResponseException(a.message,a.status);case"UnknownErrorException":return new t.UnknownErrorException(a.message,a.details);default:return new t.UnknownErrorException(a.message,a.toString())}}class e{constructor(r,n,l){this.sourceName=r,this.targetName=n,this.comObj=l,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=u=>{const d=u.data;if(d.targetName!==this.sourceName)return;if(d.stream){this._processStreamMessage(d);return}if(d.callback){const g=d.callbackId,x=this.callbackCapabilities[g];if(!x)throw new Error(`Cannot resolve callback ${g}`);if(delete this.callbackCapabilities[g],d.callback===o.DATA)x.resolve(d.data);else if(d.callback===o.ERROR)x.reject(s(d.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[d.action];if(!i)throw new Error(`Unknown action from worker: ${d.action}`);if(d.callbackId){const g=this.sourceName,x=d.sourceName;new Promise(function(m){m(i(d.data))}).then(function(m){l.postMessage({sourceName:g,targetName:x,callback:o.DATA,callbackId:d.callbackId,data:m})},function(m){l.postMessage({sourceName:g,targetName:x,callback:o.ERROR,callbackId:d.callbackId,reason:s(m)})});return}if(d.streamId){this._createStreamSink(d);return}i(d.data)},l.addEventListener("message",this._onComObjOnMessage)}on(r,n){const l=this.actionHandler;if(l[r])throw new Error(`There is already an actionName called "${r}"`);l[r]=n}send(r,n,l){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:r,data:n},l)}sendWithPromise(r,n,l){const u=this.callbackId++,d=(0,t.createPromiseCapability)();this.callbackCapabilities[u]=d;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:r,callbackId:u,data:n},l)}catch(i){d.reject(i)}return d.promise}sendWithStream(r,n,l,u){const d=this.streamId++,i=this.sourceName,g=this.targetName,x=this.comObj;return new ReadableStream({start:m=>{const A=(0,t.createPromiseCapability)();return this.streamControllers[d]={controller:m,startCall:A,pullCall:null,cancelCall:null,isClosed:!1},x.postMessage({sourceName:i,targetName:g,action:r,streamId:d,data:n,desiredSize:m.desiredSize},u),A.promise},pull:m=>{const A=(0,t.createPromiseCapability)();return this.streamControllers[d].pullCall=A,x.postMessage({sourceName:i,targetName:g,stream:c.PULL,streamId:d,desiredSize:m.desiredSize}),A.promise},cancel:m=>{(0,t.assert)(m instanceof Error,"cancel must have a valid reason");const A=(0,t.createPromiseCapability)();return this.streamControllers[d].cancelCall=A,this.streamControllers[d].isClosed=!0,x.postMessage({sourceName:i,targetName:g,stream:c.CANCEL,streamId:d,reason:s(m)}),A.promise}},l)}_createStreamSink(r){const n=r.streamId,l=this.sourceName,u=r.sourceName,d=this.comObj,i=this,g=this.actionHandler[r.action],x={enqueue(m,A=1,k){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=A,v>0&&this.desiredSize<=0&&(this.sinkCapability=(0,t.createPromiseCapability)(),this.ready=this.sinkCapability.promise),d.postMessage({sourceName:l,targetName:u,stream:c.ENQUEUE,streamId:n,chunk:m},k)},close(){this.isCancelled||(this.isCancelled=!0,d.postMessage({sourceName:l,targetName:u,stream:c.CLOSE,streamId:n}),delete i.streamSinks[n])},error(m){(0,t.assert)(m instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,d.postMessage({sourceName:l,targetName:u,stream:c.ERROR,streamId:n,reason:s(m)}))},sinkCapability:(0,t.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:r.desiredSize,ready:null};x.sinkCapability.resolve(),x.ready=x.sinkCapability.promise,this.streamSinks[n]=x,new Promise(function(m){m(g(r.data,x))}).then(function(){d.postMessage({sourceName:l,targetName:u,stream:c.START_COMPLETE,streamId:n,success:!0})},function(m){d.postMessage({sourceName:l,targetName:u,stream:c.START_COMPLETE,streamId:n,reason:s(m)})})}_processStreamMessage(r){const n=r.streamId,l=this.sourceName,u=r.sourceName,d=this.comObj,i=this.streamControllers[n],g=this.streamSinks[n];switch(r.stream){case c.START_COMPLETE:r.success?i.startCall.resolve():i.startCall.reject(s(r.reason));break;case c.PULL_COMPLETE:r.success?i.pullCall.resolve():i.pullCall.reject(s(r.reason));break;case c.PULL:if(!g){d.postMessage({sourceName:l,targetName:u,stream:c.PULL_COMPLETE,streamId:n,success:!0});break}g.desiredSize<=0&&r.desiredSize>0&&g.sinkCapability.resolve(),g.desiredSize=r.desiredSize,new Promise(function(x){x(g.onPull&&g.onPull())}).then(function(){d.postMessage({sourceName:l,targetName:u,stream:c.PULL_COMPLETE,streamId:n,success:!0})},function(x){d.postMessage({sourceName:l,targetName:u,stream:c.PULL_COMPLETE,streamId:n,reason:s(x)})});break;case c.ENQUEUE:if((0,t.assert)(i,"enqueue should have stream controller"),i.isClosed)break;i.controller.enqueue(r.chunk);break;case c.CLOSE:if((0,t.assert)(i,"close should have stream controller"),i.isClosed)break;i.isClosed=!0,i.controller.close(),this._deleteStreamController(i,n);break;case c.ERROR:(0,t.assert)(i,"error should have stream controller"),i.controller.error(s(r.reason)),this._deleteStreamController(i,n);break;case c.CANCEL_COMPLETE:r.success?i.cancelCall.resolve():i.cancelCall.reject(s(r.reason)),this._deleteStreamController(i,n);break;case c.CANCEL:if(!g)break;new Promise(function(x){x(g.onCancel&&g.onCancel(s(r.reason)))}).then(function(){d.postMessage({sourceName:l,targetName:u,stream:c.CANCEL_COMPLETE,streamId:n,success:!0})},function(x){d.postMessage({sourceName:l,targetName:u,stream:c.CANCEL_COMPLETE,streamId:n,reason:s(x)})}),g.sinkCapability.reject(s(r.reason)),g.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(r,n){await Promise.allSettled([r.startCall&&r.startCall.promise,r.pullCall&&r.pullCall.promise,r.cancelCall&&r.cancelCall.promise]),delete this.streamControllers[n]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}f.MessageHandler=e},(ge,f,h)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PDFWorkerStream=void 0;var t=h(2);class o{constructor(a){this._msgHandler=a,this._contentLength=null,this._fullRequestReader=null,this._rangeRequestReaders=[]}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFWorkerStream.getFullReader can only be called once."),this._fullRequestReader=new c(this._msgHandler),this._fullRequestReader}getRangeReader(a,r){const n=new s(a,r,this._msgHandler);return this._rangeRequestReaders.push(n),n}cancelAllRequests(a){this._fullRequestReader&&this._fullRequestReader.cancel(a);for(const r of this._rangeRequestReaders.slice(0))r.cancel(a)}}f.PDFWorkerStream=o;class c{constructor(a){this._msgHandler=a,this.onProgress=null,this._contentLength=null,this._isRangeSupported=!1,this._isStreamingSupported=!1;const r=this._msgHandler.sendWithStream("GetReader");this._reader=r.getReader(),this._headersReady=this._msgHandler.sendWithPromise("ReaderHeadersReady").then(n=>{this._isStreamingSupported=n.isStreamingSupported,this._isRangeSupported=n.isRangeSupported,this._contentLength=n.contentLength})}get headersReady(){return this._headersReady}get contentLength(){return this._contentLength}get isStreamingSupported(){return this._isStreamingSupported}get isRangeSupported(){return this._isRangeSupported}async read(){const{value:a,done:r}=await this._reader.read();return r?{value:void 0,done:!0}:{value:a.buffer,done:!1}}cancel(a){this._reader.cancel(a)}}class s{constructor(a,r,n){this._msgHandler=n,this.onProgress=null;const l=this._msgHandler.sendWithStream("GetRangeReader",{begin:a,end:r});this._reader=l.getReader()}get isStreamingSupported(){return!1}async read(){const{value:a,done:r}=await this._reader.read();return r?{value:void 0,done:!0}:{value:a.buffer,done:!1}}cancel(a){this._reader.cancel(a)}}}],pe={};function de(ge){var f=pe[ge];if(f!==void 0)return f.exports;var h=pe[ge]={exports:{}};return Be[ge](h,h.exports,de),h.exports}de.d=(ge,f)=>{for(var h in f)de.o(f,h)&&!de.o(ge,h)&&Object.defineProperty(ge,h,{enumerable:!0,get:f[h]})},de.o=(ge,f)=>Object.prototype.hasOwnProperty.call(ge,f),de.r=ge=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ge,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ge,"__esModule",{value:!0})};var De={};return(()=>{var ge=De;Object.defineProperty(ge,"__esModule",{value:!0}),Object.defineProperty(ge,"WorkerMessageHandler",{enumerable:!0,get:function(){return f.WorkerMessageHandler}});var f=de(1)})(),De})())})(pdf_worker$1);const pdf_worker=getDefaultExportFromCjs(pdf_workerExports),pdfjsWorker=_mergeNamespaces({__proto__:null,default:pdf_worker},[pdf_workerExports]);var fabric={};(function(Me){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var V=V||{version:"5.3.0"};if(Me.fabric=V,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?V.document=document:V.document=document.implementation.createHTMLDocument(""),V.window=window;else{var Be=require$$2,pe=new Be.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;V.document=pe.document,V.jsdomImplForWrapper=require$$2.implForWrapper,V.nodeCanvas=require$$2.Canvas,V.window=pe,DOMParser=V.window.DOMParser}V.isTouchSupported="ontouchstart"in V.window||"ontouchstart"in V.document||V.window&&V.window.navigator&&V.window.navigator.maxTouchPoints>0,V.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",V.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],V.DPI=96,V.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",V.commaWsp="(?:\\s+,?\\s*|,\\s*)",V.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,V.reNonWord=/[ \n\.,;!\?\-]/,V.fontPaths={},V.iMatrix=[1,0,0,1,0,0],V.svgNS="http://www.w3.org/2000/svg",V.perfLimitSizeTotal=2097152,V.maxCacheSideLimit=4096,V.minCacheSideLimit=256,V.charWidthsCache={},V.textureSize=2048,V.disableStyleCopyPaste=!1,V.enableGLFiltering=!0,V.devicePixelRatio=V.window.devicePixelRatio||V.window.webkitDevicePixelRatio||V.window.mozDevicePixelRatio||1,V.browserShadowBlurConstant=1,V.arcToSegmentsCache={},V.boundsOfCurveCache={},V.cachesBoundsOfCurve=!0,V.forceGLPutImageData=!1,V.initFilterBackend=function(){if(V.enableGLFiltering&&V.isWebglSupported&&V.isWebglSupported(V.textureSize))return console.log("max texture size: "+V.maxTextureSize),new V.WebglFilterBackend({tileSize:V.textureSize});if(V.Canvas2dFilterBackend)return new V.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=V),function(){function f(e,a){if(this.__eventListeners[e]){var r=this.__eventListeners[e];a?r[r.indexOf(a)]=!1:V.util.array.fill(r,!1)}}function h(e,a){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var r in e)this.on(r,e[r]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(a);return this}function t(e,a){var r=function(){a.apply(this,arguments),this.off(e,r)}.bind(this);this.on(e,r)}function o(e,a){if(arguments.length===1)for(var r in e)t.call(this,r,e[r]);else t.call(this,e,a);return this}function c(e,a){if(!this.__eventListeners)return this;if(arguments.length===0)for(e in this.__eventListeners)f.call(this,e);else if(arguments.length===1&&typeof arguments[0]=="object")for(var r in e)f.call(this,r,e[r]);else f.call(this,e,a);return this}function s(e,a){if(!this.__eventListeners)return this;var r=this.__eventListeners[e];if(!r)return this;for(var n=0,l=r.length;n<l;n++)r[n]&&r[n].call(this,a||{});return this.__eventListeners[e]=r.filter(function(u){return u!==!1}),this}V.Observable={fire:s,on:h,once:o,off:c}}(),V.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var f=0,h=arguments.length;f<h;f++)this._onObjectAdded(arguments[f]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(f,h,t){var o=this._objects;return t?o[h]=f:o.splice(h,0,f),this._onObjectAdded&&this._onObjectAdded(f),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var f=this._objects,h,t=!1,o=0,c=arguments.length;o<c;o++)h=f.indexOf(arguments[o]),h!==-1&&(t=!0,f.splice(h,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[o]));return this.renderOnAddRemove&&t&&this.requestRenderAll(),this},forEachObject:function(f,h){for(var t=this.getObjects(),o=0,c=t.length;o<c;o++)f.call(h,t[o],o,t);return this},getObjects:function(f){return typeof f>"u"?this._objects.concat():this._objects.filter(function(h){return h.type===f})},item:function(f){return this._objects[f]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(f,h){return this._objects.indexOf(f)>-1?!0:h?this._objects.some(function(t){return typeof t.contains=="function"&&t.contains(f,!0)}):!1},complexity:function(){return this._objects.reduce(function(f,h){return f+=h.complexity?h.complexity():0,f},0)}},V.CommonMethods={_setOptions:function(f){for(var h in f)this.set(h,f[h])},_initGradient:function(f,h){f&&f.colorStops&&!(f instanceof V.Gradient)&&this.set(h,new V.Gradient(f))},_initPattern:function(f,h,t){f&&f.source&&!(f instanceof V.Pattern)?this.set(h,new V.Pattern(f,t)):t&&t()},_setObject:function(f){for(var h in f)this._set(h,f[h])},set:function(f,h){return typeof f=="object"?this._setObject(f):this._set(f,h),this},_set:function(f,h){this[f]=h},toggle:function(f){var h=this.get(f);return typeof h=="boolean"&&this.set(f,!h),this},get:function(f){return this[f]}},function(f){var h=Math.sqrt,t=Math.atan2,o=Math.pow,c=Math.PI/180,s=Math.PI/2;V.util={cos:function(e){if(e===0)return 1;e<0&&(e=-e);var a=e/s;switch(a){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},sin:function(e){if(e===0)return 0;var a=e/s,r=1;switch(e<0&&(r=-1),a){case 1:return r;case 2:return 0;case 3:return-r}return Math.sin(e)},removeFromArray:function(e,a){var r=e.indexOf(a);return r!==-1&&e.splice(r,1),e},getRandomInt:function(e,a){return Math.floor(Math.random()*(a-e+1))+e},degreesToRadians:function(e){return e*c},radiansToDegrees:function(e){return e/c},rotatePoint:function(e,a,r){var n=new V.Point(e.x-a.x,e.y-a.y),l=V.util.rotateVector(n,r);return new V.Point(l.x,l.y).addEquals(a)},rotateVector:function(e,a){var r=V.util.sin(a),n=V.util.cos(a),l=e.x*n-e.y*r,u=e.x*r+e.y*n;return{x:l,y:u}},createVector:function(e,a){return new V.Point(a.x-e.x,a.y-e.y)},calcAngleBetweenVectors:function(e,a){return Math.acos((e.x*a.x+e.y*a.y)/(Math.hypot(e.x,e.y)*Math.hypot(a.x,a.y)))},getHatVector:function(e){return new V.Point(e.x,e.y).multiply(1/Math.hypot(e.x,e.y))},getBisector:function(e,a,r){var n=V.util.createVector(e,a),l=V.util.createVector(e,r),u=V.util.calcAngleBetweenVectors(n,l),d=V.util.calcAngleBetweenVectors(V.util.rotateVector(n,u),l),i=u*(d===0?1:-1)/2;return{vector:V.util.getHatVector(V.util.rotateVector(n,i)),angle:u}},projectStrokeOnPoints:function(e,a,r){var n=[],l=a.strokeWidth/2,u=a.strokeUniform?new V.Point(1/a.scaleX,1/a.scaleY):new V.Point(1,1),d=function(i){var g=l/Math.hypot(i.x,i.y);return new V.Point(i.x*g*u.x,i.y*g*u.y)};return e.length<=1||e.forEach(function(i,g){var x=new V.Point(i.x,i.y),m,A;g===0?(A=e[g+1],m=r?d(V.util.createVector(A,x)).addEquals(x):e[e.length-1]):g===e.length-1?(m=e[g-1],A=r?d(V.util.createVector(m,x)).addEquals(x):e[0]):(m=e[g-1],A=e[g+1]);var k=V.util.getBisector(x,m,A),v=k.vector,_=k.angle,K,M;if(a.strokeLineJoin==="miter"&&(K=-l/Math.sin(_/2),M=new V.Point(v.x*K*u.x,v.y*K*u.y),Math.hypot(M.x,M.y)/l<=a.strokeMiterLimit)){n.push(x.add(M)),n.push(x.subtract(M));return}K=-l*Math.SQRT2,M=new V.Point(v.x*K*u.x,v.y*K*u.y),n.push(x.add(M)),n.push(x.subtract(M))}),n},transformPoint:function(e,a,r){return r?new V.Point(a[0]*e.x+a[2]*e.y,a[1]*e.x+a[3]*e.y):new V.Point(a[0]*e.x+a[2]*e.y+a[4],a[1]*e.x+a[3]*e.y+a[5])},makeBoundingBoxFromPoints:function(e,a){if(a)for(var r=0;r<e.length;r++)e[r]=V.util.transformPoint(e[r],a);var n=[e[0].x,e[1].x,e[2].x,e[3].x],l=V.util.array.min(n),u=V.util.array.max(n),d=u-l,i=[e[0].y,e[1].y,e[2].y,e[3].y],g=V.util.array.min(i),x=V.util.array.max(i),m=x-g;return{left:l,top:g,width:d,height:m}},invertTransform:function(e){var a=1/(e[0]*e[3]-e[1]*e[2]),r=[a*e[3],-a*e[1],-a*e[2],a*e[0]],n=V.util.transformPoint({x:e[4],y:e[5]},r,!0);return r[4]=-n.x,r[5]=-n.y,r},toFixed:function(e,a){return parseFloat(Number(e).toFixed(a))},parseUnit:function(e,a){var r=/\D{0,2}$/.exec(e),n=parseFloat(e);switch(a||(a=V.Text.DEFAULT_SVG_FONT_SIZE),r[0]){case"mm":return n*V.DPI/25.4;case"cm":return n*V.DPI/2.54;case"in":return n*V.DPI;case"pt":return n*V.DPI/72;case"pc":return n*V.DPI/72*12;case"em":return n*a;default:return n}},falseFunction:function(){return!1},getKlass:function(e,a){return e=V.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),V.util.resolveNamespace(a)[e]},getSvgAttributes:function(e){var a=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":a=a.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":a=a.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":a=a.concat(["offset","stop-color","stop-opacity"]);break}return a},resolveNamespace:function(e){if(!e)return V;var a=e.split("."),r=a.length,n,l=f||V.window;for(n=0;n<r;++n)l=l[a[n]];return l},loadImage:function(e,a,r,n){if(!e){a&&a.call(r,e);return}var l=V.util.createImage(),u=function(){a&&a.call(r,l,!1),l=l.onload=l.onerror=null};l.onload=u,l.onerror=function(){V.log("Error loading "+l.src),a&&a.call(r,null,!0),l=l.onload=l.onerror=null},e.indexOf("data")!==0&&n!==void 0&&n!==null&&(l.crossOrigin=n),e.substring(0,14)==="data:image/svg"&&(l.onload=null,V.util.loadImageInDom(l,u)),l.src=e},loadImageInDom:function(e,a){var r=V.document.createElement("div");r.style.width=r.style.height="1px",r.style.left=r.style.top="-100%",r.style.position="absolute",r.appendChild(e),V.document.querySelector("body").appendChild(r),e.onload=function(){a(),r.parentNode.removeChild(r),r=null}},enlivenObjects:function(e,a,r,n){e=e||[];var l=[],u=0,d=e.length;function i(){++u===d&&a&&a(l.filter(function(g){return g}))}if(!d){a&&a(l);return}e.forEach(function(g,x){if(!g||!g.type){i();return}var m=V.util.getKlass(g.type,r);m.fromObject(g,function(A,k){k||(l[x]=A),n&&n(g,A,k),i()})})},enlivenObjectEnlivables:function(e,a,r){var n=V.Object.ENLIVEN_PROPS.filter(function(l){return!!e[l]});V.util.enlivenObjects(n.map(function(l){return e[l]}),function(l){var u={};n.forEach(function(d,i){u[d]=l[i],a&&(a[d]=l[i])}),r&&r(u)})},enlivenPatterns:function(e,a){e=e||[];function r(){++l===u&&a&&a(n)}var n=[],l=0,u=e.length;if(!u){a&&a(n);return}e.forEach(function(d,i){d&&d.source?new V.Pattern(d,function(g){n[i]=g,r()}):(n[i]=d,r())})},groupSVGElements:function(e,a,r){var n;return e&&e.length===1?(typeof r<"u"&&(e[0].sourcePath=r),e[0]):(a&&(a.width&&a.height?a.centerPoint={x:a.width/2,y:a.height/2}:(delete a.width,delete a.height)),n=new V.Group(e,a),typeof r<"u"&&(n.sourcePath=r),n)},populateWithProperties:function(e,a,r){if(r&&Array.isArray(r))for(var n=0,l=r.length;n<l;n++)r[n]in e&&(a[r[n]]=e[r[n]])},createCanvasElement:function(){return V.document.createElement("canvas")},copyCanvasElement:function(e){var a=V.util.createCanvasElement();return a.width=e.width,a.height=e.height,a.getContext("2d").drawImage(e,0,0),a},toDataURL:function(e,a,r){return e.toDataURL("image/"+a,r)},createImage:function(){return V.document.createElement("img")},multiplyTransformMatrices:function(e,a,r){return[e[0]*a[0]+e[2]*a[1],e[1]*a[0]+e[3]*a[1],e[0]*a[2]+e[2]*a[3],e[1]*a[2]+e[3]*a[3],r?0:e[0]*a[4]+e[2]*a[5]+e[4],r?0:e[1]*a[4]+e[3]*a[5]+e[5]]},qrDecompose:function(e){var a=t(e[1],e[0]),r=o(e[0],2)+o(e[1],2),n=h(r),l=(e[0]*e[3]-e[2]*e[1])/n,u=t(e[0]*e[2]+e[1]*e[3],r);return{angle:a/c,scaleX:n,scaleY:l,skewX:u/c,skewY:0,translateX:e[4],translateY:e[5]}},calcRotateMatrix:function(e){if(!e.angle)return V.iMatrix.concat();var a=V.util.degreesToRadians(e.angle),r=V.util.cos(a),n=V.util.sin(a);return[r,n,-n,r,0,0]},calcDimensionsMatrix:function(e){var a=typeof e.scaleX>"u"?1:e.scaleX,r=typeof e.scaleY>"u"?1:e.scaleY,n=[e.flipX?-a:a,0,0,e.flipY?-r:r,0,0],l=V.util.multiplyTransformMatrices,u=V.util.degreesToRadians;return e.skewX&&(n=l(n,[1,0,Math.tan(u(e.skewX)),1],!0)),e.skewY&&(n=l(n,[1,Math.tan(u(e.skewY)),0,1],!0)),n},composeMatrix:function(e){var a=[1,0,0,1,e.translateX||0,e.translateY||0],r=V.util.multiplyTransformMatrices;return e.angle&&(a=r(a,V.util.calcRotateMatrix(e))),(e.scaleX!==1||e.scaleY!==1||e.skewX||e.skewY||e.flipX||e.flipY)&&(a=r(a,V.util.calcDimensionsMatrix(e))),a},resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},saveObjectTransform:function(e){return{scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}},isTransparent:function(e,a,r,n){n>0&&(a>n?a-=n:a=0,r>n?r-=n:r=0);var l=!0,u,d,i=e.getImageData(a,r,n*2||1,n*2||1),g=i.data.length;for(u=3;u<g&&(d=i.data[u],l=d<=0,l!==!1);u+=4);return i=null,l},parsePreserveAspectRatioAttribute:function(e){var a="meet",r="Mid",n="Mid",l=e.split(" "),u;return l&&l.length&&(a=l.pop(),a!=="meet"&&a!=="slice"?(u=a,a="meet"):l.length&&(u=l.pop())),r=u!=="none"?u.slice(1,4):"none",n=u!=="none"?u.slice(5,8):"none",{meetOrSlice:a,alignX:r,alignY:n}},clearFabricFontCache:function(e){e=(e||"").toLowerCase(),e?V.charWidthsCache[e]&&delete V.charWidthsCache[e]:V.charWidthsCache={}},limitDimsByArea:function(e,a){var r=Math.sqrt(a*e),n=Math.floor(a/r);return{x:Math.floor(r),y:n}},capValue:function(e,a,r){return Math.max(e,Math.min(a,r))},findScaleToFit:function(e,a){return Math.min(a.width/e.width,a.height/e.height)},findScaleToCover:function(e,a){return Math.max(a.width/e.width,a.height/e.height)},matrixToSVG:function(e){return"matrix("+e.map(function(a){return V.util.toFixed(a,V.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(e,a){var r=V.util.invertTransform(a),n=V.util.multiplyTransformMatrices(r,e.calcOwnMatrix());V.util.applyTransformToObject(e,n)},addTransformToObject:function(e,a){V.util.applyTransformToObject(e,V.util.multiplyTransformMatrices(a,e.calcOwnMatrix()))},applyTransformToObject:function(e,a){var r=V.util.qrDecompose(a),n=new V.Point(r.translateX,r.translateY);e.flipX=!1,e.flipY=!1,e.set("scaleX",r.scaleX),e.set("scaleY",r.scaleY),e.skewX=r.skewX,e.skewY=r.skewY,e.angle=r.angle,e.setPositionByOrigin(n,"center","center")},sizeAfterTransform:function(e,a,r){var n=e/2,l=a/2,u=[{x:-n,y:-l},{x:n,y:-l},{x:-n,y:l},{x:n,y:l}],d=V.util.calcDimensionsMatrix(r),i=V.util.makeBoundingBoxFromPoints(u,d);return{x:i.width,y:i.height}},mergeClipPaths:function(e,a){var r=e,n=a;r.inverted&&!n.inverted&&(r=a,n=e),V.util.applyTransformToObject(n,V.util.multiplyTransformMatrices(V.util.invertTransform(r.calcTransformMatrix()),n.calcTransformMatrix()));var l=r.inverted&&n.inverted;return l&&(r.inverted=n.inverted=!1),new V.Group([r],{clipPath:n,inverted:l})},hasStyleChanged:function(e,a,r){return r=r||!1,e.fill!==a.fill||e.stroke!==a.stroke||e.strokeWidth!==a.strokeWidth||e.fontSize!==a.fontSize||e.fontFamily!==a.fontFamily||e.fontWeight!==a.fontWeight||e.fontStyle!==a.fontStyle||e.textBackgroundColor!==a.textBackgroundColor||e.deltaY!==a.deltaY||r&&(e.overline!==a.overline||e.underline!==a.underline||e.linethrough!==a.linethrough)},stylesToArray:function(r,a){for(var r=V.util.object.clone(r,!0),n=a.split(`
`),l=-1,u={},d=[],i=0;i<n.length;i++){if(!r[i]){l+=n[i].length;continue}for(var g=0;g<n[i].length;g++){l++;var x=r[i][g];if(x&&Object.keys(x).length>0){var m=V.util.hasStyleChanged(u,x,!0);m?d.push({start:l,end:l+1,style:x}):d[d.length-1].end++}u=x||{}}}return d},stylesFromArray:function(e,a){if(!Array.isArray(e))return e;for(var r=a.split(`
`),n=-1,l=0,u={},d=0;d<r.length;d++)for(var i=0;i<r[d].length;i++)n++,e[l]&&e[l].start<=n&&n<e[l].end&&(u[d]=u[d]||{},u[d][i]=Object.assign({},e[l].style),n===e[l].end-1&&l++);return u}}}(Me),function(){var f=Array.prototype.join,h={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},t={m:"l",M:"L"};function o(p,P,E,S,F,C,b,D,U,X,G){var Y=V.util.cos(p),N=V.util.sin(p),I=V.util.cos(P),L=V.util.sin(P),$=E*F*I-S*C*L+b,W=S*F*I+E*C*L+D,z=X+U*(-E*F*N-S*C*Y),B=G+U*(-S*F*N+E*C*Y),H=$+U*(E*F*L+S*C*I),q=W+U*(S*F*L-E*C*I);return["C",z,B,H,q,$,W]}function c(p,P,E,S,F,C,b){var D=Math.PI,U=b*D/180,X=V.util.sin(U),G=V.util.cos(U),Y=0,N=0;E=Math.abs(E),S=Math.abs(S);var I=-G*p*.5-X*P*.5,L=-G*P*.5+X*p*.5,$=E*E,W=S*S,z=L*L,B=I*I,H=$*W-$*z-W*B,q=0;if(H<0){var Z=Math.sqrt(1-H/($*W));E*=Z,S*=Z}else q=(F===C?-1:1)*Math.sqrt(H/($*z+W*B));var te=q*E*L/S,Q=-q*S*I/E,ee=G*te-X*Q+p*.5,J=X*te+G*Q+P*.5,ne=s(1,0,(I-te)/E,(L-Q)/S),re=s((I-te)/E,(L-Q)/S,(-I-te)/E,(-L-Q)/S);C===0&&re>0?re-=2*D:C===1&&re<0&&(re+=2*D);for(var ae=Math.ceil(Math.abs(re/D*2)),se=[],oe=re/ae,me=8/3*Math.sin(oe/4)*Math.sin(oe/4)/Math.sin(oe/2),xe=ne+oe,Ae=0;Ae<ae;Ae++)se[Ae]=o(ne,xe,G,X,E,S,ee,J,me,Y,N),Y=se[Ae][5],N=se[Ae][6],ne=xe,xe+=oe;return se}function s(p,P,E,S){var F=Math.atan2(P,p),C=Math.atan2(S,E);return C>=F?C-F:2*Math.PI-(F-C)}function e(p,P,E,S,F,C,b,D){var U;if(V.cachesBoundsOfCurve&&(U=f.call(arguments),V.boundsOfCurveCache[U]))return V.boundsOfCurveCache[U];var X=Math.sqrt,G=Math.min,Y=Math.max,N=Math.abs,I=[],L=[[],[]],$,W,z,B,H,q,Z,te;W=6*p-12*E+6*F,$=-3*p+9*E-9*F+3*b,z=3*E-3*p;for(var Q=0;Q<2;++Q){if(Q>0&&(W=6*P-12*S+6*C,$=-3*P+9*S-9*C+3*D,z=3*S-3*P),N($)<1e-12){if(N(W)<1e-12)continue;B=-z/W,0<B&&B<1&&I.push(B);continue}Z=W*W-4*z*$,!(Z<0)&&(te=X(Z),H=(-W+te)/(2*$),0<H&&H<1&&I.push(H),q=(-W-te)/(2*$),0<q&&q<1&&I.push(q))}for(var ee,J,ne=I.length,re=ne,ae;ne--;)B=I[ne],ae=1-B,ee=ae*ae*ae*p+3*ae*ae*B*E+3*ae*B*B*F+B*B*B*b,L[0][ne]=ee,J=ae*ae*ae*P+3*ae*ae*B*S+3*ae*B*B*C+B*B*B*D,L[1][ne]=J;L[0][re]=p,L[1][re]=P,L[0][re+1]=b,L[1][re+1]=D;var se=[{x:G.apply(null,L[0]),y:G.apply(null,L[1])},{x:Y.apply(null,L[0]),y:Y.apply(null,L[1])}];return V.cachesBoundsOfCurve&&(V.boundsOfCurveCache[U]=se),se}function a(p,P,E){for(var S=E[1],F=E[2],C=E[3],b=E[4],D=E[5],U=E[6],X=E[7],G=c(U-p,X-P,S,F,b,D,C),Y=0,N=G.length;Y<N;Y++)G[Y][1]+=p,G[Y][2]+=P,G[Y][3]+=p,G[Y][4]+=P,G[Y][5]+=p,G[Y][6]+=P;return G}function r(p){var P=0,E=0,S=p.length,F=0,C=0,b,D,U,X=[],G,Y,N;for(D=0;D<S;++D){switch(U=!1,b=p[D].slice(0),b[0]){case"l":b[0]="L",b[1]+=P,b[2]+=E;case"L":P=b[1],E=b[2];break;case"h":b[1]+=P;case"H":b[0]="L",b[2]=E,P=b[1];break;case"v":b[1]+=E;case"V":b[0]="L",E=b[1],b[1]=P,b[2]=E;break;case"m":b[0]="M",b[1]+=P,b[2]+=E;case"M":P=b[1],E=b[2],F=b[1],C=b[2];break;case"c":b[0]="C",b[1]+=P,b[2]+=E,b[3]+=P,b[4]+=E,b[5]+=P,b[6]+=E;case"C":Y=b[3],N=b[4],P=b[5],E=b[6];break;case"s":b[0]="S",b[1]+=P,b[2]+=E,b[3]+=P,b[4]+=E;case"S":G==="C"?(Y=2*P-Y,N=2*E-N):(Y=P,N=E),P=b[3],E=b[4],b[0]="C",b[5]=b[3],b[6]=b[4],b[3]=b[1],b[4]=b[2],b[1]=Y,b[2]=N,Y=b[3],N=b[4];break;case"q":b[0]="Q",b[1]+=P,b[2]+=E,b[3]+=P,b[4]+=E;case"Q":Y=b[1],N=b[2],P=b[3],E=b[4];break;case"t":b[0]="T",b[1]+=P,b[2]+=E;case"T":G==="Q"?(Y=2*P-Y,N=2*E-N):(Y=P,N=E),b[0]="Q",P=b[1],E=b[2],b[1]=Y,b[2]=N,b[3]=P,b[4]=E;break;case"a":b[0]="A",b[6]+=P,b[7]+=E;case"A":U=!0,X=X.concat(a(P,E,b)),P=b[6],E=b[7];break;case"z":case"Z":P=F,E=C;break}U||X.push(b),G=b[0]}return X}function n(p,P,E,S){return Math.sqrt((E-p)*(E-p)+(S-P)*(S-P))}function l(p){return p*p*p}function u(p){return 3*p*p*(1-p)}function d(p){return 3*p*(1-p)*(1-p)}function i(p){return(1-p)*(1-p)*(1-p)}function g(p,P,E,S,F,C,b,D){return function(U){var X=l(U),G=u(U),Y=d(U),N=i(U);return{x:b*X+F*G+E*Y+p*N,y:D*X+C*G+S*Y+P*N}}}function x(p,P,E,S,F,C,b,D){return function(U){var X=1-U,G=3*X*X*(E-p)+6*X*U*(F-E)+3*U*U*(b-F),Y=3*X*X*(S-P)+6*X*U*(C-S)+3*U*U*(D-C);return Math.atan2(Y,G)}}function m(p){return p*p}function A(p){return 2*p*(1-p)}function k(p){return(1-p)*(1-p)}function v(p,P,E,S,F,C){return function(b){var D=m(b),U=A(b),X=k(b);return{x:F*D+E*U+p*X,y:C*D+S*U+P*X}}}function _(p,P,E,S,F,C){return function(b){var D=1-b,U=2*D*(E-p)+2*b*(F-E),X=2*D*(S-P)+2*b*(C-S);return Math.atan2(X,U)}}function K(p,P,E){var S={x:P,y:E},F,C=0,b;for(b=1;b<=100;b+=1)F=p(b/100),C+=n(S.x,S.y,F.x,F.y),S=F;return C}function M(p,P){for(var E=0,S=0,F=p.iterator,C={x:p.x,y:p.y},b,D,U=.01,X=p.angleFinder,G;S<P&&U>1e-4;)b=F(E),G=E,D=n(C.x,C.y,b.x,b.y),D+S>P?(E-=U,U/=2):(C=b,E+=U,S+=D);return b.angle=X(G),b}function j(p){for(var P=0,E=p.length,S,F=0,C=0,b=0,D=0,U=[],X,G,Y,N=0;N<E;N++){switch(S=p[N],G={x:F,y:C,command:S[0]},S[0]){case"M":G.length=0,b=F=S[1],D=C=S[2];break;case"L":G.length=n(F,C,S[1],S[2]),F=S[1],C=S[2];break;case"C":X=g(F,C,S[1],S[2],S[3],S[4],S[5],S[6]),Y=x(F,C,S[1],S[2],S[3],S[4],S[5],S[6]),G.iterator=X,G.angleFinder=Y,G.length=K(X,F,C),F=S[5],C=S[6];break;case"Q":X=v(F,C,S[1],S[2],S[3],S[4]),Y=_(F,C,S[1],S[2],S[3],S[4]),G.iterator=X,G.angleFinder=Y,G.length=K(X,F,C),F=S[3],C=S[4];break;case"Z":case"z":G.destX=b,G.destY=D,G.length=n(F,C,b,D),F=b,C=D;break}P+=G.length,U.push(G)}return U.push({length:P,x:F,y:C}),U}function O(p,P,E){E||(E=j(p));for(var S=0;P-E[S].length>0&&S<E.length-2;)P-=E[S].length,S++;var F=E[S],C=P/F.length,b=F.command,D=p[S],U;switch(b){case"M":return{x:F.x,y:F.y,angle:0};case"Z":case"z":return U=new V.Point(F.x,F.y).lerp(new V.Point(F.destX,F.destY),C),U.angle=Math.atan2(F.destY-F.y,F.destX-F.x),U;case"L":return U=new V.Point(F.x,F.y).lerp(new V.Point(D[1],D[2]),C),U.angle=Math.atan2(D[2]-F.y,D[1]-F.x),U;case"C":return M(F,P);case"Q":return M(F,P)}}function T(p){var P=[],E=[],S,F,C=V.rePathCommand,b="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",D="("+b+")"+V.commaWsp,U="([01])"+V.commaWsp+"?",X=D+"?"+D+"?"+D+U+U+D+"?("+b+")",G=new RegExp(X,"g"),Y,N,I;if(!p||!p.match)return P;I=p.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var L=0,$,W=I.length;L<W;L++){S=I[L],N=S.slice(1).trim(),E.length=0;var z=S.charAt(0);if($=[z],z.toLowerCase()==="a")for(var B;B=G.exec(N);)for(var H=1;H<B.length;H++)E.push(B[H]);else for(;Y=C.exec(N);)E.push(Y[0]);for(var H=0,q=E.length;H<q;H++)F=parseFloat(E[H]),isNaN(F)||$.push(F);var Z=h[z.toLowerCase()],te=t[z]||z;if($.length-1>Z)for(var Q=1,ee=$.length;Q<ee;Q+=Z)P.push([z].concat($.slice(Q,Q+Z))),z=te;else P.push($)}return P}function R(p,P){var E=[],S,F=new V.Point(p[0].x,p[0].y),C=new V.Point(p[1].x,p[1].y),b=p.length,D=1,U=0,X=b>2;for(P=P||0,X&&(D=p[2].x<C.x?-1:p[2].x===C.x?0:1,U=p[2].y<C.y?-1:p[2].y===C.y?0:1),E.push(["M",F.x-D*P,F.y-U*P]),S=1;S<b;S++){if(!F.eq(C)){var G=F.midPointFrom(C);E.push(["Q",F.x,F.y,G.x,G.y])}F=p[S],S+1<p.length&&(C=p[S+1])}return X&&(D=F.x>p[S-2].x?1:F.x===p[S-2].x?0:-1,U=F.y>p[S-2].y?1:F.y===p[S-2].y?0:-1),E.push(["L",F.x+D*P,F.y+U*P]),E}function y(p,P,E){return E&&(P=V.util.multiplyTransformMatrices(P,[1,0,0,1,-E.x,-E.y])),p.map(function(S){for(var F=S.slice(0),C={},b=1;b<S.length-1;b+=2)C.x=S[b],C.y=S[b+1],C=V.util.transformPoint(C,P),F[b]=C.x,F[b+1]=C.y;return F})}V.util.joinPath=function(p){return p.map(function(P){return P.join(" ")}).join(" ")},V.util.parsePath=T,V.util.makePathSimpler=r,V.util.getSmoothPathFromPoints=R,V.util.getPathSegmentsInfo=j,V.util.getBoundsOfCurve=e,V.util.getPointOnPath=O,V.util.transformPath=y}(),function(){var f=Array.prototype.slice;function h(e,a){for(var r=f.call(arguments,2),n=[],l=0,u=e.length;l<u;l++)n[l]=r.length?e[l][a].apply(e[l],r):e[l][a].call(e[l]);return n}function t(e,a){return s(e,a,function(r,n){return r>=n})}function o(e,a){return s(e,a,function(r,n){return r<n})}function c(e,a){for(var r=e.length;r--;)e[r]=a;return e}function s(e,a,r){if(!(!e||e.length===0)){var n=e.length-1,l=a?e[n][a]:e[n];if(a)for(;n--;)r(e[n][a],l)&&(l=e[n][a]);else for(;n--;)r(e[n],l)&&(l=e[n]);return l}}V.util.array={fill:c,invoke:h,min:o,max:t}}(),function(){function f(t,o,c){if(c)if(!V.isLikelyNode&&o instanceof Element)t=o;else if(o instanceof Array){t=[];for(var s=0,e=o.length;s<e;s++)t[s]=f({},o[s],c)}else if(o&&typeof o=="object")for(var a in o)a==="canvas"||a==="group"?t[a]=null:o.hasOwnProperty(a)&&(t[a]=f({},o[a],c));else t=o;else for(var a in o)t[a]=o[a];return t}function h(t,o){return f({},t,o)}V.util.object={extend:f,clone:h},V.util.object.extend(V.util,V.Observable)}(),function(){function f(s){return s.replace(/-+(.)?/g,function(e,a){return a?a.toUpperCase():""})}function h(s,e){return s.charAt(0).toUpperCase()+(e?s.slice(1):s.slice(1).toLowerCase())}function t(s){return s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(s){var e=0,a,r=[];for(e=0,a;e<s.length;e++)(a=c(s,e))!==!1&&r.push(a);return r}function c(s,e){var a=s.charCodeAt(e);if(isNaN(a))return"";if(a<55296||a>57343)return s.charAt(e);if(55296<=a&&a<=56319){if(s.length<=e+1)throw"High surrogate without following low surrogate";var r=s.charCodeAt(e+1);if(56320>r||r>57343)throw"High surrogate without following low surrogate";return s.charAt(e)+s.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";var n=s.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1}V.util.string={camelize:f,capitalize:h,escapeXml:t,graphemeSplit:o}}(),function(){var f=Array.prototype.slice,h=function(){},t=function(){for(var a in{toString:1})if(a==="toString")return!1;return!0}(),o=function(a,r,n){for(var l in r)l in a.prototype&&typeof a.prototype[l]=="function"&&(r[l]+"").indexOf("callSuper")>-1?a.prototype[l]=function(u){return function(){var d=this.constructor.superclass;this.constructor.superclass=n;var i=r[u].apply(this,arguments);if(this.constructor.superclass=d,u!=="initialize")return i}}(l):a.prototype[l]=r[l],t&&(r.toString!==Object.prototype.toString&&(a.prototype.toString=r.toString),r.valueOf!==Object.prototype.valueOf&&(a.prototype.valueOf=r.valueOf))};function c(){}function s(a){for(var r=null,n=this;n.constructor.superclass;){var l=n.constructor.superclass.prototype[a];if(n[a]!==l){r=l;break}n=n.constructor.superclass.prototype}return r?arguments.length>1?r.apply(this,f.call(arguments,1)):r.call(this):console.log("tried to callSuper "+a+", method not found in prototype chain",this)}function e(){var a=null,r=f.call(arguments,0);typeof r[0]=="function"&&(a=r.shift());function n(){this.initialize.apply(this,arguments)}n.superclass=a,n.subclasses=[],a&&(c.prototype=a.prototype,n.prototype=new c,a.subclasses.push(n));for(var l=0,u=r.length;l<u;l++)o(n,r[l],a);return n.prototype.initialize||(n.prototype.initialize=h),n.prototype.constructor=n,n.prototype.callSuper=s,n}V.util.createClass=e}(),function(){var f=!!V.document.createElement("div").attachEvent,h=["touchstart","touchmove","touchend"];V.util.addListener=function(o,c,s,e){o&&o.addEventListener(c,s,f?!1:e)},V.util.removeListener=function(o,c,s,e){o&&o.removeEventListener(c,s,f?!1:e)};function t(o){var c=o.changedTouches;return c&&c[0]?c[0]:o}V.util.getPointer=function(o){var c=o.target,s=V.util.getScrollLeftTop(c),e=t(o);return{x:e.clientX+s.left,y:e.clientY+s.top}},V.util.isTouchEvent=function(o){return h.indexOf(o.type)>-1||o.pointerType==="touch"}}(),function(){function f(e,a){var r=e.style;if(!r)return e;if(typeof a=="string")return e.style.cssText+=";"+a,a.indexOf("opacity")>-1?s(e,a.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var n in a)if(n==="opacity")s(e,a[n]);else{var l=n==="float"||n==="cssFloat"?typeof r.styleFloat>"u"?"cssFloat":"styleFloat":n;r.setProperty(l,a[n])}return e}var h=V.document.createElement("div"),t=typeof h.style.opacity=="string",o=typeof h.style.filter=="string",c=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(e){return e};t?s=function(e,a){return e.style.opacity=a,e}:o&&(s=function(e,a){var r=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(r.zoom=1),c.test(r.filter)?(a=a>=.9999?"":"alpha(opacity="+a*100+")",r.filter=r.filter.replace(c,a)):r.filter+=" alpha(opacity="+a*100+")",e}),V.util.setStyle=f}(),function(){var f=Array.prototype.slice;function h(i){return typeof i=="string"?V.document.getElementById(i):i}var t,o=function(i){return f.call(i,0)};try{t=o(V.document.childNodes)instanceof Array}catch{}t||(o=function(i){for(var g=new Array(i.length),x=i.length;x--;)g[x]=i[x];return g});function c(i,g){var x=V.document.createElement(i);for(var m in g)m==="class"?x.className=g[m]:m==="for"?x.htmlFor=g[m]:x.setAttribute(m,g[m]);return x}function s(i,g){i&&(" "+i.className+" ").indexOf(" "+g+" ")===-1&&(i.className+=(i.className?" ":"")+g)}function e(i,g,x){return typeof g=="string"&&(g=c(g,x)),i.parentNode&&i.parentNode.replaceChild(g,i),g.appendChild(i),g}function a(i){for(var g=0,x=0,m=V.document.documentElement,A=V.document.body||{scrollLeft:0,scrollTop:0};i&&(i.parentNode||i.host)&&(i=i.parentNode||i.host,i===V.document?(g=A.scrollLeft||m.scrollLeft||0,x=A.scrollTop||m.scrollTop||0):(g+=i.scrollLeft||0,x+=i.scrollTop||0),!(i.nodeType===1&&i.style.position==="fixed")););return{left:g,top:x}}function r(i){var g,x=i&&i.ownerDocument,m={left:0,top:0},A={left:0,top:0},k,v={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!x)return A;for(var _ in v)A[v[_]]+=parseInt(n(i,_),10)||0;return g=x.documentElement,typeof i.getBoundingClientRect<"u"&&(m=i.getBoundingClientRect()),k=a(i),{left:m.left+k.left-(g.clientLeft||0)+A.left,top:m.top+k.top-(g.clientTop||0)+A.top}}var n;V.document.defaultView&&V.document.defaultView.getComputedStyle?n=function(i,g){var x=V.document.defaultView.getComputedStyle(i,null);return x?x[g]:void 0}:n=function(i,g){var x=i.style[g];return!x&&i.currentStyle&&(x=i.currentStyle[g]),x},function(){var i=V.document.documentElement.style,g="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"";function x(A){return typeof A.onselectstart<"u"&&(A.onselectstart=V.util.falseFunction),g?A.style[g]="none":typeof A.unselectable=="string"&&(A.unselectable="on"),A}function m(A){return typeof A.onselectstart<"u"&&(A.onselectstart=null),g?A.style[g]="":typeof A.unselectable=="string"&&(A.unselectable=""),A}V.util.makeElementUnselectable=x,V.util.makeElementSelectable=m}();function l(i){var g=V.jsdomImplForWrapper(i);return g._canvas||g._image}function u(i){if(V.isLikelyNode){var g=V.jsdomImplForWrapper(i);g&&(g._image=null,g._canvas=null,g._currentSrc=null,g._attributes=null,g._classList=null)}}function d(i,g){i.imageSmoothingEnabled=i.imageSmoothingEnabled||i.webkitImageSmoothingEnabled||i.mozImageSmoothingEnabled||i.msImageSmoothingEnabled||i.oImageSmoothingEnabled,i.imageSmoothingEnabled=g}V.util.setImageSmoothing=d,V.util.getById=h,V.util.toArray=o,V.util.addClass=s,V.util.makeElement=c,V.util.wrapElement=e,V.util.getScrollLeftTop=a,V.util.getElementOffset=r,V.util.getNodeCanvas=l,V.util.cleanUpJsdomNode=u}(),function(){function f(o,c){return o+(/\?/.test(o)?"&":"?")+c}function h(){}function t(o,c){c||(c={});var s=c.method?c.method.toUpperCase():"GET",e=c.onComplete||function(){},a=new V.window.XMLHttpRequest,r=c.body||c.parameters;return a.onreadystatechange=function(){a.readyState===4&&(e(a),a.onreadystatechange=h)},s==="GET"&&(r=null,typeof c.parameters=="string"&&(o=f(o,c.parameters))),a.open(s,o,!0),(s==="POST"||s==="PUT")&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(r),a}V.util.request=t}(),V.log=console.log,V.warn=console.warn,function(){var f=V.util.object.extend,h=V.util.object.clone,t=[];V.util.object.extend(t,{cancelAll:function(){var l=this.splice(0);return l.forEach(function(u){u.cancel()}),l},cancelByCanvas:function(l){if(!l)return[];var u=this.filter(function(d){return typeof d.target=="object"&&d.target.canvas===l});return u.forEach(function(d){d.cancel()}),u},cancelByTarget:function(l){var u=this.findAnimationsByTarget(l);return u.forEach(function(d){d.cancel()}),u},findAnimationIndex:function(l){return this.indexOf(this.findAnimation(l))},findAnimation:function(l){return this.find(function(u){return u.cancel===l})},findAnimationsByTarget:function(l){return l?this.filter(function(u){return u.target===l}):[]}});function o(){return!1}function c(l,u,d,i){return-d*Math.cos(l/i*(Math.PI/2))+d+u}function s(l){l||(l={});var u=!1,d,i=function(){var g=V.runningAnimations.indexOf(d);return g>-1&&V.runningAnimations.splice(g,1)[0]};return d=f(h(l),{cancel:function(){return u=!0,i()},currentValue:"startValue"in l?l.startValue:0,completionRate:0,durationRate:0}),V.runningAnimations.push(d),r(function(g){var x=g||+new Date,m=l.duration||500,A=x+m,k,v=l.onChange||o,_=l.abort||o,K=l.onComplete||o,M=l.easing||c,j="startValue"in l?l.startValue.length>0:!1,O="startValue"in l?l.startValue:0,T="endValue"in l?l.endValue:100,R=l.byValue||(j?O.map(function(y,p){return T[p]-O[p]}):T-O);l.onStart&&l.onStart(),function y(p){k=p||+new Date;var P=k>A?m:k-x,E=P/m,S=j?O.map(function(C,b){return M(P,O[b],R[b],m)}):M(P,O,R,m),F=Math.abs(j?(S[0]-O[0])/R[0]:(S-O)/R);if(d.currentValue=j?S.slice():S,d.completionRate=F,d.durationRate=E,!u){if(_(S,F,E)){i();return}if(k>A){d.currentValue=j?T.slice():T,d.completionRate=1,d.durationRate=1,v(j?T.slice():T,1,1),K(T,1,1),i();return}else v(S,F,E),r(y)}}(x)}),d.cancel}var e=V.window.requestAnimationFrame||V.window.webkitRequestAnimationFrame||V.window.mozRequestAnimationFrame||V.window.oRequestAnimationFrame||V.window.msRequestAnimationFrame||function(l){return V.window.setTimeout(l,1e3/60)},a=V.window.cancelAnimationFrame||V.window.clearTimeout;function r(){return e.apply(V.window,arguments)}function n(){return a.apply(V.window,arguments)}V.util.animate=s,V.util.requestAnimFrame=r,V.util.cancelAnimFrame=n,V.runningAnimations=t}(),function(){function f(t,o,c){var s="rgba("+parseInt(t[0]+c*(o[0]-t[0]),10)+","+parseInt(t[1]+c*(o[1]-t[1]),10)+","+parseInt(t[2]+c*(o[2]-t[2]),10);return s+=","+(t&&o?parseFloat(t[3]+c*(o[3]-t[3])):1),s+=")",s}function h(t,o,c,s){var e=new V.Color(t).getSource(),a=new V.Color(o).getSource(),r=s.onComplete,n=s.onChange;return s=s||{},V.util.animate(V.util.object.extend(s,{duration:c||500,startValue:e,endValue:a,byValue:a,easing:function(l,u,d,i){var g=s.colorEasing?s.colorEasing(l,i):1-Math.cos(l/i*(Math.PI/2));return f(u,d,g)},onComplete:function(l,u,d){if(r)return r(f(a,a,0),u,d)},onChange:function(l,u,d){if(n){if(Array.isArray(l))return n(f(l,l,0),u,d);n(l,u,d)}}}))}V.util.animateColor=h}(),function(){function f(p,P,E,S){return p<Math.abs(P)?(p=P,S=E/4):P===0&&p===0?S=E/(2*Math.PI)*Math.asin(1):S=E/(2*Math.PI)*Math.asin(P/p),{a:p,c:P,p:E,s:S}}function h(p,P,E){return p.a*Math.pow(2,10*(P-=1))*Math.sin((P*E-p.s)*(2*Math.PI)/p.p)}function t(p,P,E,S){return E*((p=p/S-1)*p*p+1)+P}function o(p,P,E,S){return p/=S/2,p<1?E/2*p*p*p+P:E/2*((p-=2)*p*p+2)+P}function c(p,P,E,S){return E*(p/=S)*p*p*p+P}function s(p,P,E,S){return-E*((p=p/S-1)*p*p*p-1)+P}function e(p,P,E,S){return p/=S/2,p<1?E/2*p*p*p*p+P:-E/2*((p-=2)*p*p*p-2)+P}function a(p,P,E,S){return E*(p/=S)*p*p*p*p+P}function r(p,P,E,S){return E*((p=p/S-1)*p*p*p*p+1)+P}function n(p,P,E,S){return p/=S/2,p<1?E/2*p*p*p*p*p+P:E/2*((p-=2)*p*p*p*p+2)+P}function l(p,P,E,S){return-E*Math.cos(p/S*(Math.PI/2))+E+P}function u(p,P,E,S){return E*Math.sin(p/S*(Math.PI/2))+P}function d(p,P,E,S){return-E/2*(Math.cos(Math.PI*p/S)-1)+P}function i(p,P,E,S){return p===0?P:E*Math.pow(2,10*(p/S-1))+P}function g(p,P,E,S){return p===S?P+E:E*(-Math.pow(2,-10*p/S)+1)+P}function x(p,P,E,S){return p===0?P:p===S?P+E:(p/=S/2,p<1?E/2*Math.pow(2,10*(p-1))+P:E/2*(-Math.pow(2,-10*--p)+2)+P)}function m(p,P,E,S){return-E*(Math.sqrt(1-(p/=S)*p)-1)+P}function A(p,P,E,S){return E*Math.sqrt(1-(p=p/S-1)*p)+P}function k(p,P,E,S){return p/=S/2,p<1?-E/2*(Math.sqrt(1-p*p)-1)+P:E/2*(Math.sqrt(1-(p-=2)*p)+1)+P}function v(p,P,E,S){var F=1.70158,C=0,b=E;if(p===0)return P;if(p/=S,p===1)return P+E;C||(C=S*.3);var D=f(b,E,C,F);return-h(D,p,S)+P}function _(p,P,E,S){var F=1.70158,C=0,b=E;if(p===0)return P;if(p/=S,p===1)return P+E;C||(C=S*.3);var D=f(b,E,C,F);return D.a*Math.pow(2,-10*p)*Math.sin((p*S-D.s)*(2*Math.PI)/D.p)+D.c+P}function K(p,P,E,S){var F=1.70158,C=0,b=E;if(p===0)return P;if(p/=S/2,p===2)return P+E;C||(C=S*(.3*1.5));var D=f(b,E,C,F);return p<1?-.5*h(D,p,S)+P:D.a*Math.pow(2,-10*(p-=1))*Math.sin((p*S-D.s)*(2*Math.PI)/D.p)*.5+D.c+P}function M(p,P,E,S,F){return F===void 0&&(F=1.70158),E*(p/=S)*p*((F+1)*p-F)+P}function j(p,P,E,S,F){return F===void 0&&(F=1.70158),E*((p=p/S-1)*p*((F+1)*p+F)+1)+P}function O(p,P,E,S,F){return F===void 0&&(F=1.70158),p/=S/2,p<1?E/2*(p*p*(((F*=1.525)+1)*p-F))+P:E/2*((p-=2)*p*(((F*=1.525)+1)*p+F)+2)+P}function T(p,P,E,S){return E-R(S-p,0,E,S)+P}function R(p,P,E,S){return(p/=S)<1/2.75?E*(7.5625*p*p)+P:p<2/2.75?E*(7.5625*(p-=1.5/2.75)*p+.75)+P:p<2.5/2.75?E*(7.5625*(p-=2.25/2.75)*p+.9375)+P:E*(7.5625*(p-=2.625/2.75)*p+.984375)+P}function y(p,P,E,S){return p<S/2?T(p*2,0,E,S)*.5+P:R(p*2-S,0,E,S)*.5+E*.5+P}V.util.ease={easeInQuad:function(p,P,E,S){return E*(p/=S)*p+P},easeOutQuad:function(p,P,E,S){return-E*(p/=S)*(p-2)+P},easeInOutQuad:function(p,P,E,S){return p/=S/2,p<1?E/2*p*p+P:-E/2*(--p*(p-2)-1)+P},easeInCubic:function(p,P,E,S){return E*(p/=S)*p*p+P},easeOutCubic:t,easeInOutCubic:o,easeInQuart:c,easeOutQuart:s,easeInOutQuart:e,easeInQuint:a,easeOutQuint:r,easeInOutQuint:n,easeInSine:l,easeOutSine:u,easeInOutSine:d,easeInExpo:i,easeOutExpo:g,easeInOutExpo:x,easeInCirc:m,easeOutCirc:A,easeInOutCirc:k,easeInElastic:v,easeOutElastic:_,easeInOutElastic:K,easeInBack:M,easeOutBack:j,easeInOutBack:O,easeInBounce:T,easeOutBounce:R,easeInOutBounce:y}}(),function(f){var h=f.fabric||(f.fabric={}),t=h.util.object.extend,o=h.util.object.clone,c=h.util.toFixed,s=h.util.parseUnit,e=h.util.multiplyTransformMatrices,a=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],r=["symbol","image","marker","pattern","view","svg"],n=["pattern","defs","symbol","metadata","clipPath","mask","desc"],l=["symbol","g","a","svg","clipPath","defs"],u={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},d={stroke:"strokeOpacity",fill:"fillOpacity"},i="font-size",g="clip-path";h.svgValidTagNamesRegEx=A(a),h.svgViewBoxElementsRegEx=A(r),h.svgInvalidAncestorsRegEx=A(n),h.svgValidParentsRegEx=A(l),h.cssRules={},h.gradientDefs={},h.clipPaths={};function x(C){return C in u?u[C]:C}function m(C,b,D,U){var X=Array.isArray(b),G;if((C==="fill"||C==="stroke")&&b==="none")b="";else{if(C==="strokeUniform")return b==="non-scaling-stroke";if(C==="strokeDashArray")b==="none"?b=null:b=b.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(C==="transformMatrix")D&&D.transformMatrix?b=e(D.transformMatrix,h.parseTransformAttribute(b)):b=h.parseTransformAttribute(b);else if(C==="visible")b=b!=="none"&&b!=="hidden",D&&D.visible===!1&&(b=!1);else if(C==="opacity")b=parseFloat(b),D&&typeof D.opacity<"u"&&(b*=D.opacity);else if(C==="textAnchor")b=b==="start"?"left":b==="end"?"right":"center";else if(C==="charSpacing")G=s(b,U)/U*1e3;else if(C==="paintFirst"){var Y=b.indexOf("fill"),N=b.indexOf("stroke"),b="fill";(Y>-1&&N>-1&&N<Y||Y===-1&&N>-1)&&(b="stroke")}else{if(C==="href"||C==="xlink:href"||C==="font")return b;if(C==="imageSmoothing")return b==="optimizeQuality";G=X?b.map(s):s(b,U)}}return!X&&isNaN(G)?b:G}function A(C){return new RegExp("^("+C.join("|")+")\\b","i")}function k(C){for(var b in d)if(!(typeof C[d[b]]>"u"||C[b]==="")){if(typeof C[b]>"u"){if(!h.Object.prototype[b])continue;C[b]=h.Object.prototype[b]}if(C[b].indexOf("url(")!==0){var D=new h.Color(C[b]);C[b]=D.setAlpha(c(D.getAlpha()*C[d[b]],2)).toRgba()}}return C}function v(C,b){var D,U=[],X,G,Y;for(G=0,Y=b.length;G<Y;G++)D=b[G],X=C.getElementsByTagName(D),U=U.concat(Array.prototype.slice.call(X));return U}h.parseTransformAttribute=function(){function C(Q,ee){var J=h.util.cos(ee[0]),ne=h.util.sin(ee[0]),re=0,ae=0;ee.length===3&&(re=ee[1],ae=ee[2]),Q[0]=J,Q[1]=ne,Q[2]=-ne,Q[3]=J,Q[4]=re-(J*re-ne*ae),Q[5]=ae-(ne*re+J*ae)}function b(Q,ee){var J=ee[0],ne=ee.length===2?ee[1]:ee[0];Q[0]=J,Q[3]=ne}function D(Q,ee,J){Q[J]=Math.tan(h.util.degreesToRadians(ee[0]))}function U(Q,ee){Q[4]=ee[0],ee.length===2&&(Q[5]=ee[1])}var X=h.iMatrix,G=h.reNum,Y=h.commaWsp,N="(?:(skewX)\\s*\\(\\s*("+G+")\\s*\\))",I="(?:(skewY)\\s*\\(\\s*("+G+")\\s*\\))",L="(?:(rotate)\\s*\\(\\s*("+G+")(?:"+Y+"("+G+")"+Y+"("+G+"))?\\s*\\))",$="(?:(scale)\\s*\\(\\s*("+G+")(?:"+Y+"("+G+"))?\\s*\\))",W="(?:(translate)\\s*\\(\\s*("+G+")(?:"+Y+"("+G+"))?\\s*\\))",z="(?:(matrix)\\s*\\(\\s*("+G+")"+Y+"("+G+")"+Y+"("+G+")"+Y+"("+G+")"+Y+"("+G+")"+Y+"("+G+")\\s*\\))",B="(?:"+z+"|"+W+"|"+$+"|"+L+"|"+N+"|"+I+")",H="(?:"+B+"(?:"+Y+"*"+B+")*)",q="^\\s*(?:"+H+"?)\\s*$",Z=new RegExp(q),te=new RegExp(B,"g");return function(Q){var ee=X.concat(),J=[];if(!Q||Q&&!Z.test(Q))return ee;Q.replace(te,function(re){var ae=new RegExp(B).exec(re).filter(function(me){return!!me}),se=ae[1],oe=ae.slice(2).map(parseFloat);switch(se){case"translate":U(ee,oe);break;case"rotate":oe[0]=h.util.degreesToRadians(oe[0]),C(ee,oe);break;case"scale":b(ee,oe);break;case"skewX":D(ee,oe,2);break;case"skewY":D(ee,oe,1);break;case"matrix":ee=oe;break}J.push(ee.concat()),ee=X.concat()});for(var ne=J[0];J.length>1;)J.shift(),ne=h.util.multiplyTransformMatrices(ne,J[0]);return ne}}();function _(C,b){var D,U;C.replace(/;\s*$/,"").split(";").forEach(function(X){var G=X.split(":");D=G[0].trim().toLowerCase(),U=G[1].trim(),b[D]=U})}function K(C,b){var D,U;for(var X in C)typeof C[X]>"u"||(D=X.toLowerCase(),U=C[X],b[D]=U)}function M(C,b){var D={};for(var U in h.cssRules[b])if(j(C,U.split(" ")))for(var X in h.cssRules[b][U])D[X]=h.cssRules[b][U][X];return D}function j(C,b){var D,U=!0;return D=T(C,b.pop()),D&&b.length&&(U=O(C,b)),D&&U&&b.length===0}function O(C,b){for(var D,U=!0;C.parentNode&&C.parentNode.nodeType===1&&b.length;)U&&(D=b.pop()),C=C.parentNode,U=T(C,D);return b.length===0}function T(C,b){var D=C.nodeName,U=C.getAttribute("class"),X=C.getAttribute("id"),G,Y;if(G=new RegExp("^"+D,"i"),b=b.replace(G,""),X&&b.length&&(G=new RegExp("#"+X+"(?![a-zA-Z\\-]+)","i"),b=b.replace(G,"")),U&&b.length)for(U=U.split(" "),Y=U.length;Y--;)G=new RegExp("\\."+U[Y]+"(?![a-zA-Z\\-]+)","i"),b=b.replace(G,"");return b.length===0}function R(C,b){var D;if(C.getElementById&&(D=C.getElementById(b)),D)return D;var U,X,G,Y=C.getElementsByTagName("*");for(X=0,G=Y.length;X<G;X++)if(U=Y[X],b===U.getAttribute("id"))return U}function y(C){for(var b=v(C,["use","svg:use"]),D=0;b.length&&D<b.length;){var U=b[D],X=U.getAttribute("xlink:href")||U.getAttribute("href");if(X===null)return;var G=X.slice(1),Y=U.getAttribute("x")||0,N=U.getAttribute("y")||0,I=R(C,G).cloneNode(!0),L=(I.getAttribute("transform")||"")+" translate("+Y+", "+N+")",$,W=b.length,z,B,H,q,Z=h.svgNS;if(P(I),/^svg$/i.test(I.nodeName)){var te=I.ownerDocument.createElementNS(Z,"g");for(B=0,H=I.attributes,q=H.length;B<q;B++)z=H.item(B),te.setAttributeNS(Z,z.nodeName,z.nodeValue);for(;I.firstChild;)te.appendChild(I.firstChild);I=te}for(B=0,H=U.attributes,q=H.length;B<q;B++)z=H.item(B),!(z.nodeName==="x"||z.nodeName==="y"||z.nodeName==="xlink:href"||z.nodeName==="href")&&(z.nodeName==="transform"?L=z.nodeValue+" "+L:I.setAttribute(z.nodeName,z.nodeValue));I.setAttribute("transform",L),I.setAttribute("instantiated_by_use","1"),I.removeAttribute("id"),$=U.parentNode,$.replaceChild(I,U),b.length===W&&D++}}var p=new RegExp("^\\s*("+h.reNum+"+)\\s*,?\\s*("+h.reNum+"+)\\s*,?\\s*("+h.reNum+"+)\\s*,?\\s*("+h.reNum+"+)\\s*$");function P(C){if(!h.svgViewBoxElementsRegEx.test(C.nodeName))return{};var b=C.getAttribute("viewBox"),D=1,U=1,X=0,G=0,Y,N,I,L,$=C.getAttribute("width"),W=C.getAttribute("height"),z=C.getAttribute("x")||0,B=C.getAttribute("y")||0,H=C.getAttribute("preserveAspectRatio")||"",q=!b||!(b=b.match(p)),Z=!$||!W||$==="100%"||W==="100%",te=q&&Z,Q={},ee="",J=0,ne=0;if(Q.width=0,Q.height=0,Q.toBeParsed=te,q&&(z||B)&&C.parentNode&&C.parentNode.nodeName!=="#document"&&(ee=" translate("+s(z)+" "+s(B)+") ",I=(C.getAttribute("transform")||"")+ee,C.setAttribute("transform",I),C.removeAttribute("x"),C.removeAttribute("y")),te)return Q;if(q)return Q.width=s($),Q.height=s(W),Q;if(X=-parseFloat(b[1]),G=-parseFloat(b[2]),Y=parseFloat(b[3]),N=parseFloat(b[4]),Q.minX=X,Q.minY=G,Q.viewBoxWidth=Y,Q.viewBoxHeight=N,Z?(Q.width=Y,Q.height=N):(Q.width=s($),Q.height=s(W),D=Q.width/Y,U=Q.height/N),H=h.util.parsePreserveAspectRatioAttribute(H),H.alignX!=="none"&&(H.meetOrSlice==="meet"&&(U=D=D>U?U:D),H.meetOrSlice==="slice"&&(U=D=D>U?D:U),J=Q.width-Y*D,ne=Q.height-N*D,H.alignX==="Mid"&&(J/=2),H.alignY==="Mid"&&(ne/=2),H.alignX==="Min"&&(J=0),H.alignY==="Min"&&(ne=0)),D===1&&U===1&&X===0&&G===0&&z===0&&B===0)return Q;if((z||B)&&C.parentNode.nodeName!=="#document"&&(ee=" translate("+s(z)+" "+s(B)+") "),I=ee+" matrix("+D+" 0 0 "+U+" "+(X*D+J)+" "+(G*U+ne)+") ",C.nodeName==="svg"){for(L=C.ownerDocument.createElementNS(h.svgNS,"g");C.firstChild;)L.appendChild(C.firstChild);C.appendChild(L)}else L=C,L.removeAttribute("x"),L.removeAttribute("y"),I=L.getAttribute("transform")+I;return L.setAttribute("transform",I),Q}function E(C,b){for(;C&&(C=C.parentNode);)if(C.nodeName&&b.test(C.nodeName.replace("svg:",""))&&!C.getAttribute("instantiated_by_use"))return!0;return!1}h.parseSVGDocument=function(C,b,D,U){if(C){y(C);var X=h.Object.__uid++,G,Y,N=P(C),I=h.util.toArray(C.getElementsByTagName("*"));if(N.crossOrigin=U&&U.crossOrigin,N.svgUid=X,I.length===0&&h.isLikelyNode){I=C.selectNodes('//*[name(.)!="svg"]');var L=[];for(G=0,Y=I.length;G<Y;G++)L[G]=I[G];I=L}var $=I.filter(function(z){return P(z),h.svgValidTagNamesRegEx.test(z.nodeName.replace("svg:",""))&&!E(z,h.svgInvalidAncestorsRegEx)});if(!$||$&&!$.length){b&&b([],{});return}var W={};I.filter(function(z){return z.nodeName.replace("svg:","")==="clipPath"}).forEach(function(z){var B=z.getAttribute("id");W[B]=h.util.toArray(z.getElementsByTagName("*")).filter(function(H){return h.svgValidTagNamesRegEx.test(H.nodeName.replace("svg:",""))})}),h.gradientDefs[X]=h.getGradientDefs(C),h.cssRules[X]=h.getCSSRules(C),h.clipPaths[X]=W,h.parseElements($,function(z,B){b&&(b(z,N,B,I),delete h.gradientDefs[X],delete h.cssRules[X],delete h.clipPaths[X])},o(N),D,U)}};function S(C,b){var D=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],U="xlink:href",X=b.getAttribute(U).slice(1),G=R(C,X);if(G&&G.getAttribute(U)&&S(C,G),D.forEach(function(N){G&&!b.hasAttribute(N)&&G.hasAttribute(N)&&b.setAttribute(N,G.getAttribute(N))}),!b.children.length)for(var Y=G.cloneNode(!0);Y.firstChild;)b.appendChild(Y.firstChild);b.removeAttribute(U)}var F=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+h.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+h.reNum+"))?\\s+(.*)");t(h,{parseFontDeclaration:function(C,b){var D=C.match(F);if(D){var U=D[1],X=D[3],G=D[4],Y=D[5],N=D[6];U&&(b.fontStyle=U),X&&(b.fontWeight=isNaN(parseFloat(X))?X:parseFloat(X)),G&&(b.fontSize=s(G)),N&&(b.fontFamily=N),Y&&(b.lineHeight=Y==="normal"?1:Y)}},getGradientDefs:function(C){var b=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],D=v(C,b),U,X=0,G={};for(X=D.length;X--;)U=D[X],U.getAttribute("xlink:href")&&S(C,U),G[U.getAttribute("id")]=U;return G},parseAttributes:function(C,b,D){if(C){var U,X={},G,Y;typeof D>"u"&&(D=C.getAttribute("svgUid")),C.parentNode&&h.svgValidParentsRegEx.test(C.parentNode.nodeName)&&(X=h.parseAttributes(C.parentNode,b,D));var N=b.reduce(function(H,q){return U=C.getAttribute(q),U&&(H[q]=U),H},{}),I=t(M(C,D),h.parseStyleAttribute(C));N=t(N,I),I[g]&&C.setAttribute(g,I[g]),G=Y=X.fontSize||h.Text.DEFAULT_SVG_FONT_SIZE,N[i]&&(N[i]=G=s(N[i],Y));var L,$,W={};for(var z in N)L=x(z),$=m(L,N[z],X,G),W[L]=$;W&&W.font&&h.parseFontDeclaration(W.font,W);var B=t(X,W);return h.svgValidParentsRegEx.test(C.nodeName)?B:k(B)}},parseElements:function(C,b,D,U,X){new h.ElementsParser(C,b,D,U,X).parse()},parseStyleAttribute:function(C){var b={},D=C.getAttribute("style");return D&&(typeof D=="string"?_(D,b):K(D,b)),b},parsePointsAttribute:function(C){if(!C)return null;C=C.replace(/,/g," ").trim(),C=C.split(/\s+/);var b=[],D,U;for(D=0,U=C.length;D<U;D+=2)b.push({x:parseFloat(C[D]),y:parseFloat(C[D+1])});return b},getCSSRules:function(C){var b=C.getElementsByTagName("style"),D,U,X={},G;for(D=0,U=b.length;D<U;D++){var Y=b[D].textContent;Y=Y.replace(/\/\*[\s\S]*?\*\//g,""),Y.trim()!==""&&(G=Y.split("}"),G=G.filter(function(N){return N.trim()}),G.forEach(function(N){var I=N.split("{"),L={},$=I[1].trim(),W=$.split(";").filter(function(q){return q.trim()});for(D=0,U=W.length;D<U;D++){var z=W[D].split(":"),B=z[0].trim(),H=z[1].trim();L[B]=H}N=I[0].trim(),N.split(",").forEach(function(q){q=q.replace(/^svg/i,"").trim(),q!==""&&(X[q]?h.util.object.extend(X[q],L):X[q]=h.util.object.clone(L))})}))}return X},loadSVGFromURL:function(C,b,D,U){C=C.replace(/^\n\s*/,"").trim(),new h.util.request(C,{method:"get",onComplete:X});function X(G){var Y=G.responseXML;if(!Y||!Y.documentElement)return b&&b(null),!1;h.parseSVGDocument(Y.documentElement,function(N,I,L,$){b&&b(N,I,L,$)},D,U)}},loadSVGFromString:function(C,b,D,U){var X=new h.window.DOMParser,G=X.parseFromString(C.trim(),"text/xml");h.parseSVGDocument(G.documentElement,function(Y,N,I,L){b(Y,N,I,L)},D,U)}})}(Me),V.ElementsParser=function(f,h,t,o,c,s){this.elements=f,this.callback=h,this.options=t,this.reviver=o,this.svgUid=t&&t.svgUid||0,this.parsingOptions=c,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=s},function(f){f.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},f.createObjects=function(){var h=this;this.elements.forEach(function(t,o){t.setAttribute("svgUid",h.svgUid),h.createObject(t,o)})},f.findTag=function(h){return V[V.util.string.capitalize(h.tagName.replace("svg:",""))]},f.createObject=function(h,t){var o=this.findTag(h);if(o&&o.fromElement)try{o.fromElement(h,this.createCallback(t,h),this.options)}catch(c){V.log(c)}else this.checkIfDone()},f.createCallback=function(h,t){var o=this;return function(c){var s;o.resolveGradient(c,t,"fill"),o.resolveGradient(c,t,"stroke"),c instanceof V.Image&&c._originalElement&&(s=c.parsePreserveAspectRatioAttribute(t)),c._removeTransformMatrix(s),o.resolveClipPath(c,t),o.reviver&&o.reviver(t,c),o.instances[h]=c,o.checkIfDone()}},f.extractPropertyDefinition=function(h,t,o){var c=h[t],s=this.regexUrl;if(s.test(c)){s.lastIndex=0;var e=s.exec(c)[1];return s.lastIndex=0,V[o][this.svgUid][e]}},f.resolveGradient=function(h,t,o){var c=this.extractPropertyDefinition(h,o,"gradientDefs");if(c){var s=t.getAttribute(o+"-opacity"),e=V.Gradient.fromElement(c,h,s,this.options);h.set(o,e)}},f.createClipPathCallback=function(h,t){return function(o){o._removeTransformMatrix(),o.fillRule=o.clipRule,t.push(o)}},f.resolveClipPath=function(h,t){var o=this.extractPropertyDefinition(h,"clipPath","clipPaths"),c,s,e,a,r,n;if(o){a=[],e=V.util.invertTransform(h.calcTransformMatrix());for(var l=o[0].parentNode,u=t;u.parentNode&&u.getAttribute("clip-path")!==h.clipPath;)u=u.parentNode;u.parentNode.appendChild(l);for(var d=0;d<o.length;d++)c=o[d],s=this.findTag(c),s.fromElement(c,this.createClipPathCallback(h,a),this.options);a.length===1?o=a[0]:o=new V.Group(a),r=V.util.multiplyTransformMatrices(e,o.calcTransformMatrix()),o.clipPath&&this.resolveClipPath(o,u);var n=V.util.qrDecompose(r);o.flipX=!1,o.flipY=!1,o.set("scaleX",n.scaleX),o.set("scaleY",n.scaleY),o.angle=n.angle,o.skewX=n.skewX,o.skewY=0,o.setPositionByOrigin({x:n.translateX,y:n.translateY},"center","center"),h.clipPath=o}else delete h.clipPath},f.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(h){return h!=null}),this.callback(this.instances,this.elements))}}(V.ElementsParser.prototype),function(f){var h=f.fabric||(f.fabric={});if(h.Point){h.warn("fabric.Point is already defined");return}h.Point=t;function t(o,c){this.x=o,this.y=c}t.prototype={type:"point",constructor:t,add:function(o){return new t(this.x+o.x,this.y+o.y)},addEquals:function(o){return this.x+=o.x,this.y+=o.y,this},scalarAdd:function(o){return new t(this.x+o,this.y+o)},scalarAddEquals:function(o){return this.x+=o,this.y+=o,this},subtract:function(o){return new t(this.x-o.x,this.y-o.y)},subtractEquals:function(o){return this.x-=o.x,this.y-=o.y,this},scalarSubtract:function(o){return new t(this.x-o,this.y-o)},scalarSubtractEquals:function(o){return this.x-=o,this.y-=o,this},multiply:function(o){return new t(this.x*o,this.y*o)},multiplyEquals:function(o){return this.x*=o,this.y*=o,this},divide:function(o){return new t(this.x/o,this.y/o)},divideEquals:function(o){return this.x/=o,this.y/=o,this},eq:function(o){return this.x===o.x&&this.y===o.y},lt:function(o){return this.x<o.x&&this.y<o.y},lte:function(o){return this.x<=o.x&&this.y<=o.y},gt:function(o){return this.x>o.x&&this.y>o.y},gte:function(o){return this.x>=o.x&&this.y>=o.y},lerp:function(o,c){return typeof c>"u"&&(c=.5),c=Math.max(Math.min(1,c),0),new t(this.x+(o.x-this.x)*c,this.y+(o.y-this.y)*c)},distanceFrom:function(o){var c=this.x-o.x,s=this.y-o.y;return Math.sqrt(c*c+s*s)},midPointFrom:function(o){return this.lerp(o)},min:function(o){return new t(Math.min(this.x,o.x),Math.min(this.y,o.y))},max:function(o){return new t(Math.max(this.x,o.x),Math.max(this.y,o.y))},toString:function(){return this.x+","+this.y},setXY:function(o,c){return this.x=o,this.y=c,this},setX:function(o){return this.x=o,this},setY:function(o){return this.y=o,this},setFromPoint:function(o){return this.x=o.x,this.y=o.y,this},swap:function(o){var c=this.x,s=this.y;this.x=o.x,this.y=o.y,o.x=c,o.y=s},clone:function(){return new t(this.x,this.y)}}}(Me),function(f){var h=f.fabric||(f.fabric={});if(h.Intersection){h.warn("fabric.Intersection is already defined");return}function t(o){this.status=o,this.points=[]}h.Intersection=t,h.Intersection.prototype={constructor:t,appendPoint:function(o){return this.points.push(o),this},appendPoints:function(o){return this.points=this.points.concat(o),this}},h.Intersection.intersectLineLine=function(o,c,s,e){var a,r=(e.x-s.x)*(o.y-s.y)-(e.y-s.y)*(o.x-s.x),n=(c.x-o.x)*(o.y-s.y)-(c.y-o.y)*(o.x-s.x),l=(e.y-s.y)*(c.x-o.x)-(e.x-s.x)*(c.y-o.y);if(l!==0){var u=r/l,d=n/l;0<=u&&u<=1&&0<=d&&d<=1?(a=new t("Intersection"),a.appendPoint(new h.Point(o.x+u*(c.x-o.x),o.y+u*(c.y-o.y)))):a=new t}else r===0||n===0?a=new t("Coincident"):a=new t("Parallel");return a},h.Intersection.intersectLinePolygon=function(o,c,s){var e=new t,a=s.length,r,n,l,u;for(u=0;u<a;u++)r=s[u],n=s[(u+1)%a],l=t.intersectLineLine(o,c,r,n),e.appendPoints(l.points);return e.points.length>0&&(e.status="Intersection"),e},h.Intersection.intersectPolygonPolygon=function(o,c){var s=new t,e=o.length,a;for(a=0;a<e;a++){var r=o[a],n=o[(a+1)%e],l=t.intersectLinePolygon(r,n,c);s.appendPoints(l.points)}return s.points.length>0&&(s.status="Intersection"),s},h.Intersection.intersectPolygonRectangle=function(o,c,s){var e=c.min(s),a=c.max(s),r=new h.Point(a.x,e.y),n=new h.Point(e.x,a.y),l=t.intersectLinePolygon(e,r,o),u=t.intersectLinePolygon(r,a,o),d=t.intersectLinePolygon(a,n,o),i=t.intersectLinePolygon(n,e,o),g=new t;return g.appendPoints(l.points),g.appendPoints(u.points),g.appendPoints(d.points),g.appendPoints(i.points),g.points.length>0&&(g.status="Intersection"),g}}(Me),function(f){var h=f.fabric||(f.fabric={});if(h.Color){h.warn("fabric.Color is already defined.");return}function t(c){c?this._tryParsingColor(c):this.setSource([0,0,0,1])}h.Color=t,h.Color.prototype={_tryParsingColor:function(c){var s;c in t.colorNameMap&&(c=t.colorNameMap[c]),c==="transparent"&&(s=[255,255,255,0]),s||(s=t.sourceFromHex(c)),s||(s=t.sourceFromRgb(c)),s||(s=t.sourceFromHsl(c)),s||(s=[0,0,0,1]),s&&this.setSource(s)},_rgbToHsl:function(c,s,e){c/=255,s/=255,e/=255;var a,r,n,l=h.util.array.max([c,s,e]),u=h.util.array.min([c,s,e]);if(n=(l+u)/2,l===u)a=r=0;else{var d=l-u;switch(r=n>.5?d/(2-l-u):d/(l+u),l){case c:a=(s-e)/d+(s<e?6:0);break;case s:a=(e-c)/d+2;break;case e:a=(c-s)/d+4;break}a/=6}return[Math.round(a*360),Math.round(r*100),Math.round(n*100)]},getSource:function(){return this._source},setSource:function(c){this._source=c},toRgb:function(){var c=this.getSource();return"rgb("+c[0]+","+c[1]+","+c[2]+")"},toRgba:function(){var c=this.getSource();return"rgba("+c[0]+","+c[1]+","+c[2]+","+c[3]+")"},toHsl:function(){var c=this.getSource(),s=this._rgbToHsl(c[0],c[1],c[2]);return"hsl("+s[0]+","+s[1]+"%,"+s[2]+"%)"},toHsla:function(){var c=this.getSource(),s=this._rgbToHsl(c[0],c[1],c[2]);return"hsla("+s[0]+","+s[1]+"%,"+s[2]+"%,"+c[3]+")"},toHex:function(){var c=this.getSource(),s,e,a;return s=c[0].toString(16),s=s.length===1?"0"+s:s,e=c[1].toString(16),e=e.length===1?"0"+e:e,a=c[2].toString(16),a=a.length===1?"0"+a:a,s.toUpperCase()+e.toUpperCase()+a.toUpperCase()},toHexa:function(){var c=this.getSource(),s;return s=Math.round(c[3]*255),s=s.toString(16),s=s.length===1?"0"+s:s,this.toHex()+s.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(c){var s=this.getSource();return s[3]=c,this.setSource(s),this},toGrayscale:function(){var c=this.getSource(),s=parseInt((c[0]*.3+c[1]*.59+c[2]*.11).toFixed(0),10),e=c[3];return this.setSource([s,s,s,e]),this},toBlackWhite:function(c){var s=this.getSource(),e=(s[0]*.3+s[1]*.59+s[2]*.11).toFixed(0),a=s[3];return c=c||127,e=Number(e)<Number(c)?0:255,this.setSource([e,e,e,a]),this},overlayWith:function(c){c instanceof t||(c=new t(c));var s=[],e=this.getAlpha(),a=.5,r=this.getSource(),n=c.getSource(),l;for(l=0;l<3;l++)s.push(Math.round(r[l]*(1-a)+n[l]*a));return s[3]=e,this.setSource(s),this}},h.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,h.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,h.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,h.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function o(c,s,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?c+(s-c)*6*e:e<1/2?s:e<2/3?c+(s-c)*(2/3-e)*6:c}h.Color.fromRgb=function(c){return t.fromSource(t.sourceFromRgb(c))},h.Color.sourceFromRgb=function(c){var s=c.match(t.reRGBa);if(s){var e=parseInt(s[1],10)/(/%$/.test(s[1])?100:1)*(/%$/.test(s[1])?255:1),a=parseInt(s[2],10)/(/%$/.test(s[2])?100:1)*(/%$/.test(s[2])?255:1),r=parseInt(s[3],10)/(/%$/.test(s[3])?100:1)*(/%$/.test(s[3])?255:1);return[parseInt(e,10),parseInt(a,10),parseInt(r,10),s[4]?parseFloat(s[4]):1]}},h.Color.fromRgba=t.fromRgb,h.Color.fromHsl=function(c){return t.fromSource(t.sourceFromHsl(c))},h.Color.sourceFromHsl=function(c){var s=c.match(t.reHSLa);if(s){var e=(parseFloat(s[1])%360+360)%360/360,a=parseFloat(s[2])/(/%$/.test(s[2])?100:1),r=parseFloat(s[3])/(/%$/.test(s[3])?100:1),n,l,u;if(a===0)n=l=u=r;else{var d=r<=.5?r*(a+1):r+a-r*a,i=r*2-d;n=o(i,d,e+1/3),l=o(i,d,e),u=o(i,d,e-1/3)}return[Math.round(n*255),Math.round(l*255),Math.round(u*255),s[4]?parseFloat(s[4]):1]}},h.Color.fromHsla=t.fromHsl,h.Color.fromHex=function(c){return t.fromSource(t.sourceFromHex(c))},h.Color.sourceFromHex=function(c){if(c.match(t.reHex)){var s=c.slice(c.indexOf("#")+1),e=s.length===3||s.length===4,a=s.length===8||s.length===4,r=e?s.charAt(0)+s.charAt(0):s.substring(0,2),n=e?s.charAt(1)+s.charAt(1):s.substring(2,4),l=e?s.charAt(2)+s.charAt(2):s.substring(4,6),u=a?e?s.charAt(3)+s.charAt(3):s.substring(6,8):"FF";return[parseInt(r,16),parseInt(n,16),parseInt(l,16),parseFloat((parseInt(u,16)/255).toFixed(2))]}},h.Color.fromSource=function(c){var s=new t;return s.setSource(c),s}}(Me),function(f){var h=f.fabric||(f.fabric={}),t=["e","se","s","sw","w","nw","n","ne","e"],o=["ns","nesw","ew","nwse"],c={},s="left",e="top",a="right",r="bottom",n="center",l={top:r,bottom:e,left:a,right:s,center:n},u=h.util.radiansToDegrees,d=Math.sign||function(L){return(L>0)-(L<0)||+L};function i(L,$){var W=L.angle+u(Math.atan2($.y,$.x))+360;return Math.round(W%360/45)}function g(L,$){var W=$.transform.target,z=W.canvas,B=h.util.object.clone($);B.target=W,z&&z.fire("object:"+L,B),W.fire(L,$)}function x(L,$){var W=$.canvas,z=W.uniScaleKey,B=L[z];return W.uniformScaling&&!B||!W.uniformScaling&&B}function m(L){return L.originX===n&&L.originY===n}function A(L,$,W){var z=L.lockScalingX,B=L.lockScalingY;return!!(z&&B||!$&&(z||B)&&W||z&&$==="x"||B&&$==="y")}function k(L,$,W){var z="not-allowed",B=x(L,W),H="";if($.x!==0&&$.y===0?H="x":$.x===0&&$.y!==0&&(H="y"),A(W,H,B))return z;var q=i(W,$);return t[q]+"-resize"}function v(L,$,W){var z="not-allowed";if($.x!==0&&W.lockSkewingY||$.y!==0&&W.lockSkewingX)return z;var B=i(W,$)%4;return o[B]+"-resize"}function _(L,$,W){return L[W.canvas.altActionKey]?c.skewCursorStyleHandler(L,$,W):c.scaleCursorStyleHandler(L,$,W)}function K(L,$,W){var z=L[W.canvas.altActionKey];if($.x===0)return z?"skewX":"scaleY";if($.y===0)return z?"skewY":"scaleX"}function M(L,$,W){return W.lockRotation?"not-allowed":$.cursorStyle}function j(L,$,W,z){return{e:L,transform:$,pointer:{x:W,y:z}}}function O(L){return function($,W,z,B){var H=W.target,q=H.getCenterPoint(),Z=H.translateToOriginPoint(q,W.originX,W.originY),te=L($,W,z,B);return H.setPositionByOrigin(Z,W.originX,W.originY),te}}function T(L,$){return function(W,z,B,H){var q=$(W,z,B,H);return q&&g(L,j(W,z,B,H)),q}}function R(L,$,W,z,B){var H=L.target,q=H.controls[L.corner],Z=H.canvas.getZoom(),te=H.padding/Z,Q=H.toLocalPoint(new h.Point(z,B),$,W);return Q.x>=te&&(Q.x-=te),Q.x<=-te&&(Q.x+=te),Q.y>=te&&(Q.y-=te),Q.y<=te&&(Q.y+=te),Q.x-=q.offsetX,Q.y-=q.offsetY,Q}function y(L){return L.flipX!==L.flipY}function p(L,$,W,z,B){if(L[$]!==0){var H=L._getTransformedDimensions()[z],q=B/H*L[W];L.set(W,q)}}function P(L,$,W,z){var B=$.target,H=B._getTransformedDimensions(0,B.skewY),q=R($,$.originX,$.originY,W,z),Z=Math.abs(q.x*2)-H.x,te=B.skewX,Q;Z<2?Q=0:(Q=u(Math.atan2(Z/B.scaleX,H.y/B.scaleY)),$.originX===s&&$.originY===r&&(Q=-Q),$.originX===a&&$.originY===e&&(Q=-Q),y(B)&&(Q=-Q));var ee=te!==Q;if(ee){var J=B._getTransformedDimensions().y;B.set("skewX",Q),p(B,"skewY","scaleY","y",J)}return ee}function E(L,$,W,z){var B=$.target,H=B._getTransformedDimensions(B.skewX,0),q=R($,$.originX,$.originY,W,z),Z=Math.abs(q.y*2)-H.y,te=B.skewY,Q;Z<2?Q=0:(Q=u(Math.atan2(Z/B.scaleY,H.x/B.scaleX)),$.originX===s&&$.originY===r&&(Q=-Q),$.originX===a&&$.originY===e&&(Q=-Q),y(B)&&(Q=-Q));var ee=te!==Q;if(ee){var J=B._getTransformedDimensions().x;B.set("skewY",Q),p(B,"skewX","scaleX","x",J)}return ee}function S(L,$,W,z){var B=$.target,H=B.skewX,q,Z=$.originY;if(B.lockSkewingX)return!1;if(H===0){var te=R($,n,n,W,z);te.x>0?q=s:q=a}else H>0&&(q=Z===e?s:a),H<0&&(q=Z===e?a:s),y(B)&&(q=q===s?a:s);$.originX=q;var Q=T("skewing",O(P));return Q(L,$,W,z)}function F(L,$,W,z){var B=$.target,H=B.skewY,q,Z=$.originX;if(B.lockSkewingY)return!1;if(H===0){var te=R($,n,n,W,z);te.y>0?q=e:q=r}else H>0&&(q=Z===s?e:r),H<0&&(q=Z===s?r:e),y(B)&&(q=q===e?r:e);$.originY=q;var Q=T("skewing",O(E));return Q(L,$,W,z)}function C(L,$,W,z){var B=$,H=B.target,q=H.translateToOriginPoint(H.getCenterPoint(),B.originX,B.originY);if(H.lockRotation)return!1;var Z=Math.atan2(B.ey-q.y,B.ex-q.x),te=Math.atan2(z-q.y,W-q.x),Q=u(te-Z+B.theta),ee=!0;if(H.snapAngle>0){var J=H.snapAngle,ne=H.snapThreshold||J,re=Math.ceil(Q/J)*J,ae=Math.floor(Q/J)*J;Math.abs(Q-ae)<ne?Q=ae:Math.abs(Q-re)<ne&&(Q=re)}return Q<0&&(Q=360+Q),Q%=360,ee=H.angle!==Q,H.angle=Q,ee}function b(L,$,W,z,B){B=B||{};var H=$.target,q=H.lockScalingX,Z=H.lockScalingY,te=B.by,Q,ee,J,ne,re=x(L,H),ae=A(H,te,re),se,oe,me=$.gestureScale;if(ae)return!1;if(me)ee=$.scaleX*me,J=$.scaleY*me;else{if(Q=R($,$.originX,$.originY,W,z),se=te!=="y"?d(Q.x):1,oe=te!=="x"?d(Q.y):1,$.signX||($.signX=se),$.signY||($.signY=oe),H.lockScalingFlip&&($.signX!==se||$.signY!==oe))return!1;if(ne=H._getTransformedDimensions(),re&&!te){var xe=Math.abs(Q.x)+Math.abs(Q.y),Ae=$.original,Se=Math.abs(ne.x*Ae.scaleX/H.scaleX)+Math.abs(ne.y*Ae.scaleY/H.scaleY),Fe=xe/Se;ee=Ae.scaleX*Fe,J=Ae.scaleY*Fe}else ee=Math.abs(Q.x*H.scaleX/ne.x),J=Math.abs(Q.y*H.scaleY/ne.y);m($)&&(ee*=2,J*=2),$.signX!==se&&te!=="y"&&($.originX=l[$.originX],ee*=-1,$.signX=se),$.signY!==oe&&te!=="x"&&($.originY=l[$.originY],J*=-1,$.signY=oe)}var Pe=H.scaleX,ue=H.scaleY;return te?(te==="x"&&H.set("scaleX",ee),te==="y"&&H.set("scaleY",J)):(!q&&H.set("scaleX",ee),!Z&&H.set("scaleY",J)),Pe!==H.scaleX||ue!==H.scaleY}function D(L,$,W,z){return b(L,$,W,z)}function U(L,$,W,z){return b(L,$,W,z,{by:"x"})}function X(L,$,W,z){return b(L,$,W,z,{by:"y"})}function G(L,$,W,z){return L[$.target.canvas.altActionKey]?c.skewHandlerX(L,$,W,z):c.scalingY(L,$,W,z)}function Y(L,$,W,z){return L[$.target.canvas.altActionKey]?c.skewHandlerY(L,$,W,z):c.scalingX(L,$,W,z)}function N(L,$,W,z){var B=$.target,H=R($,$.originX,$.originY,W,z),q=B.strokeWidth/(B.strokeUniform?B.scaleX:1),Z=m($)?2:1,te=B.width,Q=Math.abs(H.x*Z/B.scaleX)-q;return B.set("width",Math.max(Q,0)),te!==Q}function I(L,$,W,z){var B=$.target,H=W-$.offsetX,q=z-$.offsetY,Z=!B.get("lockMovementX")&&B.left!==H,te=!B.get("lockMovementY")&&B.top!==q;return Z&&B.set("left",H),te&&B.set("top",q),(Z||te)&&g("moving",j(L,$,W,z)),Z||te}c.scaleCursorStyleHandler=k,c.skewCursorStyleHandler=v,c.scaleSkewCursorStyleHandler=_,c.rotationWithSnapping=T("rotating",O(C)),c.scalingEqually=T("scaling",O(D)),c.scalingX=T("scaling",O(U)),c.scalingY=T("scaling",O(X)),c.scalingYOrSkewingX=G,c.scalingXOrSkewingY=Y,c.changeWidth=T("resizing",O(N)),c.skewHandlerX=S,c.skewHandlerY=F,c.dragHandler=I,c.scaleOrSkewActionName=K,c.rotationStyleHandler=M,c.fireEvent=g,c.wrapWithFixedAnchor=O,c.wrapWithFireEvent=T,c.getLocalPoint=R,h.controlsUtils=c}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.util.degreesToRadians,o=h.controlsUtils;function c(e,a,r,n,l){n=n||{};var u=this.sizeX||n.cornerSize||l.cornerSize,d=this.sizeY||n.cornerSize||l.cornerSize,i=typeof n.transparentCorners<"u"?n.transparentCorners:l.transparentCorners,g=i?"stroke":"fill",x=!i&&(n.cornerStrokeColor||l.cornerStrokeColor),m=a,A=r,k;e.save(),e.fillStyle=n.cornerColor||l.cornerColor,e.strokeStyle=n.cornerStrokeColor||l.cornerStrokeColor,u>d?(k=u,e.scale(1,d/u),A=r*u/d):d>u?(k=d,e.scale(u/d,1),m=a*d/u):k=u,e.lineWidth=1,e.beginPath(),e.arc(m,A,k/2,0,2*Math.PI,!1),e[g](),x&&e.stroke(),e.restore()}function s(e,a,r,n,l){n=n||{};var u=this.sizeX||n.cornerSize||l.cornerSize,d=this.sizeY||n.cornerSize||l.cornerSize,i=typeof n.transparentCorners<"u"?n.transparentCorners:l.transparentCorners,g=i?"stroke":"fill",x=!i&&(n.cornerStrokeColor||l.cornerStrokeColor),m=u/2,A=d/2;e.save(),e.fillStyle=n.cornerColor||l.cornerColor,e.strokeStyle=n.cornerStrokeColor||l.cornerStrokeColor,e.lineWidth=1,e.translate(a,r),e.rotate(t(l.angle)),e[g+"Rect"](-m,-A,u,d),x&&e.strokeRect(-m,-A,u,d),e.restore()}o.renderCircleControl=c,o.renderSquareControl=s}(Me),function(f){var h=f.fabric||(f.fabric={});function t(o){for(var c in o)this[c]=o[c]}h.Control=t,h.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(o,c){return c.cursorStyle},getActionName:function(o,c){return c.actionName},getVisibility:function(o,c){var s=o._controlsVisibility;return s&&typeof s[c]<"u"?s[c]:this.visible},setVisibility:function(o){this.visible=o},positionHandler:function(o,c){var s=h.util.transformPoint({x:this.x*o.x+this.offsetX,y:this.y*o.y+this.offsetY},c);return s},calcCornerCoords:function(o,c,s,e,a){var r,n,l,u,d=a?this.touchSizeX:this.sizeX,i=a?this.touchSizeY:this.sizeY;if(d&&i&&d!==i){var g=Math.atan2(i,d),x=Math.sqrt(d*d+i*i)/2,m=g-h.util.degreesToRadians(o),A=Math.PI/2-g-h.util.degreesToRadians(o);r=x*h.util.cos(m),n=x*h.util.sin(m),l=x*h.util.cos(A),u=x*h.util.sin(A)}else{var k=d&&i?d:c;x=k*.7071067812;var m=h.util.degreesToRadians(45-o);r=l=x*h.util.cos(m),n=u=x*h.util.sin(m)}return{tl:{x:s-u,y:e-l},tr:{x:s+r,y:e-n},bl:{x:s-r,y:e+n},br:{x:s+u,y:e+l}}},render:function(o,c,s,e,a){switch(e=e||{},e.cornerStyle||a.cornerStyle){case"circle":h.controlsUtils.renderCircleControl.call(this,o,c,s,e,a);break;default:h.controlsUtils.renderSquareControl.call(this,o,c,s,e,a)}}}}(Me),function(){function f(s,e){var a=s.getAttribute("style"),r=s.getAttribute("offset")||0,n,l,u,d;if(r=parseFloat(r)/(/%$/.test(r)?100:1),r=r<0?0:r>1?1:r,a){var i=a.split(/\s*;\s*/);for(i[i.length-1]===""&&i.pop(),d=i.length;d--;){var g=i[d].split(/\s*:\s*/),x=g[0].trim(),m=g[1].trim();x==="stop-color"?n=m:x==="stop-opacity"&&(u=m)}}return n||(n=s.getAttribute("stop-color")||"rgb(0,0,0)"),u||(u=s.getAttribute("stop-opacity")),n=new V.Color(n),l=n.getAlpha(),u=isNaN(parseFloat(u))?1:parseFloat(u),u*=l*e,{offset:r,color:n.toRgb(),opacity:u}}function h(s){return{x1:s.getAttribute("x1")||0,y1:s.getAttribute("y1")||0,x2:s.getAttribute("x2")||"100%",y2:s.getAttribute("y2")||0}}function t(s){return{x1:s.getAttribute("fx")||s.getAttribute("cx")||"50%",y1:s.getAttribute("fy")||s.getAttribute("cy")||"50%",r1:0,x2:s.getAttribute("cx")||"50%",y2:s.getAttribute("cy")||"50%",r2:s.getAttribute("r")||"50%"}}var o=V.util.object.clone;V.Gradient=V.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(s){s||(s={}),s.coords||(s.coords={});var e,a=this;Object.keys(s).forEach(function(r){a[r]=s[r]}),this.id?this.id+="_"+V.Object.__uid++:this.id=V.Object.__uid++,e={x1:s.coords.x1||0,y1:s.coords.y1||0,x2:s.coords.x2||0,y2:s.coords.y2||0},this.type==="radial"&&(e.r1=s.coords.r1||0,e.r2=s.coords.r2||0),this.coords=e,this.colorStops=s.colorStops.slice()},addColorStop:function(s){for(var e in s){var a=new V.Color(s[e]);this.colorStops.push({offset:parseFloat(e),color:a.toRgb(),opacity:a.getAlpha()})}return this},toObject:function(s){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return V.util.populateWithProperties(this,e,s),e},toSVG:function(s,l){var a=o(this.coords,!0),r,n,l=l||{},u,d,i=o(this.colorStops,!0),g=a.r1>a.r2,x=this.gradientTransform?this.gradientTransform.concat():V.iMatrix.concat(),m=-this.offsetX,A=-this.offsetY,k=!!l.additionalTransform,v=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(i.sort(function(O,T){return O.offset-T.offset}),v==="objectBoundingBox"?(m/=s.width,A/=s.height):(m+=s.width/2,A+=s.height/2),s.type==="path"&&this.gradientUnits!=="percentage"&&(m-=s.pathOffset.x,A-=s.pathOffset.y),x[4]-=m,x[5]-=A,d='id="SVGID_'+this.id+'" gradientUnits="'+v+'"',d+=' gradientTransform="'+(k?l.additionalTransform+" ":"")+V.util.matrixToSVG(x)+'" ',this.type==="linear"?u=["<linearGradient ",d,' x1="',a.x1,'" y1="',a.y1,'" x2="',a.x2,'" y2="',a.y2,`">
`]:this.type==="radial"&&(u=["<radialGradient ",d,' cx="',g?a.x1:a.x2,'" cy="',g?a.y1:a.y2,'" r="',g?a.r1:a.r2,'" fx="',g?a.x2:a.x1,'" fy="',g?a.y2:a.y1,`">
`]),this.type==="radial"){if(g)for(i=i.concat(),i.reverse(),r=0,n=i.length;r<n;r++)i[r].offset=1-i[r].offset;var _=Math.min(a.r1,a.r2);if(_>0){var K=Math.max(a.r1,a.r2),M=_/K;for(r=0,n=i.length;r<n;r++)i[r].offset+=M*(1-i[r].offset)}}for(r=0,n=i.length;r<n;r++){var j=i[r];u.push("<stop ",'offset="',j.offset*100+"%",'" style="stop-color:',j.color,typeof j.opacity<"u"?";stop-opacity: "+j.opacity:";",`"/>
`)}return u.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),u.join("")},toLive:function(s){var e,a=V.util.object.clone(this.coords),r,n;if(this.type){for(this.type==="linear"?e=s.createLinearGradient(a.x1,a.y1,a.x2,a.y2):this.type==="radial"&&(e=s.createRadialGradient(a.x1,a.y1,a.r1,a.x2,a.y2,a.r2)),r=0,n=this.colorStops.length;r<n;r++){var l=this.colorStops[r].color,u=this.colorStops[r].opacity,d=this.colorStops[r].offset;typeof u<"u"&&(l=new V.Color(l).setAlpha(u).toRgba()),e.addColorStop(d,l)}return e}}}),V.util.object.extend(V.Gradient,{fromElement:function(s,e,a,r){var n=parseFloat(a)/(/%$/.test(a)?100:1);n=n<0?0:n>1?1:n,isNaN(n)&&(n=1);var l=s.getElementsByTagName("stop"),u,d=s.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",i=s.getAttribute("gradientTransform")||"",g=[],x,m,A=0,k=0,v;for(s.nodeName==="linearGradient"||s.nodeName==="LINEARGRADIENT"?(u="linear",x=h(s)):(u="radial",x=t(s)),m=l.length;m--;)g.push(f(l[m],n));v=V.parseTransformAttribute(i),c(e,x,r,d),d==="pixels"&&(A=-e.left,k=-e.top);var _=new V.Gradient({id:s.getAttribute("id"),type:u,coords:x,colorStops:g,gradientUnits:d,gradientTransform:v,offsetX:A,offsetY:k});return _}});function c(s,e,a,r){var n,l;Object.keys(e).forEach(function(u){n=e[u],n==="Infinity"?l=1:n==="-Infinity"?l=0:(l=parseFloat(e[u],10),typeof n=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(n)&&(l*=.01,r==="pixels"&&((u==="x1"||u==="x2"||u==="r2")&&(l*=a.viewBoxWidth||a.width),(u==="y1"||u==="y2")&&(l*=a.viewBoxHeight||a.height)))),e[u]=l})}}(),function(){var f=V.util.toFixed;V.Pattern=V.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(h,t){if(h||(h={}),this.id=V.Object.__uid++,this.setOptions(h),!h.source||h.source&&typeof h.source!="string"){t&&t(this);return}else{var o=this;this.source=V.util.createImage(),V.util.loadImage(h.source,function(c,s){o.source=c,t&&t(o,s)},null,this.crossOrigin)}},toObject:function(h){var t=V.Object.NUM_FRACTION_DIGITS,o,c;return typeof this.source.src=="string"?o=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(o=this.source.toDataURL()),c={type:"pattern",source:o,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:f(this.offsetX,t),offsetY:f(this.offsetY,t),patternTransform:this.patternTransform?this.patternTransform.concat():null},V.util.populateWithProperties(this,c,h),c},toSVG:function(h){var t=typeof this.source=="function"?this.source():this.source,o=t.width/h.width,c=t.height/h.height,s=this.offsetX/h.width,e=this.offsetY/h.height,a="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(c=1,e&&(c+=Math.abs(e))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(o=1,s&&(o+=Math.abs(s))),t.src?a=t.src:t.toDataURL&&(a=t.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+s+'" y="'+e+'" width="'+o+'" height="'+c+`">
<image x="0" y="0" width="`+t.width+'" height="'+t.height+'" xlink:href="'+a+`"></image>
</pattern>
`},setOptions:function(h){for(var t in h)this[t]=h[t]},toLive:function(h){var t=this.source;return!t||typeof t.src<"u"&&(!t.complete||t.naturalWidth===0||t.naturalHeight===0)?"":h.createPattern(t,this.repeat)}})}(),function(f){var h=f.fabric||(f.fabric={}),t=h.util.toFixed;if(h.Shadow){h.warn("fabric.Shadow is already defined.");return}h.Shadow=h.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(o){typeof o=="string"&&(o=this._parseShadow(o));for(var c in o)this[c]=o[c];this.id=h.Object.__uid++},_parseShadow:function(o){var c=o.trim(),s=h.Shadow.reOffsetsAndBlur.exec(c)||[],e=c.replace(h.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:e.trim(),offsetX:parseFloat(s[1],10)||0,offsetY:parseFloat(s[2],10)||0,blur:parseFloat(s[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(o){var c=40,s=40,e=h.Object.NUM_FRACTION_DIGITS,a=h.util.rotateVector({x:this.offsetX,y:this.offsetY},h.util.degreesToRadians(-o.angle)),r=20,n=new h.Color(this.color);return o.width&&o.height&&(c=t((Math.abs(a.x)+this.blur)/o.width,e)*100+r,s=t((Math.abs(a.y)+this.blur)/o.height,e)*100+r),o.flipX&&(a.x*=-1),o.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+s+'%" height="'+(100+2*s)+'%" x="-'+c+'%" width="'+(100+2*c)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+t(this.blur?this.blur/2:0,e)+`"></feGaussianBlur>
	<feOffset dx="`+t(a.x,e)+'" dy="'+t(a.y,e)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+n.toRgb()+'" flood-opacity="'+n.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var o={},c=h.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(s){this[s]!==c[s]&&(o[s]=this[s])},this),o}}),h.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(Me),function(){if(V.StaticCanvas){V.warn("fabric.StaticCanvas is already defined.");return}var f=V.util.object.extend,h=V.util.getElementOffset,t=V.util.removeFromArray,o=V.util.toFixed,c=V.util.transformPoint,s=V.util.invertTransform,e=V.util.getNodeCanvas,a=V.util.createCanvasElement,r=new Error("Could not initialize `canvas` element");V.StaticCanvas=V.util.createClass(V.CommonMethods,{initialize:function(n,l){l||(l={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(n,l)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:V.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(n,l){var u=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(n),this._initOptions(l),this.interactive||this._initRetinaScaling(),l.overlayImage&&this.setOverlayImage(l.overlayImage,u),l.backgroundImage&&this.setBackgroundImage(l.backgroundImage,u),l.backgroundColor&&this.setBackgroundColor(l.backgroundColor,u),l.overlayColor&&this.setOverlayColor(l.overlayColor,u),this.calcOffset()},_isRetinaScaling:function(){return V.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,V.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var n=V.devicePixelRatio;this.__initRetinaScaling(n,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(n,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(n,l,u){l.setAttribute("width",this.width*n),l.setAttribute("height",this.height*n),u.scale(n,n)},calcOffset:function(){return this._offset=h(this.lowerCanvasEl),this},setOverlayImage:function(n,l,u){return this.__setBgOverlayImage("overlayImage",n,l,u)},setBackgroundImage:function(n,l,u){return this.__setBgOverlayImage("backgroundImage",n,l,u)},setOverlayColor:function(n,l){return this.__setBgOverlayColor("overlayColor",n,l)},setBackgroundColor:function(n,l){return this.__setBgOverlayColor("backgroundColor",n,l)},__setBgOverlayImage:function(n,l,u,d){return typeof l=="string"?V.util.loadImage(l,function(i,g){if(i){var x=new V.Image(i,d);this[n]=x,x.canvas=this}u&&u(i,g)},this,d&&d.crossOrigin):(d&&l.setOptions(d),this[n]=l,l&&(l.canvas=this),u&&u(l,!1)),this},__setBgOverlayColor:function(n,l,u){return this[n]=l,this._initGradient(l,n),this._initPattern(l,n,u),this},_createCanvasElement:function(){var n=a();if(!n||(n.style||(n.style={}),typeof n.getContext>"u"))throw r;return n},_initOptions:function(n){var l=this.lowerCanvasEl;this._setOptions(n),this.width=this.width||parseInt(l.width,10)||0,this.height=this.height||parseInt(l.height,10)||0,this.lowerCanvasEl.style&&(l.width=this.width,l.height=this.height,l.style.width=this.width+"px",l.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(n){n&&n.getContext?this.lowerCanvasEl=n:this.lowerCanvasEl=V.util.getById(n)||this._createCanvasElement(),V.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(n,l){return this.setDimensions({width:n},l)},setHeight:function(n,l){return this.setDimensions({height:n},l)},setDimensions:function(n,l){var u;l=l||{};for(var d in n)u=n[d],l.cssOnly||(this._setBackstoreDimension(d,n[d]),u+="px",this.hasLostContext=!0),l.backstoreOnly||this._setCssDimension(d,u);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),l.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(n,l){return this.lowerCanvasEl[n]=l,this.upperCanvasEl&&(this.upperCanvasEl[n]=l),this.cacheCanvasEl&&(this.cacheCanvasEl[n]=l),this[n]=l,this},_setCssDimension:function(n,l){return this.lowerCanvasEl.style[n]=l,this.upperCanvasEl&&(this.upperCanvasEl.style[n]=l),this.wrapperEl&&(this.wrapperEl.style[n]=l),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(n){var l=this._activeObject,u=this.backgroundImage,d=this.overlayImage,i,g,x;for(this.viewportTransform=n,g=0,x=this._objects.length;g<x;g++)i=this._objects[g],i.group||i.setCoords(!0);return l&&l.setCoords(),u&&u.setCoords(!0),d&&d.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(n,l){var u=n,d=this.viewportTransform.slice(0);n=c(n,s(this.viewportTransform)),d[0]=l,d[3]=l;var i=c(n,d);return d[4]+=u.x-i.x,d[5]+=u.y-i.y,this.setViewportTransform(d)},setZoom:function(n){return this.zoomToPoint(new V.Point(0,0),n),this},absolutePan:function(n){var l=this.viewportTransform.slice(0);return l[4]=-n.x,l[5]=-n.y,this.setViewportTransform(l)},relativePan:function(n){return this.absolutePan(new V.Point(-n.x-this.viewportTransform[4],-n.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(n){this.stateful&&n.setupState(),n._set("canvas",this),n.setCoords(),this.fire("object:added",{target:n}),n.fire("added")},_onObjectRemoved:function(n){this.fire("object:removed",{target:n}),n.fire("removed"),delete n.canvas},clearContext:function(n){return n.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var n=this.contextContainer;return this.renderCanvas(n,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=V.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var n={},l=this.width,u=this.height,d=s(this.viewportTransform);return n.tl=c({x:0,y:0},d),n.br=c({x:l,y:u},d),n.tr=new V.Point(n.br.x,n.tl.y),n.bl=new V.Point(n.tl.x,n.br.y),this.vptCoords=n,n},cancelRequestedRender:function(){this.isRendering&&(V.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(n,l){var u=this.viewportTransform,d=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(n),V.util.setImageSmoothing(n,this.imageSmoothingEnabled),this.fire("before:render",{ctx:n}),this._renderBackground(n),n.save(),n.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._renderObjects(n,l),n.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(n),d&&(d.canvas=this,d.shouldCache(),d._transformDone=!0,d.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(n)),this._renderOverlay(n),this.controlsAboveOverlay&&this.interactive&&this.drawControls(n),this.fire("after:render",{ctx:n})},drawClipPathOnCanvas:function(n){var l=this.viewportTransform,u=this.clipPath;n.save(),n.transform(l[0],l[1],l[2],l[3],l[4],l[5]),n.globalCompositeOperation="destination-in",u.transform(n),n.scale(1/u.zoomX,1/u.zoomY),n.drawImage(u._cacheCanvas,-u.cacheTranslationX,-u.cacheTranslationY),n.restore()},_renderObjects:function(n,l){var u,d;for(u=0,d=l.length;u<d;++u)l[u]&&l[u].render(n)},_renderBackgroundOrOverlay:function(n,l){var u=this[l+"Color"],d=this[l+"Image"],i=this.viewportTransform,g=this[l+"Vpt"];if(!(!u&&!d)){if(u){n.save(),n.beginPath(),n.moveTo(0,0),n.lineTo(this.width,0),n.lineTo(this.width,this.height),n.lineTo(0,this.height),n.closePath(),n.fillStyle=u.toLive?u.toLive(n,this):u,g&&n.transform(i[0],i[1],i[2],i[3],i[4],i[5]),n.transform(1,0,0,1,u.offsetX||0,u.offsetY||0);var x=u.gradientTransform||u.patternTransform;x&&n.transform(x[0],x[1],x[2],x[3],x[4],x[5]),n.fill(),n.restore()}d&&(n.save(),g&&n.transform(i[0],i[1],i[2],i[3],i[4],i[5]),d.render(n),n.restore())}},_renderBackground:function(n){this._renderBackgroundOrOverlay(n,"background")},_renderOverlay:function(n){this._renderBackgroundOrOverlay(n,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new V.Point(this.width/2,this.height/2)},centerObjectH:function(n){return this._centerObject(n,new V.Point(this.getCenterPoint().x,n.getCenterPoint().y))},centerObjectV:function(n){return this._centerObject(n,new V.Point(n.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(n){var l=this.getCenterPoint();return this._centerObject(n,l)},viewportCenterObject:function(n){var l=this.getVpCenter();return this._centerObject(n,l)},viewportCenterObjectH:function(n){var l=this.getVpCenter();return this._centerObject(n,new V.Point(l.x,n.getCenterPoint().y)),this},viewportCenterObjectV:function(n){var l=this.getVpCenter();return this._centerObject(n,new V.Point(n.getCenterPoint().x,l.y))},getVpCenter:function(){var n=this.getCenterPoint(),l=s(this.viewportTransform);return c(n,l)},_centerObject:function(n,l){return n.setPositionByOrigin(l,"center","center"),n.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(n){return this.toDatalessObject(n)},toObject:function(n){return this._toObjectMethod("toObject",n)},toDatalessObject:function(n){return this._toObjectMethod("toDatalessObject",n)},_toObjectMethod:function(n,l){var u=this.clipPath,d={version:V.version,objects:this._toObjects(n,l)};return u&&!u.excludeFromExport&&(d.clipPath=this._toObject(this.clipPath,n,l)),f(d,this.__serializeBgOverlay(n,l)),V.util.populateWithProperties(this,d,l),d},_toObjects:function(n,l){return this._objects.filter(function(u){return!u.excludeFromExport}).map(function(u){return this._toObject(u,n,l)},this)},_toObject:function(n,l,u){var d;this.includeDefaultValues||(d=n.includeDefaultValues,n.includeDefaultValues=!1);var i=n[l](u);return this.includeDefaultValues||(n.includeDefaultValues=d),i},__serializeBgOverlay:function(n,l){var u={},d=this.backgroundImage,i=this.overlayImage,g=this.backgroundColor,x=this.overlayColor;return g&&g.toObject?g.excludeFromExport||(u.background=g.toObject(l)):g&&(u.background=g),x&&x.toObject?x.excludeFromExport||(u.overlay=x.toObject(l)):x&&(u.overlay=x),d&&!d.excludeFromExport&&(u.backgroundImage=this._toObject(d,n,l)),i&&!i.excludeFromExport&&(u.overlayImage=this._toObject(i,n,l)),u},svgViewportTransformation:!0,toSVG:function(n,l){n||(n={}),n.reviver=l;var u=[];return this._setSVGPreamble(u,n),this._setSVGHeader(u,n),this.clipPath&&u.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(u,"background"),this._setSVGBgOverlayImage(u,"backgroundImage",l),this._setSVGObjects(u,l),this.clipPath&&u.push(`</g>
`),this._setSVGBgOverlayColor(u,"overlay"),this._setSVGBgOverlayImage(u,"overlayImage",l),u.push("</svg>"),u.join("")},_setSVGPreamble:function(n,l){l.suppressPreamble||n.push('<?xml version="1.0" encoding="',l.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(n,l){var u=l.width||this.width,d=l.height||this.height,i,g='viewBox="0 0 '+this.width+" "+this.height+'" ',x=V.Object.NUM_FRACTION_DIGITS;l.viewBox?g='viewBox="'+l.viewBox.x+" "+l.viewBox.y+" "+l.viewBox.width+" "+l.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,g='viewBox="'+o(-i[4]/i[0],x)+" "+o(-i[5]/i[3],x)+" "+o(this.width/i[0],x)+" "+o(this.height/i[3],x)+'" '),n.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',u,'" ','height="',d,'" ',g,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",V.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(l),`</defs>
`)},createSVGClipPathMarkup:function(n){var l=this.clipPath;return l?(l.clipPathId="CLIPPATH_"+V.Object.__uid++,'<clipPath id="'+l.clipPathId+`" >
`+this.clipPath.toClipPathSVG(n.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var n=this,l=["background","overlay"].map(function(u){var d=n[u+"Color"];if(d&&d.toLive){var i=n[u+"Vpt"],g=n.viewportTransform,x={width:n.width/(i?g[0]:1),height:n.height/(i?g[3]:1)};return d.toSVG(x,{additionalTransform:i?V.util.matrixToSVG(g):""})}});return l.join("")},createSVGFontFacesMarkup:function(){var n="",l={},u,d,i,g,x,m,A,k,v,_=V.fontPaths,K=[];for(this._objects.forEach(function j(O){K.push(O),O._objects&&O._objects.forEach(j)}),k=0,v=K.length;k<v;k++)if(u=K[k],d=u.fontFamily,!(u.type.indexOf("text")===-1||l[d]||!_[d])&&(l[d]=!0,!!u.styles)){i=u.styles;for(x in i){g=i[x];for(A in g)m=g[A],d=m.fontFamily,!l[d]&&_[d]&&(l[d]=!0)}}for(var M in l)n+=[`		@font-face {
`,"			font-family: '",M,`';
`,"			src: url('",_[M],`');
`,`		}
`].join("");return n&&(n=['	<style type="text/css">',`<![CDATA[
`,n,"]]>",`</style>
`].join("")),n},_setSVGObjects:function(n,l){var u,d,i,g=this._objects;for(d=0,i=g.length;d<i;d++)u=g[d],!u.excludeFromExport&&this._setSVGObject(n,u,l)},_setSVGObject:function(n,l,u){n.push(l.toSVG(u))},_setSVGBgOverlayImage:function(n,l,u){this[l]&&!this[l].excludeFromExport&&this[l].toSVG&&n.push(this[l].toSVG(u))},_setSVGBgOverlayColor:function(n,l){var u=this[l+"Color"],d=this.viewportTransform,i=this.width,g=this.height;if(u)if(u.toLive){var x=u.repeat,m=V.util.invertTransform(d),A=this[l+"Vpt"],k=A?V.util.matrixToSVG(m):"";n.push('<rect transform="'+k+" translate(",i/2,",",g/2,')"',' x="',u.offsetX-i/2,'" y="',u.offsetY-g/2,'" ','width="',x==="repeat-y"||x==="no-repeat"?u.source.width:i,'" height="',x==="repeat-x"||x==="no-repeat"?u.source.height:g,'" fill="url(#SVGID_'+u.id+')"',`></rect>
`)}else n.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',u,'"',`></rect>
`)},sendToBack:function(n){if(!n)return this;var l=this._activeObject,u,d,i;if(n===l&&n.type==="activeSelection")for(i=l._objects,u=i.length;u--;)d=i[u],t(this._objects,d),this._objects.unshift(d);else t(this._objects,n),this._objects.unshift(n);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(n){if(!n)return this;var l=this._activeObject,u,d,i;if(n===l&&n.type==="activeSelection")for(i=l._objects,u=0;u<i.length;u++)d=i[u],t(this._objects,d),this._objects.push(d);else t(this._objects,n),this._objects.push(n);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(n,l){if(!n)return this;var u=this._activeObject,d,i,g,x,m,A=0;if(n===u&&n.type==="activeSelection")for(m=u._objects,d=0;d<m.length;d++)i=m[d],g=this._objects.indexOf(i),g>0+A&&(x=g-1,t(this._objects,i),this._objects.splice(x,0,i)),A++;else g=this._objects.indexOf(n),g!==0&&(x=this._findNewLowerIndex(n,g,l),t(this._objects,n),this._objects.splice(x,0,n));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(n,l,u){var d,i;if(u)for(d=l,i=l-1;i>=0;--i){var g=n.intersectsWithObject(this._objects[i])||n.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(n);if(g){d=i;break}}else d=l-1;return d},bringForward:function(n,l){if(!n)return this;var u=this._activeObject,d,i,g,x,m,A=0;if(n===u&&n.type==="activeSelection")for(m=u._objects,d=m.length;d--;)i=m[d],g=this._objects.indexOf(i),g<this._objects.length-1-A&&(x=g+1,t(this._objects,i),this._objects.splice(x,0,i)),A++;else g=this._objects.indexOf(n),g!==this._objects.length-1&&(x=this._findNewUpperIndex(n,g,l),t(this._objects,n),this._objects.splice(x,0,n));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(n,l,u){var d,i,g;if(u)for(d=l,i=l+1,g=this._objects.length;i<g;++i){var x=n.intersectsWithObject(this._objects[i])||n.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(n);if(x){d=i;break}}else d=l+1;return d},moveTo:function(n,l){return t(this._objects,n),this._objects.splice(l,0,n),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(V.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(n){n.dispose&&n.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),V.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),V.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),f(V.StaticCanvas.prototype,V.Observable),f(V.StaticCanvas.prototype,V.Collection),f(V.StaticCanvas.prototype,V.DataURLExporter),f(V.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(n){var l=a();if(!l||!l.getContext)return null;var u=l.getContext("2d");if(!u)return null;switch(n){case"setLineDash":return typeof u.setLineDash<"u";default:return null}}}),V.StaticCanvas.prototype.toJSON=V.StaticCanvas.prototype.toObject,V.isLikelyNode&&(V.StaticCanvas.prototype.createPNGStream=function(){var n=e(this.lowerCanvasEl);return n&&n.createPNGStream()},V.StaticCanvas.prototype.createJPEGStream=function(n){var l=e(this.lowerCanvasEl);return l&&l.createJPEGStream(n)})}(),V.BaseBrush=V.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(f){f.strokeStyle=this.color,f.lineWidth=this.width,f.lineCap=this.strokeLineCap,f.miterLimit=this.strokeMiterLimit,f.lineJoin=this.strokeLineJoin,f.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(f){var h=this.canvas.viewportTransform;f.save(),f.transform(h[0],h[1],h[2],h[3],h[4],h[5])},_setShadow:function(){if(this.shadow){var f=this.canvas,h=this.shadow,t=f.contextTop,o=f.getZoom();f&&f._isRetinaScaling()&&(o*=V.devicePixelRatio),t.shadowColor=h.color,t.shadowBlur=h.blur*o,t.shadowOffsetX=h.offsetX*o,t.shadowOffsetY=h.offsetY*o}},needsFullRender:function(){var f=new V.Color(this.color);return f.getAlpha()<1||!!this.shadow},_resetShadow:function(){var f=this.canvas.contextTop;f.shadowColor="",f.shadowBlur=f.shadowOffsetX=f.shadowOffsetY=0},_isOutSideCanvas:function(f){return f.x<0||f.x>this.canvas.getWidth()||f.y<0||f.y>this.canvas.getHeight()}}),function(){V.PencilBrush=V.util.createClass(V.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(f){this.canvas=f,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(f,h,t){var o=h.midPointFrom(t);return f.quadraticCurveTo(h.x,h.y,o.x,o.y),o},onMouseDown:function(f,h){this.canvas._isMainEvent(h.e)&&(this.drawStraightLine=h.e[this.straightLineKey],this._prepareForDrawing(f),this._captureDrawingPath(f),this._render())},onMouseMove:function(f,h){if(this.canvas._isMainEvent(h.e)&&(this.drawStraightLine=h.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f))&&this._captureDrawingPath(f)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var t=this._points,o=t.length,c=this.canvas.contextTop;this._saveAndTransform(c),this.oldEnd&&(c.beginPath(),c.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(c,t[o-2],t[o-1],!0),c.stroke(),c.restore()}},onMouseUp:function(f){return this.canvas._isMainEvent(f.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(f){var h=new V.Point(f.x,f.y);this._reset(),this._addPoint(h),this.canvas.contextTop.moveTo(h.x,h.y)},_addPoint:function(f){return this._points.length>1&&f.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(f),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(f){var h=new V.Point(f.x,f.y);return this._addPoint(h)},_render:function(f){var h,t,o=this._points[0],c=this._points[1];if(f=f||this.canvas.contextTop,this._saveAndTransform(f),f.beginPath(),this._points.length===2&&o.x===c.x&&o.y===c.y){var s=this.width/1e3;o=new V.Point(o.x,o.y),c=new V.Point(c.x,c.y),o.x-=s,c.x+=s}for(f.moveTo(o.x,o.y),h=1,t=this._points.length;h<t;h++)this._drawSegment(f,o,c),o=this._points[h],c=this._points[h+1];f.lineTo(o.x,o.y),f.stroke(),f.restore()},convertPointsToSVGPath:function(f){var h=this.width/1e3;return V.util.getSmoothPathFromPoints(f,h)},_isEmptySVGPath:function(f){var h=V.util.joinPath(f);return h==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(f){var h=new V.Path(f,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,h.shadow=new V.Shadow(this.shadow)),h},decimatePoints:function(f,h){if(f.length<=2)return f;var t=this.canvas.getZoom(),o=Math.pow(h/t,2),c,s=f.length-1,e=f[0],a=[e],r;for(c=1;c<s-1;c++)r=Math.pow(e.x-f[c].x,2)+Math.pow(e.y-f[c].y,2),r>=o&&(e=f[c],a.push(e));return a.push(f[s]),a},_finalizeAndAddPath:function(){var f=this.canvas.contextTop;f.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var h=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(h)){this.canvas.requestRenderAll();return}var t=this.createPath(h);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}})}(),V.CircleBrush=V.util.createClass(V.BaseBrush,{width:10,initialize:function(f){this.canvas=f,this.points=[]},drawDot:function(f){var h=this.addPoint(f),t=this.canvas.contextTop;this._saveAndTransform(t),this.dot(t,h),t.restore()},dot:function(f,h){f.fillStyle=h.fill,f.beginPath(),f.arc(h.x,h.y,h.radius,0,Math.PI*2,!1),f.closePath(),f.fill()},onMouseDown:function(f){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(f)},_render:function(){var f=this.canvas.contextTop,h,t,o=this.points;for(this._saveAndTransform(f),h=0,t=o.length;h<t;h++)this.dot(f,o[h]);f.restore()},onMouseMove:function(f){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(f),this._render()):this.drawDot(f))},onMouseUp:function(){var f=this.canvas.renderOnAddRemove,h,t;this.canvas.renderOnAddRemove=!1;var o=[];for(h=0,t=this.points.length;h<t;h++){var c=this.points[h],s=new V.Circle({radius:c.radius,left:c.x,top:c.y,originX:"center",originY:"center",fill:c.fill});this.shadow&&(s.shadow=new V.Shadow(this.shadow)),o.push(s)}var e=new V.Group(o);e.canvas=this.canvas,this.canvas.fire("before:path:created",{path:e}),this.canvas.add(e),this.canvas.fire("path:created",{path:e}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},addPoint:function(f){var h=new V.Point(f.x,f.y),t=V.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,o=new V.Color(this.color).setAlpha(V.util.getRandomInt(0,100)/100).toRgba();return h.radius=t,h.fill=o,this.points.push(h),h}}),V.SprayBrush=V.util.createClass(V.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(f){this.canvas=f,this.sprayChunks=[]},onMouseDown:function(f){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(f),this.render(this.sprayChunkPoints)},onMouseMove:function(f){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f)||(this.addSprayChunk(f),this.render(this.sprayChunkPoints))},onMouseUp:function(){var f=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var h=[],t=0,o=this.sprayChunks.length;t<o;t++)for(var c=this.sprayChunks[t],s=0,e=c.length;s<e;s++){var a=new V.Rect({width:c[s].width,height:c[s].width,left:c[s].x+1,top:c[s].y+1,originX:"center",originY:"center",fill:this.color});h.push(a)}this.optimizeOverlapping&&(h=this._getOptimizedRects(h));var r=new V.Group(h);this.shadow&&r.set("shadow",new V.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:r}),this.canvas.add(r),this.canvas.fire("path:created",{path:r}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},_getOptimizedRects:function(f){var h={},t,o,c;for(o=0,c=f.length;o<c;o++)t=f[o].left+""+f[o].top,h[t]||(h[t]=f[o]);var s=[];for(t in h)s.push(h[t]);return s},render:function(f){var h=this.canvas.contextTop,t,o;for(h.fillStyle=this.color,this._saveAndTransform(h),t=0,o=f.length;t<o;t++){var c=f[t];typeof c.opacity<"u"&&(h.globalAlpha=c.opacity),h.fillRect(c.x,c.y,c.width,c.width)}h.restore()},_render:function(){var f=this.canvas.contextTop,h,t;for(f.fillStyle=this.color,this._saveAndTransform(f),h=0,t=this.sprayChunks.length;h<t;h++)this.render(this.sprayChunks[h]);f.restore()},addSprayChunk:function(f){this.sprayChunkPoints=[];var h,t,o,c=this.width/2,s;for(s=0;s<this.density;s++){h=V.util.getRandomInt(f.x-c,f.x+c),t=V.util.getRandomInt(f.y-c,f.y+c),this.dotWidthVariance?o=V.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):o=this.dotWidth;var e=new V.Point(h,t);e.width=o,this.randomOpacity&&(e.opacity=V.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(e)}this.sprayChunks.push(this.sprayChunkPoints)}}),V.PatternBrush=V.util.createClass(V.PencilBrush,{getPatternSrc:function(){var f=20,h=5,t=V.util.createCanvasElement(),o=t.getContext("2d");return t.width=t.height=f+h,o.fillStyle=this.color,o.beginPath(),o.arc(f/2,f/2,f/2,0,Math.PI*2,!1),o.closePath(),o.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(f){return f.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(f){this.callSuper("_setBrushStyles",f),f.strokeStyle=this.getPattern(f)},createPath:function(f){var h=this.callSuper("createPath",f),t=h._getLeftTopCoords().scalarAdd(h.strokeWidth/2);return h.stroke=new V.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-t.x,offsetY:-t.y}),h}}),function(){var f=V.util.getPointer,h=V.util.degreesToRadians,t=V.util.isTouchEvent;V.Canvas=V.util.createClass(V.StaticCanvas,{initialize:function(c,s){s||(s={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(c,s),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=V.PencilBrush&&new V.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var c=this.getActiveObjects(),s,e,a;if(c.length>0&&!this.preserveObjectStacking){e=[],a=[];for(var r=0,n=this._objects.length;r<n;r++)s=this._objects[r],c.indexOf(s)===-1?e.push(s):a.push(s);c.length>1&&(this._activeObject._objects=a),e.push.apply(e,a)}else e=this._objects;return e},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var c=this.contextContainer;return this.renderCanvas(c,this._chooseObjectsToRender()),this},renderTopLayer:function(c){c.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(c),this.contextTopDirty=!0),c.restore()},renderTop:function(){var c=this.contextTop;return this.clearContext(c),this.renderTopLayer(c),this.fire("after:render"),this},_normalizePointer:function(c,s){var e=c.calcTransformMatrix(),a=V.util.invertTransform(e),r=this.restorePointerVpt(s);return V.util.transformPoint(r,a)},isTargetTransparent:function(c,s,e){if(c.shouldCache()&&c._cacheCanvas&&c!==this._activeObject){var a=this._normalizePointer(c,{x:s,y:e}),r=Math.max(c.cacheTranslationX+a.x*c.zoomX,0),n=Math.max(c.cacheTranslationY+a.y*c.zoomY,0),i=V.util.isTransparent(c._cacheContext,Math.round(r),Math.round(n),this.targetFindTolerance);return i}var l=this.contextCache,u=c.selectionBackgroundColor,d=this.viewportTransform;c.selectionBackgroundColor="",this.clearContext(l),l.save(),l.transform(d[0],d[1],d[2],d[3],d[4],d[5]),c.render(l),l.restore(),c.selectionBackgroundColor=u;var i=V.util.isTransparent(l,s,e,this.targetFindTolerance);return i},_isSelectionKeyPressed:function(c){var s=!1;return Array.isArray(this.selectionKey)?s=!!this.selectionKey.find(function(e){return c[e]===!0}):s=c[this.selectionKey],s},_shouldClearSelection:function(c,s){var e=this.getActiveObjects(),a=this._activeObject;return!s||s&&a&&e.length>1&&e.indexOf(s)===-1&&a!==s&&!this._isSelectionKeyPressed(c)||s&&!s.evented||s&&!s.selectable&&a&&a!==s},_shouldCenterTransform:function(c,s,e){if(c){var a;return s==="scale"||s==="scaleX"||s==="scaleY"||s==="resizing"?a=this.centeredScaling||c.centeredScaling:s==="rotate"&&(a=this.centeredRotation||c.centeredRotation),a?!e:e}},_getOriginFromCorner:function(c,s){var e={x:c.originX,y:c.originY};return s==="ml"||s==="tl"||s==="bl"?e.x="right":(s==="mr"||s==="tr"||s==="br")&&(e.x="left"),s==="tl"||s==="mt"||s==="tr"?e.y="bottom":(s==="bl"||s==="mb"||s==="br")&&(e.y="top"),e},_getActionFromCorner:function(c,s,e,a){if(!s||!c)return"drag";var r=a.controls[s];return r.getActionName(e,r,a)},_setupCurrentTransform:function(c,s,e){if(s){var a=this.getPointer(c),r=s.__corner,n=s.controls[r],l=e&&r?n.getActionHandler(c,s,n):V.controlsUtils.dragHandler,u=this._getActionFromCorner(e,r,c,s),d=this._getOriginFromCorner(s,r),i=c[this.centeredKey],g={target:s,action:u,actionHandler:l,corner:r,scaleX:s.scaleX,scaleY:s.scaleY,skewX:s.skewX,skewY:s.skewY,offsetX:a.x-s.left,offsetY:a.y-s.top,originX:d.x,originY:d.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:h(s.angle),width:s.width*s.scaleX,shiftKey:c.shiftKey,altKey:i,original:V.util.saveObjectTransform(s)};this._shouldCenterTransform(s,u,i)&&(g.originX="center",g.originY="center"),g.original.originX=d.x,g.original.originY=d.y,this._currentTransform=g,this._beforeTransform(c)}},setCursor:function(c){this.upperCanvasEl.style.cursor=c},_drawSelection:function(c){var s=this._groupSelector,e=new V.Point(s.ex,s.ey),a=V.util.transformPoint(e,this.viewportTransform),r=new V.Point(s.ex+s.left,s.ey+s.top),n=V.util.transformPoint(r,this.viewportTransform),l=Math.min(a.x,n.x),u=Math.min(a.y,n.y),d=Math.max(a.x,n.x),i=Math.max(a.y,n.y),g=this.selectionLineWidth/2;this.selectionColor&&(c.fillStyle=this.selectionColor,c.fillRect(l,u,d-l,i-u)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(c.lineWidth=this.selectionLineWidth,c.strokeStyle=this.selectionBorderColor,l+=g,u+=g,d-=g,i-=g,V.Object.prototype._setLineDash.call(this,c,this.selectionDashArray),c.strokeRect(l,u,d-l,i-u))},findTarget:function(c,s){if(!this.skipTargetFind){var e=!0,a=this.getPointer(c,e),r=this._activeObject,n=this.getActiveObjects(),l,u,d=t(c),i=n.length>1&&!s||n.length===1;if(this.targets=[],i&&r._findTargetCorner(a,d)||n.length>1&&!s&&r===this._searchPossibleTargets([r],a))return r;if(n.length===1&&r===this._searchPossibleTargets([r],a))if(this.preserveObjectStacking)l=r,u=this.targets,this.targets=[];else return r;var g=this._searchPossibleTargets(this._objects,a);return c[this.altSelectionKey]&&g&&l&&g!==l&&(g=l,this.targets=u),g}},_checkTarget:function(c,s,e){if(s&&s.visible&&s.evented&&s.containsPoint(c))if((this.perPixelTargetFind||s.perPixelTargetFind)&&!s.isEditing){var a=this.isTargetTransparent(s,e.x,e.y);if(!a)return!0}else return!0},_searchPossibleTargets:function(c,s){for(var e,a=c.length,r;a--;){var n=c[a],l=n.group?this._normalizePointer(n.group,s):s;if(this._checkTarget(l,n,s)){e=c[a],e.subTargetCheck&&e instanceof V.Group&&(r=this._searchPossibleTargets(e._objects,s),r&&this.targets.push(r));break}}return e},restorePointerVpt:function(c){return V.util.transformPoint(c,V.util.invertTransform(this.viewportTransform))},getPointer:function(c,s){if(this._absolutePointer&&!s)return this._absolutePointer;if(this._pointer&&s)return this._pointer;var e=f(c),a=this.upperCanvasEl,r=a.getBoundingClientRect(),n=r.width||0,l=r.height||0,u;(!n||!l)&&("top"in r&&"bottom"in r&&(l=Math.abs(r.top-r.bottom)),"right"in r&&"left"in r&&(n=Math.abs(r.right-r.left))),this.calcOffset(),e.x=e.x-this._offset.left,e.y=e.y-this._offset.top,s||(e=this.restorePointerVpt(e));var d=this.getRetinaScaling();return d!==1&&(e.x/=d,e.y/=d),n===0||l===0?u={width:1,height:1}:u={width:a.width/n,height:a.height/l},{x:e.x*u.width,y:e.y*u.height}},_createUpperCanvas:function(){var c=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),s=this.lowerCanvasEl,e=this.upperCanvasEl;e?e.className="":(e=this._createCanvasElement(),this.upperCanvasEl=e),V.util.addClass(e,"upper-canvas "+c),this.wrapperEl.appendChild(e),this._copyCanvasStyle(s,e),this._applyCanvasStyle(e),this.contextTop=e.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=V.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),V.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),V.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(c){var s=this.width||c.width,e=this.height||c.height;V.util.setStyle(c,{position:"absolute",width:s+"px",height:e+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),c.width=s,c.height=e,V.util.makeElementUnselectable(c)},_copyCanvasStyle:function(c,s){s.style.cssText=c.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var c=this._activeObject;return c?c.type==="activeSelection"&&c._objects?c._objects.slice(0):[c]:[]},_onObjectRemoved:function(c){c===this._activeObject&&(this.fire("before:selection:cleared",{target:c}),this._discardActiveObject(),this.fire("selection:cleared",{target:c}),c.fire("deselected")),c===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",c)},_fireSelectionEvents:function(c,s){var e=!1,a=this.getActiveObjects(),r=[],n=[];c.forEach(function(l){a.indexOf(l)===-1&&(e=!0,l.fire("deselected",{e:s,target:l}),n.push(l))}),a.forEach(function(l){c.indexOf(l)===-1&&(e=!0,l.fire("selected",{e:s,target:l}),r.push(l))}),c.length>0&&a.length>0?e&&this.fire("selection:updated",{e:s,selected:r,deselected:n}):a.length>0?this.fire("selection:created",{e:s,selected:r}):c.length>0&&this.fire("selection:cleared",{e:s,deselected:n})},setActiveObject:function(c,s){var e=this.getActiveObjects();return this._setActiveObject(c,s),this._fireSelectionEvents(e,s),this},_setActiveObject:function(c,s){return this._activeObject===c||!this._discardActiveObject(s,c)||c.onSelect({e:s})?!1:(this._activeObject=c,!0)},_discardActiveObject:function(c,s){var e=this._activeObject;if(e){if(e.onDeselect({e:c,object:s}))return!1;this._activeObject=null}return!0},discardActiveObject:function(c){var s=this.getActiveObjects(),e=this.getActiveObject();return s.length&&this.fire("before:selection:cleared",{target:e,e:c}),this._discardActiveObject(c),this._fireSelectionEvents(s,c),this},dispose:function(){var c=this.wrapperEl;return this.removeListeners(),c.removeChild(this.upperCanvasEl),c.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(s){V.util.cleanUpJsdomNode(this[s]),this[s]=void 0}.bind(this)),c.parentNode&&c.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,V.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(c){var s=this._activeObject;s&&s._renderControls(c)},_toObject:function(c,s,e){var a=this._realizeGroupTransformOnObject(c),r=this.callSuper("_toObject",c,s,e);return this._unwindGroupTransformOnObject(c,a),r},_realizeGroupTransformOnObject:function(c){if(c.group&&c.group.type==="activeSelection"&&this._activeObject===c.group){var s=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],e={};return s.forEach(function(a){e[a]=c[a]}),V.util.addTransformToObject(c,this._activeObject.calcOwnMatrix()),e}else return null},_unwindGroupTransformOnObject:function(c,s){s&&c.set(s)},_setSVGObject:function(c,s,e){var a=this._realizeGroupTransformOnObject(s);this.callSuper("_setSVGObject",c,s,e),this._unwindGroupTransformOnObject(s,a)},setViewportTransform:function(c){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),V.StaticCanvas.prototype.setViewportTransform.call(this,c)}});for(var o in V.StaticCanvas)o!=="prototype"&&(V.Canvas[o]=V.StaticCanvas[o])}(),function(){var f=V.util.addListener,h=V.util.removeListener,t=3,o=2,c=1,s={passive:!1};function e(a,r){return a.button&&a.button===r-1}V.util.object.extend(V.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(f,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(a,r){var n=this.upperCanvasEl,l=this._getEventPrefix();a(V.window,"resize",this._onResize),a(n,l+"down",this._onMouseDown),a(n,l+"move",this._onMouseMove,s),a(n,l+"out",this._onMouseOut),a(n,l+"enter",this._onMouseEnter),a(n,"wheel",this._onMouseWheel),a(n,"contextmenu",this._onContextMenu),a(n,"dblclick",this._onDoubleClick),a(n,"dragover",this._onDragOver),a(n,"dragenter",this._onDragEnter),a(n,"dragleave",this._onDragLeave),a(n,"drop",this._onDrop),this.enablePointerEvents||a(n,"touchstart",this._onTouchStart,s),typeof eventjs<"u"&&r in eventjs&&(eventjs[r](n,"gesture",this._onGesture),eventjs[r](n,"drag",this._onDrag),eventjs[r](n,"orientation",this._onOrientationChange),eventjs[r](n,"shake",this._onShake),eventjs[r](n,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(h,"remove");var a=this._getEventPrefix();h(V.document,a+"up",this._onMouseUp),h(V.document,"touchend",this._onTouchEnd,s),h(V.document,a+"move",this._onMouseMove,s),h(V.document,"touchmove",this._onMouseMove,s)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(a,r){this.__onTransformGesture&&this.__onTransformGesture(a,r)},_onDrag:function(a,r){this.__onDrag&&this.__onDrag(a,r)},_onMouseWheel:function(a){this.__onMouseWheel(a)},_onMouseOut:function(a){var r=this._hoveredTarget;this.fire("mouse:out",{target:r,e:a}),this._hoveredTarget=null,r&&r.fire("mouseout",{e:a});var n=this;this._hoveredTargets.forEach(function(l){n.fire("mouse:out",{target:r,e:a}),l&&r.fire("mouseout",{e:a})}),this._hoveredTargets=[]},_onMouseEnter:function(a){!this._currentTransform&&!this.findTarget(a)&&(this.fire("mouse:over",{target:null,e:a}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(a,r){this.__onOrientationChange&&this.__onOrientationChange(a,r)},_onShake:function(a,r){this.__onShake&&this.__onShake(a,r)},_onLongPress:function(a,r){this.__onLongPress&&this.__onLongPress(a,r)},_onDragOver:function(a){a.preventDefault();var r=this._simpleEventHandler("dragover",a);this._fireEnterLeaveEvents(r,a)},_onDrop:function(a){return this._simpleEventHandler("drop:before",a),this._simpleEventHandler("drop",a)},_onContextMenu:function(a){return this.stopContextMenu&&(a.stopPropagation(),a.preventDefault()),!1},_onDoubleClick:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"dblclick"),this._resetTransformEventData(a)},getPointerId:function(a){var r=a.changedTouches;return r?r[0]&&r[0].identifier:this.enablePointerEvents?a.pointerId:-1},_isMainEvent:function(a){return a.isPrimary===!0?!0:a.isPrimary===!1?!1:a.type==="touchend"&&a.touches.length===0?!0:a.changedTouches?a.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(a){a.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(a)),this.__onMouseDown(a),this._resetTransformEventData();var r=this.upperCanvasEl,n=this._getEventPrefix();f(V.document,"touchend",this._onTouchEnd,s),f(V.document,"touchmove",this._onMouseMove,s),h(r,n+"down",this._onMouseDown)},_onMouseDown:function(a){this.__onMouseDown(a),this._resetTransformEventData();var r=this.upperCanvasEl,n=this._getEventPrefix();h(r,n+"move",this._onMouseMove,s),f(V.document,n+"up",this._onMouseUp),f(V.document,n+"move",this._onMouseMove,s)},_onTouchEnd:function(a){if(!(a.touches.length>0)){this.__onMouseUp(a),this._resetTransformEventData(),this.mainTouchId=null;var r=this._getEventPrefix();h(V.document,"touchend",this._onTouchEnd,s),h(V.document,"touchmove",this._onMouseMove,s);var n=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){f(n.upperCanvasEl,r+"down",n._onMouseDown),n._willAddMouseDown=0},400)}},_onMouseUp:function(a){this.__onMouseUp(a),this._resetTransformEventData();var r=this.upperCanvasEl,n=this._getEventPrefix();this._isMainEvent(a)&&(h(V.document,n+"up",this._onMouseUp),h(V.document,n+"move",this._onMouseMove,s),f(r,n+"move",this._onMouseMove,s))},_onMouseMove:function(a){!this.allowTouchScrolling&&a.preventDefault&&a.preventDefault(),this.__onMouseMove(a)},_onResize:function(){this.calcOffset()},_shouldRender:function(a){var r=this._activeObject;return!!r!=!!a||r&&a&&r!==a?!0:(r&&r.isEditing,!1)},__onMouseUp:function(a){var r,n=this._currentTransform,l=this._groupSelector,u=!1,d=!l||l.left===0&&l.top===0;if(this._cacheTransformEventData(a),r=this._target,this._handleEvent(a,"up:before"),e(a,t)){this.fireRightClick&&this._handleEvent(a,"up",t,d);return}if(e(a,o)){this.fireMiddleClick&&this._handleEvent(a,"up",o,d),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(a);return}if(this._isMainEvent(a)){if(n&&(this._finalizeCurrentTransform(a),u=n.actionPerformed),!d){var i=r===this._activeObject;this._maybeGroupObjects(a),u||(u=this._shouldRender(r)||!i&&r===this._activeObject)}var g,x;if(r){if(g=r._findTargetCorner(this.getPointer(a,!0),V.util.isTouchEvent(a)),r.selectable&&r!==this._activeObject&&r.activeOn==="up")this.setActiveObject(r,a),u=!0;else{var m=r.controls[g],A=m&&m.getMouseUpHandler(a,r,m);A&&(x=this.getPointer(a),A(a,n,x.x,x.y))}r.isMoving=!1}if(n&&(n.target!==r||n.corner!==g)){var k=n.target&&n.target.controls[n.corner],v=k&&k.getMouseUpHandler(a,r,m);x=x||this.getPointer(a),v&&v(a,n,x.x,x.y)}this._setCursorFromEvent(a,r),this._handleEvent(a,"up",c,d),this._groupSelector=null,this._currentTransform=null,r&&(r.__corner=0),u?this.requestRenderAll():d||this.renderTop()}},_simpleEventHandler:function(a,r){var n=this.findTarget(r),l=this.targets,u={e:r,target:n,subTargets:l};if(this.fire(a,u),n&&n.fire(a,u),!l)return n;for(var d=0;d<l.length;d++)l[d].fire(a,u);return n},_handleEvent:function(a,r,n,l){var u=this._target,d=this.targets||[],i={e:a,target:u,subTargets:d,button:n||c,isClick:l||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};r==="up"&&(i.currentTarget=this.findTarget(a),i.currentSubTargets=this.targets),this.fire("mouse:"+r,i),u&&u.fire("mouse"+r,i);for(var g=0;g<d.length;g++)d[g].fire("mouse"+r,i)},_finalizeCurrentTransform:function(a){var r=this._currentTransform,n=r.target,l={e:a,target:n,transform:r,action:r.action};n._scaling&&(n._scaling=!1),n.setCoords(),(r.actionPerformed||this.stateful&&n.hasStateChanged())&&this._fire("modified",l)},_onMouseDownInDrawingMode:function(a){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(a).requestRenderAll();var r=this.getPointer(a);this.freeDrawingBrush.onMouseDown(r,{e:a,pointer:r}),this._handleEvent(a,"down")},_onMouseMoveInDrawingMode:function(a){if(this._isCurrentlyDrawing){var r=this.getPointer(a);this.freeDrawingBrush.onMouseMove(r,{e:a,pointer:r})}this.setCursor(this.freeDrawingCursor),this._handleEvent(a,"move")},_onMouseUpInDrawingMode:function(a){var r=this.getPointer(a);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:a,pointer:r}),this._handleEvent(a,"up")},__onMouseDown:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"down:before");var r=this._target;if(e(a,t)){this.fireRightClick&&this._handleEvent(a,"down",t);return}if(e(a,o)){this.fireMiddleClick&&this._handleEvent(a,"down",o);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(a);return}if(this._isMainEvent(a)&&!this._currentTransform){var n=this._pointer;this._previousPointer=n;var l=this._shouldRender(r),u=this._shouldGroup(a,r);if(this._shouldClearSelection(a,r)?this.discardActiveObject(a):u&&(this._handleGrouping(a,r),r=this._activeObject),this.selection&&(!r||!r.selectable&&!r.isEditing&&r!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),r){var d=r===this._activeObject;r.selectable&&r.activeOn==="down"&&this.setActiveObject(r,a);var i=r._findTargetCorner(this.getPointer(a,!0),V.util.isTouchEvent(a));if(r.__corner=i,r===this._activeObject&&(i||!u)){this._setupCurrentTransform(a,r,d);var g=r.controls[i],n=this.getPointer(a),x=g&&g.getMouseDownHandler(a,r,g);x&&x(a,this._currentTransform,n.x,n.y)}}this._handleEvent(a,"down"),(l||u)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(a){this._resetTransformEventData(),this._pointer=this.getPointer(a,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(a)||null},_beforeTransform:function(a){var r=this._currentTransform;this.stateful&&r.target.saveState(),this.fire("before:transform",{e:a,transform:r})},__onMouseMove:function(a){this._handleEvent(a,"move:before"),this._cacheTransformEventData(a);var r,n;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(a);return}if(this._isMainEvent(a)){var l=this._groupSelector;l?(n=this._absolutePointer,l.left=n.x-l.ex,l.top=n.y-l.ey,this.renderTop()):this._currentTransform?this._transformObject(a):(r=this.findTarget(a)||null,this._setCursorFromEvent(a,r),this._fireOverOutEvents(r,a)),this._handleEvent(a,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(a,r){var n=this._hoveredTarget,l=this._hoveredTargets,u=this.targets,d=Math.max(l.length,u.length);this.fireSyntheticInOutEvents(a,r,{oldTarget:n,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var i=0;i<d;i++)this.fireSyntheticInOutEvents(u[i],r,{oldTarget:l[i],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(a,r){var n=this._draggedoverTarget,l=this._hoveredTargets,u=this.targets,d=Math.max(l.length,u.length);this.fireSyntheticInOutEvents(a,r,{oldTarget:n,evtOut:"dragleave",evtIn:"dragenter"});for(var i=0;i<d;i++)this.fireSyntheticInOutEvents(u[i],r,{oldTarget:l[i],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=a},fireSyntheticInOutEvents:function(a,r,n){var l,u,d=n.oldTarget,i,g,x=d!==a,m=n.canvasEvtIn,A=n.canvasEvtOut;x&&(l={e:r,target:a,previousTarget:d},u={e:r,target:d,nextTarget:a}),g=a&&x,i=d&&x,i&&(A&&this.fire(A,u),d.fire(n.evtOut,u)),g&&(m&&this.fire(m,l),a.fire(n.evtIn,l))},__onMouseWheel:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"wheel"),this._resetTransformEventData()},_transformObject:function(a){var r=this.getPointer(a),n=this._currentTransform;n.reset=!1,n.shiftKey=a.shiftKey,n.altKey=a[this.centeredKey],this._performTransformAction(a,n,r),n.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(a,r,n){var l=n.x,u=n.y,d=r.action,i=!1,g=r.actionHandler;g&&(i=g(a,r,l,u)),d==="drag"&&i&&(r.target.isMoving=!0,this.setCursor(r.target.moveCursor||this.moveCursor)),r.actionPerformed=r.actionPerformed||i},_fire:V.controlsUtils.fireEvent,_setCursorFromEvent:function(a,r){if(!r)return this.setCursor(this.defaultCursor),!1;var n=r.hoverCursor||this.hoverCursor,l=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,u=(!l||!l.contains(r))&&r._findTargetCorner(this.getPointer(a,!0));u?this.setCursor(this.getCornerCursor(u,r,a)):(r.subTargetCheck&&this.targets.concat().reverse().map(function(d){n=d.hoverCursor||n}),this.setCursor(n))},getCornerCursor:function(a,r,n){var l=r.controls[a];return l.cursorStyleHandler(n,l,r)}})}(),function(){var f=Math.min,h=Math.max;V.util.object.extend(V.Canvas.prototype,{_shouldGroup:function(t,o){var c=this._activeObject;return c&&this._isSelectionKeyPressed(t)&&o&&o.selectable&&this.selection&&(c!==o||c.type==="activeSelection")&&!o.onSelect({e:t})},_handleGrouping:function(t,o){var c=this._activeObject;c.__corner||o===c&&(o=this.findTarget(t,!0),!o||!o.selectable)||(c&&c.type==="activeSelection"?this._updateActiveSelection(o,t):this._createActiveSelection(o,t))},_updateActiveSelection:function(t,o){var c=this._activeObject,s=c._objects.slice(0);c.contains(t)?(c.removeWithUpdate(t),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat(),c.size()===1&&this._setActiveObject(c.item(0),o)):(c.addWithUpdate(t),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(s,o)},_createActiveSelection:function(t,o){var c=this.getActiveObjects(),s=this._createGroup(t);this._hoveredTarget=s,this._setActiveObject(s,o),this._fireSelectionEvents(c,o)},_createGroup:function(t){var o=this._objects,c=o.indexOf(this._activeObject)<o.indexOf(t),s=c?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new V.ActiveSelection(s,{canvas:this})},_groupSelectedObjects:function(t){var o=this._collectObjects(t),c;o.length===1?this.setActiveObject(o[0],t):o.length>1&&(c=new V.ActiveSelection(o.reverse(),{canvas:this}),this.setActiveObject(c,t))},_collectObjects:function(t){for(var o=[],c,s=this._groupSelector.ex,e=this._groupSelector.ey,a=s+this._groupSelector.left,r=e+this._groupSelector.top,n=new V.Point(f(s,a),f(e,r)),l=new V.Point(h(s,a),h(e,r)),u=!this.selectionFullyContained,d=s===a&&e===r,i=this._objects.length;i--&&(c=this._objects[i],!(!(!c||!c.selectable||!c.visible)&&(u&&c.intersectsWithRect(n,l,!0)||c.isContainedWithinRect(n,l,!0)||u&&c.containsPoint(n,null,!0)||u&&c.containsPoint(l,null,!0))&&(o.push(c),d))););return o.length>1&&(o=o.filter(function(g){return!g.onSelect({e:t})})),o},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){V.util.object.extend(V.StaticCanvas.prototype,{toDataURL:function(f){f||(f={});var h=f.format||"png",t=f.quality||1,o=(f.multiplier||1)*(f.enableRetinaScaling?this.getRetinaScaling():1),c=this.toCanvasElement(o,f);return V.util.toDataURL(c,h,t)},toCanvasElement:function(f,h){f=f||1,h=h||{};var t=(h.width||this.width)*f,o=(h.height||this.height)*f,c=this.getZoom(),s=this.width,e=this.height,a=c*f,r=this.viewportTransform,n=(r[4]-(h.left||0))*f,l=(r[5]-(h.top||0))*f,u=this.interactive,d=[a,0,0,a,n,l],i=this.enableRetinaScaling,g=V.util.createCanvasElement(),x=this.contextTop;return g.width=t,g.height=o,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=d,this.width=t,this.height=o,this.calcViewportBoundaries(),this.renderCanvas(g.getContext("2d"),this._objects),this.viewportTransform=r,this.width=s,this.height=e,this.calcViewportBoundaries(),this.interactive=u,this.enableRetinaScaling=i,this.contextTop=x,g}})}(),V.util.object.extend(V.StaticCanvas.prototype,{loadFromJSON:function(f,h,t){if(f){var o=typeof f=="string"?JSON.parse(f):V.util.object.clone(f),c=this,s=o.clipPath,e=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete o.clipPath,this._enlivenObjects(o.objects,function(a){c.clear(),c._setBgOverlay(o,function(){s?c._enlivenObjects([s],function(r){c.clipPath=r[0],c.__setupCanvas.call(c,o,a,e,h)}):c.__setupCanvas.call(c,o,a,e,h)})},t),this}},__setupCanvas:function(f,h,t,o){var c=this;h.forEach(function(s,e){c.insertAt(s,e)}),this.renderOnAddRemove=t,delete f.objects,delete f.backgroundImage,delete f.overlayImage,delete f.background,delete f.overlay,this._setOptions(f),this.renderAll(),o&&o()},_setBgOverlay:function(f,h){var t={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!f.backgroundImage&&!f.overlayImage&&!f.background&&!f.overlay){h&&h();return}var o=function(){t.backgroundImage&&t.overlayImage&&t.backgroundColor&&t.overlayColor&&h&&h()};this.__setBgOverlay("backgroundImage",f.backgroundImage,t,o),this.__setBgOverlay("overlayImage",f.overlayImage,t,o),this.__setBgOverlay("backgroundColor",f.background,t,o),this.__setBgOverlay("overlayColor",f.overlay,t,o)},__setBgOverlay:function(f,h,t,o){var c=this;if(!h){t[f]=!0,o&&o();return}f==="backgroundImage"||f==="overlayImage"?V.util.enlivenObjects([h],function(s){c[f]=s[0],t[f]=!0,o&&o()}):this["set"+V.util.string.capitalize(f,!0)](h,function(){t[f]=!0,o&&o()})},_enlivenObjects:function(f,h,t){if(!f||f.length===0){h&&h([]);return}V.util.enlivenObjects(f,function(o){h&&h(o)},null,t)},_toDataURL:function(f,h){this.clone(function(t){h(t.toDataURL(f))})},_toDataURLWithMultiplier:function(f,h,t){this.clone(function(o){t(o.toDataURLWithMultiplier(f,h))})},clone:function(f,h){var t=JSON.stringify(this.toJSON(h));this.cloneWithoutData(function(o){o.loadFromJSON(t,function(){f&&f(o)})})},cloneWithoutData:function(f){var h=V.util.createCanvasElement();h.width=this.width,h.height=this.height;var t=new V.Canvas(h);this.backgroundImage?(t.setBackgroundImage(this.backgroundImage.src,function(){t.renderAll(),f&&f(t)}),t.backgroundImageOpacity=this.backgroundImageOpacity,t.backgroundImageStretch=this.backgroundImageStretch):f&&f(t)}}),function(f){var h=f.fabric||(f.fabric={}),t=h.util.object.extend,o=h.util.object.clone,c=h.util.toFixed,s=h.util.string.capitalize,e=h.util.degreesToRadians,a=!h.isLikelyNode,r=2;h.Object||(h.Object=h.util.createClass(h.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:a,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(n){n&&this.setOptions(n)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=h.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(n){var l=h.perfLimitSizeTotal,u=n.width,d=n.height,i=h.maxCacheSideLimit,g=h.minCacheSideLimit;if(u<=i&&d<=i&&u*d<=l)return u<g&&(n.width=g),d<g&&(n.height=g),n;var x=u/d,m=h.util.limitDimsByArea(x,l),A=h.util.capValue,k=A(g,m.x,i),v=A(g,m.y,i);return u>k&&(n.zoomX/=u/k,n.width=k,n.capped=!0),d>v&&(n.zoomY/=d/v,n.height=v,n.capped=!0),n},_getCacheCanvasDimensions:function(){var n=this.getTotalObjectScaling(),l=this._getTransformedDimensions(0,0),u=l.x*n.scaleX/this.scaleX,d=l.y*n.scaleY/this.scaleY;return{width:u+r,height:d+r,zoomX:n.scaleX,zoomY:n.scaleY,x:u,y:d}},_updateCacheCanvas:function(){var n=this.canvas;if(this.noScaleCache&&n&&n._currentTransform){var l=n._currentTransform.target,u=n._currentTransform.action;if(this===l&&u.slice&&u.slice(0,5)==="scale")return!1}var d=this._cacheCanvas,i=this._limitCacheSize(this._getCacheCanvasDimensions()),g=h.minCacheSideLimit,x=i.width,m=i.height,A,k,v=i.zoomX,_=i.zoomY,K=x!==this.cacheWidth||m!==this.cacheHeight,M=this.zoomX!==v||this.zoomY!==_,j=K||M,O=0,T=0,R=!1;if(K){var y=this._cacheCanvas.width,p=this._cacheCanvas.height,P=x>y||m>p,E=(x<y*.9||m<p*.9)&&y>g&&p>g;R=P||E,P&&!i.capped&&(x>g||m>g)&&(O=x*.1,T=m*.1)}return this instanceof h.Text&&this.path&&(j=!0,R=!0,O+=this.getHeightOfLine(0)*this.zoomX,T+=this.getHeightOfLine(0)*this.zoomY),j?(R?(d.width=Math.ceil(x+O),d.height=Math.ceil(m+T)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,d.width,d.height)),A=i.x/2,k=i.y/2,this.cacheTranslationX=Math.round(d.width/2-A)+A,this.cacheTranslationY=Math.round(d.height/2-k)+k,this.cacheWidth=x,this.cacheHeight=m,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(v,_),this.zoomX=v,this.zoomY=_,!0):!1},setOptions:function(n){this._setOptions(n),this._initGradient(n.fill,"fill"),this._initGradient(n.stroke,"stroke"),this._initPattern(n.fill,"fill"),this._initPattern(n.stroke,"stroke")},transform:function(n){var l=this.group&&!this.group._transformDone||this.group&&this.canvas&&n===this.canvas.contextTop,u=this.calcTransformMatrix(!l);n.transform(u[0],u[1],u[2],u[3],u[4],u[5])},toObject:function(n){var l=h.Object.NUM_FRACTION_DIGITS,u={type:this.type,version:h.version,originX:this.originX,originY:this.originY,left:c(this.left,l),top:c(this.top,l),width:c(this.width,l),height:c(this.height,l),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:c(this.strokeWidth,l),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:c(this.strokeMiterLimit,l),scaleX:c(this.scaleX,l),scaleY:c(this.scaleY,l),angle:c(this.angle,l),flipX:this.flipX,flipY:this.flipY,opacity:c(this.opacity,l),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:c(this.skewX,l),skewY:c(this.skewY,l)};return this.clipPath&&!this.clipPath.excludeFromExport&&(u.clipPath=this.clipPath.toObject(n),u.clipPath.inverted=this.clipPath.inverted,u.clipPath.absolutePositioned=this.clipPath.absolutePositioned),h.util.populateWithProperties(this,u,n),this.includeDefaultValues||(u=this._removeDefaultValues(u)),u},toDatalessObject:function(n){return this.toObject(n)},_removeDefaultValues:function(n){var l=h.util.getKlass(n.type).prototype,u=l.stateProperties;return u.forEach(function(d){d==="left"||d==="top"||(n[d]===l[d]&&delete n[d],Array.isArray(n[d])&&Array.isArray(l[d])&&n[d].length===0&&l[d].length===0&&delete n[d])}),n},toString:function(){return"#<fabric."+s(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var n=h.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(n.scaleX),scaleY:Math.abs(n.scaleY)}},getTotalObjectScaling:function(){var n=this.getObjectScaling(),l=n.scaleX,u=n.scaleY;if(this.canvas){var d=this.canvas.getZoom(),i=this.canvas.getRetinaScaling();l*=d*i,u*=d*i}return{scaleX:l,scaleY:u}},getObjectOpacity:function(){var n=this.opacity;return this.group&&(n*=this.group.getObjectOpacity()),n},_set:function(n,l){var u=n==="scaleX"||n==="scaleY",d=this[n]!==l,i=!1;return u&&(l=this._constrainScale(l)),n==="scaleX"&&l<0?(this.flipX=!this.flipX,l*=-1):n==="scaleY"&&l<0?(this.flipY=!this.flipY,l*=-1):n==="shadow"&&l&&!(l instanceof h.Shadow)?l=new h.Shadow(l):n==="dirty"&&this.group&&this.group.set("dirty",l),this[n]=l,d&&(i=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(n)>-1?(this.dirty=!0,i&&this.group.set("dirty",!0)):i&&this.stateProperties.indexOf(n)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:h.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(n){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(n.save(),this._setupCompositeOperation(n),this.drawSelectionBackground(n),this.transform(n),this._setOpacity(n),this._setShadow(n,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(n)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(n),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),n.restore())},renderCache:function(n){n=n||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,n.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(n,l){if(n.save(),l.inverted?n.globalCompositeOperation="destination-out":n.globalCompositeOperation="destination-in",l.absolutePositioned){var u=h.util.invertTransform(this.calcTransformMatrix());n.transform(u[0],u[1],u[2],u[3],u[4],u[5])}l.transform(n),n.scale(1/l.zoomX,1/l.zoomY),n.drawImage(l._cacheCanvas,-l.cacheTranslationX,-l.cacheTranslationY),n.restore()},drawObject:function(n,l){var u=this.fill,d=this.stroke;l?(this.fill="black",this.stroke="",this._setClippingProperties(n)):this._renderBackground(n),this._render(n),this._drawClipPath(n,this.clipPath),this.fill=u,this.stroke=d},_drawClipPath:function(n,l){l&&(l.canvas=this.canvas,l.shouldCache(),l._transformDone=!0,l.renderCache({forClipping:!0}),this.drawClipPathOnCache(n,l))},drawCacheOnCanvas:function(n){n.scale(1/this.zoomX,1/this.zoomY),n.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(n){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!n&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!n){var l=this.cacheWidth/this.zoomX,u=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-l/2,-u/2,l,u)}return!0}return!1},_renderBackground:function(n){if(this.backgroundColor){var l=this._getNonTransformedDimensions();n.fillStyle=this.backgroundColor,n.fillRect(-l.x/2,-l.y/2,l.x,l.y),this._removeShadow(n)}},_setOpacity:function(n){this.group&&!this.group._transformDone?n.globalAlpha=this.getObjectOpacity():n.globalAlpha*=this.opacity},_setStrokeStyles:function(n,l){var u=l.stroke;u&&(n.lineWidth=l.strokeWidth,n.lineCap=l.strokeLineCap,n.lineDashOffset=l.strokeDashOffset,n.lineJoin=l.strokeLineJoin,n.miterLimit=l.strokeMiterLimit,u.toLive?u.gradientUnits==="percentage"||u.gradientTransform||u.patternTransform?this._applyPatternForTransformedGradient(n,u):(n.strokeStyle=u.toLive(n,this),this._applyPatternGradientTransform(n,u)):n.strokeStyle=l.stroke)},_setFillStyles:function(n,l){var u=l.fill;u&&(u.toLive?(n.fillStyle=u.toLive(n,this),this._applyPatternGradientTransform(n,l.fill)):n.fillStyle=u)},_setClippingProperties:function(n){n.globalAlpha=1,n.strokeStyle="transparent",n.fillStyle="#000000"},_setLineDash:function(n,l){!l||l.length===0||(1&l.length&&l.push.apply(l,l),n.setLineDash(l))},_renderControls:function(n,l){var u=this.getViewportTransform(),d=this.calcTransformMatrix(),i,g,x;l=l||{},g=typeof l.hasBorders<"u"?l.hasBorders:this.hasBorders,x=typeof l.hasControls<"u"?l.hasControls:this.hasControls,d=h.util.multiplyTransformMatrices(u,d),i=h.util.qrDecompose(d),n.save(),n.translate(i.translateX,i.translateY),n.lineWidth=1*this.borderScaleFactor,this.group||(n.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(i.angle-=180),n.rotate(e(this.group?i.angle:this.angle)),l.forActiveSelection||this.group?g&&this.drawBordersInGroup(n,i,l):g&&this.drawBorders(n,l),x&&this.drawControls(n,l),n.restore()},_setShadow:function(n){if(this.shadow){var l=this.shadow,u=this.canvas,d,i=u&&u.viewportTransform[0]||1,g=u&&u.viewportTransform[3]||1;l.nonScaling?d={scaleX:1,scaleY:1}:d=this.getObjectScaling(),u&&u._isRetinaScaling()&&(i*=h.devicePixelRatio,g*=h.devicePixelRatio),n.shadowColor=l.color,n.shadowBlur=l.blur*h.browserShadowBlurConstant*(i+g)*(d.scaleX+d.scaleY)/4,n.shadowOffsetX=l.offsetX*i*d.scaleX,n.shadowOffsetY=l.offsetY*g*d.scaleY}},_removeShadow:function(n){this.shadow&&(n.shadowColor="",n.shadowBlur=n.shadowOffsetX=n.shadowOffsetY=0)},_applyPatternGradientTransform:function(n,l){if(!l||!l.toLive)return{offsetX:0,offsetY:0};var u=l.gradientTransform||l.patternTransform,d=-this.width/2+l.offsetX||0,i=-this.height/2+l.offsetY||0;return l.gradientUnits==="percentage"?n.transform(this.width,0,0,this.height,d,i):n.transform(1,0,0,1,d,i),u&&n.transform(u[0],u[1],u[2],u[3],u[4],u[5]),{offsetX:d,offsetY:i}},_renderPaintInOrder:function(n){this.paintFirst==="stroke"?(this._renderStroke(n),this._renderFill(n)):(this._renderFill(n),this._renderStroke(n))},_render:function(){},_renderFill:function(n){this.fill&&(n.save(),this._setFillStyles(n,this),this.fillRule==="evenodd"?n.fill("evenodd"):n.fill(),n.restore())},_renderStroke:function(n){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(n),n.save(),this.strokeUniform&&this.group){var l=this.getObjectScaling();n.scale(1/l.scaleX,1/l.scaleY)}else this.strokeUniform&&n.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(n,this.strokeDashArray),this._setStrokeStyles(n,this),n.stroke(),n.restore()}},_applyPatternForTransformedGradient:function(n,l){var u=this._limitCacheSize(this._getCacheCanvasDimensions()),d=h.util.createCanvasElement(),i,g=this.canvas.getRetinaScaling(),x=u.x/this.scaleX/g,m=u.y/this.scaleY/g;d.width=x,d.height=m,i=d.getContext("2d"),i.beginPath(),i.moveTo(0,0),i.lineTo(x,0),i.lineTo(x,m),i.lineTo(0,m),i.closePath(),i.translate(x/2,m/2),i.scale(u.zoomX/this.scaleX/g,u.zoomY/this.scaleY/g),this._applyPatternGradientTransform(i,l),i.fillStyle=l.toLive(n),i.fill(),n.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),n.scale(g*this.scaleX/u.zoomX,g*this.scaleY/u.zoomY),n.strokeStyle=i.createPattern(d,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var n=h.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",n.scaleX),this.set("scaleY",n.scaleY),this.angle=n.angle,this.skewX=n.skewX,this.skewY=0}},_removeTransformMatrix:function(n){var l=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),l=h.util.transformPoint(l,this.transformMatrix)),this.transformMatrix=null,n&&(this.scaleX*=n.scaleX,this.scaleY*=n.scaleY,this.cropX=n.cropX,this.cropY=n.cropY,l.x+=n.offsetLeft,l.y+=n.offsetTop,this.width=n.width,this.height=n.height),this.setPositionByOrigin(l,"center","center")},clone:function(n,l){var u=this.toObject(l);this.constructor.fromObject?this.constructor.fromObject(u,n):h.Object._fromObject("Object",u,n)},cloneAsImage:function(n,l){var u=this.toCanvasElement(l);return n&&n(new h.Image(u)),this},toCanvasElement:function(n){n||(n={});var l=h.util,u=l.saveObjectTransform(this),d=this.group,i=this.shadow,g=Math.abs,x=(n.multiplier||1)*(n.enableRetinaScaling?h.devicePixelRatio:1);delete this.group,n.withoutTransform&&l.resetObjectTransform(this),n.withoutShadow&&(this.shadow=null);var m=h.util.createCanvasElement(),A=this.getBoundingRect(!0,!0),k=this.shadow,v,_={x:0,y:0},K,M,j;k&&(K=k.blur,k.nonScaling?v={scaleX:1,scaleY:1}:v=this.getObjectScaling(),_.x=2*Math.round(g(k.offsetX)+K)*g(v.scaleX),_.y=2*Math.round(g(k.offsetY)+K)*g(v.scaleY)),M=A.width+_.x,j=A.height+_.y,m.width=Math.ceil(M),m.height=Math.ceil(j);var O=new h.StaticCanvas(m,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});n.format==="jpeg"&&(O.backgroundColor="#fff"),this.setPositionByOrigin(new h.Point(O.width/2,O.height/2),"center","center");var T=this.canvas;O.add(this);var R=O.toCanvasElement(x||1,n);return this.shadow=i,this.set("canvas",T),d&&(this.group=d),this.set(u).setCoords(),O._objects=[],O.dispose(),O=null,R},toDataURL:function(n){return n||(n={}),h.util.toDataURL(this.toCanvasElement(n),n.format||"png",n.quality||1)},isType:function(n){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===n},complexity:function(){return 1},toJSON:function(n){return this.toObject(n)},rotate:function(n){var l=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return l&&this._setOriginToCenter(),this.set("angle",n),l&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(n,l){l=l||this.canvas.getPointer(n);var u=new h.Point(l.x,l.y),d=this._getLeftTopCoords();return this.angle&&(u=h.util.rotatePoint(u,d,e(-this.angle))),{x:u.x-d.x,y:u.y-d.y}},_setupCompositeOperation:function(n){this.globalCompositeOperation&&(n.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){h.runningAnimations&&h.runningAnimations.cancelByTarget(this)}}),h.util.createAccessors&&h.util.createAccessors(h.Object),t(h.Object.prototype,h.Observable),h.Object.NUM_FRACTION_DIGITS=2,h.Object.ENLIVEN_PROPS=["clipPath"],h.Object._fromObject=function(n,l,u,d){var i=h[n];l=o(l,!0),h.util.enlivenPatterns([l.fill,l.stroke],function(g){typeof g[0]<"u"&&(l.fill=g[0]),typeof g[1]<"u"&&(l.stroke=g[1]),h.util.enlivenObjectEnlivables(l,l,function(){var x=d?new i(l[d],l):new i(l);u&&u(x)})})},h.Object.__uid=0)}(Me),function(){var f=V.util.degreesToRadians,h={left:-.5,center:0,right:.5},t={top:-.5,center:0,bottom:.5};V.util.object.extend(V.Object.prototype,{translateToGivenOrigin:function(o,c,s,e,a){var r=o.x,n=o.y,l,u,d;return typeof c=="string"?c=h[c]:c-=.5,typeof e=="string"?e=h[e]:e-=.5,l=e-c,typeof s=="string"?s=t[s]:s-=.5,typeof a=="string"?a=t[a]:a-=.5,u=a-s,(l||u)&&(d=this._getTransformedDimensions(),r=o.x+l*d.x,n=o.y+u*d.y),new V.Point(r,n)},translateToCenterPoint:function(o,c,s){var e=this.translateToGivenOrigin(o,c,s,"center","center");return this.angle?V.util.rotatePoint(e,o,f(this.angle)):e},translateToOriginPoint:function(o,c,s){var e=this.translateToGivenOrigin(o,"center","center",c,s);return this.angle?V.util.rotatePoint(e,o,f(this.angle)):e},getCenterPoint:function(){var o=new V.Point(this.left,this.top);return this.translateToCenterPoint(o,this.originX,this.originY)},getPointByOrigin:function(o,c){var s=this.getCenterPoint();return this.translateToOriginPoint(s,o,c)},toLocalPoint:function(o,c,s){var e=this.getCenterPoint(),a,r;return typeof c<"u"&&typeof s<"u"?a=this.translateToGivenOrigin(e,"center","center",c,s):a=new V.Point(this.left,this.top),r=new V.Point(o.x,o.y),this.angle&&(r=V.util.rotatePoint(r,e,-f(this.angle))),r.subtractEquals(a)},setPositionByOrigin:function(o,c,s){var e=this.translateToCenterPoint(o,c,s),a=this.translateToOriginPoint(e,this.originX,this.originY);this.set("left",a.x),this.set("top",a.y)},adjustPosition:function(o){var c=f(this.angle),s=this.getScaledWidth(),e=V.util.cos(c)*s,a=V.util.sin(c)*s,r,n;typeof this.originX=="string"?r=h[this.originX]:r=this.originX-.5,typeof o=="string"?n=h[o]:n=o-.5,this.left+=e*(n-r),this.top+=a*(n-r),this.setCoords(),this.originX=o},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var o=this.getCenterPoint();this.originX="center",this.originY="center",this.left=o.x,this.top=o.y},_resetOrigin:function(){var o=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=o.x,this.top=o.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function f(s){return[new V.Point(s.tl.x,s.tl.y),new V.Point(s.tr.x,s.tr.y),new V.Point(s.br.x,s.br.y),new V.Point(s.bl.x,s.bl.y)]}var h=V.util,t=h.degreesToRadians,o=h.multiplyTransformMatrices,c=h.transformPoint;h.object.extend(V.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(s,e){return e?s?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),s?this.aCoords:this.lineCoords)},getCoords:function(s,e){return f(this._getCoords(s,e))},intersectsWithRect:function(s,e,a,r){var n=this.getCoords(a,r),l=V.Intersection.intersectPolygonRectangle(n,s,e);return l.status==="Intersection"},intersectsWithObject:function(s,e,a){var r=V.Intersection.intersectPolygonPolygon(this.getCoords(e,a),s.getCoords(e,a));return r.status==="Intersection"||s.isContainedWithinObject(this,e,a)||this.isContainedWithinObject(s,e,a)},isContainedWithinObject:function(s,e,a){for(var r=this.getCoords(e,a),n=e?s.aCoords:s.lineCoords,l=0,u=s._getImageLines(n);l<4;l++)if(!s.containsPoint(r[l],u))return!1;return!0},isContainedWithinRect:function(s,e,a,r){var n=this.getBoundingRect(a,r);return n.left>=s.x&&n.left+n.width<=e.x&&n.top>=s.y&&n.top+n.height<=e.y},containsPoint:function(s,l,a,r){var n=this._getCoords(a,r),l=l||this._getImageLines(n),u=this._findCrossPoints(s,l);return u!==0&&u%2===1},isOnScreen:function(s){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br,r=this.getCoords(!0,s);return r.some(function(n){return n.x<=a.x&&n.x>=e.x&&n.y<=a.y&&n.y>=e.y})||this.intersectsWithRect(e,a,!0,s)?!0:this._containsCenterOfCanvas(e,a,s)},_containsCenterOfCanvas:function(s,e,a){var r={x:(s.x+e.x)/2,y:(s.y+e.y)/2};return!!this.containsPoint(r,null,!0,a)},isPartiallyOnScreen:function(s){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br;if(this.intersectsWithRect(e,a,!0,s))return!0;var r=this.getCoords(!0,s).every(function(n){return(n.x>=a.x||n.x<=e.x)&&(n.y>=a.y||n.y<=e.y)});return r&&this._containsCenterOfCanvas(e,a,s)},_getImageLines:function(s){var e={topline:{o:s.tl,d:s.tr},rightline:{o:s.tr,d:s.br},bottomline:{o:s.br,d:s.bl},leftline:{o:s.bl,d:s.tl}};return e},_findCrossPoints:function(s,e){var a,r,n,l,u,d=0,i;for(var g in e)if(i=e[g],!(i.o.y<s.y&&i.d.y<s.y)&&!(i.o.y>=s.y&&i.d.y>=s.y)&&(i.o.x===i.d.x&&i.o.x>=s.x?u=i.o.x:(a=0,r=(i.d.y-i.o.y)/(i.d.x-i.o.x),n=s.y-a*s.x,l=i.o.y-r*i.o.x,u=-(n-l)/(a-r)),u>=s.x&&(d+=1),d===2))break;return d},getBoundingRect:function(s,e){var a=this.getCoords(s,e);return h.makeBoundingBoxFromPoints(a)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(s){return Math.abs(s)<this.minScaleLimit?s<0?-this.minScaleLimit:this.minScaleLimit:s===0?1e-4:s},scale:function(s){return this._set("scaleX",s),this._set("scaleY",s),this.setCoords()},scaleToWidth:function(s,e){var a=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(s/this.width/a)},scaleToHeight:function(s,e){var a=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(s/this.height/a)},calcLineCoords:function(){var s=this.getViewportTransform(),e=this.padding,a=t(this.angle),r=h.cos(a),n=h.sin(a),l=r*e,u=n*e,d=l+u,i=l-u,g=this.calcACoords(),x={tl:c(g.tl,s),tr:c(g.tr,s),bl:c(g.bl,s),br:c(g.br,s)};return e&&(x.tl.x-=i,x.tl.y-=d,x.tr.x+=d,x.tr.y-=i,x.bl.x-=d,x.bl.y+=i,x.br.x+=i,x.br.y+=d),x},calcOCoords:function(){var s=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),a=this.getViewportTransform(),r=o(a,e),n=o(r,s),n=o(n,[1/a[0],0,0,1/a[3],0,0]),l=this._calculateCurrentDimensions(),u={};return this.forEachControl(function(d,i,g){u[i]=d.positionHandler(l,n,g)}),u},calcACoords:function(){var s=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),a=o(e,s),r=this._getTransformedDimensions(),n=r.x/2,l=r.y/2;return{tl:c({x:-n,y:-l},a),tr:c({x:n,y:-l},a),bl:c({x:-n,y:l},a),br:c({x:n,y:l},a)}},setCoords:function(s){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),s?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return h.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var s=this.getCenterPoint();return[1,0,0,1,s.x,s.y]},transformMatrixKey:function(s){var e="_",a="";return!s&&this.group&&(a=this.group.transformMatrixKey(s)+e),a+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(s){var e=this.calcOwnMatrix();if(s||!this.group)return e;var a=this.transformMatrixKey(s),r=this.matrixCache||(this.matrixCache={});return r.key===a?r.value:(this.group&&(e=o(this.group.calcTransformMatrix(!1),e)),r.key=a,r.value=e,e)},calcOwnMatrix:function(){var s=this.transformMatrixKey(!0),e=this.ownMatrixCache||(this.ownMatrixCache={});if(e.key===s)return e.value;var a=this._calcTranslateMatrix(),r={angle:this.angle,translateX:a[4],translateY:a[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return e.key=s,e.value=h.composeMatrix(r),e.value},_getNonTransformedDimensions:function(){var s=this.strokeWidth,e=this.width+s,a=this.height+s;return{x:e,y:a}},_getTransformedDimensions:function(s,e){typeof s>"u"&&(s=this.skewX),typeof e>"u"&&(e=this.skewY);var a,r,n,l=s===0&&e===0;if(this.strokeUniform?(r=this.width,n=this.height):(a=this._getNonTransformedDimensions(),r=a.x,n=a.y),l)return this._finalizeDimensions(r*this.scaleX,n*this.scaleY);var u=h.sizeAfterTransform(r,n,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:s,skewY:e});return this._finalizeDimensions(u.x,u.y)},_finalizeDimensions:function(s,e){return this.strokeUniform?{x:s+this.strokeWidth,y:e+this.strokeWidth}:{x:s,y:e}},_calculateCurrentDimensions:function(){var s=this.getViewportTransform(),e=this._getTransformedDimensions(),a=c(e,s,!0);return a.scalarAdd(2*this.padding)}})}(),V.util.object.extend(V.Object.prototype,{sendToBack:function(){return this.group?V.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?V.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(f){return this.group?V.StaticCanvas.prototype.sendBackwards.call(this.group,this,f):this.canvas&&this.canvas.sendBackwards(this,f),this},bringForward:function(f){return this.group?V.StaticCanvas.prototype.bringForward.call(this.group,this,f):this.canvas&&this.canvas.bringForward(this,f),this},moveTo:function(f){return this.group&&this.group.type!=="activeSelection"?V.StaticCanvas.prototype.moveTo.call(this.group,this,f):this.canvas&&this.canvas.moveTo(this,f),this}}),function(){function f(t,o){if(o){if(o.toLive)return t+": url(#SVGID_"+o.id+"); ";var c=new V.Color(o),s=t+": "+c.toRgb()+"; ",e=c.getAlpha();return e!==1&&(s+=t+"-opacity: "+e.toString()+"; "),s}else return t+": none; "}var h=V.util.toFixed;V.util.object.extend(V.Object.prototype,{getSvgStyles:function(t){var o=this.fillRule?this.fillRule:"nonzero",c=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):"none",e=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",r=this.strokeLineJoin?this.strokeLineJoin:"miter",n=this.strokeMiterLimit?this.strokeMiterLimit:"4",l=typeof this.opacity<"u"?this.opacity:"1",u=this.visible?"":" visibility: hidden;",d=t?"":this.getSvgFilter(),i=f("fill",this.fill),g=f("stroke",this.stroke);return[g,"stroke-width: ",c,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",e,"; ","stroke-linejoin: ",r,"; ","stroke-miterlimit: ",n,"; ",i,"fill-rule: ",o,"; ","opacity: ",l,";",d,u].join("")},getSvgSpanStyles:function(t,o){var c="; ",e=t.fontFamily?"font-family: "+(t.fontFamily.indexOf("'")===-1&&t.fontFamily.indexOf('"')===-1?"'"+t.fontFamily+"'":t.fontFamily)+c:"",s=t.strokeWidth?"stroke-width: "+t.strokeWidth+c:"",e=e,a=t.fontSize?"font-size: "+t.fontSize+"px"+c:"",r=t.fontStyle?"font-style: "+t.fontStyle+c:"",n=t.fontWeight?"font-weight: "+t.fontWeight+c:"",l=t.fill?f("fill",t.fill):"",u=t.stroke?f("stroke",t.stroke):"",d=this.getSvgTextDecoration(t),i=t.deltaY?"baseline-shift: "+-t.deltaY+"; ":"";return d&&(d="text-decoration: "+d+c),[u,s,e,a,r,n,d,l,i,o?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(t){return["overline","underline","line-through"].filter(function(o){return t[o.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(t,o){var c=t?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'+V.util.matrixToSVG(c);return s+(o||"")+'" '},_setSVGBg:function(t){if(this.backgroundColor){var o=V.Object.NUM_FRACTION_DIGITS;t.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',h(-this.width/2,o),'" y="',h(-this.height/2,o),'" width="',h(this.width,o),'" height="',h(this.height,o),`"></rect>
`)}},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,o){o=o||{};var c=o.reviver,s=o.additionalTransform||"",e=[this.getSvgTransform(!0,s),this.getSvgCommons()].join(""),a=t.indexOf("COMMON_PARTS");return t[a]=e,c?c(t.join("")):t.join("")},_createBaseSVGMarkup:function(t,o){o=o||{};var c=o.noStyle,s=o.reviver,e=c?"":'style="'+this.getSvgStyles()+'" ',a=o.withShadow?'style="'+this.getSvgFilter()+'" ':"",r=this.clipPath,n=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",l=r&&r.absolutePositioned,u=this.stroke,d=this.fill,i=this.shadow,g,x=[],m,A=t.indexOf("COMMON_PARTS"),k=o.additionalTransform;return r&&(r.clipPathId="CLIPPATH_"+V.Object.__uid++,m='<clipPath id="'+r.clipPathId+`" >
`+r.toClipPathSVG(s)+`</clipPath>
`),l&&x.push("<g ",a,this.getSvgCommons(),` >
`),x.push("<g ",this.getSvgTransform(!1),l?"":a+this.getSvgCommons(),` >
`),g=[e,n,c?"":this.addPaintOrder()," ",k?'transform="'+k+'" ':""].join(""),t[A]=g,d&&d.toLive&&x.push(d.toSVG(this)),u&&u.toLive&&x.push(u.toSVG(this)),i&&x.push(i.toSVG(this)),r&&x.push(m),x.push(t.join("")),x.push(`</g>
`),l&&x.push(`</g>
`),s?s(x.join("")):x.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var f=V.util.object.extend,h="stateProperties";function t(c,s,e){var a={},r=!0;e.forEach(function(n){a[n]=c[n]}),f(c[s],a,r)}function o(c,s,e){if(c===s)return!0;if(Array.isArray(c)){if(!Array.isArray(s)||c.length!==s.length)return!1;for(var a=0,r=c.length;a<r;a++)if(!o(c[a],s[a]))return!1;return!0}else if(c&&typeof c=="object"){var n=Object.keys(c),l;if(!s||typeof s!="object"||!e&&n.length!==Object.keys(s).length)return!1;for(var a=0,r=n.length;a<r;a++)if(l=n[a],!(l==="canvas"||l==="group")&&!o(c[l],s[l]))return!1;return!0}}V.util.object.extend(V.Object.prototype,{hasStateChanged:function(c){c=c||h;var s="_"+c;return Object.keys(this[s]).length<this[c].length?!0:!o(this[s],this,!0)},saveState:function(c){var s=c&&c.propertySet||h,e="_"+s;return this[e]?(t(this,e,this[s]),c&&c.stateProperties&&t(this,e,c.stateProperties),this):this.setupState(c)},setupState:function(c){c=c||{};var s=c.propertySet||h;return c.propertySet=s,this["_"+s]={},this.saveState(c),this}})}(),function(){var f=V.util.degreesToRadians;V.util.object.extend(V.Object.prototype,{_findTargetCorner:function(h,t){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var o=h.x,c=h.y,s,e,a=Object.keys(this.oCoords),r=a.length-1,n;for(this.__corner=0;r>=0;r--)if(n=a[r],!!this.isControlVisible(n)&&(e=this._getImageLines(t?this.oCoords[n].touchCorner:this.oCoords[n].corner),s=this._findCrossPoints({x:o,y:c},e),s!==0&&s%2===1))return this.__corner=n,n;return!1},forEachControl:function(h){for(var t in this.controls)h(this.controls[t],t,this)},_setCornerCoords:function(){var h=this.oCoords;for(var t in h){var o=this.controls[t];h[t].corner=o.calcCornerCoords(this.angle,this.cornerSize,h[t].x,h[t].y,!1),h[t].touchCorner=o.calcCornerCoords(this.angle,this.touchCornerSize,h[t].x,h[t].y,!0)}},drawSelectionBackground:function(h){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;h.save();var t=this.getCenterPoint(),o=this._calculateCurrentDimensions(),c=this.canvas.viewportTransform;return h.translate(t.x,t.y),h.scale(1/c[0],1/c[3]),h.rotate(f(this.angle)),h.fillStyle=this.selectionBackgroundColor,h.fillRect(-o.x/2,-o.y/2,o.x,o.y),h.restore(),this},drawBorders:function(h,t){t=t||{};var o=this._calculateCurrentDimensions(),c=this.borderScaleFactor,s=o.x+c,e=o.y+c,a=typeof t.hasControls<"u"?t.hasControls:this.hasControls,r=!1;return h.save(),h.strokeStyle=t.borderColor||this.borderColor,this._setLineDash(h,t.borderDashArray||this.borderDashArray),h.strokeRect(-s/2,-e/2,s,e),a&&(h.beginPath(),this.forEachControl(function(n,l,u){n.withConnection&&n.getVisibility(u,l)&&(r=!0,h.moveTo(n.x*s,n.y*e),h.lineTo(n.x*s+n.offsetX,n.y*e+n.offsetY))}),r&&h.stroke()),h.restore(),this},drawBordersInGroup:function(h,t,o){o=o||{};var c=V.util.sizeAfterTransform(this.width,this.height,t),s=this.strokeWidth,e=this.strokeUniform,a=this.borderScaleFactor,r=c.x+s*(e?this.canvas.getZoom():t.scaleX)+a,n=c.y+s*(e?this.canvas.getZoom():t.scaleY)+a;return h.save(),this._setLineDash(h,o.borderDashArray||this.borderDashArray),h.strokeStyle=o.borderColor||this.borderColor,h.strokeRect(-r/2,-n/2,r,n),h.restore(),this},drawControls:function(h,t){t=t||{},h.save();var o=this.canvas.getRetinaScaling(),c,s;return h.setTransform(o,0,0,o,0,0),h.strokeStyle=h.fillStyle=t.cornerColor||this.cornerColor,this.transparentCorners||(h.strokeStyle=t.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(h,t.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(c=this.group.calcTransformMatrix()),this.forEachControl(function(e,a,r){s=r.oCoords[a],e.getVisibility(r,a)&&(c&&(s=V.util.transformPoint(s,c)),e.render(h,s.x,s.y,t,r))}),h.restore(),this},isControlVisible:function(h){return this.controls[h]&&this.controls[h].getVisibility(this,h)},setControlVisible:function(h,t){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[h]=t,this},setControlsVisibility:function(h){h||(h={});for(var t in h)this.setControlVisible(t,h[t]);return this},onDeselect:function(){},onSelect:function(){}})}(),V.util.object.extend(V.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(f,h){h=h||{};var t=function(){},o=h.onComplete||t,c=h.onChange||t,s=this;return V.util.animate({target:this,startValue:f.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(e){f.set("left",e),s.requestRenderAll(),c()},onComplete:function(){f.setCoords(),o()}})},fxCenterObjectV:function(f,h){h=h||{};var t=function(){},o=h.onComplete||t,c=h.onChange||t,s=this;return V.util.animate({target:this,startValue:f.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(e){f.set("top",e),s.requestRenderAll(),c()},onComplete:function(){f.setCoords(),o()}})},fxRemove:function(f,h){h=h||{};var t=function(){},o=h.onComplete||t,c=h.onChange||t,s=this;return V.util.animate({target:this,startValue:f.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){f.set("opacity",e),s.requestRenderAll(),c()},onComplete:function(){s.remove(f),o()}})}}),V.util.object.extend(V.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var f=[],h,t,o=[];for(h in arguments[0])f.push(h);for(var c=0,s=f.length;c<s;c++)h=f[c],t=c!==s-1,o.push(this._animate(h,arguments[0][h],arguments[1],t));return o}else return this._animate.apply(this,arguments)},_animate:function(f,h,t,o){var c=this,s;h=h.toString(),t?t=V.util.object.clone(t):t={},~f.indexOf(".")&&(s=f.split("."));var e=c.colorProperties.indexOf(f)>-1||s&&c.colorProperties.indexOf(s[1])>-1,a=s?this.get(s[0])[s[1]]:this.get(f);"from"in t||(t.from=a),e||(~h.indexOf("=")?h=a+parseFloat(h.replace("=","")):h=parseFloat(h));var r={target:this,startValue:t.from,endValue:h,byValue:t.by,easing:t.easing,duration:t.duration,abort:t.abort&&function(n,l,u){return t.abort.call(c,n,l,u)},onChange:function(n,l,u){s?c[s[0]][s[1]]=n:c.set(f,n),!o&&t.onChange&&t.onChange(n,l,u)},onComplete:function(n,l,u){o||(c.setCoords(),t.onComplete&&t.onComplete(n,l,u))}};return e?V.util.animateColor(r.startValue,r.endValue,r.duration,r):V.util.animate(r)}}),function(f){var h=f.fabric||(f.fabric={}),t=h.util.object.extend,o=h.util.object.clone,c={x1:1,x2:1,y1:1,y2:1};if(h.Line){h.warn("fabric.Line is already defined");return}h.Line=h.util.createClass(h.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:h.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(e,a){e||(e=[0,0,0,0]),this.callSuper("initialize",a),this.set("x1",e[0]),this.set("y1",e[1]),this.set("x2",e[2]),this.set("y2",e[3]),this._setWidthHeight(a)},_setWidthHeight:function(e){e||(e={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in e?e.left:this._getLeftToOriginX(),this.top="top"in e?e.top:this._getTopToOriginY()},_set:function(e,a){return this.callSuper("_set",e,a),typeof c[e]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:s({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:s({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(e){e.beginPath();var a=this.calcLinePoints();e.moveTo(a.x1,a.y1),e.lineTo(a.x2,a.y2),e.lineWidth=this.strokeWidth;var r=e.strokeStyle;e.strokeStyle=this.stroke||e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(e){return t(this.callSuper("toObject",e),this.calcLinePoints())},_getNonTransformedDimensions:function(){var e=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e},calcLinePoints:function(){var e=this.x1<=this.x2?-1:1,a=this.y1<=this.y2?-1:1,r=e*this.width*.5,n=a*this.height*.5,l=e*this.width*-.5,u=a*this.height*-.5;return{x1:r,x2:l,y1:n,y2:u}},_toSVG:function(){var e=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,`" />
`]}}),h.Line.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),h.Line.fromElement=function(e,a,r){r=r||{};var n=h.parseAttributes(e,h.Line.ATTRIBUTE_NAMES),l=[n.x1||0,n.y1||0,n.x2||0,n.y2||0];a(new h.Line(l,t(n,r)))},h.Line.fromObject=function(e,a){function r(l){delete l.points,a&&a(l)}var n=o(e,!0);n.points=[e.x1,e.y1,e.x2,e.y2],h.Object._fromObject("Line",n,r,"points")};function s(e,a){var r=e.origin,n=e.axis1,l=e.axis2,u=e.dimension,d=a.nearest,i=a.center,g=a.farthest;return function(){switch(this.get(r)){case d:return Math.min(this.get(n),this.get(l));case i:return Math.min(this.get(n),this.get(l))+.5*this.get(u);case g:return Math.max(this.get(n),this.get(l))}}}}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.util.degreesToRadians;if(h.Circle){h.warn("fabric.Circle is already defined.");return}h.Circle=h.util.createClass(h.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:h.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(c,s){return this.callSuper("_set",c,s),c==="radius"&&this.setRadius(s),this},toObject:function(c){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(c))},_toSVG:function(){var c,s=0,e=0,a=(this.endAngle-this.startAngle)%360;if(a===0)c=["<circle ","COMMON_PARTS",'cx="'+s+'" cy="'+e+'" ','r="',this.radius,`" />
`];else{var r=t(this.startAngle),n=t(this.endAngle),l=this.radius,u=h.util.cos(r)*l,d=h.util.sin(r)*l,i=h.util.cos(n)*l,g=h.util.sin(n)*l,x=a>180?"1":"0";c=['<path d="M '+u+" "+d," A "+l+" "+l," 0 ",+x+" 1"," "+i+" "+g,'" ',"COMMON_PARTS",` />
`]}return c},_render:function(c){c.beginPath(),c.arc(0,0,this.radius,t(this.startAngle),t(this.endAngle),!1),this._renderPaintInOrder(c)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(c){return this.radius=c,this.set("width",c*2).set("height",c*2)}}),h.Circle.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),h.Circle.fromElement=function(c,s){var e=h.parseAttributes(c,h.Circle.ATTRIBUTE_NAMES);if(!o(e))throw new Error("value of `r` attribute is required and can not be negative");e.left=(e.left||0)-e.radius,e.top=(e.top||0)-e.radius,s(new h.Circle(e))};function o(c){return"radius"in c&&c.radius>=0}h.Circle.fromObject=function(c,s){h.Object._fromObject("Circle",c,s)}}(Me),function(f){var h=f.fabric||(f.fabric={});if(h.Triangle){h.warn("fabric.Triangle is already defined");return}h.Triangle=h.util.createClass(h.Object,{type:"triangle",width:100,height:100,_render:function(t){var o=this.width/2,c=this.height/2;t.beginPath(),t.moveTo(-o,c),t.lineTo(0,-c),t.lineTo(o,c),t.closePath(),this._renderPaintInOrder(t)},_toSVG:function(){var t=this.width/2,o=this.height/2,c=[-t+" "+o,"0 "+-o,t+" "+o].join(",");return["<polygon ","COMMON_PARTS",'points="',c,'" />']}}),h.Triangle.fromObject=function(t,o){return h.Object._fromObject("Triangle",t,o)}}(Me),function(f){var h=f.fabric||(f.fabric={}),t=Math.PI*2;if(h.Ellipse){h.warn("fabric.Ellipse is already defined.");return}h.Ellipse=h.util.createClass(h.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:h.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(o){this.callSuper("initialize",o),this.set("rx",o&&o.rx||0),this.set("ry",o&&o.ry||0)},_set:function(o,c){switch(this.callSuper("_set",o,c),o){case"rx":this.rx=c,this.set("width",c*2);break;case"ry":this.ry=c,this.set("height",c*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(o){return this.callSuper("toObject",["rx","ry"].concat(o))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(o){o.beginPath(),o.save(),o.transform(1,0,0,this.ry/this.rx,0,0),o.arc(0,0,this.rx,0,t,!1),o.restore(),this._renderPaintInOrder(o)}}),h.Ellipse.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),h.Ellipse.fromElement=function(o,c){var s=h.parseAttributes(o,h.Ellipse.ATTRIBUTE_NAMES);s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,c(new h.Ellipse(s))},h.Ellipse.fromObject=function(o,c){h.Object._fromObject("Ellipse",o,c)}}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.util.object.extend;if(h.Rect){h.warn("fabric.Rect is already defined");return}h.Rect=h.util.createClass(h.Object,{stateProperties:h.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:h.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(o){this.callSuper("initialize",o),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(o){var c=this.rx?Math.min(this.rx,this.width/2):0,s=this.ry?Math.min(this.ry,this.height/2):0,e=this.width,a=this.height,r=-this.width/2,n=-this.height/2,l=c!==0||s!==0,u=1-.5522847498;o.beginPath(),o.moveTo(r+c,n),o.lineTo(r+e-c,n),l&&o.bezierCurveTo(r+e-u*c,n,r+e,n+u*s,r+e,n+s),o.lineTo(r+e,n+a-s),l&&o.bezierCurveTo(r+e,n+a-u*s,r+e-u*c,n+a,r+e-c,n+a),o.lineTo(r+c,n+a),l&&o.bezierCurveTo(r+u*c,n+a,r,n+a-u*s,r,n+a-s),o.lineTo(r,n+s),l&&o.bezierCurveTo(r,n+u*s,r+u*c,n,r+c,n),o.closePath(),this._renderPaintInOrder(o)},toObject:function(o){return this.callSuper("toObject",["rx","ry"].concat(o))},_toSVG:function(){var o=-this.width/2,c=-this.height/2;return["<rect ","COMMON_PARTS",'x="',o,'" y="',c,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),h.Rect.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),h.Rect.fromElement=function(o,c,s){if(!o)return c(null);s=s||{};var e=h.parseAttributes(o,h.Rect.ATTRIBUTE_NAMES);e.left=e.left||0,e.top=e.top||0,e.height=e.height||0,e.width=e.width||0;var a=new h.Rect(t(s?h.util.object.clone(s):{},e));a.visible=a.visible&&a.width>0&&a.height>0,c(a)},h.Rect.fromObject=function(o,c){return h.Object._fromObject("Rect",o,c)}}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.util.object.extend,o=h.util.array.min,c=h.util.array.max,s=h.util.toFixed,e=h.util.projectStrokeOnPoints;if(h.Polyline){h.warn("fabric.Polyline is already defined");return}h.Polyline=h.util.createClass(h.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:h.Object.prototype.cacheProperties.concat("points"),initialize:function(a,r){r=r||{},this.points=a||[],this.callSuper("initialize",r),this._setPositionDimensions(r)},_projectStrokeOnPoints:function(){return e(this.points,this,!0)},_setPositionDimensions:function(a){var r=this._calcDimensions(a),n,l=this.exactBoundingBox?this.strokeWidth:0;this.width=r.width-l,this.height=r.height-l,a.fromSVG||(n=this.translateToGivenOrigin({x:r.left-this.strokeWidth/2+l/2,y:r.top-this.strokeWidth/2+l/2},"left","top",this.originX,this.originY)),typeof a.left>"u"&&(this.left=a.fromSVG?r.left:n.x),typeof a.top>"u"&&(this.top=a.fromSVG?r.top:n.y),this.pathOffset={x:r.left+this.width/2+l/2,y:r.top+this.height/2+l/2}},_calcDimensions:function(){var a=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,r=o(a,"x")||0,n=o(a,"y")||0,l=c(a,"x")||0,u=c(a,"y")||0,d=l-r,i=u-n;return{left:r,top:n,width:d,height:i}},toObject:function(a){return t(this.callSuper("toObject",a),{points:this.points.concat()})},_toSVG:function(){for(var a=[],r=this.pathOffset.x,n=this.pathOffset.y,l=h.Object.NUM_FRACTION_DIGITS,u=0,d=this.points.length;u<d;u++)a.push(s(this.points[u].x-r,l),",",s(this.points[u].y-n,l)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',a.join(""),`" />
`]},commonRender:function(a){var r,n=this.points.length,l=this.pathOffset.x,u=this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;a.beginPath(),a.moveTo(this.points[0].x-l,this.points[0].y-u);for(var d=0;d<n;d++)r=this.points[d],a.lineTo(r.x-l,r.y-u);return!0},_render:function(a){this.commonRender(a)&&this._renderPaintInOrder(a)},complexity:function(){return this.get("points").length}}),h.Polyline.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat(),h.Polyline.fromElementGenerator=function(a){return function(r,n,l){if(!r)return n(null);l||(l={});var u=h.parsePointsAttribute(r.getAttribute("points")),d=h.parseAttributes(r,h[a].ATTRIBUTE_NAMES);d.fromSVG=!0,n(new h[a](u,t(d,l)))}},h.Polyline.fromElement=h.Polyline.fromElementGenerator("Polyline"),h.Polyline.fromObject=function(a,r){return h.Object._fromObject("Polyline",a,r,"points")}}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.util.projectStrokeOnPoints;if(h.Polygon){h.warn("fabric.Polygon is already defined");return}h.Polygon=h.util.createClass(h.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return t(this.points,this)},_render:function(o){this.commonRender(o)&&(o.closePath(),this._renderPaintInOrder(o))}}),h.Polygon.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat(),h.Polygon.fromElement=h.Polyline.fromElementGenerator("Polygon"),h.Polygon.fromObject=function(o,c){h.Object._fromObject("Polygon",o,c,"points")}}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.util.array.min,o=h.util.array.max,c=h.util.object.extend,s=h.util.object.clone,e=h.util.toFixed;if(h.Path){h.warn("fabric.Path is already defined");return}h.Path=h.util.createClass(h.Object,{type:"path",path:null,cacheProperties:h.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:h.Object.prototype.stateProperties.concat("path"),initialize:function(a,r){r=s(r||{}),delete r.path,this.callSuper("initialize",r),this._setPath(a||[],r)},_setPath:function(a,r){this.path=h.util.makePathSimpler(Array.isArray(a)?a:h.util.parsePath(a)),h.Polyline.prototype._setPositionDimensions.call(this,r||{})},_renderPathCommands:function(a){var r,n=0,l=0,u=0,d=0,i=0,g=0,x=-this.pathOffset.x,m=-this.pathOffset.y;a.beginPath();for(var A=0,k=this.path.length;A<k;++A)switch(r=this.path[A],r[0]){case"L":u=r[1],d=r[2],a.lineTo(u+x,d+m);break;case"M":u=r[1],d=r[2],n=u,l=d,a.moveTo(u+x,d+m);break;case"C":u=r[5],d=r[6],i=r[3],g=r[4],a.bezierCurveTo(r[1]+x,r[2]+m,i+x,g+m,u+x,d+m);break;case"Q":a.quadraticCurveTo(r[1]+x,r[2]+m,r[3]+x,r[4]+m),u=r[3],d=r[4],i=r[1],g=r[2];break;case"z":case"Z":u=n,d=l,a.closePath();break}},_render:function(a){this._renderPathCommands(a),this._renderPaintInOrder(a)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(a){return c(this.callSuper("toObject",a),{path:this.path.map(function(r){return r.slice()})})},toDatalessObject:function(a){var r=this.toObject(["sourcePath"].concat(a));return r.sourcePath&&delete r.path,r},_toSVG:function(){var a=h.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',a,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var a=h.Object.NUM_FRACTION_DIGITS;return" translate("+e(-this.pathOffset.x,a)+", "+e(-this.pathOffset.y,a)+")"},toClipPathSVG:function(a){var r=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:a,additionalTransform:r})},toSVG:function(a){var r=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:a,additionalTransform:r})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var a=[],r=[],n,l=0,u=0,d=0,i=0,g,x=0,m=this.path.length;x<m;++x){switch(n=this.path[x],n[0]){case"L":d=n[1],i=n[2],g=[];break;case"M":d=n[1],i=n[2],l=d,u=i,g=[];break;case"C":g=h.util.getBoundsOfCurve(d,i,n[1],n[2],n[3],n[4],n[5],n[6]),d=n[5],i=n[6];break;case"Q":g=h.util.getBoundsOfCurve(d,i,n[1],n[2],n[1],n[2],n[3],n[4]),d=n[3],i=n[4];break;case"z":case"Z":d=l,i=u;break}g.forEach(function(j){a.push(j.x),r.push(j.y)}),a.push(d),r.push(i)}var A=t(a)||0,k=t(r)||0,v=o(a)||0,_=o(r)||0,K=v-A,M=_-k;return{left:A,top:k,width:K,height:M}}}),h.Path.fromObject=function(a,r){if(typeof a.sourcePath=="string"){var n=a.sourcePath;h.loadSVGFromURL(n,function(l){var u=l[0];u.setOptions(a),a.clipPath?h.util.enlivenObjects([a.clipPath],function(d){u.clipPath=d[0],r&&r(u)}):r&&r(u)})}else h.Object._fromObject("Path",a,r,"path")},h.Path.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat(["d"]),h.Path.fromElement=function(a,r,n){var l=h.parseAttributes(a,h.Path.ATTRIBUTE_NAMES);l.fromSVG=!0,r(new h.Path(l.d,c(l,n)))}}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.util.array.min,o=h.util.array.max;h.Group||(h.Group=h.util.createClass(h.Object,h.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(c,s,e){s=s||{},this._objects=[],e&&this.callSuper("initialize",s),this._objects=c||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;if(e)this._updateObjectsACoords();else{var r=s&&s.centerPoint;s.originX!==void 0&&(this.originX=s.originX),s.originY!==void 0&&(this.originY=s.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete s.centerPoint,this.callSuper("initialize",s)}this.setCoords()},_updateObjectsACoords:function(){for(var c=!0,s=this._objects.length;s--;)this._objects[s].setCoords(c)},_updateObjectsCoords:function(s){for(var s=s||this.getCenterPoint(),e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],s)},_updateObjectCoords:function(c,s){var e=c.left,a=c.top,r=!0;c.set({left:e-s.x,top:a-s.y}),c.group=this,c.setCoords(r)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(c){var s=!!this.group;return this._restoreObjectsState(),h.util.resetObjectTransform(this),c&&(s&&h.util.removeTransformFromObject(c,this.group.calcTransformMatrix()),this._objects.push(c),c.group=this,c._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,s?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(c){return this._restoreObjectsState(),h.util.resetObjectTransform(this),this.remove(c),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(c){this.dirty=!0,c.group=this,c._set("canvas",this.canvas)},_onObjectRemoved:function(c){this.dirty=!0,delete c.group},_set:function(c,s){var e=this._objects.length;if(this.useSetOnGroup)for(;e--;)this._objects[e].setOnGroup(c,s);if(c==="canvas")for(;e--;)this._objects[e]._set(c,s);h.Object.prototype._set.call(this,c,s)},toObject:function(c){var s=this.includeDefaultValues,e=this._objects.filter(function(r){return!r.excludeFromExport}).map(function(r){var n=r.includeDefaultValues;r.includeDefaultValues=s;var l=r.toObject(c);return r.includeDefaultValues=n,l}),a=h.Object.prototype.toObject.call(this,c);return a.objects=e,a},toDatalessObject:function(c){var s,e=this.sourcePath;if(e)s=e;else{var a=this.includeDefaultValues;s=this._objects.map(function(n){var l=n.includeDefaultValues;n.includeDefaultValues=a;var u=n.toDatalessObject(c);return n.includeDefaultValues=l,u})}var r=h.Object.prototype.toDatalessObject.call(this,c);return r.objects=s,r},render:function(c){this._transformDone=!0,this.callSuper("render",c),this._transformDone=!1},shouldCache:function(){var c=h.Object.prototype.shouldCache.call(this);if(c){for(var s=0,e=this._objects.length;s<e;s++)if(this._objects[s].willDrawShadow())return this.ownCaching=!1,!1}return c},willDrawShadow:function(){if(h.Object.prototype.willDrawShadow.call(this))return!0;for(var c=0,s=this._objects.length;c<s;c++)if(this._objects[c].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(c){for(var s=0,e=this._objects.length;s<e;s++)this._objects[s].render(c);this._drawClipPath(c,this.clipPath)},isCacheDirty:function(c){if(this.callSuper("isCacheDirty",c))return!0;if(!this.statefullCache)return!1;for(var s=0,e=this._objects.length;s<e;s++)if(this._objects[s].isCacheDirty(!0)){if(this._cacheCanvas){var a=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-a/2,-r/2,a,r)}return!0}return!1},_restoreObjectsState:function(){var c=this.calcOwnMatrix();return this._objects.forEach(function(s){h.util.addTransformToObject(s,c),delete s.group,s.setCoords()}),this},destroy:function(){return this._objects.forEach(function(c){c.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(c){c.dispose&&c.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var c=this._objects,s=this.canvas;this._objects=[];var e=this.toObject();delete e.objects;var a=new h.ActiveSelection([]);return a.set(e),a.type="activeSelection",s.remove(this),c.forEach(function(r){r.group=a,r.dirty=!0,s.add(r)}),a.canvas=s,a._objects=c,s._activeObject=a,a.setCoords(),a}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var c=!0;return this.forEachObject(function(s){s.setCoords(c)}),this},_calcBounds:function(c){for(var s=[],e=[],a,r,n,l=["tr","br","bl","tl"],u=0,d=this._objects.length,i,g=l.length;u<d;++u){for(a=this._objects[u],n=a.calcACoords(),i=0;i<g;i++)r=l[i],s.push(n[r].x),e.push(n[r].y);a.aCoords=n}this._getBounds(s,e,c)},_getBounds:function(c,s,e){var a=new h.Point(t(c),t(s)),r=new h.Point(o(c),o(s)),n=a.y||0,l=a.x||0,u=r.x-a.x||0,d=r.y-a.y||0;this.width=u,this.height=d,e||this.setPositionByOrigin({x:l,y:n},"left","top")},_toSVG:function(c){for(var s=["<g ","COMMON_PARTS",` >
`],e=0,a=this._objects.length;e<a;e++)s.push("		",this._objects[e].toSVG(c));return s.push(`</g>
`),s},getSvgStyles:function(){var c=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",s=this.visible?"":" visibility: hidden;";return[c,this.getSvgFilter(),s].join("")},toClipPathSVG:function(c){for(var s=[],e=0,a=this._objects.length;e<a;e++)s.push("	",this._objects[e].toClipPathSVG(c));return this._createBaseClipPathSVGMarkup(s,{reviver:c})}}),h.Group.fromObject=function(c,s){var e=c.objects,a=h.util.object.clone(c,!0);if(delete a.objects,typeof e=="string"){h.loadSVGFromURL(e,function(r){var n=h.util.groupSVGElements(r,c,e),l=a.clipPath;delete a.clipPath,n.set(a),l?h.util.enlivenObjects([l],function(u){n.clipPath=u[0],s&&s(n)}):s&&s(n)});return}h.util.enlivenObjects(e,function(r){h.util.enlivenObjectEnlivables(c,a,function(){s&&s(new h.Group(r,a,!0))})})})}(Me),function(f){var h=f.fabric||(f.fabric={});h.ActiveSelection||(h.ActiveSelection=h.util.createClass(h.Group,{type:"activeSelection",initialize:function(t,o){o=o||{},this._objects=t||[];for(var c=this._objects.length;c--;)this._objects[c].group=this;o.originX&&(this.originX=o.originX),o.originY&&(this.originY=o.originY),this._calcBounds(),this._updateObjectsCoords(),h.Object.prototype.initialize.call(this,o),this.setCoords()},toGroup:function(){var t=this._objects.concat();this._objects=[];var o=h.Object.prototype.toObject.call(this),c=new h.Group([]);if(delete o.type,c.set(o),t.forEach(function(e){e.canvas.remove(e),e.group=c}),c._objects=t,!this.canvas)return c;var s=this.canvas;return s.add(c),s._activeObject=c,c.setCoords(),c},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,o,c){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,o),c=c||{},typeof c.hasControls>"u"&&(c.hasControls=!1),c.forActiveSelection=!0;for(var s=0,e=this._objects.length;s<e;s++)this._objects[s]._renderControls(t,c);t.restore()}}),h.ActiveSelection.fromObject=function(t,o){h.util.enlivenObjects(t.objects,function(c){delete t.objects,o&&o(new h.ActiveSelection(c,t,!0))})})}(Me),function(f){var h=V.util.object.extend;if(f.fabric||(f.fabric={}),f.fabric.Image){V.warn("fabric.Image is already defined.");return}V.Image=V.util.createClass(V.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:V.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:V.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(t,o){o||(o={}),this.filters=[],this.cacheKey="texture"+V.Object.__uid++,this.callSuper("initialize",o),this._initElement(t,o)},getElement:function(){return this._element||{}},setElement:function(t,o){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=t,this._originalElement=t,this._initConfig(o),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var o=V.filterBackend;o&&o.evictCachesForKey&&o.evictCachesForKey(t)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(t){V.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){if(!(!this.stroke||this.strokeWidth===0)){var o=this.width/2,c=this.height/2;t.beginPath(),t.moveTo(-o,-c),t.lineTo(o,-c),t.lineTo(o,c),t.lineTo(-o,c),t.lineTo(-o,-c),t.closePath()}},toObject:function(t){var o=[];this.filters.forEach(function(s){s&&o.push(s.toObject())});var c=h(this.callSuper("toObject",["cropX","cropY"].concat(t)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:o});return this.resizeFilter&&(c.resizeFilter=this.resizeFilter.toObject()),c},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t=[],o=[],c,s=this._element,e=-this.width/2,a=-this.height/2,r="",n="";if(!s)return[];if(this.hasCrop()){var l=V.Object.__uid++;t.push('<clipPath id="imageCrop_'+l+`">
`,'	<rect x="'+e+'" y="'+a+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),r=' clip-path="url(#imageCrop_'+l+')" '}if(this.imageSmoothing||(n='" image-rendering="optimizeSpeed'),o.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',e-this.cropX,'" y="',a-this.cropY,'" width="',s.width||s.naturalWidth,'" height="',s.height||s.height,n,'"',r,`></image>
`),this.stroke||this.strokeDashArray){var u=this.fill;this.fill=null,c=["	<rect ",'x="',e,'" y="',a,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=u}return this.paintFirst!=="fill"?t=t.concat(c,o):t=t.concat(o,c),t},getSrc:function(t){var o=t?this._element:this._originalElement;return o?o.toDataURL?o.toDataURL():this.srcFromAttribute?o.getAttribute("src"):o.src:this.src||""},setSrc:function(t,o,c){return V.util.loadImage(t,function(s,e){this.setElement(s,c),this._setWidthHeight(),o&&o(this,e)},this,c&&c.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var t=this.resizeFilter,o=this.minimumScaleTrigger,c=this.getTotalObjectScaling(),s=c.scaleX,e=c.scaleY,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||s>o&&e>o){this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,this._lastScaleY=e;return}V.filterBackend||(V.filterBackend=V.initFilterBackend());var r=V.util.createCanvasElement(),n=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,l=a.width,u=a.height;r.width=l,r.height=u,this._element=r,this._lastScaleX=t.scaleX=s,this._lastScaleY=t.scaleY=e,V.filterBackend.applyFilters([t],a,l,u,this._element,n),this._filterScalingX=r.width/this._originalElement.width,this._filterScalingY=r.height/this._originalElement.height},applyFilters:function(t){if(t=t||this.filters||[],t=t.filter(function(a){return a&&!a.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),t.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var o=this._originalElement,c=o.naturalWidth||o.width,s=o.naturalHeight||o.height;if(this._element===this._originalElement){var e=V.util.createCanvasElement();e.width=c,e.height=s,this._element=e,this._filteredEl=e}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,c,s),this._lastScaleX=1,this._lastScaleY=1;return V.filterBackend||(V.filterBackend=V.initFilterBackend()),V.filterBackend.applyFilters(t,this._originalElement,c,s,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){V.util.setImageSmoothing(t,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},drawCacheOnCanvas:function(t){V.util.setImageSmoothing(t,this.imageSmoothing),V.Object.prototype.drawCacheOnCanvas.call(this,t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var o=this._element;if(o){var c=this._filterScalingX,s=this._filterScalingY,e=this.width,a=this.height,r=Math.min,n=Math.max,l=n(this.cropX,0),u=n(this.cropY,0),d=o.naturalWidth||o.width,i=o.naturalHeight||o.height,g=l*c,x=u*s,m=r(e*c,d-g),A=r(a*s,i-x),k=-e/2,v=-a/2,_=r(e,d/c-l),K=r(a,i/s-u);o&&t.drawImage(o,g,x,m,A,k,v,_,K)}},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,o){this.setElement(V.util.getById(t),o),V.util.addClass(this.getElement(),V.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t)},_initFilters:function(t,o){t&&t.length?V.util.enlivenObjects(t,function(c){o&&o(c)},"fabric.Image.filters"):o&&o()},_setWidthHeight:function(t){t||(t={});var o=this.getElement();this.width=t.width||o.naturalWidth||o.width||0,this.height=t.height||o.naturalHeight||o.height||0},parsePreserveAspectRatioAttribute:function(){var t=V.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),o=this._element.width,c=this._element.height,s=1,e=1,a=0,r=0,n=0,l=0,u,d=this.width,i=this.height,g={width:d,height:i};return t&&(t.alignX!=="none"||t.alignY!=="none")?(t.meetOrSlice==="meet"&&(s=e=V.util.findScaleToFit(this._element,g),u=(d-o*s)/2,t.alignX==="Min"&&(a=-u),t.alignX==="Max"&&(a=u),u=(i-c*e)/2,t.alignY==="Min"&&(r=-u),t.alignY==="Max"&&(r=u)),t.meetOrSlice==="slice"&&(s=e=V.util.findScaleToCover(this._element,g),u=o-d/s,t.alignX==="Mid"&&(n=u/2),t.alignX==="Max"&&(n=u),u=c-i/e,t.alignY==="Mid"&&(l=u/2),t.alignY==="Max"&&(l=u),o=d/s,c=i/e)):(s=d/o,e=i/c),{width:o,height:c,scaleX:s,scaleY:e,offsetLeft:a,offsetTop:r,cropX:n,cropY:l}}}),V.Image.CSS_CANVAS="canvas-img",V.Image.prototype.getSvgSrc=V.Image.prototype.getSrc,V.Image.fromObject=function(t,o){var c=V.util.object.clone(t);V.util.loadImage(c.src,function(s,e){if(e){o&&o(null,!0);return}V.Image.prototype._initFilters.call(c,c.filters,function(a){c.filters=a||[],V.Image.prototype._initFilters.call(c,[c.resizeFilter],function(r){c.resizeFilter=r[0],V.util.enlivenObjectEnlivables(c,c,function(){var n=new V.Image(s,c);o(n,!1)})})})},null,c.crossOrigin)},V.Image.fromURL=function(t,o,c){V.util.loadImage(t,function(s,e){o&&o(new V.Image(s,c),e)},null,c&&c.crossOrigin)},V.Image.ATTRIBUTE_NAMES=V.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),V.Image.fromElement=function(t,o,c){var s=V.parseAttributes(t,V.Image.ATTRIBUTE_NAMES);V.Image.fromURL(s["xlink:href"],o,h(c?V.util.object.clone(c):{},s))}}(Me),V.util.object.extend(V.Object.prototype,{_getAngleValueForStraighten:function(){var f=this.angle%360;return f>0?Math.round((f-1)/90)*90:Math.round(f/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(f){f=f||{};var h=function(){},t=f.onComplete||h,o=f.onChange||h,c=this;return V.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(s){c.rotate(s),o()},onComplete:function(){c.setCoords(),t()}})}}),V.util.object.extend(V.StaticCanvas.prototype,{straightenObject:function(f){return f.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(f){return f.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function f(t,o){var c="precision "+o+` float;
void main(){}`,s=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(s,c),t.compileShader(s),!!t.getShaderParameter(s,t.COMPILE_STATUS)}V.isWebglSupported=function(t){if(V.isLikelyNode)return!1;t=t||V.WebglFilterBackend.prototype.tileSize;var o=document.createElement("canvas"),c=o.getContext("webgl")||o.getContext("experimental-webgl"),s=!1;if(c){V.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE),s=V.maxTextureSize>=t;for(var e=["highp","mediump","lowp"],a=0;a<3;a++)if(f(c,e[a])){V.webGlPrecision=e[a];break}}return this.isSupported=s,s},V.WebglFilterBackend=h;function h(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}h.prototype={tileSize:2048,resources:{},setupGLContext:function(t,o){this.dispose(),this.createWebGLCanvas(t,o),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,o)},chooseFastestCopyGLTo2DMethod:function(t,o){var c=typeof window.performance<"u",s;try{new ImageData(1,1),s=!0}catch{s=!1}var e=typeof ArrayBuffer<"u",a=typeof Uint8ClampedArray<"u";if(c&&s&&e&&a){var r=V.util.createCanvasElement(),n=new ArrayBuffer(t*o*4);if(V.forceGLPutImageData){this.imageBuffer=n,this.copyGLTo2D=ge;return}var l={imageBuffer:n,destinationWidth:t,destinationHeight:o,targetCanvas:r},u,d,i;r.width=t,r.height=o,u=window.performance.now(),De.call(l,this.gl,l),d=window.performance.now()-u,u=window.performance.now(),ge.call(l,this.gl,l),i=window.performance.now()-u,d>i?(this.imageBuffer=n,this.copyGLTo2D=ge):this.copyGLTo2D=De}},createWebGLCanvas:function(t,o){var c=V.util.createCanvasElement();c.width=t,c.height=o;var s={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},e=c.getContext("webgl",s);e||(e=c.getContext("experimental-webgl",s)),e&&(e.clearColor(0,0,0,0),this.canvas=c,this.gl=e)},applyFilters:function(t,o,c,s,e,a){var r=this.gl,n;a&&(n=this.getCachedTexture(a,o));var l={originalWidth:o.width||o.originalWidth,originalHeight:o.height||o.originalHeight,sourceWidth:c,sourceHeight:s,destinationWidth:c,destinationHeight:s,context:r,sourceTexture:this.createTexture(r,c,s,!n&&o),targetTexture:this.createTexture(r,c,s),originalTexture:n||this.createTexture(r,c,s,!n&&o),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:e},u=r.createFramebuffer();return r.bindFramebuffer(r.FRAMEBUFFER,u),t.forEach(function(d){d&&d.applyTo(l)}),de(l),this.copyGLTo2D(r,l),r.bindTexture(r.TEXTURE_2D,null),r.deleteTexture(l.sourceTexture),r.deleteTexture(l.targetTexture),r.deleteFramebuffer(u),e.getContext("2d").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,o,c,s,e){var a=t.createTexture();return t.bindTexture(t.TEXTURE_2D,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),s?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,s):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,o,c,0,t.RGBA,t.UNSIGNED_BYTE,null),a},getCachedTexture:function(t,o){if(this.textureCache[t])return this.textureCache[t];var c=this.createTexture(this.gl,o.width,o.height,o);return this.textureCache[t]=c,c},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:De,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,o={renderer:"",vendor:""};if(!t)return o;var c=t.getExtension("WEBGL_debug_renderer_info");if(c){var s=t.getParameter(c.UNMASKED_RENDERER_WEBGL),e=t.getParameter(c.UNMASKED_VENDOR_WEBGL);s&&(o.renderer=s.toLowerCase()),e&&(o.vendor=e.toLowerCase())}return this.gpuInfo=o,o}}}();function de(f){var h=f.targetCanvas,t=h.width,o=h.height,c=f.destinationWidth,s=f.destinationHeight;(t!==c||o!==s)&&(h.width=c,h.height=s)}function De(f,h){var t=f.canvas,o=h.targetCanvas,c=o.getContext("2d");c.translate(0,o.height),c.scale(1,-1);var s=t.height-o.height;c.drawImage(t,0,s,o.width,o.height,0,0,o.width,o.height)}function ge(f,h){var t=h.targetCanvas,o=t.getContext("2d"),c=h.destinationWidth,s=h.destinationHeight,e=c*s*4,a=new Uint8Array(this.imageBuffer,0,e),r=new Uint8ClampedArray(this.imageBuffer,0,e);f.readPixels(0,0,c,s,f.RGBA,f.UNSIGNED_BYTE,a);var n=new ImageData(r,c,s);o.putImageData(n,0,0)}(function(){var f=function(){};V.Canvas2dFilterBackend=h;function h(){}h.prototype={evictCachesForKey:f,dispose:f,clearWebGLCaches:f,resources:{},applyFilters:function(t,o,c,s,e){var a=e.getContext("2d");a.drawImage(o,0,0,c,s);var r=a.getImageData(0,0,c,s),n=a.getImageData(0,0,c,s),l={sourceWidth:c,sourceHeight:s,imageData:r,originalEl:o,originalImageData:n,canvasEl:e,ctx:a,filterBackend:this};return t.forEach(function(u){u.applyTo(l)}),(l.imageData.width!==c||l.imageData.height!==s)&&(e.width=l.imageData.width,e.height=l.imageData.height),a.putImageData(l.imageData,0,0),l}}})(),V.Image=V.Image||{},V.Image.filters=V.Image.filters||{},V.Image.filters.BaseFilter=V.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(f){f&&this.setOptions(f)},setOptions:function(f){for(var h in f)this[h]=f[h]},createProgram:function(f,h,t){h=h||this.fragmentSource,t=t||this.vertexSource,V.webGlPrecision!=="highp"&&(h=h.replace(/precision highp float/g,"precision "+V.webGlPrecision+" float"));var o=f.createShader(f.VERTEX_SHADER);if(f.shaderSource(o,t),f.compileShader(o),!f.getShaderParameter(o,f.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+f.getShaderInfoLog(o));var c=f.createShader(f.FRAGMENT_SHADER);if(f.shaderSource(c,h),f.compileShader(c),!f.getShaderParameter(c,f.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+f.getShaderInfoLog(c));var s=f.createProgram();if(f.attachShader(s,o),f.attachShader(s,c),f.linkProgram(s),!f.getProgramParameter(s,f.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+f.getProgramInfoLog(s));var e=this.getAttributeLocations(f,s),a=this.getUniformLocations(f,s)||{};return a.uStepW=f.getUniformLocation(s,"uStepW"),a.uStepH=f.getUniformLocation(s,"uStepH"),{program:s,attributeLocations:e,uniformLocations:a}},getAttributeLocations:function(f,h){return{aPosition:f.getAttribLocation(h,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(f,h,t){var o=h.aPosition,c=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,c),f.enableVertexAttribArray(o),f.vertexAttribPointer(o,2,f.FLOAT,!1,0,0),f.bufferData(f.ARRAY_BUFFER,t,f.STATIC_DRAW)},_setupFrameBuffer:function(f){var h=f.context,t,o;f.passes>1?(t=f.destinationWidth,o=f.destinationHeight,(f.sourceWidth!==t||f.sourceHeight!==o)&&(h.deleteTexture(f.targetTexture),f.targetTexture=f.filterBackend.createTexture(h,t,o)),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,f.targetTexture,0)):(h.bindFramebuffer(h.FRAMEBUFFER,null),h.finish())},_swapTextures:function(f){f.passes--,f.pass++;var h=f.targetTexture;f.targetTexture=f.sourceTexture,f.sourceTexture=h},isNeutralState:function(){var f=this.mainParameter,h=V.Image.filters[this.type].prototype;if(f)if(Array.isArray(h[f])){for(var t=h[f].length;t--;)if(this[f][t]!==h[f][t])return!1;return!0}else return h[f]===this[f];else return!1},applyTo:function(f){f.webgl?(this._setupFrameBuffer(f),this.applyToWebGL(f),this._swapTextures(f)):this.applyTo2d(f)},retrieveShader:function(f){return f.programCache.hasOwnProperty(this.type)||(f.programCache[this.type]=this.createProgram(f.context)),f.programCache[this.type]},applyToWebGL:function(f){var h=f.context,t=this.retrieveShader(f);f.pass===0&&f.originalTexture?h.bindTexture(h.TEXTURE_2D,f.originalTexture):h.bindTexture(h.TEXTURE_2D,f.sourceTexture),h.useProgram(t.program),this.sendAttributeData(h,t.attributeLocations,f.aPosition),h.uniform1f(t.uniformLocations.uStepW,1/f.sourceWidth),h.uniform1f(t.uniformLocations.uStepH,1/f.sourceHeight),this.sendUniformData(h,t.uniformLocations),h.viewport(0,0,f.destinationWidth,f.destinationHeight),h.drawArrays(h.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(f,h,t){f.activeTexture(t),f.bindTexture(f.TEXTURE_2D,h),f.activeTexture(f.TEXTURE0)},unbindAdditionalTexture:function(f,h){f.activeTexture(h),f.bindTexture(f.TEXTURE_2D,null),f.activeTexture(f.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(f){this[this.mainParameter]=f},sendUniformData:function(){},createHelpLayer:function(f){if(!f.helpLayer){var h=document.createElement("canvas");h.width=f.sourceWidth,h.height=f.sourceHeight,f.helpLayer=h}},toObject:function(){var f={type:this.type},h=this.mainParameter;return h&&(f[h]=this[h]),f},toJSON:function(){return this.toObject()}}),V.Image.filters.BaseFilter.fromObject=function(f,h){var t=new V.Image.filters[f.type](f);return h&&h(t),t},function(f){var h=f.fabric||(f.fabric={}),t=h.Image.filters,o=h.util.createClass;t.ColorMatrix=o(t.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(c){this.callSuper("initialize",c),this.matrix=this.matrix.slice(0)},applyTo2d:function(c){var s=c.imageData,e=s.data,a=e.length,r=this.matrix,n,l,u,d,i,g=this.colorsOnly;for(i=0;i<a;i+=4)n=e[i],l=e[i+1],u=e[i+2],g?(e[i]=n*r[0]+l*r[1]+u*r[2]+r[4]*255,e[i+1]=n*r[5]+l*r[6]+u*r[7]+r[9]*255,e[i+2]=n*r[10]+l*r[11]+u*r[12]+r[14]*255):(d=e[i+3],e[i]=n*r[0]+l*r[1]+u*r[2]+d*r[3]+r[4]*255,e[i+1]=n*r[5]+l*r[6]+u*r[7]+d*r[8]+r[9]*255,e[i+2]=n*r[10]+l*r[11]+u*r[12]+d*r[13]+r[14]*255,e[i+3]=n*r[15]+l*r[16]+u*r[17]+d*r[18]+r[19]*255)},getUniformLocations:function(c,s){return{uColorMatrix:c.getUniformLocation(s,"uColorMatrix"),uConstants:c.getUniformLocation(s,"uConstants")}},sendUniformData:function(c,s){var e=this.matrix,a=[e[0],e[1],e[2],e[3],e[5],e[6],e[7],e[8],e[10],e[11],e[12],e[13],e[15],e[16],e[17],e[18]],r=[e[4],e[9],e[14],e[19]];c.uniformMatrix4fv(s.uColorMatrix,!1,a),c.uniform4fv(s.uConstants,r)}}),h.Image.filters.ColorMatrix.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.Image.filters,o=h.util.createClass;t.Brightness=o(t.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(c){if(this.brightness!==0){var s=c.imageData,e=s.data,a,r=e.length,n=Math.round(this.brightness*255);for(a=0;a<r;a+=4)e[a]=e[a]+n,e[a+1]=e[a+1]+n,e[a+2]=e[a+2]+n}},getUniformLocations:function(c,s){return{uBrightness:c.getUniformLocation(s,"uBrightness")}},sendUniformData:function(c,s){c.uniform1f(s.uBrightness,this.brightness)}}),h.Image.filters.Brightness.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.util.object.extend,o=h.Image.filters,c=h.util.createClass;o.Convolute=c(o.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(s){var e=Math.sqrt(this.matrix.length),a=this.type+"_"+e+"_"+(this.opaque?1:0),r=this.fragmentSource[a];return s.programCache.hasOwnProperty(a)||(s.programCache[a]=this.createProgram(s.context,r)),s.programCache[a]},applyTo2d:function(s){var e=s.imageData,a=e.data,r=this.matrix,n=Math.round(Math.sqrt(r.length)),l=Math.floor(n/2),u=e.width,d=e.height,i=s.ctx.createImageData(u,d),g=i.data,x=this.opaque?1:0,m,A,k,v,_,K,M,j,O,T,R,y,p;for(R=0;R<d;R++)for(T=0;T<u;T++){for(_=(R*u+T)*4,m=0,A=0,k=0,v=0,p=0;p<n;p++)for(y=0;y<n;y++)M=R+p-l,K=T+y-l,!(M<0||M>=d||K<0||K>=u)&&(j=(M*u+K)*4,O=r[p*n+y],m+=a[j]*O,A+=a[j+1]*O,k+=a[j+2]*O,x||(v+=a[j+3]*O));g[_]=m,g[_+1]=A,g[_+2]=k,x?g[_+3]=a[_+3]:g[_+3]=v}s.imageData=i},getUniformLocations:function(s,e){return{uMatrix:s.getUniformLocation(e,"uMatrix"),uOpaque:s.getUniformLocation(e,"uOpaque"),uHalfSize:s.getUniformLocation(e,"uHalfSize"),uSize:s.getUniformLocation(e,"uSize")}},sendUniformData:function(s,e){s.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return t(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),h.Image.filters.Convolute.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.Image.filters,o=h.util.createClass;t.Grayscale=o(t.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(c){var s=c.imageData,e=s.data,a,r=e.length,n,l=this.mode;for(a=0;a<r;a+=4)l==="average"?n=(e[a]+e[a+1]+e[a+2])/3:l==="lightness"?n=(Math.min(e[a],e[a+1],e[a+2])+Math.max(e[a],e[a+1],e[a+2]))/2:l==="luminosity"&&(n=.21*e[a]+.72*e[a+1]+.07*e[a+2]),e[a]=n,e[a+1]=n,e[a+2]=n},retrieveShader:function(c){var s=this.type+"_"+this.mode;if(!c.programCache.hasOwnProperty(s)){var e=this.fragmentSource[this.mode];c.programCache[s]=this.createProgram(c.context,e)}return c.programCache[s]},getUniformLocations:function(c,s){return{uMode:c.getUniformLocation(s,"uMode")}},sendUniformData:function(c,s){var e=1;c.uniform1i(s.uMode,e)},isNeutralState:function(){return!1}}),h.Image.filters.Grayscale.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.Image.filters,o=h.util.createClass;t.Invert=o(t.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(c){var s=c.imageData,e=s.data,a,r=e.length;for(a=0;a<r;a+=4)e[a]=255-e[a],e[a+1]=255-e[a+1],e[a+2]=255-e[a+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(c,s){return{uInvert:c.getUniformLocation(s,"uInvert")}},sendUniformData:function(c,s){c.uniform1i(s.uInvert,this.invert)}}),h.Image.filters.Invert.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.util.object.extend,o=h.Image.filters,c=h.util.createClass;o.Noise=c(o.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(s){if(this.noise!==0){var e=s.imageData,a=e.data,r,n=a.length,l=this.noise,u;for(r=0,n=a.length;r<n;r+=4)u=(.5-Math.random())*l,a[r]+=u,a[r+1]+=u,a[r+2]+=u}},getUniformLocations:function(s,e){return{uNoise:s.getUniformLocation(e,"uNoise"),uSeed:s.getUniformLocation(e,"uSeed")}},sendUniformData:function(s,e){s.uniform1f(e.uNoise,this.noise/255),s.uniform1f(e.uSeed,Math.random())},toObject:function(){return t(this.callSuper("toObject"),{noise:this.noise})}}),h.Image.filters.Noise.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.Image.filters,o=h.util.createClass;t.Pixelate=o(t.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(c){var s=c.imageData,e=s.data,a=s.height,r=s.width,n,l,u,d,i,g,x,m,A,k,v;for(l=0;l<a;l+=this.blocksize)for(u=0;u<r;u+=this.blocksize)for(n=l*4*r+u*4,d=e[n],i=e[n+1],g=e[n+2],x=e[n+3],k=Math.min(l+this.blocksize,a),v=Math.min(u+this.blocksize,r),m=l;m<k;m++)for(A=u;A<v;A++)n=m*4*r+A*4,e[n]=d,e[n+1]=i,e[n+2]=g,e[n+3]=x},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(c,s){return{uBlocksize:c.getUniformLocation(s,"uBlocksize"),uStepW:c.getUniformLocation(s,"uStepW"),uStepH:c.getUniformLocation(s,"uStepH")}},sendUniformData:function(c,s){c.uniform1f(s.uBlocksize,this.blocksize)}}),h.Image.filters.Pixelate.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.util.object.extend,o=h.Image.filters,c=h.util.createClass;o.RemoveColor=c(o.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(s){var e=s.imageData,a=e.data,r,n=this.distance*255,l,u,d,i=new h.Color(this.color).getSource(),g=[i[0]-n,i[1]-n,i[2]-n],x=[i[0]+n,i[1]+n,i[2]+n];for(r=0;r<a.length;r+=4)l=a[r],u=a[r+1],d=a[r+2],l>g[0]&&u>g[1]&&d>g[2]&&l<x[0]&&u<x[1]&&d<x[2]&&(a[r+3]=0)},getUniformLocations:function(s,e){return{uLow:s.getUniformLocation(e,"uLow"),uHigh:s.getUniformLocation(e,"uHigh")}},sendUniformData:function(s,e){var a=new h.Color(this.color).getSource(),r=parseFloat(this.distance),n=[0+a[0]/255-r,0+a[1]/255-r,0+a[2]/255-r,1],l=[a[0]/255+r,a[1]/255+r,a[2]/255+r,1];s.uniform4fv(e.uLow,n),s.uniform4fv(e.uHigh,l)},toObject:function(){return t(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),h.Image.filters.RemoveColor.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.Image.filters,o=h.util.createClass,c={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var s in c)t[s]=o(t.ColorMatrix,{type:s,matrix:c[s],mainParameter:!1,colorsOnly:!0}),h.Image.filters[s].fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric,t=h.Image.filters,o=h.util.createClass;t.BlendColor=o(t.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(c){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[c]+`}
}`},retrieveShader:function(c){var s=this.type+"_"+this.mode,e;return c.programCache.hasOwnProperty(s)||(e=this.buildSource(this.mode),c.programCache[s]=this.createProgram(c.context,e)),c.programCache[s]},applyTo2d:function(c){var s=c.imageData,e=s.data,a=e.length,r,n,l,u,d,i,g,x=1-this.alpha;g=new h.Color(this.color).getSource(),r=g[0]*this.alpha,n=g[1]*this.alpha,l=g[2]*this.alpha;for(var m=0;m<a;m+=4)switch(u=e[m],d=e[m+1],i=e[m+2],this.mode){case"multiply":e[m]=u*r/255,e[m+1]=d*n/255,e[m+2]=i*l/255;break;case"screen":e[m]=255-(255-u)*(255-r)/255,e[m+1]=255-(255-d)*(255-n)/255,e[m+2]=255-(255-i)*(255-l)/255;break;case"add":e[m]=u+r,e[m+1]=d+n,e[m+2]=i+l;break;case"diff":case"difference":e[m]=Math.abs(u-r),e[m+1]=Math.abs(d-n),e[m+2]=Math.abs(i-l);break;case"subtract":e[m]=u-r,e[m+1]=d-n,e[m+2]=i-l;break;case"darken":e[m]=Math.min(u,r),e[m+1]=Math.min(d,n),e[m+2]=Math.min(i,l);break;case"lighten":e[m]=Math.max(u,r),e[m+1]=Math.max(d,n),e[m+2]=Math.max(i,l);break;case"overlay":e[m]=r<128?2*u*r/255:255-2*(255-u)*(255-r)/255,e[m+1]=n<128?2*d*n/255:255-2*(255-d)*(255-n)/255,e[m+2]=l<128?2*i*l/255:255-2*(255-i)*(255-l)/255;break;case"exclusion":e[m]=r+u-2*r*u/255,e[m+1]=n+d-2*n*d/255,e[m+2]=l+i-2*l*i/255;break;case"tint":e[m]=r+u*x,e[m+1]=n+d*x,e[m+2]=l+i*x}},getUniformLocations:function(c,s){return{uColor:c.getUniformLocation(s,"uColor")}},sendUniformData:function(c,s){var e=new h.Color(this.color).getSource();e[0]=this.alpha*e[0]/255,e[1]=this.alpha*e[1]/255,e[2]=this.alpha*e[2]/255,e[3]=this.alpha,c.uniform4fv(s.uColor,e)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),h.Image.filters.BlendColor.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric,t=h.Image.filters,o=h.util.createClass;t.BlendImage=o(t.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(c){var s=this.type+"_"+this.mode,e=this.fragmentSource[this.mode];return c.programCache.hasOwnProperty(s)||(c.programCache[s]=this.createProgram(c.context,e)),c.programCache[s]},applyToWebGL:function(c){var s=c.context,e=this.createTexture(c.filterBackend,this.image);this.bindAdditionalTexture(s,e,s.TEXTURE1),this.callSuper("applyToWebGL",c),this.unbindAdditionalTexture(s,s.TEXTURE1)},createTexture:function(c,s){return c.getCachedTexture(s.cacheKey,s._element)},calculateMatrix:function(){var c=this.image,s=c._element.width,e=c._element.height;return[1/c.scaleX,0,0,0,1/c.scaleY,0,-c.left/s,-c.top/e,1]},applyTo2d:function(c){var s=c.imageData,e=c.filterBackend.resources,a=s.data,r=a.length,n=s.width,l=s.height,u,d,i,g,x,m,A,k,v,_,K=this.image,M;e.blendImage||(e.blendImage=h.util.createCanvasElement()),v=e.blendImage,_=v.getContext("2d"),v.width!==n||v.height!==l?(v.width=n,v.height=l):_.clearRect(0,0,n,l),_.setTransform(K.scaleX,0,0,K.scaleY,K.left,K.top),_.drawImage(K._element,0,0,n,l),M=_.getImageData(0,0,n,l).data;for(var j=0;j<r;j+=4)switch(x=a[j],m=a[j+1],A=a[j+2],k=a[j+3],u=M[j],d=M[j+1],i=M[j+2],g=M[j+3],this.mode){case"multiply":a[j]=x*u/255,a[j+1]=m*d/255,a[j+2]=A*i/255,a[j+3]=k*g/255;break;case"mask":a[j+3]=g;break}},getUniformLocations:function(c,s){return{uTransformMatrix:c.getUniformLocation(s,"uTransformMatrix"),uImage:c.getUniformLocation(s,"uImage")}},sendUniformData:function(c,s){var e=this.calculateMatrix();c.uniform1i(s.uImage,1),c.uniformMatrix3fv(s.uTransformMatrix,!1,e)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),h.Image.filters.BlendImage.fromObject=function(c,s){h.Image.fromObject(c.image,function(e){var a=h.util.object.clone(c);a.image=e,s(new h.Image.filters.BlendImage(a))})}}(Me),function(f){var h=f.fabric||(f.fabric={}),t=Math.pow,o=Math.floor,c=Math.sqrt,s=Math.abs,e=Math.round,a=Math.sin,r=Math.ceil,n=h.Image.filters,l=h.util.createClass;n.Resize=l(n.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(u,d){return{uDelta:u.getUniformLocation(d,"uDelta"),uTaps:u.getUniformLocation(d,"uTaps")}},sendUniformData:function(u,d){u.uniform2fv(d.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),u.uniform1fv(d.uTaps,this.taps)},retrieveShader:function(u){var d=this.getFilterWindow(),i=this.type+"_"+d;if(!u.programCache.hasOwnProperty(i)){var g=this.generateShader(d);u.programCache[i]=this.createProgram(u.context,g)}return u.programCache[i]},getFilterWindow:function(){var u=this.tempScale;return Math.ceil(this.lanczosLobes/u)},getTaps:function(){for(var u=this.lanczosCreate(this.lanczosLobes),d=this.tempScale,i=this.getFilterWindow(),g=new Array(i),x=1;x<=i;x++)g[x-1]=u(x*d);return g},generateShader:function(g){for(var d=new Array(g),i=this.fragmentSourceTOP,g,x=1;x<=g;x++)d[x-1]=x+".0 * uDelta";return i+="uniform float uTaps["+g+`];
`,i+=`void main() {
`,i+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,i+=`  float sum = 1.0;
`,d.forEach(function(m,A){i+="  color += texture2D(uTexture, vTexCoord + "+m+") * uTaps["+A+`];
`,i+="  color += texture2D(uTexture, vTexCoord - "+m+") * uTaps["+A+`];
`,i+="  sum += 2.0 * uTaps["+A+`];
`}),i+=`  gl_FragColor = color / sum;
`,i+="}",i},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(u){u.webgl?(u.passes++,this.width=u.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=u.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),u.destinationWidth=this.dW,this._setupFrameBuffer(u),this.applyToWebGL(u),this._swapTextures(u),u.sourceWidth=u.destinationWidth,this.height=u.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),u.destinationHeight=this.dH,this._setupFrameBuffer(u),this.applyToWebGL(u),this._swapTextures(u),u.sourceHeight=u.destinationHeight):this.applyTo2d(u)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(u){return function(d){if(d>=u||d<=-u)return 0;if(d<11920929e-14&&d>-11920929e-14)return 1;d*=Math.PI;var i=d/u;return a(d)/d*a(i)/i}},applyTo2d:function(u){var d=u.imageData,i=this.scaleX,g=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/g;var x=d.width,m=d.height,A=e(x*i),k=e(m*g),v;this.resizeType==="sliceHack"?v=this.sliceByTwo(u,x,m,A,k):this.resizeType==="hermite"?v=this.hermiteFastResize(u,x,m,A,k):this.resizeType==="bilinear"?v=this.bilinearFiltering(u,x,m,A,k):this.resizeType==="lanczos"&&(v=this.lanczosResize(u,x,m,A,k)),u.imageData=v},sliceByTwo:function(u,d,i,g,x){var m=u.imageData,A=.5,k=!1,v=!1,_=d*A,K=i*A,M=h.filterBackend.resources,j,O,T=0,R=0,y=d,p=0;for(M.sliceByTwo||(M.sliceByTwo=document.createElement("canvas")),j=M.sliceByTwo,(j.width<d*1.5||j.height<i)&&(j.width=d*1.5,j.height=i),O=j.getContext("2d"),O.clearRect(0,0,d*1.5,i),O.putImageData(m,0,0),g=o(g),x=o(x);!k||!v;)d=_,i=K,g<o(_*A)?_=o(_*A):(_=g,k=!0),x<o(K*A)?K=o(K*A):(K=x,v=!0),O.drawImage(j,T,R,d,i,y,p,_,K),T=y,R=p,p+=K;return O.getImageData(T,R,g,x)},lanczosResize:function(u,d,i,g,x){function m(E){var S,F,C,b,D,U,X,G,Y,N,I;for(p.x=(E+.5)*K,P.x=o(p.x),S=0;S<x;S++){for(p.y=(S+.5)*M,P.y=o(p.y),D=0,U=0,X=0,G=0,Y=0,F=P.x-T;F<=P.x+T;F++)if(!(F<0||F>=d)){N=o(1e3*s(F-p.x)),y[N]||(y[N]={});for(var L=P.y-R;L<=P.y+R;L++)L<0||L>=i||(I=o(1e3*s(L-p.y)),y[N][I]||(y[N][I]=_(c(t(N*j,2)+t(I*O,2))/1e3)),C=y[N][I],C>0&&(b=(L*d+F)*4,D+=C,U+=C*A[b],X+=C*A[b+1],G+=C*A[b+2],Y+=C*A[b+3]))}b=(S*g+E)*4,v[b]=U/D,v[b+1]=X/D,v[b+2]=G/D,v[b+3]=Y/D}return++E<g?m(E):k}var A=u.imageData.data,k=u.ctx.createImageData(g,x),v=k.data,_=this.lanczosCreate(this.lanczosLobes),K=this.rcpScaleX,M=this.rcpScaleY,j=2/this.rcpScaleX,O=2/this.rcpScaleY,T=r(K*this.lanczosLobes/2),R=r(M*this.lanczosLobes/2),y={},p={},P={};return m(0)},bilinearFiltering:function(u,d,i,g,x){var m,A,k,v,_,K,M,j,O,T,R,y,p=0,P,E=this.rcpScaleX,S=this.rcpScaleY,F=4*(d-1),C=u.imageData,b=C.data,D=u.ctx.createImageData(g,x),U=D.data;for(M=0;M<x;M++)for(j=0;j<g;j++)for(_=o(E*j),K=o(S*M),O=E*j-_,T=S*M-K,P=4*(K*d+_),R=0;R<4;R++)m=b[P+R],A=b[P+4+R],k=b[P+F+R],v=b[P+F+4+R],y=m*(1-O)*(1-T)+A*O*(1-T)+k*T*(1-O)+v*O*T,U[p++]=y;return D},hermiteFastResize:function(u,d,i,g,x){for(var m=this.rcpScaleX,A=this.rcpScaleY,k=r(m/2),v=r(A/2),_=u.imageData,K=_.data,M=u.ctx.createImageData(g,x),j=M.data,O=0;O<x;O++)for(var T=0;T<g;T++){for(var R=(T+O*g)*4,y=0,p=0,P=0,E=0,S=0,F=0,C=0,b=(O+.5)*A,D=o(O*A);D<(O+1)*A;D++)for(var U=s(b-(D+.5))/v,X=(T+.5)*m,G=U*U,Y=o(T*m);Y<(T+1)*m;Y++){var N=s(X-(Y+.5))/k,I=c(G+N*N);I>1&&I<-1||(y=2*I*I*I-3*I*I+1,y>0&&(N=4*(Y+D*d),C+=y*K[N+3],P+=y,K[N+3]<255&&(y=y*K[N+3]/250),E+=y*K[N],S+=y*K[N+1],F+=y*K[N+2],p+=y))}j[R]=E/p,j[R+1]=S/p,j[R+2]=F/p,j[R+3]=C/P}return M},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),h.Image.filters.Resize.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.Image.filters,o=h.util.createClass;t.Contrast=o(t.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(c){if(this.contrast!==0){var s=c.imageData,e,r,a=s.data,r=a.length,n=Math.floor(this.contrast*255),l=259*(n+255)/(255*(259-n));for(e=0;e<r;e+=4)a[e]=l*(a[e]-128)+128,a[e+1]=l*(a[e+1]-128)+128,a[e+2]=l*(a[e+2]-128)+128}},getUniformLocations:function(c,s){return{uContrast:c.getUniformLocation(s,"uContrast")}},sendUniformData:function(c,s){c.uniform1f(s.uContrast,this.contrast)}}),h.Image.filters.Contrast.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.Image.filters,o=h.util.createClass;t.Saturation=o(t.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(c){if(this.saturation!==0){var s=c.imageData,e=s.data,a=e.length,r=-this.saturation,n,l;for(n=0;n<a;n+=4)l=Math.max(e[n],e[n+1],e[n+2]),e[n]+=l!==e[n]?(l-e[n])*r:0,e[n+1]+=l!==e[n+1]?(l-e[n+1])*r:0,e[n+2]+=l!==e[n+2]?(l-e[n+2])*r:0}},getUniformLocations:function(c,s){return{uSaturation:c.getUniformLocation(s,"uSaturation")}},sendUniformData:function(c,s){c.uniform1f(s.uSaturation,-this.saturation)}}),h.Image.filters.Saturation.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.Image.filters,o=h.util.createClass;t.Vibrance=o(t.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(c){if(this.vibrance!==0){var s=c.imageData,e=s.data,a=e.length,r=-this.vibrance,n,l,u,d;for(n=0;n<a;n+=4)l=Math.max(e[n],e[n+1],e[n+2]),u=(e[n]+e[n+1]+e[n+2])/3,d=Math.abs(l-u)*2/255*r,e[n]+=l!==e[n]?(l-e[n])*d:0,e[n+1]+=l!==e[n+1]?(l-e[n+1])*d:0,e[n+2]+=l!==e[n+2]?(l-e[n+2])*d:0}},getUniformLocations:function(c,s){return{uVibrance:c.getUniformLocation(s,"uVibrance")}},sendUniformData:function(c,s){c.uniform1f(s.uVibrance,-this.vibrance)}}),h.Image.filters.Vibrance.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.Image.filters,o=h.util.createClass;t.Blur=o(t.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(c){c.webgl?(this.aspectRatio=c.sourceWidth/c.sourceHeight,c.passes++,this._setupFrameBuffer(c),this.horizontal=!0,this.applyToWebGL(c),this._swapTextures(c),this._setupFrameBuffer(c),this.horizontal=!1,this.applyToWebGL(c),this._swapTextures(c)):this.applyTo2d(c)},applyTo2d:function(c){c.imageData=this.simpleBlur(c)},simpleBlur:function(c){var s=c.filterBackend.resources,e,a,r=c.imageData.width,n=c.imageData.height;s.blurLayer1||(s.blurLayer1=h.util.createCanvasElement(),s.blurLayer2=h.util.createCanvasElement()),e=s.blurLayer1,a=s.blurLayer2,(e.width!==r||e.height!==n)&&(a.width=e.width=r,a.height=e.height=n);var l=e.getContext("2d"),u=a.getContext("2d"),d=15,i,g,x,m,A=this.blur*.06*.5;for(l.putImageData(c.imageData,0,0),u.clearRect(0,0,r,n),m=-d;m<=d;m++)i=(Math.random()-.5)/4,g=m/d,x=A*g*r+i,u.globalAlpha=1-Math.abs(g),u.drawImage(e,x,i),l.drawImage(a,0,0),u.globalAlpha=1,u.clearRect(0,0,a.width,a.height);for(m=-d;m<=d;m++)i=(Math.random()-.5)/4,g=m/d,x=A*g*n+i,u.globalAlpha=1-Math.abs(g),u.drawImage(e,i,x),l.drawImage(a,0,0),u.globalAlpha=1,u.clearRect(0,0,a.width,a.height);c.ctx.drawImage(e,0,0);var k=c.ctx.getImageData(0,0,e.width,e.height);return l.globalAlpha=1,l.clearRect(0,0,e.width,e.height),k},getUniformLocations:function(c,s){return{delta:c.getUniformLocation(s,"uDelta")}},sendUniformData:function(c,s){var e=this.chooseRightDelta();c.uniform2fv(s.delta,e)},chooseRightDelta:function(){var c=1,s=[0,0],e;return this.horizontal?this.aspectRatio>1&&(c=1/this.aspectRatio):this.aspectRatio<1&&(c=this.aspectRatio),e=c*this.blur*.12,this.horizontal?s[0]=e:s[1]=e,s}}),t.Blur.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.Image.filters,o=h.util.createClass;t.Gamma=o(t.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(c){this.gamma=[1,1,1],t.BaseFilter.prototype.initialize.call(this,c)},applyTo2d:function(c){var s=c.imageData,e=s.data,a=this.gamma,r=e.length,n=1/a[0],l=1/a[1],u=1/a[2],d;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),d=0,r=256;d<r;d++)this.rVals[d]=Math.pow(d/255,n)*255,this.gVals[d]=Math.pow(d/255,l)*255,this.bVals[d]=Math.pow(d/255,u)*255;for(d=0,r=e.length;d<r;d+=4)e[d]=this.rVals[e[d]],e[d+1]=this.gVals[e[d+1]],e[d+2]=this.bVals[e[d+2]]},getUniformLocations:function(c,s){return{uGamma:c.getUniformLocation(s,"uGamma")}},sendUniformData:function(c,s){c.uniform3fv(s.uGamma,this.gamma)}}),h.Image.filters.Gamma.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.Image.filters,o=h.util.createClass;t.Composed=o(t.BaseFilter,{type:"Composed",subFilters:[],initialize:function(c){this.callSuper("initialize",c),this.subFilters=this.subFilters.slice(0)},applyTo:function(c){c.passes+=this.subFilters.length-1,this.subFilters.forEach(function(s){s.applyTo(c)})},toObject:function(){return h.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(c){return c.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(c){return!c.isNeutralState()})}}),h.Image.filters.Composed.fromObject=function(c,s){var e=c.subFilters||[],a=e.map(function(n){return new h.Image.filters[n.type](n)}),r=new h.Image.filters.Composed({subFilters:a});return s&&s(r),r}}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.Image.filters,o=h.util.createClass;t.HueRotation=o(t.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var c=this.rotation*Math.PI,s=h.util.cos(c),e=h.util.sin(c),a=1/3,r=Math.sqrt(a)*e,n=1-s;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=s+n/3,this.matrix[1]=a*n-r,this.matrix[2]=a*n+r,this.matrix[5]=a*n+r,this.matrix[6]=s+a*n,this.matrix[7]=a*n-r,this.matrix[10]=a*n-r,this.matrix[11]=a*n+r,this.matrix[12]=s+a*n},isNeutralState:function(c){return this.calculateMatrix(),t.BaseFilter.prototype.isNeutralState.call(this,c)},applyTo:function(c){this.calculateMatrix(),t.BaseFilter.prototype.applyTo.call(this,c)}}),h.Image.filters.HueRotation.fromObject=h.Image.filters.BaseFilter.fromObject}(Me),function(f){var h=f.fabric||(f.fabric={}),t=h.util.object.clone;if(h.Text){h.warn("fabric.Text is already defined");return}var o="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");h.Text=h.util.createClass(h.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:h.Object.prototype.stateProperties.concat(o),cacheProperties:h.Object.prototype.cacheProperties.concat(o),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(c,s){this.styles=s?s.styles||{}:{},this.text=c,this.__skipDimension=!0,this.callSuper("initialize",s),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var c=this.path;c&&(c.segmentsInfo=h.util.getPathSegmentsInfo(c.path))},getMeasuringContext:function(){return h._measuringContext||(h._measuringContext=this.canvas&&this.canvas.contextCache||h.util.createCanvasElement().getContext("2d")),h._measuringContext},_splitText:function(){var c=this._splitTextIntoLines(this.text);return this.textLines=c.lines,this._textLines=c.graphemeLines,this._unwrappedTextLines=c._unwrappedLines,this._text=c.graphemeText,c},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var c,s,e,a,r,n,l,u=0,d=this._textLines.length;u<d;u++)if(!(this.textAlign!=="justify"&&(u===d-1||this.isEndOfWrapping(u)))&&(a=0,r=this._textLines[u],s=this.getLineWidth(u),s<this.width&&(l=this.textLines[u].match(this._reSpacesAndTabs)))){e=l.length,c=(this.width-s)/e;for(var i=0,g=r.length;i<=g;i++)n=this.__charBounds[u][i],this._reSpaceAndTab.test(r[i])?(n.width+=c,n.kernedWidth+=c,n.left+=a,a+=c):n.left+=a}},isEndOfWrapping:function(c){return c===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var c=this.callSuper("_getCacheCanvasDimensions"),s=this.fontSize;return c.width+=s*c.zoomX,c.height+=s*c.zoomY,c},_render:function(c){var s=this.path;s&&!s.isNotVisible()&&s._render(c),this._setTextStyles(c),this._renderTextLinesBackground(c),this._renderTextDecoration(c,"underline"),this._renderText(c),this._renderTextDecoration(c,"overline"),this._renderTextDecoration(c,"linethrough")},_renderText:function(c){this.paintFirst==="stroke"?(this._renderTextStroke(c),this._renderTextFill(c)):(this._renderTextFill(c),this._renderTextStroke(c))},_setTextStyles:function(c,s,e){if(c.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":c.textBaseline="middle";break;case"ascender":c.textBaseline="top";break;case"descender":c.textBaseline="bottom";break}c.font=this._getFontDeclaration(s,e)},calcTextWidth:function(){for(var c=this.getLineWidth(0),s=1,e=this._textLines.length;s<e;s++){var a=this.getLineWidth(s);a>c&&(c=a)}return c},_renderTextLine:function(c,s,e,a,r,n){this._renderChars(c,s,e,a,r,n)},_renderTextLinesBackground:function(c){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var s,e,a=c.fillStyle,r,n,l=this._getLeftOffset(),u=this._getTopOffset(),d=0,i=0,g,x,m=this.path,A,k=0,v=this._textLines.length;k<v;k++){if(s=this.getHeightOfLine(k),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",k)){u+=s;continue}r=this._textLines[k],e=this._getLineLeftOffset(k),i=0,d=0,n=this.getValueOfPropertyAt(k,0,"textBackgroundColor");for(var _=0,K=r.length;_<K;_++)g=this.__charBounds[k][_],x=this.getValueOfPropertyAt(k,_,"textBackgroundColor"),m?(c.save(),c.translate(g.renderLeft,g.renderTop),c.rotate(g.angle),c.fillStyle=x,x&&c.fillRect(-g.width/2,-s/this.lineHeight*(1-this._fontSizeFraction),g.width,s/this.lineHeight),c.restore()):x!==n?(A=l+e+d,this.direction==="rtl"&&(A=this.width-A-i),c.fillStyle=n,n&&c.fillRect(A,u,i,s/this.lineHeight),d=g.left,i=g.width,n=x):i+=g.kernedWidth;x&&!m&&(A=l+e+d,this.direction==="rtl"&&(A=this.width-A-i),c.fillStyle=x,c.fillRect(A,u,i,s/this.lineHeight)),u+=s}c.fillStyle=a,this._removeShadow(c)}},getFontCache:function(c){var s=c.fontFamily.toLowerCase();h.charWidthsCache[s]||(h.charWidthsCache[s]={});var e=h.charWidthsCache[s],a=c.fontStyle.toLowerCase()+"_"+(c.fontWeight+"").toLowerCase();return e[a]||(e[a]={}),e[a]},_measureChar:function(c,s,e,a){var r=this.getFontCache(s),n=this._getFontDeclaration(s),l=this._getFontDeclaration(a),u=e+c,d=n===l,i,g,x,m=s.fontSize/this.CACHE_FONT_SIZE,A;if(e&&r[e]!==void 0&&(x=r[e]),r[c]!==void 0&&(A=i=r[c]),d&&r[u]!==void 0&&(g=r[u],A=g-x),i===void 0||x===void 0||g===void 0){var k=this.getMeasuringContext();this._setTextStyles(k,s,!0)}return i===void 0&&(A=i=k.measureText(c).width,r[c]=i),x===void 0&&d&&e&&(x=k.measureText(e).width,r[e]=x),d&&g===void 0&&(g=k.measureText(u).width,r[u]=g,A=g-x),{width:i*m,kernedWidth:A*m}},getHeightOfChar:function(c,s){return this.getValueOfPropertyAt(c,s,"fontSize")},measureLine:function(c){var s=this._measureLine(c);return this.charSpacing!==0&&(s.width-=this._getWidthOfCharSpacing()),s.width<0&&(s.width=0),s},_measureLine:function(c){var s=0,e,a,r=this._textLines[c],n,l,u=0,d=new Array(r.length),i=0,g,x,m=this.path,A=this.pathSide==="right";for(this.__charBounds[c]=d,e=0;e<r.length;e++)a=r[e],l=this._getGraphemeBox(a,c,e,n),d[e]=l,s+=l.kernedWidth,n=a;if(d[e]={left:l?l.left+l.width:0,width:0,kernedWidth:0,height:this.fontSize},m){switch(x=m.segmentsInfo[m.segmentsInfo.length-1].length,g=h.util.getPointOnPath(m.path,0,m.segmentsInfo),g.x+=m.pathOffset.x,g.y+=m.pathOffset.y,this.textAlign){case"left":i=A?x-s:0;break;case"center":i=(x-s)/2;break;case"right":i=A?0:x-s;break}for(i+=this.pathStartOffset*(A?-1:1),e=A?r.length-1:0;A?e>=0:e<r.length;A?e--:e++)l=d[e],i>x?i%=x:i<0&&(i+=x),this._setGraphemeOnPath(i,l,g),i+=l.kernedWidth}return{width:s,numOfSpaces:u}},_setGraphemeOnPath:function(c,s,e){var a=c+s.kernedWidth/2,r=this.path,n=h.util.getPointOnPath(r.path,a,r.segmentsInfo);s.renderLeft=n.x-e.x,s.renderTop=n.y-e.y,s.angle=n.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(c,s,e,a,r){var n=this.getCompleteStyleDeclaration(s,e),l=a?this.getCompleteStyleDeclaration(s,e-1):{},u=this._measureChar(c,n,a,l),d=u.kernedWidth,i=u.width,g;this.charSpacing!==0&&(g=this._getWidthOfCharSpacing(),i+=g,d+=g);var x={width:i,left:0,height:n.fontSize,kernedWidth:d,deltaY:n.deltaY};if(e>0&&!r){var m=this.__charBounds[s][e-1];x.left=m.left+m.width+u.kernedWidth-u.width}return x},getHeightOfLine:function(c){if(this.__lineHeights[c])return this.__lineHeights[c];for(var s=this._textLines[c],e=this.getHeightOfChar(c,0),a=1,r=s.length;a<r;a++)e=Math.max(this.getHeightOfChar(c,a),e);return this.__lineHeights[c]=e*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var c,s=0,e=0,a=this._textLines.length;e<a;e++)c=this.getHeightOfLine(e),s+=e===a-1?c/this.lineHeight:c;return s},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(c,s){c.save();for(var e=0,a=this._getLeftOffset(),r=this._getTopOffset(),n=0,l=this._textLines.length;n<l;n++){var u=this.getHeightOfLine(n),d=u/this.lineHeight,i=this._getLineLeftOffset(n);this._renderTextLine(s,c,this._textLines[n],a+i,r+e+d,n),e+=u}c.restore()},_renderTextFill:function(c){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(c,"fillText")},_renderTextStroke:function(c){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(c),c.save(),this._setLineDash(c,this.strokeDashArray),c.beginPath(),this._renderTextCommon(c,"strokeText"),c.closePath(),c.restore())},_renderChars:function(c,s,e,a,r,n){var l=this.getHeightOfLine(n),u=this.textAlign.indexOf("justify")!==-1,d,i,g="",x,m=0,A,k=this.path,v=!u&&this.charSpacing===0&&this.isEmptyStyles(n)&&!k,_=this.direction==="ltr",K=this.direction==="ltr"?1:-1,M,j=s.canvas.getAttribute("dir");if(s.save(),j!==this.direction&&(s.canvas.setAttribute("dir",_?"ltr":"rtl"),s.direction=_?"ltr":"rtl",s.textAlign=_?"left":"right"),r-=l*this._fontSizeFraction/this.lineHeight,v){this._renderChar(c,s,n,0,e.join(""),a,r,l),s.restore();return}for(var O=0,T=e.length-1;O<=T;O++)A=O===T||this.charSpacing||k,g+=e[O],x=this.__charBounds[n][O],m===0?(a+=K*(x.kernedWidth-x.width),m+=x.width):m+=x.kernedWidth,u&&!A&&this._reSpaceAndTab.test(e[O])&&(A=!0),A||(d=d||this.getCompleteStyleDeclaration(n,O),i=this.getCompleteStyleDeclaration(n,O+1),A=h.util.hasStyleChanged(d,i,!1)),A&&(k?(s.save(),s.translate(x.renderLeft,x.renderTop),s.rotate(x.angle),this._renderChar(c,s,n,O,g,-m/2,0,l),s.restore()):(M=a,this._renderChar(c,s,n,O,g,M,r,l)),g="",d=i,a+=K*m,m=0);s.restore()},_applyPatternGradientTransformText:function(c){var s=h.util.createCanvasElement(),e,a=this.width+this.strokeWidth,r=this.height+this.strokeWidth;return s.width=a,s.height=r,e=s.getContext("2d"),e.beginPath(),e.moveTo(0,0),e.lineTo(a,0),e.lineTo(a,r),e.lineTo(0,r),e.closePath(),e.translate(a/2,r/2),e.fillStyle=c.toLive(e),this._applyPatternGradientTransform(e,c),e.fill(),e.createPattern(s,"no-repeat")},handleFiller:function(c,s,e){var a,r;return e.toLive?e.gradientUnits==="percentage"||e.gradientTransform||e.patternTransform?(a=-this.width/2,r=-this.height/2,c.translate(a,r),c[s]=this._applyPatternGradientTransformText(e),{offsetX:a,offsetY:r}):(c[s]=e.toLive(c,this),this._applyPatternGradientTransform(c,e)):(c[s]=e,{offsetX:0,offsetY:0})},_setStrokeStyles:function(c,s){return c.lineWidth=s.strokeWidth,c.lineCap=this.strokeLineCap,c.lineDashOffset=this.strokeDashOffset,c.lineJoin=this.strokeLineJoin,c.miterLimit=this.strokeMiterLimit,this.handleFiller(c,"strokeStyle",s.stroke)},_setFillStyles:function(c,s){return this.handleFiller(c,"fillStyle",s.fill)},_renderChar:function(c,s,e,a,r,n,l){var u=this._getStyleDeclaration(e,a),d=this.getCompleteStyleDeclaration(e,a),i=c==="fillText"&&d.fill,g=c==="strokeText"&&d.stroke&&d.strokeWidth,x,m;!g&&!i||(s.save(),i&&(x=this._setFillStyles(s,d)),g&&(m=this._setStrokeStyles(s,d)),s.font=this._getFontDeclaration(d),u&&u.textBackgroundColor&&this._removeShadow(s),u&&u.deltaY&&(l+=u.deltaY),i&&s.fillText(r,n-x.offsetX,l-x.offsetY),g&&s.strokeText(r,n-m.offsetX,l-m.offsetY),s.restore())},setSuperscript:function(c,s){return this._setScript(c,s,this.superscript)},setSubscript:function(c,s){return this._setScript(c,s,this.subscript)},_setScript:function(c,s,e){var a=this.get2DCursorLocation(c,!0),r=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"fontSize"),n=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"deltaY"),l={fontSize:r*e.size,deltaY:n+r*e.baseline};return this.setSelectionStyles(l,c,s),this},_getLineLeftOffset:function(c){var s=this.getLineWidth(c),e=this.width-s,a=this.textAlign,r=this.direction,l,n=0,l=this.isEndOfWrapping(c);return a==="justify"||a==="justify-center"&&!l||a==="justify-right"&&!l||a==="justify-left"&&!l?0:(a==="center"&&(n=e/2),a==="right"&&(n=e),a==="justify-center"&&(n=e/2),a==="justify-right"&&(n=e),r==="rtl"&&(n-=e),n)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var c=this._forceClearCache;return c||(c=this.hasStateChanged("_dimensionAffectingProps")),c&&(this.dirty=!0,this._forceClearCache=!1),c},getLineWidth:function(c){if(this.__lineWidths[c]!==void 0)return this.__lineWidths[c];var s=this.measureLine(c),e=s.width;return this.__lineWidths[c]=e,e},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(c,s,e){var a=this._getStyleDeclaration(c,s);return a&&typeof a[e]<"u"?a[e]:this[e]},_renderTextDecoration:function(c,s){if(!(!this[s]&&!this.styleHas(s))){for(var e,a,r,n,l,u,d,i,g=this._getLeftOffset(),x=this._getTopOffset(),m,A,k,v,_,K,M,j,O=this.path,T=this._getWidthOfCharSpacing(),R=this.offsets[s],y=0,p=this._textLines.length;y<p;y++){if(e=this.getHeightOfLine(y),!this[s]&&!this.styleHas(s,y)){x+=e;continue}d=this._textLines[y],K=e/this.lineHeight,n=this._getLineLeftOffset(y),A=0,k=0,i=this.getValueOfPropertyAt(y,0,s),j=this.getValueOfPropertyAt(y,0,"fill"),m=x+K*(1-this._fontSizeFraction),a=this.getHeightOfChar(y,0),l=this.getValueOfPropertyAt(y,0,"deltaY");for(var P=0,E=d.length;P<E;P++)if(v=this.__charBounds[y][P],_=this.getValueOfPropertyAt(y,P,s),M=this.getValueOfPropertyAt(y,P,"fill"),r=this.getHeightOfChar(y,P),u=this.getValueOfPropertyAt(y,P,"deltaY"),O&&_&&M)c.save(),c.fillStyle=j,c.translate(v.renderLeft,v.renderTop),c.rotate(v.angle),c.fillRect(-v.kernedWidth/2,R*r+u,v.kernedWidth,this.fontSize/15),c.restore();else if((_!==i||M!==j||r!==a||u!==l)&&k>0){var S=g+n+A;this.direction==="rtl"&&(S=this.width-S-k),i&&j&&(c.fillStyle=j,c.fillRect(S,m+R*a+l,k,this.fontSize/15)),A=v.left,k=v.width,i=_,j=M,a=r,l=u}else k+=v.kernedWidth;var S=g+n+A;this.direction==="rtl"&&(S=this.width-S-k),c.fillStyle=M,_&&M&&c.fillRect(S,m+R*a+l,k-T,this.fontSize/15),x+=e}this._removeShadow(c)}},_getFontDeclaration:function(c,s){var e=c||this,a=this.fontFamily,r=h.Text.genericFonts.indexOf(a.toLowerCase())>-1,n=a===void 0||a.indexOf("'")>-1||a.indexOf(",")>-1||a.indexOf('"')>-1||r?e.fontFamily:'"'+e.fontFamily+'"';return[h.isLikelyNode?e.fontWeight:e.fontStyle,h.isLikelyNode?e.fontStyle:e.fontWeight,s?this.CACHE_FONT_SIZE+"px":e.fontSize+"px",n].join(" ")},render:function(c){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",c)))},_splitTextIntoLines:function(c){for(var s=c.split(this._reNewline),e=new Array(s.length),a=[`
`],r=[],n=0;n<s.length;n++)e[n]=h.util.string.graphemeSplit(s[n]),r=r.concat(e[n],a);return r.pop(),{_unwrappedLines:e,lines:s,graphemeText:r,graphemeLines:e}},toObject:function(c){var s=o.concat(c),e=this.callSuper("toObject",s);return e.styles=h.util.stylesToArray(this.styles,this.text),e.path&&(e.path=this.path.toObject()),e},set:function(c,s){this.callSuper("set",c,s);var e=!1,a=!1;if(typeof c=="object")for(var r in c)r==="path"&&this.setPathInfo(),e=e||this._dimensionAffectingProps.indexOf(r)!==-1,a=a||r==="path";else e=this._dimensionAffectingProps.indexOf(c)!==-1,a=c==="path";return a&&this.setPathInfo(),e&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),h.Text.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),h.Text.DEFAULT_SVG_FONT_SIZE=16,h.Text.fromElement=function(c,s,e){if(!c)return s(null);var a=h.parseAttributes(c,h.Text.ATTRIBUTE_NAMES),r=a.textAnchor||"left";if(e=h.util.object.extend(e?t(e):{},a),e.top=e.top||0,e.left=e.left||0,a.textDecoration){var n=a.textDecoration;n.indexOf("underline")!==-1&&(e.underline=!0),n.indexOf("overline")!==-1&&(e.overline=!0),n.indexOf("line-through")!==-1&&(e.linethrough=!0),delete e.textDecoration}"dx"in a&&(e.left+=a.dx),"dy"in a&&(e.top+=a.dy),"fontSize"in e||(e.fontSize=h.Text.DEFAULT_SVG_FONT_SIZE);var l="";"textContent"in c?l=c.textContent:"firstChild"in c&&c.firstChild!==null&&"data"in c.firstChild&&c.firstChild.data!==null&&(l=c.firstChild.data),l=l.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var u=e.strokeWidth;e.strokeWidth=0;var d=new h.Text(l,e),i=d.getScaledHeight()/d.height,g=(d.height+d.strokeWidth)*d.lineHeight-d.height,x=g*i,m=d.getScaledHeight()+x,A=0;r==="center"&&(A=d.getScaledWidth()/2),r==="right"&&(A=d.getScaledWidth()),d.set({left:d.left-A,top:d.top-(m-d.fontSize*(.07+d._fontSizeFraction))/d.lineHeight,strokeWidth:typeof u<"u"?u:1}),s(d)},h.Text.fromObject=function(c,s){var e=t(c),a=c.path;return delete e.path,h.Object._fromObject("Text",e,function(r){r.styles=h.util.stylesFromArray(c.styles,c.text),a?h.Object._fromObject("Path",a,function(n){r.set("path",n),s(r)},"path"):s(r)},"text")},h.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],h.util.createAccessors&&h.util.createAccessors(h.Text)}(Me),function(){V.util.object.extend(V.Text.prototype,{isEmptyStyles:function(f){if(!this.styles||typeof f<"u"&&!this.styles[f])return!0;var h=typeof f>"u"?this.styles:{line:this.styles[f]};for(var t in h)for(var o in h[t])for(var c in h[t][o])return!1;return!0},styleHas:function(f,h){if(!this.styles||!f||f===""||typeof h<"u"&&!this.styles[h])return!1;var t=typeof h>"u"?this.styles:{0:this.styles[h]};for(var o in t)for(var c in t[o])if(typeof t[o][c][f]<"u")return!0;return!1},cleanStyle:function(f){if(!this.styles||!f||f==="")return!1;var h=this.styles,t=0,o,c,s=!0,e=0,a;for(var r in h){o=0;for(var n in h[r]){var a=h[r][n],l=a.hasOwnProperty(f);t++,l?(c?a[f]!==c&&(s=!1):c=a[f],a[f]===this[f]&&delete a[f]):s=!1,Object.keys(a).length!==0?o++:delete h[r][n]}o===0&&delete h[r]}for(var u=0;u<this._textLines.length;u++)e+=this._textLines[u].length;s&&t===e&&(this[f]=c,this.removeStyle(f))},removeStyle:function(f){if(!(!this.styles||!f||f==="")){var h=this.styles,t,o,c;for(o in h){t=h[o];for(c in t)delete t[c][f],Object.keys(t[c]).length===0&&delete t[c];Object.keys(t).length===0&&delete h[o]}}},_extendStyles:function(f,h){var t=this.get2DCursorLocation(f);this._getLineStyle(t.lineIndex)||this._setLineStyle(t.lineIndex),this._getStyleDeclaration(t.lineIndex,t.charIndex)||this._setStyleDeclaration(t.lineIndex,t.charIndex,{}),V.util.object.extend(this._getStyleDeclaration(t.lineIndex,t.charIndex),h)},get2DCursorLocation:function(f,h){typeof f>"u"&&(f=this.selectionStart);for(var t=h?this._unwrappedTextLines:this._textLines,o=t.length,c=0;c<o;c++){if(f<=t[c].length)return{lineIndex:c,charIndex:f};f-=t[c].length+this.missingNewlineOffset(c)}return{lineIndex:c-1,charIndex:t[c-1].length<f?t[c-1].length:f}},getSelectionStyles:function(f,h,t){typeof f>"u"&&(f=this.selectionStart||0),typeof h>"u"&&(h=this.selectionEnd||f);for(var o=[],c=f;c<h;c++)o.push(this.getStyleAtPosition(c,t));return o},getStyleAtPosition:function(f,h){var t=this.get2DCursorLocation(f),o=h?this.getCompleteStyleDeclaration(t.lineIndex,t.charIndex):this._getStyleDeclaration(t.lineIndex,t.charIndex);return o||{}},setSelectionStyles:function(f,h,t){typeof h>"u"&&(h=this.selectionStart||0),typeof t>"u"&&(t=this.selectionEnd||h);for(var o=h;o<t;o++)this._extendStyles(o,f);return this._forceClearCache=!0,this},_getStyleDeclaration:function(f,h){var t=this.styles&&this.styles[f];return t?t[h]:null},getCompleteStyleDeclaration:function(f,h){for(var t=this._getStyleDeclaration(f,h)||{},o={},c,s=0;s<this._styleProperties.length;s++)c=this._styleProperties[s],o[c]=typeof t[c]>"u"?this[c]:t[c];return o},_setStyleDeclaration:function(f,h,t){this.styles[f][h]=t},_deleteStyleDeclaration:function(f,h){delete this.styles[f][h]},_getLineStyle:function(f){return!!this.styles[f]},_setLineStyle:function(f){this.styles[f]={}},_deleteLineStyle:function(f){delete this.styles[f]}})}(),function(){function f(h){h.textDecoration&&(h.textDecoration.indexOf("underline")>-1&&(h.underline=!0),h.textDecoration.indexOf("line-through")>-1&&(h.linethrough=!0),h.textDecoration.indexOf("overline")>-1&&(h.overline=!0),delete h.textDecoration)}V.IText=V.util.createClass(V.Text,V.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(h,t){this.callSuper("initialize",h,t),this.initBehavior()},setSelectionStart:function(h){h=Math.max(h,0),this._updateAndFire("selectionStart",h)},setSelectionEnd:function(h){h=Math.min(h,this.text.length),this._updateAndFire("selectionEnd",h)},_updateAndFire:function(h,t){this[h]!==t&&(this._fireSelectionChanged(),this[h]=t),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(h){this.clearContextTop(),this.callSuper("render",h),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(h){this.callSuper("_render",h)},clearContextTop:function(h){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var t=this.canvas.contextTop,o=this.canvas.viewportTransform;t.save(),t.transform(o[0],o[1],o[2],o[3],o[4],o[5]),this.transform(t),this._clearTextArea(t),h||t.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var h=this._getCursorBoundaries(),t=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(h,t):this.renderSelection(h,t),t.restore()}},_clearTextArea:function(h){var t=this.width+4,o=this.height+4;h.clearRect(-t/2,-o/2,t,o)},_getCursorBoundaries:function(h){typeof h>"u"&&(h=this.selectionStart);var t=this._getLeftOffset(),o=this._getTopOffset(),c=this._getCursorBoundariesOffsets(h);return{left:t,top:o,leftOffset:c.left,topOffset:c.top}},_getCursorBoundariesOffsets:function(h){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var t,o,c,s=0,e=0,a,r=this.get2DCursorLocation(h);c=r.charIndex,o=r.lineIndex;for(var n=0;n<o;n++)s+=this.getHeightOfLine(n);t=this._getLineLeftOffset(o);var l=this.__charBounds[o][c];return l&&(e=l.left),this.charSpacing!==0&&c===this._textLines[o].length&&(e-=this._getWidthOfCharSpacing()),a={top:s,left:t+(e>0?e:0)},this.direction==="rtl"&&(a.left*=-1),this.cursorOffsetCache=a,this.cursorOffsetCache},renderCursor:function(h,t){var o=this.get2DCursorLocation(),c=o.lineIndex,s=o.charIndex>0?o.charIndex-1:0,e=this.getValueOfPropertyAt(c,s,"fontSize"),a=this.scaleX*this.canvas.getZoom(),r=this.cursorWidth/a,n=h.topOffset,l=this.getValueOfPropertyAt(c,s,"deltaY");n+=(1-this._fontSizeFraction)*this.getHeightOfLine(c)/this.lineHeight-e*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(h,t),t.fillStyle=this.cursorColor||this.getValueOfPropertyAt(c,s,"fill"),t.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,t.fillRect(h.left+h.leftOffset-r/2,n+h.top+l,r,e)},renderSelection:function(h,t){for(var o=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,c=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,s=this.textAlign.indexOf("justify")!==-1,e=this.get2DCursorLocation(o),a=this.get2DCursorLocation(c),r=e.lineIndex,n=a.lineIndex,l=e.charIndex<0?0:e.charIndex,u=a.charIndex<0?0:a.charIndex,d=r;d<=n;d++){var i=this._getLineLeftOffset(d)||0,g=this.getHeightOfLine(d),x=0,m=0,A=0;if(d===r&&(m=this.__charBounds[r][l].left),d>=r&&d<n)A=s&&!this.isEndOfWrapping(d)?this.width:this.getLineWidth(d)||5;else if(d===n)if(u===0)A=this.__charBounds[n][u].left;else{var k=this._getWidthOfCharSpacing();A=this.__charBounds[n][u-1].left+this.__charBounds[n][u-1].width-k}x=g,(this.lineHeight<1||d===n&&this.lineHeight>1)&&(g/=this.lineHeight);var v=h.left+i+m,_=A-m,K=g,M=0;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",K=1,M=g):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(v=this.width-v-_),t.fillRect(v,h.top+h.topOffset+M,_,K),h.topOffset+=x}},getCurrentCharFontSize:function(){var h=this._getCurrentCharIndex();return this.getValueOfPropertyAt(h.l,h.c,"fontSize")},getCurrentCharColor:function(){var h=this._getCurrentCharIndex();return this.getValueOfPropertyAt(h.l,h.c,"fill")},_getCurrentCharIndex:function(){var h=this.get2DCursorLocation(this.selectionStart,!0),t=h.charIndex>0?h.charIndex-1:0;return{l:h.lineIndex,c:t}}}),V.IText.fromObject=function(h,t){var o=V.util.stylesFromArray(h.styles,h.text),c=Object.assign({},h,{styles:o});if(f(c),c.styles)for(var s in c.styles)for(var e in c.styles[s])f(c.styles[s][e]);V.Object._fromObject("IText",c,t,"text")}}(),function(){var f=V.util.object.clone;V.util.object.extend(V.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var h=this;this.on("added",function(){var t=h.canvas;t&&(t._hasITextHandlers||(t._hasITextHandlers=!0,h._initCanvasHandlers(t)),t._iTextInstances=t._iTextInstances||[],t._iTextInstances.push(h))})},initRemovedHandler:function(){var h=this;this.on("removed",function(){var t=h.canvas;t&&(t._iTextInstances=t._iTextInstances||[],V.util.removeFromArray(t._iTextInstances,h),t._iTextInstances.length===0&&(t._hasITextHandlers=!1,h._removeCanvasHandlers(t)))})},_initCanvasHandlers:function(h){h._mouseUpITextHandler=function(){h._iTextInstances&&h._iTextInstances.forEach(function(t){t.__isMousedown=!1})},h.on("mouse:up",h._mouseUpITextHandler)},_removeCanvasHandlers:function(h){h.off("mouse:up",h._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(h,t,o,c){var s;return s={isAborted:!1,abort:function(){this.isAborted=!0}},h.animate("_currentCursorOpacity",t,{duration:o,onComplete:function(){s.isAborted||h[c]()},onChange:function(){h.canvas&&h.selectionStart===h.selectionEnd&&h.renderCursorOrSelection()},abort:function(){return s.isAborted}}),s},_onTickComplete:function(){var h=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){h._currentTickCompleteState=h._animateCursor(h,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(h){var t=this,o=h?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){t._tick()},o)},abortCursorAnimation:function(){var h=this._currentTickState||this._currentTickCompleteState,t=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,h&&t&&t.clearContext(t.contextTop||t.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(h){var t=0,o=h-1;if(this._reSpace.test(this._text[o]))for(;this._reSpace.test(this._text[o]);)t++,o--;for(;/\S/.test(this._text[o])&&o>-1;)t++,o--;return h-t},findWordBoundaryRight:function(h){var t=0,o=h;if(this._reSpace.test(this._text[o]))for(;this._reSpace.test(this._text[o]);)t++,o++;for(;/\S/.test(this._text[o])&&o<this._text.length;)t++,o++;return h+t},findLineBoundaryLeft:function(h){for(var t=0,o=h-1;!/\n/.test(this._text[o])&&o>-1;)t++,o--;return h-t},findLineBoundaryRight:function(h){for(var t=0,o=h;!/\n/.test(this._text[o])&&o<this._text.length;)t++,o++;return h+t},searchWordBoundary:function(h,t){for(var o=this._text,c=this._reSpace.test(o[h])?h-1:h,s=o[c],e=V.reNonWord;!e.test(s)&&c>0&&c<o.length;)c+=t,s=o[c];return e.test(s)&&(c+=t===1?0:1),c},selectWord:function(h){h=h||this.selectionStart;var t=this.searchWordBoundary(h,-1),o=this.searchWordBoundary(h,1);this.selectionStart=t,this.selectionEnd=o,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(h){h=h||this.selectionStart;var t=this.findLineBoundaryLeft(h),o=this.findLineBoundaryRight(h);return this.selectionStart=t,this.selectionEnd=o,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(h){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(h),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(h){h._iTextInstances&&h._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(h){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var t=this.getSelectionStartFromPointer(h.e),o=this.selectionStart,c=this.selectionEnd;(t!==this.__selectionStartOnMouseDown||o===c)&&(o===t||c===t)||(t>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=t):(this.selectionStart=t,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==o||this.selectionEnd!==c)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(h,t,o){var c=o.slice(0,h),s=V.util.string.graphemeSplit(c).length;if(h===t)return{selectionStart:s,selectionEnd:s};var e=o.slice(h,t),a=V.util.string.graphemeSplit(e).length;return{selectionStart:s,selectionEnd:s+a}},fromGraphemeToStringSelection:function(h,t,o){var c=o.slice(0,h),s=c.join("").length;if(h===t)return{selectionStart:s,selectionEnd:s};var e=o.slice(h,t),a=e.join("").length;return{selectionStart:s,selectionEnd:s+a}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var h=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=h.selectionStart,this.hiddenTextarea.selectionEnd=h.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var h=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=h.selectionEnd,this.inCompositionMode||(this.selectionStart=h.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var h=this._calcTextareaPosition();this.hiddenTextarea.style.left=h.left,this.hiddenTextarea.style.top=h.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var h=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(h),o=this.get2DCursorLocation(h),c=o.lineIndex,s=o.charIndex,e=this.getValueOfPropertyAt(c,s,"fontSize")*this.lineHeight,a=t.leftOffset,r=this.calcTransformMatrix(),n={x:t.left+a,y:t.top+t.topOffset+e},l=this.canvas.getRetinaScaling(),u=this.canvas.upperCanvasEl,d=u.width/l,i=u.height/l,g=d-e,x=i-e,m=u.clientWidth/d,A=u.clientHeight/i;return n=V.util.transformPoint(n,r),n=V.util.transformPoint(n,this.canvas.viewportTransform),n.x*=m,n.y*=A,n.x<0&&(n.x=0),n.x>g&&(n.x=g),n.y<0&&(n.y=0),n.y>x&&(n.y=x),n.x+=this.canvas._offset.left,n.y+=this.canvas._offset.top,{left:n.x+"px",top:n.y+"px",fontSize:e+"px",charHeight:e}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var h=this._textBeforeEdit!==this.text,t=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),h&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),h&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var h in this.styles)this._textLines[h]||delete this.styles[h]},removeStyleFromTo:function(h,t){var o=this.get2DCursorLocation(h,!0),c=this.get2DCursorLocation(t,!0),s=o.lineIndex,e=o.charIndex,a=c.lineIndex,r=c.charIndex,n,l;if(s!==a){if(this.styles[s])for(n=e;n<this._unwrappedTextLines[s].length;n++)delete this.styles[s][n];if(this.styles[a])for(n=r;n<this._unwrappedTextLines[a].length;n++)l=this.styles[a][n],l&&(this.styles[s]||(this.styles[s]={}),this.styles[s][e+n-r]=l);for(n=s+1;n<=a;n++)delete this.styles[n];this.shiftLineStyles(a,s-a)}else if(this.styles[s]){l=this.styles[s];var u=r-e,d,i;for(n=e;n<r;n++)delete l[n];for(i in this.styles[s])d=parseInt(i,10),d>=r&&(l[d-u]=l[i],delete l[i])}},shiftLineStyles:function(h,t){var o=f(this.styles);for(var c in this.styles){var s=parseInt(c,10);s>h&&(this.styles[s+t]=o[s],o[s-t]||delete this.styles[s])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(h,t,o,c){var s,e={},a=!1,r=this._unwrappedTextLines[h].length===t;o||(o=1),this.shiftLineStyles(h,o),this.styles[h]&&(s=this.styles[h][t===0?t:t-1]);for(var n in this.styles[h]){var l=parseInt(n,10);l>=t&&(a=!0,e[l-t]=this.styles[h][n],r&&t===0||delete this.styles[h][n])}var u=!1;for(a&&!r&&(this.styles[h+o]=e,u=!0),u&&o--;o>0;)c&&c[o-1]?this.styles[h+o]={0:f(c[o-1])}:s?this.styles[h+o]={0:f(s)}:delete this.styles[h+o],o--;this._forceClearCache=!0},insertCharStyleObject:function(h,t,o,c){this.styles||(this.styles={});var s=this.styles[h],e=s?f(s):{};o||(o=1);for(var a in e){var r=parseInt(a,10);r>=t&&(s[r+o]=e[r],e[r-o]||delete s[r])}if(this._forceClearCache=!0,c){for(;o--;)Object.keys(c[o]).length&&(this.styles[h]||(this.styles[h]={}),this.styles[h][t+o]=f(c[o]));return}if(s)for(var n=s[t?t-1:1];n&&o--;)this.styles[h][t+o]=f(n)},insertNewStyleBlock:function(h,t,o){for(var c=this.get2DCursorLocation(t,!0),s=[0],e=0,a=0;a<h.length;a++)h[a]===`
`?(e++,s[e]=0):s[e]++;s[0]>0&&(this.insertCharStyleObject(c.lineIndex,c.charIndex,s[0],o),o=o&&o.slice(s[0]+1)),e&&this.insertNewlineStyleObject(c.lineIndex,c.charIndex+s[0],e);for(var a=1;a<e;a++)s[a]>0?this.insertCharStyleObject(c.lineIndex+a,0,s[a],o):o&&this.styles[c.lineIndex+a]&&o[0]&&(this.styles[c.lineIndex+a][0]=o[0]),o=o&&o.slice(s[a]+1);s[a]>0&&this.insertCharStyleObject(c.lineIndex+a,0,s[a],o)},setSelectionStartEndWithShift:function(h,t,o){o<=h?(t===h?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=h),this.selectionStart=o):o>h&&o<t?this._selectionDirection==="right"?this.selectionEnd=o:this.selectionStart=o:(t===h?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=t),this.selectionEnd=o)},setSelectionInBoundaries:function(){var h=this.text.length;this.selectionStart>h?this.selectionStart=h:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>h?this.selectionEnd=h:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),V.util.object.extend(V.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(f){if(this.canvas){this.__newClickTime=+new Date;var h=f.pointer;this.isTripleClick(h)&&(this.fire("tripleclick",f),this._stopEvent(f.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=h,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(f){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===f.x&&this.__lastPointer.y===f.y},_stopEvent:function(f){f.preventDefault&&f.preventDefault(),f.stopPropagation&&f.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(f){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(f.e))},tripleClickHandler:function(f){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(f.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(f.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(f){if(this.__isMousedown=!1,!(!this.editable||this.group||f.transform&&f.transform.actionPerformed||f.e.button&&f.e.button!==1)){if(this.canvas){var h=this.canvas._activeObject;if(h&&h!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(f.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(f){var h=this.getSelectionStartFromPointer(f),t=this.selectionStart,o=this.selectionEnd;f.shiftKey?this.setSelectionStartEndWithShift(t,o,h):(this.selectionStart=h,this.selectionEnd=h),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(f){for(var h=this.getLocalPointer(f),t=0,o=0,c=0,s=0,e=0,a,r,n=0,l=this._textLines.length;n<l&&c<=h.y;n++)c+=this.getHeightOfLine(n)*this.scaleY,e=n,n>0&&(s+=this._textLines[n-1].length+this.missingNewlineOffset(n-1));a=this._getLineLeftOffset(e),o=a*this.scaleX,r=this._textLines[e],this.direction==="rtl"&&(h.x=this.width*this.scaleX-h.x+o);for(var u=0,d=r.length;u<d&&(t=o,o+=this.__charBounds[e][u].kernedWidth*this.scaleX,o<=h.x);u++)s++;return this._getNewSelectionStartFromOffset(h,t,o,s,d)},_getNewSelectionStartFromOffset:function(f,h,t,o,c){var s=f.x-h,e=t-f.x,a=e>s||e<0?0:1,r=o+a;return this.flipX&&(r=c-r),r>this._text.length&&(r=this._text.length),r}}),V.util.object.extend(V.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=V.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var f=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+f.top+"; left: "+f.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+f.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):V.document.body.appendChild(this.hiddenTextarea),V.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),V.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),V.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),V.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),V.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),V.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),V.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),V.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),V.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(V.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(f){if(this.isEditing){var h=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(f.keyCode in h)this[h[f.keyCode]](f);else if(f.keyCode in this.ctrlKeysMapDown&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapDown[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),f.keyCode>=33&&f.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(f){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(f.keyCode in this.ctrlKeysMapUp&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapUp[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(f){var h=this.fromPaste;if(this.fromPaste=!1,f&&f.stopPropagation(),!!this.isEditing){var t=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,o=this._text.length,c=t.length,s,e,a=c-o,r=this.selectionStart,n=this.selectionEnd,l=r!==n,u,d,i;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var g=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),x=r>g.selectionStart;l?(s=this._text.slice(r,n),a+=n-r):c<o&&(x?s=this._text.slice(n+a,n):s=this._text.slice(r,r-a)),e=t.slice(g.selectionEnd-a,g.selectionEnd),s&&s.length&&(e.length&&(u=this.getSelectionStyles(r,r+1,!1),u=e.map(function(){return u[0]})),l?(d=r,i=n):x?(d=n-s.length,i=n):(d=n,i=n+s.length),this.removeStyleFromTo(d,i)),e.length&&(h&&e.join("")===V.copiedText&&!V.disableStyleCopyPaste&&(u=V.copiedTextStyle),this.insertNewStyleBlock(e,r,u)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(f){this.compositionStart=f.target.selectionStart,this.compositionEnd=f.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(V.copiedText=this.getSelectedText(),V.disableStyleCopyPaste?V.copiedTextStyle=null:V.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(f){return f&&f.clipboardData||V.window.clipboardData},_getWidthBeforeCursor:function(f,h){var t=this._getLineLeftOffset(f),o;return h>0&&(o=this.__charBounds[f][h-1],t+=o.left+o.width),t},getDownCursorOffset:function(f,h){var t=this._getSelectionForOffset(f,h),o=this.get2DCursorLocation(t),c=o.lineIndex;if(c===this._textLines.length-1||f.metaKey||f.keyCode===34)return this._text.length-t;var s=o.charIndex,e=this._getWidthBeforeCursor(c,s),a=this._getIndexOnLine(c+1,e),r=this._textLines[c].slice(s);return r.length+a+1+this.missingNewlineOffset(c)},_getSelectionForOffset:function(f,h){return f.shiftKey&&this.selectionStart!==this.selectionEnd&&h?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(f,h){var t=this._getSelectionForOffset(f,h),o=this.get2DCursorLocation(t),c=o.lineIndex;if(c===0||f.metaKey||f.keyCode===33)return-t;var s=o.charIndex,e=this._getWidthBeforeCursor(c,s),a=this._getIndexOnLine(c-1,e),r=this._textLines[c].slice(0,s),n=this.missingNewlineOffset(c-1);return-this._textLines[c-1].length+a-r.length+(1-n)},_getIndexOnLine:function(f,h){for(var t=this._textLines[f],o=this._getLineLeftOffset(f),c=o,s=0,e,a,r=0,n=t.length;r<n;r++)if(e=this.__charBounds[f][r].width,c+=e,c>h){a=!0;var l=c-e,u=c,d=Math.abs(l-h),i=Math.abs(u-h);s=i<d?r:r-1;break}return a||(s=t.length-1),s},moveCursorDown:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",f)},moveCursorUp:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",f)},_moveCursorUpOrDown:function(f,h){var t="get"+f+"CursorOffset",o=this[t](h,this._selectionDirection==="right");h.shiftKey?this.moveCursorWithShift(o):this.moveCursorWithoutShift(o),o!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(f){var h=this._selectionDirection==="left"?this.selectionStart+f:this.selectionEnd+f;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,h),f!==0},moveCursorWithoutShift:function(f){return f<0?(this.selectionStart+=f,this.selectionEnd=this.selectionStart):(this.selectionEnd+=f,this.selectionStart=this.selectionEnd),f!==0},moveCursorLeft:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",f)},_move:function(f,h,t){var o;if(f.altKey)o=this["findWordBoundary"+t](this[h]);else if(f.metaKey||f.keyCode===35||f.keyCode===36)o=this["findLineBoundary"+t](this[h]);else return this[h]+=t==="Left"?-1:1,!0;if(typeof o<"u"&&this[h]!==o)return this[h]=o,!0},_moveLeft:function(f,h){return this._move(f,h,"Left")},_moveRight:function(f,h){return this._move(f,h,"Right")},moveCursorLeftWithoutShift:function(f){var h=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(h=this._moveLeft(f,"selectionStart")),this.selectionEnd=this.selectionStart,h},moveCursorLeftWithShift:function(f){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(f,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(f,"selectionStart")},moveCursorRight:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",f)},_moveCursorLeftOrRight:function(f,h){var t="moveCursor"+f+"With";this._currentCursorOpacity=1,h.shiftKey?t+="Shift":t+="outShift",this[t](h)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(f){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(f,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(f,"selectionEnd")},moveCursorRightWithoutShift:function(f){var h=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(h=this._moveRight(f,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,h},removeChars:function(f,h){typeof h>"u"&&(h=f+1),this.removeStyleFromTo(f,h),this._text.splice(f,h-f),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(f,h,t,o){typeof o>"u"&&(o=t),o>t&&this.removeStyleFromTo(t,o);var c=V.util.string.graphemeSplit(f);this.insertNewStyleBlock(c,t,h),this._text=[].concat(this._text.slice(0,t),c,this._text.slice(o)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var f=V.util.toFixed,h=/  +/g;V.util.object.extend(V.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),o=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(o)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var o=!0,c=this.getSvgTextDecoration(this);return[t.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",c?'text-decoration="'+c+'" ':"",'style="',this.getSvgStyles(o),'"',this.addPaintOrder()," >",t.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(t,o){var c=[],s=[],e=t,a;this._setSVGBg(s);for(var r=0,n=this._textLines.length;r<n;r++)a=this._getLineLeftOffset(r),(this.textBackgroundColor||this.styleHas("textBackgroundColor",r))&&this._setSVGTextLineBg(s,r,o+a,e),this._setSVGTextLineText(c,r,o+a,e),e+=this.getHeightOfLine(r);return{textSpans:c,textBgRects:s}},_createTextCharSpan:function(t,o,c,s){var e=t!==t.trim()||t.match(h),a=this.getSvgSpanStyles(o,e),r=a?'style="'+a+'"':"",n=o.deltaY,l="",u=V.Object.NUM_FRACTION_DIGITS;return n&&(l=' dy="'+f(n,u)+'" '),['<tspan x="',f(c,u),'" y="',f(s,u),'" ',l,r,">",V.util.string.escapeXml(t),"</tspan>"].join("")},_setSVGTextLineText:function(t,o,c,s){var e=this.getHeightOfLine(o),a=this.textAlign.indexOf("justify")!==-1,r,n,l="",u,d,i=0,g=this._textLines[o],x;s+=e*(1-this._fontSizeFraction)/this.lineHeight;for(var m=0,A=g.length-1;m<=A;m++)x=m===A||this.charSpacing,l+=g[m],u=this.__charBounds[o][m],i===0?(c+=u.kernedWidth-u.width,i+=u.width):i+=u.kernedWidth,a&&!x&&this._reSpaceAndTab.test(g[m])&&(x=!0),x||(r=r||this.getCompleteStyleDeclaration(o,m),n=this.getCompleteStyleDeclaration(o,m+1),x=V.util.hasStyleChanged(r,n,!0)),x&&(d=this._getStyleDeclaration(o,m)||{},t.push(this._createTextCharSpan(l,d,c,s)),l="",r=n,c+=i,i=0)},_pushTextBgRect:function(t,o,c,s,e,a){var r=V.Object.NUM_FRACTION_DIGITS;t.push("		<rect ",this._getFillAttributes(o),' x="',f(c,r),'" y="',f(s,r),'" width="',f(e,r),'" height="',f(a,r),`"></rect>
`)},_setSVGTextLineBg:function(t,o,c,s){for(var e=this._textLines[o],a=this.getHeightOfLine(o)/this.lineHeight,r=0,n=0,l,u,d=this.getValueOfPropertyAt(o,0,"textBackgroundColor"),i=0,g=e.length;i<g;i++)l=this.__charBounds[o][i],u=this.getValueOfPropertyAt(o,i,"textBackgroundColor"),u!==d?(d&&this._pushTextBgRect(t,d,c+n,s,r,a),n=l.left,r=l.width,d=u):r+=l.kernedWidth;u&&this._pushTextBgRect(t,u,c+n,s,r,a)},_getFillAttributes:function(t){var o=t&&typeof t=="string"?new V.Color(t):"";return!o||!o.getSource()||o.getAlpha()===1?'fill="'+t+'"':'opacity="'+o.getAlpha()+'" fill="'+o.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(t){for(var o=0,c=0,s=0;s<t;s++)o+=this.getHeightOfLine(s);return c=this.getHeightOfLine(s),{lineTop:o,offset:(this._fontSizeMult-this._fontSizeFraction)*c/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){var o=V.Object.prototype.getSvgStyles.call(this,t);return o+" white-space: pre;"}})}(),function(f){var h=f.fabric||(f.fabric={});h.Textbox=h.util.createClass(h.IText,h.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:h.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(t){for(var o=0,c=0,s=0,e={},a=0;a<t.graphemeLines.length;a++)t.graphemeText[s]===`
`&&a>0?(c=0,s++,o++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[s])&&a>0&&(c++,s++),e[a]={line:o,offset:c},s+=t.graphemeLines[a].length,c+=t.graphemeLines[a].length;return e},styleHas:function(t,o){if(this._styleMap&&!this.isWrapping){var c=this._styleMap[o];c&&(o=c.line)}return h.Text.prototype.styleHas.call(this,t,o)},isEmptyStyles:function(t){if(!this.styles)return!0;var o=0,c=t+1,s,e,a=!1,r=this._styleMap[t],n=this._styleMap[t+1];r&&(t=r.line,o=r.offset),n&&(c=n.line,a=c===t,s=n.offset),e=typeof t>"u"?this.styles:{line:this.styles[t]};for(var l in e)for(var u in e[l])if(u>=o&&(!a||u<s))for(var d in e[l][u])return!1;return!0},_getStyleDeclaration:function(t,o){if(this._styleMap&&!this.isWrapping){var c=this._styleMap[t];if(!c)return null;t=c.line,o=c.offset+o}return this.callSuper("_getStyleDeclaration",t,o)},_setStyleDeclaration:function(t,o,c){var s=this._styleMap[t];t=s.line,o=s.offset+o,this.styles[t][o]=c},_deleteStyleDeclaration:function(t,o){var c=this._styleMap[t];t=c.line,o=c.offset+o,delete this.styles[t][o]},_getLineStyle:function(t){var o=this._styleMap[t];return!!this.styles[o.line]},_setLineStyle:function(t){var o=this._styleMap[t];this.styles[o.line]={}},_wrapText:function(t,o){var c=[],s;for(this.isWrapping=!0,s=0;s<t.length;s++)c=c.concat(this._wrapLine(t[s],s,o));return this.isWrapping=!1,c},_measureWord:function(t,o,c){var s=0,e,a=!0;c=c||0;for(var r=0,n=t.length;r<n;r++){var l=this._getGraphemeBox(t[r],o,r+c,e,a);s+=l.kernedWidth,e=t[r]}return s},_wrapLine:function(t,o,c,v){var e=0,a=this.splitByGrapheme,r=[],n=[],l=a?h.util.string.graphemeSplit(t):t.split(this._wordJoiners),u="",d=0,i=a?"":" ",g=0,x=0,m=0,A=!0,k=this._getWidthOfCharSpacing(),v=v||0;l.length===0&&l.push([]),c-=v;for(var _=0;_<l.length;_++)u=a?l[_]:h.util.string.graphemeSplit(l[_]),g=this._measureWord(u,o,d),d+=u.length,e+=x+g-k,e>c&&!A?(r.push(n),n=[],e=g,A=!0):e+=k,!A&&!a&&n.push(i),n=n.concat(u),x=a?0:this._measureWord([i],o,d),d++,A=!1,g>m&&(m=g);return _&&r.push(n),m+v>this.dynamicMinWidth&&(this.dynamicMinWidth=m-k+v),r},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1},_splitTextIntoLines:function(t){for(var o=h.Text.prototype._splitTextIntoLines.call(this,t),c=this._wrapText(o.lines,this.width),s=new Array(c.length),e=0;e<c.length;e++)s[e]=c[e].join("");return o.lines=s,o.graphemeLines=c,o},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t={};for(var o in this._styleMap)this._textLines[o]&&(t[this._styleMap[o].line]=1);for(var o in this.styles)t[o]||delete this.styles[o]},toObject:function(t){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(t))}}),h.Textbox.fromObject=function(t,o){var c=h.util.stylesFromArray(t.styles,t.text),s=Object.assign({},t,{styles:c});return h.Object._fromObject("Textbox",s,o,"text")}}(Me),function(){var f=V.controlsUtils,h=f.scaleSkewCursorStyleHandler,t=f.scaleCursorStyleHandler,o=f.scalingEqually,c=f.scalingYOrSkewingX,s=f.scalingXOrSkewingY,e=f.scaleOrSkewActionName,a=V.Object.prototype.controls;if(a.ml=new V.Control({x:-.5,y:0,cursorStyleHandler:h,actionHandler:s,getActionName:e}),a.mr=new V.Control({x:.5,y:0,cursorStyleHandler:h,actionHandler:s,getActionName:e}),a.mb=new V.Control({x:0,y:.5,cursorStyleHandler:h,actionHandler:c,getActionName:e}),a.mt=new V.Control({x:0,y:-.5,cursorStyleHandler:h,actionHandler:c,getActionName:e}),a.tl=new V.Control({x:-.5,y:-.5,cursorStyleHandler:t,actionHandler:o}),a.tr=new V.Control({x:.5,y:-.5,cursorStyleHandler:t,actionHandler:o}),a.bl=new V.Control({x:-.5,y:.5,cursorStyleHandler:t,actionHandler:o}),a.br=new V.Control({x:.5,y:.5,cursorStyleHandler:t,actionHandler:o}),a.mtr=new V.Control({x:0,y:-.5,actionHandler:f.rotationWithSnapping,cursorStyleHandler:f.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),V.Textbox){var r=V.Textbox.prototype.controls={};r.mtr=a.mtr,r.tr=a.tr,r.br=a.br,r.tl=a.tl,r.bl=a.bl,r.mt=a.mt,r.mb=a.mb,r.mr=new V.Control({x:.5,y:0,actionHandler:f.changeWidth,cursorStyleHandler:h,actionName:"resizing"}),r.ml=new V.Control({x:-.5,y:0,actionHandler:f.changeWidth,cursorStyleHandler:h,actionName:"resizing"})}}()})(fabric);const PdfPreviewTest_vue_vue_type_style_index_0_scoped_79c459dd_lang="";pdfExports.GlobalWorkerOptions.workerSrc=pdfjsWorker;const _sfc_main={components:{MySigning},setup(){let Me=useSignature(),V="data:application/pdf;base64,";const Be=r=>new Promise((n,l)=>{const u=new FileReader;u.addEventListener("load",()=>n(Me.myPDF=u.result)),u.addEventListener("error",l),u.readAsDataURL(r),Me.isUpload=!0,Me.myData=u.result}),pe=ref(""),de=async r=>{r=await Be(r);const n=atob(r.substring(V.length));console.log(n);const u=await(await pdfExports.getDocument({data:n}).promise).getPage(1),d=u.getViewport({scale:window.devicePixelRatio}),i=document.createElement("canvas"),g=i.getContext("2d");i.height=d.height,i.width=d.width;const x={canvasContext:g,viewport:d};return u.render(x).promise.then(()=>i)},De=async r=>{const n=1/window.devicePixelRatio;return new fabric.fabric.Image(r,{id:"renderPDF",scaleX:n,scaleY:n})},ge=new fabric.fabric.Canvas("canvas"),f=async r=>{ge.requestRenderAll();const n=await de(r.target.files[0]),l=await De(n);ge.setWidth(l.width/window.devicePixelRatio),ge.setHeight(l.height/window.devicePixelRatio),ge.setBackgroundImage(l,ge.renderAll.bind(ge))},h=useSignature(),t=ref("");let o;watch(()=>h.isSave,(r,n)=>{console.log(r,n),o=h.isSave,t.value=h.mySign});const c=ref(!1);return{signStatus:o,clickModify:()=>{console.log("要修改簽名"),c.value=!0},modifySign:()=>{console.log("修改簽名")},deleteSign:()=>{console.log("刪除簽名")},renderCanvas:f,myData:pe}}},_hoisted_1={class:"d-flex flex-row"},_hoisted_2={ref:"canvas",id:"pdfCanvas",width:"500",height:"300"};function _sfc_render(Me,V,Be,pe,de,De){const ge=resolveComponent("my-signing");return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",null,[createBaseVNode("div",null,[createBaseVNode("input",{onChange:V[0]||(V[0]=(...f)=>pe.renderCanvas&&pe.renderCanvas(...f)),type:"file",accept:"application/pdf"},null,32)]),createBaseVNode("canvas",_hoisted_2,null,512)]),createBaseVNode("div",null,[createVNode(ge)])])}const PdfPreviewTest=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-79c459dd"]]);export{PdfPreviewTest as default};
